Starting TestDNSExternalClient on kind-1
Command line go test . -test.timeout 10m0s -count 1 --run "^(TestDNSExternalClient)$\\z" --tags "basic" --test.v
env==[KUBECONFIG=/Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config ARTIFACTS_DIR=/Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/kind-1/TestDNSExternalClient] 

=== RUN   TestDNSExternalClient
time="2021-06-08T17:39:17-07:00" level=info msg="Using Kubeconfig: /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config"
time="2021-06-08T17:39:17-07:00" level=info msg="FORWARDING_PLANE not set, using default forwarder - vpp"
time="2021-06-08T17:39:17-07:00" level=info msg="Creating artifact manager with config: &{4 false /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/kind-1/TestDNSExternalClient}"
time="2021-06-08T17:39:17-07:00" level=error msg="Error during create of test namespace failed to create a namespace: object is being deleted: namespaces \"nsm-system\" already exists"
time="2021-06-08T17:39:17-07:00" level=info msg="Checking availability of API server on 127.0.0.1"
time="2021-06-08T17:39:21-07:00" level=info msg="PING 127.0.0.1 (127.0.0.1): 56 data bytes\n64 bytes from 127.0.0.1: icmp_seq=0 ttl=64 time=0.035 ms\n64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.080 ms\n64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.066 ms\n64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.090 ms\n64 bytes from 127.0.0.1: icmp_seq=4 ttl=64 time=0.102 ms\n\n--- 127.0.0.1 ping statistics ---\n5 packets transmitted, 5 packets received, 0.0%!p(MISSING)acket loss\nround-trip min/avg/max/stddev = 0.035/0.075/0.102/0.023 ms\n"
time="2021-06-08T17:39:21-07:00" level=info msg="Will try to create namespace again after 20 seconds"
time="2021-06-08T17:39:41-07:00" level=info msg="namespace nsm-system is created"
time="2021-06-08T17:39:41-07:00" level=info msg="USE_IPV6 not set, using default false"
time="2021-06-08T17:39:42-07:00" level=error msg="serviceaccounts \"nsc-acc\" not found"
time="2021-06-08T17:39:42-07:00" level=error msg="serviceaccounts \"nse-acc\" not found"
time="2021-06-08T17:39:42-07:00" level=error msg="serviceaccounts \"nsmgr-acc\" not found"
time="2021-06-08T17:39:42-07:00" level=error msg="serviceaccounts \"nsmrs-acc\" not found"
time="2021-06-08T17:39:42-07:00" level=error msg="serviceaccounts \"forward-plane-acc\" not found"
time="2021-06-08T17:39:42-07:00" level=error msg="serviceaccounts \"crossconnect-monitor-acc\" not found"
time="2021-06-08T17:39:42-07:00" level=error msg="serviceaccounts \"proxy-nsmgr-acc\" not found"
time="2021-06-08T17:39:42-07:00" level=info msg="Cleanup done: 824.258674ms"
time="2021-06-08T17:39:42-07:00" level=info msg="&ServiceAccount{ObjectMeta:{default  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/default 2f044af6-1a52-40e4-970d-3cfb5f96150a 5918 0 2021-06-08 17:39:41 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:default-token-mjjzb,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
I0608 17:39:43.933365    2883 request.go:621] Throttling request took 1.167511564s, request: POST:https://127.0.0.1:55080/api/v1/namespaces/nsm-system/serviceaccounts
time="2021-06-08T17:39:44-07:00" level=info msg="&ServiceAccount{ObjectMeta:{nsmrs-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/nsmrs-acc 44245afa-cba7-4322-8363-83bbe0b619c2 5926 0 2021-06-08 17:39:43 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:nsmrs-acc-token-nhnv6,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T17:39:44-07:00" level=info msg="&ServiceAccount{ObjectMeta:{nsc-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/nsc-acc c4645bb6-086d-41fb-8691-9a85f2257062 5931 0 2021-06-08 17:39:43 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:nsc-acc-token-6vlhr,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T17:39:44-07:00" level=info msg="&ServiceAccount{ObjectMeta:{nse-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/nse-acc 052aa3ae-a8c6-4fb6-8742-ab41c7dd050c 5934 0 2021-06-08 17:39:43 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:nse-acc-token-x4cbr,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T17:39:45-07:00" level=info msg="&ServiceAccount{ObjectMeta:{crossconnect-monitor-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/crossconnect-monitor-acc ec761b42-59cd-45a8-8f9c-714fe2c598f2 5938 0 2021-06-08 17:39:43 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:crossconnect-monitor-acc-token-p4vv9,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T17:39:45-07:00" level=info msg="&ServiceAccount{ObjectMeta:{nsmgr-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/nsmgr-acc 60b36699-359e-4541-a0aa-d1dbc71214f0 5941 0 2021-06-08 17:39:43 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:nsmgr-acc-token-gntw2,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T17:39:45-07:00" level=info msg="&ServiceAccount{ObjectMeta:{forward-plane-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/forward-plane-acc 9ab24463-1a4e-4430-9c3d-2e50b0f8209a 5945 0 2021-06-08 17:39:44 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:forward-plane-acc-token-7vjtj,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T17:39:45-07:00" level=info msg="&ServiceAccount{ObjectMeta:{proxy-nsmgr-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/proxy-nsmgr-acc 2588666e-5ab5-4534-8561-992ef643244a 5948 0 2021-06-08 17:39:44 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:proxy-nsmgr-acc-token-7lpkp,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T17:39:45-07:00" level=info msg="Creating ConfigMap 'nsm-config' in namespace'nsm-system'..."
time="2021-06-08T17:39:45-07:00" level=info msg="Using image: containers.cisco.com/appn/prefix-service:vl3_latest"
time="2021-06-08T17:39:45-07:00" level=info msg="Using image: containers.cisco.com/appn/test-common:vl3_latest"
time="2021-06-08T17:39:45-07:00" level=info msg="role is created: &ClusterRoleBinding{ObjectMeta:{nsm-role-binding      0 0001-01-01 00:00:00 +0000 UTC <nil> <nil> map[] map[] [] []  []},Subjects:[]Subject{Subject{Kind:ServiceAccount,APIGroup:,Name:nsmgr-acc,Namespace:nsm-system,},Subject{Kind:ServiceAccount,APIGroup:,Name:proxy-nsmgr-acc,Namespace:nsm-system,},Subject{Kind:ServiceAccount,APIGroup:,Name:crossconnect-monitor-acc,Namespace:nsm-system,},},RoleRef:RoleRef{APIGroup:rbac.authorization.k8s.io,Kind:ClusterRole,Name:nsm-role,},}"
time="2021-06-08T17:39:45-07:00" level=info msg="role is created: &ClusterRole{ObjectMeta:{nsm-role  nsm-system    0 0001-01-01 00:00:00 +0000 UTC <nil> <nil> map[rbac.authorization.k8s.io/aggregate-to-admin:true rbac.authorization.k8s.io/aggregate-to-edit:true] map[] [] []  []},Rules:[]PolicyRule{PolicyRule{Verbs:[*],APIGroups:[networkservicemesh.io],Resources:[networkservices networkserviceendpoints networkservicemanagers],ResourceNames:[],NonResourceURLs:[],},PolicyRule{Verbs:[*],APIGroups:[apiextensions.k8s.io],Resources:[customresourcedefinitions],ResourceNames:[],NonResourceURLs:[],},PolicyRule{Verbs:[get update],APIGroups:[],Resources:[configmaps],ResourceNames:[],NonResourceURLs:[],},PolicyRule{Verbs:[get list watch],APIGroups:[],Resources:[nodes services namespaces],ResourceNames:[],NonResourceURLs:[],},},AggregationRule:nil,}"
time="2021-06-08T17:39:45-07:00" level=info msg="role is created: &ClusterRole{ObjectMeta:{aggregate-network-services-view  nsm-system    0 0001-01-01 00:00:00 +0000 UTC <nil> <nil> map[rbac.authorization.k8s.io/aggregate-to-view:true] map[] [] []  []},Rules:[]PolicyRule{PolicyRule{Verbs:[get list watch],APIGroups:[networkservicemesh.io],Resources:[networkservices],ResourceNames:[],NonResourceURLs:[],},},AggregationRule:nil,}"
time="2021-06-08T17:39:49-07:00" level=info msg="Trying to establish connection with the spire provider at address:tcp://127.0.0.1:63343"
time="2021-06-08T17:39:49-07:00" level=info msg="Created the todo context:tcp://127.0.0.1:63343"
time="2021-06-08T17:39:49-07:00" level=info msg="Got x509:&{0xc000533830 <nil> {{0 0} 0 0 0 0} 0xc000430c80 0xc0009985a0 {{0 0} 0 0 0 0} false} <nil>"
time="2021-06-08T17:39:49-07:00" level=info msg="Started goroutine"
time="2021-06-08T17:39:49-07:00" level=info msg="Returning provider"
time="2021-06-08T17:39:49-07:00" level=info msg="Issued identity:spiffe://test.com/nsmgr"
time="2021-06-08T17:39:49-07:00" level=info msg="secret is created: &Secret{ObjectMeta:{nsm-admission-webhook-certs  nsm-system /api/v1/namespaces/nsm-system/secrets/nsm-admission-webhook-certs b5a760f9-6b2f-4ee7-8ca4-5303f4bfcf25 5990 0 2021-06-08 17:39:49 -0700 PDT <nil> <nil> map[] map[] [] []  []},Data:map[string][]byte{tls.crt: [45 45 45 45 45 66 69 71 73 78 32 67 69 82 84 73 70 73 67 65 84 69 45 45 45 45 45 10 77 73 73 68 100 106 67 67 65 108 54 103 65 119 73 66 65 103 73 69 89 77 65 78 49 84 65 78 66 103 107 113 104 107 105 71 57 119 48 66 65 81 115 70 65 68 65 105 77 83 65 119 72 103 89 68 86 81 81 68 69 120 100 104 10 90 71 49 112 99 51 78 112 98 50 52 116 89 50 57 117 100 72 74 118 98 71 120 108 99 105 49 106 89 84 65 101 70 119 48 121 77 68 65 50 77 68 107 119 77 68 77 53 78 68 108 97 70 119 48 121 77 106 65 50 77 68 107 119 10 77 68 77 53 78 68 108 97 77 67 73 120 73 68 65 101 66 103 78 86 66 65 77 84 70 50 70 107 98 87 108 122 99 50 108 118 98 105 49 106 98 50 53 48 99 109 57 115 98 71 86 121 76 87 78 104 77 73 73 66 73 106 65 78 10 66 103 107 113 104 107 105 71 57 119 48 66 65 81 69 70 65 65 79 67 65 81 56 65 77 73 73 66 67 103 75 67 65 81 69 65 48 88 65 117 85 119 108 117 51 79 119 111 82 73 56 70 106 109 77 104 111 112 113 79 50 101 67 115 10 48 115 79 109 115 102 103 83 104 50 68 77 52 79 86 81 102 76 55 109 79 121 49 50 117 66 66 74 116 70 109 103 101 67 115 111 76 117 70 56 100 43 75 81 83 112 81 113 90 114 104 122 105 56 98 100 86 56 98 120 89 47 97 56 10 72 84 90 102 116 79 85 120 48 81 106 102 113 52 101 111 116 56 53 69 79 50 117 112 109 71 122 43 81 86 112 118 55 89 110 89 66 74 49 48 98 73 50 113 67 102 47 43 54 119 114 74 120 83 55 121 73 56 101 67 111 106 100 81 10 86 71 87 69 106 47 52 81 48 69 65 71 121 98 76 69 107 69 113 110 121 122 99 76 55 69 81 76 51 55 119 65 82 105 120 53 113 81 43 68 65 102 66 97 50 99 87 50 52 108 115 87 88 106 52 71 84 56 53 107 71 113 100 115 10 121 110 79 71 118 103 113 84 47 98 111 69 66 89 101 106 81 90 85 43 110 83 97 75 117 111 110 98 79 74 71 120 121 43 121 106 57 101 69 115 108 80 51 86 81 69 107 47 90 103 104 107 50 90 102 55 118 50 106 74 71 51 72 118 10 118 81 100 51 80 85 103 108 107 81 117 104 49 84 78 90 49 112 100 116 75 101 88 118 114 104 55 102 84 56 112 73 98 87 48 122 122 52 65 76 121 69 115 85 78 121 122 56 87 83 112 88 97 79 86 86 107 119 73 68 65 81 65 66 10 111 52 71 122 77 73 71 119 77 65 52 71 65 49 85 100 68 119 69 66 47 119 81 69 65 119 73 67 112 68 65 84 66 103 78 86 72 83 85 69 68 68 65 75 66 103 103 114 66 103 69 70 66 81 99 68 65 84 65 80 66 103 78 86 10 72 82 77 66 65 102 56 69 66 84 65 68 65 81 72 47 77 66 48 71 65 49 85 100 68 103 81 87 66 66 82 74 121 52 107 78 74 75 109 120 83 77 88 78 54 76 57 71 103 81 47 43 83 113 70 100 101 106 66 90 66 103 78 86 10 72 82 69 69 85 106 66 81 103 105 82 117 99 50 48 116 89 87 82 116 97 88 78 122 97 87 57 117 76 88 100 108 89 109 104 118 98 50 115 116 99 51 90 106 76 109 53 122 98 83 49 122 101 88 78 48 90 87 50 67 75 71 53 122 10 98 83 49 104 90 71 49 112 99 51 78 112 98 50 52 116 100 50 86 105 97 71 57 118 97 121 49 122 100 109 77 117 98 110 78 116 76 88 78 53 99 51 82 108 98 83 53 122 100 109 77 119 68 81 89 74 75 111 90 73 104 118 99 78 10 65 81 69 76 66 81 65 68 103 103 69 66 65 71 90 50 102 57 69 106 81 49 57 67 56 53 88 121 79 57 104 70 74 115 117 90 68 109 54 103 72 83 88 119 55 88 47 112 80 89 70 104 108 87 89 79 89 47 52 50 114 110 111 101 10 114 97 55 67 119 108 67 119 98 101 76 81 108 114 57 88 85 111 77 88 100 82 116 116 120 77 98 73 47 112 82 82 56 119 121 113 55 69 80 102 75 110 116 82 88 49 114 106 80 85 115 74 98 56 49 88 53 72 70 52 66 74 118 102 10 99 75 76 48 43 77 113 103 55 75 76 108 89 82 66 71 48 103 75 77 70 117 71 55 49 48 67 75 121 106 65 119 47 104 52 77 106 87 101 51 110 118 106 67 118 116 82 77 102 43 48 56 70 113 68 48 51 82 69 83 76 52 87 85 10 102 101 74 67 117 89 89 56 48 101 43 85 67 111 115 75 74 66 99 101 55 66 90 104 116 72 55 110 122 97 65 49 103 107 115 82 43 51 72 86 98 55 98 70 100 108 121 104 118 43 80 75 114 121 122 121 106 82 79 57 75 50 114 118 10 90 67 85 52 76 83 103 98 101 65 116 81 67 67 51 83 54 57 97 87 54 68 66 78 103 100 50 116 105 103 101 66 52 72 99 57 66 68 77 79 86 105 111 81 102 98 50 98 70 81 115 117 72 115 111 90 53 79 70 48 119 112 57 51 10 72 80 112 86 81 49 98 66 81 56 112 74 72 80 53 116 51 108 112 53 70 70 52 51 90 55 65 106 74 118 83 54 98 109 107 61 10 45 45 45 45 45 69 78 68 32 67 69 82 84 73 70 73 67 65 84 69 45 45 45 45 45 10],tls.key: [45 45 45 45 45 66 69 71 73 78 32 82 83 65 32 80 82 73 86 65 84 69 32 75 69 89 45 45 45 45 45 10 77 73 73 69 112 65 73 66 65 65 75 67 65 81 69 65 48 88 65 117 85 119 108 117 51 79 119 111 82 73 56 70 106 109 77 104 111 112 113 79 50 101 67 115 48 115 79 109 115 102 103 83 104 50 68 77 52 79 86 81 102 76 55 109 10 79 121 49 50 117 66 66 74 116 70 109 103 101 67 115 111 76 117 70 56 100 43 75 81 83 112 81 113 90 114 104 122 105 56 98 100 86 56 98 120 89 47 97 56 72 84 90 102 116 79 85 120 48 81 106 102 113 52 101 111 116 56 53 69 10 79 50 117 112 109 71 122 43 81 86 112 118 55 89 110 89 66 74 49 48 98 73 50 113 67 102 47 43 54 119 114 74 120 83 55 121 73 56 101 67 111 106 100 81 86 71 87 69 106 47 52 81 48 69 65 71 121 98 76 69 107 69 113 110 10 121 122 99 76 55 69 81 76 51 55 119 65 82 105 120 53 113 81 43 68 65 102 66 97 50 99 87 50 52 108 115 87 88 106 52 71 84 56 53 107 71 113 100 115 121 110 79 71 118 103 113 84 47 98 111 69 66 89 101 106 81 90 85 43 10 110 83 97 75 117 111 110 98 79 74 71 120 121 43 121 106 57 101 69 115 108 80 51 86 81 69 107 47 90 103 104 107 50 90 102 55 118 50 106 74 71 51 72 118 118 81 100 51 80 85 103 108 107 81 117 104 49 84 78 90 49 112 100 116 10 75 101 88 118 114 104 55 102 84 56 112 73 98 87 48 122 122 52 65 76 121 69 115 85 78 121 122 56 87 83 112 88 97 79 86 86 107 119 73 68 65 81 65 66 65 111 73 66 65 70 66 118 116 122 114 111 43 111 48 97 110 102 83 71 10 119 87 109 73 74 82 106 103 74 49 69 67 101 120 50 80 83 117 119 55 68 70 75 50 71 76 109 102 71 75 82 119 90 78 103 66 104 65 68 53 77 72 86 49 110 113 51 73 86 87 120 55 54 87 80 90 118 102 85 71 112 113 112 65 10 50 81 43 114 49 115 75 112 103 51 103 84 65 80 104 118 77 53 54 48 68 56 102 113 107 111 121 56 85 48 52 85 105 66 119 83 73 49 97 74 78 98 85 47 50 74 68 119 83 101 105 114 50 70 85 65 113 51 101 102 117 47 88 108 10 100 77 121 111 86 82 76 115 119 118 48 117 74 85 110 107 109 49 55 54 65 116 99 89 89 65 77 67 86 83 100 52 104 99 85 100 109 115 85 83 66 54 100 122 56 90 117 121 111 113 50 48 74 100 43 57 48 87 90 102 56 48 53 119 10 43 43 48 101 82 55 97 75 84 90 49 81 74 114 100 89 54 55 77 119 88 121 43 76 69 113 84 82 52 106 101 113 81 75 80 109 116 109 54 86 103 67 115 98 76 117 80 48 110 115 100 74 52 81 86 82 84 52 78 89 122 67 87 118 10 84 122 102 121 77 90 55 75 56 72 84 84 97 112 54 69 49 56 82 49 114 54 90 106 82 97 98 116 80 84 84 115 71 52 109 81 65 68 66 83 55 89 70 69 83 68 119 52 70 56 53 82 120 71 104 48 47 84 73 74 81 83 90 114 10 76 100 50 115 85 112 69 67 103 89 69 65 43 85 99 69 85 50 53 72 67 116 117 53 49 120 101 77 50 85 105 97 55 117 107 79 118 53 116 101 77 88 87 113 110 98 77 54 74 101 102 82 71 99 76 122 51 78 116 67 116 51 66 76 10 89 71 122 72 116 53 78 53 84 74 78 117 101 109 86 117 114 114 103 49 81 87 70 75 86 74 104 67 51 100 107 50 71 70 49 106 72 53 75 76 57 51 117 115 111 114 105 51 88 49 78 56 52 122 52 89 104 67 121 114 80 115 101 75 10 86 84 88 89 75 108 50 74 114 115 78 86 97 73 52 52 116 104 115 75 75 112 43 117 52 117 85 98 86 67 105 103 48 113 47 55 83 82 104 55 120 70 111 108 113 49 83 43 107 103 103 103 115 87 56 67 103 89 69 65 49 120 89 101 10 89 116 55 79 72 98 103 98 81 86 117 47 76 108 69 119 48 69 69 75 121 56 104 87 68 52 52 101 78 115 72 69 49 66 87 57 83 82 105 122 49 106 122 43 49 107 85 108 120 52 89 114 84 84 67 117 53 57 71 57 84 109 43 70 10 99 47 70 54 120 99 80 50 70 98 81 81 43 65 115 66 105 90 43 97 57 65 83 79 108 73 48 51 51 87 89 54 86 78 102 51 101 49 115 76 107 65 54 83 83 47 97 83 104 52 113 71 86 101 121 103 117 100 51 121 75 83 106 101 10 73 88 76 73 68 54 113 87 48 101 118 71 71 54 112 99 97 121 87 54 74 109 89 57 100 122 98 80 54 102 49 119 119 72 101 77 104 66 48 67 103 89 65 68 111 101 104 76 79 118 69 111 70 70 109 90 54 56 114 117 111 54 77 50 10 86 103 107 84 43 55 83 99 114 101 86 70 108 81 89 69 53 87 76 106 113 68 97 98 103 107 112 118 108 43 66 82 85 71 82 56 112 86 97 65 75 105 110 83 43 77 86 114 73 70 52 79 84 78 101 106 99 102 67 80 103 81 110 76 10 119 120 105 100 114 105 111 66 43 106 104 105 121 113 82 74 98 70 77 71 107 76 73 85 119 118 51 102 49 86 75 76 117 86 81 107 69 101 98 101 117 66 80 51 105 82 77 69 102 70 74 105 109 112 56 87 121 86 88 106 110 81 47 121 10 52 103 79 99 90 104 72 118 111 52 121 109 43 88 52 112 98 74 114 108 87 119 75 66 103 81 67 50 86 56 73 97 47 57 105 116 121 85 56 82 56 98 51 54 102 107 112 114 119 122 104 114 50 115 78 98 72 74 106 119 119 119 85 105 10 53 43 115 52 57 81 66 66 79 67 83 122 99 112 117 56 115 122 111 121 106 110 115 53 102 77 54 73 109 72 77 68 65 69 50 100 75 54 121 77 97 99 79 90 66 88 117 103 79 80 99 99 117 71 66 73 65 66 68 69 87 99 53 74 10 55 50 50 88 51 109 47 72 67 82 78 116 52 118 81 71 104 75 71 117 90 112 85 55 47 98 85 50 118 55 98 82 108 73 87 88 65 111 65 113 74 48 65 107 90 67 70 70 108 81 53 106 84 51 110 56 102 122 78 48 111 54 47 97 10 43 51 55 99 52 81 75 66 103 81 67 114 72 109 105 111 54 90 88 121 71 117 47 109 48 74 85 85 113 112 72 115 116 54 111 112 108 68 66 117 98 111 52 119 80 56 47 67 102 119 50 47 65 84 56 101 76 99 75 56 77 121 122 68 10 119 82 81 112 52 75 71 85 105 51 49 73 66 103 47 103 79 114 83 98 102 50 118 81 102 116 79 74 71 73 106 101 74 65 119 102 108 55 99 107 56 56 78 103 118 72 109 53 117 53 80 66 55 54 114 69 50 65 109 110 101 79 120 101 10 53 65 115 52 55 103 49 56 103 72 106 117 75 100 117 75 99 119 85 87 67 90 79 99 112 90 66 97 113 90 43 77 66 56 53 65 115 118 88 104 54 56 82 81 50 120 105 106 110 80 115 85 57 81 61 61 10 45 45 45 45 45 69 78 68 32 82 83 65 32 80 82 73 86 65 84 69 32 75 69 89 45 45 45 45 45 10],},Type:kubernetes.io/tls,StringData:map[string]string{},Immutable:nil,}"
time="2021-06-08T17:39:49-07:00" level=info msg="Service is created: &Service{ObjectMeta:{nsm-admission-webhook-svc  nsm-system /api/v1/namespaces/nsm-system/services/nsm-admission-webhook-svc 6607fe69-0093-4775-b294-2dca9274b5f4 5992 0 2021-06-08 17:39:49 -0700 PDT <nil> <nil> map[app:nsm-admission-webhook] map[] [] []  []},Spec:ServiceSpec{Ports:[]ServicePort{ServicePort{Name:,Protocol:TCP,Port:443,TargetPort:{0 443 },NodePort:0,AppProtocol:nil,},},Selector:map[string]string{app: nsm-admission-webhook,},ClusterIP:10.96.108.227,Type:ClusterIP,ExternalIPs:[],SessionAffinity:None,LoadBalancerIP:,LoadBalancerSourceRanges:[],ExternalName:,ExternalTrafficPolicy:,HealthCheckNodePort:0,PublishNotReadyAddresses:false,SessionAffinityConfig:nil,IPFamily:nil,TopologyKeys:[],},Status:ServiceStatus{LoadBalancer:LoadBalancerStatus{Ingress:[]LoadBalancerIngress{},},},}"
time="2021-06-08T17:39:49-07:00" level=info msg="Using image: containers.cisco.com/appn/admission-webhook:vl3_latest"
time="2021-06-08T17:39:49-07:00" level=info msg="Deployment is created: &Deployment{ObjectMeta:{nsm-admission-webhook  nsm-system /apis/apps/v1/namespaces/nsm-system/deployments/nsm-admission-webhook 85689648-3502-4581-9e6a-1d010094c312 5994 1 2021-06-08 17:39:49 -0700 PDT <nil> <nil> map[app:nsm-admission-webhook] map[] [] []  []},Spec:DeploymentSpec{Replicas:*1,Selector:&v1.LabelSelector{MatchLabels:map[string]string{app: nsm-admission-webhook,},MatchExpressions:[]LabelSelectorRequirement{},},Template:{{      0 0001-01-01 00:00:00 +0000 UTC <nil> <nil> map[app:nsm-admission-webhook] map[] [] []  []} {[{webhook-certs {nil nil nil nil nil SecretVolumeSource{SecretName:nsm-admission-webhook-certs,Items:[]KeyToPath{},DefaultMode:*420,Optional:nil,} nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil}}] [] [{nsm-admission-webhook containers.cisco.com/appn/admission-webhook:vl3_latest [] []  [] [] [{TAG vl3_latest nil} {REPO containers.cisco.com/appn nil} {INSECURE true nil}] {map[] map[]} [{webhook-certs true /etc/webhook/certs  <nil> }] [] &Probe{Handler:Handler{Exec:nil,HTTPGet:&HTTPGetAction{Path:/liveness,Port:{0 5555 },Host:,Scheme:HTTP,HTTPHeaders:[]HTTPHeader{},},TCPSocket:nil,},InitialDelaySeconds:1,TimeoutSeconds:10,PeriodSeconds:3,SuccessThreshold:1,FailureThreshold:3,} &Probe{Handler:Handler{Exec:nil,HTTPGet:&HTTPGetAction{Path:/readiness,Port:{0 5555 },Host:,Scheme:HTTP,HTTPHeaders:[]HTTPHeader{},},TCPSocket:nil,},InitialDelaySeconds:1,TimeoutSeconds:10,PeriodSeconds:3,SuccessThreshold:1,FailureThreshold:3,} nil nil /dev/termination-log File IfNotPresent nil false false false}] [] Always 0xc000693dd8 <nil> ClusterFirst map[]   <nil>  false false false <nil> &PodSecurityContext{SELinuxOptions:nil,RunAsUser:nil,RunAsNonRoot:nil,SupplementalGroups:[],FSGroup:nil,RunAsGroup:nil,Sysctls:[]Sysctl{},WindowsOptions:nil,FSGroupChangePolicy:nil,} []   nil default-scheduler [] []  <nil> nil [] <nil> <nil> <nil> map[] []}},Strategy:DeploymentStrategy{Type:RollingUpdate,RollingUpdate:&RollingUpdateDeployment{MaxUnavailable:25%,MaxSurge:25%,},},MinReadySeconds:0,RevisionHistoryLimit:*10,Paused:false,ProgressDeadlineSeconds:*600,},Status:DeploymentStatus{ObservedGeneration:0,Replicas:0,UpdatedReplicas:0,AvailableReplicas:0,UnavailableReplicas:0,Conditions:[]DeploymentCondition{},ReadyReplicas:0,CollisionCount:nil,},}"
time="2021-06-08T17:39:52-07:00" level=info msg="MutatingWebhookConfiguration is created: &MutatingWebhookConfiguration{ObjectMeta:{nsm-admission-webhook-cfg   /apis/admissionregistration.k8s.io/v1beta1/mutatingwebhookconfigurations/nsm-admission-webhook-cfg af2cbc78-ee93-4728-ad1e-7503351acf84 6025 1 2021-06-08 17:39:52 -0700 PDT <nil> <nil> map[app:nsm-admission-webhook] map[] [] []  []},Webhooks:[]MutatingWebhook{MutatingWebhook{Name:admission-webhook.networkservicemesh.io,ClientConfig:WebhookClientConfig{Service:&ServiceReference{Namespace:nsm-system,Name:nsm-admission-webhook-svc,Path:*/mutate,Port:*443,},CABundle:*[45 45 45 45 45 66 69 71 73 78 32 67 69 82 84 73 70 73 67 65 84 69 45 45 45 45 45 10 77 73 73 68 100 106 67 67 65 108 54 103 65 119 73 66 65 103 73 69 89 77 65 78 49 84 65 78 66 103 107 113 104 107 105 71 57 119 48 66 65 81 115 70 65 68 65 105 77 83 65 119 72 103 89 68 86 81 81 68 69 120 100 104 10 90 71 49 112 99 51 78 112 98 50 52 116 89 50 57 117 100 72 74 118 98 71 120 108 99 105 49 106 89 84 65 101 70 119 48 121 77 68 65 50 77 68 107 119 77 68 77 53 78 68 108 97 70 119 48 121 77 106 65 50 77 68 107 119 10 77 68 77 53 78 68 108 97 77 67 73 120 73 68 65 101 66 103 78 86 66 65 77 84 70 50 70 107 98 87 108 122 99 50 108 118 98 105 49 106 98 50 53 48 99 109 57 115 98 71 86 121 76 87 78 104 77 73 73 66 73 106 65 78 10 66 103 107 113 104 107 105 71 57 119 48 66 65 81 69 70 65 65 79 67 65 81 56 65 77 73 73 66 67 103 75 67 65 81 69 65 48 88 65 117 85 119 108 117 51 79 119 111 82 73 56 70 106 109 77 104 111 112 113 79 50 101 67 115 10 48 115 79 109 115 102 103 83 104 50 68 77 52 79 86 81 102 76 55 109 79 121 49 50 117 66 66 74 116 70 109 103 101 67 115 111 76 117 70 56 100 43 75 81 83 112 81 113 90 114 104 122 105 56 98 100 86 56 98 120 89 47 97 56 10 72 84 90 102 116 79 85 120 48 81 106 102 113 52 101 111 116 56 53 69 79 50 117 112 109 71 122 43 81 86 112 118 55 89 110 89 66 74 49 48 98 73 50 113 67 102 47 43 54 119 114 74 120 83 55 121 73 56 101 67 111 106 100 81 10 86 71 87 69 106 47 52 81 48 69 65 71 121 98 76 69 107 69 113 110 121 122 99 76 55 69 81 76 51 55 119 65 82 105 120 53 113 81 43 68 65 102 66 97 50 99 87 50 52 108 115 87 88 106 52 71 84 56 53 107 71 113 100 115 10 121 110 79 71 118 103 113 84 47 98 111 69 66 89 101 106 81 90 85 43 110 83 97 75 117 111 110 98 79 74 71 120 121 43 121 106 57 101 69 115 108 80 51 86 81 69 107 47 90 103 104 107 50 90 102 55 118 50 106 74 71 51 72 118 10 118 81 100 51 80 85 103 108 107 81 117 104 49 84 78 90 49 112 100 116 75 101 88 118 114 104 55 102 84 56 112 73 98 87 48 122 122 52 65 76 121 69 115 85 78 121 122 56 87 83 112 88 97 79 86 86 107 119 73 68 65 81 65 66 10 111 52 71 122 77 73 71 119 77 65 52 71 65 49 85 100 68 119 69 66 47 119 81 69 65 119 73 67 112 68 65 84 66 103 78 86 72 83 85 69 68 68 65 75 66 103 103 114 66 103 69 70 66 81 99 68 65 84 65 80 66 103 78 86 10 72 82 77 66 65 102 56 69 66 84 65 68 65 81 72 47 77 66 48 71 65 49 85 100 68 103 81 87 66 66 82 74 121 52 107 78 74 75 109 120 83 77 88 78 54 76 57 71 103 81 47 43 83 113 70 100 101 106 66 90 66 103 78 86 10 72 82 69 69 85 106 66 81 103 105 82 117 99 50 48 116 89 87 82 116 97 88 78 122 97 87 57 117 76 88 100 108 89 109 104 118 98 50 115 116 99 51 90 106 76 109 53 122 98 83 49 122 101 88 78 48 90 87 50 67 75 71 53 122 10 98 83 49 104 90 71 49 112 99 51 78 112 98 50 52 116 100 50 86 105 97 71 57 118 97 121 49 122 100 109 77 117 98 110 78 116 76 88 78 53 99 51 82 108 98 83 53 122 100 109 77 119 68 81 89 74 75 111 90 73 104 118 99 78 10 65 81 69 76 66 81 65 68 103 103 69 66 65 71 90 50 102 57 69 106 81 49 57 67 56 53 88 121 79 57 104 70 74 115 117 90 68 109 54 103 72 83 88 119 55 88 47 112 80 89 70 104 108 87 89 79 89 47 52 50 114 110 111 101 10 114 97 55 67 119 108 67 119 98 101 76 81 108 114 57 88 85 111 77 88 100 82 116 116 120 77 98 73 47 112 82 82 56 119 121 113 55 69 80 102 75 110 116 82 88 49 114 106 80 85 115 74 98 56 49 88 53 72 70 52 66 74 118 102 10 99 75 76 48 43 77 113 103 55 75 76 108 89 82 66 71 48 103 75 77 70 117 71 55 49 48 67 75 121 106 65 119 47 104 52 77 106 87 101 51 110 118 106 67 118 116 82 77 102 43 48 56 70 113 68 48 51 82 69 83 76 52 87 85 10 102 101 74 67 117 89 89 56 48 101 43 85 67 111 115 75 74 66 99 101 55 66 90 104 116 72 55 110 122 97 65 49 103 107 115 82 43 51 72 86 98 55 98 70 100 108 121 104 118 43 80 75 114 121 122 121 106 82 79 57 75 50 114 118 10 90 67 85 52 76 83 103 98 101 65 116 81 67 67 51 83 54 57 97 87 54 68 66 78 103 100 50 116 105 103 101 66 52 72 99 57 66 68 77 79 86 105 111 81 102 98 50 98 70 81 115 117 72 115 111 90 53 79 70 48 119 112 57 51 10 72 80 112 86 81 49 98 66 81 56 112 74 72 80 53 116 51 108 112 53 70 70 52 51 90 55 65 106 74 118 83 54 98 109 107 61 10 45 45 45 45 45 69 78 68 32 67 69 82 84 73 70 73 67 65 84 69 45 45 45 45 45 10],URL:nil,},Rules:[]RuleWithOperations{RuleWithOperations{Operations:[CREATE],Rule:Rule{APIGroups:[apps extensions ],APIVersions:[v1 v1beta1],Resources:[deployments services pods],Scope:**,},},},FailurePolicy:*Ignore,NamespaceSelector:&v1.LabelSelector{MatchLabels:map[string]string{},MatchExpressions:[]LabelSelectorRequirement{},},SideEffects:*Unknown,TimeoutSeconds:*30,AdmissionReviewVersions:[v1beta1],MatchPolicy:*Exact,ReinvocationPolicy:*Never,ObjectSelector:&v1.LabelSelector{MatchLabels:map[string]string{},MatchExpressions:[]LabelSelectorRequirement{},},},},}"
time="2021-06-08T17:39:52-07:00" level=info msg="Creating ConfigMap 'icmp-responder-corefile' in namespace'nsm-system'..."
time="2021-06-08T17:39:52-07:00" level=info msg="Checking node: kind-1-control-plane"
time="2021-06-08T17:39:52-07:00" level=info msg="Checking node: kind-1-worker"
time="2021-06-08T17:39:52-07:00" level=info msg="Checking node: kind-1-worker2"
time="2021-06-08T17:39:52-07:00" level=info msg="Using image: jaegertracing/all-in-one:1.14.0"
time="2021-06-08T17:39:55-07:00" level=info msg="getting logs without container jaeger=none"
time="2021-06-08T17:39:55-07:00" level=info msg="Using image: containers.cisco.com/appn/nsmdp:vl3_latest"
time="2021-06-08T17:39:55-07:00" level=info msg="Using image: containers.cisco.com/appn/nsmd:vl3_latest"
time="2021-06-08T17:39:55-07:00" level=info msg="Using image: containers.cisco.com/appn/nsmd-k8s:vl3_latest"
time="2021-06-08T17:39:55-07:00" level=info msg="Using image: containers.cisco.com/appn/vppagent-forwarder:vl3_latest"
time="2021-06-08T17:40:05-07:00" level=info msg="Started NSMgr/Forwarder: 9.811191125s on node kind-1-worker"
time="2021-06-08T17:40:05-07:00" level=info msg="Using image: containers.cisco.com/appn/test-common:vl3_latest"
time="2021-06-08T17:40:05-07:00" level=info msg="Using image: networkservicemesh/coredns:master"
time="2021-06-08T17:40:05-07:00" level=info msg="Starting ICMP Responder NSE on node: kind-1-worker "
time="2021-06-08T17:40:07-07:00" level=info msg="ICMP Responder icmp-responder started done: 2.197123396s"
time="2021-06-08T17:40:07-07:00" level=info msg="Starting NSC nsc-1 on node: kind-1-worker"
time="2021-06-08T17:40:12-07:00" level=info msg="NSC started done: 5.200223668s"
time="2021-06-08T17:40:12-07:00" level=info msg="Trying ping from container alpine-img host by name icmp.app."
time="2021-06-08T17:40:12-07:00" level=info msg="Executing: [ping icmp.app. -c 4] in pod nsc-1:alpine-img"
time="2021-06-08T17:40:15-07:00" level=info msg="Ping by hostname is success. Response PING icmp.app. (172.16.1.2): 56 data bytes\n64 bytes from 172.16.1.2: seq=0 ttl=64 time=1.777 ms\n64 bytes from 172.16.1.2: seq=1 ttl=64 time=3.324 ms\n64 bytes from 172.16.1.2: seq=2 ttl=64 time=2.493 ms\n64 bytes from 172.16.1.2: seq=3 ttl=64 time=3.096 ms\n\n--- icmp.app. ping statistics ---\n4 packets transmitted, 4 packets received, 0% packet loss\nround-trip min/avg/max = 1.777/2.672/3.324 ms\n"
time="2021-06-08T17:40:15-07:00" level=info msg="Deleting jaeger"
time="2021-06-08T17:40:15-07:00" level=info msg="Deleting nsmd-forwarder-kind-1-worker"
time="2021-06-08T17:40:15-07:00" level=info msg="Deleting nsc-1"
time="2021-06-08T17:40:15-07:00" level=info msg="Deleting nsmgr-kind-1-worker"
E0608 17:40:15.716570    2883 portforward.go:409] error closing listener: close tcp4 127.0.0.1:63343: use of closed network connection
time="2021-06-08T17:40:15-07:00" level=info msg="Deleting spire-proxy"
time="2021-06-08T17:40:15-07:00" level=info msg="Deleting icmp-responder"
E0608 17:40:15.717200    2883 portforward.go:409] error closing listener: close tcp6 [::1]:63343: use of closed network connection
time="2021-06-08T17:40:15-07:00" level=info msg="Deleting prefix-service"
time="2021-06-08T17:40:15-07:00" level=error msg="An error during delete service: nsm-admission-webhook-svc, err: services \"nsm-admission-webhook-svc\" not found"
I0608 17:40:16.863582    2883 request.go:621] Throttling request took 1.077934435s, request: GET:https://127.0.0.1:55080/api/v1/namespaces/nsm-system/pods/spire-proxy
time="2021-06-08T17:40:16-07:00" level=warning msg="The POD 'spire-proxy' Deleted 1.152746113s"
time="2021-06-08T17:40:17-07:00" level=warning msg="The POD 'nsmd-forwarder-kind-1-worker' Deleted 1.355280515s"
time="2021-06-08T17:40:17-07:00" level=warning msg="The POD 'icmp-responder' Deleted 1.952852497s"
time="2021-06-08T17:40:17-07:00" level=warning msg="The POD 'prefix-service' Deleted 2.153611275s"
time="2021-06-08T17:40:23-07:00" level=warning msg="The POD 'nsmgr-kind-1-worker' Deleted 8.152474511s"
time="2021-06-08T17:40:24-07:00" level=warning msg="The POD 'jaeger' Deleted 8.352830831s"
time="2021-06-08T17:40:31-07:00" level=info msg="The POD nsc-1 force deleted"
time="2021-06-08T17:40:31-07:00" level=warning msg="The POD 'nsc-1' Deleted 15.75309378s"
time="2021-06-08T17:40:31-07:00" level=info msg="namespace nsm-system is deleted"
time="2021-06-08T17:40:31-07:00" level=info msg="Cleanup time: 15.955235118s"
--- PASS: TestDNSExternalClient (73.77s)
PASS
ok  	github.com/networkservicemesh/networkservicemesh/test/integration	74.230s
