Starting TestNSMgrRestartRestoreNSE on kind-1
Command line go test . -test.timeout 10m0s -count 1 --run "^(TestNSMgrRestartRestoreNSE)$\\z" --tags "basic" --test.v
env==[KUBECONFIG=/Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config ARTIFACTS_DIR=/Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/kind-1/TestNSMgrRestartRestoreNSE] 

=== RUN   TestNSMgrRestartRestoreNSE
time="2021-06-08T19:21:46-07:00" level=info msg="Using Kubeconfig: /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config"
time="2021-06-08T19:21:46-07:00" level=info msg="FORWARDING_PLANE not set, using default forwarder - vpp"
time="2021-06-08T19:21:46-07:00" level=info msg="Creating artifact manager with config: &{4 false /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/kind-1/TestNSMgrRestartRestoreNSE}"
time="2021-06-08T19:21:46-07:00" level=error msg="Error during create of test namespace failed to create a namespace: namespaces \"nsm-system\" already exists"
time="2021-06-08T19:21:46-07:00" level=info msg="Checking availability of API server on 127.0.0.1"
time="2021-06-08T19:21:50-07:00" level=info msg="PING 127.0.0.1 (127.0.0.1): 56 data bytes\n64 bytes from 127.0.0.1: icmp_seq=0 ttl=64 time=0.043 ms\n64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.161 ms\n64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.164 ms\n64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.068 ms\n64 bytes from 127.0.0.1: icmp_seq=4 ttl=64 time=0.154 ms\n\n--- 127.0.0.1 ping statistics ---\n5 packets transmitted, 5 packets received, 0.0%!p(MISSING)acket loss\nround-trip min/avg/max/stddev = 0.043/0.118/0.164/0.052 ms\n"
time="2021-06-08T19:21:50-07:00" level=info msg="USE_IPV6 not set, using default false"
time="2021-06-08T19:21:50-07:00" level=error msg="serviceaccounts \"nsc-acc\" not found"
time="2021-06-08T19:21:50-07:00" level=error msg="serviceaccounts \"nse-acc\" not found"
time="2021-06-08T19:21:50-07:00" level=error msg="serviceaccounts \"nsmgr-acc\" not found"
time="2021-06-08T19:21:50-07:00" level=error msg="serviceaccounts \"nsmrs-acc\" not found"
time="2021-06-08T19:21:50-07:00" level=error msg="serviceaccounts \"forward-plane-acc\" not found"
time="2021-06-08T19:21:50-07:00" level=error msg="serviceaccounts \"crossconnect-monitor-acc\" not found"
time="2021-06-08T19:21:51-07:00" level=error msg="serviceaccounts \"proxy-nsmgr-acc\" not found"
time="2021-06-08T19:21:51-07:00" level=info msg="Cleanup done: 840.296107ms"
time="2021-06-08T19:21:51-07:00" level=info msg="&ServiceAccount{ObjectMeta:{default  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/default 1766604e-35aa-4f74-8394-94c37843a6d7 3063 0 2021-06-08 19:21:39 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:default-token-lvfkh,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
I0608 19:21:52.359836   22882 request.go:621] Throttling request took 1.164203764s, request: POST:https://127.0.0.1:55081/api/v1/namespaces/nsm-system/serviceaccounts
time="2021-06-08T19:21:52-07:00" level=info msg="&ServiceAccount{ObjectMeta:{nsmgr-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/nsmgr-acc 72718225-cd1f-414a-8a6d-d9e6768bc48d 3131 0 2021-06-08 19:21:51 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:nsmgr-acc-token-8sx55,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T19:21:53-07:00" level=info msg="&ServiceAccount{ObjectMeta:{nsmrs-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/nsmrs-acc d0d14289-2fce-425f-9fdc-36a9761a8bd5 3134 0 2021-06-08 19:21:51 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:nsmrs-acc-token-7tsc6,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T19:21:53-07:00" level=info msg="&ServiceAccount{ObjectMeta:{nse-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/nse-acc 97d37b9a-04c7-48ae-be2d-70a1fbff93b3 3137 0 2021-06-08 19:21:51 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:nse-acc-token-c4sl6,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T19:21:53-07:00" level=info msg="&ServiceAccount{ObjectMeta:{forward-plane-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/forward-plane-acc 9bab5b12-9871-4636-9597-e8b006622c37 3140 0 2021-06-08 19:21:52 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:forward-plane-acc-token-sncwj,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T19:21:53-07:00" level=info msg="&ServiceAccount{ObjectMeta:{crossconnect-monitor-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/crossconnect-monitor-acc ddbdd5f4-f79c-4ff1-ae64-220aff7a96ff 3143 0 2021-06-08 19:21:52 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:crossconnect-monitor-acc-token-fnt57,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T19:21:53-07:00" level=info msg="&ServiceAccount{ObjectMeta:{proxy-nsmgr-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/proxy-nsmgr-acc 9bcf7009-75d6-4059-b1c5-5f78f309e46f 3146 0 2021-06-08 19:21:52 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:proxy-nsmgr-acc-token-787kg,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T19:21:54-07:00" level=info msg="&ServiceAccount{ObjectMeta:{nsc-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/nsc-acc 5f23cb1f-1451-4f57-a2d6-f1054195f658 3150 0 2021-06-08 19:21:52 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:nsc-acc-token-hvkfs,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T19:21:54-07:00" level=info msg="Creating ConfigMap 'nsm-config' in namespace'nsm-system'..."
time="2021-06-08T19:21:54-07:00" level=info msg="Using image: containers.cisco.com/appn/prefix-service:vl3_latest"
time="2021-06-08T19:21:54-07:00" level=info msg="Using image: containers.cisco.com/appn/test-common:vl3_latest"
time="2021-06-08T19:21:54-07:00" level=info msg="role is created: &ClusterRole{ObjectMeta:{nsm-role  nsm-system    0 0001-01-01 00:00:00 +0000 UTC <nil> <nil> map[rbac.authorization.k8s.io/aggregate-to-admin:true rbac.authorization.k8s.io/aggregate-to-edit:true] map[] [] []  []},Rules:[]PolicyRule{PolicyRule{Verbs:[*],APIGroups:[networkservicemesh.io],Resources:[networkservices networkserviceendpoints networkservicemanagers],ResourceNames:[],NonResourceURLs:[],},PolicyRule{Verbs:[*],APIGroups:[apiextensions.k8s.io],Resources:[customresourcedefinitions],ResourceNames:[],NonResourceURLs:[],},PolicyRule{Verbs:[get update],APIGroups:[],Resources:[configmaps],ResourceNames:[],NonResourceURLs:[],},PolicyRule{Verbs:[get list watch],APIGroups:[],Resources:[nodes services namespaces],ResourceNames:[],NonResourceURLs:[],},},AggregationRule:nil,}"
time="2021-06-08T19:21:54-07:00" level=info msg="role is created: &ClusterRole{ObjectMeta:{aggregate-network-services-view  nsm-system    0 0001-01-01 00:00:00 +0000 UTC <nil> <nil> map[rbac.authorization.k8s.io/aggregate-to-view:true] map[] [] []  []},Rules:[]PolicyRule{PolicyRule{Verbs:[get list watch],APIGroups:[networkservicemesh.io],Resources:[networkservices],ResourceNames:[],NonResourceURLs:[],},},AggregationRule:nil,}"
time="2021-06-08T19:21:54-07:00" level=info msg="role is created: &ClusterRoleBinding{ObjectMeta:{nsm-role-binding      0 0001-01-01 00:00:00 +0000 UTC <nil> <nil> map[] map[] [] []  []},Subjects:[]Subject{Subject{Kind:ServiceAccount,APIGroup:,Name:nsmgr-acc,Namespace:nsm-system,},Subject{Kind:ServiceAccount,APIGroup:,Name:proxy-nsmgr-acc,Namespace:nsm-system,},Subject{Kind:ServiceAccount,APIGroup:,Name:crossconnect-monitor-acc,Namespace:nsm-system,},},RoleRef:RoleRef{APIGroup:rbac.authorization.k8s.io,Kind:ClusterRole,Name:nsm-role,},}"
time="2021-06-08T19:21:57-07:00" level=info msg="Trying to establish connection with the spire provider at address:tcp://127.0.0.1:50532"
time="2021-06-08T19:21:57-07:00" level=info msg="Created the todo context:tcp://127.0.0.1:50532"
time="2021-06-08T19:21:57-07:00" level=info msg="Got x509:&{0xc00098db90 <nil> {{0 0} 0 0 0 0} 0xc00003d4a0 0xc000592900 {{0 0} 0 0 0 0} false} <nil>"
time="2021-06-08T19:21:57-07:00" level=info msg="Started goroutine"
time="2021-06-08T19:21:57-07:00" level=info msg="Returning provider"
time="2021-06-08T19:21:57-07:00" level=info msg="Issued identity:spiffe://test.com/nsmgr"
time="2021-06-08T19:21:57-07:00" level=info msg="Checking node: kind-1-control-plane"
time="2021-06-08T19:21:57-07:00" level=info msg="Checking node: kind-1-worker"
time="2021-06-08T19:21:57-07:00" level=info msg="Checking node: kind-1-worker2"
time="2021-06-08T19:21:57-07:00" level=info msg="Using image: jaegertracing/all-in-one:1.14.0"
time="2021-06-08T19:22:00-07:00" level=info msg="getting logs without container jaeger=none"
time="2021-06-08T19:22:00-07:00" level=info msg="Using image: containers.cisco.com/appn/nsmdp:vl3_latest"
time="2021-06-08T19:22:00-07:00" level=info msg="Using image: containers.cisco.com/appn/nsmd:vl3_latest"
time="2021-06-08T19:22:00-07:00" level=info msg="Using image: containers.cisco.com/appn/nsmd-k8s:vl3_latest"
time="2021-06-08T19:22:00-07:00" level=info msg="Using image: containers.cisco.com/appn/vppagent-forwarder:vl3_latest"
time="2021-06-08T19:22:13-07:00" level=info msg="Started NSMgr/Forwarder: 12.670102443s on node kind-1-worker"
time="2021-06-08T19:22:13-07:00" level=info msg="Using image: containers.cisco.com/appn/test-common:vl3_latest"
time="2021-06-08T19:22:13-07:00" level=info msg="Starting ICMP Responder NSE on node: kind-1-worker "
time="2021-06-08T19:22:18-07:00" level=info msg="getting logs without container icmp-responder-nse-1=none"
time="2021-06-08T19:22:19-07:00" level=info msg="ICMP Responder icmp-responder-nse-1 started done: 6.147631601s"
time="2021-06-08T19:22:19-07:00" level=info msg="NSE created: icmp-responder4r75t"
time="2021-06-08T19:22:19-07:00" level=info msg="Using image: containers.cisco.com/appn/test-common:vl3_latest"
time="2021-06-08T19:22:19-07:00" level=info msg="Starting ICMP Responder NSE on node: kind-1-worker "
time="2021-06-08T19:22:20-07:00" level=info msg="getting logs without container icmp-responder-nse-2=none"
time="2021-06-08T19:22:21-07:00" level=info msg="ICMP Responder icmp-responder-nse-2 started done: 1.985178682s"
time="2021-06-08T19:22:21-07:00" level=info msg="NSE created: icmp-respondertbc4x"
time="2021-06-08T19:22:21-07:00" level=info msg="Using image: containers.cisco.com/appn/test-common:vl3_latest"
time="2021-06-08T19:22:21-07:00" level=info msg="Starting ICMP Responder NSE on node: kind-1-worker "
time="2021-06-08T19:22:22-07:00" level=info msg="getting logs without container icmp-responder-nse-3=none"
time="2021-06-08T19:22:23-07:00" level=info msg="ICMP Responder icmp-responder-nse-3 started done: 1.978358871s"
time="2021-06-08T19:22:23-07:00" level=info msg="NSE created: icmp-responder46jdq"
time="2021-06-08T19:22:23-07:00" level=info msg="Deleting nsmgr-kind-1-worker"
time="2021-06-08T19:22:36-07:00" level=warning msg="The POD 'nsmgr-kind-1-worker' Deleted 13.755148036s"
time="2021-06-08T19:22:36-07:00" level=info msg="NSEs deleted: icmp-responder4r75t, icmp-respondertbc4x"
time="2021-06-08T19:22:36-07:00" level=info msg="Deleting icmp-responder-nse-1"
time="2021-06-08T19:22:37-07:00" level=warning msg="The POD 'icmp-responder-nse-1' Deleted 372.950465ms"
time="2021-06-08T19:22:37-07:00" level=info msg="Using image: containers.cisco.com/appn/nsmdp:vl3_latest"
time="2021-06-08T19:22:37-07:00" level=info msg="Using image: containers.cisco.com/appn/nsmd:vl3_latest"
time="2021-06-08T19:22:37-07:00" level=info msg="Using image: containers.cisco.com/appn/nsmd-k8s:vl3_latest"
time="2021-06-08T19:24:49-07:00" level=info msg="pod info: nsmgr-kind-1-worker {\"metadata\":{\"name\":\"nsmgr-kind-1-worker\",\"namespace\":\"nsm-system\",\"selfLink\":\"/api/v1/namespaces/nsm-system/pods/nsmgr-kind-1-worker\",\"uid\":\"0856acf4-6ea9-40d9-b626-8e7f6704c816\",\"resourceVersion\":\"3434\",\"creationTimestamp\":\"2021-06-09T02:22:37Z\"},\"spec\":{\"volumes\":[{\"name\":\"kubelet-socket\",\"hostPath\":{\"path\":\"/var/lib/kubelet/device-plugins\",\"type\":\"DirectoryOrCreate\"}},{\"name\":\"nsm-socket\",\"hostPath\":{\"path\":\"/var/lib/networkservicemesh\",\"type\":\"DirectoryOrCreate\"}},{\"name\":\"nsm-config-volume\",\"configMap\":{\"name\":\"nsm-config\",\"defaultMode\":420}},{\"name\":\"spire-agent-socket\",\"hostPath\":{\"path\":\"/run/spire/sockets\",\"type\":\"DirectoryOrCreate\"}},{\"name\":\"nsmgr-acc-token-8sx55\",\"secret\":{\"secretName\":\"nsmgr-acc-token-8sx55\",\"defaultMode\":420}}],\"containers\":[{\"name\":\"nsmdp\",\"image\":\"containers.cisco.com/appn/nsmdp:vl3_latest\",\"ports\":[{\"hostPort\":5001,\"containerPort\":5001,\"protocol\":\"TCP\"}],\"env\":[{\"name\":\"NSMD_LOCAL_REGISTRY_DELETE\",\"value\":\"false\"}],\"resources\":{\"limits\":{\"cpu\":\"1\"},\"requests\":{\"cpu\":\"1m\"}},\"volumeMounts\":[{\"name\":\"kubelet-socket\",\"mountPath\":\"/var/lib/kubelet/device-plugins\"},{\"name\":\"nsm-socket\",\"mountPath\":\"/var/lib/networkservicemesh\"},{\"name\":\"spire-agent-socket\",\"readOnly\":true,\"mountPath\":\"/run/spire/sockets\"},{\"name\":\"nsmgr-acc-token-8sx55\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"IfNotPresent\"},{\"name\":\"nsmd\",\"image\":\"containers.cisco.com/appn/nsmd:vl3_latest\",\"env\":[{\"name\":\"NSMD_LOCAL_REGISTRY_DELETE\",\"value\":\"false\"}],\"resources\":{\"limits\":{\"cpu\":\"1\"},\"requests\":{\"cpu\":\"1m\"}},\"volumeMounts\":[{\"name\":\"nsm-socket\",\"mountPath\":\"/var/lib/networkservicemesh\"},{\"name\":\"nsm-config-volume\",\"mountPath\":\"/var/lib/networkservicemesh/config\"},{\"name\":\"spire-agent-socket\",\"readOnly\":true,\"mountPath\":\"/run/spire/sockets\"},{\"name\":\"nsmgr-acc-token-8sx55\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"IfNotPresent\"},{\"name\":\"nsmd-k8s\",\"image\":\"containers.cisco.com/appn/nsmd-k8s:vl3_latest\",\"env\":[{\"name\":\"POD_UID\",\"valueFrom\":{\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.uid\"}}},{\"name\":\"POD_NAME\",\"value\":\"nsmgr-kind-1-worker\"},{\"name\":\"NODE_NAME\",\"value\":\"kind-1-worker\"},{\"name\":\"NSM_NAMESPACE\",\"value\":\"nsm-system\"},{\"name\":\"NSMD_LOCAL_REGISTRY_DELETE\",\"value\":\"false\"}],\"resources\":{\"limits\":{\"cpu\":\"1\"},\"requests\":{\"cpu\":\"1m\"}},\"volumeMounts\":[{\"name\":\"spire-agent-socket\",\"readOnly\":true,\"mountPath\":\"/run/spire/sockets\"},{\"name\":\"nsmgr-acc-token-8sx55\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"IfNotPresent\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"nodeSelector\":{\"kubernetes.io/hostname\":\"kind-1-worker\"},\"serviceAccountName\":\"nsmgr-acc\",\"serviceAccount\":\"nsmgr-acc\",\"nodeName\":\"kind-1-worker\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true},\"status\":{\"phase\":\"Running\",\"conditions\":[{\"type\":\"Initialized\",\"status\":\"True\",\"lastProbeTime\":null,\"lastTransitionTime\":\"2021-06-09T02:22:37Z\"},{\"type\":\"Ready\",\"status\":\"True\",\"lastProbeTime\":null,\"lastTransitionTime\":\"2021-06-09T02:22:49Z\"},{\"type\":\"ContainersReady\",\"status\":\"True\",\"lastProbeTime\":null,\"lastTransitionTime\":\"2021-06-09T02:22:49Z\"},{\"type\":\"PodScheduled\",\"status\":\"True\",\"lastProbeTime\":null,\"lastTransitionTime\":\"2021-06-09T02:22:37Z\"}],\"hostIP\":\"172.17.0.4\",\"podIP\":\"10.244.2.16\",\"podIPs\":[{\"ip\":\"10.244.2.16\"}],\"startTime\":\"2021-06-09T02:22:37Z\",\"containerStatuses\":[{\"name\":\"nsmd\",\"state\":{\"running\":{\"startedAt\":\"2021-06-09T02:22:48Z\"}},\"lastState\":{},\"ready\":true,\"restartCount\":0,\"image\":\"containers.cisco.com/appn/nsmd:vl3_latest\",\"imageID\":\"sha256:a906454672cfea8f945d8013ca1ff0b639efa0e20a25bfc18079825494ee6ceb\",\"containerID\":\"containerd://47f62b1f4be58ceb59db0099ee23027c5ccfcacbd8f7e88b747b6e1ee8ceb382\",\"started\":true},{\"name\":\"nsmd-k8s\",\"state\":{\"running\":{\"startedAt\":\"2021-06-09T02:22:48Z\"}},\"lastState\":{},\"ready\":true,\"restartCount\":0,\"image\":\"containers.cisco.com/appn/nsmd-k8s:vl3_latest\",\"imageID\":\"sha256:245d60f997ce1f392911fdf5c7abb760e8f6dba32d6e7e138bf1ca247bb862f5\",\"containerID\":\"containerd://3cc4398474d3725a9d52be6b6a3a02eeaf8bb00625156f2364b384e1cd7825be\",\"started\":true},{\"name\":\"nsmdp\",\"state\":{\"running\":{\"startedAt\":\"2021-06-09T02:22:48Z\"}},\"lastState\":{},\"ready\":true,\"restartCount\":0,\"image\":\"containers.cisco.com/appn/nsmdp:vl3_latest\",\"imageID\":\"sha256:91cef188072369448551d8a0ddbf6ccbab7193a727ab85c75ad6590997cf31cb\",\"containerID\":\"containerd://06ad8a44279cfb5b7521de7c90c8e377cf452683f924e100f627af73e630a647\",\"started\":true}],\"qosClass\":\"Burstable\"}}"
time="2021-06-08T19:24:49-07:00" level=info msg="Pod nsmgr-kind-1-worker event: {\"metadata\":{\"name\":\"nsmgr-kind-1-worker.1686c8aeb917cf78\",\"namespace\":\"nsm-system\",\"selfLink\":\"/api/v1/namespaces/nsm-system/events/nsmgr-kind-1-worker.1686c8aeb917cf78\",\"uid\":\"7a9a8b52-7e45-41af-ad5c-df6dace679a0\",\"resourceVersion\":\"3432\",\"creationTimestamp\":\"2021-06-09T02:22:48Z\"},\"involvedObject\":{\"kind\":\"Pod\",\"namespace\":\"nsm-system\",\"name\":\"nsmgr-kind-1-worker\",\"uid\":\"0856acf4-6ea9-40d9-b626-8e7f6704c816\",\"apiVersion\":\"v1\",\"resourceVersion\":\"3387\",\"fieldPath\":\"spec.containers{nsmd-k8s}\"},\"reason\":\"Started\",\"message\":\"Started container nsmd-k8s\",\"source\":{\"component\":\"kubelet\",\"host\":\"kind-1-worker\"},\"firstTimestamp\":\"2021-06-09T02:22:48Z\",\"lastTimestamp\":\"2021-06-09T02:22:48Z\",\"count\":1,\"type\":\"Normal\",\"eventTime\":null,\"reportingComponent\":\"\",\"reportingInstance\":\"\"}"
time="2021-06-08T19:24:49-07:00" level=info msg="Pod nsmgr-kind-1-worker event: {\"metadata\":{\"name\":\"nsmgr-kind-1-worker.1686c8aeb3881e3c\",\"namespace\":\"nsm-system\",\"selfLink\":\"/api/v1/namespaces/nsm-system/events/nsmgr-kind-1-worker.1686c8aeb3881e3c\",\"uid\":\"0df1bff0-95a0-4d4c-a684-cd9748d340d7\",\"resourceVersion\":\"3431\",\"creationTimestamp\":\"2021-06-09T02:22:48Z\"},\"involvedObject\":{\"kind\":\"Pod\",\"namespace\":\"nsm-system\",\"name\":\"nsmgr-kind-1-worker\",\"uid\":\"0856acf4-6ea9-40d9-b626-8e7f6704c816\",\"apiVersion\":\"v1\",\"resourceVersion\":\"3387\",\"fieldPath\":\"spec.containers{nsmd-k8s}\"},\"reason\":\"Created\",\"message\":\"Created container nsmd-k8s\",\"source\":{\"component\":\"kubelet\",\"host\":\"kind-1-worker\"},\"firstTimestamp\":\"2021-06-09T02:22:48Z\",\"lastTimestamp\":\"2021-06-09T02:22:48Z\",\"count\":1,\"type\":\"Normal\",\"eventTime\":null,\"reportingComponent\":\"\",\"reportingInstance\":\"\"}"
time="2021-06-08T19:24:49-07:00" level=info msg="Pod nsmgr-kind-1-worker event: {\"metadata\":{\"name\":\"nsmgr-kind-1-worker.1686c8aeb182871c\",\"namespace\":\"nsm-system\",\"selfLink\":\"/api/v1/namespaces/nsm-system/events/nsmgr-kind-1-worker.1686c8aeb182871c\",\"uid\":\"189fe639-51fd-472a-8253-162306e53c01\",\"resourceVersion\":\"3430\",\"creationTimestamp\":\"2021-06-09T02:22:48Z\"},\"involvedObject\":{\"kind\":\"Pod\",\"namespace\":\"nsm-system\",\"name\":\"nsmgr-kind-1-worker\",\"uid\":\"0856acf4-6ea9-40d9-b626-8e7f6704c816\",\"apiVersion\":\"v1\",\"resourceVersion\":\"3387\",\"fieldPath\":\"spec.containers{nsmd-k8s}\"},\"reason\":\"Pulled\",\"message\":\"Container image \\\"containers.cisco.com/appn/nsmd-k8s:vl3_latest\\\" already present on machine\",\"source\":{\"component\":\"kubelet\",\"host\":\"kind-1-worker\"},\"firstTimestamp\":\"2021-06-09T02:22:48Z\",\"lastTimestamp\":\"2021-06-09T02:22:48Z\",\"count\":1,\"type\":\"Normal\",\"eventTime\":null,\"reportingComponent\":\"\",\"reportingInstance\":\"\"}"
time="2021-06-08T19:24:49-07:00" level=info msg="Pod nsmgr-kind-1-worker event: {\"metadata\":{\"name\":\"nsmgr-kind-1-worker.1686c8aeb172f144\",\"namespace\":\"nsm-system\",\"selfLink\":\"/api/v1/namespaces/nsm-system/events/nsmgr-kind-1-worker.1686c8aeb172f144\",\"uid\":\"124ec7bb-cb75-4b82-aaa6-eda7db3a28f2\",\"resourceVersion\":\"3429\",\"creationTimestamp\":\"2021-06-09T02:22:48Z\"},\"involvedObject\":{\"kind\":\"Pod\",\"namespace\":\"nsm-system\",\"name\":\"nsmgr-kind-1-worker\",\"uid\":\"0856acf4-6ea9-40d9-b626-8e7f6704c816\",\"apiVersion\":\"v1\",\"resourceVersion\":\"3387\",\"fieldPath\":\"spec.containers{nsmd}\"},\"reason\":\"Started\",\"message\":\"Started container nsmd\",\"source\":{\"component\":\"kubelet\",\"host\":\"kind-1-worker\"},\"firstTimestamp\":\"2021-06-09T02:22:48Z\",\"lastTimestamp\":\"2021-06-09T02:22:48Z\",\"count\":1,\"type\":\"Normal\",\"eventTime\":null,\"reportingComponent\":\"\",\"reportingInstance\":\"\"}"
time="2021-06-08T19:24:49-07:00" level=info msg="Pod nsmgr-kind-1-worker event: {\"metadata\":{\"name\":\"nsmgr-kind-1-worker.1686c8aeac7fef5c\",\"namespace\":\"nsm-system\",\"selfLink\":\"/api/v1/namespaces/nsm-system/events/nsmgr-kind-1-worker.1686c8aeac7fef5c\",\"uid\":\"70139044-a321-441e-809a-ca14e8686420\",\"resourceVersion\":\"3428\",\"creationTimestamp\":\"2021-06-09T02:22:48Z\"},\"involvedObject\":{\"kind\":\"Pod\",\"namespace\":\"nsm-system\",\"name\":\"nsmgr-kind-1-worker\",\"uid\":\"0856acf4-6ea9-40d9-b626-8e7f6704c816\",\"apiVersion\":\"v1\",\"resourceVersion\":\"3387\",\"fieldPath\":\"spec.containers{nsmd}\"},\"reason\":\"Created\",\"message\":\"Created container nsmd\",\"source\":{\"component\":\"kubelet\",\"host\":\"kind-1-worker\"},\"firstTimestamp\":\"2021-06-09T02:22:48Z\",\"lastTimestamp\":\"2021-06-09T02:22:48Z\",\"count\":1,\"type\":\"Normal\",\"eventTime\":null,\"reportingComponent\":\"\",\"reportingInstance\":\"\"}"
time="2021-06-08T19:24:49-07:00" level=info msg="Pod nsmgr-kind-1-worker event: {\"metadata\":{\"name\":\"nsmgr-kind-1-worker.1686c8aeab2440b8\",\"namespace\":\"nsm-system\",\"selfLink\":\"/api/v1/namespaces/nsm-system/events/nsmgr-kind-1-worker.1686c8aeab2440b8\",\"uid\":\"b8c14671-3975-4b5f-b257-33f082bb5b07\",\"resourceVersion\":\"3427\",\"creationTimestamp\":\"2021-06-09T02:22:48Z\"},\"involvedObject\":{\"kind\":\"Pod\",\"namespace\":\"nsm-system\",\"name\":\"nsmgr-kind-1-worker\",\"uid\":\"0856acf4-6ea9-40d9-b626-8e7f6704c816\",\"apiVersion\":\"v1\",\"resourceVersion\":\"3387\",\"fieldPath\":\"spec.containers{nsmd}\"},\"reason\":\"Pulled\",\"message\":\"Container image \\\"containers.cisco.com/appn/nsmd:vl3_latest\\\" already present on machine\",\"source\":{\"component\":\"kubelet\",\"host\":\"kind-1-worker\"},\"firstTimestamp\":\"2021-06-09T02:22:48Z\",\"lastTimestamp\":\"2021-06-09T02:22:48Z\",\"count\":1,\"type\":\"Normal\",\"eventTime\":null,\"reportingComponent\":\"\",\"reportingInstance\":\"\"}"
time="2021-06-08T19:24:49-07:00" level=info msg="Pod nsmgr-kind-1-worker event: {\"metadata\":{\"name\":\"nsmgr-kind-1-worker.1686c8aeaafe1604\",\"namespace\":\"nsm-system\",\"selfLink\":\"/api/v1/namespaces/nsm-system/events/nsmgr-kind-1-worker.1686c8aeaafe1604\",\"uid\":\"2fdb2be9-663c-47ba-bb9c-3a857d60ea8f\",\"resourceVersion\":\"3426\",\"creationTimestamp\":\"2021-06-09T02:22:48Z\"},\"involvedObject\":{\"kind\":\"Pod\",\"namespace\":\"nsm-system\",\"name\":\"nsmgr-kind-1-worker\",\"uid\":\"0856acf4-6ea9-40d9-b626-8e7f6704c816\",\"apiVersion\":\"v1\",\"resourceVersion\":\"3387\",\"fieldPath\":\"spec.containers{nsmdp}\"},\"reason\":\"Started\",\"message\":\"Started container nsmdp\",\"source\":{\"component\":\"kubelet\",\"host\":\"kind-1-worker\"},\"firstTimestamp\":\"2021-06-09T02:22:48Z\",\"lastTimestamp\":\"2021-06-09T02:22:48Z\",\"count\":1,\"type\":\"Normal\",\"eventTime\":null,\"reportingComponent\":\"\",\"reportingInstance\":\"\"}"
time="2021-06-08T19:24:49-07:00" level=info msg="Pod nsmgr-kind-1-worker event: {\"metadata\":{\"name\":\"nsmgr-kind-1-worker.1686c8aea6365eec\",\"namespace\":\"nsm-system\",\"selfLink\":\"/api/v1/namespaces/nsm-system/events/nsmgr-kind-1-worker.1686c8aea6365eec\",\"uid\":\"600c8daf-3bd8-4545-b668-9ea92ca20786\",\"resourceVersion\":\"3425\",\"creationTimestamp\":\"2021-06-09T02:22:48Z\"},\"involvedObject\":{\"kind\":\"Pod\",\"namespace\":\"nsm-system\",\"name\":\"nsmgr-kind-1-worker\",\"uid\":\"0856acf4-6ea9-40d9-b626-8e7f6704c816\",\"apiVersion\":\"v1\",\"resourceVersion\":\"3387\",\"fieldPath\":\"spec.containers{nsmdp}\"},\"reason\":\"Created\",\"message\":\"Created container nsmdp\",\"source\":{\"component\":\"kubelet\",\"host\":\"kind-1-worker\"},\"firstTimestamp\":\"2021-06-09T02:22:48Z\",\"lastTimestamp\":\"2021-06-09T02:22:48Z\",\"count\":1,\"type\":\"Normal\",\"eventTime\":null,\"reportingComponent\":\"\",\"reportingInstance\":\"\"}"
time="2021-06-08T19:24:49-07:00" level=info msg="Pod nsmgr-kind-1-worker event: {\"metadata\":{\"name\":\"nsmgr-kind-1-worker.1686c8aea473c824\",\"namespace\":\"nsm-system\",\"selfLink\":\"/api/v1/namespaces/nsm-system/events/nsmgr-kind-1-worker.1686c8aea473c824\",\"uid\":\"f125b064-7e78-45fb-8e87-5d0caede0f91\",\"resourceVersion\":\"3424\",\"creationTimestamp\":\"2021-06-09T02:22:48Z\"},\"involvedObject\":{\"kind\":\"Pod\",\"namespace\":\"nsm-system\",\"name\":\"nsmgr-kind-1-worker\",\"uid\":\"0856acf4-6ea9-40d9-b626-8e7f6704c816\",\"apiVersion\":\"v1\",\"resourceVersion\":\"3387\",\"fieldPath\":\"spec.containers{nsmdp}\"},\"reason\":\"Pulled\",\"message\":\"Container image \\\"containers.cisco.com/appn/nsmdp:vl3_latest\\\" already present on machine\",\"source\":{\"component\":\"kubelet\",\"host\":\"kind-1-worker\"},\"firstTimestamp\":\"2021-06-09T02:22:48Z\",\"lastTimestamp\":\"2021-06-09T02:22:48Z\",\"count\":1,\"type\":\"Normal\",\"eventTime\":null,\"reportingComponent\":\"\",\"reportingInstance\":\"\"}"
time="2021-06-08T19:24:49-07:00" level=info msg="Pod nsmgr-kind-1-worker event: {\"metadata\":{\"name\":\"nsmgr-kind-1-worker.1686c8ac2ff12b9c\",\"namespace\":\"nsm-system\",\"selfLink\":\"/api/v1/namespaces/nsm-system/events/nsmgr-kind-1-worker.1686c8ac2ff12b9c\",\"uid\":\"560d50fc-3bce-4ce4-a190-863a9c1c5514\",\"resourceVersion\":\"3388\",\"creationTimestamp\":\"2021-06-09T02:22:37Z\"},\"involvedObject\":{\"kind\":\"Pod\",\"namespace\":\"nsm-system\",\"name\":\"nsmgr-kind-1-worker\",\"uid\":\"0856acf4-6ea9-40d9-b626-8e7f6704c816\",\"apiVersion\":\"v1\",\"resourceVersion\":\"3386\"},\"reason\":\"Scheduled\",\"message\":\"Successfully assigned nsm-system/nsmgr-kind-1-worker to kind-1-worker\",\"source\":{\"component\":\"default-scheduler\"},\"firstTimestamp\":\"2021-06-09T02:22:37Z\",\"lastTimestamp\":\"2021-06-09T02:22:37Z\",\"count\":1,\"type\":\"Normal\",\"eventTime\":null,\"reportingComponent\":\"\",\"reportingInstance\":\"\"}"
time="2021-06-08T19:24:49-07:00" level=error msg="Timeout waiting for logs matching regexp NSM gRPC API Server: .* is operational in nsmgr-kind-1-worker::nsmd. Last logs: time=\"2021-06-09T02:22:48Z\" level=info msg=\"Starting nsmd...\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"Version: v1.0.1-rc.2-1-g9262b77b\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"All env variables:\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"KUBERNETES_SERVICE_PORT=443\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"KUBERNETES_PORT=tcp://10.96.0.1:443\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"GRPC_GO_LOG_VERBOSITY_LEVEL=99\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"HOSTNAME=nsmgr-kind-1-worker\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"GRPC_GO_LOG_SEVERITY_LEVEL=info\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"SHLVL=1\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"HOME=/root\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"KUBERNETES_PORT_443_TCP_ADDR=10.96.0.1\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"KUBERNETES_PORT_443_TCP_PORT=443\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"KUBERNETES_PORT_443_TCP_PROTO=tcp\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"ENTRY=nsmd\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"KUBERNETES_SERVICE_PORT_HTTPS=443\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"KUBERNETES_PORT_443_TCP=tcp://10.96.0.1:443\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"NSMD_LOCAL_REGISTRY_DELETE=false\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"KUBERNETES_SERVICE_HOST=10.96.0.1\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"PWD=/\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"Creating logger from config: &{nsmd@nsmgr-kind-1-worker false false [] 0xc0000ba060 0xc0000bc000 <nil> <nil> <nil>}\"\\n2021/06/09 02:22:48 debug logging disabled\\n2021/06/09 02:22:48 Initializing logging reporter\\n2021/06/09 02:22:48 debug logging disabled\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"==--> nsmd.server() span:68766b66242daea2:68766b66242daea2:0000000000000000:1\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\">><<-- tracing.init-complete=8.4682ms span=68766b66242daea2:68766b66242daea2:0000000000000000:1\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"==----> nsm-server-start() span:68766b66242daea2:01f139d1ed12ee86:68766b66242daea2:1\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"Starting NSM server\" operation=nsm-server-start span=\"68766b66242daea2:01f139d1ed12ee86:68766b66242daea2:1\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"==------> NewServer() span:68766b66242daea2:5c4e45cbc2874c90:01f139d1ed12ee86:1\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"readDialConfig insecure: false\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"Trying to establish connection with the spire provider at address:unix:///run/spire/sockets/agent.sock\"\\ntime=\"2021-06-09T02:22:48Z\" level=info msg=\"Created the todo context:unix:///run/spire/sockets/agent.sock\"\\nINFO: 2021/06/09 02:22:48 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:22:48 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc000182798 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:48 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:48 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:48 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:48 [core] blockingPicker: the picked transport is not ready, loop back to repick\\nINFO: 2021/06/09 02:22:48 [core] pickfirstBalancer: UpdateSubConnState: 0xc000364730, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:48 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:48 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\nINFO: 2021/06/09 02:22:48 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:48 [core] pickfirstBalancer: UpdateSubConnState: 0xc000364730, {READY <nil>}\\nINFO: 2021/06/09 02:22:48 [core] Channel Connectivity change to READY\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Got x509:&{0xc0001f2c60 <nil> {{0 0} 0 0 0 0} 0xc0000eca50 0xc0003ca160 {{0 0} 0 0 0 0} false} <nil>\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Started goroutine\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Returning provider\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"GRPC.NewServer with open tracing enabled\" operation=NewServer span=\"68766b66242daea2:5c4e45cbc2874c90:01f139d1ed12ee86:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"==--------> GetCertificate() span:68766b66242daea2:6f2fd67a8a04fab6:5c4e45cbc2874c90:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Issued identity:spiffe://test.com/nsmgr\"\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc00000e040 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] blockingPicker: the picked transport is not ready, loop back to repick\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc0001412c0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc0001412c0, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc0000ee130 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] blockingPicker: the picked transport is not ready, loop back to repick\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000097d90, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000097d90, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"SPIRE -- GetX509SVID:&{spiffe://test.com/nsmgr [0xc0003aeb00] 0xc0000a3bc0}\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Default trust domain:test.com\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"defaultTrustDomain:test.com\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"AUTHORIZING ALL CLIENTS\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Server will be started in secure mode using tlsConfig:&{<nil> <nil> [] map[] 0x97a4c0 <nil> <nil> 0x97a5c0 <nil> <nil> []  RequireAnyClientCert <nil> false [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}\"\\n2021/06/09 02:22:49 Reporting span 68766b66242daea2:6f2fd67a8a04fab6:5c4e45cbc2874c90:1\\n2021/06/09 02:22:49 Reporting span 68766b66242daea2:5c4e45cbc2874c90:01f139d1ed12ee86:1\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Starting NSM gRPC server listening on socket: /var/lib/networkservicemesh/nsm.io.sock\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"==------> set-local-nsm() span:68766b66242daea2:78461ae8d95f90ba:01f139d1ed12ee86:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Requesting NsmRegistryClient...\" span=\"68766b66242daea2:78461ae8d95f90ba:01f139d1ed12ee86:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"==----------> initRegistryClient() span:68766b66242daea2:614025c92a9eb938:78461ae8d95f90ba:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Waiting for liveness probe: tcp:127.0.0.1:5000\"\\nWARNING: 2021/06/09 02:22:49 [core] grpc: Server.Serve failed to complete security handshake from \"@\": EOF\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\\\"\\\" span=6732796692f9f1d2:737ce067d20e187f:00f65dcaa515818f:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\">><<-- request={} span=6732796692f9f1d2:737ce067d20e187f:00f65dcaa515818f:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\">><<-- response={} span=6732796692f9f1d2:737ce067d20e187f:00f65dcaa515818f:1\"\\n2021/06/09 02:22:49 Reporting span 6732796692f9f1d2:737ce067d20e187f:00f65dcaa515818f:1\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Liveness probe was successful: tcp:127.0.0.1:5000\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Registry port now available, attempting to connect...\" operation=initRegistryClient span=\"68766b66242daea2:614025c92a9eb938:78461ae8d95f90ba:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Trying to establish connection to target: 127.0.0.1:5000\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"func insecure: false, env insecure: false\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Connecting to the workload api at:unix:///run/spire/sockets/agent.sock\"\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc000182080 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] blockingPicker: the picked transport is not ready, loop back to repick\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000364700, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000364700, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to SHUTDOWN\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{test.com}:0xc0000c2f80]}\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"defaultTrustDomain:test.com\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"AUTHORIZING ALL CLIENTS\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Fetch tlsConfig for Trust Domain: test.com\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Found 1 tlsconfigs.\"\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"\"\\nINFO: 2021/06/09 02:22:49 [core] scheme \"\" not registered, fallback to default scheme\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{127.0.0.1:5000  <nil> 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"127.0.0.1:5000\" to connect\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc0005040c0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc0005040c0, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}\"\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}\"\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"\"\\nINFO: 2021/06/09 02:22:49 [core] scheme \"\" not registered, fallback to default scheme\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{127.0.0.1:5000  <nil> 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"127.0.0.1:5000\" to connect\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000504400, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000504400, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Successfully connected to 127.0.0.1:5000\" operation=initRegistryClient span=\"68766b66242daea2:614025c92a9eb938:78461ae8d95f90ba:1\"\\n2021/06/09 02:22:49 Reporting span 68766b66242daea2:614025c92a9eb938:78461ae8d95f90ba:1\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\">><<------ url=10.244.2.16:5001 span=68766b66242daea2:78461ae8d95f90ba:01f139d1ed12ee86:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\">><<-------- /registry.NsmRegistry/RegisterNSM()=\\\"\\\" span=68766b66242daea2:78461ae8d95f90ba:01f139d1ed12ee86:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\">><<-------- request={\\\"url\\\":\\\"10.244.2.16:5001\\\"} span=68766b66242daea2:78461ae8d95f90ba:01f139d1ed12ee86:1\"\\n2021/06/09 02:22:49 Reporting span 68766b66242daea2:1e0c5c05a5f4a68a:78461ae8d95f90ba:1\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\">><<-------- response={\\\"name\\\":\\\"kind-1-worker\\\",\\\"url\\\":\\\"10.244.2.16:5001\\\",\\\"state\\\":\\\"RUNNING\\\"} span=68766b66242daea2:78461ae8d95f90ba:01f139d1ed12ee86:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\">><<-------- /registry.NsmRegistry/GetEndpoints()=\\\"\\\" span=68766b66242daea2:78461ae8d95f90ba:01f139d1ed12ee86:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\">><<-------- request={} span=68766b66242daea2:78461ae8d95f90ba:01f139d1ed12ee86:1\"\\n2021/06/09 02:22:49 Reporting span 68766b66242daea2:091c1b556682b121:78461ae8d95f90ba:1\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\">><<-------- response={\\\"network_service_endpoints\\\":[{\\\"name\\\":\\\"icmp-responder46jdq\\\",\\\"payload\\\":\\\"IP\\\",\\\"network_service_name\\\":\\\"icmp-responder\\\",\\\"network_service_manager_name\\\":\\\"kind-1-worker\\\",\\\"labels\\\":{\\\"app\\\":\\\"icmp\\\",\\\"networkservicename\\\":\\\"icmp-responder\\\"},\\\"state\\\":\\\"RUNNING\\\"}]} span=68766b66242daea2:78461ae8d95f90ba:01f139d1ed12ee86:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Setting local NSM name:\\\"kind-1-worker\\\" url:\\\"10.244.2.16:5001\\\" state:\\\"RUNNING\\\" \"\\n2021/06/09 02:22:49 Reporting span 68766b66242daea2:78461ae8d95f90ba:01f139d1ed12ee86:1\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\">><<---- registered-endpoints={\\\"network_service_endpoints\\\":[{\\\"name\\\":\\\"icmp-responder46jdq\\\",\\\"payload\\\":\\\"IP\\\",\\\"network_service_name\\\":\\\"icmp-responder\\\",\\\"network_service_manager_name\\\":\\\"kind-1-worker\\\",\\\"labels\\\":{\\\"app\\\":\\\"icmp\\\",\\\"networkservicename\\\":\\\"icmp-responder\\\"},\\\"state\\\":\\\"RUNNING\\\"}]} span=68766b66242daea2:01f139d1ed12ee86:68766b66242daea2:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock...\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"func insecure: false, env insecure: false\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Connecting to the workload api at:unix:///run/spire/sockets/agent.sock\"\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc000182808 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] blockingPicker: the picked transport is not ready, loop back to repick\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc00026c010, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc00026c010, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to SHUTDOWN\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{test.com}:0xc000189380]}\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"defaultTrustDomain:test.com\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"AUTHORIZING ALL CLIENTS\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Fetch tlsConfig for Trust Domain: test.com\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Found 1 tlsconfigs.\"\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"\"\\nINFO: 2021/06/09 02:22:49 [core] scheme \"\" not registered, fallback to default scheme\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{/var/lib/networkservicemesh/nsm.io.sock  <nil> 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"/var/lib/networkservicemesh/nsm.io.sock\" to connect\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000096750, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000096750, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}\"\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}\"\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"\"\\nINFO: 2021/06/09 02:22:49 [core] scheme \"\" not registered, fallback to default scheme\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{/var/lib/networkservicemesh/nsm.io.sock  <nil> 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"/var/lib/networkservicemesh/nsm.io.sock\" to connect\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000488130, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000488130, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Requesting nsmd for client connection...\"\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to SHUTDOWN\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"NSM gRPC socket: /var/lib/networkservicemesh/nsm.io.sock is operational\" operation=nsm-server-start span=\"68766b66242daea2:01f139d1ed12ee86:68766b66242daea2:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"create monitor servers\" operation=nsm-server-start span=\"68766b66242daea2:01f139d1ed12ee86:68766b66242daea2:1\"\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"CrossConnect - Serve starting...\"\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"RemoteConnection - Serve starting...\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Reading excluded prefixes config file: /var/lib/networkservicemesh/config/excluded_prefixes.yaml\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Excluded prefixes: [10.244.0.0/16 10.96.0.0/12]\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"==------> restore() span:68766b66242daea2:49ecec22910bca4f:01f139d1ed12ee86:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\">><<------ delete.client.registry=false span=68766b66242daea2:49ecec22910bca4f:01f139d1ed12ee86:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Values: [CLE nsm-23]\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Values: [NSE icmp-responder4r75t nsm-23 ChQKDmljbXAtcmVzcG9uZGVyEgJJUBIqCg1raW5kLTEtd29ya2VyEhAxMC4yNDQuMi4xMjo1MDAxIgdSVU5OSU5HGnQKE2ljbXAtcmVzcG9uZGVyNHI3NXQSAklQGg5pY21wLXJlc3BvbmRlciINa2luZC0xLXdvcmtlcioLCgNhcHASBGljbXAqJAoSbmV0d29ya3NlcnZpY2VuYW1lEg5pY21wLXJlc3BvbmRlcjIHUlVOTklORw==]\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Values: [CLE nsm-1]\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Values: [NSE icmp-respondertbc4x nsm-1 ChQKDmljbXAtcmVzcG9uZGVyEgJJUBIqCg1raW5kLTEtd29ya2VyEhAxMC4yNDQuMi4xMjo1MDAxIgdSVU5OSU5HGnQKE2ljbXAtcmVzcG9uZGVydGJjNHgSAklQGg5pY21wLXJlc3BvbmRlciINa2luZC0xLXdvcmtlcioLCgNhcHASBGljbXAqJAoSbmV0d29ya3NlcnZpY2VuYW1lEg5pY21wLXJlc3BvbmRlcjIHUlVOTklORw==]\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Values: [CLE nsm-19]\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Values: [NSE icmp-responder46jdq nsm-19 ChQKDmljbXAtcmVzcG9uZGVyEgJJUBIqCg1raW5kLTEtd29ya2VyEhAxMC4yNDQuMi4xMjo1MDAxIgdSVU5OSU5HGnQKE2ljbXAtcmVzcG9uZGVyNDZqZHESAklQGg5pY21wLXJlc3BvbmRlciINa2luZC0xLXdvcmtlcioLCgNhcHASBGljbXAqJAoSbmV0d29ya3NlcnZpY2VuYW1lEg5pY21wLXJlc3BvbmRlcjIHUlVOTklORw==]\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Clients: [nsm-23 nsm-1 nsm-19]\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"NSEs: map[icmp-responder46jdq:{nsm-19 network_service:<name:\\\"icmp-responder\\\" payload:\\\"IP\\\" > network_service_manager:<name:\\\"kind-1-worker\\\" url:\\\"10.244.2.12:5001\\\" state:\\\"RUNNING\\\" > network_service_endpoint:<name:\\\"icmp-responder46jdq\\\" payload:\\\"IP\\\" network_service_name:\\\"icmp-responder\\\" network_service_manager_name:\\\"kind-1-worker\\\" labels:<key:\\\"app\\\" value:\\\"icmp\\\" > labels:<key:\\\"networkservicename\\\" value:\\\"icmp-responder\\\" > state:\\\"RUNNING\\\" > } icmp-responder4r75t:{nsm-23 network_service:<name:\\\"icmp-responder\\\" payload:\\\"IP\\\" > network_service_manager:<name:\\\"kind-1-worker\\\" url:\\\"10.244.2.12:5001\\\" state:\\\"RUNNING\\\" > network_service_endpoint:<name:\\\"icmp-responder4r75t\\\" payload:\\\"IP\\\" network_service_name:\\\"icmp-responder\\\" network_service_manager_name:\\\"kind-1-worker\\\" labels:<key:\\\"app\\\" value:\\\"icmp\\\" > labels:<key:\\\"networkservicename\\\" value:\\\"icmp-responder\\\" > state:\\\"RUNNING\\\" > } icmp-respondertbc4x:{nsm-1 network_service:<name:\\\"icmp-responder\\\" payload:\\\"IP\\\" > network_service_manager:<name:\\\"kind-1-worker\\\" url:\\\"10.244.2.12:5001\\\" state:\\\"RUNNING\\\" > network_service_endpoint:<name:\\\"icmp-respondertbc4x\\\" payload:\\\"IP\\\" network_service_name:\\\"icmp-responder\\\" network_service_manager_name:\\\"kind-1-worker\\\" labels:<key:\\\"app\\\" value:\\\"icmp\\\" > labels:<key:\\\"networkservicename\\\" value:\\\"icmp-responder\\\" > state:\\\"RUNNING\\\" > }]\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\">><<------ clients=[\\\"nsm-23\\\",\\\"nsm-1\\\",\\\"nsm-19\\\"] span=68766b66242daea2:49ecec22910bca4f:01f139d1ed12ee86:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\">><<------ endpoints={\\\"icmp-responder46jdq\\\":{\\\"Workspace\\\":\\\"nsm-19\\\",\\\"NseReg\\\":{\\\"network_service\\\":{\\\"name\\\":\\\"icmp-responder\\\",\\\"payload\\\":\\\"IP\\\"},\\\"network_service_manager\\\":{\\\"name\\\":\\\"kind-1-worker\\\",\\\"url\\\":\\\"10.244.2.12:5001\\\",\\\"state\\\":\\\"RUNNING\\\"},\\\"network_service_endpoint\\\":{\\\"name\\\":\\\"icmp-responder46jdq\\\",\\\"payload\\\":\\\"IP\\\",\\\"network_service_name\\\":\\\"icmp-responder\\\",\\\"network_service_manager_name\\\":\\\"kind-1-worker\\\",\\\"labels\\\":{\\\"app\\\":\\\"icmp\\\",\\\"networkservicename\\\":\\\"icmp-responder\\\"},\\\"state\\\":\\\"RUNNING\\\"}}},\\\"icmp-responder4r75t\\\":{\\\"Workspace\\\":\\\"nsm-23\\\",\\\"NseReg\\\":{\\\"network_service\\\":{\\\"name\\\":\\\"icmp-responder\\\",\\\"payload\\\":\\\"IP\\\"},\\\"network_service_manager\\\":{\\\"name\\\":\\\"kind-1-worker\\\",\\\"url\\\":\\\"10.244.2.12:5001\\\",\\\"state\\\":\\\"RUNNING\\\"},\\\"network_service_endpoint\\\":{\\\"name\\\":\\\"icmp-responder4r75t\\\",\\\"payload\\\":\\\"IP\\\",\\\"network_service_name\\\":\\\"icmp-responder\\\",\\\"network_service_manager_name\\\":\\\"kind-1-worker\\\",\\\"labels\\\":{\\\"app\\\":\\\"icmp\\\",\\\"networkservicename\\\":\\\"icmp-responder\\\"},\\\"state\\\":\\\"RUNNING\\\"}}},\\\"icmp-respondertbc4x\\\":{\\\"Workspace\\\":\\\"nsm-1\\\",\\\"NseReg\\\":{\\\"network_service\\\":{\\\"name\\\":\\\"icmp-responder\\\",\\\"payload\\\":\\\"IP\\\"},\\\"network_service_manager\\\":{\\\"name\\\":\\\"kind-1-worker\\\",\\\"url\\\":\\\"10.244.2.12:5001\\\",\\\"state\\\":\\\"RUNNING\\\"},\\\"network_service_endpoint\\\":{\\\"name\\\":\\\"icmp-respondertbc4x\\\",\\\"payload\\\":\\\"IP\\\",\\\"network_service_name\\\":\\\"icmp-responder\\\",\\\"network_service_manager_name\\\":\\\"kind-1-worker\\\",\\\"labels\\\":{\\\"app\\\":\\\"icmp\\\",\\\"networkservicename\\\":\\\"icmp-responder\\\"},\\\"state\\\":\\\"RUNNING\\\"}}}} span=68766b66242daea2:49ecec22910bca4f:01f139d1ed12ee86:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"==--------> restoreClients() span:68766b66242daea2:590d0b84e53c1726:49ecec22910bca4f:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"NSMServer: Creating workspaces for existing clients...\" operation=restoreClients span=\"68766b66242daea2:590d0b84e53c1726:49ecec22910bca4f:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"==----------> Workspace:nsm-23() span:68766b66242daea2:280d2c6386d34695:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Creating new workspace: nsm-23\" operation=\"Workspace:nsm-23\" span=\"68766b66242daea2:280d2c6386d34695:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\">><<---------- restore=true span=68766b66242daea2:280d2c6386d34695:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Creating new directory: /var/lib/networkservicemesh/nsm-23\" operation=\"Workspace:nsm-23\" span=\"68766b66242daea2:280d2c6386d34695:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Creating new listener on: /var/lib/networkservicemesh/nsm-23/nsm.server.io.sock\" operation=\"Workspace:nsm-23\" span=\"68766b66242daea2:280d2c6386d34695:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Creating new NetworkServiceRegistryServer\" operation=\"Workspace:nsm-23\" span=\"68766b66242daea2:280d2c6386d34695:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Creating new MonitorConnectionServer\" operation=\"Workspace:nsm-23\" span=\"68766b66242daea2:280d2c6386d34695:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Creating new NetworkServiceServer\" operation=\"Workspace:nsm-23\" span=\"68766b66242daea2:280d2c6386d34695:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"LocalConnection - Serve starting...\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Reading excluded prefixes config file: /var/lib/networkservicemesh/config/excluded_prefixes.yaml\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Excluded prefixes: [10.244.0.0/16 10.96.0.0/12]\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Creating new GRPC MonitorServer\" operation=\"Workspace:nsm-23\" span=\"68766b66242daea2:280d2c6386d34695:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"==------------> NewServer() span:68766b66242daea2:11fc67c6b2c703ec:280d2c6386d34695:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"GRPC.NewServer with open tracing enabled\" operation=NewServer span=\"68766b66242daea2:11fc67c6b2c703ec:280d2c6386d34695:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"==--------------> GetCertificate() span:68766b66242daea2:28bda7a441a1221a:11fc67c6b2c703ec:1\"\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc0000ee338 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\nINFO: 2021/06/09 02:22:49 [core] blockingPicker: the picked transport is not ready, loop back to repick\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000364cc0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000364cc0, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc00000e0f0 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000097090, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] blockingPicker: the picked transport is not ready, loop back to repick\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000097090, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"SPIRE -- GetX509SVID:&{spiffe://test.com/nsmgr [0xc0001c0000] 0xc000600720}\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Default trust domain:test.com\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"defaultTrustDomain:test.com\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"AUTHORIZING ALL CLIENTS\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Server will be started in secure mode using tlsConfig:&{<nil> <nil> [] map[] 0x97a4c0 <nil> <nil> 0x97a5c0 <nil> <nil> []  RequireAnyClientCert <nil> false [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}\"\\n2021/06/09 02:22:49 Reporting span 68766b66242daea2:28bda7a441a1221a:11fc67c6b2c703ec:1\\n2021/06/09 02:22:49 Reporting span 68766b66242daea2:11fc67c6b2c703ec:280d2c6386d34695:1\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Registering NetworkServiceRegistryServer with registerServer\" operation=\"Workspace:nsm-23\" span=\"68766b66242daea2:280d2c6386d34695:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Registering NetworkServiceDiscoveryServer with discoveryServer\" operation=\"Workspace:nsm-23\" span=\"68766b66242daea2:280d2c6386d34695:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Registering NetworkServiceServer with registerServer\" operation=\"Workspace:nsm-23\" span=\"68766b66242daea2:280d2c6386d34695:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Registering MonitorConnectionServer with registerServer\" operation=\"Workspace:nsm-23\" span=\"68766b66242daea2:280d2c6386d34695:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Trying to establish connection to target: /var/lib/networkservicemesh/nsm-23/nsm.server.io.sock\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"func insecure: false, env insecure: false\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Connecting to the workload api at:unix:///run/spire/sockets/agent.sock\"\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc00000e230 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] blockingPicker: the picked transport is not ready, loop back to repick\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc00063a110, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc00063a110, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to SHUTDOWN\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{test.com}:0xc0001881c0]}\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"defaultTrustDomain:test.com\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"AUTHORIZING ALL CLIENTS\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Fetch tlsConfig for Trust Domain: test.com\"\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Found 1 tlsconfigs.\"\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"\"\\nINFO: 2021/06/09 02:22:49 [core] scheme \"\" not registered, fallback to default scheme\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{/var/lib/networkservicemesh/nsm-23/nsm.server.io.sock  <nil> 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"/var/lib/networkservicemesh/nsm-23/nsm.server.io.sock\" to connect\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc0005040a0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc0005040a0, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}\"\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}\"\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"\"\\nINFO: 2021/06/09 02:22:49 [core] scheme \"\" not registered, fallback to default scheme\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{/var/lib/networkservicemesh/nsm-23/nsm.server.io.sock  <nil> 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000141d60, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"/var/lib/networkservicemesh/nsm-23/nsm.server.io.sock\" to connect\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000141d60, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to SHUTDOWN\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"grpcserver for workspace &{name:nsm-23 listener:0xc000377760 registryServer:0xc000377800 networkServiceServer:0xc000361680 monitorConnectionServer:0xc0003778a0 grpcServer:0xc0004ee8c0 Mutex:{state:0 sema:0} state:2 locationProvider:0xc000185080 localRegistry:0xc000195ec0 ctx:0xc000360570 discoveryServer:0xc0003edf50} is operational\" operation=\"Workspace:nsm-23\" span=\"68766b66242daea2:280d2c6386d34695:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Created new workspace: &{name:nsm-23 listener:0xc000377760 registryServer:0xc000377800 networkServiceServer:0xc000361680 monitorConnectionServer:0xc0003778a0 grpcServer:0xc0004ee8c0 Mutex:{state:0 sema:0} state:2 locationProvider:0xc000185080 localRegistry:0xc000195ec0 ctx:0xc000360570 discoveryServer:0xc0003edf50}\" operation=\"Workspace:nsm-23\" span=\"68766b66242daea2:280d2c6386d34695:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"==------------> cleanup() span:68766b66242daea2:69fa1ddb021e058e:280d2c6386d34695:1\"\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\n2021/06/09 02:22:49 Reporting span 68766b66242daea2:69fa1ddb021e058e:280d2c6386d34695:1\\n2021/06/09 02:22:49 Reporting span 68766b66242daea2:280d2c6386d34695:590d0b84e53c1726:1\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Workspace for client nsm-23 created\" operation=restoreClients span=\"68766b66242daea2:590d0b84e53c1726:49ecec22910bca4f:1\"\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"==----------> Workspace:nsm-1() span:68766b66242daea2:57c7be6c36bb8875:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Creating new workspace: nsm-1\" operation=\"Workspace:nsm-1\" span=\"68766b66242daea2:57c7be6c36bb8875:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\">><<---------- restore=true span=68766b66242daea2:57c7be6c36bb8875:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Creating new directory: /var/lib/networkservicemesh/nsm-1\" operation=\"Workspace:nsm-1\" span=\"68766b66242daea2:57c7be6c36bb8875:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Creating new listener on: /var/lib/networkservicemesh/nsm-1/nsm.server.io.sock\" operation=\"Workspace:nsm-1\" span=\"68766b66242daea2:57c7be6c36bb8875:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Creating new NetworkServiceRegistryServer\" operation=\"Workspace:nsm-1\" span=\"68766b66242daea2:57c7be6c36bb8875:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Creating new MonitorConnectionServer\" operation=\"Workspace:nsm-1\" span=\"68766b66242daea2:57c7be6c36bb8875:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Creating new NetworkServiceServer\" operation=\"Workspace:nsm-1\" span=\"68766b66242daea2:57c7be6c36bb8875:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Reading excluded prefixes config file: /var/lib/networkservicemesh/config/excluded_prefixes.yaml\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Excluded prefixes: [10.244.0.0/16 10.96.0.0/12]\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Creating new GRPC MonitorServer\" operation=\"Workspace:nsm-1\" span=\"68766b66242daea2:57c7be6c36bb8875:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"==------------> NewServer() span:68766b66242daea2:0ac62a9fbe06105a:57c7be6c36bb8875:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"GRPC.NewServer with open tracing enabled\" operation=NewServer span=\"68766b66242daea2:0ac62a9fbe06105a:57c7be6c36bb8875:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"==--------------> GetCertificate() span:68766b66242daea2:77a30cfd585f78e3:0ac62a9fbe06105a:1\"\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc000462108 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] blockingPicker: the picked transport is not ready, loop back to repick\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc00063a330, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"LocalConnection - Serve starting...\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc00063a330, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc0000b2080 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] blockingPicker: the picked transport is not ready, loop back to repick\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc0003eccf0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc0003eccf0, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"SPIRE -- GetX509SVID:&{spiffe://test.com/nsmgr [0xc0001c1080] 0xc000634a50}\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Default trust domain:test.com\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"defaultTrustDomain:test.com\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"AUTHORIZING ALL CLIENTS\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Server will be started in secure mode using tlsConfig:&{<nil> <nil> [] map[] 0x97a4c0 <nil> <nil> 0x97a5c0 <nil> <nil> []  RequireAnyClientCert <nil> false [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}\"\\n2021/06/09 02:22:49 Reporting span 68766b66242daea2:77a30cfd585f78e3:0ac62a9fbe06105a:1\\n2021/06/09 02:22:49 Reporting span 68766b66242daea2:0ac62a9fbe06105a:57c7be6c36bb8875:1\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Registering NetworkServiceRegistryServer with registerServer\" operation=\"Workspace:nsm-1\" span=\"68766b66242daea2:57c7be6c36bb8875:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Registering NetworkServiceDiscoveryServer with discoveryServer\" operation=\"Workspace:nsm-1\" span=\"68766b66242daea2:57c7be6c36bb8875:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Registering NetworkServiceServer with registerServer\" operation=\"Workspace:nsm-1\" span=\"68766b66242daea2:57c7be6c36bb8875:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Registering MonitorConnectionServer with registerServer\" operation=\"Workspace:nsm-1\" span=\"68766b66242daea2:57c7be6c36bb8875:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Trying to establish connection to target: /var/lib/networkservicemesh/nsm-1/nsm.server.io.sock\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"func insecure: false, env insecure: false\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Connecting to the workload api at:unix:///run/spire/sockets/agent.sock\"\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc0000ee240 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] blockingPicker: the picked transport is not ready, loop back to repick\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc0003645d0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc0003645d0, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to SHUTDOWN\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{test.com}:0xc000128380]}\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"defaultTrustDomain:test.com\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"AUTHORIZING ALL CLIENTS\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Fetch tlsConfig for Trust Domain: test.com\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Found 1 tlsconfigs.\"\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"\"\\nINFO: 2021/06/09 02:22:49 [core] scheme \"\" not registered, fallback to default scheme\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{/var/lib/networkservicemesh/nsm-1/nsm.server.io.sock  <nil> 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"/var/lib/networkservicemesh/nsm-1/nsm.server.io.sock\" to connect\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc0003ecaf0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc0003ecaf0, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}\"\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to SHUTDOWN\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}\"\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"\"\\nINFO: 2021/06/09 02:22:49 [core] scheme \"\" not registered, fallback to default scheme\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{/var/lib/networkservicemesh/nsm-1/nsm.server.io.sock  <nil> 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"/var/lib/networkservicemesh/nsm-1/nsm.server.io.sock\" to connect\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc00063a370, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc00063a370, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to SHUTDOWN\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"grpcserver for workspace &{name:nsm-1 listener:0xc000194040 registryServer:0xc0001942e0 networkServiceServer:0xc0003e0690 monitorConnectionServer:0xc000194520 grpcServer:0xc0000c8e00 Mutex:{state:0 sema:0} state:2 locationProvider:0xc000185080 localRegistry:0xc000195ec0 ctx:0xc00003dcb0 discoveryServer:0xc0004898b0} is operational\" operation=\"Workspace:nsm-1\" span=\"68766b66242daea2:57c7be6c36bb8875:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Created new workspace: &{name:nsm-1 listener:0xc000194040 registryServer:0xc0001942e0 networkServiceServer:0xc0003e0690 monitorConnectionServer:0xc000194520 grpcServer:0xc0000c8e00 Mutex:{state:0 sema:0} state:2 locationProvider:0xc000185080 localRegistry:0xc000195ec0 ctx:0xc00003dcb0 discoveryServer:0xc0004898b0}\" operation=\"Workspace:nsm-1\" span=\"68766b66242daea2:57c7be6c36bb8875:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"==------------> cleanup() span:68766b66242daea2:6fc23c7155cd1047:57c7be6c36bb8875:1\"\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\n2021/06/09 02:22:49 Reporting span 68766b66242daea2:6fc23c7155cd1047:57c7be6c36bb8875:1\\n2021/06/09 02:22:49 Reporting span 68766b66242daea2:57c7be6c36bb8875:590d0b84e53c1726:1\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Workspace for client nsm-1 created\" operation=restoreClients span=\"68766b66242daea2:590d0b84e53c1726:49ecec22910bca4f:1\"\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"==----------> Workspace:nsm-19() span:68766b66242daea2:59667a79949384ce:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Creating new workspace: nsm-19\" operation=\"Workspace:nsm-19\" span=\"68766b66242daea2:59667a79949384ce:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\">><<---------- restore=true span=68766b66242daea2:59667a79949384ce:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Creating new directory: /var/lib/networkservicemesh/nsm-19\" operation=\"Workspace:nsm-19\" span=\"68766b66242daea2:59667a79949384ce:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Creating new listener on: /var/lib/networkservicemesh/nsm-19/nsm.server.io.sock\" operation=\"Workspace:nsm-19\" span=\"68766b66242daea2:59667a79949384ce:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Creating new NetworkServiceRegistryServer\" operation=\"Workspace:nsm-19\" span=\"68766b66242daea2:59667a79949384ce:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Creating new MonitorConnectionServer\" operation=\"Workspace:nsm-19\" span=\"68766b66242daea2:59667a79949384ce:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Creating new NetworkServiceServer\" operation=\"Workspace:nsm-19\" span=\"68766b66242daea2:59667a79949384ce:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"LocalConnection - Serve starting...\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Reading excluded prefixes config file: /var/lib/networkservicemesh/config/excluded_prefixes.yaml\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Excluded prefixes: [10.244.0.0/16 10.96.0.0/12]\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Creating new GRPC MonitorServer\" operation=\"Workspace:nsm-19\" span=\"68766b66242daea2:59667a79949384ce:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"==------------> NewServer() span:68766b66242daea2:470feabe199cf979:59667a79949384ce:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"GRPC.NewServer with open tracing enabled\" operation=NewServer span=\"68766b66242daea2:470feabe199cf979:59667a79949384ce:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"==--------------> GetCertificate() span:68766b66242daea2:69c869181e1bfd22:470feabe199cf979:1\"\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc0004620a0 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] blockingPicker: the picked transport is not ready, loop back to repick\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc00018b710, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc00018b710, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc0001821f8 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc00026d190, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] blockingPicker: the picked transport is not ready, loop back to repick\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc00026d190, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"SPIRE -- GetX509SVID:&{spiffe://test.com/nsmgr [0xc0001c2680] 0xc0006007e0}\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Default trust domain:test.com\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"defaultTrustDomain:test.com\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"AUTHORIZING ALL CLIENTS\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Server will be started in secure mode using tlsConfig:&{<nil> <nil> [] map[] 0x97a4c0 <nil> <nil> 0x97a5c0 <nil> <nil> []  RequireAnyClientCert <nil> false [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}\"\\n2021/06/09 02:22:49 Reporting span 68766b66242daea2:69c869181e1bfd22:470feabe199cf979:1\\n2021/06/09 02:22:49 Reporting span 68766b66242daea2:470feabe199cf979:59667a79949384ce:1\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Registering NetworkServiceRegistryServer with registerServer\" operation=\"Workspace:nsm-19\" span=\"68766b66242daea2:59667a79949384ce:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Registering NetworkServiceDiscoveryServer with discoveryServer\" operation=\"Workspace:nsm-19\" span=\"68766b66242daea2:59667a79949384ce:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Registering NetworkServiceServer with registerServer\" operation=\"Workspace:nsm-19\" span=\"68766b66242daea2:59667a79949384ce:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Registering MonitorConnectionServer with registerServer\" operation=\"Workspace:nsm-19\" span=\"68766b66242daea2:59667a79949384ce:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Trying to establish connection to target: /var/lib/networkservicemesh/nsm-19/nsm.server.io.sock\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"func insecure: false, env insecure: false\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Connecting to the workload api at:unix:///run/spire/sockets/agent.sock\"\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc0000ee348 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] blockingPicker: the picked transport is not ready, loop back to repick\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000365320, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000365320, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to SHUTDOWN\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{test.com}:0xc0000c28c0]}\"\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"defaultTrustDomain:test.com\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"AUTHORIZING ALL CLIENTS\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Fetch tlsConfig for Trust Domain: test.com\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Found 1 tlsconfigs.\"\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"\"\\nINFO: 2021/06/09 02:22:49 [core] scheme \"\" not registered, fallback to default scheme\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{/var/lib/networkservicemesh/nsm-19/nsm.server.io.sock  <nil> 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc00026dc60, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"/var/lib/networkservicemesh/nsm-19/nsm.server.io.sock\" to connect\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc00026dc60, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}\"\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}\"\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"\"\\nINFO: 2021/06/09 02:22:49 [core] scheme \"\" not registered, fallback to default scheme\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{/var/lib/networkservicemesh/nsm-19/nsm.server.io.sock  <nil> 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"/var/lib/networkservicemesh/nsm-19/nsm.server.io.sock\" to connect\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000365bf0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000365bf0, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to SHUTDOWN\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"grpcserver for workspace &{name:nsm-19 listener:0xc0000b5be0 registryServer:0xc0000b5c80 networkServiceServer:0xc0003e16b0 monitorConnectionServer:0xc0000b5d60 grpcServer:0xc0004ee700 Mutex:{state:0 sema:0} state:2 locationProvider:0xc000185080 localRegistry:0xc000195ec0 ctx:0xc0003e0510 discoveryServer:0xc00063b9f0} is operational\" operation=\"Workspace:nsm-19\" span=\"68766b66242daea2:59667a79949384ce:590d0b84e53c1726:1\"\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Created new workspace: &{name:nsm-19 listener:0xc0000b5be0 registryServer:0xc0000b5c80 networkServiceServer:0xc0003e16b0 monitorConnectionServer:0xc0000b5d60 grpcServer:0xc0004ee700 Mutex:{state:0 sema:0} state:2 locationProvider:0xc000185080 localRegistry:0xc000195ec0 ctx:0xc0003e0510 discoveryServer:0xc00063b9f0}\" operation=\"Workspace:nsm-19\" span=\"68766b66242daea2:59667a79949384ce:590d0b84e53c1726:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"==------------> cleanup() span:68766b66242daea2:446d5d2cbf62041b:59667a79949384ce:1\"\\n2021/06/09 02:22:49 Reporting span 68766b66242daea2:446d5d2cbf62041b:59667a79949384ce:1\\n2021/06/09 02:22:49 Reporting span 68766b66242daea2:59667a79949384ce:590d0b84e53c1726:1\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Workspace for client nsm-19 created\" operation=restoreClients span=\"68766b66242daea2:590d0b84e53c1726:49ecec22910bca4f:1\"\\n2021/06/09 02:22:49 Reporting span 68766b66242daea2:590d0b84e53c1726:49ecec22910bca4f:1\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\">><<------ updated-clients=[\\\"nsm-23\\\",\\\"nsm-1\\\",\\\"nsm-19\\\"] span=68766b66242daea2:49ecec22910bca4f:01f139d1ed12ee86:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"==--------> restore-endpoints() span:68766b66242daea2:1458c4aaaac09604:49ecec22910bca4f:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Requesting NetworkServiceDiscoveryClient...\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Requesting NseRegistryClient...\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"==----------> check-nse-icmp-responder4r75t() span:68766b66242daea2:1733791c2965e74c:1458c4aaaac09604:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\">><<---------- workspace={} span=68766b66242daea2:1733791c2965e74c:1458c4aaaac09604:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Checking NSE icmp-responder4r75t is alive at /var/lib/networkservicemesh/nsm-23/nsm.client.io.sock...\" operation=check-nse-icmp-responder4r75t span=\"68766b66242daea2:1733791c2965e74c:1458c4aaaac09604:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"==--> check-nse-alive() span:68766b66242daea2:11f4515cca38c419:1733791c2965e74c:1\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Trying to establish connection to target: /var/lib/networkservicemesh/nsm-23/nsm.client.io.sock\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"func insecure: false, env insecure: false\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Connecting to the workload api at:unix:///run/spire/sockets/agent.sock\"\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc000462070 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] blockingPicker: the picked transport is not ready, loop back to repick\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000096f90, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000096f90, {READY <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to READY\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to SHUTDOWN\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{test.com}:0xc0005029c0]}\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"defaultTrustDomain:test.com\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"AUTHORIZING ALL CLIENTS\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Fetch tlsConfig for Trust Domain: test.com\"\\ntime=\"2021-06-09T02:22:49Z\" level=info msg=\"Found 1 tlsconfigs.\"\\nINFO: 2021/06/09 02:22:49 [core] parsed scheme: \"\"\\nINFO: 2021/06/09 02:22:49 [core] scheme \"\" not registered, fallback to default scheme\\nINFO: 2021/06/09 02:22:49 [core] ccResolverWrapper: sending update to cc: {[{/var/lib/networkservicemesh/nsm-23/nsm.client.io.sock  <nil> 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:22:49 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel picks a new address \"/var/lib/networkservicemesh/nsm-23/nsm.client.io.sock\" to connect\\nWARNING: 2021/06/09 02:22:49 [core] grpc: addrConn.createTransport failed to connect to {/var/lib/networkservicemesh/nsm-23/nsm.client.io.sock /var/lib/networkservicemesh/nsm-23/nsm.client.io.sock <nil> 0 <nil>}. Err: connection error: desc = \"transport: Error while dialing dial unix /var/lib/networkservicemesh/nsm-23/nsm.client.io.sock: connect: no such file or directory\". Reconnecting...\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000488df0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:49 [core] Subchannel Connectivity change to TRANSIENT_FAILURE\\nINFO: 2021/06/09 02:22:49 [core] pickfirstBalancer: UpdateSubConnState: 0xc000488df0, {TRANSIENT_FAILURE connection error: desc = \"transport: Error while dialing dial unix /var/lib/networkservicemesh/nsm-23/nsm.client.io.sock: connect: no such file or directory\"}\\nINFO: 2021/06/09 02:22:49 [core] Channel Connectivity change to TRANSIENT_FAILURE\\nINFO: 2021/06/09 02:22:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:22:50 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:50 [core] Subchannel picks a new address \"/var/lib/networkservicemesh/nsm-23/nsm.client.io.sock\" to connect\\nINFO: 2021/06/09 02:22:50 [core] pickfirstBalancer: UpdateSubConnState: 0xc000488df0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:50 [core] Channel Connectivity change to CONNECTING\\nWARNING: 2021/06/09 02:22:50 [core] grpc: addrConn.createTransport failed to connect to {/var/lib/networkservicemesh/nsm-23/nsm.client.io.sock /var/lib/networkservicemesh/nsm-23/nsm.client.io.sock <nil> 0 <nil>}. Err: connection error: desc = \"transport: Error while dialing dial unix /var/lib/networkservicemesh/nsm-23/nsm.client.io.sock: connect: no such file or directory\". Reconnecting...\\nINFO: 2021/06/09 02:22:50 [core] Subchannel Connectivity change to TRANSIENT_FAILURE\\nINFO: 2021/06/09 02:22:50 [core] pickfirstBalancer: UpdateSubConnState: 0xc000488df0, {TRANSIENT_FAILURE connection error: desc = \"transport: Error while dialing dial unix /var/lib/networkservicemesh/nsm-23/nsm.client.io.sock: connect: no such file or directory\"}\\nINFO: 2021/06/09 02:22:50 [core] Channel Connectivity change to TRANSIENT_FAILURE\\nINFO: 2021/06/09 02:22:52 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:52 [core] Subchannel picks a new address \"/var/lib/networkservicemesh/nsm-23/nsm.client.io.sock\" to connect\\nINFO: 2021/06/09 02:22:52 [core] pickfirstBalancer: UpdateSubConnState: 0xc000488df0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:52 [core] Channel Connectivity change to CONNECTING\\nWARNING: 2021/06/09 02:22:52 [core] grpc: addrConn.createTransport failed to connect to {/var/lib/networkservicemesh/nsm-23/nsm.client.io.sock /var/lib/networkservicemesh/nsm-23/nsm.client.io.sock <nil> 0 <nil>}. Err: connection error: desc = \"transport: Error while dialing dial unix /var/lib/networkservicemesh/nsm-23/nsm.client.io.sock: connect: no such file or directory\". Reconnecting...\\nINFO: 2021/06/09 02:22:52 [core] Subchannel Connectivity change to TRANSIENT_FAILURE\\nINFO: 2021/06/09 02:22:52 [core] pickfirstBalancer: UpdateSubConnState: 0xc000488df0, {TRANSIENT_FAILURE connection error: desc = \"transport: Error while dialing dial unix /var/lib/networkservicemesh/nsm-23/nsm.client.io.sock: connect: no such file or directory\"}\\nINFO: 2021/06/09 02:22:52 [core] Channel Connectivity change to TRANSIENT_FAILURE\\nINFO: 2021/06/09 02:22:55 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:22:55 [core] Subchannel picks a new address \"/var/lib/networkservicemesh/nsm-23/nsm.client.io.sock\" to connect\\nINFO: 2021/06/09 02:22:55 [core] pickfirstBalancer: UpdateSubConnState: 0xc000488df0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:22:55 [core] Channel Connectivity change to CONNECTING\\nWARNING: 2021/06/09 02:22:55 [core] grpc: addrConn.createTransport failed to connect to {/var/lib/networkservicemesh/nsm-23/nsm.client.io.sock /var/lib/networkservicemesh/nsm-23/nsm.client.io.sock <nil> 0 <nil>}. Err: connection error: desc = \"transport: Error while dialing dial unix /var/lib/networkservicemesh/nsm-23/nsm.client.io.sock: connect: no such file or directory\". Reconnecting...\\nINFO: 2021/06/09 02:22:55 [core] Subchannel Connectivity change to TRANSIENT_FAILURE\\nINFO: 2021/06/09 02:22:55 [core] pickfirstBalancer: UpdateSubConnState: 0xc000488df0, {TRANSIENT_FAILURE connection error: desc = \"transport: Error while dialing dial unix /var/lib/networkservicemesh/nsm-23/nsm.client.io.sock: connect: no such file or directory\"}\\nINFO: 2021/06/09 02:22:55 [core] Channel Connectivity change to TRANSIENT_FAILURE\\nINFO: 2021/06/09 02:22:59 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:22:59 [core] Subchannel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:23:19 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:23:19Z\" level=info msg=\">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\\\"\\\" span=0a6e9191e5453e34:57fe729de0cb43d1:7b8fe6ffe0d91dd8:1\"\\ntime=\"2021-06-09T02:23:19Z\" level=info msg=\">><<-- request={} span=0a6e9191e5453e34:57fe729de0cb43d1:7b8fe6ffe0d91dd8:1\"\\ntime=\"2021-06-09T02:23:19Z\" level=info msg=\">><<-- response={\\\"workspace\\\":[\\\"nsm-23\\\",\\\"nsm-1\\\",\\\"nsm-19\\\"]} span=0a6e9191e5453e34:57fe729de0cb43d1:7b8fe6ffe0d91dd8:1\"\\n2021/06/09 02:23:19 Reporting span 0a6e9191e5453e34:57fe729de0cb43d1:7b8fe6ffe0d91dd8:1\\nINFO: 2021/06/09 02:23:19 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:23:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:23:49Z\" level=info msg=\">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\\\"\\\" span=32f0085a171be373:746559a20e2fab8a:67634c8f7f10dd1d:1\"\\ntime=\"2021-06-09T02:23:49Z\" level=info msg=\">><<-- request={} span=32f0085a171be373:746559a20e2fab8a:67634c8f7f10dd1d:1\"\\ntime=\"2021-06-09T02:23:49Z\" level=info msg=\">><<-- response={\\\"workspace\\\":[\\\"nsm-23\\\",\\\"nsm-1\\\",\\\"nsm-19\\\"]} span=32f0085a171be373:746559a20e2fab8a:67634c8f7f10dd1d:1\"\\n2021/06/09 02:23:49 Reporting span 32f0085a171be373:746559a20e2fab8a:67634c8f7f10dd1d:1\\nINFO: 2021/06/09 02:23:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:24:19 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:24:19Z\" level=info msg=\">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\\\"\\\" span=1f40e2cde28591c8:017373e0c7c13a94:1a823de6fd88ae2e:1\"\\ntime=\"2021-06-09T02:24:19Z\" level=info msg=\">><<-- request={} span=1f40e2cde28591c8:017373e0c7c13a94:1a823de6fd88ae2e:1\"\\ntime=\"2021-06-09T02:24:19Z\" level=info msg=\">><<-- response={\\\"workspace\\\":[\\\"nsm-23\\\",\\\"nsm-1\\\",\\\"nsm-19\\\"]} span=1f40e2cde28591c8:017373e0c7c13a94:1a823de6fd88ae2e:1\"\\n2021/06/09 02:24:19 Reporting span 1f40e2cde28591c8:017373e0c7c13a94:1a823de6fd88ae2e:1\\nINFO: 2021/06/09 02:24:19 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:24:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:24:49Z\" level=info msg=\">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\\\"\\\" span=54f06edd6efeeb90:77f225e360291ea4:03d6c348787eec21:1\"\\ntime=\"2021-06-09T02:24:49Z\" level=info msg=\">><<-- request={} span=54f06edd6efeeb90:77f225e360291ea4:03d6c348787eec21:1\"\\ntime=\"2021-06-09T02:24:49Z\" level=info msg=\">><<-- response={\\\"workspace\\\":[\\\"nsm-23\\\",\\\"nsm-1\\\",\\\"nsm-19\\\"]} span=54f06edd6efeeb90:77f225e360291ea4:03d6c348787eec21:1\"\\n2021/06/09 02:24:49 Reporting span 54f06edd6efeeb90:77f225e360291ea4:03d6c348787eec21:1\\nINFO: 2021/06/09 02:24:49 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\n"
    k8s.go:1166: 
        goroutine 566 [running]:
        runtime/debug.Stack(0xc0004c0750, 0x223e220, 0x30b6480)
        	/usr/local/go/src/runtime/debug/stack.go:24 +0x9f
        github.com/networkservicemesh/networkservicemesh/test/kubetest.(*K8s).waitLogsMatchNamespace(0xc000128300, 0x26d9e20, 0xc0002a5b00, 0xc00088c800, 0x24bf09f, 0x4, 0xc000533ef8, 0xc000d4c000, 0x6d, 0x24c6d2f, ...)
        	/Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/test/kubetest/k8s.go:1166 +0xd85
        github.com/networkservicemesh/networkservicemesh/test/kubetest.(*K8s).waitLogsMatch(...)
        	/Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/test/kubetest/k8s.go:1108
        github.com/networkservicemesh/networkservicemesh/test/kubetest.(*K8s).WaitLogsContainsRegex(0xc000128300, 0xc00088c800, 0x24bf09f, 0x4, 0x24eda8c, 0x26, 0x1bf08eb000, 0x0, 0x0)
        	/Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/test/kubetest/k8s.go:1063 +0x2a8
        github.com/networkservicemesh/networkservicemesh/test/kubetest.WaitNSMgrDeployed.func1(0xc000baf9c0, 0xc000128300, 0xc00088c800, 0x1bf08eb000)
        	/Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/test/kubetest/utils.go:238 +0x9b
        created by github.com/networkservicemesh/networkservicemesh/test/kubetest.WaitNSMgrDeployed
        	/Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/test/kubetest/utils.go:236 +0x8d
        
        Expected
            <bool>: false
        to be true
    basic_nsm_restart_restore_nse_test.go:73: 
        Expected
            <[]v1alpha1.NetworkService | len:0, cap:0>: []
        to have length 1
time="2021-06-08T19:24:50-07:00" level=error msg="Failed to get logs from jaeger err: previous terminated container \"jaeger\" in pod \"jaeger\" not found"
time="2021-06-08T19:24:50-07:00" level=warning msg="Can not get logs for container: jaeger, Error: previous terminated container \"jaeger\" in pod \"jaeger\" not found"
time="2021-06-08T19:24:50-07:00" level=error msg="Failed to get logs from icmp-responder-nse-3 err: previous terminated container \"icmp-responder-nse-3\" in pod \"icmp-responder-nse-3\" not found"
time="2021-06-08T19:24:50-07:00" level=warning msg="Can not get logs for container: icmp-responder-nse-3, Error: previous terminated container \"icmp-responder-nse-3\" in pod \"icmp-responder-nse-3\" not found"
E0608 19:24:50.082682   22882 portforward.go:409] error closing listener: close tcp4 127.0.0.1:50541: use of closed network connection
E0608 19:24:50.082702   22882 portforward.go:409] error closing listener: close tcp6 [::1]:50541: use of closed network connection
time="2021-06-08T19:24:50-07:00" level=error msg="Failed to get logs from icmp-responder-nse-2 err: previous terminated container \"icmp-responder-nse-2\" in pod \"icmp-responder-nse-2\" not found"
time="2021-06-08T19:24:50-07:00" level=warning msg="Can not get logs for container: icmp-responder-nse-2, Error: previous terminated container \"icmp-responder-nse-2\" in pod \"icmp-responder-nse-2\" not found"
time="2021-06-08T19:24:50-07:00" level=error msg="Failed to get logs from nsmd-forwarder-kind-1-worker err: previous terminated container \"vppagent-forwarder\" in pod \"nsmd-forwarder-kind-1-worker\" not found"
time="2021-06-08T19:24:50-07:00" level=warning msg="Can not get logs for container: vppagent-forwarder, Error: previous terminated container \"vppagent-forwarder\" in pod \"nsmd-forwarder-kind-1-worker\" not found"
time="2021-06-08T19:24:51-07:00" level=error msg="Failed to get logs from prefix-service err: previous terminated container \"prefix-service\" in pod \"prefix-service\" not found"
time="2021-06-08T19:24:51-07:00" level=warning msg="Can not get logs for container: prefix-service, Error: previous terminated container \"prefix-service\" in pod \"prefix-service\" not found"
time="2021-06-08T19:24:51-07:00" level=error msg="Failed to get logs from spire-proxy err: previous terminated container \"spire-proxy\" in pod \"spire-proxy\" not found"
time="2021-06-08T19:24:51-07:00" level=warning msg="Can not get logs for container: spire-proxy, Error: previous terminated container \"spire-proxy\" in pod \"spire-proxy\" not found"
time="2021-06-08T19:24:51-07:00" level=error msg="Failed to get logs from nsmgr-kind-1-worker err: previous terminated container \"nsmdp\" in pod \"nsmgr-kind-1-worker\" not found"
time="2021-06-08T19:24:51-07:00" level=warning msg="Can not get logs for container: nsmdp, Error: previous terminated container \"nsmdp\" in pod \"nsmgr-kind-1-worker\" not found"
time="2021-06-08T19:24:51-07:00" level=info msg="artifacts: [0xc00057e8c0 0xc00035a780 0xc000405380 0xc00057e1c0 0xc000404200 0xc00057e580 0xc00041d400 0xc00041dd40 0xc000404640]"
time="2021-06-08T19:24:51-07:00" level=info msg="Deleting nsmgr-kind-1-worker"
time="2021-06-08T19:24:51-07:00" level=info msg="Deleting prefix-service"
time="2021-06-08T19:24:51-07:00" level=info msg="Deleting nsmd-forwarder-kind-1-worker"
time="2021-06-08T19:24:51-07:00" level=info msg="Deleting spire-proxy"
time="2021-06-08T19:24:51-07:00" level=info msg="Deleting icmp-responder-nse-2"
time="2021-06-08T19:24:51-07:00" level=info msg="Deleting icmp-responder-nse-3"
time="2021-06-08T19:24:51-07:00" level=info msg="Deleting jaeger"
E0608 19:24:52.000199   22882 portforward.go:409] error closing listener: close tcp4 127.0.0.1:50532: use of closed network connection
E0608 19:24:52.000280   22882 portforward.go:409] error closing listener: close tcp6 [::1]:50532: use of closed network connection
I0608 19:24:53.184203   22882 request.go:621] Throttling request took 1.184287655s, request: DELETE:https://127.0.0.1:55081/api/v1/namespaces/nsm-system/serviceaccounts/nsc-acc
time="2021-06-08T19:24:54-07:00" level=warning msg="The POD 'prefix-service' Deleted 2.193620267s"
time="2021-06-08T19:24:54-07:00" level=warning msg="The POD 'nsmd-forwarder-kind-1-worker' Deleted 2.389401497s"
time="2021-06-08T19:24:54-07:00" level=warning msg="The POD 'spire-proxy' Deleted 2.590626452s"
time="2021-06-08T19:24:54-07:00" level=warning msg="The POD 'icmp-responder-nse-2' Deleted 2.789271875s"
time="2021-06-08T19:24:55-07:00" level=warning msg="The POD 'icmp-responder-nse-3' Deleted 3.192178316s"
time="2021-06-08T19:25:06-07:00" level=warning msg="The POD 'jaeger' Deleted 14.990482428s"
time="2021-06-08T19:25:07-07:00" level=info msg="The POD nsmgr-kind-1-worker force deleted"
time="2021-06-08T19:25:07-07:00" level=warning msg="The POD 'nsmgr-kind-1-worker' Deleted 15.792105744s"
time="2021-06-08T19:25:07-07:00" level=info msg="namespace nsm-system is deleted"
time="2021-06-08T19:25:07-07:00" level=info msg="Cleanup time: 15.991734061s"
--- FAIL: TestNSMgrRestartRestoreNSE (201.68s)
FAIL
FAIL	github.com/networkservicemesh/networkservicemesh/test/integration	202.161s
FAIL
TestNSMgrRestartRestoreNSE: OnFail: running on fail script operations with KUBECONFIG=/Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config on cloud kind-1
make -i k8s-deconfig helm-delete k8s-terminating-cleanup k8s-delete-nsm-namespaces || true
helm uninstall config --namespace nsm-system || true
WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config
WARNING: Kubernetes configuration file is world-readable. This is insecure. Location: /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config
release "config" uninstalled
./scripts/helm-nsm-uninstall.sh --nsm_namespace nsm-system --all

Helm version detected: v3.3.4
Cleaning up NSM
xargs: illegal option -- -
usage: xargs [-0opt] [-E eofstr] [-I replstr [-R replacements] [-S replsize]]
             [-J replstr] [-L number] [-n number [-x]] [-P maxprocs]
             [-s size] [utility [argument ...]]
WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config
WARNING: Kubernetes configuration file is world-readable. This is insecure. Location: /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config
make[1]: [helm-delete] Error 1 (ignored)
xargs: illegal option -- -
usage: xargs [-0opt] [-E eofstr] [-I replstr [-R replacements] [-S replsize]]
             [-J replstr] [-L number] [-n number [-x]] [-P maxprocs]
             [-s size] [utility [argument ...]]
No resources found in nsm-system namespace.
make[1]: [k8s-terminating-cleanup] Error 1 (ignored)
Running delete-nsm-namespaces script
NSM_NAMESPACE=nsm-system
Checking ns: default
Checking ns: kube-node-lease
Checking ns: kube-public
Checking ns: kube-system
Checking ns: local-path-storage
Checking ns: nsm-system
Deleting ns: nsm-system
warning: Immediate deletion does not wait for confirmation that the running resource has been terminated. The resource may continue to run on the cluster indefinitely.
No resources found
namespace "nsm-system" deleted
Checking ns: spire
make k8s-config && echo "Cluster reset successfull"
namespace/nsm-system created
helm --namespace nsm-system install config deployments/helm/nsm/charts/config
WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config
WARNING: Kubernetes configuration file is world-readable. This is insecure. Location: /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config
NAME: config
LAST DEPLOYED: Tue Jun  8 19:25:16 2021
NAMESPACE: nsm-system
STATUS: deployed
REVISION: 1
TEST SUITE: None
Cluster reset successfull
failed to run go test . -test.timeout 10m0s -count 1 --run "^(TestNSMgrRestartRestoreNSE)\\z" --tags "basic" --test.v ExitCode: 1