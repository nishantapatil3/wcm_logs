Starting TestNSMDRecoverNSE on kind-1
Command line go test . -test.timeout 10m0s -count 1 --run "^(TestNSMDRecoverNSE)$\\z" --tags "basic" --test.v
env==[KUBECONFIG=/Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config ARTIFACTS_DIR=/Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/kind-1/TestNSMDRecoverNSE] 

=== RUN   TestNSMDRecoverNSE
time="2021-06-08T19:51:30-07:00" level=info msg="Using Kubeconfig: /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config"
time="2021-06-08T19:51:30-07:00" level=info msg="FORWARDING_PLANE not set, using default forwarder - vpp"
time="2021-06-08T19:51:30-07:00" level=info msg="Creating artifact manager with config: &{4 false /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/kind-1/TestNSMDRecoverNSE}"
time="2021-06-08T19:51:30-07:00" level=error msg="Error during create of test namespace failed to create a namespace: object is being deleted: namespaces \"nsm-system\" already exists"
time="2021-06-08T19:51:30-07:00" level=info msg="Checking availability of API server on 127.0.0.1"
time="2021-06-08T19:51:34-07:00" level=info msg="PING 127.0.0.1 (127.0.0.1): 56 data bytes\n64 bytes from 127.0.0.1: icmp_seq=0 ttl=64 time=0.047 ms\n64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.109 ms\n64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.110 ms\n64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.090 ms\n64 bytes from 127.0.0.1: icmp_seq=4 ttl=64 time=0.075 ms\n\n--- 127.0.0.1 ping statistics ---\n5 packets transmitted, 5 packets received, 0.0%!p(MISSING)acket loss\nround-trip min/avg/max/stddev = 0.047/0.086/0.110/0.024 ms\n"
time="2021-06-08T19:51:34-07:00" level=info msg="Will try to create namespace again after 20 seconds"
time="2021-06-08T19:51:54-07:00" level=info msg="namespace nsm-system is created"
time="2021-06-08T19:51:54-07:00" level=info msg="USE_IPV6 not set, using default false"
time="2021-06-08T19:51:54-07:00" level=error msg="serviceaccounts \"nsc-acc\" not found"
time="2021-06-08T19:51:54-07:00" level=error msg="serviceaccounts \"nse-acc\" not found"
time="2021-06-08T19:51:54-07:00" level=error msg="serviceaccounts \"nsmgr-acc\" not found"
time="2021-06-08T19:51:54-07:00" level=error msg="serviceaccounts \"nsmrs-acc\" not found"
time="2021-06-08T19:51:54-07:00" level=error msg="serviceaccounts \"forward-plane-acc\" not found"
time="2021-06-08T19:51:54-07:00" level=error msg="serviceaccounts \"crossconnect-monitor-acc\" not found"
time="2021-06-08T19:51:54-07:00" level=error msg="serviceaccounts \"proxy-nsmgr-acc\" not found"
time="2021-06-08T19:51:54-07:00" level=info msg="Cleanup done: 818.81066ms"
time="2021-06-08T19:51:55-07:00" level=info msg="&ServiceAccount{ObjectMeta:{default  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/default d1e9000f-6f3c-493d-a8e5-6ba010f630b3 11326 0 2021-06-08 19:51:54 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:default-token-mjzsd,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
I0608 19:51:56.068676   29353 request.go:621] Throttling request took 1.174519773s, request: POST:https://127.0.0.1:55081/api/v1/namespaces/nsm-system/serviceaccounts
time="2021-06-08T19:51:56-07:00" level=info msg="&ServiceAccount{ObjectMeta:{nsmgr-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/nsmgr-acc df77547c-1be9-48c1-91b0-95f96ff29ef4 11331 0 2021-06-08 19:51:55 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:nsmgr-acc-token-vpl2g,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T19:51:56-07:00" level=info msg="&ServiceAccount{ObjectMeta:{crossconnect-monitor-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/crossconnect-monitor-acc be219bf6-d675-487d-8fa0-d93d6a1ad5be 11336 0 2021-06-08 19:51:55 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:crossconnect-monitor-acc-token-n4m2t,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T19:51:57-07:00" level=info msg="&ServiceAccount{ObjectMeta:{forward-plane-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/forward-plane-acc 9c6f5da6-76d2-49dc-bf71-48821fbfb91d 11339 0 2021-06-08 19:51:55 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:forward-plane-acc-token-59h4m,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T19:51:57-07:00" level=info msg="&ServiceAccount{ObjectMeta:{nse-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/nse-acc 107a8495-4c53-42f5-ba79-792c12f9d9d9 11343 0 2021-06-08 19:51:55 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:nse-acc-token-z6sn6,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T19:51:57-07:00" level=info msg="&ServiceAccount{ObjectMeta:{proxy-nsmgr-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/proxy-nsmgr-acc c259a212-c905-4919-bf09-f31dda350c58 11349 0 2021-06-08 19:51:56 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:proxy-nsmgr-acc-token-5njtr,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T19:51:57-07:00" level=info msg="&ServiceAccount{ObjectMeta:{nsc-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/nsc-acc d0ce8c77-9d4f-47b2-bd59-78e325dbac4e 11354 0 2021-06-08 19:51:56 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:nsc-acc-token-4ggx7,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T19:51:57-07:00" level=info msg="&ServiceAccount{ObjectMeta:{nsmrs-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/nsmrs-acc 075a6f31-b9ff-48ff-bf9d-c41c45345a6d 11357 0 2021-06-08 19:51:56 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:nsmrs-acc-token-l98p6,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T19:51:57-07:00" level=info msg="Creating ConfigMap 'nsm-config' in namespace'nsm-system'..."
time="2021-06-08T19:51:58-07:00" level=info msg="Using image: containers.cisco.com/appn/prefix-service:vl3_latest"
time="2021-06-08T19:51:58-07:00" level=info msg="Using image: containers.cisco.com/appn/test-common:vl3_latest"
time="2021-06-08T19:51:58-07:00" level=info msg="role is created: &ClusterRole{ObjectMeta:{nsm-role  nsm-system    0 0001-01-01 00:00:00 +0000 UTC <nil> <nil> map[rbac.authorization.k8s.io/aggregate-to-admin:true rbac.authorization.k8s.io/aggregate-to-edit:true] map[] [] []  []},Rules:[]PolicyRule{PolicyRule{Verbs:[*],APIGroups:[networkservicemesh.io],Resources:[networkservices networkserviceendpoints networkservicemanagers],ResourceNames:[],NonResourceURLs:[],},PolicyRule{Verbs:[*],APIGroups:[apiextensions.k8s.io],Resources:[customresourcedefinitions],ResourceNames:[],NonResourceURLs:[],},PolicyRule{Verbs:[get update],APIGroups:[],Resources:[configmaps],ResourceNames:[],NonResourceURLs:[],},PolicyRule{Verbs:[get list watch],APIGroups:[],Resources:[nodes services namespaces],ResourceNames:[],NonResourceURLs:[],},},AggregationRule:nil,}"
time="2021-06-08T19:51:58-07:00" level=info msg="role is created: &ClusterRoleBinding{ObjectMeta:{nsm-role-binding      0 0001-01-01 00:00:00 +0000 UTC <nil> <nil> map[] map[] [] []  []},Subjects:[]Subject{Subject{Kind:ServiceAccount,APIGroup:,Name:nsmgr-acc,Namespace:nsm-system,},Subject{Kind:ServiceAccount,APIGroup:,Name:proxy-nsmgr-acc,Namespace:nsm-system,},Subject{Kind:ServiceAccount,APIGroup:,Name:crossconnect-monitor-acc,Namespace:nsm-system,},},RoleRef:RoleRef{APIGroup:rbac.authorization.k8s.io,Kind:ClusterRole,Name:nsm-role,},}"
time="2021-06-08T19:51:58-07:00" level=info msg="role is created: &ClusterRole{ObjectMeta:{aggregate-network-services-view  nsm-system    0 0001-01-01 00:00:00 +0000 UTC <nil> <nil> map[rbac.authorization.k8s.io/aggregate-to-view:true] map[] [] []  []},Rules:[]PolicyRule{PolicyRule{Verbs:[get list watch],APIGroups:[networkservicemesh.io],Resources:[networkservices],ResourceNames:[],NonResourceURLs:[],},},AggregationRule:nil,}"
time="2021-06-08T19:52:01-07:00" level=info msg="Trying to establish connection with the spire provider at address:tcp://127.0.0.1:51084"
time="2021-06-08T19:52:01-07:00" level=info msg="Created the todo context:tcp://127.0.0.1:51084"
time="2021-06-08T19:52:01-07:00" level=info msg="Got x509:&{0xc00042b830 <nil> {{0 0} 0 0 0 0} 0xc000420c80 0xc0004a06e0 {{0 0} 0 0 0 0} false} <nil>"
time="2021-06-08T19:52:01-07:00" level=info msg="Started goroutine"
time="2021-06-08T19:52:01-07:00" level=info msg="Returning provider"
time="2021-06-08T19:52:01-07:00" level=info msg="Issued identity:spiffe://test.com/nsmgr"
time="2021-06-08T19:52:01-07:00" level=info msg="Checking node: kind-1-control-plane"
time="2021-06-08T19:52:01-07:00" level=info msg="Checking node: kind-1-worker"
time="2021-06-08T19:52:01-07:00" level=info msg="Checking node: kind-1-worker2"
time="2021-06-08T19:52:01-07:00" level=info msg="Using image: jaegertracing/all-in-one:1.14.0"
time="2021-06-08T19:52:03-07:00" level=info msg="getting logs without container jaeger=none"
time="2021-06-08T19:52:04-07:00" level=info msg="Using image: containers.cisco.com/appn/nsmdp:vl3_latest"
time="2021-06-08T19:52:04-07:00" level=info msg="Using image: containers.cisco.com/appn/nsmd:vl3_latest"
time="2021-06-08T19:52:04-07:00" level=info msg="Using image: containers.cisco.com/appn/nsmd-k8s:vl3_latest"
time="2021-06-08T19:52:04-07:00" level=info msg="Using image: containers.cisco.com/appn/vppagent-forwarder:vl3_latest"
time="2021-06-08T19:52:16-07:00" level=info msg="Started NSMgr/Forwarder: 12.047566379s on node kind-1-worker"
time="2021-06-08T19:52:16-07:00" level=info msg="Using image: containers.cisco.com/appn/test-common:vl3_latest"
time="2021-06-08T19:52:16-07:00" level=info msg="Starting ICMP Responder NSE on node: kind-1-worker "
time="2021-06-08T19:52:17-07:00" level=info msg="getting logs without container icmp-responder-nse-1=none"
time="2021-06-08T19:52:18-07:00" level=info msg="ICMP Responder icmp-responder-nse-1 started done: 1.967163045s"
time="2021-06-08T19:52:18-07:00" level=info msg="Deleting icmp-responder-nse-1"
time="2021-06-08T19:52:18-07:00" level=info msg="Deleting nsmgr-kind-1-worker"
time="2021-06-08T19:52:18-07:00" level=warning msg="The POD 'icmp-responder-nse-1' Deleted 566.321179ms"
time="2021-06-08T19:52:34-07:00" level=info msg="The POD nsmgr-kind-1-worker force deleted"
time="2021-06-08T19:52:34-07:00" level=warning msg="The POD 'nsmgr-kind-1-worker' Deleted 15.970593726s"
time="2021-06-08T19:52:34-07:00" level=info msg="Using image: containers.cisco.com/appn/nsmdp:vl3_latest"
time="2021-06-08T19:52:34-07:00" level=info msg="Using image: containers.cisco.com/appn/nsmd:vl3_latest"
time="2021-06-08T19:52:34-07:00" level=info msg="Using image: containers.cisco.com/appn/nsmd-k8s:vl3_latest"
time="2021-06-08T19:54:43-07:00" level=info msg="pod info: nsmgr-kind-1-worker {\"metadata\":{\"name\":\"nsmgr-kind-1-worker\",\"namespace\":\"nsm-system\",\"selfLink\":\"/api/v1/namespaces/nsm-system/pods/nsmgr-kind-1-worker\",\"uid\":\"c9ccf358-6524-410a-bdc0-9789f3003b18\",\"resourceVersion\":\"11586\",\"creationTimestamp\":\"2021-06-09T02:52:34Z\"},\"spec\":{\"volumes\":[{\"name\":\"kubelet-socket\",\"hostPath\":{\"path\":\"/var/lib/kubelet/device-plugins\",\"type\":\"DirectoryOrCreate\"}},{\"name\":\"nsm-socket\",\"hostPath\":{\"path\":\"/var/lib/networkservicemesh\",\"type\":\"DirectoryOrCreate\"}},{\"name\":\"nsm-config-volume\",\"configMap\":{\"name\":\"nsm-config\",\"defaultMode\":420}},{\"name\":\"spire-agent-socket\",\"hostPath\":{\"path\":\"/run/spire/sockets\",\"type\":\"DirectoryOrCreate\"}},{\"name\":\"nsmgr-acc-token-vpl2g\",\"secret\":{\"secretName\":\"nsmgr-acc-token-vpl2g\",\"defaultMode\":420}}],\"containers\":[{\"name\":\"nsmdp\",\"image\":\"containers.cisco.com/appn/nsmdp:vl3_latest\",\"ports\":[{\"hostPort\":5001,\"containerPort\":5001,\"protocol\":\"TCP\"}],\"resources\":{\"limits\":{\"cpu\":\"1\"},\"requests\":{\"cpu\":\"1m\"}},\"volumeMounts\":[{\"name\":\"kubelet-socket\",\"mountPath\":\"/var/lib/kubelet/device-plugins\"},{\"name\":\"nsm-socket\",\"mountPath\":\"/var/lib/networkservicemesh\"},{\"name\":\"spire-agent-socket\",\"readOnly\":true,\"mountPath\":\"/run/spire/sockets\"},{\"name\":\"nsmgr-acc-token-vpl2g\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"IfNotPresent\"},{\"name\":\"nsmd\",\"image\":\"containers.cisco.com/appn/nsmd:vl3_latest\",\"resources\":{\"limits\":{\"cpu\":\"1\"},\"requests\":{\"cpu\":\"1m\"}},\"volumeMounts\":[{\"name\":\"nsm-socket\",\"mountPath\":\"/var/lib/networkservicemesh\"},{\"name\":\"nsm-config-volume\",\"mountPath\":\"/var/lib/networkservicemesh/config\"},{\"name\":\"spire-agent-socket\",\"readOnly\":true,\"mountPath\":\"/run/spire/sockets\"},{\"name\":\"nsmgr-acc-token-vpl2g\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"IfNotPresent\"},{\"name\":\"nsmd-k8s\",\"image\":\"containers.cisco.com/appn/nsmd-k8s:vl3_latest\",\"env\":[{\"name\":\"POD_UID\",\"valueFrom\":{\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.uid\"}}},{\"name\":\"POD_NAME\",\"value\":\"nsmgr-kind-1-worker\"},{\"name\":\"NODE_NAME\",\"value\":\"kind-1-worker\"},{\"name\":\"NSM_NAMESPACE\",\"value\":\"nsm-system\"}],\"resources\":{\"limits\":{\"cpu\":\"1\"},\"requests\":{\"cpu\":\"1m\"}},\"volumeMounts\":[{\"name\":\"spire-agent-socket\",\"readOnly\":true,\"mountPath\":\"/run/spire/sockets\"},{\"name\":\"nsmgr-acc-token-vpl2g\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"IfNotPresent\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"nodeSelector\":{\"kubernetes.io/hostname\":\"kind-1-worker\"},\"serviceAccountName\":\"nsmgr-acc\",\"serviceAccount\":\"nsmgr-acc\",\"nodeName\":\"kind-1-worker\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true},\"status\":{\"phase\":\"Running\",\"conditions\":[{\"type\":\"Initialized\",\"status\":\"True\",\"lastProbeTime\":null,\"lastTransitionTime\":\"2021-06-09T02:52:34Z\"},{\"type\":\"Ready\",\"status\":\"True\",\"lastProbeTime\":null,\"lastTransitionTime\":\"2021-06-09T02:52:42Z\"},{\"type\":\"ContainersReady\",\"status\":\"True\",\"lastProbeTime\":null,\"lastTransitionTime\":\"2021-06-09T02:52:42Z\"},{\"type\":\"PodScheduled\",\"status\":\"True\",\"lastProbeTime\":null,\"lastTransitionTime\":\"2021-06-09T02:52:34Z\"}],\"hostIP\":\"172.17.0.4\",\"podIP\":\"10.244.2.46\",\"podIPs\":[{\"ip\":\"10.244.2.46\"}],\"startTime\":\"2021-06-09T02:52:34Z\",\"containerStatuses\":[{\"name\":\"nsmd\",\"state\":{\"running\":{\"startedAt\":\"2021-06-09T02:52:42Z\"}},\"lastState\":{},\"ready\":true,\"restartCount\":0,\"image\":\"containers.cisco.com/appn/nsmd:vl3_latest\",\"imageID\":\"sha256:a906454672cfea8f945d8013ca1ff0b639efa0e20a25bfc18079825494ee6ceb\",\"containerID\":\"containerd://6a80799afe28b9d7d8827038bac717509cca81c6f29af68788a0025afa816393\",\"started\":true},{\"name\":\"nsmd-k8s\",\"state\":{\"running\":{\"startedAt\":\"2021-06-09T02:52:42Z\"}},\"lastState\":{},\"ready\":true,\"restartCount\":0,\"image\":\"containers.cisco.com/appn/nsmd-k8s:vl3_latest\",\"imageID\":\"sha256:245d60f997ce1f392911fdf5c7abb760e8f6dba32d6e7e138bf1ca247bb862f5\",\"containerID\":\"containerd://6ceaa4ff25138ff11996a6b197141bd1eb17b2a56c907d63057069231d739813\",\"started\":true},{\"name\":\"nsmdp\",\"state\":{\"running\":{\"startedAt\":\"2021-06-09T02:52:42Z\"}},\"lastState\":{},\"ready\":true,\"restartCount\":0,\"image\":\"containers.cisco.com/appn/nsmdp:vl3_latest\",\"imageID\":\"sha256:91cef188072369448551d8a0ddbf6ccbab7193a727ab85c75ad6590997cf31cb\",\"containerID\":\"containerd://51b7b6fa0964615b2023432071c5d4a9560efff17356b4ce0346ca755801cf4b\",\"started\":true}],\"qosClass\":\"Burstable\"}}"
time="2021-06-08T19:54:43-07:00" level=info msg="Pod nsmgr-kind-1-worker event: {\"metadata\":{\"name\":\"nsmgr-kind-1-worker.1686ca50801e7b38\",\"namespace\":\"nsm-system\",\"selfLink\":\"/api/v1/namespaces/nsm-system/events/nsmgr-kind-1-worker.1686ca50801e7b38\",\"uid\":\"b3d8e17a-293c-4ea8-9549-5a4c1f05e197\",\"resourceVersion\":\"11585\",\"creationTimestamp\":\"2021-06-09T02:52:42Z\"},\"involvedObject\":{\"kind\":\"Pod\",\"namespace\":\"nsm-system\",\"name\":\"nsmgr-kind-1-worker\",\"uid\":\"c9ccf358-6524-410a-bdc0-9789f3003b18\",\"apiVersion\":\"v1\",\"resourceVersion\":\"11546\",\"fieldPath\":\"spec.containers{nsmd-k8s}\"},\"reason\":\"Started\",\"message\":\"Started container nsmd-k8s\",\"source\":{\"component\":\"kubelet\",\"host\":\"kind-1-worker\"},\"firstTimestamp\":\"2021-06-09T02:52:42Z\",\"lastTimestamp\":\"2021-06-09T02:52:42Z\",\"count\":1,\"type\":\"Normal\",\"eventTime\":null,\"reportingComponent\":\"\",\"reportingInstance\":\"\"}"
time="2021-06-08T19:54:43-07:00" level=info msg="Pod nsmgr-kind-1-worker event: {\"metadata\":{\"name\":\"nsmgr-kind-1-worker.1686ca507b136a54\",\"namespace\":\"nsm-system\",\"selfLink\":\"/api/v1/namespaces/nsm-system/events/nsmgr-kind-1-worker.1686ca507b136a54\",\"uid\":\"7c95782d-3952-4ea2-9f79-fcdee40e02ba\",\"resourceVersion\":\"11584\",\"creationTimestamp\":\"2021-06-09T02:52:42Z\"},\"involvedObject\":{\"kind\":\"Pod\",\"namespace\":\"nsm-system\",\"name\":\"nsmgr-kind-1-worker\",\"uid\":\"c9ccf358-6524-410a-bdc0-9789f3003b18\",\"apiVersion\":\"v1\",\"resourceVersion\":\"11546\",\"fieldPath\":\"spec.containers{nsmd-k8s}\"},\"reason\":\"Created\",\"message\":\"Created container nsmd-k8s\",\"source\":{\"component\":\"kubelet\",\"host\":\"kind-1-worker\"},\"firstTimestamp\":\"2021-06-09T02:52:42Z\",\"lastTimestamp\":\"2021-06-09T02:52:42Z\",\"count\":1,\"type\":\"Normal\",\"eventTime\":null,\"reportingComponent\":\"\",\"reportingInstance\":\"\"}"
time="2021-06-08T19:54:43-07:00" level=info msg="Pod nsmgr-kind-1-worker event: {\"metadata\":{\"name\":\"nsmgr-kind-1-worker.1686ca5078c85fe8\",\"namespace\":\"nsm-system\",\"selfLink\":\"/api/v1/namespaces/nsm-system/events/nsmgr-kind-1-worker.1686ca5078c85fe8\",\"uid\":\"16e6193b-a34c-4a65-a80e-b13a4835120f\",\"resourceVersion\":\"11583\",\"creationTimestamp\":\"2021-06-09T02:52:42Z\"},\"involvedObject\":{\"kind\":\"Pod\",\"namespace\":\"nsm-system\",\"name\":\"nsmgr-kind-1-worker\",\"uid\":\"c9ccf358-6524-410a-bdc0-9789f3003b18\",\"apiVersion\":\"v1\",\"resourceVersion\":\"11546\",\"fieldPath\":\"spec.containers{nsmd-k8s}\"},\"reason\":\"Pulled\",\"message\":\"Container image \\\"containers.cisco.com/appn/nsmd-k8s:vl3_latest\\\" already present on machine\",\"source\":{\"component\":\"kubelet\",\"host\":\"kind-1-worker\"},\"firstTimestamp\":\"2021-06-09T02:52:42Z\",\"lastTimestamp\":\"2021-06-09T02:52:42Z\",\"count\":1,\"type\":\"Normal\",\"eventTime\":null,\"reportingComponent\":\"\",\"reportingInstance\":\"\"}"
time="2021-06-08T19:54:43-07:00" level=info msg="Pod nsmgr-kind-1-worker event: {\"metadata\":{\"name\":\"nsmgr-kind-1-worker.1686ca50789e737c\",\"namespace\":\"nsm-system\",\"selfLink\":\"/api/v1/namespaces/nsm-system/events/nsmgr-kind-1-worker.1686ca50789e737c\",\"uid\":\"772a9278-7288-4601-b882-8cc2b62451c6\",\"resourceVersion\":\"11582\",\"creationTimestamp\":\"2021-06-09T02:52:42Z\"},\"involvedObject\":{\"kind\":\"Pod\",\"namespace\":\"nsm-system\",\"name\":\"nsmgr-kind-1-worker\",\"uid\":\"c9ccf358-6524-410a-bdc0-9789f3003b18\",\"apiVersion\":\"v1\",\"resourceVersion\":\"11546\",\"fieldPath\":\"spec.containers{nsmd}\"},\"reason\":\"Started\",\"message\":\"Started container nsmd\",\"source\":{\"component\":\"kubelet\",\"host\":\"kind-1-worker\"},\"firstTimestamp\":\"2021-06-09T02:52:42Z\",\"lastTimestamp\":\"2021-06-09T02:52:42Z\",\"count\":1,\"type\":\"Normal\",\"eventTime\":null,\"reportingComponent\":\"\",\"reportingInstance\":\"\"}"
time="2021-06-08T19:54:43-07:00" level=info msg="Pod nsmgr-kind-1-worker event: {\"metadata\":{\"name\":\"nsmgr-kind-1-worker.1686ca507397e994\",\"namespace\":\"nsm-system\",\"selfLink\":\"/api/v1/namespaces/nsm-system/events/nsmgr-kind-1-worker.1686ca507397e994\",\"uid\":\"34c09ab1-53c7-4720-a14c-c92c7fa8a936\",\"resourceVersion\":\"11579\",\"creationTimestamp\":\"2021-06-09T02:52:42Z\"},\"involvedObject\":{\"kind\":\"Pod\",\"namespace\":\"nsm-system\",\"name\":\"nsmgr-kind-1-worker\",\"uid\":\"c9ccf358-6524-410a-bdc0-9789f3003b18\",\"apiVersion\":\"v1\",\"resourceVersion\":\"11546\",\"fieldPath\":\"spec.containers{nsmd}\"},\"reason\":\"Created\",\"message\":\"Created container nsmd\",\"source\":{\"component\":\"kubelet\",\"host\":\"kind-1-worker\"},\"firstTimestamp\":\"2021-06-09T02:52:42Z\",\"lastTimestamp\":\"2021-06-09T02:52:42Z\",\"count\":1,\"type\":\"Normal\",\"eventTime\":null,\"reportingComponent\":\"\",\"reportingInstance\":\"\"}"
time="2021-06-08T19:54:43-07:00" level=info msg="Pod nsmgr-kind-1-worker event: {\"metadata\":{\"name\":\"nsmgr-kind-1-worker.1686ca5071ed6f74\",\"namespace\":\"nsm-system\",\"selfLink\":\"/api/v1/namespaces/nsm-system/events/nsmgr-kind-1-worker.1686ca5071ed6f74\",\"uid\":\"8ff647ec-829a-46f5-8cf0-ba3f66cb00cd\",\"resourceVersion\":\"11578\",\"creationTimestamp\":\"2021-06-09T02:52:42Z\"},\"involvedObject\":{\"kind\":\"Pod\",\"namespace\":\"nsm-system\",\"name\":\"nsmgr-kind-1-worker\",\"uid\":\"c9ccf358-6524-410a-bdc0-9789f3003b18\",\"apiVersion\":\"v1\",\"resourceVersion\":\"11546\",\"fieldPath\":\"spec.containers{nsmd}\"},\"reason\":\"Pulled\",\"message\":\"Container image \\\"containers.cisco.com/appn/nsmd:vl3_latest\\\" already present on machine\",\"source\":{\"component\":\"kubelet\",\"host\":\"kind-1-worker\"},\"firstTimestamp\":\"2021-06-09T02:52:42Z\",\"lastTimestamp\":\"2021-06-09T02:52:42Z\",\"count\":1,\"type\":\"Normal\",\"eventTime\":null,\"reportingComponent\":\"\",\"reportingInstance\":\"\"}"
time="2021-06-08T19:54:43-07:00" level=info msg="Pod nsmgr-kind-1-worker event: {\"metadata\":{\"name\":\"nsmgr-kind-1-worker.1686ca5071ccef24\",\"namespace\":\"nsm-system\",\"selfLink\":\"/api/v1/namespaces/nsm-system/events/nsmgr-kind-1-worker.1686ca5071ccef24\",\"uid\":\"02fff785-06b8-4ecd-8781-047fa6d978c2\",\"resourceVersion\":\"11577\",\"creationTimestamp\":\"2021-06-09T02:52:42Z\"},\"involvedObject\":{\"kind\":\"Pod\",\"namespace\":\"nsm-system\",\"name\":\"nsmgr-kind-1-worker\",\"uid\":\"c9ccf358-6524-410a-bdc0-9789f3003b18\",\"apiVersion\":\"v1\",\"resourceVersion\":\"11546\",\"fieldPath\":\"spec.containers{nsmdp}\"},\"reason\":\"Started\",\"message\":\"Started container nsmdp\",\"source\":{\"component\":\"kubelet\",\"host\":\"kind-1-worker\"},\"firstTimestamp\":\"2021-06-09T02:52:42Z\",\"lastTimestamp\":\"2021-06-09T02:52:42Z\",\"count\":1,\"type\":\"Normal\",\"eventTime\":null,\"reportingComponent\":\"\",\"reportingInstance\":\"\"}"
time="2021-06-08T19:54:43-07:00" level=info msg="Pod nsmgr-kind-1-worker event: {\"metadata\":{\"name\":\"nsmgr-kind-1-worker.1686ca506d3c0f1c\",\"namespace\":\"nsm-system\",\"selfLink\":\"/api/v1/namespaces/nsm-system/events/nsmgr-kind-1-worker.1686ca506d3c0f1c\",\"uid\":\"73978bf1-2838-4c62-ad1b-a4908a38de71\",\"resourceVersion\":\"11576\",\"creationTimestamp\":\"2021-06-09T02:52:42Z\"},\"involvedObject\":{\"kind\":\"Pod\",\"namespace\":\"nsm-system\",\"name\":\"nsmgr-kind-1-worker\",\"uid\":\"c9ccf358-6524-410a-bdc0-9789f3003b18\",\"apiVersion\":\"v1\",\"resourceVersion\":\"11546\",\"fieldPath\":\"spec.containers{nsmdp}\"},\"reason\":\"Created\",\"message\":\"Created container nsmdp\",\"source\":{\"component\":\"kubelet\",\"host\":\"kind-1-worker\"},\"firstTimestamp\":\"2021-06-09T02:52:42Z\",\"lastTimestamp\":\"2021-06-09T02:52:42Z\",\"count\":1,\"type\":\"Normal\",\"eventTime\":null,\"reportingComponent\":\"\",\"reportingInstance\":\"\"}"
time="2021-06-08T19:54:43-07:00" level=info msg="Pod nsmgr-kind-1-worker event: {\"metadata\":{\"name\":\"nsmgr-kind-1-worker.1686ca506b7dcd50\",\"namespace\":\"nsm-system\",\"selfLink\":\"/api/v1/namespaces/nsm-system/events/nsmgr-kind-1-worker.1686ca506b7dcd50\",\"uid\":\"6601ebb9-a469-4b8a-984c-554dc49a1f51\",\"resourceVersion\":\"11575\",\"creationTimestamp\":\"2021-06-09T02:52:42Z\"},\"involvedObject\":{\"kind\":\"Pod\",\"namespace\":\"nsm-system\",\"name\":\"nsmgr-kind-1-worker\",\"uid\":\"c9ccf358-6524-410a-bdc0-9789f3003b18\",\"apiVersion\":\"v1\",\"resourceVersion\":\"11546\",\"fieldPath\":\"spec.containers{nsmdp}\"},\"reason\":\"Pulled\",\"message\":\"Container image \\\"containers.cisco.com/appn/nsmdp:vl3_latest\\\" already present on machine\",\"source\":{\"component\":\"kubelet\",\"host\":\"kind-1-worker\"},\"firstTimestamp\":\"2021-06-09T02:52:42Z\",\"lastTimestamp\":\"2021-06-09T02:52:42Z\",\"count\":1,\"type\":\"Normal\",\"eventTime\":null,\"reportingComponent\":\"\",\"reportingInstance\":\"\"}"
time="2021-06-08T19:54:43-07:00" level=info msg="Pod nsmgr-kind-1-worker event: {\"metadata\":{\"name\":\"nsmgr-kind-1-worker.1686ca4e84f409a4\",\"namespace\":\"nsm-system\",\"selfLink\":\"/api/v1/namespaces/nsm-system/events/nsmgr-kind-1-worker.1686ca4e84f409a4\",\"uid\":\"449d3b7c-11eb-4339-9358-fee99941d7b2\",\"resourceVersion\":\"11548\",\"creationTimestamp\":\"2021-06-09T02:52:34Z\"},\"involvedObject\":{\"kind\":\"Pod\",\"namespace\":\"nsm-system\",\"name\":\"nsmgr-kind-1-worker\",\"uid\":\"c9ccf358-6524-410a-bdc0-9789f3003b18\",\"apiVersion\":\"v1\",\"resourceVersion\":\"11545\"},\"reason\":\"Scheduled\",\"message\":\"Successfully assigned nsm-system/nsmgr-kind-1-worker to kind-1-worker\",\"source\":{\"component\":\"default-scheduler\"},\"firstTimestamp\":\"2021-06-09T02:52:34Z\",\"lastTimestamp\":\"2021-06-09T02:52:34Z\",\"count\":1,\"type\":\"Normal\",\"eventTime\":null,\"reportingComponent\":\"\",\"reportingInstance\":\"\"}"
time="2021-06-08T19:54:43-07:00" level=error msg="Timeout waiting for logs matching regexp NSM gRPC API Server: .* is operational in nsmgr-kind-1-worker::nsmd. Last logs: time=\"2021-06-09T02:52:42Z\" level=info msg=\"Starting nsmd...\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"Version: v1.0.1-rc.2-1-g9262b77b\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"All env variables:\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"KUBERNETES_SERVICE_PORT=443\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"KUBERNETES_PORT=tcp://10.96.0.1:443\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"GRPC_GO_LOG_VERBOSITY_LEVEL=99\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"HOSTNAME=nsmgr-kind-1-worker\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"GRPC_GO_LOG_SEVERITY_LEVEL=info\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"SHLVL=1\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"HOME=/root\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"KUBERNETES_PORT_443_TCP_ADDR=10.96.0.1\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"KUBERNETES_PORT_443_TCP_PORT=443\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"KUBERNETES_PORT_443_TCP_PROTO=tcp\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"ENTRY=nsmd\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"KUBERNETES_SERVICE_PORT_HTTPS=443\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"KUBERNETES_PORT_443_TCP=tcp://10.96.0.1:443\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"KUBERNETES_SERVICE_HOST=10.96.0.1\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"PWD=/\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"Creating logger from config: &{nsmd@nsmgr-kind-1-worker false false [] 0xc000380060 0xc000382000 <nil> <nil> <nil>}\"\\n2021/06/09 02:52:42 debug logging disabled\\n2021/06/09 02:52:42 Initializing logging reporter\\n2021/06/09 02:52:42 debug logging disabled\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"==--> nsmd.server() span:5fc06c1b9cca7882:5fc06c1b9cca7882:0000000000000000:1\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\">><<-- tracing.init-complete=10.6276ms span=5fc06c1b9cca7882:5fc06c1b9cca7882:0000000000000000:1\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"==----> nsm-server-start() span:5fc06c1b9cca7882:3852c49d8b9bd4d4:5fc06c1b9cca7882:1\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"Starting NSM server\" operation=nsm-server-start span=\"5fc06c1b9cca7882:3852c49d8b9bd4d4:5fc06c1b9cca7882:1\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"==------> NewServer() span:5fc06c1b9cca7882:351861421b8dfc8a:3852c49d8b9bd4d4:1\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"readDialConfig insecure: false\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"Trying to establish connection with the spire provider at address:unix:///run/spire/sockets/agent.sock\"\\ntime=\"2021-06-09T02:52:42Z\" level=info msg=\"Created the todo context:unix:///run/spire/sockets/agent.sock\"\\nINFO: 2021/06/09 02:52:42 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:52:42 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc000320040 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:52:42 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:52:42 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:52:42 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:42 [core] blockingPicker: the picked transport is not ready, loop back to repick\\nINFO: 2021/06/09 02:52:42 [core] pickfirstBalancer: UpdateSubConnState: 0xc0003268a0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:52:42 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:42 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\nINFO: 2021/06/09 02:52:42 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:52:42 [core] pickfirstBalancer: UpdateSubConnState: 0xc0003268a0, {READY <nil>}\\nINFO: 2021/06/09 02:52:42 [core] Channel Connectivity change to READY\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Got x509:&{0xc000328120 <nil> {{0 0} 0 0 0 0} 0xc0003c0960 0xc000526120 {{0 0} 0 0 0 0} false} <nil>\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Started goroutine\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Returning provider\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"GRPC.NewServer with open tracing enabled\" operation=NewServer span=\"5fc06c1b9cca7882:351861421b8dfc8a:3852c49d8b9bd4d4:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"==--------> GetCertificate() span:5fc06c1b9cca7882:5cc0dbd12dd393b0:351861421b8dfc8a:1\"\\nINFO: 2021/06/09 02:52:43 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:52:43 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc0003c40c0 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:52:43 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] blockingPicker: the picked transport is not ready, loop back to repick\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Issued identity:spiffe://test.com/nsmgr\"\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc000385240, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc000385240, {READY <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to READY\\nINFO: 2021/06/09 02:52:43 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:52:43 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc0003200e8 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:52:43 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc0004b6900, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc0004b6900, {READY <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to READY\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"SPIRE -- GetX509SVID:&{spiffe://test.com/nsmgr [0xc0004b8000] 0xc0004b02d0}\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Default trust domain:test.com\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"defaultTrustDomain:test.com\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"AUTHORIZING ALL CLIENTS\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Server will be started in secure mode using tlsConfig:&{<nil> <nil> [] map[] 0x97a4c0 <nil> <nil> 0x97a5c0 <nil> <nil> []  RequireAnyClientCert <nil> false [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}\"\\n2021/06/09 02:52:43 Reporting span 5fc06c1b9cca7882:5cc0dbd12dd393b0:351861421b8dfc8a:1\\n2021/06/09 02:52:43 Reporting span 5fc06c1b9cca7882:351861421b8dfc8a:3852c49d8b9bd4d4:1\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Starting NSM gRPC server listening on socket: /var/lib/networkservicemesh/nsm.io.sock\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"==------> set-local-nsm() span:5fc06c1b9cca7882:729215585c6352b8:3852c49d8b9bd4d4:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Requesting NsmRegistryClient...\" span=\"5fc06c1b9cca7882:729215585c6352b8:3852c49d8b9bd4d4:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"==----------> initRegistryClient() span:5fc06c1b9cca7882:758850dcad4ce452:729215585c6352b8:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Waiting for liveness probe: tcp:127.0.0.1:5000\"\\nWARNING: 2021/06/09 02:52:43 [core] grpc: Server.Serve failed to complete security handshake from \"@\": EOF\\nINFO: 2021/06/09 02:52:43 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\\\"\\\" span=670d6884af16f50b:7c325c8a18ef43d1:451f8b92d7822775:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\">><<-- request={} span=670d6884af16f50b:7c325c8a18ef43d1:451f8b92d7822775:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\">><<-- response={} span=670d6884af16f50b:7c325c8a18ef43d1:451f8b92d7822775:1\"\\n2021/06/09 02:52:43 Reporting span 670d6884af16f50b:7c325c8a18ef43d1:451f8b92d7822775:1\\nINFO: 2021/06/09 02:52:43 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Liveness probe was successful: tcp:127.0.0.1:5000\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Registry port now available, attempting to connect...\" operation=initRegistryClient span=\"5fc06c1b9cca7882:758850dcad4ce452:729215585c6352b8:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Trying to establish connection to target: 127.0.0.1:5000\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"func insecure: false, env insecure: false\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Connecting to the workload api at:unix:///run/spire/sockets/agent.sock\"\\nINFO: 2021/06/09 02:52:43 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:52:43 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc000320088 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:52:43 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc0005885a0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:52:43 [core] blockingPicker: the picked transport is not ready, loop back to repick\\nINFO: 2021/06/09 02:52:43 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc0005885a0, {READY <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to READY\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to SHUTDOWN\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{test.com}:0xc000116640]}\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"defaultTrustDomain:test.com\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"AUTHORIZING ALL CLIENTS\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Fetch tlsConfig for Trust Domain: test.com\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Found 1 tlsconfigs.\"\\nINFO: 2021/06/09 02:52:43 [core] parsed scheme: \"\"\\nINFO: 2021/06/09 02:52:43 [core] scheme \"\" not registered, fallback to default scheme\\nINFO: 2021/06/09 02:52:43 [core] ccResolverWrapper: sending update to cc: {[{127.0.0.1:5000  <nil> 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:52:43 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:52:43 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] Subchannel picks a new address \"127.0.0.1:5000\" to connect\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc000588fa0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc000588fa0, {READY <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to READY\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}\"\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:52:43 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}\"\\nINFO: 2021/06/09 02:52:43 [core] parsed scheme: \"\"\\nINFO: 2021/06/09 02:52:43 [core] scheme \"\" not registered, fallback to default scheme\\nINFO: 2021/06/09 02:52:43 [core] ccResolverWrapper: sending update to cc: {[{127.0.0.1:5000  <nil> 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:52:43 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] Subchannel picks a new address \"127.0.0.1:5000\" to connect\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc0004b7960, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc0004b7960, {READY <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to READY\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Successfully connected to 127.0.0.1:5000\" operation=initRegistryClient span=\"5fc06c1b9cca7882:758850dcad4ce452:729215585c6352b8:1\"\\n2021/06/09 02:52:43 Reporting span 5fc06c1b9cca7882:758850dcad4ce452:729215585c6352b8:1\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\">><<------ url=10.244.2.46:5001 span=5fc06c1b9cca7882:729215585c6352b8:3852c49d8b9bd4d4:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\">><<-------- /registry.NsmRegistry/RegisterNSM()=\\\"\\\" span=5fc06c1b9cca7882:729215585c6352b8:3852c49d8b9bd4d4:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\">><<-------- request={\\\"url\\\":\\\"10.244.2.46:5001\\\"} span=5fc06c1b9cca7882:729215585c6352b8:3852c49d8b9bd4d4:1\"\\n2021/06/09 02:52:43 Reporting span 5fc06c1b9cca7882:41ab2d8f0c9f8f29:729215585c6352b8:1\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\">><<-------- response={\\\"name\\\":\\\"kind-1-worker\\\",\\\"url\\\":\\\"10.244.2.46:5001\\\",\\\"state\\\":\\\"RUNNING\\\"} span=5fc06c1b9cca7882:729215585c6352b8:3852c49d8b9bd4d4:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\">><<-------- /registry.NsmRegistry/GetEndpoints()=\\\"\\\" span=5fc06c1b9cca7882:729215585c6352b8:3852c49d8b9bd4d4:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\">><<-------- request={} span=5fc06c1b9cca7882:729215585c6352b8:3852c49d8b9bd4d4:1\"\\n2021/06/09 02:52:43 Reporting span 5fc06c1b9cca7882:3cb33189c758a4ee:729215585c6352b8:1\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\">><<-------- response={} span=5fc06c1b9cca7882:729215585c6352b8:3852c49d8b9bd4d4:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Setting local NSM name:\\\"kind-1-worker\\\" url:\\\"10.244.2.46:5001\\\" state:\\\"RUNNING\\\" \"\\n2021/06/09 02:52:43 Reporting span 5fc06c1b9cca7882:729215585c6352b8:3852c49d8b9bd4d4:1\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\">><<---- registered-endpoints={} span=5fc06c1b9cca7882:3852c49d8b9bd4d4:5fc06c1b9cca7882:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock...\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"func insecure: false, env insecure: false\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Connecting to the workload api at:unix:///run/spire/sockets/agent.sock\"\\nINFO: 2021/06/09 02:52:43 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:52:43 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc0003c4250 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:52:43 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] blockingPicker: the picked transport is not ready, loop back to repick\\nINFO: 2021/06/09 02:52:43 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc0000316b0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc0000316b0, {READY <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to READY\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to SHUTDOWN\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{test.com}:0xc0003955c0]}\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"defaultTrustDomain:test.com\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"AUTHORIZING ALL CLIENTS\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Fetch tlsConfig for Trust Domain: test.com\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Found 1 tlsconfigs.\"\\nINFO: 2021/06/09 02:52:43 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:52:43 [core] parsed scheme: \"\"\\nINFO: 2021/06/09 02:52:43 [core] scheme \"\" not registered, fallback to default scheme\\nINFO: 2021/06/09 02:52:43 [core] ccResolverWrapper: sending update to cc: {[{/var/lib/networkservicemesh/nsm.io.sock  <nil> 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:52:43 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] Subchannel picks a new address \"/var/lib/networkservicemesh/nsm.io.sock\" to connect\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc000097630, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc000097630, {READY <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to READY\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}\"\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:52:43 [core] parsed scheme: \"\"\\nINFO: 2021/06/09 02:52:43 [core] scheme \"\" not registered, fallback to default scheme\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:52:43 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:52:43 [core] ccResolverWrapper: sending update to cc: {[{/var/lib/networkservicemesh/nsm.io.sock  <nil> 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:52:43 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:52:43 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] Subchannel picks a new address \"/var/lib/networkservicemesh/nsm.io.sock\" to connect\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc00040c0d0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc00040c0d0, {READY <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to READY\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Requesting nsmd for client connection...\"\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to SHUTDOWN\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"NSM gRPC socket: /var/lib/networkservicemesh/nsm.io.sock is operational\" operation=nsm-server-start span=\"5fc06c1b9cca7882:3852c49d8b9bd4d4:5fc06c1b9cca7882:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"create monitor servers\" operation=nsm-server-start span=\"5fc06c1b9cca7882:3852c49d8b9bd4d4:5fc06c1b9cca7882:1\"\\nINFO: 2021/06/09 02:52:43 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:52:43 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"CrossConnect - Serve starting...\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"RemoteConnection - Serve starting...\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Reading excluded prefixes config file: /var/lib/networkservicemesh/config/excluded_prefixes.yaml\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Excluded prefixes: [10.244.0.0/16 10.96.0.0/12]\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"==------> restore() span:5fc06c1b9cca7882:477954a427e75dd6:3852c49d8b9bd4d4:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\">><<------ delete.client.registry=false span=5fc06c1b9cca7882:477954a427e75dd6:3852c49d8b9bd4d4:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Values: [CLE nsm-29]\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Values: [NSE icmp-responderft2ng nsm-29 ChQKDmljbXAtcmVzcG9uZGVyEgJJUBIqCg1raW5kLTEtd29ya2VyEhAxMC4yNDQuMi40NDo1MDAxIgdSVU5OSU5HGnQKE2ljbXAtcmVzcG9uZGVyZnQybmcSAklQGg5pY21wLXJlc3BvbmRlciINa2luZC0xLXdvcmtlcioLCgNhcHASBGljbXAqJAoSbmV0d29ya3NlcnZpY2VuYW1lEg5pY21wLXJlc3BvbmRlcjIHUlVOTklORw==]\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Clients: [nsm-29]\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"NSEs: map[icmp-responderft2ng:{nsm-29 network_service:<name:\\\"icmp-responder\\\" payload:\\\"IP\\\" > network_service_manager:<name:\\\"kind-1-worker\\\" url:\\\"10.244.2.44:5001\\\" state:\\\"RUNNING\\\" > network_service_endpoint:<name:\\\"icmp-responderft2ng\\\" payload:\\\"IP\\\" network_service_name:\\\"icmp-responder\\\" network_service_manager_name:\\\"kind-1-worker\\\" labels:<key:\\\"app\\\" value:\\\"icmp\\\" > labels:<key:\\\"networkservicename\\\" value:\\\"icmp-responder\\\" > state:\\\"RUNNING\\\" > }]\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\">><<------ clients=[\\\"nsm-29\\\"] span=5fc06c1b9cca7882:477954a427e75dd6:3852c49d8b9bd4d4:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\">><<------ endpoints={\\\"icmp-responderft2ng\\\":{\\\"Workspace\\\":\\\"nsm-29\\\",\\\"NseReg\\\":{\\\"network_service\\\":{\\\"name\\\":\\\"icmp-responder\\\",\\\"payload\\\":\\\"IP\\\"},\\\"network_service_manager\\\":{\\\"name\\\":\\\"kind-1-worker\\\",\\\"url\\\":\\\"10.244.2.44:5001\\\",\\\"state\\\":\\\"RUNNING\\\"},\\\"network_service_endpoint\\\":{\\\"name\\\":\\\"icmp-responderft2ng\\\",\\\"payload\\\":\\\"IP\\\",\\\"network_service_name\\\":\\\"icmp-responder\\\",\\\"network_service_manager_name\\\":\\\"kind-1-worker\\\",\\\"labels\\\":{\\\"app\\\":\\\"icmp\\\",\\\"networkservicename\\\":\\\"icmp-responder\\\"},\\\"state\\\":\\\"RUNNING\\\"}}}} span=5fc06c1b9cca7882:477954a427e75dd6:3852c49d8b9bd4d4:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"==--------> restoreClients() span:5fc06c1b9cca7882:66270a2f94e0ad9d:477954a427e75dd6:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"NSMServer: Creating workspaces for existing clients...\" operation=restoreClients span=\"5fc06c1b9cca7882:66270a2f94e0ad9d:477954a427e75dd6:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"==----------> Workspace:nsm-29() span:5fc06c1b9cca7882:1ef6086e00208e97:66270a2f94e0ad9d:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Creating new workspace: nsm-29\" operation=\"Workspace:nsm-29\" span=\"5fc06c1b9cca7882:1ef6086e00208e97:66270a2f94e0ad9d:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\">><<---------- restore=true span=5fc06c1b9cca7882:1ef6086e00208e97:66270a2f94e0ad9d:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Creating new directory: /var/lib/networkservicemesh/nsm-29\" operation=\"Workspace:nsm-29\" span=\"5fc06c1b9cca7882:1ef6086e00208e97:66270a2f94e0ad9d:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Creating new listener on: /var/lib/networkservicemesh/nsm-29/nsm.server.io.sock\" operation=\"Workspace:nsm-29\" span=\"5fc06c1b9cca7882:1ef6086e00208e97:66270a2f94e0ad9d:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Creating new NetworkServiceRegistryServer\" operation=\"Workspace:nsm-29\" span=\"5fc06c1b9cca7882:1ef6086e00208e97:66270a2f94e0ad9d:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Creating new MonitorConnectionServer\" operation=\"Workspace:nsm-29\" span=\"5fc06c1b9cca7882:1ef6086e00208e97:66270a2f94e0ad9d:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Creating new NetworkServiceServer\" operation=\"Workspace:nsm-29\" span=\"5fc06c1b9cca7882:1ef6086e00208e97:66270a2f94e0ad9d:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"LocalConnection - Serve starting...\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Reading excluded prefixes config file: /var/lib/networkservicemesh/config/excluded_prefixes.yaml\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Excluded prefixes: [10.244.0.0/16 10.96.0.0/12]\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Creating new GRPC MonitorServer\" operation=\"Workspace:nsm-29\" span=\"5fc06c1b9cca7882:1ef6086e00208e97:66270a2f94e0ad9d:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"==------------> NewServer() span:5fc06c1b9cca7882:1d73a92f409678c3:1ef6086e00208e97:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"GRPC.NewServer with open tracing enabled\" operation=NewServer span=\"5fc06c1b9cca7882:1d73a92f409678c3:1ef6086e00208e97:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"==--------------> GetCertificate() span:5fc06c1b9cca7882:2a99d99833bcdae8:1d73a92f409678c3:1\"\\nINFO: 2021/06/09 02:52:43 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:52:43 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc0003202a0 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:52:43 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc0004b68b0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:52:43 [core] blockingPicker: the picked transport is not ready, loop back to repick\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc0004b68b0, {READY <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to READY\\nINFO: 2021/06/09 02:52:43 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:52:43 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc0000ba220 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:52:43 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] blockingPicker: the picked transport is not ready, loop back to repick\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc0001c5c10, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc0001c5c10, {READY <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to READY\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"SPIRE -- GetX509SVID:&{spiffe://test.com/nsmgr [0xc000508b00] 0xc0001f45d0}\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Default trust domain:test.com\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"defaultTrustDomain:test.com\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"AUTHORIZING ALL CLIENTS\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Server will be started in secure mode using tlsConfig:&{<nil> <nil> [] map[] 0x97a4c0 <nil> <nil> 0x97a5c0 <nil> <nil> []  RequireAnyClientCert <nil> false [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}\"\\n2021/06/09 02:52:43 Reporting span 5fc06c1b9cca7882:2a99d99833bcdae8:1d73a92f409678c3:1\\n2021/06/09 02:52:43 Reporting span 5fc06c1b9cca7882:1d73a92f409678c3:1ef6086e00208e97:1\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Registering NetworkServiceRegistryServer with registerServer\" operation=\"Workspace:nsm-29\" span=\"5fc06c1b9cca7882:1ef6086e00208e97:66270a2f94e0ad9d:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Registering NetworkServiceDiscoveryServer with discoveryServer\" operation=\"Workspace:nsm-29\" span=\"5fc06c1b9cca7882:1ef6086e00208e97:66270a2f94e0ad9d:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Registering NetworkServiceServer with registerServer\" operation=\"Workspace:nsm-29\" span=\"5fc06c1b9cca7882:1ef6086e00208e97:66270a2f94e0ad9d:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Registering MonitorConnectionServer with registerServer\" operation=\"Workspace:nsm-29\" span=\"5fc06c1b9cca7882:1ef6086e00208e97:66270a2f94e0ad9d:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Trying to establish connection to target: /var/lib/networkservicemesh/nsm-29/nsm.server.io.sock\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"func insecure: false, env insecure: false\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Connecting to the workload api at:unix:///run/spire/sockets/agent.sock\"\\nINFO: 2021/06/09 02:52:43 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:52:43 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc00000e100 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:52:43 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] blockingPicker: the picked transport is not ready, loop back to repick\\nINFO: 2021/06/09 02:52:43 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc0006054a0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc0006054a0, {READY <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to READY\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to SHUTDOWN\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{test.com}:0xc0005f07c0]}\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"defaultTrustDomain:test.com\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"AUTHORIZING ALL CLIENTS\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Fetch tlsConfig for Trust Domain: test.com\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Found 1 tlsconfigs.\"\\nINFO: 2021/06/09 02:52:43 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:52:43 [core] parsed scheme: \"\"\\nINFO: 2021/06/09 02:52:43 [core] scheme \"\" not registered, fallback to default scheme\\nINFO: 2021/06/09 02:52:43 [core] ccResolverWrapper: sending update to cc: {[{/var/lib/networkservicemesh/nsm-29/nsm.server.io.sock  <nil> 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:52:43 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] Subchannel picks a new address \"/var/lib/networkservicemesh/nsm-29/nsm.server.io.sock\" to connect\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc0000972d0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc0000972d0, {READY <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to READY\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}\"\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:52:43 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}\"\\nINFO: 2021/06/09 02:52:43 [core] parsed scheme: \"\"\\nINFO: 2021/06/09 02:52:43 [core] scheme \"\" not registered, fallback to default scheme\\nINFO: 2021/06/09 02:52:43 [core] ccResolverWrapper: sending update to cc: {[{/var/lib/networkservicemesh/nsm-29/nsm.server.io.sock  <nil> 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:52:43 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:52:43 [core] Subchannel picks a new address \"/var/lib/networkservicemesh/nsm-29/nsm.server.io.sock\" to connect\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc0006041d0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc0006041d0, {READY <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to READY\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to SHUTDOWN\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"grpcserver for workspace &{name:nsm-29 listener:0xc000527e00 registryServer:0xc000527ea0 networkServiceServer:0xc0004b1c50 monitorConnectionServer:0xc000527f40 grpcServer:0xc0004708c0 Mutex:{state:0 sema:0} state:2 locationProvider:0xc00030c240 localRegistry:0xc000324780 ctx:0xc0004b0d50 discoveryServer:0xc000589dc0} is operational\" operation=\"Workspace:nsm-29\" span=\"5fc06c1b9cca7882:1ef6086e00208e97:66270a2f94e0ad9d:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Created new workspace: &{name:nsm-29 listener:0xc000527e00 registryServer:0xc000527ea0 networkServiceServer:0xc0004b1c50 monitorConnectionServer:0xc000527f40 grpcServer:0xc0004708c0 Mutex:{state:0 sema:0} state:2 locationProvider:0xc00030c240 localRegistry:0xc000324780 ctx:0xc0004b0d50 discoveryServer:0xc000589dc0}\" operation=\"Workspace:nsm-29\" span=\"5fc06c1b9cca7882:1ef6086e00208e97:66270a2f94e0ad9d:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"==------------> cleanup() span:5fc06c1b9cca7882:7e89127b0afc84f0:1ef6086e00208e97:1\"\\n2021/06/09 02:52:43 Reporting span 5fc06c1b9cca7882:7e89127b0afc84f0:1ef6086e00208e97:1\\n2021/06/09 02:52:43 Reporting span 5fc06c1b9cca7882:1ef6086e00208e97:66270a2f94e0ad9d:1\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Workspace for client nsm-29 created\" operation=restoreClients span=\"5fc06c1b9cca7882:66270a2f94e0ad9d:477954a427e75dd6:1\"\\n2021/06/09 02:52:43 Reporting span 5fc06c1b9cca7882:66270a2f94e0ad9d:477954a427e75dd6:1\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\">><<------ updated-clients=[\\\"nsm-29\\\"] span=5fc06c1b9cca7882:477954a427e75dd6:3852c49d8b9bd4d4:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"==--------> restore-endpoints() span:5fc06c1b9cca7882:6f3dbaed5df64886:477954a427e75dd6:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Requesting NetworkServiceDiscoveryClient...\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Requesting NseRegistryClient...\"\\nINFO: 2021/06/09 02:52:43 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"==----------> check-nse-icmp-responderft2ng() span:5fc06c1b9cca7882:18cc93dce2362909:6f3dbaed5df64886:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\">><<---------- workspace={} span=5fc06c1b9cca7882:18cc93dce2362909:6f3dbaed5df64886:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Checking NSE icmp-responderft2ng is alive at /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock...\" operation=check-nse-icmp-responderft2ng span=\"5fc06c1b9cca7882:18cc93dce2362909:6f3dbaed5df64886:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"==--> check-nse-alive() span:5fc06c1b9cca7882:601271d07f3b3b81:18cc93dce2362909:1\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Trying to establish connection to target: /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"func insecure: false, env insecure: false\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Connecting to the workload api at:unix:///run/spire/sockets/agent.sock\"\\nINFO: 2021/06/09 02:52:43 [core] parsed scheme: \"unix\"\\nINFO: 2021/06/09 02:52:43 [core] ccResolverWrapper: sending update to cc: {[{/run/spire/sockets/agent.sock  0xc0003c41b0 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:52:43 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc0006051a0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] blockingPicker: the picked transport is not ready, loop back to repick\\nINFO: 2021/06/09 02:52:43 [core] Subchannel picks a new address \"/run/spire/sockets/agent.sock\" to connect\\nINFO: 2021/06/09 02:52:43 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to READY\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc0006051a0, {READY <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to READY\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to SHUTDOWN\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{test.com}:0xc00059a280]}\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"defaultTrustDomain:test.com\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"AUTHORIZING ALL CLIENTS\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Fetch tlsConfig for Trust Domain: test.com\"\\ntime=\"2021-06-09T02:52:43Z\" level=info msg=\"Found 1 tlsconfigs.\"\\nINFO: 2021/06/09 02:52:43 [core] parsed scheme: \"\"\\nINFO: 2021/06/09 02:52:43 [core] scheme \"\" not registered, fallback to default scheme\\nINFO: 2021/06/09 02:52:43 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:52:43 [core] ccResolverWrapper: sending update to cc: {[{/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock  <nil> 0 <nil>}] <nil> <nil>}\\nINFO: 2021/06/09 02:52:43 [core] ClientConn switching balancer to \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Channel switches to new LB policy \"pick_first\"\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc000588bd0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:43 [core] Subchannel picks a new address \"/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock\" to connect\\nWARNING: 2021/06/09 02:52:43 [core] grpc: addrConn.createTransport failed to connect to {/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock <nil> 0 <nil>}. Err: connection error: desc = \"transport: Error while dialing dial unix /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock: connect: no such file or directory\". Reconnecting...\\nINFO: 2021/06/09 02:52:43 [core] Subchannel Connectivity change to TRANSIENT_FAILURE\\nINFO: 2021/06/09 02:52:43 [core] pickfirstBalancer: UpdateSubConnState: 0xc000588bd0, {TRANSIENT_FAILURE connection error: desc = \"transport: Error while dialing dial unix /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock: connect: no such file or directory\"}\\nINFO: 2021/06/09 02:52:43 [core] Channel Connectivity change to TRANSIENT_FAILURE\\nINFO: 2021/06/09 02:52:44 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:44 [core] Subchannel picks a new address \"/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock\" to connect\\nWARNING: 2021/06/09 02:52:44 [core] grpc: addrConn.createTransport failed to connect to {/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock <nil> 0 <nil>}. Err: connection error: desc = \"transport: Error while dialing dial unix /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock: connect: no such file or directory\". Reconnecting...\\nINFO: 2021/06/09 02:52:44 [core] Subchannel Connectivity change to TRANSIENT_FAILURE\\nINFO: 2021/06/09 02:52:44 [core] pickfirstBalancer: UpdateSubConnState: 0xc000588bd0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:52:44 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:44 [core] pickfirstBalancer: UpdateSubConnState: 0xc000588bd0, {TRANSIENT_FAILURE connection error: desc = \"transport: Error while dialing dial unix /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock: connect: no such file or directory\"}\\nINFO: 2021/06/09 02:52:44 [core] Channel Connectivity change to TRANSIENT_FAILURE\\nINFO: 2021/06/09 02:52:45 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:45 [core] Subchannel picks a new address \"/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock\" to connect\\nWARNING: 2021/06/09 02:52:45 [core] grpc: addrConn.createTransport failed to connect to {/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock <nil> 0 <nil>}. Err: connection error: desc = \"transport: Error while dialing dial unix /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock: connect: no such file or directory\". Reconnecting...\\nINFO: 2021/06/09 02:52:45 [core] Subchannel Connectivity change to TRANSIENT_FAILURE\\nINFO: 2021/06/09 02:52:45 [core] pickfirstBalancer: UpdateSubConnState: 0xc000588bd0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:52:45 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:45 [core] pickfirstBalancer: UpdateSubConnState: 0xc000588bd0, {TRANSIENT_FAILURE connection error: desc = \"transport: Error while dialing dial unix /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock: connect: no such file or directory\"}\\nINFO: 2021/06/09 02:52:45 [core] Channel Connectivity change to TRANSIENT_FAILURE\\nINFO: 2021/06/09 02:52:48 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:48 [core] Subchannel picks a new address \"/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock\" to connect\\nWARNING: 2021/06/09 02:52:48 [core] grpc: addrConn.createTransport failed to connect to {/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock <nil> 0 <nil>}. Err: connection error: desc = \"transport: Error while dialing dial unix /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock: connect: no such file or directory\". Reconnecting...\\nINFO: 2021/06/09 02:52:48 [core] Subchannel Connectivity change to TRANSIENT_FAILURE\\nINFO: 2021/06/09 02:52:48 [core] pickfirstBalancer: UpdateSubConnState: 0xc000588bd0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:52:48 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:48 [core] pickfirstBalancer: UpdateSubConnState: 0xc000588bd0, {TRANSIENT_FAILURE connection error: desc = \"transport: Error while dialing dial unix /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock: connect: no such file or directory\"}\\nINFO: 2021/06/09 02:52:48 [core] Channel Connectivity change to TRANSIENT_FAILURE\\nINFO: 2021/06/09 02:52:52 [core] Subchannel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:52 [core] Subchannel picks a new address \"/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock\" to connect\\nWARNING: 2021/06/09 02:52:52 [core] grpc: addrConn.createTransport failed to connect to {/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock <nil> 0 <nil>}. Err: connection error: desc = \"transport: Error while dialing dial unix /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock: connect: no such file or directory\". Reconnecting...\\nINFO: 2021/06/09 02:52:52 [core] Subchannel Connectivity change to TRANSIENT_FAILURE\\nINFO: 2021/06/09 02:52:52 [core] pickfirstBalancer: UpdateSubConnState: 0xc000588bd0, {CONNECTING <nil>}\\nINFO: 2021/06/09 02:52:52 [core] Channel Connectivity change to CONNECTING\\nINFO: 2021/06/09 02:52:52 [core] pickfirstBalancer: UpdateSubConnState: 0xc000588bd0, {TRANSIENT_FAILURE connection error: desc = \"transport: Error while dialing dial unix /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock: connect: no such file or directory\"}\\nINFO: 2021/06/09 02:52:52 [core] Channel Connectivity change to TRANSIENT_FAILURE\\nINFO: 2021/06/09 02:52:53 [core] Channel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:52:53 [core] Subchannel Connectivity change to SHUTDOWN\\nINFO: 2021/06/09 02:53:13 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:53:13Z\" level=info msg=\">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\\\"\\\" span=1eee5a5aaeb68065:0862a277b28a9c34:4b0bbab5d5ed8157:1\"\\ntime=\"2021-06-09T02:53:13Z\" level=info msg=\">><<-- request={} span=1eee5a5aaeb68065:0862a277b28a9c34:4b0bbab5d5ed8157:1\"\\ntime=\"2021-06-09T02:53:13Z\" level=info msg=\">><<-- response={\\\"workspace\\\":[\\\"nsm-29\\\"]} span=1eee5a5aaeb68065:0862a277b28a9c34:4b0bbab5d5ed8157:1\"\\n2021/06/09 02:53:13 Reporting span 1eee5a5aaeb68065:0862a277b28a9c34:4b0bbab5d5ed8157:1\\nINFO: 2021/06/09 02:53:13 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:53:43 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:53:43Z\" level=info msg=\">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\\\"\\\" span=7590eae59041266b:13724927dea7cee6:2b1a55b164fc46a4:1\"\\ntime=\"2021-06-09T02:53:43Z\" level=info msg=\">><<-- request={} span=7590eae59041266b:13724927dea7cee6:2b1a55b164fc46a4:1\"\\ntime=\"2021-06-09T02:53:43Z\" level=info msg=\">><<-- response={\\\"workspace\\\":[\\\"nsm-29\\\"]} span=7590eae59041266b:13724927dea7cee6:2b1a55b164fc46a4:1\"\\n2021/06/09 02:53:43 Reporting span 7590eae59041266b:13724927dea7cee6:2b1a55b164fc46a4:1\\nINFO: 2021/06/09 02:53:43 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:54:13 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:54:13Z\" level=info msg=\">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\\\"\\\" span=2add25aec27d48f4:1ef6eb89c2a5e1cf:717bfedf8b85c418:1\"\\ntime=\"2021-06-09T02:54:13Z\" level=info msg=\">><<-- request={} span=2add25aec27d48f4:1ef6eb89c2a5e1cf:717bfedf8b85c418:1\"\\ntime=\"2021-06-09T02:54:13Z\" level=info msg=\">><<-- response={\\\"workspace\\\":[\\\"nsm-29\\\"]} span=2add25aec27d48f4:1ef6eb89c2a5e1cf:717bfedf8b85c418:1\"\\n2021/06/09 02:54:13 Reporting span 2add25aec27d48f4:1ef6eb89c2a5e1cf:717bfedf8b85c418:1\\nINFO: 2021/06/09 02:54:13 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\nINFO: 2021/06/09 02:54:43 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\ntime=\"2021-06-09T02:54:43Z\" level=info msg=\">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\\\"\\\" span=18e12708d688200b:01287e89eb1dde93:0b7a2fee9f58d204:1\"\\ntime=\"2021-06-09T02:54:43Z\" level=info msg=\">><<-- request={} span=18e12708d688200b:01287e89eb1dde93:0b7a2fee9f58d204:1\"\\ntime=\"2021-06-09T02:54:43Z\" level=info msg=\">><<-- response={\\\"workspace\\\":[\\\"nsm-29\\\"]} span=18e12708d688200b:01287e89eb1dde93:0b7a2fee9f58d204:1\"\\n2021/06/09 02:54:43 Reporting span 18e12708d688200b:01287e89eb1dde93:0b7a2fee9f58d204:1\\nINFO: 2021/06/09 02:54:43 [transport] transport: loopyWriter.run returning. connection error: desc = \"transport is closing\"\\n"
    k8s.go:1166: 
        goroutine 474 [running]:
        runtime/debug.Stack(0xc000716ba0, 0x223e220, 0x30b6480)
        	/usr/local/go/src/runtime/debug/stack.go:24 +0x9f
        github.com/networkservicemesh/networkservicemesh/test/kubetest.(*K8s).waitLogsMatchNamespace(0xc000356300, 0x26d9e20, 0xc000911380, 0xc00074f800, 0x24bf09f, 0x4, 0xc000cc1ef8, 0xc00004c070, 0x6d, 0xc00011e8f0, ...)
        	/Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/test/kubetest/k8s.go:1166 +0xd85
        github.com/networkservicemesh/networkservicemesh/test/kubetest.(*K8s).waitLogsMatch(...)
        	/Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/test/kubetest/k8s.go:1108
        github.com/networkservicemesh/networkservicemesh/test/kubetest.(*K8s).WaitLogsContainsRegex(0xc000356300, 0xc00074f800, 0x24bf09f, 0x4, 0x24eda8c, 0x26, 0x1bf08eb000, 0x0, 0x0)
        	/Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/test/kubetest/k8s.go:1063 +0x2a8
        github.com/networkservicemesh/networkservicemesh/test/kubetest.WaitNSMgrDeployed.func1(0xc0004c2940, 0xc000356300, 0xc00074f800, 0x1bf08eb000)
        	/Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/test/kubetest/utils.go:238 +0x9b
        created by github.com/networkservicemesh/networkservicemesh/test/kubetest.WaitNSMgrDeployed
        	/Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/test/kubetest/utils.go:236 +0x8d
        
        Expected
            <bool>: false
        to be true
time="2021-06-08T19:54:43-07:00" level=info msg="Using image: containers.cisco.com/appn/test-common:vl3_latest"
time="2021-06-08T19:54:43-07:00" level=info msg="Starting ICMP Responder NSE on node: kind-1-worker "
time="2021-06-08T19:54:46-07:00" level=info msg="getting logs without container icmp-responder-nse-2=none"
time="2021-06-08T19:54:46-07:00" level=info msg="ICMP Responder icmp-responder-nse-2 started done: 2.618140428s"
time="2021-06-08T19:54:46-07:00" level=info msg="Deleting icmp-responder-nse-2"
time="2021-06-08T19:54:46-07:00" level=info msg="Deleting prefix-service"
time="2021-06-08T19:54:46-07:00" level=info msg="Deleting nsmd-forwarder-kind-1-worker"
time="2021-06-08T19:54:46-07:00" level=info msg="Deleting jaeger"
time="2021-06-08T19:54:46-07:00" level=info msg="Deleting nsmgr-kind-1-worker"
time="2021-06-08T19:54:46-07:00" level=info msg="Deleting spire-proxy"
E0608 19:54:46.309852   29353 portforward.go:409] error closing listener: close tcp4 127.0.0.1:51084: use of closed network connection
E0608 19:54:46.309868   29353 portforward.go:409] error closing listener: close tcp6 [::1]:51084: use of closed network connection
I0608 19:54:47.478509   29353 request.go:621] Throttling request took 1.168797797s, request: DELETE:https://127.0.0.1:55081/api/v1/namespaces/nsm-system/pods/jaeger
time="2021-06-08T19:54:48-07:00" level=warning msg="The POD 'icmp-responder-nse-2' Deleted 1.973818415s"
time="2021-06-08T19:54:48-07:00" level=warning msg="The POD 'prefix-service' Deleted 2.175451157s"
time="2021-06-08T19:54:48-07:00" level=warning msg="The POD 'nsmd-forwarder-kind-1-worker' Deleted 2.375200173s"
time="2021-06-08T19:54:49-07:00" level=warning msg="The POD 'spire-proxy' Deleted 3.176715414s"
time="2021-06-08T19:54:54-07:00" level=warning msg="The POD 'jaeger' Deleted 8.373530888s"
time="2021-06-08T19:55:03-07:00" level=info msg="The POD nsmgr-kind-1-worker force deleted"
time="2021-06-08T19:55:03-07:00" level=warning msg="The POD 'nsmgr-kind-1-worker' Deleted 16.97475732s"
time="2021-06-08T19:55:03-07:00" level=info msg="namespace nsm-system is deleted"
time="2021-06-08T19:55:03-07:00" level=info msg="Cleanup time: 17.180045202s"
--- FAIL: TestNSMDRecoverNSE (213.45s)
FAIL
FAIL	github.com/networkservicemesh/networkservicemesh/test/integration	213.894s
FAIL
TestNSMDRecoverNSE: OnFail: running on fail script operations with KUBECONFIG=/Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config on cloud kind-1
make -i k8s-deconfig helm-delete k8s-terminating-cleanup k8s-delete-nsm-namespaces || true
helm uninstall config --namespace nsm-system || true
WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config
WARNING: Kubernetes configuration file is world-readable. This is insecure. Location: /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config
Error: uninstall: Release not loaded: config: release: not found
./scripts/helm-nsm-uninstall.sh --nsm_namespace nsm-system --all

Helm version detected: v3.3.4
Cleaning up NSM
xargs: illegal option -- -
usage: xargs [-0opt] [-E eofstr] [-I replstr [-R replacements] [-S replsize]]
             [-J replstr] [-L number] [-n number [-x]] [-P maxprocs]
             [-s size] [utility [argument ...]]
WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config
WARNING: Kubernetes configuration file is world-readable. This is insecure. Location: /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config
make[1]: [helm-delete] Error 1 (ignored)
xargs: illegal option -- -
usage: xargs [-0opt] [-E eofstr] [-I replstr [-R replacements] [-S replsize]]
             [-J replstr] [-L number] [-n number [-x]] [-P maxprocs]
             [-s size] [utility [argument ...]]
No resources found in nsm-system namespace.
make[1]: [k8s-terminating-cleanup] Error 1 (ignored)
Running delete-nsm-namespaces script
NSM_NAMESPACE=nsm-system
Checking ns: default
Checking ns: kube-node-lease
Checking ns: kube-public
Checking ns: kube-system
Checking ns: local-path-storage
Checking ns: nsm-system
Deleting ns: nsm-system
warning: Immediate deletion does not wait for confirmation that the running resource has been terminated. The resource may continue to run on the cluster indefinitely.
No resources found
namespace "nsm-system" deleted
Checking ns: spire
make k8s-config && echo "Cluster reset successfull"
namespace/nsm-system created
helm --namespace nsm-system install config deployments/helm/nsm/charts/config
WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config
WARNING: Kubernetes configuration file is world-readable. This is insecure. Location: /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config
NAME: config
LAST DEPLOYED: Tue Jun  8 19:55:12 2021
NAMESPACE: nsm-system
STATUS: deployed
REVISION: 1
TEST SUITE: None
Cluster reset successfull
failed to run go test . -test.timeout 10m0s -count 1 --run "^(TestNSMDRecoverNSE)\\z" --tags "basic" --test.v ExitCode: 1