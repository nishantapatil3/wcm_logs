Starting TestKubernetesAreOk on kind-1
Command line go test . -test.timeout 10m0s -count 1 --run "^(TestKubernetesAreOk)$\\z" --tags "basic" --test.v
env==[KUBECONFIG=/Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config ARTIFACTS_DIR=/Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/kind-1/TestKubernetesAreOk] 

=== RUN   TestKubernetesAreOk
time="2021-06-08T20:06:57-07:00" level=info msg="Using Kubeconfig: /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config"
time="2021-06-08T20:06:57-07:00" level=info msg="FORWARDING_PLANE not set, using default forwarder - vpp"
time="2021-06-08T20:06:57-07:00" level=info msg="Creating artifact manager with config: &{4 false /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/kind-1/TestKubernetesAreOk}"
time="2021-06-08T20:06:57-07:00" level=error msg="Error during create of test namespace failed to create a namespace: namespaces \"nsm-system\" already exists"
time="2021-06-08T20:06:57-07:00" level=info msg="Checking availability of API server on 127.0.0.1"
time="2021-06-08T20:07:01-07:00" level=info msg="PING 127.0.0.1 (127.0.0.1): 56 data bytes\n64 bytes from 127.0.0.1: icmp_seq=0 ttl=64 time=0.042 ms\n64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.075 ms\n64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.086 ms\n64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.056 ms\n64 bytes from 127.0.0.1: icmp_seq=4 ttl=64 time=0.161 ms\n\n--- 127.0.0.1 ping statistics ---\n5 packets transmitted, 5 packets received, 0.0%!p(MISSING)acket loss\nround-trip min/avg/max/stddev = 0.042/0.084/0.161/0.041 ms\n"
time="2021-06-08T20:07:01-07:00" level=info msg="USE_IPV6 not set, using default false"
time="2021-06-08T20:07:01-07:00" level=info msg="&ServiceAccount{ObjectMeta:{default  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/default 0211fdad-1fdd-449e-88b6-cdf4e5d74e9a 15322 0 2021-06-08 20:06:50 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:default-token-59lpw,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T20:07:01-07:00" level=info msg="&ServiceAccount{ObjectMeta:{forward-plane-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/forward-plane-acc 9c40bcfd-526a-4cdd-ad47-7b963711e662 15374 0 2021-06-08 20:07:01 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T20:07:01-07:00" level=info msg="&ServiceAccount{ObjectMeta:{nse-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/nse-acc 449e592c-f2ac-4601-a80f-6567692546d3 15376 0 2021-06-08 20:07:01 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T20:07:01-07:00" level=info msg="&ServiceAccount{ObjectMeta:{nsmrs-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/nsmrs-acc 2fe20761-9024-4659-91a7-082082c8fd1f 15386 0 2021-06-08 20:07:01 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:nsmrs-acc-token-8c6f2,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T20:07:01-07:00" level=info msg="&ServiceAccount{ObjectMeta:{proxy-nsmgr-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/proxy-nsmgr-acc 06eeb534-a26d-4f5f-bee3-c0197199b984 15388 0 2021-06-08 20:07:01 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:proxy-nsmgr-acc-token-4wvdq,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T20:07:01-07:00" level=info msg="&ServiceAccount{ObjectMeta:{crossconnect-monitor-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/crossconnect-monitor-acc f4fad3f0-8af0-42ab-9974-1e22559c63b2 15389 0 2021-06-08 20:07:01 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:crossconnect-monitor-acc-token-5h546,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T20:07:01-07:00" level=info msg="&ServiceAccount{ObjectMeta:{nsc-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/nsc-acc 611a3210-875e-45fa-818b-5a740b9a2899 15393 0 2021-06-08 20:07:01 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:nsc-acc-token-6kkhr,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T20:07:02-07:00" level=info msg="&ServiceAccount{ObjectMeta:{nsmgr-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/nsmgr-acc ff4c1e6a-9648-41a6-91bd-97b24075a1f3 15394 0 2021-06-08 20:07:01 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:nsmgr-acc-token-pscl9,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
I0608 20:07:02.300704   32487 request.go:621] Throttling request took 1.073435406s, request: GET:https://127.0.0.1:55081/api/v1/namespaces/nsm-system/serviceaccounts/forward-plane-acc
time="2021-06-08T20:07:02-07:00" level=info msg="&ServiceAccount{ObjectMeta:{forward-plane-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/forward-plane-acc 9c40bcfd-526a-4cdd-ad47-7b963711e662 15387 0 2021-06-08 20:07:01 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:forward-plane-acc-token-hqf5z,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T20:07:02-07:00" level=info msg="&ServiceAccount{ObjectMeta:{nse-acc  nsm-system /api/v1/namespaces/nsm-system/serviceaccounts/nse-acc 449e592c-f2ac-4601-a80f-6567692546d3 15390 0 2021-06-08 20:07:01 -0700 PDT <nil> <nil> map[] map[] [] []  []},Secrets:[]ObjectReference{ObjectReference{Kind:,Namespace:,Name:nse-acc-token-5n72j,UID:,APIVersion:,ResourceVersion:,FieldPath:,},},ImagePullSecrets:[]LocalObjectReference{},AutomountServiceAccountToken:nil,}"
time="2021-06-08T20:07:02-07:00" level=info msg="Creating ConfigMap 'nsm-config' in namespace'nsm-system'..."
    k8s.go:484: 
        Expected
            <*errors.StatusError | 0xc0003a2280>: {
                ErrStatus: {
                    TypeMeta: {Kind: "", APIVersion: ""},
                    ListMeta: {
                        SelfLink: "",
                        ResourceVersion: "",
                        Continue: "",
                        RemainingItemCount: nil,
                    },
                    Status: "Failure",
                    Message: "configmaps \"nsm-config\" already exists",
                    Reason: "AlreadyExists",
                    Details: {Name: "nsm-config", Group: "", Kind: "configmaps", UID: "", Causes: nil, RetryAfterSeconds: 0},
                    Code: 409,
                },
            }
        to be nil
--- FAIL: TestKubernetesAreOk (5.64s)
FAIL
FAIL	github.com/networkservicemesh/networkservicemesh/test/integration	6.095s
FAIL
TestKubernetesAreOk: OnFail: running on fail script operations with KUBECONFIG=/Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config on cloud kind-1
make -i k8s-deconfig helm-delete k8s-terminating-cleanup k8s-delete-nsm-namespaces || true
helm uninstall config --namespace nsm-system || true
WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config
WARNING: Kubernetes configuration file is world-readable. This is insecure. Location: /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config
release "config" uninstalled
./scripts/helm-nsm-uninstall.sh --nsm_namespace nsm-system --all

Helm version detected: v3.3.4
Cleaning up NSM
xargs: illegal option -- -
usage: xargs [-0opt] [-E eofstr] [-I replstr [-R replacements] [-S replsize]]
             [-J replstr] [-L number] [-n number [-x]] [-P maxprocs]
             [-s size] [utility [argument ...]]
WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config
WARNING: Kubernetes configuration file is world-readable. This is insecure. Location: /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config
make[1]: [helm-delete] Error 1 (ignored)
xargs: illegal option -- -
usage: xargs [-0opt] [-E eofstr] [-I replstr [-R replacements] [-S replsize]]
             [-J replstr] [-L number] [-n number [-x]] [-P maxprocs]
             [-s size] [utility [argument ...]]
No resources found in nsm-system namespace.
make[1]: [k8s-terminating-cleanup] Error 1 (ignored)
Running delete-nsm-namespaces script
NSM_NAMESPACE=nsm-system
Checking ns: default
Checking ns: kube-node-lease
Checking ns: kube-public
Checking ns: kube-system
Checking ns: local-path-storage
Checking ns: nsm-system
Deleting ns: nsm-system
warning: Immediate deletion does not wait for confirmation that the running resource has been terminated. The resource may continue to run on the cluster indefinitely.
No resources found
namespace "nsm-system" deleted
Checking ns: spire
make k8s-config && echo "Cluster reset successfull"
namespace/nsm-system created
helm --namespace nsm-system install config deployments/helm/nsm/charts/config
WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config
WARNING: Kubernetes configuration file is world-readable. This is insecure. Location: /Users/nispatil/go/src/github.com/cisco-app-networking/nsm_publish/networkservicemesh/.tests/cloud_test/single-cluster/shell/kind-1/config
NAME: config
LAST DEPLOYED: Tue Jun  8 20:07:14 2021
NAMESPACE: nsm-system
STATUS: deployed
REVISION: 1
TEST SUITE: None
Cluster reset successfull
failed to run go test . -test.timeout 10m0s -count 1 --run "^(TestKubernetesAreOk)\\z" --tags "basic" --test.v ExitCode: 1