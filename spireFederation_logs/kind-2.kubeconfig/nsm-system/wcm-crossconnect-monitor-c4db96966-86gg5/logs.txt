==== START logs for container crossconnect-monitor of pod nsm-system/wcm-crossconnect-monitor-c4db96966-86gg5 ====
time="2021-06-16T00:12:41Z" level=info msg="Starting crossconnect-monitor..."
2021/06/16 00:12:41 Version: v1.0.1-rc.2-8-g6913a73f
time="2021-06-16T00:12:41Z" level=info msg="All env variables:"
time="2021-06-16T00:12:41Z" level=info msg="KUBERNETES_SERVICE_PORT=443"
time="2021-06-16T00:12:41Z" level=info msg="KUBERNETES_PORT=tcp://10.96.0.1:443"
time="2021-06-16T00:12:41Z" level=info msg="WCM_JAEGER_PORT_6831_UDP=udp://10.106.85.148:6831"
time="2021-06-16T00:12:41Z" level=info msg="HOSTNAME=wcm-crossconnect-monitor-c4db96966-86gg5"
time="2021-06-16T00:12:41Z" level=info msg="SHLVL=1"
time="2021-06-16T00:12:41Z" level=info msg="HOME=/root"
time="2021-06-16T00:12:41Z" level=info msg="METRICS_COLLECTOR_ENABLED=false"
time="2021-06-16T00:12:41Z" level=info msg="WCM_JAEGER_PORT_16686_TCP_ADDR=10.106.85.148"
time="2021-06-16T00:12:41Z" level=info msg="WCM_JAEGER_PORT_16686_TCP_PORT=16686"
time="2021-06-16T00:12:41Z" level=info msg="WCM_JAEGER_PORT_16686_TCP_PROTO=tcp"
time="2021-06-16T00:12:41Z" level=info msg="WCM_JAEGER_SERVICE_PORT_JAEGER=6831"
time="2021-06-16T00:12:41Z" level=info msg="INSECURE=false"
time="2021-06-16T00:12:41Z" level=info msg="WCM_JAEGER_PORT_16686_TCP=tcp://10.106.85.148:16686"
time="2021-06-16T00:12:41Z" level=info msg="KUBERNETES_PORT_443_TCP_ADDR=10.96.0.1"
time="2021-06-16T00:12:41Z" level=info msg="WCM_JAEGER_SERVICE_PORT_HTTP=16686"
time="2021-06-16T00:12:41Z" level=info msg="PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
time="2021-06-16T00:12:41Z" level=info msg="KUBERNETES_PORT_443_TCP_PORT=443"
time="2021-06-16T00:12:41Z" level=info msg="KUBERNETES_PORT_443_TCP_PROTO=tcp"
time="2021-06-16T00:12:41Z" level=info msg="ENTRY=crossconnect-monitor"
time="2021-06-16T00:12:41Z" level=info msg="WCM_JAEGER_SERVICE_HOST=10.106.85.148"
time="2021-06-16T00:12:41Z" level=info msg="WCM_JAEGER_PORT_6831_UDP_ADDR=10.106.85.148"
time="2021-06-16T00:12:41Z" level=info msg="KUBERNETES_SERVICE_PORT_HTTPS=443"
time="2021-06-16T00:12:41Z" level=info msg="KUBERNETES_PORT_443_TCP=tcp://10.96.0.1:443"
time="2021-06-16T00:12:41Z" level=info msg="PROMETHEUS=false"
time="2021-06-16T00:12:41Z" level=info msg="WCM_JAEGER_SERVICE_PORT=16686"
time="2021-06-16T00:12:41Z" level=info msg="WCM_JAEGER_PORT=tcp://10.106.85.148:16686"
time="2021-06-16T00:12:41Z" level=info msg="WCM_JAEGER_PORT_6831_UDP_PORT=6831"
time="2021-06-16T00:12:41Z" level=info msg="KUBERNETES_SERVICE_HOST=10.96.0.1"
time="2021-06-16T00:12:41Z" level=info msg="PWD=/"
time="2021-06-16T00:12:41Z" level=info msg="WCM_JAEGER_PORT_6831_UDP_PROTO=udp"
time="2021-06-16T00:12:41Z" level=error msg="failed to read PROMETHEUS env var"
time="2021-06-16T00:12:49Z" level=info msg="Adding manager: kind-2-control-plane at 10.244.0.13:5001"
time="2021-06-16T00:12:49Z" level=info msg="Starting CrossConnections Monitor on 10.244.0.13:5001"
time="2021-06-16T00:12:49Z" level=info msg="Trying to establish connection to target: 10.244.0.13:5001"
time="2021-06-16T00:12:49Z" level=info msg="Establish connection with the spire provider at address:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T00:12:49Z" level=info msg="Got x509:&{0xc00046e480 <nil> {{0 0} 0 0 0 0} 0xc000432f00 0xc000500b80 {{0 0} 0 0 0 0} false} <nil>"
time="2021-06-16T00:12:49Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T00:12:49Z" level=info msg="Issued identity:spiffe://member1.com/wcm-crossconnect-monitor"
time="2021-06-16T00:12:49Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{member1.com}:0xc0003f2f40]}"
time="2021-06-16T00:12:49Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T00:12:49Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T00:12:49Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T00:12:49Z" level=info msg="Found 1 tlsconfigs."
time="2021-06-16T00:12:49Z" level=info msg="trying to connect to traget using tls: &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x12dc660 GetConfigForClient:<nil> VerifyPeerCertificate:0x12dc6e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T00:12:49Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x12dc660 <nil> 0x12dc6e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T00:12:49Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x12dc660 <nil> 0x12dc6e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
[31m*** INITIAL_STATE_TRANSFER
[0m[31m*** 10.244.0.13:5001
[0m
[31m*** UPDATE
[0m[31m*** 10.244.0.13:5001
[0m[32mid: "1"
payload: "IP"
source: <
  id: "1"
  network_service: "green"
  mechanism: <
    cls: "LOCAL"
    type: "MEMIF"
    parameters: <
      key: "description"
      value: "VPP interface greenh6lqn"
    >
    parameters: <
      key: "name"
      value: "greenh6lqn"
    >
    parameters: <
      key: "netnsInode"
      value: "4026535816"
    >
    parameters: <
      key: "socketfile"
      value: "greenh6lqn/memif.sock"
    >
    parameters: <
      key: "workspace"
      value: "nsm-22"
    >
  >
  context: <
    ip_context: <
      src_ip_addr: "172.100.252.1/30"
      dst_ip_addr: "172.100.252.2/30"
      src_ip_required: true
      dst_ip_required: true
      src_routes: <
        prefix: "172.100.248.0/22"
      >
      dst_routes: <
        prefix: "172.100.252.0/22"
      >
    >
  >
  labels: <
    key: ""
    value: ""
  >
  labels: <
    key: "vl3Nse/nseSource/endpointName"
    value: "green-kind-2_vl3-nse-green-76bc7f4b96-lqcdp"
  >
  path: <
    path_segments: <
      name: "kind-2-control-plane"
    >
  >
  network_service_endpoint_name: "greenh6lqn"
>
destination: <
  id: "2"
  network_service: "green"
  mechanism: <
    cls: "LOCAL"
    type: "MEMIF"
    parameters: <
      key: "description"
      value: "NSM Endpoint"
    >
    parameters: <
      key: "name"
      value: "nsmwhDzf9R"
    >
    parameters: <
      key: "netnsInode"
      value: "4026536104"
    >
    parameters: <
      key: "socketfile"
      value: "nsmwhDzf9R/memif.sock"
    >
    parameters: <
      key: "workspace"
      value: "nsm-25"
    >
    parameters: <
      key: "workspaceNseName"
      value: "greenh6lqn"
    >
  >
  context: <
    ip_context: <
      src_ip_addr: "172.100.252.1/30"
      dst_ip_addr: "172.100.252.2/30"
      src_ip_required: true
      dst_ip_required: true
      src_routes: <
        prefix: "172.100.248.0/22"
      >
      dst_routes: <
        prefix: "172.100.252.0/22"
      >
    >
  >
  labels: <
    key: ""
    value: ""
  >
  labels: <
    key: "ucnf/peerName"
    value: "green-kind-2_vl3-nse-green-76bc7f4b96-lqcdp"
  >
  labels: <
    key: "vl3Nse/nseSource/endpointName"
    value: "green-kind-2_vl3-nse-green-76bc7f4b96-lqcdp"
  >
  path: <
    path_segments: <
      name: "kind-2-control-plane"
    >
  >
>

[0m
[31m*** UPDATE
[0m[31m*** 10.244.0.13:5001
[0m[32mid: "b"
payload: "IP"
source: <
  id: "b"
  network_service: "green"
  mechanism: <
    cls: "LOCAL"
    type: "KERNEL_INTERFACE"
    parameters: <
      key: "description"
      value: "Primary interface"
    >
    parameters: <
      key: "name"
      value: "nsm0"
    >
    parameters: <
      key: "netnsInode"
      value: "4026535960"
    >
    parameters: <
      key: "socketfile"
      value: "nsm0/memif.sock"
    >
    parameters: <
      key: "workspace"
      value: "nsm-12"
    >
  >
  context: <
    ip_context: <
      src_ip_addr: "172.100.252.5/30"
      dst_ip_addr: "172.100.252.6/30"
      src_ip_required: true
      dst_ip_required: true
      dst_routes: <
        prefix: "172.100.0.0/16"
      >
    >
  >
  labels: <
    key: "clusterName"
    value: "cluster2"
  >
  labels: <
    key: "namespace"
    value: "nsm-system"
  >
  labels: <
    key: "podName"
    value: "helloworld-green-679c6b6b65-4nz7t"
  >
  labels: <
    key: "port"
    value: "5000"
  >
  labels: <
    key: "service"
    value: "helloworld"
  >
  network_service_endpoint_name: "greenh6lqn"
>
destination: <
  id: "c"
  network_service: "green"
  mechanism: <
    cls: "LOCAL"
    type: "MEMIF"
    parameters: <
      key: "description"
      value: "NSM Endpoint"
    >
    parameters: <
      key: "name"
      value: "nsm6wfAzfiR"
    >
    parameters: <
      key: "netnsInode"
      value: "4026536104"
    >
    parameters: <
      key: "socketfile"
      value: "nsm6wfAzfiR/memif.sock"
    >
    parameters: <
      key: "workspace"
      value: "nsm-25"
    >
    parameters: <
      key: "workspaceNseName"
      value: "greenh6lqn"
    >
  >
  context: <
    ip_context: <
      src_ip_addr: "172.100.252.5/30"
      dst_ip_addr: "172.100.252.6/30"
      src_ip_required: true
      dst_ip_required: true
      dst_routes: <
        prefix: "172.100.0.0/16"
      >
    >
  >
  labels: <
    key: "clusterName"
    value: "cluster2"
  >
  labels: <
    key: "namespace"
    value: "nsm-system"
  >
  labels: <
    key: "podName"
    value: "helloworld-green-679c6b6b65-4nz7t"
  >
  labels: <
    key: "port"
    value: "5000"
  >
  labels: <
    key: "service"
    value: "helloworld"
  >
  path: <
    path_segments: <
      name: "kind-2-control-plane"
    >
  >
>

[0m
==== END logs for container crossconnect-monitor of pod nsm-system/wcm-crossconnect-monitor-c4db96966-86gg5 ====
