==== START logs for container wcm-nse-discovery of pod wcm-system/wcm-nse-discovery-6fd76df87f-8h8n4 ====
{"level":"info","ts":1623862931.534234,"caller":"cmd/main.go:45","msg":"Starting WCM nse-discovery...","app":"nse-discovery"}
{"level":"info","ts":1623862931.5475981,"caller":"utils/nsrenv.go:29","msg":"All env variables:","app":"nse-discovery"}
{"level":"info","ts":1623862931.5478046,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_SERVICE_PORT=2112","app":"nse-discovery"}
{"level":"info","ts":1623862931.547981,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_PORT=tcp://10.100.240.3:2112","app":"nse-discovery"}
{"level":"info","ts":1623862931.5481458,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_SERVICE_PORT_HTTP_METRICS=8383","app":"nse-discovery"}
{"level":"info","ts":1623862931.5482755,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_PORT=tcp://10.96.0.1:443","app":"nse-discovery"}
{"level":"info","ts":1623862931.548462,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_SERVICE_HOST=10.109.153.182","app":"nse-discovery"}
{"level":"info","ts":1623862931.5491273,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_SERVICE_PORT=443","app":"nse-discovery"}
{"level":"info","ts":1623862931.5493739,"caller":"utils/nsrenv.go:31","msg":"NSE_NAMESPACE=wcm-system","app":"nse-discovery"}
{"level":"info","ts":1623862931.549491,"caller":"utils/nsrenv.go:31","msg":"METRICS_PORT=2112","app":"nse-discovery"}
{"level":"info","ts":1623862931.5497315,"caller":"utils/nsrenv.go:31","msg":"HOSTNAME=wcm-nse-discovery-6fd76df87f-8h8n4","app":"nse-discovery"}
{"level":"info","ts":1623862931.5498755,"caller":"utils/nsrenv.go:31","msg":"SHLVL=1","app":"nse-discovery"}
{"level":"info","ts":1623862931.5501187,"caller":"utils/nsrenv.go:31","msg":"HOME=/root","app":"nse-discovery"}
{"level":"info","ts":1623862931.5502176,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_PORT_8383_TCP_ADDR=10.109.153.182","app":"nse-discovery"}
{"level":"info","ts":1623862931.5503387,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_SERVICE_PORT=8383","app":"nse-discovery"}
{"level":"info","ts":1623862931.5504348,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_PORT=tcp://10.109.153.182:8383","app":"nse-discovery"}
{"level":"info","ts":1623862931.5505214,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_PORT_8383_TCP_PORT=8383","app":"nse-discovery"}
{"level":"info","ts":1623862931.5506253,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_SERVICE_PORT_MONITORING=2112","app":"nse-discovery"}
{"level":"info","ts":1623862931.5507147,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_PORT_8383_TCP_PROTO=tcp","app":"nse-discovery"}
{"level":"info","ts":1623862931.550809,"caller":"utils/nsrenv.go:31","msg":"CLUSTER_NAME=member1","app":"nse-discovery"}
{"level":"info","ts":1623862931.5508945,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_PORT_8686_TCP_ADDR=10.109.153.182","app":"nse-discovery"}
{"level":"info","ts":1623862931.5509892,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_PORT_8686_TCP_PORT=8686","app":"nse-discovery"}
{"level":"info","ts":1623862931.5510836,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_PORT_8686_TCP_PROTO=tcp","app":"nse-discovery"}
{"level":"info","ts":1623862931.5512938,"caller":"utils/nsrenv.go:31","msg":"INSECURE=false","app":"nse-discovery"}
{"level":"info","ts":1623862931.5514026,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_PORT_443_TCP_ADDR=10.96.0.1","app":"nse-discovery"}
{"level":"info","ts":1623862931.5515192,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_PORT_8383_TCP=tcp://10.109.153.182:8383","app":"nse-discovery"}
{"level":"info","ts":1623862931.5516183,"caller":"utils/nsrenv.go:31","msg":"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin","app":"nse-discovery"}
{"level":"info","ts":1623862931.5517123,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_PORT_2112_TCP_ADDR=10.100.240.3","app":"nse-discovery"}
{"level":"info","ts":1623862931.551809,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_PORT_443_TCP_PORT=443","app":"nse-discovery"}
{"level":"info","ts":1623862931.5519133,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_PORT_443_TCP_PROTO=tcp","app":"nse-discovery"}
{"level":"info","ts":1623862931.5520244,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_SERVICE_PORT_CR_METRICS=8686","app":"nse-discovery"}
{"level":"info","ts":1623862931.5521474,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_PORT_8686_TCP=tcp://10.109.153.182:8686","app":"nse-discovery"}
{"level":"info","ts":1623862931.5522714,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_PORT_2112_TCP_PORT=2112","app":"nse-discovery"}
{"level":"info","ts":1623862931.5524466,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_PORT_2112_TCP_PROTO=tcp","app":"nse-discovery"}
{"level":"info","ts":1623862931.5525455,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_SERVICE_PORT_HTTPS=443","app":"nse-discovery"}
{"level":"info","ts":1623862931.5526712,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_PORT_443_TCP=tcp://10.96.0.1:443","app":"nse-discovery"}
{"level":"info","ts":1623862931.5527642,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_SERVICE_HOST=10.100.240.3","app":"nse-discovery"}
{"level":"info","ts":1623862931.5528533,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_SERVICE_HOST=10.96.0.1","app":"nse-discovery"}
{"level":"info","ts":1623862931.5529444,"caller":"utils/nsrenv.go:31","msg":"PWD=/","app":"nse-discovery"}
{"level":"info","ts":1623862931.5531313,"caller":"utils/nsrenv.go:31","msg":"POD_UID=4465a70a-bccf-4c14-b53d-489c2b88f8dd","app":"nse-discovery"}
{"level":"info","ts":1623862931.5532632,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_PORT_2112_TCP=tcp://10.100.240.3:2112","app":"nse-discovery"}
{"level":"info","ts":1623862931.5533757,"caller":"utils/nsrenv.go:31","msg":"NSR_ADDRESS=wcm-proxy-nsmgr.nsm-system:5005","app":"nse-discovery"}
{"level":"info","ts":1623862931.5535495,"caller":"metrics/metrics.go:56","msg":"Serving metrics","app":"nse-discovery"}
time="2021-06-16T17:02:11Z" level=info msg="Creating logger from config: &{wcm-nse-discovery.tpl@wcm-nse-discovery-6fd76df87f-8h8n4 false false [] 0xc000509140 0xc0001db5e0 <nil> <nil> <nil>}"
2021/06/16 17:02:11 debug logging disabled
2021/06/16 17:02:11 Initializing logging reporter
2021/06/16 17:02:11 debug logging disabled
{"level":"info","ts":1623862931.584195,"caller":"nseinformer/nseInformerController.go:61","msg":"Creating NSE CR controller","app":"nse-discovery"}
{"level":"info","ts":1623862931.5857825,"caller":"nseinformer/nseInformerController.go:83","msg":"Created new informer for NSE pod controller","app":"nse-discovery"}
{"level":"info","ts":1623862931.5859134,"caller":"nseinformer/nseInformerController.go:123","msg":"starting NSE pod controller","app":"nse-discovery"}
{"level":"info","ts":1623863085.4003315,"caller":"nseinformer/nseInformerController.go:98","msg":"new NSE CR was created: &{{ } {greenbtshl green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenbtshl 565898d5-67d3-4d88-8edc-3af9043d5462 2377 1 2021-06-16 17:04:45 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-2-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623863085.4004917,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenbtshl...","app":"nse-discovery"}
{"level":"info","ts":1623863085.4005733,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623863085.4006746,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-16T17:04:45Z" level=info msg="==--> discovery.FindNetworkService() span:626ebfc18aa31741:626ebfc18aa31741:0000000000000000:1"
time="2021-06-16T17:04:45Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=626ebfc18aa31741:626ebfc18aa31741:0000000000000000:1"
time="2021-06-16T17:04:45Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=626ebfc18aa31741:626ebfc18aa31741:0000000000000000:1"
time="2021-06-16T17:04:45Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:04:45Z" level=info msg="==----> initRegistryClient() span:626ebfc18aa31741:60a9b5e0686e4ece:626ebfc18aa31741:1"
time="2021-06-16T17:04:45Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:04:45Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:04:45Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="626ebfc18aa31741:60a9b5e0686e4ece:626ebfc18aa31741:1"
time="2021-06-16T17:04:45Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:04:45Z" level=info msg="Establish connection with the spire provider at address:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:04:45Z" level=info msg="Got x509:&{0xc000018000 <nil> {{0 0} 0 0 0 0} 0xc00059d1d0 0xc000097a60 {{0 0} 0 0 0 0} false} <nil>"
time="2021-06-16T17:04:45Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:04:45Z" level=info msg="Issued identity:spiffe://member1.com/wcm-nse-discovery"
time="2021-06-16T17:04:45Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00052b7c0 {member1.com}:0xc00052b6c0 {member2.com}:0xc00052b740]}"
time="2021-06-16T17:04:45Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:04:45Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:45Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:04:45Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:04:45Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:45Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:04:45Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:04:45Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:45Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:04:45Z" level=info msg="Found 3 tlsconfigs. [0xc000386c00 0xc000386d80 0xc000386f00]"
time="2021-06-16T17:04:45Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
{"level":"info","ts":1623863086.275225,"caller":"nseinformer/nseInformerController.go:98","msg":"new NSE CR was created: &{{ } {greenn5mqx green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenn5mqx 7e5b3f21-b3b3-4764-80d9-ece427984980 2380 1 2021-06-16 17:04:46 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-2_vl3-nse-green-76bc7f4b96-8hv98 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-2-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-16T17:04:50Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:04:50Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:04:50Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:04:50Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:04:50Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="626ebfc18aa31741:60a9b5e0686e4ece:626ebfc18aa31741:1"
2021/06/16 17:04:50 Reporting span 626ebfc18aa31741:60a9b5e0686e4ece:626ebfc18aa31741:1
{"level":"info","ts":1623863090.5219102,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:04:50Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=626ebfc18aa31741:626ebfc18aa31741:0000000000000000:1"
time="2021-06-16T17:04:50Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=626ebfc18aa31741:626ebfc18aa31741:0000000000000000:1"
2021/06/16 17:04:50 Reporting span 626ebfc18aa31741:78c127e3d12cbcf0:626ebfc18aa31741:1
time="2021-06-16T17:04:50Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=626ebfc18aa31741:626ebfc18aa31741:0000000000000000:1"
2021/06/16 17:04:50 Reporting span 626ebfc18aa31741:626ebfc18aa31741:0000000000000000:1
{"level":"info","ts":1623863090.5322738,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenbtshl","app":"nse-discovery"}
{"level":"info","ts":1623863090.5323794,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenn5mqx","app":"nse-discovery"}
{"level":"info","ts":1623863090.5324278,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623863090.5324595,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-16T17:04:50Z" level=info msg="==--> discovery.FindNetworkService() span:01e3ad9342e2cb72:01e3ad9342e2cb72:0000000000000000:1"
time="2021-06-16T17:04:50Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=01e3ad9342e2cb72:01e3ad9342e2cb72:0000000000000000:1"
time="2021-06-16T17:04:50Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=01e3ad9342e2cb72:01e3ad9342e2cb72:0000000000000000:1"
time="2021-06-16T17:04:50Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:04:50Z" level=info msg="==----> initRegistryClient() span:01e3ad9342e2cb72:23c022f879de8023:01e3ad9342e2cb72:1"
time="2021-06-16T17:04:50Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:04:50Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:04:50Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="01e3ad9342e2cb72:23c022f879de8023:01e3ad9342e2cb72:1"
time="2021-06-16T17:04:50Z" level=info msg="Trying to establish connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:04:50Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:04:50Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001f4700 {member1.com}:0xc0001f4680 {member2.com}:0xc0001f4780]}"
time="2021-06-16T17:04:50Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:04:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:50Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:04:50Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:04:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:50Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:04:50Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:04:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:50Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:04:50Z" level=info msg="Found 3 tlsconfigs. [0xc000386180 0xc000386300 0xc000386480]"
time="2021-06-16T17:04:50Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:04:50Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:04:50Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:04:50Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="01e3ad9342e2cb72:23c022f879de8023:01e3ad9342e2cb72:1"
2021/06/16 17:04:50 Reporting span 01e3ad9342e2cb72:23c022f879de8023:01e3ad9342e2cb72:1
{"level":"info","ts":1623863090.5807624,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:04:50Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=01e3ad9342e2cb72:01e3ad9342e2cb72:0000000000000000:1"
time="2021-06-16T17:04:50Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=01e3ad9342e2cb72:01e3ad9342e2cb72:0000000000000000:1"
2021/06/16 17:04:50 Reporting span 01e3ad9342e2cb72:3760b8ab84dd96ec:01e3ad9342e2cb72:1
time="2021-06-16T17:04:50Z" level=info msg=">><<---- response={} span=01e3ad9342e2cb72:01e3ad9342e2cb72:0000000000000000:1"
2021/06/16 17:04:50 Reporting span 01e3ad9342e2cb72:01e3ad9342e2cb72:0000000000000000:1
{"level":"info","ts":1623863090.5834486,"caller":"nseinformer/nseInformerController.go:195","msg":"No endpoints in the global NSR for network-service: green","app":"nse-discovery"}
{"level":"info","ts":1623863090.583498,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 0 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623863090.5835154,"caller":"nseinformer/nseInformerController.go:338","msg":"NSE diff: For cluster member1, found diff endpoint 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863090.583526,"caller":"nseinformer/nseInformerController.go:338","msg":"NSE diff: For cluster member1, found diff endpoint 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863090.5835357,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863090.5835445,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863090.5836773,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 2 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
time="2021-06-16T17:04:50Z" level=info msg="Requesting NseRegistryClient..."
time="2021-06-16T17:04:50Z" level=info msg="==--> initRegistryClient() span:6c7242ac75a10586:6c7242ac75a10586:0000000000000000:1"
time="2021-06-16T17:04:50Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:04:50Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:04:50Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6c7242ac75a10586:6c7242ac75a10586:0000000000000000:1"
time="2021-06-16T17:04:50Z" level=info msg="Trying to establish connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:04:50Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:04:50Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0005a1300 {member1.com}:0xc0005a1200 {member2.com}:0xc0005a1280]}"
time="2021-06-16T17:04:50Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:04:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:50Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:04:50Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:04:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:50Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:04:50Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:04:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:50Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:04:50Z" level=info msg="Found 3 tlsconfigs. [0xc0005b4180 0xc0005b4300 0xc0005b4480]"
time="2021-06-16T17:04:50Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:04:50Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:04:50Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:04:50Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="6c7242ac75a10586:6c7242ac75a10586:0000000000000000:1"
2021/06/16 17:04:50 Reporting span 6c7242ac75a10586:6c7242ac75a10586:0000000000000000:1
time="2021-06-16T17:04:50Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-06-16T17:04:50Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/06/16 17:04:50 Reporting span 35d2341dd2c5d383:35d2341dd2c5d383:0000000000000000:1
time="2021-06-16T17:04:50Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-06-16T17:04:50Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-06-16T17:04:50Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/06/16 17:04:50 Reporting span 622176bf9fa19156:622176bf9fa19156:0000000000000000:1
time="2021-06-16T17:04:50Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1623863090.6459768,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623863090.646032,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenn5mqx...","app":"nse-discovery"}
{"level":"info","ts":1623863090.6460567,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623863090.6460683,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-16T17:04:50Z" level=info msg="==--> discovery.FindNetworkService() span:4b94c23840bf03fe:4b94c23840bf03fe:0000000000000000:1"
time="2021-06-16T17:04:50Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=4b94c23840bf03fe:4b94c23840bf03fe:0000000000000000:1"
time="2021-06-16T17:04:50Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=4b94c23840bf03fe:4b94c23840bf03fe:0000000000000000:1"
time="2021-06-16T17:04:50Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:04:50Z" level=info msg="==----> initRegistryClient() span:4b94c23840bf03fe:39a8ca95ec9750f3:4b94c23840bf03fe:1"
time="2021-06-16T17:04:50Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:04:50Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:04:50Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4b94c23840bf03fe:39a8ca95ec9750f3:4b94c23840bf03fe:1"
time="2021-06-16T17:04:50Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:04:50Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:04:50Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0005a0200 {member1.com}:0xc0005a0100 {member2.com}:0xc0005a0180]}"
time="2021-06-16T17:04:50Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:04:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:50Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:04:50Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:04:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:50Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:04:50Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:04:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:50Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:04:50Z" level=info msg="Found 3 tlsconfigs. [0xc0005b4600 0xc0005b4a80 0xc0005b4d80]"
time="2021-06-16T17:04:50Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:04:55Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:04:55Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:04:55Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:04:55Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:04:55Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="4b94c23840bf03fe:39a8ca95ec9750f3:4b94c23840bf03fe:1"
2021/06/16 17:04:55 Reporting span 4b94c23840bf03fe:39a8ca95ec9750f3:4b94c23840bf03fe:1
{"level":"info","ts":1623863095.6791797,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:04:55Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=4b94c23840bf03fe:4b94c23840bf03fe:0000000000000000:1"
time="2021-06-16T17:04:55Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=4b94c23840bf03fe:4b94c23840bf03fe:0000000000000000:1"
2021/06/16 17:04:55 Reporting span 4b94c23840bf03fe:12eecb50ed3ef82e:4b94c23840bf03fe:1
time="2021-06-16T17:04:55Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=4b94c23840bf03fe:4b94c23840bf03fe:0000000000000000:1"
2021/06/16 17:04:55 Reporting span 4b94c23840bf03fe:4b94c23840bf03fe:0000000000000000:1
{"level":"info","ts":1623863095.6861706,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenbtshl","app":"nse-discovery"}
{"level":"info","ts":1623863095.686221,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenn5mqx","app":"nse-discovery"}
{"level":"info","ts":1623863095.6862564,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623863095.6862721,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-16T17:04:55Z" level=info msg="==--> discovery.FindNetworkService() span:7e369e63c866dbad:7e369e63c866dbad:0000000000000000:1"
time="2021-06-16T17:04:55Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7e369e63c866dbad:7e369e63c866dbad:0000000000000000:1"
time="2021-06-16T17:04:55Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=7e369e63c866dbad:7e369e63c866dbad:0000000000000000:1"
time="2021-06-16T17:04:55Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:04:55Z" level=info msg="==----> initRegistryClient() span:7e369e63c866dbad:183c1feb3a090e73:7e369e63c866dbad:1"
time="2021-06-16T17:04:55Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:04:55Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:04:55Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7e369e63c866dbad:183c1feb3a090e73:7e369e63c866dbad:1"
time="2021-06-16T17:04:55Z" level=info msg="Trying to establish connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:04:55Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:04:55Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001f4380 {member1.com}:0xc0001f4300 {member2.com}:0xc0001f4400]}"
time="2021-06-16T17:04:55Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:04:55Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:55Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:04:55Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:04:55Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:55Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:04:55Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:04:55Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:55Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:04:55Z" level=info msg="Found 3 tlsconfigs. [0xc0003a6000 0xc0003a6180 0xc0003a6900]"
time="2021-06-16T17:04:55Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:04:55Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:04:55Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:04:55Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="7e369e63c866dbad:183c1feb3a090e73:7e369e63c866dbad:1"
2021/06/16 17:04:55 Reporting span 7e369e63c866dbad:183c1feb3a090e73:7e369e63c866dbad:1
{"level":"info","ts":1623863095.7283025,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:04:55Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7e369e63c866dbad:7e369e63c866dbad:0000000000000000:1"
time="2021-06-16T17:04:55Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=7e369e63c866dbad:7e369e63c866dbad:0000000000000000:1"
2021/06/16 17:04:55 Reporting span 7e369e63c866dbad:1c394c7db57a049b:7e369e63c866dbad:1
time="2021-06-16T17:04:55Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7e369e63c866dbad:7e369e63c866dbad:0000000000000000:1"
2021/06/16 17:04:55 Reporting span 7e369e63c866dbad:7e369e63c866dbad:0000000000000000:1
{"level":"info","ts":1623863095.730713,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenbtshl","app":"nse-discovery"}
{"level":"info","ts":1623863095.7307374,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenn5mqx","app":"nse-discovery"}
{"level":"info","ts":1623863095.7307477,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 2 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623863095.7308078,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863095.7308528,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863095.7308655,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863095.7308757,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863095.7308848,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863095.7308939,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863095.7309008,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863095.7309065,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863095.7309124,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623863095.7309444,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623863095.730953,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623863171.6211133,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenbtshl green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenbtshl 565898d5-67d3-4d88-8edc-3af9043d5462 2377 1 2021-06-16 17:04:45 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-2-control-plane} {RUNNING}} was updated with: &{{ } {greenbtshl green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenbtshl 565898d5-67d3-4d88-8edc-3af9043d5462 2377 1 2021-06-16 17:04:45 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-2-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623863171.6212823,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenbtshl...","app":"nse-discovery"}
{"level":"info","ts":1623863171.6213043,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623863171.6213355,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623863171.6213303,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenn5mqx green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenn5mqx 7e5b3f21-b3b3-4764-80d9-ece427984980 2380 1 2021-06-16 17:04:46 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-2_vl3-nse-green-76bc7f4b96-8hv98 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-2-control-plane} {RUNNING}} was updated with: &{{ } {greenn5mqx green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenn5mqx 7e5b3f21-b3b3-4764-80d9-ece427984980 2380 1 2021-06-16 17:04:46 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-2_vl3-nse-green-76bc7f4b96-8hv98 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-2-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-16T17:06:11Z" level=info msg="==--> discovery.FindNetworkService() span:7270ea5541d368c7:7270ea5541d368c7:0000000000000000:1"
time="2021-06-16T17:06:11Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7270ea5541d368c7:7270ea5541d368c7:0000000000000000:1"
time="2021-06-16T17:06:11Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=7270ea5541d368c7:7270ea5541d368c7:0000000000000000:1"
time="2021-06-16T17:06:11Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:06:11Z" level=info msg="==----> initRegistryClient() span:7270ea5541d368c7:140dfc5aaa35b8b0:7270ea5541d368c7:1"
time="2021-06-16T17:06:11Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:06:11Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:06:11Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7270ea5541d368c7:140dfc5aaa35b8b0:7270ea5541d368c7:1"
time="2021-06-16T17:06:11Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:06:11Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:06:11Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0005a0b40 {member1.com}:0xc0005a0ac0 {member2.com}:0xc0005a0bc0]}"
time="2021-06-16T17:06:11Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:06:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:11Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:06:11Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:06:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:06:11Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:06:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:06:11Z" level=info msg="Found 3 tlsconfigs. [0xc000415c80 0xc000415e00 0xc000496000]"
time="2021-06-16T17:06:11Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:16Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:06:16Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:16Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:16Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:16Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="7270ea5541d368c7:140dfc5aaa35b8b0:7270ea5541d368c7:1"
2021/06/16 17:06:16 Reporting span 7270ea5541d368c7:140dfc5aaa35b8b0:7270ea5541d368c7:1
{"level":"info","ts":1623863176.652906,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:06:16Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7270ea5541d368c7:7270ea5541d368c7:0000000000000000:1"
time="2021-06-16T17:06:16Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=7270ea5541d368c7:7270ea5541d368c7:0000000000000000:1"
2021/06/16 17:06:16 Reporting span 7270ea5541d368c7:73fd0a761c964503:7270ea5541d368c7:1
time="2021-06-16T17:06:16Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7270ea5541d368c7:7270ea5541d368c7:0000000000000000:1"
2021/06/16 17:06:16 Reporting span 7270ea5541d368c7:7270ea5541d368c7:0000000000000000:1
{"level":"info","ts":1623863176.6583762,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenbtshl","app":"nse-discovery"}
{"level":"info","ts":1623863176.6584349,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenn5mqx","app":"nse-discovery"}
{"level":"info","ts":1623863176.6584694,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623863176.6584835,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-16T17:06:16Z" level=info msg="==--> discovery.FindNetworkService() span:2b102a539e604be0:2b102a539e604be0:0000000000000000:1"
time="2021-06-16T17:06:16Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2b102a539e604be0:2b102a539e604be0:0000000000000000:1"
time="2021-06-16T17:06:16Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=2b102a539e604be0:2b102a539e604be0:0000000000000000:1"
time="2021-06-16T17:06:16Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:06:16Z" level=info msg="==----> initRegistryClient() span:2b102a539e604be0:0267b90b4aec5c8a:2b102a539e604be0:1"
time="2021-06-16T17:06:16Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:06:16Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:06:16Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2b102a539e604be0:0267b90b4aec5c8a:2b102a539e604be0:1"
time="2021-06-16T17:06:16Z" level=info msg="Trying to establish connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:06:16Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:06:16Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0005a06c0 {member1.com}:0xc0005a0640 {member2.com}:0xc0005a0740]}"
time="2021-06-16T17:06:16Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:06:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:16Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:06:16Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:06:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:06:16Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:06:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:06:16Z" level=info msg="Found 3 tlsconfigs. [0xc000386480 0xc000386c00 0xc000386d80]"
time="2021-06-16T17:06:16Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:16Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:16Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:16Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="2b102a539e604be0:0267b90b4aec5c8a:2b102a539e604be0:1"
2021/06/16 17:06:16 Reporting span 2b102a539e604be0:0267b90b4aec5c8a:2b102a539e604be0:1
{"level":"info","ts":1623863176.695116,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:06:16Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2b102a539e604be0:2b102a539e604be0:0000000000000000:1"
time="2021-06-16T17:06:16Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=2b102a539e604be0:2b102a539e604be0:0000000000000000:1"
2021/06/16 17:06:16 Reporting span 2b102a539e604be0:200691d6adda0003:2b102a539e604be0:1
time="2021-06-16T17:06:16Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2b102a539e604be0:2b102a539e604be0:0000000000000000:1"
2021/06/16 17:06:16 Reporting span 2b102a539e604be0:2b102a539e604be0:0000000000000000:1
{"level":"info","ts":1623863176.698486,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenbtshl","app":"nse-discovery"}
{"level":"info","ts":1623863176.6985633,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenn5mqx","app":"nse-discovery"}
{"level":"info","ts":1623863176.6986046,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green6bjtj","app":"nse-discovery"}
{"level":"info","ts":1623863176.6986573,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green6gqkr","app":"nse-discovery"}
{"level":"info","ts":1623863176.6986706,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623863176.6986828,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863176.6986926,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863176.6987016,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member1, skipping endpoint 'green6bjtj'","app":"nse-discovery"}
{"level":"info","ts":1623863176.6987095,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member1, skipping endpoint 'green6gqkr'","app":"nse-discovery"}
{"level":"info","ts":1623863176.6987183,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863176.6987271,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863176.6987364,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863176.6987758,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863176.6988285,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863176.6988587,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863176.698871,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member1, skip comparing endpoint 'green6bjtj'","app":"nse-discovery"}
{"level":"info","ts":1623863176.6988797,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member1, skip comparing endpoint 'green6gqkr'","app":"nse-discovery"}
{"level":"info","ts":1623863176.6988888,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623863176.6988974,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623863176.698906,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623863176.698921,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenn5mqx...","app":"nse-discovery"}
{"level":"info","ts":1623863176.698957,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623863176.6990051,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-16T17:06:16Z" level=info msg="==--> discovery.FindNetworkService() span:53154767eea86b15:53154767eea86b15:0000000000000000:1"
time="2021-06-16T17:06:16Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=53154767eea86b15:53154767eea86b15:0000000000000000:1"
time="2021-06-16T17:06:16Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=53154767eea86b15:53154767eea86b15:0000000000000000:1"
time="2021-06-16T17:06:16Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:06:16Z" level=info msg="==----> initRegistryClient() span:53154767eea86b15:15d74566985f39da:53154767eea86b15:1"
time="2021-06-16T17:06:16Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:06:16Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:06:16Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="53154767eea86b15:15d74566985f39da:53154767eea86b15:1"
time="2021-06-16T17:06:16Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:06:16Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:06:16Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0005a1380 {member1.com}:0xc0005a1280 {member2.com}:0xc0005a1300]}"
time="2021-06-16T17:06:16Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:06:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:16Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:06:16Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:06:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:06:16Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:06:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:06:16Z" level=info msg="Found 3 tlsconfigs. [0xc000387c80 0xc0003a6000 0xc0003a6180]"
time="2021-06-16T17:06:16Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:21Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:06:21Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:21Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:21Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:21Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="53154767eea86b15:15d74566985f39da:53154767eea86b15:1"
2021/06/16 17:06:21 Reporting span 53154767eea86b15:15d74566985f39da:53154767eea86b15:1
{"level":"info","ts":1623863181.7337132,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:06:21Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=53154767eea86b15:53154767eea86b15:0000000000000000:1"
time="2021-06-16T17:06:21Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=53154767eea86b15:53154767eea86b15:0000000000000000:1"
2021/06/16 17:06:21 Reporting span 53154767eea86b15:2f2aabe8f4a70ab7:53154767eea86b15:1
time="2021-06-16T17:06:21Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=53154767eea86b15:53154767eea86b15:0000000000000000:1"
2021/06/16 17:06:21 Reporting span 53154767eea86b15:53154767eea86b15:0000000000000000:1
{"level":"info","ts":1623863181.7395937,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenbtshl","app":"nse-discovery"}
{"level":"info","ts":1623863181.739657,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenn5mqx","app":"nse-discovery"}
{"level":"info","ts":1623863181.7396715,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623863181.7396839,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-16T17:06:21Z" level=info msg="==--> discovery.FindNetworkService() span:5ca396337f45077d:5ca396337f45077d:0000000000000000:1"
time="2021-06-16T17:06:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=5ca396337f45077d:5ca396337f45077d:0000000000000000:1"
time="2021-06-16T17:06:21Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=5ca396337f45077d:5ca396337f45077d:0000000000000000:1"
time="2021-06-16T17:06:21Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:06:21Z" level=info msg="==----> initRegistryClient() span:5ca396337f45077d:2a3d5b9d830104bb:5ca396337f45077d:1"
time="2021-06-16T17:06:21Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:06:21Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:06:21Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5ca396337f45077d:2a3d5b9d830104bb:5ca396337f45077d:1"
time="2021-06-16T17:06:21Z" level=info msg="Trying to establish connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:06:21Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:06:21Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0002e5080 {member1.com}:0xc0002e40c0 {member2.com}:0xc0002e5000]}"
time="2021-06-16T17:06:21Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:06:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:21Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:06:21Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:06:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:06:21Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:06:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:06:21Z" level=info msg="Found 3 tlsconfigs. [0xc000414480 0xc000414600 0xc000414a80]"
time="2021-06-16T17:06:21Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:21Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:21Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:21Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="5ca396337f45077d:2a3d5b9d830104bb:5ca396337f45077d:1"
2021/06/16 17:06:21 Reporting span 5ca396337f45077d:2a3d5b9d830104bb:5ca396337f45077d:1
{"level":"info","ts":1623863181.7813144,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:06:21Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5ca396337f45077d:5ca396337f45077d:0000000000000000:1"
time="2021-06-16T17:06:21Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=5ca396337f45077d:5ca396337f45077d:0000000000000000:1"
2021/06/16 17:06:21 Reporting span 5ca396337f45077d:3db3f0aefe6cf040:5ca396337f45077d:1
time="2021-06-16T17:06:21Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5ca396337f45077d:5ca396337f45077d:0000000000000000:1"
2021/06/16 17:06:21 Reporting span 5ca396337f45077d:5ca396337f45077d:0000000000000000:1
{"level":"info","ts":1623863181.784502,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenbtshl","app":"nse-discovery"}
{"level":"info","ts":1623863181.784599,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenn5mqx","app":"nse-discovery"}
{"level":"info","ts":1623863181.7846823,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green6bjtj","app":"nse-discovery"}
{"level":"info","ts":1623863181.784771,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green6gqkr","app":"nse-discovery"}
{"level":"info","ts":1623863181.784881,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623863181.7849815,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863181.7850654,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863181.785149,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member1, skipping endpoint 'green6bjtj'","app":"nse-discovery"}
{"level":"info","ts":1623863181.785369,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member1, skipping endpoint 'green6gqkr'","app":"nse-discovery"}
{"level":"info","ts":1623863181.7854908,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863181.7856326,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863181.7856672,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863181.7856796,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863181.7856889,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863181.785799,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863181.785835,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member1, skip comparing endpoint 'green6bjtj'","app":"nse-discovery"}
{"level":"info","ts":1623863181.7858465,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member1, skip comparing endpoint 'green6gqkr'","app":"nse-discovery"}
{"level":"info","ts":1623863181.7858562,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623863181.7858677,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623863181.7858763,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623863291.6214533,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenbtshl green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenbtshl 565898d5-67d3-4d88-8edc-3af9043d5462 2377 1 2021-06-16 17:04:45 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-2-control-plane} {RUNNING}} was updated with: &{{ } {greenbtshl green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenbtshl 565898d5-67d3-4d88-8edc-3af9043d5462 2377 1 2021-06-16 17:04:45 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-2-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623863291.62183,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenbtshl...","app":"nse-discovery"}
{"level":"info","ts":1623863291.6219857,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623863291.622127,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-16T17:08:11Z" level=info msg="==--> discovery.FindNetworkService() span:678300e2cf0a3edc:678300e2cf0a3edc:0000000000000000:1"
time="2021-06-16T17:08:11Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=678300e2cf0a3edc:678300e2cf0a3edc:0000000000000000:1"
time="2021-06-16T17:08:11Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=678300e2cf0a3edc:678300e2cf0a3edc:0000000000000000:1"
time="2021-06-16T17:08:11Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:08:11Z" level=info msg="==----> initRegistryClient() span:678300e2cf0a3edc:463b15be6be6029e:678300e2cf0a3edc:1"
time="2021-06-16T17:08:11Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
{"level":"info","ts":1623863291.6218638,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenn5mqx green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenn5mqx 7e5b3f21-b3b3-4764-80d9-ece427984980 2380 1 2021-06-16 17:04:46 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-2_vl3-nse-green-76bc7f4b96-8hv98 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-2-control-plane} {RUNNING}} was updated with: &{{ } {greenn5mqx green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenn5mqx 7e5b3f21-b3b3-4764-80d9-ece427984980 2380 1 2021-06-16 17:04:46 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-2_vl3-nse-green-76bc7f4b96-8hv98 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-2-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-16T17:08:11Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:08:11Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="678300e2cf0a3edc:463b15be6be6029e:678300e2cf0a3edc:1"
time="2021-06-16T17:08:11Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:08:11Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:08:11Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000122340 {member1.com}:0xc000122040 {member2.com}:0xc000122440]}"
time="2021-06-16T17:08:11Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:08:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:11Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:08:11Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:08:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:08:11Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:08:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:08:11Z" level=info msg="Found 3 tlsconfigs. [0xc000690000 0xc000690180 0xc000690300]"
time="2021-06-16T17:08:11Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:16Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:16Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:16Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:16Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:16Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="678300e2cf0a3edc:463b15be6be6029e:678300e2cf0a3edc:1"
2021/06/16 17:08:16 Reporting span 678300e2cf0a3edc:463b15be6be6029e:678300e2cf0a3edc:1
{"level":"info","ts":1623863296.6581132,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:08:16Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=678300e2cf0a3edc:678300e2cf0a3edc:0000000000000000:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=678300e2cf0a3edc:678300e2cf0a3edc:0000000000000000:1"
2021/06/16 17:08:16 Reporting span 678300e2cf0a3edc:7fc55539acaf3775:678300e2cf0a3edc:1
time="2021-06-16T17:08:16Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=678300e2cf0a3edc:678300e2cf0a3edc:0000000000000000:1"
2021/06/16 17:08:16 Reporting span 678300e2cf0a3edc:678300e2cf0a3edc:0000000000000000:1
{"level":"info","ts":1623863296.6654022,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenbtshl","app":"nse-discovery"}
{"level":"info","ts":1623863296.665432,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenn5mqx","app":"nse-discovery"}
{"level":"info","ts":1623863296.665462,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623863296.6654754,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-16T17:08:16Z" level=info msg="==--> discovery.FindNetworkService() span:45f22f8ed9657e9f:45f22f8ed9657e9f:0000000000000000:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=45f22f8ed9657e9f:45f22f8ed9657e9f:0000000000000000:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=45f22f8ed9657e9f:45f22f8ed9657e9f:0000000000000000:1"
time="2021-06-16T17:08:16Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:08:16Z" level=info msg="==----> initRegistryClient() span:45f22f8ed9657e9f:7bb57bb999db9ae5:45f22f8ed9657e9f:1"
time="2021-06-16T17:08:16Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:08:16Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:08:16Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="45f22f8ed9657e9f:7bb57bb999db9ae5:45f22f8ed9657e9f:1"
time="2021-06-16T17:08:16Z" level=info msg="Trying to establish connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:08:16Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:08:16Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001f4d40 {member1.com}:0xc0001f4cc0 {member2.com}:0xc0001f4dc0]}"
time="2021-06-16T17:08:16Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:08:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:16Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:08:16Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:08:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:08:16Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:08:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:08:16Z" level=info msg="Found 3 tlsconfigs. [0xc000443380 0xc000443500 0xc000443980]"
time="2021-06-16T17:08:16Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:16Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:16Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:16Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="45f22f8ed9657e9f:7bb57bb999db9ae5:45f22f8ed9657e9f:1"
2021/06/16 17:08:16 Reporting span 45f22f8ed9657e9f:7bb57bb999db9ae5:45f22f8ed9657e9f:1
{"level":"info","ts":1623863296.762771,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:08:16Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=45f22f8ed9657e9f:45f22f8ed9657e9f:0000000000000000:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=45f22f8ed9657e9f:45f22f8ed9657e9f:0000000000000000:1"
2021/06/16 17:08:16 Reporting span 45f22f8ed9657e9f:11e74570d0ed3442:45f22f8ed9657e9f:1
time="2021-06-16T17:08:16Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=45f22f8ed9657e9f:45f22f8ed9657e9f:0000000000000000:1"
2021/06/16 17:08:16 Reporting span 45f22f8ed9657e9f:45f22f8ed9657e9f:0000000000000000:1
{"level":"info","ts":1623863296.7701929,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenbtshl","app":"nse-discovery"}
{"level":"info","ts":1623863296.7703846,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenn5mqx","app":"nse-discovery"}
{"level":"info","ts":1623863296.7705846,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green6bjtj","app":"nse-discovery"}
{"level":"info","ts":1623863296.7707403,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green6gqkr","app":"nse-discovery"}
{"level":"info","ts":1623863296.7709074,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623863296.771073,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863296.7713177,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863296.7714546,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member1, skipping endpoint 'green6bjtj'","app":"nse-discovery"}
{"level":"info","ts":1623863296.771589,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member1, skipping endpoint 'green6gqkr'","app":"nse-discovery"}
{"level":"info","ts":1623863296.7720199,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863296.7721524,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863296.7723284,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863296.7724812,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863296.7726097,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863296.77278,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863296.7729385,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member1, skip comparing endpoint 'green6bjtj'","app":"nse-discovery"}
{"level":"info","ts":1623863296.7730947,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member1, skip comparing endpoint 'green6gqkr'","app":"nse-discovery"}
{"level":"info","ts":1623863296.7733202,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623863296.773665,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623863296.7738578,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623863296.7740054,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenn5mqx...","app":"nse-discovery"}
{"level":"info","ts":1623863296.774144,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623863296.7742755,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-16T17:08:16Z" level=info msg="==--> discovery.FindNetworkService() span:61de2bdbc9358dc6:61de2bdbc9358dc6:0000000000000000:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=61de2bdbc9358dc6:61de2bdbc9358dc6:0000000000000000:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=61de2bdbc9358dc6:61de2bdbc9358dc6:0000000000000000:1"
time="2021-06-16T17:08:16Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:08:16Z" level=info msg="==----> initRegistryClient() span:61de2bdbc9358dc6:68f86951f0bb8152:61de2bdbc9358dc6:1"
time="2021-06-16T17:08:16Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:08:16Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:08:16Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="61de2bdbc9358dc6:68f86951f0bb8152:61de2bdbc9358dc6:1"
time="2021-06-16T17:08:16Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:08:16Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:08:16Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00052a200 {member1.com}:0xc00052a100 {member2.com}:0xc00052a280]}"
time="2021-06-16T17:08:16Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:08:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:16Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:08:16Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:08:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:08:16Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:08:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:08:16Z" level=info msg="Found 3 tlsconfigs. [0xc000386180 0xc000386300 0xc000386480]"
time="2021-06-16T17:08:16Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:21Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:21Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:21Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:21Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:21Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="61de2bdbc9358dc6:68f86951f0bb8152:61de2bdbc9358dc6:1"
2021/06/16 17:08:21 Reporting span 61de2bdbc9358dc6:68f86951f0bb8152:61de2bdbc9358dc6:1
{"level":"info","ts":1623863301.824787,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:08:21Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=61de2bdbc9358dc6:61de2bdbc9358dc6:0000000000000000:1"
time="2021-06-16T17:08:21Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=61de2bdbc9358dc6:61de2bdbc9358dc6:0000000000000000:1"
2021/06/16 17:08:21 Reporting span 61de2bdbc9358dc6:728f4804f3669afc:61de2bdbc9358dc6:1
time="2021-06-16T17:08:21Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=61de2bdbc9358dc6:61de2bdbc9358dc6:0000000000000000:1"
2021/06/16 17:08:21 Reporting span 61de2bdbc9358dc6:61de2bdbc9358dc6:0000000000000000:1
{"level":"info","ts":1623863301.8347602,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenbtshl","app":"nse-discovery"}
{"level":"info","ts":1623863301.8347933,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenn5mqx","app":"nse-discovery"}
{"level":"info","ts":1623863301.8348043,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623863301.8348145,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-16T17:08:21Z" level=info msg="==--> discovery.FindNetworkService() span:55dc4ae11da4685b:55dc4ae11da4685b:0000000000000000:1"
time="2021-06-16T17:08:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=55dc4ae11da4685b:55dc4ae11da4685b:0000000000000000:1"
time="2021-06-16T17:08:21Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=55dc4ae11da4685b:55dc4ae11da4685b:0000000000000000:1"
time="2021-06-16T17:08:21Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:08:21Z" level=info msg="==----> initRegistryClient() span:55dc4ae11da4685b:31b655d29c77f95b:55dc4ae11da4685b:1"
time="2021-06-16T17:08:21Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:08:21Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:08:21Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="55dc4ae11da4685b:31b655d29c77f95b:55dc4ae11da4685b:1"
time="2021-06-16T17:08:21Z" level=info msg="Trying to establish connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:08:21Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:08:21Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001f5d40 {member1.com}:0xc0001f5cc0 {member2.com}:0xc0001f5dc0]}"
time="2021-06-16T17:08:21Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:08:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:21Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:08:21Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:08:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:08:21Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:08:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:08:21Z" level=info msg="Found 3 tlsconfigs. [0xc000442c00 0xc000443380 0xc000443500]"
time="2021-06-16T17:08:21Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:21Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:21Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:21Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="55dc4ae11da4685b:31b655d29c77f95b:55dc4ae11da4685b:1"
2021/06/16 17:08:21 Reporting span 55dc4ae11da4685b:31b655d29c77f95b:55dc4ae11da4685b:1
{"level":"info","ts":1623863301.8829997,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:08:21Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=55dc4ae11da4685b:55dc4ae11da4685b:0000000000000000:1"
time="2021-06-16T17:08:21Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=55dc4ae11da4685b:55dc4ae11da4685b:0000000000000000:1"
2021/06/16 17:08:21 Reporting span 55dc4ae11da4685b:01fb5c0dd45bcc66:55dc4ae11da4685b:1
time="2021-06-16T17:08:21Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=55dc4ae11da4685b:55dc4ae11da4685b:0000000000000000:1"
2021/06/16 17:08:21 Reporting span 55dc4ae11da4685b:55dc4ae11da4685b:0000000000000000:1
{"level":"info","ts":1623863301.8859982,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenbtshl","app":"nse-discovery"}
{"level":"info","ts":1623863301.886054,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenn5mqx","app":"nse-discovery"}
{"level":"info","ts":1623863301.8860912,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green6bjtj","app":"nse-discovery"}
{"level":"info","ts":1623863301.8862996,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green6gqkr","app":"nse-discovery"}
{"level":"info","ts":1623863301.8863988,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623863301.8866992,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863301.886729,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863301.8867369,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member1, skipping endpoint 'green6bjtj'","app":"nse-discovery"}
{"level":"info","ts":1623863301.886743,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member1, skipping endpoint 'green6gqkr'","app":"nse-discovery"}
{"level":"info","ts":1623863301.8867493,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863301.886755,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863301.8867607,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863301.886768,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863301.886777,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863301.886785,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863301.8867946,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member1, skip comparing endpoint 'green6bjtj'","app":"nse-discovery"}
{"level":"info","ts":1623863301.8868175,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member1, skip comparing endpoint 'green6gqkr'","app":"nse-discovery"}
{"level":"info","ts":1623863301.886844,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623863301.886873,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623863301.8868828,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623863411.6216452,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenbtshl green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenbtshl 565898d5-67d3-4d88-8edc-3af9043d5462 2377 1 2021-06-16 17:04:45 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-2-control-plane} {RUNNING}} was updated with: &{{ } {greenbtshl green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenbtshl 565898d5-67d3-4d88-8edc-3af9043d5462 2377 1 2021-06-16 17:04:45 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-2-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623863411.622091,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenbtshl...","app":"nse-discovery"}
{"level":"info","ts":1623863411.6221347,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenn5mqx green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenn5mqx 7e5b3f21-b3b3-4764-80d9-ece427984980 2380 1 2021-06-16 17:04:46 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-2_vl3-nse-green-76bc7f4b96-8hv98 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-2-control-plane} {RUNNING}} was updated with: &{{ } {greenn5mqx green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenn5mqx 7e5b3f21-b3b3-4764-80d9-ece427984980 2380 1 2021-06-16 17:04:46 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-2_vl3-nse-green-76bc7f4b96-8hv98 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-2-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623863411.622157,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623863411.6221678,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-16T17:10:11Z" level=info msg="==--> discovery.FindNetworkService() span:46bbbaff0c2c2c51:46bbbaff0c2c2c51:0000000000000000:1"
time="2021-06-16T17:10:11Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=46bbbaff0c2c2c51:46bbbaff0c2c2c51:0000000000000000:1"
time="2021-06-16T17:10:11Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=46bbbaff0c2c2c51:46bbbaff0c2c2c51:0000000000000000:1"
time="2021-06-16T17:10:11Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:10:11Z" level=info msg="==----> initRegistryClient() span:46bbbaff0c2c2c51:3a6c064dc0f301e3:46bbbaff0c2c2c51:1"
time="2021-06-16T17:10:11Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:10:11Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:10:11Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="46bbbaff0c2c2c51:3a6c064dc0f301e3:46bbbaff0c2c2c51:1"
time="2021-06-16T17:10:11Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:10:11Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:10:11Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00052a840 {member1.com}:0xc00052a7c0 {member2.com}:0xc00052a8c0]}"
time="2021-06-16T17:10:11Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:10:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:11Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:10:11Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:10:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:10:11Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:10:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:10:11Z" level=info msg="Found 3 tlsconfigs. [0xc000578300 0xc000578480 0xc000578900]"
time="2021-06-16T17:10:11Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:16Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:10:16Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:16Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:10:16Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:10:16Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="46bbbaff0c2c2c51:3a6c064dc0f301e3:46bbbaff0c2c2c51:1"
2021/06/16 17:10:16 Reporting span 46bbbaff0c2c2c51:3a6c064dc0f301e3:46bbbaff0c2c2c51:1
{"level":"info","ts":1623863416.6573546,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:10:16Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=46bbbaff0c2c2c51:46bbbaff0c2c2c51:0000000000000000:1"
time="2021-06-16T17:10:16Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=46bbbaff0c2c2c51:46bbbaff0c2c2c51:0000000000000000:1"
2021/06/16 17:10:16 Reporting span 46bbbaff0c2c2c51:673378d818815eb2:46bbbaff0c2c2c51:1
time="2021-06-16T17:10:16Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=46bbbaff0c2c2c51:46bbbaff0c2c2c51:0000000000000000:1"
2021/06/16 17:10:16 Reporting span 46bbbaff0c2c2c51:46bbbaff0c2c2c51:0000000000000000:1
{"level":"info","ts":1623863416.6631668,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenbtshl","app":"nse-discovery"}
{"level":"info","ts":1623863416.6632051,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenn5mqx","app":"nse-discovery"}
{"level":"info","ts":1623863416.6632173,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623863416.6632283,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-16T17:10:16Z" level=info msg="==--> discovery.FindNetworkService() span:09d169980f986611:09d169980f986611:0000000000000000:1"
time="2021-06-16T17:10:16Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=09d169980f986611:09d169980f986611:0000000000000000:1"
time="2021-06-16T17:10:16Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=09d169980f986611:09d169980f986611:0000000000000000:1"
time="2021-06-16T17:10:16Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:10:16Z" level=info msg="==----> initRegistryClient() span:09d169980f986611:4b08ec8c1a2af5b1:09d169980f986611:1"
time="2021-06-16T17:10:16Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:10:16Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:10:16Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="09d169980f986611:4b08ec8c1a2af5b1:09d169980f986611:1"
time="2021-06-16T17:10:16Z" level=info msg="Trying to establish connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:10:16Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:10:16Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00052b600 {member1.com}:0xc00052b580 {member2.com}:0xc00052b680]}"
time="2021-06-16T17:10:16Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:10:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:16Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:10:16Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:10:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:10:16Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:10:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:10:16Z" level=info msg="Found 3 tlsconfigs. [0xc000579680 0xc000579800 0xc000579980]"
time="2021-06-16T17:10:16Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:16Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:10:16Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:10:16Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="09d169980f986611:4b08ec8c1a2af5b1:09d169980f986611:1"
2021/06/16 17:10:16 Reporting span 09d169980f986611:4b08ec8c1a2af5b1:09d169980f986611:1
{"level":"info","ts":1623863416.7110343,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:10:16Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=09d169980f986611:09d169980f986611:0000000000000000:1"
time="2021-06-16T17:10:16Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=09d169980f986611:09d169980f986611:0000000000000000:1"
2021/06/16 17:10:16 Reporting span 09d169980f986611:4c2e469d7a352b8b:09d169980f986611:1
time="2021-06-16T17:10:16Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=09d169980f986611:09d169980f986611:0000000000000000:1"
2021/06/16 17:10:16 Reporting span 09d169980f986611:09d169980f986611:0000000000000000:1
{"level":"info","ts":1623863416.7131238,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenbtshl","app":"nse-discovery"}
{"level":"info","ts":1623863416.713166,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenn5mqx","app":"nse-discovery"}
{"level":"info","ts":1623863416.7131789,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green6bjtj","app":"nse-discovery"}
{"level":"info","ts":1623863416.713189,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green6gqkr","app":"nse-discovery"}
{"level":"info","ts":1623863416.713199,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623863416.71332,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863416.713348,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863416.7133586,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member1, skipping endpoint 'green6bjtj'","app":"nse-discovery"}
{"level":"info","ts":1623863416.713379,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member1, skipping endpoint 'green6gqkr'","app":"nse-discovery"}
{"level":"info","ts":1623863416.7133904,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863416.713404,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863416.7134128,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863416.7134216,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863416.7134306,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863416.7134392,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863416.7134485,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member1, skip comparing endpoint 'green6bjtj'","app":"nse-discovery"}
{"level":"info","ts":1623863416.7134566,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member1, skip comparing endpoint 'green6gqkr'","app":"nse-discovery"}
{"level":"info","ts":1623863416.7134662,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623863416.713489,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623863416.7134988,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623863416.7135205,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenn5mqx...","app":"nse-discovery"}
{"level":"info","ts":1623863416.7135298,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623863416.7135396,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-16T17:10:16Z" level=info msg="==--> discovery.FindNetworkService() span:1508db3df2565ff5:1508db3df2565ff5:0000000000000000:1"
time="2021-06-16T17:10:16Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1508db3df2565ff5:1508db3df2565ff5:0000000000000000:1"
time="2021-06-16T17:10:16Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=1508db3df2565ff5:1508db3df2565ff5:0000000000000000:1"
time="2021-06-16T17:10:16Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:10:16Z" level=info msg="==----> initRegistryClient() span:1508db3df2565ff5:2edcc6ff9e875d9e:1508db3df2565ff5:1"
time="2021-06-16T17:10:16Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:10:16Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:10:16Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1508db3df2565ff5:2edcc6ff9e875d9e:1508db3df2565ff5:1"
time="2021-06-16T17:10:16Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:10:16Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:10:16Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0002e5a40 {member1.com}:0xc0002e5940 {member2.com}:0xc0002e59c0]}"
time="2021-06-16T17:10:16Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:10:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:16Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:10:16Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:10:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:10:16Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:10:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:10:16Z" level=info msg="Found 3 tlsconfigs. [0xc000414480 0xc000414600 0xc000414a80]"
time="2021-06-16T17:10:16Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:21Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:10:21Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:21Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:10:21Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:10:21Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="1508db3df2565ff5:2edcc6ff9e875d9e:1508db3df2565ff5:1"
2021/06/16 17:10:21 Reporting span 1508db3df2565ff5:2edcc6ff9e875d9e:1508db3df2565ff5:1
{"level":"info","ts":1623863421.7430851,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:10:21Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1508db3df2565ff5:1508db3df2565ff5:0000000000000000:1"
time="2021-06-16T17:10:21Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=1508db3df2565ff5:1508db3df2565ff5:0000000000000000:1"
2021/06/16 17:10:21 Reporting span 1508db3df2565ff5:39cda968dd85f37f:1508db3df2565ff5:1
time="2021-06-16T17:10:21Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1508db3df2565ff5:1508db3df2565ff5:0000000000000000:1"
2021/06/16 17:10:21 Reporting span 1508db3df2565ff5:1508db3df2565ff5:0000000000000000:1
{"level":"info","ts":1623863421.74836,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenbtshl","app":"nse-discovery"}
{"level":"info","ts":1623863421.7484074,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenn5mqx","app":"nse-discovery"}
{"level":"info","ts":1623863421.7484202,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623863421.748488,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-16T17:10:21Z" level=info msg="==--> discovery.FindNetworkService() span:15bdd96d7e1d824c:15bdd96d7e1d824c:0000000000000000:1"
time="2021-06-16T17:10:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=15bdd96d7e1d824c:15bdd96d7e1d824c:0000000000000000:1"
time="2021-06-16T17:10:21Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=15bdd96d7e1d824c:15bdd96d7e1d824c:0000000000000000:1"
time="2021-06-16T17:10:21Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:10:21Z" level=info msg="==----> initRegistryClient() span:15bdd96d7e1d824c:7c8472b2cf7bef0c:15bdd96d7e1d824c:1"
time="2021-06-16T17:10:21Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:10:21Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:10:21Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="15bdd96d7e1d824c:7c8472b2cf7bef0c:15bdd96d7e1d824c:1"
time="2021-06-16T17:10:21Z" level=info msg="Trying to establish connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:10:21Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:10:21Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00052a100 {member1.com}:0xc00052a080 {member2.com}:0xc00052a200]}"
time="2021-06-16T17:10:21Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:10:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:21Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:10:21Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:10:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:10:21Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:10:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:10:21Z" level=info msg="Found 3 tlsconfigs. [0xc000386180 0xc000386300 0xc000386480]"
time="2021-06-16T17:10:21Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:26Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:10:26Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:31Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:10:31Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:36Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:10:36Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-16T17:10:36Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-16T17:10:51Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-16T17:10:51Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="15bdd96d7e1d824c:7c8472b2cf7bef0c:15bdd96d7e1d824c:1"
2021/06/16 17:10:51 Reporting span 15bdd96d7e1d824c:7c8472b2cf7bef0c:15bdd96d7e1d824c:1
2021/06/16 17:10:51 Reporting span 15bdd96d7e1d824c:15bdd96d7e1d824c:0000000000000000:1
{"level":"info","ts":1623863451.7497213,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenn5mqx green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenn5mqx 7e5b3f21-b3b3-4764-80d9-ece427984980 2380 1 2021-06-16 17:04:46 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-2_vl3-nse-green-76bc7f4b96-8hv98 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-2-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623863451.755042,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenn5mqx...","app":"nse-discovery"}
{"level":"info","ts":1623863451.7550888,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623863451.7551017,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-16T17:10:51Z" level=info msg="==--> discovery.FindNetworkService() span:2c066599c6e10374:2c066599c6e10374:0000000000000000:1"
time="2021-06-16T17:10:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2c066599c6e10374:2c066599c6e10374:0000000000000000:1"
time="2021-06-16T17:10:51Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=2c066599c6e10374:2c066599c6e10374:0000000000000000:1"
time="2021-06-16T17:10:51Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:10:51Z" level=info msg="==----> initRegistryClient() span:2c066599c6e10374:6d4202293c2b1a5b:2c066599c6e10374:1"
time="2021-06-16T17:10:51Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:10:51Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:10:51Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2c066599c6e10374:6d4202293c2b1a5b:2c066599c6e10374:1"
time="2021-06-16T17:10:51Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:10:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:10:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0002e5780 {member1.com}:0xc0002e53c0 {member2.com}:0xc0002e5800]}"
time="2021-06-16T17:10:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:10:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:10:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:10:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:10:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:10:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:10:51Z" level=info msg="Found 3 tlsconfigs. [0xc000415b00 0xc000415c80 0xc000415e00]"
time="2021-06-16T17:10:51Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:56Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:10:56Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:56Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:10:56Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:10:56Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="2c066599c6e10374:6d4202293c2b1a5b:2c066599c6e10374:1"
2021/06/16 17:10:56 Reporting span 2c066599c6e10374:6d4202293c2b1a5b:2c066599c6e10374:1
{"level":"info","ts":1623863456.7874494,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:10:56Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2c066599c6e10374:2c066599c6e10374:0000000000000000:1"
time="2021-06-16T17:10:56Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=2c066599c6e10374:2c066599c6e10374:0000000000000000:1"
2021/06/16 17:10:56 Reporting span 2c066599c6e10374:07463da159dd16ce:2c066599c6e10374:1
time="2021-06-16T17:10:56Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2c066599c6e10374:2c066599c6e10374:0000000000000000:1"
2021/06/16 17:10:56 Reporting span 2c066599c6e10374:2c066599c6e10374:0000000000000000:1
{"level":"info","ts":1623863456.7936904,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenbtshl","app":"nse-discovery"}
{"level":"info","ts":1623863456.7938263,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenn5mqx","app":"nse-discovery"}
{"level":"info","ts":1623863456.7938387,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623863456.7938504,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-16T17:10:56Z" level=info msg="==--> discovery.FindNetworkService() span:04a6dcbe40b843b5:04a6dcbe40b843b5:0000000000000000:1"
time="2021-06-16T17:10:56Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=04a6dcbe40b843b5:04a6dcbe40b843b5:0000000000000000:1"
time="2021-06-16T17:10:56Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=04a6dcbe40b843b5:04a6dcbe40b843b5:0000000000000000:1"
time="2021-06-16T17:10:56Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:10:56Z" level=info msg="==----> initRegistryClient() span:04a6dcbe40b843b5:1c1a058637236f29:04a6dcbe40b843b5:1"
time="2021-06-16T17:10:56Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:11:06Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:11:06Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="04a6dcbe40b843b5:1c1a058637236f29:04a6dcbe40b843b5:1"
time="2021-06-16T17:11:06Z" level=info msg="Trying to establish connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:11:06Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:11:06Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001f5380 {member1.com}:0xc0001f5300 {member2.com}:0xc0001f5400]}"
time="2021-06-16T17:11:06Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:11:06Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:06Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:11:06Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:11:06Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:06Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:11:06Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:11:06Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:06Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:11:06Z" level=info msg="Found 3 tlsconfigs. [0xc000134000 0xc000134180 0xc000134300]"
time="2021-06-16T17:11:06Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:11:11Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:11:11Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:11:16Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:11:16Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:11:21Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:11:21Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-16T17:11:21Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-16T17:11:26Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-16T17:11:26Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="04a6dcbe40b843b5:1c1a058637236f29:04a6dcbe40b843b5:1"
2021/06/16 17:11:26 Reporting span 04a6dcbe40b843b5:1c1a058637236f29:04a6dcbe40b843b5:1
2021/06/16 17:11:26 Reporting span 04a6dcbe40b843b5:04a6dcbe40b843b5:0000000000000000:1
{"level":"info","ts":1623863486.794516,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenn5mqx green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenn5mqx 7e5b3f21-b3b3-4764-80d9-ece427984980 2380 1 2021-06-16 17:04:46 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-2_vl3-nse-green-76bc7f4b96-8hv98 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-2-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623863486.8047214,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenn5mqx...","app":"nse-discovery"}
{"level":"info","ts":1623863486.804815,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623863486.8048275,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-16T17:11:26Z" level=info msg="==--> discovery.FindNetworkService() span:1a21d6947f3e819e:1a21d6947f3e819e:0000000000000000:1"
time="2021-06-16T17:11:26Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1a21d6947f3e819e:1a21d6947f3e819e:0000000000000000:1"
time="2021-06-16T17:11:26Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=1a21d6947f3e819e:1a21d6947f3e819e:0000000000000000:1"
time="2021-06-16T17:11:26Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:11:26Z" level=info msg="==----> initRegistryClient() span:1a21d6947f3e819e:05f6effec31b8c71:1a21d6947f3e819e:1"
time="2021-06-16T17:11:26Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:11:26Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:11:26Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1a21d6947f3e819e:05f6effec31b8c71:1a21d6947f3e819e:1"
time="2021-06-16T17:11:26Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:11:26Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:11:26Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000989e00 {member1.com}:0xc000989d00 {member2.com}:0xc000989d80]}"
time="2021-06-16T17:11:26Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:11:26Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:26Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:11:26Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:11:26Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:26Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:11:26Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:11:26Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:26Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:11:26Z" level=info msg="Found 3 tlsconfigs. [0xc0009c2a80 0xc0009c2c00 0xc0009c2d80]"
time="2021-06-16T17:11:26Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:11:31Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:11:31Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:11:31Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:11:31Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:11:31Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="1a21d6947f3e819e:05f6effec31b8c71:1a21d6947f3e819e:1"
2021/06/16 17:11:31 Reporting span 1a21d6947f3e819e:05f6effec31b8c71:1a21d6947f3e819e:1
{"level":"info","ts":1623863491.8391397,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:11:31Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1a21d6947f3e819e:1a21d6947f3e819e:0000000000000000:1"
time="2021-06-16T17:11:31Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=1a21d6947f3e819e:1a21d6947f3e819e:0000000000000000:1"
2021/06/16 17:11:31 Reporting span 1a21d6947f3e819e:4fd7f6e07ecc506f:1a21d6947f3e819e:1
time="2021-06-16T17:11:31Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1a21d6947f3e819e:1a21d6947f3e819e:0000000000000000:1"
2021/06/16 17:11:31 Reporting span 1a21d6947f3e819e:1a21d6947f3e819e:0000000000000000:1
{"level":"info","ts":1623863491.846281,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenbtshl","app":"nse-discovery"}
{"level":"info","ts":1623863491.846433,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenn5mqx","app":"nse-discovery"}
{"level":"info","ts":1623863491.8464906,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623863491.8467553,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-16T17:11:31Z" level=info msg="==--> discovery.FindNetworkService() span:38d23a3127396f6b:38d23a3127396f6b:0000000000000000:1"
time="2021-06-16T17:11:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=38d23a3127396f6b:38d23a3127396f6b:0000000000000000:1"
time="2021-06-16T17:11:31Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=38d23a3127396f6b:38d23a3127396f6b:0000000000000000:1"
time="2021-06-16T17:11:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:11:31Z" level=info msg="==----> initRegistryClient() span:38d23a3127396f6b:724ee032bf4294f5:38d23a3127396f6b:1"
time="2021-06-16T17:11:31Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:11:31Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:11:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="38d23a3127396f6b:724ee032bf4294f5:38d23a3127396f6b:1"
time="2021-06-16T17:11:31Z" level=info msg="Trying to establish connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:11:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:11:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001f4a80 {member1.com}:0xc0001f48c0 {member2.com}:0xc0001f4a00]}"
time="2021-06-16T17:11:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:11:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:11:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:11:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:11:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:11:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:11:31Z" level=info msg="Found 3 tlsconfigs. [0xc0009c2780 0xc0009c2900 0xc0009c2f00]"
time="2021-06-16T17:11:31Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:11:36Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:11:36Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:11:41Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:11:41Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:11:46Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:11:46Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-16T17:11:46Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-16T17:12:01Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-16T17:12:01Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="38d23a3127396f6b:724ee032bf4294f5:38d23a3127396f6b:1"
2021/06/16 17:12:01 Reporting span 38d23a3127396f6b:724ee032bf4294f5:38d23a3127396f6b:1
2021/06/16 17:12:01 Reporting span 38d23a3127396f6b:38d23a3127396f6b:0000000000000000:1
{"level":"info","ts":1623863521.8475416,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenn5mqx green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenn5mqx 7e5b3f21-b3b3-4764-80d9-ece427984980 2380 1 2021-06-16 17:04:46 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-2_vl3-nse-green-76bc7f4b96-8hv98 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-2-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623863521.8677697,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenn5mqx...","app":"nse-discovery"}
{"level":"info","ts":1623863521.8678632,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623863521.8678768,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-16T17:12:01Z" level=info msg="==--> discovery.FindNetworkService() span:2ff94ac4197bf182:2ff94ac4197bf182:0000000000000000:1"
time="2021-06-16T17:12:01Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2ff94ac4197bf182:2ff94ac4197bf182:0000000000000000:1"
time="2021-06-16T17:12:01Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=2ff94ac4197bf182:2ff94ac4197bf182:0000000000000000:1"
time="2021-06-16T17:12:01Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:12:01Z" level=info msg="==----> initRegistryClient() span:2ff94ac4197bf182:365d64d2e102e693:2ff94ac4197bf182:1"
time="2021-06-16T17:12:01Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:12:01Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:12:01Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2ff94ac4197bf182:365d64d2e102e693:2ff94ac4197bf182:1"
time="2021-06-16T17:12:01Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:12:01Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:12:01Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0002e5800 {member1.com}:0xc0002e53c0 {member2.com}:0xc0002e5780]}"
time="2021-06-16T17:12:01Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:12:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:01Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:12:01Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:12:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:01Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:12:01Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:12:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:01Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:12:01Z" level=info msg="Found 3 tlsconfigs. [0xc000389080 0xc000389500 0xc000389680]"
time="2021-06-16T17:12:01Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:06Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:12:06Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:06Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:12:06Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:12:06Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="2ff94ac4197bf182:365d64d2e102e693:2ff94ac4197bf182:1"
2021/06/16 17:12:06 Reporting span 2ff94ac4197bf182:365d64d2e102e693:2ff94ac4197bf182:1
{"level":"info","ts":1623863526.905461,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:12:06Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2ff94ac4197bf182:2ff94ac4197bf182:0000000000000000:1"
time="2021-06-16T17:12:06Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=2ff94ac4197bf182:2ff94ac4197bf182:0000000000000000:1"
2021/06/16 17:12:06 Reporting span 2ff94ac4197bf182:2453fe046ab03717:2ff94ac4197bf182:1
time="2021-06-16T17:12:06Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2ff94ac4197bf182:2ff94ac4197bf182:0000000000000000:1"
2021/06/16 17:12:06 Reporting span 2ff94ac4197bf182:2ff94ac4197bf182:0000000000000000:1
{"level":"info","ts":1623863526.9112182,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenbtshl","app":"nse-discovery"}
{"level":"info","ts":1623863526.9112878,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenn5mqx","app":"nse-discovery"}
{"level":"info","ts":1623863526.9113278,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623863526.9113922,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-16T17:12:06Z" level=info msg="==--> discovery.FindNetworkService() span:772cd2f174bdaeb2:772cd2f174bdaeb2:0000000000000000:1"
time="2021-06-16T17:12:06Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=772cd2f174bdaeb2:772cd2f174bdaeb2:0000000000000000:1"
time="2021-06-16T17:12:06Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=772cd2f174bdaeb2:772cd2f174bdaeb2:0000000000000000:1"
time="2021-06-16T17:12:06Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:12:06Z" level=info msg="==----> initRegistryClient() span:772cd2f174bdaeb2:535bd87dbfcab4b6:772cd2f174bdaeb2:1"
time="2021-06-16T17:12:06Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
{"level":"info","ts":1623863531.6218255,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenbtshl green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenbtshl 565898d5-67d3-4d88-8edc-3af9043d5462 2377 1 2021-06-16 17:04:45 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-2-control-plane} {RUNNING}} was updated with: &{{ } {greenbtshl green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenbtshl 565898d5-67d3-4d88-8edc-3af9043d5462 2377 1 2021-06-16 17:04:45 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-2-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623863531.6219332,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenn5mqx green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenn5mqx 7e5b3f21-b3b3-4764-80d9-ece427984980 2380 1 2021-06-16 17:04:46 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-2_vl3-nse-green-76bc7f4b96-8hv98 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-2-control-plane} {RUNNING}} was updated with: &{{ } {greenn5mqx green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenn5mqx 7e5b3f21-b3b3-4764-80d9-ece427984980 2380 1 2021-06-16 17:04:46 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-2_vl3-nse-green-76bc7f4b96-8hv98 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-2-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-16T17:12:21Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:12:21Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="772cd2f174bdaeb2:535bd87dbfcab4b6:772cd2f174bdaeb2:1"
time="2021-06-16T17:12:21Z" level=info msg="Trying to establish connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:12:21Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:12:21Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001f45c0 {member1.com}:0xc0001f4540 {member2.com}:0xc0001f4640]}"
time="2021-06-16T17:12:21Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:12:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:21Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:12:21Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:12:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:12:21Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:12:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:12:21Z" level=info msg="Found 3 tlsconfigs. [0xc000676f00 0xc000677380 0xc000677500]"
time="2021-06-16T17:12:21Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:22Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:12:22Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:12:32Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="772cd2f174bdaeb2:535bd87dbfcab4b6:772cd2f174bdaeb2:1"
2021/06/16 17:12:32 Reporting span 772cd2f174bdaeb2:535bd87dbfcab4b6:772cd2f174bdaeb2:1
{"level":"info","ts":1623863552.1041825,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:12:32Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=772cd2f174bdaeb2:772cd2f174bdaeb2:0000000000000000:1"
time="2021-06-16T17:12:32Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=772cd2f174bdaeb2:772cd2f174bdaeb2:0000000000000000:1"
2021/06/16 17:12:32 Reporting span 772cd2f174bdaeb2:5dd7d4db77936f10:772cd2f174bdaeb2:1
time="2021-06-16T17:12:32Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=772cd2f174bdaeb2:772cd2f174bdaeb2:0000000000000000:1"
2021/06/16 17:12:32 Reporting span 772cd2f174bdaeb2:772cd2f174bdaeb2:0000000000000000:1
{"level":"info","ts":1623863552.107121,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenbtshl","app":"nse-discovery"}
{"level":"info","ts":1623863552.1071515,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenn5mqx","app":"nse-discovery"}
{"level":"info","ts":1623863552.107165,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green6bjtj","app":"nse-discovery"}
{"level":"info","ts":1623863552.107178,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green6gqkr","app":"nse-discovery"}
{"level":"info","ts":1623863552.107189,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623863552.1072013,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863552.1072116,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863552.1072202,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member1, skipping endpoint 'green6bjtj'","app":"nse-discovery"}
{"level":"info","ts":1623863552.1072295,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member1, skipping endpoint 'green6gqkr'","app":"nse-discovery"}
{"level":"info","ts":1623863552.1072388,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863552.1072717,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863552.1072822,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863552.1073084,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863552.1073186,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863552.107352,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863552.1073623,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member1, skip comparing endpoint 'green6bjtj'","app":"nse-discovery"}
{"level":"info","ts":1623863552.1073859,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member1, skip comparing endpoint 'green6gqkr'","app":"nse-discovery"}
{"level":"info","ts":1623863552.1073956,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623863552.1074219,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623863552.1074328,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623863552.1074493,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenbtshl...","app":"nse-discovery"}
{"level":"info","ts":1623863552.1074603,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623863552.1074705,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-16T17:12:32Z" level=info msg="==--> discovery.FindNetworkService() span:6f94e8dcce23dd72:6f94e8dcce23dd72:0000000000000000:1"
time="2021-06-16T17:12:32Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6f94e8dcce23dd72:6f94e8dcce23dd72:0000000000000000:1"
time="2021-06-16T17:12:32Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=6f94e8dcce23dd72:6f94e8dcce23dd72:0000000000000000:1"
time="2021-06-16T17:12:32Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:12:32Z" level=info msg="==----> initRegistryClient() span:6f94e8dcce23dd72:203d55b11c35285b:6f94e8dcce23dd72:1"
time="2021-06-16T17:12:32Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:12:32Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:12:32Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6f94e8dcce23dd72:203d55b11c35285b:6f94e8dcce23dd72:1"
time="2021-06-16T17:12:32Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:12:32Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:12:32Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0002e5040 {member1.com}:0xc0002e4040 {member2.com}:0xc0002e40c0]}"
time="2021-06-16T17:12:32Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:12:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:32Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:12:32Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:12:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:12:32Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:12:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:12:32Z" level=info msg="Found 3 tlsconfigs. [0xc000135b00 0xc000135c80 0xc000135e00]"
time="2021-06-16T17:12:32Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:37Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:12:37Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:37Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:12:37Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:12:37Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="6f94e8dcce23dd72:203d55b11c35285b:6f94e8dcce23dd72:1"
2021/06/16 17:12:37 Reporting span 6f94e8dcce23dd72:203d55b11c35285b:6f94e8dcce23dd72:1
{"level":"info","ts":1623863557.1385694,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:12:37Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6f94e8dcce23dd72:6f94e8dcce23dd72:0000000000000000:1"
time="2021-06-16T17:12:37Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=6f94e8dcce23dd72:6f94e8dcce23dd72:0000000000000000:1"
2021/06/16 17:12:37 Reporting span 6f94e8dcce23dd72:4f68b7f520e93f1d:6f94e8dcce23dd72:1
time="2021-06-16T17:12:37Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6f94e8dcce23dd72:6f94e8dcce23dd72:0000000000000000:1"
2021/06/16 17:12:37 Reporting span 6f94e8dcce23dd72:6f94e8dcce23dd72:0000000000000000:1
{"level":"info","ts":1623863557.1445801,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenbtshl","app":"nse-discovery"}
{"level":"info","ts":1623863557.1446326,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenn5mqx","app":"nse-discovery"}
{"level":"info","ts":1623863557.144663,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623863557.144675,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-16T17:12:37Z" level=info msg="==--> discovery.FindNetworkService() span:50560ba2c1ad1d70:50560ba2c1ad1d70:0000000000000000:1"
time="2021-06-16T17:12:37Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=50560ba2c1ad1d70:50560ba2c1ad1d70:0000000000000000:1"
time="2021-06-16T17:12:37Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=50560ba2c1ad1d70:50560ba2c1ad1d70:0000000000000000:1"
time="2021-06-16T17:12:37Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:12:37Z" level=info msg="==----> initRegistryClient() span:50560ba2c1ad1d70:24ee2d1b5138c6b0:50560ba2c1ad1d70:1"
time="2021-06-16T17:12:37Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:12:52Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:12:52Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="50560ba2c1ad1d70:24ee2d1b5138c6b0:50560ba2c1ad1d70:1"
time="2021-06-16T17:12:52Z" level=info msg="Trying to establish connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:12:52Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:12:52Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0005a0100 {member1.com}:0xc0005a0080 {member2.com}:0xc0005a0180]}"
time="2021-06-16T17:12:52Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:12:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:52Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:12:52Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:12:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:12:52Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:12:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:12:52Z" level=info msg="Found 3 tlsconfigs. [0xc0009c2000 0xc0009c2480 0xc0009c2780]"
time="2021-06-16T17:12:52Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:57Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:12:57Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:13:02Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:13:02Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:13:07Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:13:07Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-16T17:13:07Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-16T17:13:07Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-16T17:13:07Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="50560ba2c1ad1d70:24ee2d1b5138c6b0:50560ba2c1ad1d70:1"
2021/06/16 17:13:07 Reporting span 50560ba2c1ad1d70:24ee2d1b5138c6b0:50560ba2c1ad1d70:1
2021/06/16 17:13:07 Reporting span 50560ba2c1ad1d70:50560ba2c1ad1d70:0000000000000000:1
{"level":"info","ts":1623863587.21505,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenbtshl green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenbtshl 565898d5-67d3-4d88-8edc-3af9043d5462 2377 1 2021-06-16 17:04:45 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-2-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623863587.215159,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenn5mqx...","app":"nse-discovery"}
{"level":"info","ts":1623863587.2152102,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623863587.2152412,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-16T17:13:07Z" level=info msg="==--> discovery.FindNetworkService() span:67b85409e10d7259:67b85409e10d7259:0000000000000000:1"
time="2021-06-16T17:13:07Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=67b85409e10d7259:67b85409e10d7259:0000000000000000:1"
time="2021-06-16T17:13:07Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=67b85409e10d7259:67b85409e10d7259:0000000000000000:1"
time="2021-06-16T17:13:07Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:13:07Z" level=info msg="==----> initRegistryClient() span:67b85409e10d7259:00e9b83a2c829a65:67b85409e10d7259:1"
time="2021-06-16T17:13:07Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:13:07Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:13:07Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="67b85409e10d7259:00e9b83a2c829a65:67b85409e10d7259:1"
time="2021-06-16T17:13:07Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:13:07Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:13:07Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0005a1d80 {member1.com}:0xc0005a1c80 {member2.com}:0xc0005a1d00]}"
time="2021-06-16T17:13:07Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:13:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:07Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:13:07Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:13:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:13:07Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:13:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:13:07Z" level=info msg="Found 3 tlsconfigs. [0xc0009c3500 0xc0009c3680 0xc0009c3800]"
time="2021-06-16T17:13:07Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:13:12Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:13:12Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:13:12Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:13:12Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:13:12Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="67b85409e10d7259:00e9b83a2c829a65:67b85409e10d7259:1"
2021/06/16 17:13:12 Reporting span 67b85409e10d7259:00e9b83a2c829a65:67b85409e10d7259:1
{"level":"info","ts":1623863592.2477477,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:13:12Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=67b85409e10d7259:67b85409e10d7259:0000000000000000:1"
time="2021-06-16T17:13:12Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=67b85409e10d7259:67b85409e10d7259:0000000000000000:1"
2021/06/16 17:13:12 Reporting span 67b85409e10d7259:3fa397965aac3d3e:67b85409e10d7259:1
time="2021-06-16T17:13:12Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=67b85409e10d7259:67b85409e10d7259:0000000000000000:1"
2021/06/16 17:13:12 Reporting span 67b85409e10d7259:67b85409e10d7259:0000000000000000:1
{"level":"info","ts":1623863592.2527506,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenbtshl","app":"nse-discovery"}
{"level":"info","ts":1623863592.2527814,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenn5mqx","app":"nse-discovery"}
{"level":"info","ts":1623863592.2527952,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623863592.2528403,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-16T17:13:12Z" level=info msg="==--> discovery.FindNetworkService() span:0c0747dd2a896d9b:0c0747dd2a896d9b:0000000000000000:1"
time="2021-06-16T17:13:12Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=0c0747dd2a896d9b:0c0747dd2a896d9b:0000000000000000:1"
time="2021-06-16T17:13:12Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=0c0747dd2a896d9b:0c0747dd2a896d9b:0000000000000000:1"
time="2021-06-16T17:13:12Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:13:12Z" level=info msg="==----> initRegistryClient() span:0c0747dd2a896d9b:1d4ce3a301929f3e:0c0747dd2a896d9b:1"
time="2021-06-16T17:13:12Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:13:12Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:13:12Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="0c0747dd2a896d9b:1d4ce3a301929f3e:0c0747dd2a896d9b:1"
time="2021-06-16T17:13:12Z" level=info msg="Trying to establish connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:13:12Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:13:12Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004460c0 {member1.com}:0xc000446040 {member2.com}:0xc000446140]}"
time="2021-06-16T17:13:12Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:13:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:12Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:13:12Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:13:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:12Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:13:12Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:13:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:12Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:13:12Z" level=info msg="Found 3 tlsconfigs. [0xc000389e00 0xc0007ae000 0xc0007ae180]"
time="2021-06-16T17:13:12Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:13:12Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:13:12Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:13:12Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="0c0747dd2a896d9b:1d4ce3a301929f3e:0c0747dd2a896d9b:1"
2021/06/16 17:13:12 Reporting span 0c0747dd2a896d9b:1d4ce3a301929f3e:0c0747dd2a896d9b:1
{"level":"info","ts":1623863592.459234,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:13:12Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=0c0747dd2a896d9b:0c0747dd2a896d9b:0000000000000000:1"
time="2021-06-16T17:13:12Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=0c0747dd2a896d9b:0c0747dd2a896d9b:0000000000000000:1"
2021/06/16 17:13:12 Reporting span 0c0747dd2a896d9b:0119d27d643f486d:0c0747dd2a896d9b:1
time="2021-06-16T17:13:12Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=0c0747dd2a896d9b:0c0747dd2a896d9b:0000000000000000:1"
2021/06/16 17:13:12 Reporting span 0c0747dd2a896d9b:0c0747dd2a896d9b:0000000000000000:1
{"level":"info","ts":1623863592.4625762,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenbtshl","app":"nse-discovery"}
{"level":"info","ts":1623863592.462654,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenn5mqx","app":"nse-discovery"}
{"level":"info","ts":1623863592.4626775,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green6bjtj","app":"nse-discovery"}
{"level":"info","ts":1623863592.4626884,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green6gqkr","app":"nse-discovery"}
{"level":"info","ts":1623863592.4626985,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623863592.4627306,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863592.462741,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863592.4627655,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member1, skipping endpoint 'green6bjtj'","app":"nse-discovery"}
{"level":"info","ts":1623863592.4627757,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member1, skipping endpoint 'green6gqkr'","app":"nse-discovery"}
{"level":"info","ts":1623863592.462787,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863592.4627955,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863592.462822,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863592.4628325,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863592.4628413,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863592.4628499,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863592.4628587,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member1, skip comparing endpoint 'green6bjtj'","app":"nse-discovery"}
{"level":"info","ts":1623863592.4628844,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member1, skip comparing endpoint 'green6gqkr'","app":"nse-discovery"}
{"level":"info","ts":1623863592.4628947,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623863592.4629245,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623863592.462934,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623863592.4629626,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenbtshl...","app":"nse-discovery"}
{"level":"info","ts":1623863592.4629738,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623863592.4629831,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-16T17:13:12Z" level=info msg="==--> discovery.FindNetworkService() span:0a3246c8d33da8cf:0a3246c8d33da8cf:0000000000000000:1"
time="2021-06-16T17:13:12Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=0a3246c8d33da8cf:0a3246c8d33da8cf:0000000000000000:1"
time="2021-06-16T17:13:12Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=0a3246c8d33da8cf:0a3246c8d33da8cf:0000000000000000:1"
time="2021-06-16T17:13:12Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:13:12Z" level=info msg="==----> initRegistryClient() span:0a3246c8d33da8cf:6ad5df29988136a5:0a3246c8d33da8cf:1"
time="2021-06-16T17:13:12Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:13:12Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:13:12Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="0a3246c8d33da8cf:6ad5df29988136a5:0a3246c8d33da8cf:1"
time="2021-06-16T17:13:12Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-16T17:13:12Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:13:12Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000446bc0 {member1.com}:0xc000446ac0 {member2.com}:0xc000446b40]}"
time="2021-06-16T17:13:12Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:13:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:12Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:13:12Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:13:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:12Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:13:12Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:13:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:12Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:13:12Z" level=info msg="Found 3 tlsconfigs. [0xc0007ae900 0xc0007aec00 0xc0007aed80]"
time="2021-06-16T17:13:12Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:13:17Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:13:17Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:13:17Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:13:17Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:13:17Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="0a3246c8d33da8cf:6ad5df29988136a5:0a3246c8d33da8cf:1"
2021/06/16 17:13:17 Reporting span 0a3246c8d33da8cf:6ad5df29988136a5:0a3246c8d33da8cf:1
{"level":"info","ts":1623863597.492506,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:13:17Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=0a3246c8d33da8cf:0a3246c8d33da8cf:0000000000000000:1"
time="2021-06-16T17:13:17Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=0a3246c8d33da8cf:0a3246c8d33da8cf:0000000000000000:1"
2021/06/16 17:13:17 Reporting span 0a3246c8d33da8cf:7594d488aae2021c:0a3246c8d33da8cf:1
time="2021-06-16T17:13:17Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=0a3246c8d33da8cf:0a3246c8d33da8cf:0000000000000000:1"
2021/06/16 17:13:17 Reporting span 0a3246c8d33da8cf:0a3246c8d33da8cf:0000000000000000:1
{"level":"info","ts":1623863597.497796,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenbtshl","app":"nse-discovery"}
{"level":"info","ts":1623863597.4978921,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenn5mqx","app":"nse-discovery"}
{"level":"info","ts":1623863597.4979253,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623863597.4979389,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-16T17:13:17Z" level=info msg="==--> discovery.FindNetworkService() span:5cf5179f66bb9408:5cf5179f66bb9408:0000000000000000:1"
time="2021-06-16T17:13:17Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=5cf5179f66bb9408:5cf5179f66bb9408:0000000000000000:1"
time="2021-06-16T17:13:17Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=5cf5179f66bb9408:5cf5179f66bb9408:0000000000000000:1"
time="2021-06-16T17:13:17Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:13:17Z" level=info msg="==----> initRegistryClient() span:5cf5179f66bb9408:59c8f09df0723682:5cf5179f66bb9408:1"
time="2021-06-16T17:13:17Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:13:17Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:13:17Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5cf5179f66bb9408:59c8f09df0723682:5cf5179f66bb9408:1"
time="2021-06-16T17:13:17Z" level=info msg="Trying to establish connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-16T17:13:17Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:13:17Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001f5400 {member1.com}:0xc0001f5280 {member2.com}:0xc0001f54c0]}"
time="2021-06-16T17:13:17Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:13:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:17Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:13:17Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:13:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:17Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:13:17Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:13:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:17Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:13:17Z" level=info msg="Found 3 tlsconfigs. [0xc000134480 0xc000134600 0xc000134780]"
time="2021-06-16T17:13:17Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0xca3d80 GetConfigForClient:<nil> VerifyPeerCertificate:0xca3e00 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:13:17Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:13:17Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:13:17Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="5cf5179f66bb9408:59c8f09df0723682:5cf5179f66bb9408:1"
2021/06/16 17:13:17 Reporting span 5cf5179f66bb9408:59c8f09df0723682:5cf5179f66bb9408:1
{"level":"info","ts":1623863597.693187,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-16T17:13:17Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5cf5179f66bb9408:5cf5179f66bb9408:0000000000000000:1"
time="2021-06-16T17:13:17Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=5cf5179f66bb9408:5cf5179f66bb9408:0000000000000000:1"
2021/06/16 17:13:17 Reporting span 5cf5179f66bb9408:5a9351fc6837418d:5cf5179f66bb9408:1
time="2021-06-16T17:13:17Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5cf5179f66bb9408:5cf5179f66bb9408:0000000000000000:1"
2021/06/16 17:13:17 Reporting span 5cf5179f66bb9408:5cf5179f66bb9408:0000000000000000:1
{"level":"info","ts":1623863597.6975288,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenbtshl","app":"nse-discovery"}
{"level":"info","ts":1623863597.6975603,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenn5mqx","app":"nse-discovery"}
{"level":"info","ts":1623863597.6975708,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green6bjtj","app":"nse-discovery"}
{"level":"info","ts":1623863597.69758,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green6gqkr","app":"nse-discovery"}
{"level":"info","ts":1623863597.6975892,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623863597.6976042,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863597.6976132,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863597.6976225,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member1, skipping endpoint 'green6bjtj'","app":"nse-discovery"}
{"level":"info","ts":1623863597.6976433,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member1, skipping endpoint 'green6gqkr'","app":"nse-discovery"}
{"level":"info","ts":1623863597.6976519,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863597.6976604,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863597.6976717,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863597.6976805,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member1, adding endpoint 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863597.6976895,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenbtshl'","app":"nse-discovery"}
{"level":"info","ts":1623863597.6976967,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member1, endpoint match 'greenn5mqx'","app":"nse-discovery"}
{"level":"info","ts":1623863597.6977093,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member1, skip comparing endpoint 'green6bjtj'","app":"nse-discovery"}
{"level":"info","ts":1623863597.6977184,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member1, skip comparing endpoint 'green6gqkr'","app":"nse-discovery"}
{"level":"info","ts":1623863597.6977277,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623863597.6977365,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623863597.697745,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
==== END logs for container wcm-nse-discovery of pod wcm-system/wcm-nse-discovery-6fd76df87f-8h8n4 ====
