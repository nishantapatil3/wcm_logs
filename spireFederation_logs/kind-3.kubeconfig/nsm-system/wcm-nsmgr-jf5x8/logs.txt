==== START logs for container wcm-nsmgr of pod nsm-system/wcm-nsmgr-jf5x8 ====
time="2021-06-16T17:03:16Z" level=info msg="Starting nsmdp-k8s..."
time="2021-06-16T17:03:16Z" level=info msg="Version v1.0.1-rc.2-8-g6913a73f"
time="2021-06-16T17:03:16Z" level=info msg="All env variables:"
time="2021-06-16T17:03:16Z" level=info msg="TRACER_ENABLED=true"
time="2021-06-16T17:03:16Z" level=info msg="JAEGER_AGENT_PORT=6831"
time="2021-06-16T17:03:16Z" level=info msg="WCM_PROXY_NSMGR_PORT_5006_TCP=tcp://10.100.122.189:5006"
time="2021-06-16T17:03:16Z" level=info msg="WCM_PROXY_NSMGR_PORT=tcp://10.100.122.189:5005"
time="2021-06-16T17:03:16Z" level=info msg="WCM_PROXY_NSMGR_SERVICE_PORT=5005"
time="2021-06-16T17:03:16Z" level=info msg="KUBERNETES_SERVICE_PORT=443"
time="2021-06-16T17:03:16Z" level=info msg="KUBERNETES_PORT=tcp://10.96.0.1:443"
time="2021-06-16T17:03:16Z" level=info msg="WCM_JAEGER_PORT_6831_UDP=udp://10.100.4.133:6831"
time="2021-06-16T17:03:16Z" level=info msg="HOSTNAME=wcm-nsmgr-jf5x8"
time="2021-06-16T17:03:16Z" level=info msg="SHLVL=1"
time="2021-06-16T17:03:16Z" level=info msg="HOME=/root"
time="2021-06-16T17:03:16Z" level=info msg="WCM_NSM_ADMISSION_WEBHOOK_PORT_443_TCP_ADDR=10.102.238.54"
time="2021-06-16T17:03:16Z" level=info msg="WCM_JAEGER_PORT_16686_TCP_ADDR=10.100.4.133"
time="2021-06-16T17:03:16Z" level=info msg="WCM_JAEGER_PORT_16686_TCP_PORT=16686"
time="2021-06-16T17:03:16Z" level=info msg="WCM_NSM_ADMISSION_WEBHOOK_PORT_443_TCP_PORT=443"
time="2021-06-16T17:03:16Z" level=info msg="WCM_NSM_ADMISSION_WEBHOOK_PORT_443_TCP_PROTO=tcp"
time="2021-06-16T17:03:16Z" level=info msg="WCM_JAEGER_PORT_16686_TCP_PROTO=tcp"
time="2021-06-16T17:03:16Z" level=info msg="WCM_JAEGER_SERVICE_PORT_JAEGER=6831"
time="2021-06-16T17:03:16Z" level=info msg="WCM_PROXY_NSMGR_SERVICE_PORT_PNSMD=5006"
time="2021-06-16T17:03:16Z" level=info msg="WCM_NSMGR_PORT_5000_TCP_ADDR=10.96.67.173"
time="2021-06-16T17:03:16Z" level=info msg="WCM_NSMGR_PORT_5001_TCP_ADDR=10.96.67.173"
time="2021-06-16T17:03:16Z" level=info msg="PROXY_NSMD_K8S_ADDRESS=wcm-proxy-nsmgr:5005"
time="2021-06-16T17:03:16Z" level=info msg="WCM_NSMGR_PORT_5000_TCP_PORT=5000"
time="2021-06-16T17:03:16Z" level=info msg="INSECURE=false"
time="2021-06-16T17:03:16Z" level=info msg="WCM_JAEGER_SERVICE_PORT_HTTP=16686"
time="2021-06-16T17:03:16Z" level=info msg="KUBERNETES_PORT_443_TCP_ADDR=10.96.0.1"
time="2021-06-16T17:03:16Z" level=info msg="WCM_NSM_ADMISSION_WEBHOOK_PORT_443_TCP=tcp://10.102.238.54:443"
time="2021-06-16T17:03:16Z" level=info msg="WCM_JAEGER_PORT_16686_TCP=tcp://10.100.4.133:16686"
time="2021-06-16T17:03:16Z" level=info msg="WCM_NSMGR_PORT_5000_TCP_PROTO=tcp"
time="2021-06-16T17:03:16Z" level=info msg="WCM_NSMGR_PORT_5001_TCP_PORT=5001"
time="2021-06-16T17:03:16Z" level=info msg="WCM_NSMGR_PORT_5001_TCP_PROTO=tcp"
time="2021-06-16T17:03:16Z" level=info msg="WCM_NSMGR_SERVICE_PORT_REGISTRY=5000"
time="2021-06-16T17:03:16Z" level=info msg="PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
time="2021-06-16T17:03:16Z" level=info msg="PROXY_NSMD_ADDRESS=wcm-proxy-nsmgr:5006"
time="2021-06-16T17:03:16Z" level=info msg="WCM_NSM_ADMISSION_WEBHOOK_SERVICE_HOST=10.102.238.54"
time="2021-06-16T17:03:16Z" level=info msg="KUBERNETES_PORT_443_TCP_PORT=443"
time="2021-06-16T17:03:16Z" level=info msg="KUBERNETES_PORT_443_TCP_PROTO=tcp"
time="2021-06-16T17:03:16Z" level=info msg="ENTRY=nsmdp"
time="2021-06-16T17:03:16Z" level=info msg="WCM_NSMGR_SERVICE_HOST=10.96.67.173"
time="2021-06-16T17:03:16Z" level=info msg="WCM_JAEGER_SERVICE_HOST=10.100.4.133"
time="2021-06-16T17:03:16Z" level=info msg="WCM_PROXY_NSMGR_PORT_5005_TCP_ADDR=10.100.122.189"
time="2021-06-16T17:03:16Z" level=info msg="WCM_PROXY_NSMGR_SERVICE_PORT_PNSMR=5005"
time="2021-06-16T17:03:16Z" level=info msg="WCM_NSMGR_PORT_5000_TCP=tcp://10.96.67.173:5000"
time="2021-06-16T17:03:16Z" level=info msg="WCM_PROXY_NSMGR_PORT_5006_TCP_ADDR=10.100.122.189"
time="2021-06-16T17:03:16Z" level=info msg="WCM_NSMGR_PORT_5001_TCP=tcp://10.96.67.173:5001"
time="2021-06-16T17:03:16Z" level=info msg="WCM_NSM_ADMISSION_WEBHOOK_PORT=tcp://10.102.238.54:443"
time="2021-06-16T17:03:16Z" level=info msg="WCM_NSM_ADMISSION_WEBHOOK_SERVICE_PORT=443"
time="2021-06-16T17:03:16Z" level=info msg="WCM_PROXY_NSMGR_PORT_5005_TCP_PORT=5005"
time="2021-06-16T17:03:16Z" level=info msg="WCM_JAEGER_PORT_6831_UDP_ADDR=10.100.4.133"
time="2021-06-16T17:03:16Z" level=info msg="WCM_PROXY_NSMGR_PORT_5006_TCP_PORT=5006"
time="2021-06-16T17:03:16Z" level=info msg="WCM_PROXY_NSMGR_PORT_5005_TCP_PROTO=tcp"
time="2021-06-16T17:03:16Z" level=info msg="KUBERNETES_SERVICE_PORT_HTTPS=443"
time="2021-06-16T17:03:16Z" level=info msg="KUBERNETES_PORT_443_TCP=tcp://10.96.0.1:443"
time="2021-06-16T17:03:16Z" level=info msg="WCM_PROXY_NSMGR_PORT_5006_TCP_PROTO=tcp"
time="2021-06-16T17:03:16Z" level=info msg="JAEGER_AGENT_HOST=wcm-jaeger.nsm-system"
time="2021-06-16T17:03:16Z" level=info msg="WCM_PROXY_NSMGR_SERVICE_HOST=10.100.122.189"
time="2021-06-16T17:03:16Z" level=info msg="WCM_NSMGR_PORT=tcp://10.96.67.173:5000"
time="2021-06-16T17:03:16Z" level=info msg="KUBERNETES_SERVICE_HOST=10.96.0.1"
time="2021-06-16T17:03:16Z" level=info msg="WCM_JAEGER_PORT_6831_UDP_PORT=6831"
time="2021-06-16T17:03:16Z" level=info msg="WCM_JAEGER_SERVICE_PORT=16686"
time="2021-06-16T17:03:16Z" level=info msg="WCM_JAEGER_PORT=tcp://10.100.4.133:16686"
time="2021-06-16T17:03:16Z" level=info msg="WCM_NSMGR_SERVICE_PORT=5000"
time="2021-06-16T17:03:16Z" level=info msg="PWD=/"
time="2021-06-16T17:03:16Z" level=info msg="WCM_JAEGER_PORT_6831_UDP_PROTO=udp"
time="2021-06-16T17:03:16Z" level=info msg="WCM_NSMGR_SERVICE_PORT_API=5001"
time="2021-06-16T17:03:16Z" level=info msg="WCM_PROXY_NSMGR_PORT_5005_TCP=tcp://10.100.122.189:5005"
time="2021-06-16T17:03:16Z" level=info msg="Creating logger from config: &{nsmdp@wcm-nsmgr-jf5x8 false false [] 0xc000292060 0xc000312000 <nil> <nil> <nil>}"
2021/06/16 17:03:16 debug logging disabled
2021/06/16 17:03:16 Initializing logging reporter
2021/06/16 17:03:16 debug logging disabled
time="2021-06-16T17:03:16Z" level=info msg="==--> NSMgr.Device.Plugin() span:3a440226d397c2ef:3a440226d397c2ef:0000000000000000:1"
time="2021-06-16T17:03:16Z" level=info msg=">><<-- registry.at=\"10.244.0.13:5001\" span=3a440226d397c2ef:3a440226d397c2ef:0000000000000000:1"
time="2021-06-16T17:03:16Z" level=info msg="==----> start.device.server() span:3a440226d397c2ef:5a547fe6b6c54fed:3a440226d397c2ef:1"
time="2021-06-16T17:03:16Z" level=info msg="Waiting for liveness probe: unix:/var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:03:16Z" level=info msg="Liveness probe was successful: unix:/var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:03:16Z" level=info msg=">><<---- devices=[{\"ID\":\"nsm-1\",\"health\":\"Healthy\"},{\"ID\":\"nsm-2\",\"health\":\"Healthy\"},{\"ID\":\"nsm-3\",\"health\":\"Healthy\"},{\"ID\":\"nsm-4\",\"health\":\"Healthy\"},{\"ID\":\"nsm-5\",\"health\":\"Healthy\"},{\"ID\":\"nsm-6\",\"health\":\"Healthy\"},{\"ID\":\"nsm-7\",\"health\":\"Healthy\"},{\"ID\":\"nsm-8\",\"health\":\"Healthy\"},{\"ID\":\"nsm-9\",\"health\":\"Healthy\"},{\"ID\":\"nsm-10\",\"health\":\"Healthy\"},{\"ID\":\"nsm-11\",\"health\":\"Healthy\"},{\"ID\":\"nsm-12\",\"health\":\"Healthy\"},{\"ID\":\"nsm-13\",\"health\":\"Healthy\"},{\"ID\":\"nsm-14\",\"health\":\"Healthy\"},{\"ID\":\"nsm-15\",\"health\":\"Healthy\"},{\"ID\":\"nsm-16\",\"health\":\"Healthy\"},{\"ID\":\"nsm-17\",\"health\":\"Healthy\"},{\"ID\":\"nsm-18\",\"health\":\"Healthy\"},{\"ID\":\"nsm-19\",\"health\":\"Healthy\"},{\"ID\":\"nsm-20\",\"health\":\"Healthy\"},{\"ID\":\"nsm-21\",\"health\":\"Healthy\"},{\"ID\":\"nsm-22\",\"health\":\"Healthy\"},{\"ID\":\"nsm-23\",\"health\":\"Healthy\"},{\"ID\":\"nsm-24\",\"health\":\"Healthy\"},{\"ID\":\"nsm-25\",\"health\":\"Healthy\"},{\"ID\":\"nsm-26\",\"health\":\"Healthy\"},{\"ID\":\"nsm-27\",\"health\":\"Healthy\"},{\"ID\":\"nsm-28\",\"health\":\"Healthy\"},{\"ID\":\"nsm-29\",\"health\":\"Healthy\"},{\"ID\":\"nsm-30\",\"health\":\"Healthy\"}] span=3a440226d397c2ef:5a547fe6b6c54fed:3a440226d397c2ef:1"
time="2021-06-16T17:03:16Z" level=info msg="==------> start.device.server() span:3a440226d397c2ef:30c54483233530d8:5a547fe6b6c54fed:1"
time="2021-06-16T17:03:16Z" level=info msg=">><<------ listen-endpoint=\"/var/lib/kubelet/device-plugins/networkservicemesh.io.sock\" span=3a440226d397c2ef:30c54483233530d8:5a547fe6b6c54fed:1"
time="2021-06-16T17:03:16Z" level=info msg="Establish connection with the spire provider at address:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:03:53Z" level=info msg="Got x509:&{0xc0003ac2d0 <nil> {{0 0} 0 0 0 0} 0xc0003496d0 0xc000525460 {{0 0} 0 0 0 0} false} <nil>"
time="2021-06-16T17:03:53Z" level=info msg="GRPC.NewServer with open tracing enabled"
time="2021-06-16T17:03:53Z" level=info msg="Issued identity:spiffe://member2.com/wcm-nsmgr"
time="2021-06-16T17:03:53Z" level=info msg="Starting Device Plugin's gRPC server listening on socket: networkservicemesh.io.sock" operation=start.device.server span="3a440226d397c2ef:30c54483233530d8:5a547fe6b6c54fed:1"
time="2021-06-16T17:03:53Z" level=info msg="Check device server operational" operation=start.device.server span="3a440226d397c2ef:30c54483233530d8:5a547fe6b6c54fed:1"
time="2021-06-16T17:03:53Z" level=info msg="Trying to establish connection to target: /var/lib/kubelet/device-plugins/networkservicemesh.io.sock"
time="2021-06-16T17:03:53Z" level=info msg="Establishing insecure connection to target:/var/lib/kubelet/device-plugins/networkservicemesh.io.sock"
time="2021-06-16T17:03:53Z" level=info msg="Start serving..." operation=start.device.server span="3a440226d397c2ef:30c54483233530d8:5a547fe6b6c54fed:1"
time="2021-06-16T17:03:53Z" level=info msg="Device server is operational" operation=start.device.server span="3a440226d397c2ef:30c54483233530d8:5a547fe6b6c54fed:1"
2021/06/16 17:03:53 Reporting span 3a440226d397c2ef:30c54483233530d8:5a547fe6b6c54fed:1
time="2021-06-16T17:03:53Z" level=info msg="==------> Register() span:3a440226d397c2ef:2b3b6a956a5461c9:5a547fe6b6c54fed:1"
time="2021-06-16T17:03:53Z" level=info msg="Trying to establish connection to target: /var/lib/kubelet/device-plugins/kubelet.sock"
time="2021-06-16T17:03:53Z" level=info msg="Establishing insecure connection to target:/var/lib/kubelet/device-plugins/kubelet.sock"
time="2021-06-16T17:03:53Z" level=info msg=">><<------ request={\"version\":\"v1beta1\",\"endpoint\":\"networkservicemesh.io.sock\",\"resource_name\":\"networkservicemesh.io/socket\"} span=3a440226d397c2ef:2b3b6a956a5461c9:5a547fe6b6c54fed:1"
time="2021-06-16T17:03:53Z" level=info msg=">><<-- /v1beta1.Registration/Register()=\"\" span=<nil>"
time="2021-06-16T17:03:53Z" level=info msg=">><<-- request={\"version\":\"v1beta1\",\"endpoint\":\"networkservicemesh.io.sock\",\"resource_name\":\"networkservicemesh.io/socket\"} span=<nil>"
2021/06/16 17:03:53 Reporting span 2a40a4f62790a4cf:2a40a4f62790a4cf:0000000000000000:1
time="2021-06-16T17:03:53Z" level=info msg=">><<-- response={} span=<nil>"
time="2021-06-16T17:03:53Z" level=info msg="ListAndWatch was called with s: &{ServerStream:0xc0005242c0}"
time="2021-06-16T17:03:53Z" level=info msg="==--> ListAndWatch-0() span:5336cd279eaa21df:5336cd279eaa21df:0000000000000000:1"
time="2021-06-16T17:03:53Z" level=info msg="==----> recieveWorkspaces() span:5336cd279eaa21df:715e451b4c5ac421:5336cd279eaa21df:1"
time="2021-06-16T17:03:53Z" level=info msg="Request workspaces list" operation=recieveWorkspaces span="5336cd279eaa21df:715e451b4c5ac421:5336cd279eaa21df:1"
time="2021-06-16T17:03:53Z" level=info msg="==------> enumWorkspaces() span:5336cd279eaa21df:64a3759c173f4ba0:715e451b4c5ac421:1"
time="2021-06-16T17:03:53Z" level=info msg="Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock..."
time="2021-06-16T17:03:53Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:03:53Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:03:53Z" level=info msg="Register done" operation=Register span="3a440226d397c2ef:2b3b6a956a5461c9:5a547fe6b6c54fed:1"
2021/06/16 17:03:53 Reporting span 3a440226d397c2ef:2b3b6a956a5461c9:5a547fe6b6c54fed:1
2021/06/16 17:03:53 Reporting span 3a440226d397c2ef:5a547fe6b6c54fed:3a440226d397c2ef:1
time="2021-06-16T17:03:53Z" level=info msg="nsmdp: successfully started" operation=NSMgr.Device.Plugin span="3a440226d397c2ef:3a440226d397c2ef:0000000000000000:1"
2021/06/16 17:03:53 Reporting span 3a440226d397c2ef:3a440226d397c2ef:0000000000000000:1
time="2021-06-16T17:03:53Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0002d8280 {member1.com}:0xc0002d8300 {member2.com}:0xc0002d8200]}"
time="2021-06-16T17:03:53Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:03:53Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:03:53Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:03:53Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:03:53Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:03:53Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:03:53Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:03:53Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:03:53Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:03:53Z" level=info msg="Found 3 tlsconfigs. [0xc000290480 0xc000290f00 0xc000291080]"
time="2021-06-16T17:03:53Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:03:58Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:03:58Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:04:03Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:04:03Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:04:03Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:04:03Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:04:03Z" level=info msg="Requesting nsmd for client connection..."
time="2021-06-16T17:04:03Z" level=info msg=">><<-------- /nsmdapi.NSMD/EnumConnection()=\"\" span=5336cd279eaa21df:64a3759c173f4ba0:715e451b4c5ac421:1"
time="2021-06-16T17:04:03Z" level=info msg=">><<-------- request={} span=5336cd279eaa21df:64a3759c173f4ba0:715e451b4c5ac421:1"
2021/06/16 17:04:03 Reporting span 5336cd279eaa21df:439de00acbc338c7:64a3759c173f4ba0:1
time="2021-06-16T17:04:03Z" level=info msg=">><<-------- response={} span=5336cd279eaa21df:64a3759c173f4ba0:715e451b4c5ac421:1"
time="2021-06-16T17:04:03Z" level=info msg=">><<------ reply={} span=5336cd279eaa21df:64a3759c173f4ba0:715e451b4c5ac421:1"
2021/06/16 17:04:03 Reporting span 5336cd279eaa21df:64a3759c173f4ba0:715e451b4c5ac421:1
time="2021-06-16T17:04:03Z" level=info msg=">><<---- reply={} span=5336cd279eaa21df:715e451b4c5ac421:5336cd279eaa21df:1"
2021/06/16 17:04:03 Reporting span 5336cd279eaa21df:715e451b4c5ac421:5336cd279eaa21df:1
time="2021-06-16T17:04:03Z" level=info msg="==----> sendDeviceUpdate() span:5336cd279eaa21df:7c3e90a41089a32d:5336cd279eaa21df:1"
time="2021-06-16T17:04:03Z" level=info msg=">><<---- info={\"devices\":[{\"ID\":\"nsm-1\",\"health\":\"Healthy\"},{\"ID\":\"nsm-2\",\"health\":\"Healthy\"},{\"ID\":\"nsm-3\",\"health\":\"Healthy\"},{\"ID\":\"nsm-4\",\"health\":\"Healthy\"},{\"ID\":\"nsm-5\",\"health\":\"Healthy\"},{\"ID\":\"nsm-6\",\"health\":\"Healthy\"},{\"ID\":\"nsm-7\",\"health\":\"Healthy\"},{\"ID\":\"nsm-8\",\"health\":\"Healthy\"},{\"ID\":\"nsm-9\",\"health\":\"Healthy\"},{\"ID\":\"nsm-10\",\"health\":\"Healthy\"},{\"ID\":\"nsm-11\",\"health\":\"Healthy\"},{\"ID\":\"nsm-12\",\"health\":\"Healthy\"},{\"ID\":\"nsm-13\",\"health\":\"Healthy\"},{\"ID\":\"nsm-14\",\"health\":\"Healthy\"},{\"ID\":\"nsm-15\",\"health\":\"Healthy\"},{\"ID\":\"nsm-16\",\"health\":\"Healthy\"},{\"ID\":\"nsm-17\",\"health\":\"Healthy\"},{\"ID\":\"nsm-18\",\"health\":\"Healthy\"},{\"ID\":\"nsm-19\",\"health\":\"Healthy\"},{\"ID\":\"nsm-20\",\"health\":\"Healthy\"},{\"ID\":\"nsm-21\",\"health\":\"Healthy\"},{\"ID\":\"nsm-22\",\"health\":\"Healthy\"},{\"ID\":\"nsm-23\",\"health\":\"Healthy\"},{\"ID\":\"nsm-24\",\"health\":\"Healthy\"},{\"ID\":\"nsm-25\",\"health\":\"Healthy\"},{\"ID\":\"nsm-26\",\"health\":\"Healthy\"},{\"ID\":\"nsm-27\",\"health\":\"Healthy\"},{\"ID\":\"nsm-28\",\"health\":\"Healthy\"},{\"ID\":\"nsm-29\",\"health\":\"Healthy\"},{\"ID\":\"nsm-30\",\"health\":\"Healthy\"}]} span=5336cd279eaa21df:7c3e90a41089a32d:5336cd279eaa21df:1"
time="2021-06-16T17:04:03Z" level=info msg="Send device plugins info" operation=sendDeviceUpdate span="5336cd279eaa21df:7c3e90a41089a32d:5336cd279eaa21df:1"
time="2021-06-16T17:04:03Z" level=info msg="Delaying 30s" operation=ListAndWatch-0 span="5336cd279eaa21df:5336cd279eaa21df:0000000000000000:1"
2021/06/16 17:04:03 Reporting span 5336cd279eaa21df:5336cd279eaa21df:0000000000000000:1
time="2021-06-16T17:04:33Z" level=info msg="==--> ListAndWatch-1() span:4db053ba358acc88:4db053ba358acc88:0000000000000000:1"
time="2021-06-16T17:04:33Z" level=info msg="==----> recieveWorkspaces() span:4db053ba358acc88:25c54f204e1645a8:4db053ba358acc88:1"
time="2021-06-16T17:04:33Z" level=info msg="Request workspaces list" operation=recieveWorkspaces span="4db053ba358acc88:25c54f204e1645a8:4db053ba358acc88:1"
time="2021-06-16T17:04:33Z" level=info msg="==------> enumWorkspaces() span:4db053ba358acc88:64983fd04fcb65dc:25c54f204e1645a8:1"
time="2021-06-16T17:04:33Z" level=info msg="Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock..."
time="2021-06-16T17:04:33Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:04:33Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:04:33Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0002d8b00 {member1.com}:0xc0002d8bc0 {member2.com}:0xc0002d8900]}"
time="2021-06-16T17:04:33Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:04:33Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:33Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:04:33Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:04:33Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:33Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:04:33Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:04:33Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:33Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:04:33Z" level=info msg="Found 3 tlsconfigs. [0xc000291080 0xc000291200 0xc000291380]"
time="2021-06-16T17:04:33Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:04:38Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:04:38Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:04:40Z" level=info msg=">><<-- GRPC->/v1beta1.DevicePlugin/Allocate()=\"\" span=7e84dce40d47e4a8:7e84dce40d47e4a8:0000000000000000:1"
time="2021-06-16T17:04:40Z" level=info msg=">><<-- request={\"container_requests\":[{\"devicesIDs\":[\"nsm-29\"]}]} span=7e84dce40d47e4a8:7e84dce40d47e4a8:0000000000000000:1"
time="2021-06-16T17:04:40Z" level=info msg="==--> Allocate() span:7e84dce40d47e4a8:6fefd79ffb26fff3:7e84dce40d47e4a8:1"
time="2021-06-16T17:04:40Z" level=info msg="Client request for nsmdp resource... container_requests: <\n  devicesIDs: \"nsm-29\"\n>\n" operation=Allocate span="7e84dce40d47e4a8:6fefd79ffb26fff3:7e84dce40d47e4a8:1"
time="2021-06-16T17:04:40Z" level=info msg="Requesting Workspace, device ID: nsm-29" operation=Allocate span="7e84dce40d47e4a8:6fefd79ffb26fff3:7e84dce40d47e4a8:1"
time="2021-06-16T17:04:40Z" level=info msg="==----> RequestWorkspace() span:7e84dce40d47e4a8:5ebb5ad084d6ede8:6fefd79ffb26fff3:1"
time="2021-06-16T17:04:40Z" level=info msg="Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock..."
time="2021-06-16T17:04:40Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:04:40Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:04:40Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000381500 {member1.com}:0xc000381580 {member2.com}:0xc000381480]}"
time="2021-06-16T17:04:40Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:04:40Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:40Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:04:40Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:04:40Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:40Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:04:40Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:04:40Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:40Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:04:40Z" level=info msg="Found 3 tlsconfigs. [0xc0004ad500 0xc0000d6300 0xc0000d6480]"
time="2021-06-16T17:04:40Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:04:43Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:04:43Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:04:43Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:04:43Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:04:43Z" level=info msg="Requesting nsmd for client connection..."
time="2021-06-16T17:04:43Z" level=info msg=">><<-------- /nsmdapi.NSMD/EnumConnection()=\"\" span=4db053ba358acc88:64983fd04fcb65dc:25c54f204e1645a8:1"
time="2021-06-16T17:04:43Z" level=info msg=">><<-------- request={} span=4db053ba358acc88:64983fd04fcb65dc:25c54f204e1645a8:1"
2021/06/16 17:04:43 Reporting span 4db053ba358acc88:39304c348616e4ac:64983fd04fcb65dc:1
time="2021-06-16T17:04:43Z" level=info msg=">><<-------- response={} span=4db053ba358acc88:64983fd04fcb65dc:25c54f204e1645a8:1"
time="2021-06-16T17:04:43Z" level=info msg=">><<------ reply={} span=4db053ba358acc88:64983fd04fcb65dc:25c54f204e1645a8:1"
2021/06/16 17:04:43 Reporting span 4db053ba358acc88:64983fd04fcb65dc:25c54f204e1645a8:1
time="2021-06-16T17:04:43Z" level=info msg=">><<---- reply={} span=4db053ba358acc88:25c54f204e1645a8:4db053ba358acc88:1"
2021/06/16 17:04:43 Reporting span 4db053ba358acc88:25c54f204e1645a8:4db053ba358acc88:1
time="2021-06-16T17:04:43Z" level=info msg="==----> sendDeviceUpdate() span:4db053ba358acc88:7d375cce22996e93:4db053ba358acc88:1"
time="2021-06-16T17:04:43Z" level=info msg=">><<---- info={\"devices\":[{\"ID\":\"nsm-1\",\"health\":\"Healthy\"},{\"ID\":\"nsm-2\",\"health\":\"Healthy\"},{\"ID\":\"nsm-3\",\"health\":\"Healthy\"},{\"ID\":\"nsm-4\",\"health\":\"Healthy\"},{\"ID\":\"nsm-5\",\"health\":\"Healthy\"},{\"ID\":\"nsm-6\",\"health\":\"Healthy\"},{\"ID\":\"nsm-7\",\"health\":\"Healthy\"},{\"ID\":\"nsm-8\",\"health\":\"Healthy\"},{\"ID\":\"nsm-9\",\"health\":\"Healthy\"},{\"ID\":\"nsm-10\",\"health\":\"Healthy\"},{\"ID\":\"nsm-11\",\"health\":\"Healthy\"},{\"ID\":\"nsm-12\",\"health\":\"Healthy\"},{\"ID\":\"nsm-13\",\"health\":\"Healthy\"},{\"ID\":\"nsm-14\",\"health\":\"Healthy\"},{\"ID\":\"nsm-15\",\"health\":\"Healthy\"},{\"ID\":\"nsm-16\",\"health\":\"Healthy\"},{\"ID\":\"nsm-17\",\"health\":\"Healthy\"},{\"ID\":\"nsm-18\",\"health\":\"Healthy\"},{\"ID\":\"nsm-19\",\"health\":\"Healthy\"},{\"ID\":\"nsm-20\",\"health\":\"Healthy\"},{\"ID\":\"nsm-21\",\"health\":\"Healthy\"},{\"ID\":\"nsm-22\",\"health\":\"Healthy\"},{\"ID\":\"nsm-23\",\"health\":\"Healthy\"},{\"ID\":\"nsm-24\",\"health\":\"Healthy\"},{\"ID\":\"nsm-25\",\"health\":\"Healthy\"},{\"ID\":\"nsm-26\",\"health\":\"Healthy\"},{\"ID\":\"nsm-27\",\"health\":\"Healthy\"},{\"ID\":\"nsm-28\",\"health\":\"Healthy\"},{\"ID\":\"nsm-29\",\"health\":\"Healthy\"},{\"ID\":\"nsm-30\",\"health\":\"Healthy\"}]} span=4db053ba358acc88:7d375cce22996e93:4db053ba358acc88:1"
time="2021-06-16T17:04:43Z" level=info msg="Send device plugins info" operation=sendDeviceUpdate span="4db053ba358acc88:7d375cce22996e93:4db053ba358acc88:1"
time="2021-06-16T17:04:43Z" level=info msg="Delaying 30s" operation=ListAndWatch-1 span="4db053ba358acc88:4db053ba358acc88:0000000000000000:1"
2021/06/16 17:04:43 Reporting span 4db053ba358acc88:4db053ba358acc88:0000000000000000:1
time="2021-06-16T17:04:45Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:04:45Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:04:50Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:04:50Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:04:50Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:04:50Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:04:50Z" level=info msg="Requesting nsmd for client connection..."
time="2021-06-16T17:04:50Z" level=info msg=">><<---- /nsmdapi.NSMD/RequestClientConnection()=\"\" span=7e84dce40d47e4a8:6fefd79ffb26fff3:7e84dce40d47e4a8:1"
time="2021-06-16T17:04:50Z" level=info msg=">><<---- request={\"workspace\":\"nsm-29\"} span=7e84dce40d47e4a8:6fefd79ffb26fff3:7e84dce40d47e4a8:1"
2021/06/16 17:05:00 Reporting span 7e84dce40d47e4a8:34a6884c69c5878c:6fefd79ffb26fff3:1
time="2021-06-16T17:05:00Z" level=info msg=">><<---- response={\"workspace\":\"nsm-29\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=7e84dce40d47e4a8:6fefd79ffb26fff3:7e84dce40d47e4a8:1"
time="2021-06-16T17:05:00Z" level=info msg=">><<---- response={\"workspace\":\"nsm-29\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=7e84dce40d47e4a8:5ebb5ad084d6ede8:6fefd79ffb26fff3:1"
time="2021-06-16T17:05:00Z" level=info msg="nsmd allocated workspace workspace:\"nsm-29\" hostBasedir:\"/var/lib/networkservicemesh/\" clientBaseDir:\"/var/lib/networkservicemesh/\" nsmServerSocket:\"nsm.server.io.sock\" nsmClientSocket:\"nsm.client.io.sock\"  for client operations..." operation=RequestWorkspace span="7e84dce40d47e4a8:5ebb5ad084d6ede8:6fefd79ffb26fff3:1"
2021/06/16 17:05:00 Reporting span 7e84dce40d47e4a8:5ebb5ad084d6ede8:6fefd79ffb26fff3:1
time="2021-06-16T17:05:00Z" level=info msg="Received Workspace workspace:\"nsm-29\" hostBasedir:\"/var/lib/networkservicemesh/\" clientBaseDir:\"/var/lib/networkservicemesh/\" nsmServerSocket:\"nsm.server.io.sock\" nsmClientSocket:\"nsm.client.io.sock\" " operation=Allocate span="7e84dce40d47e4a8:6fefd79ffb26fff3:7e84dce40d47e4a8:1"
time="2021-06-16T17:05:00Z" level=info msg=">><<-- responses={\"container_responses\":[{\"envs\":{\"NSM_CLIENT_SOCKET\":\"/var/lib/networkservicemesh/nsm.client.io.sock\",\"NSM_DEVICE_PLUGIN\":\"true\",\"NSM_SERVER_SOCKET\":\"/var/lib/networkservicemesh/nsm.server.io.sock\",\"WORKSPACE\":\"/var/lib/networkservicemesh/\"},\"mounts\":[{\"container_path\":\"/run/spire/sockets\",\"host_path\":\"/run/spire/sockets\",\"read_only\":true},{\"container_path\":\"/var/lib/networkservicemesh/\",\"host_path\":\"/var/lib/networkservicemesh/nsm-29\"}]}]} span=7e84dce40d47e4a8:6fefd79ffb26fff3:7e84dce40d47e4a8:1"
time="2021-06-16T17:05:00Z" level=info msg="AllocateResponse: &AllocateResponse{ContainerResponses:[]*ContainerAllocateResponse{&ContainerAllocateResponse{Envs:map[string]string{NSM_CLIENT_SOCKET: /var/lib/networkservicemesh/nsm.client.io.sock,NSM_DEVICE_PLUGIN: true,NSM_SERVER_SOCKET: /var/lib/networkservicemesh/nsm.server.io.sock,WORKSPACE: /var/lib/networkservicemesh/,},Mounts:[]*Mount{&Mount{ContainerPath:/run/spire/sockets,HostPath:/run/spire/sockets,ReadOnly:true,},&Mount{ContainerPath:/var/lib/networkservicemesh/,HostPath:/var/lib/networkservicemesh/nsm-29,ReadOnly:false,},},Devices:[]*DeviceSpec{},Annotations:map[string]string{},},},}" operation=Allocate span="7e84dce40d47e4a8:6fefd79ffb26fff3:7e84dce40d47e4a8:1"
2021/06/16 17:05:00 Reporting span 7e84dce40d47e4a8:6fefd79ffb26fff3:7e84dce40d47e4a8:1
time="2021-06-16T17:05:00Z" level=info msg=">><<-- response={\"container_responses\":[{\"envs\":{\"NSM_CLIENT_SOCKET\":\"/var/lib/networkservicemesh/nsm.client.io.sock\",\"NSM_DEVICE_PLUGIN\":\"true\",\"NSM_SERVER_SOCKET\":\"/var/lib/networkservicemesh/nsm.server.io.sock\",\"WORKSPACE\":\"/var/lib/networkservicemesh/\"},\"mounts\":[{\"container_path\":\"/run/spire/sockets\",\"host_path\":\"/run/spire/sockets\",\"read_only\":true},{\"container_path\":\"/var/lib/networkservicemesh/\",\"host_path\":\"/var/lib/networkservicemesh/nsm-29\"}]}]} span=7e84dce40d47e4a8:7e84dce40d47e4a8:0000000000000000:1"
2021/06/16 17:05:00 Reporting span 7e84dce40d47e4a8:7e84dce40d47e4a8:0000000000000000:1
time="2021-06-16T17:05:00Z" level=info msg=">><<-- GRPC->/v1beta1.DevicePlugin/Allocate()=\"\" span=63de0fb2806c3023:63de0fb2806c3023:0000000000000000:1"
time="2021-06-16T17:05:00Z" level=info msg=">><<-- request={\"container_requests\":[{\"devicesIDs\":[\"nsm-18\"]}]} span=63de0fb2806c3023:63de0fb2806c3023:0000000000000000:1"
time="2021-06-16T17:05:00Z" level=info msg="==--> Allocate() span:63de0fb2806c3023:44e6b6317cdc51ac:63de0fb2806c3023:1"
time="2021-06-16T17:05:00Z" level=info msg="Client request for nsmdp resource... container_requests: <\n  devicesIDs: \"nsm-18\"\n>\n" operation=Allocate span="63de0fb2806c3023:44e6b6317cdc51ac:63de0fb2806c3023:1"
time="2021-06-16T17:05:00Z" level=info msg="Requesting Workspace, device ID: nsm-18" operation=Allocate span="63de0fb2806c3023:44e6b6317cdc51ac:63de0fb2806c3023:1"
time="2021-06-16T17:05:00Z" level=info msg="==----> RequestWorkspace() span:63de0fb2806c3023:37081a785cc6fa9b:44e6b6317cdc51ac:1"
time="2021-06-16T17:05:00Z" level=info msg="Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock..."
time="2021-06-16T17:05:00Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:05:00Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:05:00Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000381880 {member1.com}:0xc000381800 {member2.com}:0xc000381780]}"
time="2021-06-16T17:05:00Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:05:00Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:00Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:05:00Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:05:00Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:00Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:05:00Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:05:00Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:00Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:05:00Z" level=info msg="Found 3 tlsconfigs. [0xc000291800 0xc000291980 0xc000291b00]"
time="2021-06-16T17:05:00Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:05:05Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:05:05Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:05:10Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:05:10Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:05:10Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:05:10Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:05:10Z" level=info msg="Requesting nsmd for client connection..."
time="2021-06-16T17:05:10Z" level=info msg=">><<---- /nsmdapi.NSMD/RequestClientConnection()=\"\" span=63de0fb2806c3023:44e6b6317cdc51ac:63de0fb2806c3023:1"
time="2021-06-16T17:05:10Z" level=info msg=">><<---- request={\"workspace\":\"nsm-18\"} span=63de0fb2806c3023:44e6b6317cdc51ac:63de0fb2806c3023:1"
time="2021-06-16T17:05:13Z" level=info msg="==--> ListAndWatch-2() span:114661d187987e57:114661d187987e57:0000000000000000:1"
time="2021-06-16T17:05:13Z" level=info msg="==----> recieveWorkspaces() span:114661d187987e57:455df9c7656cebb1:114661d187987e57:1"
time="2021-06-16T17:05:13Z" level=info msg="Request workspaces list" operation=recieveWorkspaces span="114661d187987e57:455df9c7656cebb1:114661d187987e57:1"
time="2021-06-16T17:05:13Z" level=info msg="==------> enumWorkspaces() span:114661d187987e57:6714e27562659658:455df9c7656cebb1:1"
time="2021-06-16T17:05:13Z" level=info msg="Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock..."
time="2021-06-16T17:05:13Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:05:13Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:05:13Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000acf80 {member1.com}:0xc0000acf00 {member2.com}:0xc0000ace80]}"
time="2021-06-16T17:05:13Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:05:13Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:13Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:05:13Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:05:13Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:13Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:05:13Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:05:13Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:13Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:05:13Z" level=info msg="Found 3 tlsconfigs. [0xc000410180 0xc000410480 0xc000410780]"
time="2021-06-16T17:05:13Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:05:18Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:05:18Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
2021/06/16 17:05:20 Reporting span 63de0fb2806c3023:012ea8dfc900c90a:44e6b6317cdc51ac:1
time="2021-06-16T17:05:20Z" level=info msg=">><<---- response={\"workspace\":\"nsm-18\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=63de0fb2806c3023:44e6b6317cdc51ac:63de0fb2806c3023:1"
time="2021-06-16T17:05:20Z" level=info msg=">><<---- response={\"workspace\":\"nsm-18\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=63de0fb2806c3023:37081a785cc6fa9b:44e6b6317cdc51ac:1"
time="2021-06-16T17:05:20Z" level=info msg="nsmd allocated workspace workspace:\"nsm-18\" hostBasedir:\"/var/lib/networkservicemesh/\" clientBaseDir:\"/var/lib/networkservicemesh/\" nsmServerSocket:\"nsm.server.io.sock\" nsmClientSocket:\"nsm.client.io.sock\"  for client operations..." operation=RequestWorkspace span="63de0fb2806c3023:37081a785cc6fa9b:44e6b6317cdc51ac:1"
2021/06/16 17:05:20 Reporting span 63de0fb2806c3023:37081a785cc6fa9b:44e6b6317cdc51ac:1
time="2021-06-16T17:05:20Z" level=info msg="Received Workspace workspace:\"nsm-18\" hostBasedir:\"/var/lib/networkservicemesh/\" clientBaseDir:\"/var/lib/networkservicemesh/\" nsmServerSocket:\"nsm.server.io.sock\" nsmClientSocket:\"nsm.client.io.sock\" " operation=Allocate span="63de0fb2806c3023:44e6b6317cdc51ac:63de0fb2806c3023:1"
time="2021-06-16T17:05:20Z" level=info msg=">><<-- responses={\"container_responses\":[{\"envs\":{\"NSM_CLIENT_SOCKET\":\"/var/lib/networkservicemesh/nsm.client.io.sock\",\"NSM_DEVICE_PLUGIN\":\"true\",\"NSM_SERVER_SOCKET\":\"/var/lib/networkservicemesh/nsm.server.io.sock\",\"WORKSPACE\":\"/var/lib/networkservicemesh/\"},\"mounts\":[{\"container_path\":\"/run/spire/sockets\",\"host_path\":\"/run/spire/sockets\",\"read_only\":true},{\"container_path\":\"/var/lib/networkservicemesh/\",\"host_path\":\"/var/lib/networkservicemesh/nsm-18\"}]}]} span=63de0fb2806c3023:44e6b6317cdc51ac:63de0fb2806c3023:1"
time="2021-06-16T17:05:20Z" level=info msg="AllocateResponse: &AllocateResponse{ContainerResponses:[]*ContainerAllocateResponse{&ContainerAllocateResponse{Envs:map[string]string{NSM_CLIENT_SOCKET: /var/lib/networkservicemesh/nsm.client.io.sock,NSM_DEVICE_PLUGIN: true,NSM_SERVER_SOCKET: /var/lib/networkservicemesh/nsm.server.io.sock,WORKSPACE: /var/lib/networkservicemesh/,},Mounts:[]*Mount{&Mount{ContainerPath:/run/spire/sockets,HostPath:/run/spire/sockets,ReadOnly:true,},&Mount{ContainerPath:/var/lib/networkservicemesh/,HostPath:/var/lib/networkservicemesh/nsm-18,ReadOnly:false,},},Devices:[]*DeviceSpec{},Annotations:map[string]string{},},},}" operation=Allocate span="63de0fb2806c3023:44e6b6317cdc51ac:63de0fb2806c3023:1"
2021/06/16 17:05:20 Reporting span 63de0fb2806c3023:44e6b6317cdc51ac:63de0fb2806c3023:1
time="2021-06-16T17:05:20Z" level=info msg=">><<-- response={\"container_responses\":[{\"envs\":{\"NSM_CLIENT_SOCKET\":\"/var/lib/networkservicemesh/nsm.client.io.sock\",\"NSM_DEVICE_PLUGIN\":\"true\",\"NSM_SERVER_SOCKET\":\"/var/lib/networkservicemesh/nsm.server.io.sock\",\"WORKSPACE\":\"/var/lib/networkservicemesh/\"},\"mounts\":[{\"container_path\":\"/run/spire/sockets\",\"host_path\":\"/run/spire/sockets\",\"read_only\":true},{\"container_path\":\"/var/lib/networkservicemesh/\",\"host_path\":\"/var/lib/networkservicemesh/nsm-18\"}]}]} span=63de0fb2806c3023:63de0fb2806c3023:0000000000000000:1"
2021/06/16 17:05:20 Reporting span 63de0fb2806c3023:63de0fb2806c3023:0000000000000000:1
time="2021-06-16T17:05:23Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:05:23Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:05:23Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:05:23Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:05:23Z" level=info msg="Requesting nsmd for client connection..."
time="2021-06-16T17:05:23Z" level=info msg=">><<-------- /nsmdapi.NSMD/EnumConnection()=\"\" span=114661d187987e57:6714e27562659658:455df9c7656cebb1:1"
time="2021-06-16T17:05:23Z" level=info msg=">><<-------- request={} span=114661d187987e57:6714e27562659658:455df9c7656cebb1:1"
2021/06/16 17:05:23 Reporting span 114661d187987e57:40a4707852d02df5:6714e27562659658:1
time="2021-06-16T17:05:23Z" level=info msg=">><<-------- response={\"workspace\":[\"nsm-29\",\"nsm-18\"]} span=114661d187987e57:6714e27562659658:455df9c7656cebb1:1"
time="2021-06-16T17:05:23Z" level=info msg=">><<------ reply={\"workspace\":[\"nsm-29\",\"nsm-18\"]} span=114661d187987e57:6714e27562659658:455df9c7656cebb1:1"
2021/06/16 17:05:23 Reporting span 114661d187987e57:6714e27562659658:455df9c7656cebb1:1
time="2021-06-16T17:05:23Z" level=info msg=">><<---- reply={\"workspace\":[\"nsm-29\",\"nsm-18\"]} span=114661d187987e57:455df9c7656cebb1:114661d187987e57:1"
time="2021-06-16T17:05:23Z" level=info msg=">><<---- new-devices=[{\"ID\":\"nsm-1\",\"health\":\"Healthy\"},{\"ID\":\"nsm-2\",\"health\":\"Healthy\"},{\"ID\":\"nsm-3\",\"health\":\"Healthy\"},{\"ID\":\"nsm-4\",\"health\":\"Healthy\"},{\"ID\":\"nsm-5\",\"health\":\"Healthy\"},{\"ID\":\"nsm-6\",\"health\":\"Healthy\"},{\"ID\":\"nsm-7\",\"health\":\"Healthy\"},{\"ID\":\"nsm-8\",\"health\":\"Healthy\"},{\"ID\":\"nsm-9\",\"health\":\"Healthy\"},{\"ID\":\"nsm-10\",\"health\":\"Healthy\"},{\"ID\":\"nsm-11\",\"health\":\"Healthy\"},{\"ID\":\"nsm-12\",\"health\":\"Healthy\"},{\"ID\":\"nsm-13\",\"health\":\"Healthy\"},{\"ID\":\"nsm-14\",\"health\":\"Healthy\"},{\"ID\":\"nsm-15\",\"health\":\"Healthy\"},{\"ID\":\"nsm-16\",\"health\":\"Healthy\"},{\"ID\":\"nsm-17\",\"health\":\"Healthy\"},{\"ID\":\"nsm-18\",\"health\":\"Healthy\"},{\"ID\":\"nsm-19\",\"health\":\"Healthy\"},{\"ID\":\"nsm-20\",\"health\":\"Healthy\"},{\"ID\":\"nsm-21\",\"health\":\"Healthy\"},{\"ID\":\"nsm-22\",\"health\":\"Healthy\"},{\"ID\":\"nsm-23\",\"health\":\"Healthy\"},{\"ID\":\"nsm-24\",\"health\":\"Healthy\"},{\"ID\":\"nsm-25\",\"health\":\"Healthy\"},{\"ID\":\"nsm-26\",\"health\":\"Healthy\"},{\"ID\":\"nsm-27\",\"health\":\"Healthy\"},{\"ID\":\"nsm-28\",\"health\":\"Healthy\"},{\"ID\":\"nsm-29\",\"health\":\"Healthy\"},{\"ID\":\"nsm-30\",\"health\":\"Healthy\"},{\"ID\":\"nsm-31\",\"health\":\"Healthy\"}] span=114661d187987e57:455df9c7656cebb1:114661d187987e57:1"
time="2021-06-16T17:05:23Z" level=info msg=">><<---- new-devices=[{\"ID\":\"nsm-1\",\"health\":\"Healthy\"},{\"ID\":\"nsm-2\",\"health\":\"Healthy\"},{\"ID\":\"nsm-3\",\"health\":\"Healthy\"},{\"ID\":\"nsm-4\",\"health\":\"Healthy\"},{\"ID\":\"nsm-5\",\"health\":\"Healthy\"},{\"ID\":\"nsm-6\",\"health\":\"Healthy\"},{\"ID\":\"nsm-7\",\"health\":\"Healthy\"},{\"ID\":\"nsm-8\",\"health\":\"Healthy\"},{\"ID\":\"nsm-9\",\"health\":\"Healthy\"},{\"ID\":\"nsm-10\",\"health\":\"Healthy\"},{\"ID\":\"nsm-11\",\"health\":\"Healthy\"},{\"ID\":\"nsm-12\",\"health\":\"Healthy\"},{\"ID\":\"nsm-13\",\"health\":\"Healthy\"},{\"ID\":\"nsm-14\",\"health\":\"Healthy\"},{\"ID\":\"nsm-15\",\"health\":\"Healthy\"},{\"ID\":\"nsm-16\",\"health\":\"Healthy\"},{\"ID\":\"nsm-17\",\"health\":\"Healthy\"},{\"ID\":\"nsm-18\",\"health\":\"Healthy\"},{\"ID\":\"nsm-19\",\"health\":\"Healthy\"},{\"ID\":\"nsm-20\",\"health\":\"Healthy\"},{\"ID\":\"nsm-21\",\"health\":\"Healthy\"},{\"ID\":\"nsm-22\",\"health\":\"Healthy\"},{\"ID\":\"nsm-23\",\"health\":\"Healthy\"},{\"ID\":\"nsm-24\",\"health\":\"Healthy\"},{\"ID\":\"nsm-25\",\"health\":\"Healthy\"},{\"ID\":\"nsm-26\",\"health\":\"Healthy\"},{\"ID\":\"nsm-27\",\"health\":\"Healthy\"},{\"ID\":\"nsm-28\",\"health\":\"Healthy\"},{\"ID\":\"nsm-29\",\"health\":\"Healthy\"},{\"ID\":\"nsm-30\",\"health\":\"Healthy\"},{\"ID\":\"nsm-31\",\"health\":\"Healthy\"},{\"ID\":\"nsm-32\",\"health\":\"Healthy\"}] span=114661d187987e57:455df9c7656cebb1:114661d187987e57:1"
2021/06/16 17:05:23 Reporting span 114661d187987e57:455df9c7656cebb1:114661d187987e57:1
time="2021-06-16T17:05:23Z" level=info msg="==----> sendDeviceUpdate() span:114661d187987e57:66bb6c551319f78a:114661d187987e57:1"
time="2021-06-16T17:05:23Z" level=info msg=">><<---- info={\"devices\":[{\"ID\":\"nsm-1\",\"health\":\"Healthy\"},{\"ID\":\"nsm-2\",\"health\":\"Healthy\"},{\"ID\":\"nsm-3\",\"health\":\"Healthy\"},{\"ID\":\"nsm-4\",\"health\":\"Healthy\"},{\"ID\":\"nsm-5\",\"health\":\"Healthy\"},{\"ID\":\"nsm-6\",\"health\":\"Healthy\"},{\"ID\":\"nsm-7\",\"health\":\"Healthy\"},{\"ID\":\"nsm-8\",\"health\":\"Healthy\"},{\"ID\":\"nsm-9\",\"health\":\"Healthy\"},{\"ID\":\"nsm-10\",\"health\":\"Healthy\"},{\"ID\":\"nsm-11\",\"health\":\"Healthy\"},{\"ID\":\"nsm-12\",\"health\":\"Healthy\"},{\"ID\":\"nsm-13\",\"health\":\"Healthy\"},{\"ID\":\"nsm-14\",\"health\":\"Healthy\"},{\"ID\":\"nsm-15\",\"health\":\"Healthy\"},{\"ID\":\"nsm-16\",\"health\":\"Healthy\"},{\"ID\":\"nsm-17\",\"health\":\"Healthy\"},{\"ID\":\"nsm-18\",\"health\":\"Healthy\"},{\"ID\":\"nsm-19\",\"health\":\"Healthy\"},{\"ID\":\"nsm-20\",\"health\":\"Healthy\"},{\"ID\":\"nsm-21\",\"health\":\"Healthy\"},{\"ID\":\"nsm-22\",\"health\":\"Healthy\"},{\"ID\":\"nsm-23\",\"health\":\"Healthy\"},{\"ID\":\"nsm-24\",\"health\":\"Healthy\"},{\"ID\":\"nsm-25\",\"health\":\"Healthy\"},{\"ID\":\"nsm-26\",\"health\":\"Healthy\"},{\"ID\":\"nsm-27\",\"health\":\"Healthy\"},{\"ID\":\"nsm-28\",\"health\":\"Healthy\"},{\"ID\":\"nsm-29\",\"health\":\"Healthy\"},{\"ID\":\"nsm-30\",\"health\":\"Healthy\"},{\"ID\":\"nsm-31\",\"health\":\"Healthy\"},{\"ID\":\"nsm-32\",\"health\":\"Healthy\"}]} span=114661d187987e57:66bb6c551319f78a:114661d187987e57:1"
time="2021-06-16T17:05:23Z" level=info msg="Send device plugins info" operation=sendDeviceUpdate span="114661d187987e57:66bb6c551319f78a:114661d187987e57:1"
time="2021-06-16T17:05:23Z" level=info msg="Delaying 30s" operation=ListAndWatch-2 span="114661d187987e57:114661d187987e57:0000000000000000:1"
2021/06/16 17:05:23 Reporting span 114661d187987e57:114661d187987e57:0000000000000000:1
time="2021-06-16T17:05:53Z" level=info msg="==--> ListAndWatch-3() span:435ab8cbdd3095a6:435ab8cbdd3095a6:0000000000000000:1"
time="2021-06-16T17:05:53Z" level=info msg="==----> recieveWorkspaces() span:435ab8cbdd3095a6:29b5173359eda06d:435ab8cbdd3095a6:1"
time="2021-06-16T17:05:53Z" level=info msg="Request workspaces list" operation=recieveWorkspaces span="435ab8cbdd3095a6:29b5173359eda06d:435ab8cbdd3095a6:1"
time="2021-06-16T17:05:53Z" level=info msg="==------> enumWorkspaces() span:435ab8cbdd3095a6:48b78a59fc3c868f:29b5173359eda06d:1"
time="2021-06-16T17:05:53Z" level=info msg="Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock..."
time="2021-06-16T17:05:53Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:05:53Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:05:53Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000380180 {member1.com}:0xc000380200 {member2.com}:0xc000380100]}"
time="2021-06-16T17:05:53Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:05:53Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:53Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:05:53Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:05:53Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:53Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:05:53Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:05:53Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:53Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:05:53Z" level=info msg="Found 3 tlsconfigs. [0xc000588300 0xc000588480 0xc000588600]"
time="2021-06-16T17:05:53Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:05:58Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:05:58Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:03Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:06:03Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:03Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:03Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:03Z" level=info msg="Requesting nsmd for client connection..."
time="2021-06-16T17:06:03Z" level=info msg=">><<-------- /nsmdapi.NSMD/EnumConnection()=\"\" span=435ab8cbdd3095a6:48b78a59fc3c868f:29b5173359eda06d:1"
time="2021-06-16T17:06:03Z" level=info msg=">><<-------- request={} span=435ab8cbdd3095a6:48b78a59fc3c868f:29b5173359eda06d:1"
2021/06/16 17:06:03 Reporting span 435ab8cbdd3095a6:63410f673e886688:48b78a59fc3c868f:1
time="2021-06-16T17:06:03Z" level=info msg=">><<-------- response={\"workspace\":[\"nsm-29\",\"nsm-18\"]} span=435ab8cbdd3095a6:48b78a59fc3c868f:29b5173359eda06d:1"
time="2021-06-16T17:06:03Z" level=info msg=">><<------ reply={\"workspace\":[\"nsm-29\",\"nsm-18\"]} span=435ab8cbdd3095a6:48b78a59fc3c868f:29b5173359eda06d:1"
2021/06/16 17:06:03 Reporting span 435ab8cbdd3095a6:48b78a59fc3c868f:29b5173359eda06d:1
time="2021-06-16T17:06:03Z" level=info msg=">><<---- reply={\"workspace\":[\"nsm-29\",\"nsm-18\"]} span=435ab8cbdd3095a6:29b5173359eda06d:435ab8cbdd3095a6:1"
2021/06/16 17:06:03 Reporting span 435ab8cbdd3095a6:29b5173359eda06d:435ab8cbdd3095a6:1
time="2021-06-16T17:06:03Z" level=info msg="==----> sendDeviceUpdate() span:435ab8cbdd3095a6:0b6387a2c9c3712c:435ab8cbdd3095a6:1"
time="2021-06-16T17:06:03Z" level=info msg=">><<---- info={\"devices\":[{\"ID\":\"nsm-1\",\"health\":\"Healthy\"},{\"ID\":\"nsm-2\",\"health\":\"Healthy\"},{\"ID\":\"nsm-3\",\"health\":\"Healthy\"},{\"ID\":\"nsm-4\",\"health\":\"Healthy\"},{\"ID\":\"nsm-5\",\"health\":\"Healthy\"},{\"ID\":\"nsm-6\",\"health\":\"Healthy\"},{\"ID\":\"nsm-7\",\"health\":\"Healthy\"},{\"ID\":\"nsm-8\",\"health\":\"Healthy\"},{\"ID\":\"nsm-9\",\"health\":\"Healthy\"},{\"ID\":\"nsm-10\",\"health\":\"Healthy\"},{\"ID\":\"nsm-11\",\"health\":\"Healthy\"},{\"ID\":\"nsm-12\",\"health\":\"Healthy\"},{\"ID\":\"nsm-13\",\"health\":\"Healthy\"},{\"ID\":\"nsm-14\",\"health\":\"Healthy\"},{\"ID\":\"nsm-15\",\"health\":\"Healthy\"},{\"ID\":\"nsm-16\",\"health\":\"Healthy\"},{\"ID\":\"nsm-17\",\"health\":\"Healthy\"},{\"ID\":\"nsm-18\",\"health\":\"Healthy\"},{\"ID\":\"nsm-19\",\"health\":\"Healthy\"},{\"ID\":\"nsm-20\",\"health\":\"Healthy\"},{\"ID\":\"nsm-21\",\"health\":\"Healthy\"},{\"ID\":\"nsm-22\",\"health\":\"Healthy\"},{\"ID\":\"nsm-23\",\"health\":\"Healthy\"},{\"ID\":\"nsm-24\",\"health\":\"Healthy\"},{\"ID\":\"nsm-25\",\"health\":\"Healthy\"},{\"ID\":\"nsm-26\",\"health\":\"Healthy\"},{\"ID\":\"nsm-27\",\"health\":\"Healthy\"},{\"ID\":\"nsm-28\",\"health\":\"Healthy\"},{\"ID\":\"nsm-29\",\"health\":\"Healthy\"},{\"ID\":\"nsm-30\",\"health\":\"Healthy\"},{\"ID\":\"nsm-31\",\"health\":\"Healthy\"},{\"ID\":\"nsm-32\",\"health\":\"Healthy\"}]} span=435ab8cbdd3095a6:0b6387a2c9c3712c:435ab8cbdd3095a6:1"
time="2021-06-16T17:06:03Z" level=info msg="Send device plugins info" operation=sendDeviceUpdate span="435ab8cbdd3095a6:0b6387a2c9c3712c:435ab8cbdd3095a6:1"
time="2021-06-16T17:06:03Z" level=info msg="Delaying 30s" operation=ListAndWatch-3 span="435ab8cbdd3095a6:435ab8cbdd3095a6:0000000000000000:1"
2021/06/16 17:06:03 Reporting span 435ab8cbdd3095a6:435ab8cbdd3095a6:0000000000000000:1
time="2021-06-16T17:06:33Z" level=info msg="==--> ListAndWatch-4() span:165fac64feeb1067:165fac64feeb1067:0000000000000000:1"
time="2021-06-16T17:06:33Z" level=info msg="==----> recieveWorkspaces() span:165fac64feeb1067:624b15619b459e5c:165fac64feeb1067:1"
time="2021-06-16T17:06:33Z" level=info msg="Request workspaces list" operation=recieveWorkspaces span="165fac64feeb1067:624b15619b459e5c:165fac64feeb1067:1"
time="2021-06-16T17:06:33Z" level=info msg="==------> enumWorkspaces() span:165fac64feeb1067:59c005015add7f3b:624b15619b459e5c:1"
time="2021-06-16T17:06:33Z" level=info msg="Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock..."
time="2021-06-16T17:06:33Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:06:33Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:06:33Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00031d000 {member1.com}:0xc00031d080 {member2.com}:0xc00031cec0]}"
time="2021-06-16T17:06:33Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:06:33Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:33Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:06:33Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:06:33Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:33Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:06:33Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:06:33Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:33Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:06:33Z" level=info msg="Found 3 tlsconfigs. [0xc000410180 0xc000410480 0xc000410780]"
time="2021-06-16T17:06:33Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:38Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:06:38Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:43Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:06:43Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:43Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:43Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:43Z" level=info msg="Requesting nsmd for client connection..."
time="2021-06-16T17:06:43Z" level=info msg=">><<-------- /nsmdapi.NSMD/EnumConnection()=\"\" span=165fac64feeb1067:59c005015add7f3b:624b15619b459e5c:1"
time="2021-06-16T17:06:43Z" level=info msg=">><<-------- request={} span=165fac64feeb1067:59c005015add7f3b:624b15619b459e5c:1"
2021/06/16 17:06:43 Reporting span 165fac64feeb1067:13c9850c4cceaf67:59c005015add7f3b:1
time="2021-06-16T17:06:43Z" level=info msg=">><<-------- response={\"workspace\":[\"nsm-29\",\"nsm-18\"]} span=165fac64feeb1067:59c005015add7f3b:624b15619b459e5c:1"
time="2021-06-16T17:06:43Z" level=info msg=">><<------ reply={\"workspace\":[\"nsm-29\",\"nsm-18\"]} span=165fac64feeb1067:59c005015add7f3b:624b15619b459e5c:1"
2021/06/16 17:06:43 Reporting span 165fac64feeb1067:59c005015add7f3b:624b15619b459e5c:1
time="2021-06-16T17:06:43Z" level=info msg=">><<---- reply={\"workspace\":[\"nsm-29\",\"nsm-18\"]} span=165fac64feeb1067:624b15619b459e5c:165fac64feeb1067:1"
2021/06/16 17:06:43 Reporting span 165fac64feeb1067:624b15619b459e5c:165fac64feeb1067:1
time="2021-06-16T17:06:43Z" level=info msg="==----> sendDeviceUpdate() span:165fac64feeb1067:0a572bb81435ffa0:165fac64feeb1067:1"
time="2021-06-16T17:06:43Z" level=info msg=">><<---- info={\"devices\":[{\"ID\":\"nsm-1\",\"health\":\"Healthy\"},{\"ID\":\"nsm-2\",\"health\":\"Healthy\"},{\"ID\":\"nsm-3\",\"health\":\"Healthy\"},{\"ID\":\"nsm-4\",\"health\":\"Healthy\"},{\"ID\":\"nsm-5\",\"health\":\"Healthy\"},{\"ID\":\"nsm-6\",\"health\":\"Healthy\"},{\"ID\":\"nsm-7\",\"health\":\"Healthy\"},{\"ID\":\"nsm-8\",\"health\":\"Healthy\"},{\"ID\":\"nsm-9\",\"health\":\"Healthy\"},{\"ID\":\"nsm-10\",\"health\":\"Healthy\"},{\"ID\":\"nsm-11\",\"health\":\"Healthy\"},{\"ID\":\"nsm-12\",\"health\":\"Healthy\"},{\"ID\":\"nsm-13\",\"health\":\"Healthy\"},{\"ID\":\"nsm-14\",\"health\":\"Healthy\"},{\"ID\":\"nsm-15\",\"health\":\"Healthy\"},{\"ID\":\"nsm-16\",\"health\":\"Healthy\"},{\"ID\":\"nsm-17\",\"health\":\"Healthy\"},{\"ID\":\"nsm-18\",\"health\":\"Healthy\"},{\"ID\":\"nsm-19\",\"health\":\"Healthy\"},{\"ID\":\"nsm-20\",\"health\":\"Healthy\"},{\"ID\":\"nsm-21\",\"health\":\"Healthy\"},{\"ID\":\"nsm-22\",\"health\":\"Healthy\"},{\"ID\":\"nsm-23\",\"health\":\"Healthy\"},{\"ID\":\"nsm-24\",\"health\":\"Healthy\"},{\"ID\":\"nsm-25\",\"health\":\"Healthy\"},{\"ID\":\"nsm-26\",\"health\":\"Healthy\"},{\"ID\":\"nsm-27\",\"health\":\"Healthy\"},{\"ID\":\"nsm-28\",\"health\":\"Healthy\"},{\"ID\":\"nsm-29\",\"health\":\"Healthy\"},{\"ID\":\"nsm-30\",\"health\":\"Healthy\"},{\"ID\":\"nsm-31\",\"health\":\"Healthy\"},{\"ID\":\"nsm-32\",\"health\":\"Healthy\"}]} span=165fac64feeb1067:0a572bb81435ffa0:165fac64feeb1067:1"
time="2021-06-16T17:06:43Z" level=info msg="Send device plugins info" operation=sendDeviceUpdate span="165fac64feeb1067:0a572bb81435ffa0:165fac64feeb1067:1"
time="2021-06-16T17:06:43Z" level=info msg="Delaying 30s" operation=ListAndWatch-4 span="165fac64feeb1067:165fac64feeb1067:0000000000000000:1"
2021/06/16 17:06:43 Reporting span 165fac64feeb1067:165fac64feeb1067:0000000000000000:1
time="2021-06-16T17:07:13Z" level=info msg="==--> ListAndWatch-5() span:6704b109db5bc0cb:6704b109db5bc0cb:0000000000000000:1"
time="2021-06-16T17:07:13Z" level=info msg="==----> recieveWorkspaces() span:6704b109db5bc0cb:1a7e1a7bbceb9fad:6704b109db5bc0cb:1"
time="2021-06-16T17:07:13Z" level=info msg="Request workspaces list" operation=recieveWorkspaces span="6704b109db5bc0cb:1a7e1a7bbceb9fad:6704b109db5bc0cb:1"
time="2021-06-16T17:07:13Z" level=info msg="==------> enumWorkspaces() span:6704b109db5bc0cb:174ce0473a8ae797:1a7e1a7bbceb9fad:1"
time="2021-06-16T17:07:13Z" level=info msg="Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock..."
time="2021-06-16T17:07:13Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:07:13Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:07:13Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000381900 {member1.com}:0xc000381880 {member2.com}:0xc000381800]}"
time="2021-06-16T17:07:13Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:07:13Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:13Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:07:13Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:07:13Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:13Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:07:13Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:07:13Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:13Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:07:13Z" level=info msg="Found 3 tlsconfigs. [0xc000589500 0xc000589680 0xc000589800]"
time="2021-06-16T17:07:13Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:18Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:07:18Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:23Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:07:23Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:23Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:07:23Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:07:23Z" level=info msg="Requesting nsmd for client connection..."
time="2021-06-16T17:07:23Z" level=info msg=">><<-------- /nsmdapi.NSMD/EnumConnection()=\"\" span=6704b109db5bc0cb:174ce0473a8ae797:1a7e1a7bbceb9fad:1"
time="2021-06-16T17:07:23Z" level=info msg=">><<-------- request={} span=6704b109db5bc0cb:174ce0473a8ae797:1a7e1a7bbceb9fad:1"
2021/06/16 17:07:23 Reporting span 6704b109db5bc0cb:21c398078fbd220c:174ce0473a8ae797:1
time="2021-06-16T17:07:23Z" level=info msg=">><<-------- response={\"workspace\":[\"nsm-29\",\"nsm-18\"]} span=6704b109db5bc0cb:174ce0473a8ae797:1a7e1a7bbceb9fad:1"
time="2021-06-16T17:07:23Z" level=info msg=">><<------ reply={\"workspace\":[\"nsm-29\",\"nsm-18\"]} span=6704b109db5bc0cb:174ce0473a8ae797:1a7e1a7bbceb9fad:1"
2021/06/16 17:07:23 Reporting span 6704b109db5bc0cb:174ce0473a8ae797:1a7e1a7bbceb9fad:1
time="2021-06-16T17:07:23Z" level=info msg=">><<---- reply={\"workspace\":[\"nsm-29\",\"nsm-18\"]} span=6704b109db5bc0cb:1a7e1a7bbceb9fad:6704b109db5bc0cb:1"
2021/06/16 17:07:23 Reporting span 6704b109db5bc0cb:1a7e1a7bbceb9fad:6704b109db5bc0cb:1
time="2021-06-16T17:07:23Z" level=info msg="==----> sendDeviceUpdate() span:6704b109db5bc0cb:157ebfe8d2fb5b9e:6704b109db5bc0cb:1"
time="2021-06-16T17:07:23Z" level=info msg=">><<---- info={\"devices\":[{\"ID\":\"nsm-1\",\"health\":\"Healthy\"},{\"ID\":\"nsm-2\",\"health\":\"Healthy\"},{\"ID\":\"nsm-3\",\"health\":\"Healthy\"},{\"ID\":\"nsm-4\",\"health\":\"Healthy\"},{\"ID\":\"nsm-5\",\"health\":\"Healthy\"},{\"ID\":\"nsm-6\",\"health\":\"Healthy\"},{\"ID\":\"nsm-7\",\"health\":\"Healthy\"},{\"ID\":\"nsm-8\",\"health\":\"Healthy\"},{\"ID\":\"nsm-9\",\"health\":\"Healthy\"},{\"ID\":\"nsm-10\",\"health\":\"Healthy\"},{\"ID\":\"nsm-11\",\"health\":\"Healthy\"},{\"ID\":\"nsm-12\",\"health\":\"Healthy\"},{\"ID\":\"nsm-13\",\"health\":\"Healthy\"},{\"ID\":\"nsm-14\",\"health\":\"Healthy\"},{\"ID\":\"nsm-15\",\"health\":\"Healthy\"},{\"ID\":\"nsm-16\",\"health\":\"Healthy\"},{\"ID\":\"nsm-17\",\"health\":\"Healthy\"},{\"ID\":\"nsm-18\",\"health\":\"Healthy\"},{\"ID\":\"nsm-19\",\"health\":\"Healthy\"},{\"ID\":\"nsm-20\",\"health\":\"Healthy\"},{\"ID\":\"nsm-21\",\"health\":\"Healthy\"},{\"ID\":\"nsm-22\",\"health\":\"Healthy\"},{\"ID\":\"nsm-23\",\"health\":\"Healthy\"},{\"ID\":\"nsm-24\",\"health\":\"Healthy\"},{\"ID\":\"nsm-25\",\"health\":\"Healthy\"},{\"ID\":\"nsm-26\",\"health\":\"Healthy\"},{\"ID\":\"nsm-27\",\"health\":\"Healthy\"},{\"ID\":\"nsm-28\",\"health\":\"Healthy\"},{\"ID\":\"nsm-29\",\"health\":\"Healthy\"},{\"ID\":\"nsm-30\",\"health\":\"Healthy\"},{\"ID\":\"nsm-31\",\"health\":\"Healthy\"},{\"ID\":\"nsm-32\",\"health\":\"Healthy\"}]} span=6704b109db5bc0cb:157ebfe8d2fb5b9e:6704b109db5bc0cb:1"
time="2021-06-16T17:07:23Z" level=info msg="Send device plugins info" operation=sendDeviceUpdate span="6704b109db5bc0cb:157ebfe8d2fb5b9e:6704b109db5bc0cb:1"
time="2021-06-16T17:07:23Z" level=info msg="Delaying 30s" operation=ListAndWatch-5 span="6704b109db5bc0cb:6704b109db5bc0cb:0000000000000000:1"
2021/06/16 17:07:23 Reporting span 6704b109db5bc0cb:6704b109db5bc0cb:0000000000000000:1
time="2021-06-16T17:07:53Z" level=info msg="==--> ListAndWatch-6() span:597c046ac7b17e48:597c046ac7b17e48:0000000000000000:1"
time="2021-06-16T17:07:53Z" level=info msg="==----> recieveWorkspaces() span:597c046ac7b17e48:31ce949184416372:597c046ac7b17e48:1"
time="2021-06-16T17:07:53Z" level=info msg="Request workspaces list" operation=recieveWorkspaces span="597c046ac7b17e48:31ce949184416372:597c046ac7b17e48:1"
time="2021-06-16T17:07:53Z" level=info msg="==------> enumWorkspaces() span:597c046ac7b17e48:655d55333095a9ea:31ce949184416372:1"
time="2021-06-16T17:07:53Z" level=info msg="Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock..."
time="2021-06-16T17:07:53Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:07:53Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:07:53Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004d69c0 {member1.com}:0xc0004d6a40 {member2.com}:0xc0004d6940]}"
time="2021-06-16T17:07:53Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:07:53Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:53Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:07:53Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:07:53Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:53Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:07:53Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:07:53Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:53Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:07:53Z" level=info msg="Found 3 tlsconfigs. [0xc0004adb00 0xc0004ade00 0xc00038c000]"
time="2021-06-16T17:07:53Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:58Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:07:58Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:03Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:03Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:03Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:03Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:03Z" level=info msg="Requesting nsmd for client connection..."
time="2021-06-16T17:08:03Z" level=info msg=">><<-------- /nsmdapi.NSMD/EnumConnection()=\"\" span=597c046ac7b17e48:655d55333095a9ea:31ce949184416372:1"
time="2021-06-16T17:08:03Z" level=info msg=">><<-------- request={} span=597c046ac7b17e48:655d55333095a9ea:31ce949184416372:1"
2021/06/16 17:08:03 Reporting span 597c046ac7b17e48:24d24d667928f3d4:655d55333095a9ea:1
time="2021-06-16T17:08:03Z" level=info msg=">><<-------- response={\"workspace\":[\"nsm-18\",\"nsm-29\"]} span=597c046ac7b17e48:655d55333095a9ea:31ce949184416372:1"
time="2021-06-16T17:08:03Z" level=info msg=">><<------ reply={\"workspace\":[\"nsm-18\",\"nsm-29\"]} span=597c046ac7b17e48:655d55333095a9ea:31ce949184416372:1"
2021/06/16 17:08:03 Reporting span 597c046ac7b17e48:655d55333095a9ea:31ce949184416372:1
time="2021-06-16T17:08:03Z" level=info msg=">><<---- reply={\"workspace\":[\"nsm-18\",\"nsm-29\"]} span=597c046ac7b17e48:31ce949184416372:597c046ac7b17e48:1"
2021/06/16 17:08:03 Reporting span 597c046ac7b17e48:31ce949184416372:597c046ac7b17e48:1
time="2021-06-16T17:08:03Z" level=info msg="==----> sendDeviceUpdate() span:597c046ac7b17e48:1d01a7b575ab5fa6:597c046ac7b17e48:1"
time="2021-06-16T17:08:03Z" level=info msg=">><<---- info={\"devices\":[{\"ID\":\"nsm-1\",\"health\":\"Healthy\"},{\"ID\":\"nsm-2\",\"health\":\"Healthy\"},{\"ID\":\"nsm-3\",\"health\":\"Healthy\"},{\"ID\":\"nsm-4\",\"health\":\"Healthy\"},{\"ID\":\"nsm-5\",\"health\":\"Healthy\"},{\"ID\":\"nsm-6\",\"health\":\"Healthy\"},{\"ID\":\"nsm-7\",\"health\":\"Healthy\"},{\"ID\":\"nsm-8\",\"health\":\"Healthy\"},{\"ID\":\"nsm-9\",\"health\":\"Healthy\"},{\"ID\":\"nsm-10\",\"health\":\"Healthy\"},{\"ID\":\"nsm-11\",\"health\":\"Healthy\"},{\"ID\":\"nsm-12\",\"health\":\"Healthy\"},{\"ID\":\"nsm-13\",\"health\":\"Healthy\"},{\"ID\":\"nsm-14\",\"health\":\"Healthy\"},{\"ID\":\"nsm-15\",\"health\":\"Healthy\"},{\"ID\":\"nsm-16\",\"health\":\"Healthy\"},{\"ID\":\"nsm-17\",\"health\":\"Healthy\"},{\"ID\":\"nsm-18\",\"health\":\"Healthy\"},{\"ID\":\"nsm-19\",\"health\":\"Healthy\"},{\"ID\":\"nsm-20\",\"health\":\"Healthy\"},{\"ID\":\"nsm-21\",\"health\":\"Healthy\"},{\"ID\":\"nsm-22\",\"health\":\"Healthy\"},{\"ID\":\"nsm-23\",\"health\":\"Healthy\"},{\"ID\":\"nsm-24\",\"health\":\"Healthy\"},{\"ID\":\"nsm-25\",\"health\":\"Healthy\"},{\"ID\":\"nsm-26\",\"health\":\"Healthy\"},{\"ID\":\"nsm-27\",\"health\":\"Healthy\"},{\"ID\":\"nsm-28\",\"health\":\"Healthy\"},{\"ID\":\"nsm-29\",\"health\":\"Healthy\"},{\"ID\":\"nsm-30\",\"health\":\"Healthy\"},{\"ID\":\"nsm-31\",\"health\":\"Healthy\"},{\"ID\":\"nsm-32\",\"health\":\"Healthy\"}]} span=597c046ac7b17e48:1d01a7b575ab5fa6:597c046ac7b17e48:1"
time="2021-06-16T17:08:03Z" level=info msg="Send device plugins info" operation=sendDeviceUpdate span="597c046ac7b17e48:1d01a7b575ab5fa6:597c046ac7b17e48:1"
time="2021-06-16T17:08:03Z" level=info msg="Delaying 30s" operation=ListAndWatch-6 span="597c046ac7b17e48:597c046ac7b17e48:0000000000000000:1"
2021/06/16 17:08:03 Reporting span 597c046ac7b17e48:597c046ac7b17e48:0000000000000000:1
time="2021-06-16T17:08:26Z" level=info msg=">><<-- GRPC->/v1beta1.DevicePlugin/Allocate()=\"\" span=4a21312687909c8c:4a21312687909c8c:0000000000000000:1"
time="2021-06-16T17:08:26Z" level=info msg=">><<-- request={\"container_requests\":[{\"devicesIDs\":[\"nsm-8\"]}]} span=4a21312687909c8c:4a21312687909c8c:0000000000000000:1"
time="2021-06-16T17:08:26Z" level=info msg="==--> Allocate() span:4a21312687909c8c:6359063bd4bcdc85:4a21312687909c8c:1"
time="2021-06-16T17:08:26Z" level=info msg="Client request for nsmdp resource... container_requests: <\n  devicesIDs: \"nsm-8\"\n>\n" operation=Allocate span="4a21312687909c8c:6359063bd4bcdc85:4a21312687909c8c:1"
time="2021-06-16T17:08:26Z" level=info msg="Requesting Workspace, device ID: nsm-8" operation=Allocate span="4a21312687909c8c:6359063bd4bcdc85:4a21312687909c8c:1"
time="2021-06-16T17:08:26Z" level=info msg="==----> RequestWorkspace() span:4a21312687909c8c:075d2a6a7019f86b:6359063bd4bcdc85:1"
time="2021-06-16T17:08:26Z" level=info msg="Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock..."
time="2021-06-16T17:08:26Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:08:26Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:08:26Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000380cc0 {member1.com}:0xc000380dc0 {member2.com}:0xc000380bc0]}"
time="2021-06-16T17:08:26Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:08:26Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:26Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:08:26Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:08:26Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:26Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:08:26Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:08:26Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:26Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:08:26Z" level=info msg="Found 3 tlsconfigs. [0xc000291200 0xc000291380 0xc000291680]"
time="2021-06-16T17:08:26Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:31Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:31Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:33Z" level=info msg="==--> ListAndWatch-7() span:4ce1b083913d38d7:4ce1b083913d38d7:0000000000000000:1"
time="2021-06-16T17:08:33Z" level=info msg="==----> recieveWorkspaces() span:4ce1b083913d38d7:1104be1b262c605d:4ce1b083913d38d7:1"
time="2021-06-16T17:08:33Z" level=info msg="Request workspaces list" operation=recieveWorkspaces span="4ce1b083913d38d7:1104be1b262c605d:4ce1b083913d38d7:1"
time="2021-06-16T17:08:33Z" level=info msg="==------> enumWorkspaces() span:4ce1b083913d38d7:101e41d4d2f26e34:1104be1b262c605d:1"
time="2021-06-16T17:08:33Z" level=info msg="Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock..."
time="2021-06-16T17:08:33Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:08:33Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:08:33Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001018c0 {member1.com}:0xc000101840 {member2.com}:0xc0001017c0]}"
time="2021-06-16T17:08:33Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:08:33Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:33Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:08:33Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:08:33Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:33Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:08:33Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:08:33Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:33Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:08:33Z" level=info msg="Found 3 tlsconfigs. [0xc0004ad380 0xc0004adb00 0xc0004ade00]"
time="2021-06-16T17:08:33Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:36Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:36Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:36Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:36Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:36Z" level=info msg="Requesting nsmd for client connection..."
time="2021-06-16T17:08:36Z" level=info msg=">><<---- /nsmdapi.NSMD/RequestClientConnection()=\"\" span=4a21312687909c8c:6359063bd4bcdc85:4a21312687909c8c:1"
time="2021-06-16T17:08:36Z" level=info msg=">><<---- request={\"workspace\":\"nsm-8\"} span=4a21312687909c8c:6359063bd4bcdc85:4a21312687909c8c:1"
time="2021-06-16T17:08:38Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:38Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:43Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:43Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:43Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:43Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:43Z" level=info msg="Requesting nsmd for client connection..."
time="2021-06-16T17:08:43Z" level=info msg=">><<-------- /nsmdapi.NSMD/EnumConnection()=\"\" span=4ce1b083913d38d7:101e41d4d2f26e34:1104be1b262c605d:1"
time="2021-06-16T17:08:43Z" level=info msg=">><<-------- request={} span=4ce1b083913d38d7:101e41d4d2f26e34:1104be1b262c605d:1"
2021/06/16 17:08:43 Reporting span 4ce1b083913d38d7:294e7925889e848f:101e41d4d2f26e34:1
time="2021-06-16T17:08:43Z" level=info msg=">><<-------- response={\"workspace\":[\"nsm-18\",\"nsm-29\"]} span=4ce1b083913d38d7:101e41d4d2f26e34:1104be1b262c605d:1"
time="2021-06-16T17:08:43Z" level=info msg=">><<------ reply={\"workspace\":[\"nsm-18\",\"nsm-29\"]} span=4ce1b083913d38d7:101e41d4d2f26e34:1104be1b262c605d:1"
2021/06/16 17:08:43 Reporting span 4ce1b083913d38d7:101e41d4d2f26e34:1104be1b262c605d:1
time="2021-06-16T17:08:43Z" level=info msg=">><<---- reply={\"workspace\":[\"nsm-18\",\"nsm-29\"]} span=4ce1b083913d38d7:1104be1b262c605d:4ce1b083913d38d7:1"
2021/06/16 17:08:43 Reporting span 4ce1b083913d38d7:1104be1b262c605d:4ce1b083913d38d7:1
time="2021-06-16T17:08:43Z" level=info msg="==----> sendDeviceUpdate() span:4ce1b083913d38d7:61cacef4422eab5b:4ce1b083913d38d7:1"
time="2021-06-16T17:08:43Z" level=info msg=">><<---- info={\"devices\":[{\"ID\":\"nsm-1\",\"health\":\"Healthy\"},{\"ID\":\"nsm-2\",\"health\":\"Healthy\"},{\"ID\":\"nsm-3\",\"health\":\"Healthy\"},{\"ID\":\"nsm-4\",\"health\":\"Healthy\"},{\"ID\":\"nsm-5\",\"health\":\"Healthy\"},{\"ID\":\"nsm-6\",\"health\":\"Healthy\"},{\"ID\":\"nsm-7\",\"health\":\"Healthy\"},{\"ID\":\"nsm-8\",\"health\":\"Healthy\"},{\"ID\":\"nsm-9\",\"health\":\"Healthy\"},{\"ID\":\"nsm-10\",\"health\":\"Healthy\"},{\"ID\":\"nsm-11\",\"health\":\"Healthy\"},{\"ID\":\"nsm-12\",\"health\":\"Healthy\"},{\"ID\":\"nsm-13\",\"health\":\"Healthy\"},{\"ID\":\"nsm-14\",\"health\":\"Healthy\"},{\"ID\":\"nsm-15\",\"health\":\"Healthy\"},{\"ID\":\"nsm-16\",\"health\":\"Healthy\"},{\"ID\":\"nsm-17\",\"health\":\"Healthy\"},{\"ID\":\"nsm-18\",\"health\":\"Healthy\"},{\"ID\":\"nsm-19\",\"health\":\"Healthy\"},{\"ID\":\"nsm-20\",\"health\":\"Healthy\"},{\"ID\":\"nsm-21\",\"health\":\"Healthy\"},{\"ID\":\"nsm-22\",\"health\":\"Healthy\"},{\"ID\":\"nsm-23\",\"health\":\"Healthy\"},{\"ID\":\"nsm-24\",\"health\":\"Healthy\"},{\"ID\":\"nsm-25\",\"health\":\"Healthy\"},{\"ID\":\"nsm-26\",\"health\":\"Healthy\"},{\"ID\":\"nsm-27\",\"health\":\"Healthy\"},{\"ID\":\"nsm-28\",\"health\":\"Healthy\"},{\"ID\":\"nsm-29\",\"health\":\"Healthy\"},{\"ID\":\"nsm-30\",\"health\":\"Healthy\"},{\"ID\":\"nsm-31\",\"health\":\"Healthy\"},{\"ID\":\"nsm-32\",\"health\":\"Healthy\"}]} span=4ce1b083913d38d7:61cacef4422eab5b:4ce1b083913d38d7:1"
time="2021-06-16T17:08:43Z" level=info msg="Send device plugins info" operation=sendDeviceUpdate span="4ce1b083913d38d7:61cacef4422eab5b:4ce1b083913d38d7:1"
time="2021-06-16T17:08:43Z" level=info msg="Delaying 30s" operation=ListAndWatch-7 span="4ce1b083913d38d7:4ce1b083913d38d7:0000000000000000:1"
2021/06/16 17:08:43 Reporting span 4ce1b083913d38d7:4ce1b083913d38d7:0000000000000000:1
2021/06/16 17:08:46 Reporting span 4a21312687909c8c:198fd9c4738ba6a9:6359063bd4bcdc85:1
time="2021-06-16T17:08:46Z" level=info msg=">><<---- response={\"workspace\":\"nsm-8\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=4a21312687909c8c:6359063bd4bcdc85:4a21312687909c8c:1"
time="2021-06-16T17:08:46Z" level=info msg=">><<---- response={\"workspace\":\"nsm-8\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=4a21312687909c8c:075d2a6a7019f86b:6359063bd4bcdc85:1"
time="2021-06-16T17:08:46Z" level=info msg="nsmd allocated workspace workspace:\"nsm-8\" hostBasedir:\"/var/lib/networkservicemesh/\" clientBaseDir:\"/var/lib/networkservicemesh/\" nsmServerSocket:\"nsm.server.io.sock\" nsmClientSocket:\"nsm.client.io.sock\"  for client operations..." operation=RequestWorkspace span="4a21312687909c8c:075d2a6a7019f86b:6359063bd4bcdc85:1"
2021/06/16 17:08:46 Reporting span 4a21312687909c8c:075d2a6a7019f86b:6359063bd4bcdc85:1
time="2021-06-16T17:08:46Z" level=info msg="Received Workspace workspace:\"nsm-8\" hostBasedir:\"/var/lib/networkservicemesh/\" clientBaseDir:\"/var/lib/networkservicemesh/\" nsmServerSocket:\"nsm.server.io.sock\" nsmClientSocket:\"nsm.client.io.sock\" " operation=Allocate span="4a21312687909c8c:6359063bd4bcdc85:4a21312687909c8c:1"
time="2021-06-16T17:08:46Z" level=info msg=">><<-- responses={\"container_responses\":[{\"envs\":{\"NSM_CLIENT_SOCKET\":\"/var/lib/networkservicemesh/nsm.client.io.sock\",\"NSM_DEVICE_PLUGIN\":\"true\",\"NSM_SERVER_SOCKET\":\"/var/lib/networkservicemesh/nsm.server.io.sock\",\"WORKSPACE\":\"/var/lib/networkservicemesh/\"},\"mounts\":[{\"container_path\":\"/run/spire/sockets\",\"host_path\":\"/run/spire/sockets\",\"read_only\":true},{\"container_path\":\"/var/lib/networkservicemesh/\",\"host_path\":\"/var/lib/networkservicemesh/nsm-8\"}]}]} span=4a21312687909c8c:6359063bd4bcdc85:4a21312687909c8c:1"
time="2021-06-16T17:08:46Z" level=info msg="AllocateResponse: &AllocateResponse{ContainerResponses:[]*ContainerAllocateResponse{&ContainerAllocateResponse{Envs:map[string]string{NSM_CLIENT_SOCKET: /var/lib/networkservicemesh/nsm.client.io.sock,NSM_DEVICE_PLUGIN: true,NSM_SERVER_SOCKET: /var/lib/networkservicemesh/nsm.server.io.sock,WORKSPACE: /var/lib/networkservicemesh/,},Mounts:[]*Mount{&Mount{ContainerPath:/run/spire/sockets,HostPath:/run/spire/sockets,ReadOnly:true,},&Mount{ContainerPath:/var/lib/networkservicemesh/,HostPath:/var/lib/networkservicemesh/nsm-8,ReadOnly:false,},},Devices:[]*DeviceSpec{},Annotations:map[string]string{},},},}" operation=Allocate span="4a21312687909c8c:6359063bd4bcdc85:4a21312687909c8c:1"
2021/06/16 17:08:46 Reporting span 4a21312687909c8c:6359063bd4bcdc85:4a21312687909c8c:1
time="2021-06-16T17:08:46Z" level=info msg=">><<-- response={\"container_responses\":[{\"envs\":{\"NSM_CLIENT_SOCKET\":\"/var/lib/networkservicemesh/nsm.client.io.sock\",\"NSM_DEVICE_PLUGIN\":\"true\",\"NSM_SERVER_SOCKET\":\"/var/lib/networkservicemesh/nsm.server.io.sock\",\"WORKSPACE\":\"/var/lib/networkservicemesh/\"},\"mounts\":[{\"container_path\":\"/run/spire/sockets\",\"host_path\":\"/run/spire/sockets\",\"read_only\":true},{\"container_path\":\"/var/lib/networkservicemesh/\",\"host_path\":\"/var/lib/networkservicemesh/nsm-8\"}]}]} span=4a21312687909c8c:4a21312687909c8c:0000000000000000:1"
2021/06/16 17:08:46 Reporting span 4a21312687909c8c:4a21312687909c8c:0000000000000000:1
time="2021-06-16T17:08:46Z" level=info msg=">><<-- GRPC->/v1beta1.DevicePlugin/Allocate()=\"\" span=68aa25d3d0dfdf40:68aa25d3d0dfdf40:0000000000000000:1"
time="2021-06-16T17:08:46Z" level=info msg=">><<-- request={\"container_requests\":[{\"devicesIDs\":[\"nsm-8\"]}]} span=68aa25d3d0dfdf40:68aa25d3d0dfdf40:0000000000000000:1"
time="2021-06-16T17:08:46Z" level=info msg="==--> Allocate() span:68aa25d3d0dfdf40:35c9735f45afb06d:68aa25d3d0dfdf40:1"
time="2021-06-16T17:08:46Z" level=info msg="Client request for nsmdp resource... container_requests: <\n  devicesIDs: \"nsm-8\"\n>\n" operation=Allocate span="68aa25d3d0dfdf40:35c9735f45afb06d:68aa25d3d0dfdf40:1"
time="2021-06-16T17:08:46Z" level=info msg="Requesting Workspace, device ID: nsm-8" operation=Allocate span="68aa25d3d0dfdf40:35c9735f45afb06d:68aa25d3d0dfdf40:1"
time="2021-06-16T17:08:46Z" level=info msg="==----> RequestWorkspace() span:68aa25d3d0dfdf40:56ab857eb2259f2f:35c9735f45afb06d:1"
time="2021-06-16T17:08:46Z" level=info msg="Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock..."
time="2021-06-16T17:08:46Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:08:46Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:08:46Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004d6b80 {member1.com}:0xc0004d6b00 {member2.com}:0xc0004d6a80]}"
time="2021-06-16T17:08:46Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:08:46Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:46Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:08:46Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:08:46Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:46Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:08:46Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:08:46Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:46Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:08:46Z" level=info msg="Found 3 tlsconfigs. [0xc00038c000 0xc00038c480 0xc00038c600]"
time="2021-06-16T17:08:46Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:51Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:51Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:56Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:56Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:56Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:56Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:56Z" level=info msg="Requesting nsmd for client connection..."
time="2021-06-16T17:08:56Z" level=info msg=">><<---- /nsmdapi.NSMD/RequestClientConnection()=\"\" span=68aa25d3d0dfdf40:35c9735f45afb06d:68aa25d3d0dfdf40:1"
time="2021-06-16T17:08:56Z" level=info msg=">><<---- request={\"workspace\":\"nsm-8\"} span=68aa25d3d0dfdf40:35c9735f45afb06d:68aa25d3d0dfdf40:1"
2021/06/16 17:08:56 Reporting span 68aa25d3d0dfdf40:099f77c2e8181ba1:35c9735f45afb06d:1
time="2021-06-16T17:08:56Z" level=info msg=">><<---- response={\"workspace\":\"nsm-8\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=68aa25d3d0dfdf40:35c9735f45afb06d:68aa25d3d0dfdf40:1"
time="2021-06-16T17:08:56Z" level=info msg=">><<---- response={\"workspace\":\"nsm-8\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=68aa25d3d0dfdf40:56ab857eb2259f2f:35c9735f45afb06d:1"
time="2021-06-16T17:08:56Z" level=info msg="nsmd allocated workspace workspace:\"nsm-8\" hostBasedir:\"/var/lib/networkservicemesh/\" clientBaseDir:\"/var/lib/networkservicemesh/\" nsmServerSocket:\"nsm.server.io.sock\" nsmClientSocket:\"nsm.client.io.sock\"  for client operations..." operation=RequestWorkspace span="68aa25d3d0dfdf40:56ab857eb2259f2f:35c9735f45afb06d:1"
2021/06/16 17:08:56 Reporting span 68aa25d3d0dfdf40:56ab857eb2259f2f:35c9735f45afb06d:1
time="2021-06-16T17:08:56Z" level=info msg="Received Workspace workspace:\"nsm-8\" hostBasedir:\"/var/lib/networkservicemesh/\" clientBaseDir:\"/var/lib/networkservicemesh/\" nsmServerSocket:\"nsm.server.io.sock\" nsmClientSocket:\"nsm.client.io.sock\" " operation=Allocate span="68aa25d3d0dfdf40:35c9735f45afb06d:68aa25d3d0dfdf40:1"
time="2021-06-16T17:08:56Z" level=info msg=">><<-- responses={\"container_responses\":[{\"envs\":{\"NSM_CLIENT_SOCKET\":\"/var/lib/networkservicemesh/nsm.client.io.sock\",\"NSM_DEVICE_PLUGIN\":\"true\",\"NSM_SERVER_SOCKET\":\"/var/lib/networkservicemesh/nsm.server.io.sock\",\"WORKSPACE\":\"/var/lib/networkservicemesh/\"},\"mounts\":[{\"container_path\":\"/run/spire/sockets\",\"host_path\":\"/run/spire/sockets\",\"read_only\":true},{\"container_path\":\"/var/lib/networkservicemesh/\",\"host_path\":\"/var/lib/networkservicemesh/nsm-8\"}]}]} span=68aa25d3d0dfdf40:35c9735f45afb06d:68aa25d3d0dfdf40:1"
time="2021-06-16T17:08:56Z" level=info msg="AllocateResponse: &AllocateResponse{ContainerResponses:[]*ContainerAllocateResponse{&ContainerAllocateResponse{Envs:map[string]string{NSM_CLIENT_SOCKET: /var/lib/networkservicemesh/nsm.client.io.sock,NSM_DEVICE_PLUGIN: true,NSM_SERVER_SOCKET: /var/lib/networkservicemesh/nsm.server.io.sock,WORKSPACE: /var/lib/networkservicemesh/,},Mounts:[]*Mount{&Mount{ContainerPath:/run/spire/sockets,HostPath:/run/spire/sockets,ReadOnly:true,},&Mount{ContainerPath:/var/lib/networkservicemesh/,HostPath:/var/lib/networkservicemesh/nsm-8,ReadOnly:false,},},Devices:[]*DeviceSpec{},Annotations:map[string]string{},},},}" operation=Allocate span="68aa25d3d0dfdf40:35c9735f45afb06d:68aa25d3d0dfdf40:1"
2021/06/16 17:08:56 Reporting span 68aa25d3d0dfdf40:35c9735f45afb06d:68aa25d3d0dfdf40:1
time="2021-06-16T17:08:56Z" level=info msg=">><<-- response={\"container_responses\":[{\"envs\":{\"NSM_CLIENT_SOCKET\":\"/var/lib/networkservicemesh/nsm.client.io.sock\",\"NSM_DEVICE_PLUGIN\":\"true\",\"NSM_SERVER_SOCKET\":\"/var/lib/networkservicemesh/nsm.server.io.sock\",\"WORKSPACE\":\"/var/lib/networkservicemesh/\"},\"mounts\":[{\"container_path\":\"/run/spire/sockets\",\"host_path\":\"/run/spire/sockets\",\"read_only\":true},{\"container_path\":\"/var/lib/networkservicemesh/\",\"host_path\":\"/var/lib/networkservicemesh/nsm-8\"}]}]} span=68aa25d3d0dfdf40:68aa25d3d0dfdf40:0000000000000000:1"
2021/06/16 17:08:56 Reporting span 68aa25d3d0dfdf40:68aa25d3d0dfdf40:0000000000000000:1
time="2021-06-16T17:08:56Z" level=info msg=">><<-- GRPC->/v1beta1.DevicePlugin/Allocate()=\"\" span=7d712ef808961694:7d712ef808961694:0000000000000000:1"
time="2021-06-16T17:08:56Z" level=info msg=">><<-- request={\"container_requests\":[{\"devicesIDs\":[\"nsm-8\"]}]} span=7d712ef808961694:7d712ef808961694:0000000000000000:1"
time="2021-06-16T17:08:56Z" level=info msg="==--> Allocate() span:7d712ef808961694:4076c67e7987e85f:7d712ef808961694:1"
time="2021-06-16T17:08:56Z" level=info msg="Client request for nsmdp resource... container_requests: <\n  devicesIDs: \"nsm-8\"\n>\n" operation=Allocate span="7d712ef808961694:4076c67e7987e85f:7d712ef808961694:1"
time="2021-06-16T17:08:56Z" level=info msg="Requesting Workspace, device ID: nsm-8" operation=Allocate span="7d712ef808961694:4076c67e7987e85f:7d712ef808961694:1"
time="2021-06-16T17:08:56Z" level=info msg="==----> RequestWorkspace() span:7d712ef808961694:297f47687ab35542:4076c67e7987e85f:1"
time="2021-06-16T17:08:56Z" level=info msg="Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock..."
time="2021-06-16T17:08:56Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:08:56Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:08:56Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0002d8180 {member1.com}:0xc0002d8200 {member2.com}:0xc0002d8080]}"
time="2021-06-16T17:08:56Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:08:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:56Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:08:56Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:08:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:56Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:08:56Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:08:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:56Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:08:56Z" level=info msg="Found 3 tlsconfigs. [0xc000588300 0xc000588480 0xc000588600]"
time="2021-06-16T17:08:56Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:01Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:09:01Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:06Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:09:06Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:06Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:09:06Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:09:06Z" level=info msg="Requesting nsmd for client connection..."
time="2021-06-16T17:09:06Z" level=info msg=">><<---- /nsmdapi.NSMD/RequestClientConnection()=\"\" span=7d712ef808961694:4076c67e7987e85f:7d712ef808961694:1"
time="2021-06-16T17:09:06Z" level=info msg=">><<---- request={\"workspace\":\"nsm-8\"} span=7d712ef808961694:4076c67e7987e85f:7d712ef808961694:1"
2021/06/16 17:09:06 Reporting span 7d712ef808961694:79b5df5789cc33e9:4076c67e7987e85f:1
time="2021-06-16T17:09:06Z" level=info msg=">><<---- response={\"workspace\":\"nsm-8\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=7d712ef808961694:4076c67e7987e85f:7d712ef808961694:1"
time="2021-06-16T17:09:06Z" level=info msg=">><<---- response={\"workspace\":\"nsm-8\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=7d712ef808961694:297f47687ab35542:4076c67e7987e85f:1"
time="2021-06-16T17:09:06Z" level=info msg="nsmd allocated workspace workspace:\"nsm-8\" hostBasedir:\"/var/lib/networkservicemesh/\" clientBaseDir:\"/var/lib/networkservicemesh/\" nsmServerSocket:\"nsm.server.io.sock\" nsmClientSocket:\"nsm.client.io.sock\"  for client operations..." operation=RequestWorkspace span="7d712ef808961694:297f47687ab35542:4076c67e7987e85f:1"
2021/06/16 17:09:06 Reporting span 7d712ef808961694:297f47687ab35542:4076c67e7987e85f:1
time="2021-06-16T17:09:06Z" level=info msg="Received Workspace workspace:\"nsm-8\" hostBasedir:\"/var/lib/networkservicemesh/\" clientBaseDir:\"/var/lib/networkservicemesh/\" nsmServerSocket:\"nsm.server.io.sock\" nsmClientSocket:\"nsm.client.io.sock\" " operation=Allocate span="7d712ef808961694:4076c67e7987e85f:7d712ef808961694:1"
time="2021-06-16T17:09:06Z" level=info msg=">><<-- responses={\"container_responses\":[{\"envs\":{\"NSM_CLIENT_SOCKET\":\"/var/lib/networkservicemesh/nsm.client.io.sock\",\"NSM_DEVICE_PLUGIN\":\"true\",\"NSM_SERVER_SOCKET\":\"/var/lib/networkservicemesh/nsm.server.io.sock\",\"WORKSPACE\":\"/var/lib/networkservicemesh/\"},\"mounts\":[{\"container_path\":\"/run/spire/sockets\",\"host_path\":\"/run/spire/sockets\",\"read_only\":true},{\"container_path\":\"/var/lib/networkservicemesh/\",\"host_path\":\"/var/lib/networkservicemesh/nsm-8\"}]}]} span=7d712ef808961694:4076c67e7987e85f:7d712ef808961694:1"
time="2021-06-16T17:09:06Z" level=info msg="AllocateResponse: &AllocateResponse{ContainerResponses:[]*ContainerAllocateResponse{&ContainerAllocateResponse{Envs:map[string]string{NSM_CLIENT_SOCKET: /var/lib/networkservicemesh/nsm.client.io.sock,NSM_DEVICE_PLUGIN: true,NSM_SERVER_SOCKET: /var/lib/networkservicemesh/nsm.server.io.sock,WORKSPACE: /var/lib/networkservicemesh/,},Mounts:[]*Mount{&Mount{ContainerPath:/run/spire/sockets,HostPath:/run/spire/sockets,ReadOnly:true,},&Mount{ContainerPath:/var/lib/networkservicemesh/,HostPath:/var/lib/networkservicemesh/nsm-8,ReadOnly:false,},},Devices:[]*DeviceSpec{},Annotations:map[string]string{},},},}" operation=Allocate span="7d712ef808961694:4076c67e7987e85f:7d712ef808961694:1"
2021/06/16 17:09:06 Reporting span 7d712ef808961694:4076c67e7987e85f:7d712ef808961694:1
time="2021-06-16T17:09:06Z" level=info msg=">><<-- response={\"container_responses\":[{\"envs\":{\"NSM_CLIENT_SOCKET\":\"/var/lib/networkservicemesh/nsm.client.io.sock\",\"NSM_DEVICE_PLUGIN\":\"true\",\"NSM_SERVER_SOCKET\":\"/var/lib/networkservicemesh/nsm.server.io.sock\",\"WORKSPACE\":\"/var/lib/networkservicemesh/\"},\"mounts\":[{\"container_path\":\"/run/spire/sockets\",\"host_path\":\"/run/spire/sockets\",\"read_only\":true},{\"container_path\":\"/var/lib/networkservicemesh/\",\"host_path\":\"/var/lib/networkservicemesh/nsm-8\"}]}]} span=7d712ef808961694:7d712ef808961694:0000000000000000:1"
2021/06/16 17:09:06 Reporting span 7d712ef808961694:7d712ef808961694:0000000000000000:1
time="2021-06-16T17:09:06Z" level=info msg=">><<-- GRPC->/v1beta1.DevicePlugin/Allocate()=\"\" span=2cc0479bbdbe686c:2cc0479bbdbe686c:0000000000000000:1"
time="2021-06-16T17:09:06Z" level=info msg=">><<-- request={\"container_requests\":[{\"devicesIDs\":[\"nsm-26\"]}]} span=2cc0479bbdbe686c:2cc0479bbdbe686c:0000000000000000:1"
time="2021-06-16T17:09:06Z" level=info msg="==--> Allocate() span:2cc0479bbdbe686c:28e63c77ed761e28:2cc0479bbdbe686c:1"
time="2021-06-16T17:09:06Z" level=info msg="Client request for nsmdp resource... container_requests: <\n  devicesIDs: \"nsm-26\"\n>\n" operation=Allocate span="2cc0479bbdbe686c:28e63c77ed761e28:2cc0479bbdbe686c:1"
time="2021-06-16T17:09:06Z" level=info msg="Requesting Workspace, device ID: nsm-26" operation=Allocate span="2cc0479bbdbe686c:28e63c77ed761e28:2cc0479bbdbe686c:1"
time="2021-06-16T17:09:06Z" level=info msg="==----> RequestWorkspace() span:2cc0479bbdbe686c:005655afe659f9ac:28e63c77ed761e28:1"
time="2021-06-16T17:09:06Z" level=info msg="Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock..."
time="2021-06-16T17:09:06Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:09:06Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:09:06Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004d7740 {member1.com}:0xc0004d77c0 {member2.com}:0xc0004d76c0]}"
time="2021-06-16T17:09:06Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:09:06Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:06Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:09:06Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:09:06Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:06Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:09:06Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:09:06Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:06Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:09:06Z" level=info msg="Found 3 tlsconfigs. [0xc00031a180 0xc00031a600 0xc00031a900]"
time="2021-06-16T17:09:06Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:11Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:09:11Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:13Z" level=info msg="==--> ListAndWatch-8() span:621d3c9ce9615f79:621d3c9ce9615f79:0000000000000000:1"
time="2021-06-16T17:09:13Z" level=info msg="==----> recieveWorkspaces() span:621d3c9ce9615f79:797fcd7db5eda066:621d3c9ce9615f79:1"
time="2021-06-16T17:09:13Z" level=info msg="Request workspaces list" operation=recieveWorkspaces span="621d3c9ce9615f79:797fcd7db5eda066:621d3c9ce9615f79:1"
time="2021-06-16T17:09:13Z" level=info msg="==------> enumWorkspaces() span:621d3c9ce9615f79:006c0ae74fe39cf4:797fcd7db5eda066:1"
time="2021-06-16T17:09:13Z" level=info msg="Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock..."
time="2021-06-16T17:09:13Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:09:13Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:09:14Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0002d8900 {member1.com}:0xc0002d8980 {member2.com}:0xc0002d8880]}"
time="2021-06-16T17:09:14Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:09:14Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:14Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:09:14Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:09:14Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:14Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:09:14Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:09:14Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:14Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:09:14Z" level=info msg="Found 3 tlsconfigs. [0xc0000d6300 0xc0000d6480 0xc0000d6600]"
time="2021-06-16T17:09:14Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:16Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:09:16Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:16Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:09:16Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:09:16Z" level=info msg="Requesting nsmd for client connection..."
time="2021-06-16T17:09:16Z" level=info msg=">><<---- /nsmdapi.NSMD/RequestClientConnection()=\"\" span=2cc0479bbdbe686c:28e63c77ed761e28:2cc0479bbdbe686c:1"
time="2021-06-16T17:09:16Z" level=info msg=">><<---- request={\"workspace\":\"nsm-26\"} span=2cc0479bbdbe686c:28e63c77ed761e28:2cc0479bbdbe686c:1"
time="2021-06-16T17:09:19Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:09:19Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:24Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:09:24Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:24Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:09:24Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:09:24Z" level=info msg="Requesting nsmd for client connection..."
time="2021-06-16T17:09:24Z" level=info msg=">><<-------- /nsmdapi.NSMD/EnumConnection()=\"\" span=621d3c9ce9615f79:006c0ae74fe39cf4:797fcd7db5eda066:1"
time="2021-06-16T17:09:24Z" level=info msg=">><<-------- request={} span=621d3c9ce9615f79:006c0ae74fe39cf4:797fcd7db5eda066:1"
2021/06/16 17:09:24 Reporting span 621d3c9ce9615f79:1955aace69282d81:006c0ae74fe39cf4:1
time="2021-06-16T17:09:24Z" level=info msg=">><<-------- response={\"workspace\":[\"nsm-18\",\"nsm-8\",\"nsm-29\"]} span=621d3c9ce9615f79:006c0ae74fe39cf4:797fcd7db5eda066:1"
time="2021-06-16T17:09:24Z" level=info msg=">><<------ reply={\"workspace\":[\"nsm-18\",\"nsm-8\",\"nsm-29\"]} span=621d3c9ce9615f79:006c0ae74fe39cf4:797fcd7db5eda066:1"
2021/06/16 17:09:24 Reporting span 621d3c9ce9615f79:006c0ae74fe39cf4:797fcd7db5eda066:1
time="2021-06-16T17:09:24Z" level=info msg=">><<---- reply={\"workspace\":[\"nsm-18\",\"nsm-8\",\"nsm-29\"]} span=621d3c9ce9615f79:797fcd7db5eda066:621d3c9ce9615f79:1"
time="2021-06-16T17:09:24Z" level=info msg=">><<---- new-devices=[{\"ID\":\"nsm-1\",\"health\":\"Healthy\"},{\"ID\":\"nsm-2\",\"health\":\"Healthy\"},{\"ID\":\"nsm-3\",\"health\":\"Healthy\"},{\"ID\":\"nsm-4\",\"health\":\"Healthy\"},{\"ID\":\"nsm-5\",\"health\":\"Healthy\"},{\"ID\":\"nsm-6\",\"health\":\"Healthy\"},{\"ID\":\"nsm-7\",\"health\":\"Healthy\"},{\"ID\":\"nsm-8\",\"health\":\"Healthy\"},{\"ID\":\"nsm-9\",\"health\":\"Healthy\"},{\"ID\":\"nsm-10\",\"health\":\"Healthy\"},{\"ID\":\"nsm-11\",\"health\":\"Healthy\"},{\"ID\":\"nsm-12\",\"health\":\"Healthy\"},{\"ID\":\"nsm-13\",\"health\":\"Healthy\"},{\"ID\":\"nsm-14\",\"health\":\"Healthy\"},{\"ID\":\"nsm-15\",\"health\":\"Healthy\"},{\"ID\":\"nsm-16\",\"health\":\"Healthy\"},{\"ID\":\"nsm-17\",\"health\":\"Healthy\"},{\"ID\":\"nsm-18\",\"health\":\"Healthy\"},{\"ID\":\"nsm-19\",\"health\":\"Healthy\"},{\"ID\":\"nsm-20\",\"health\":\"Healthy\"},{\"ID\":\"nsm-21\",\"health\":\"Healthy\"},{\"ID\":\"nsm-22\",\"health\":\"Healthy\"},{\"ID\":\"nsm-23\",\"health\":\"Healthy\"},{\"ID\":\"nsm-24\",\"health\":\"Healthy\"},{\"ID\":\"nsm-25\",\"health\":\"Healthy\"},{\"ID\":\"nsm-26\",\"health\":\"Healthy\"},{\"ID\":\"nsm-27\",\"health\":\"Healthy\"},{\"ID\":\"nsm-28\",\"health\":\"Healthy\"},{\"ID\":\"nsm-29\",\"health\":\"Healthy\"},{\"ID\":\"nsm-30\",\"health\":\"Healthy\"},{\"ID\":\"nsm-31\",\"health\":\"Healthy\"},{\"ID\":\"nsm-32\",\"health\":\"Healthy\"},{\"ID\":\"nsm-33\",\"health\":\"Healthy\"}] span=621d3c9ce9615f79:797fcd7db5eda066:621d3c9ce9615f79:1"
2021/06/16 17:09:24 Reporting span 621d3c9ce9615f79:797fcd7db5eda066:621d3c9ce9615f79:1
time="2021-06-16T17:09:24Z" level=info msg="==----> sendDeviceUpdate() span:621d3c9ce9615f79:4f75fa585875bf31:621d3c9ce9615f79:1"
time="2021-06-16T17:09:24Z" level=info msg=">><<---- info={\"devices\":[{\"ID\":\"nsm-1\",\"health\":\"Healthy\"},{\"ID\":\"nsm-2\",\"health\":\"Healthy\"},{\"ID\":\"nsm-3\",\"health\":\"Healthy\"},{\"ID\":\"nsm-4\",\"health\":\"Healthy\"},{\"ID\":\"nsm-5\",\"health\":\"Healthy\"},{\"ID\":\"nsm-6\",\"health\":\"Healthy\"},{\"ID\":\"nsm-7\",\"health\":\"Healthy\"},{\"ID\":\"nsm-8\",\"health\":\"Healthy\"},{\"ID\":\"nsm-9\",\"health\":\"Healthy\"},{\"ID\":\"nsm-10\",\"health\":\"Healthy\"},{\"ID\":\"nsm-11\",\"health\":\"Healthy\"},{\"ID\":\"nsm-12\",\"health\":\"Healthy\"},{\"ID\":\"nsm-13\",\"health\":\"Healthy\"},{\"ID\":\"nsm-14\",\"health\":\"Healthy\"},{\"ID\":\"nsm-15\",\"health\":\"Healthy\"},{\"ID\":\"nsm-16\",\"health\":\"Healthy\"},{\"ID\":\"nsm-17\",\"health\":\"Healthy\"},{\"ID\":\"nsm-18\",\"health\":\"Healthy\"},{\"ID\":\"nsm-19\",\"health\":\"Healthy\"},{\"ID\":\"nsm-20\",\"health\":\"Healthy\"},{\"ID\":\"nsm-21\",\"health\":\"Healthy\"},{\"ID\":\"nsm-22\",\"health\":\"Healthy\"},{\"ID\":\"nsm-23\",\"health\":\"Healthy\"},{\"ID\":\"nsm-24\",\"health\":\"Healthy\"},{\"ID\":\"nsm-25\",\"health\":\"Healthy\"},{\"ID\":\"nsm-26\",\"health\":\"Healthy\"},{\"ID\":\"nsm-27\",\"health\":\"Healthy\"},{\"ID\":\"nsm-28\",\"health\":\"Healthy\"},{\"ID\":\"nsm-29\",\"health\":\"Healthy\"},{\"ID\":\"nsm-30\",\"health\":\"Healthy\"},{\"ID\":\"nsm-31\",\"health\":\"Healthy\"},{\"ID\":\"nsm-32\",\"health\":\"Healthy\"},{\"ID\":\"nsm-33\",\"health\":\"Healthy\"}]} span=621d3c9ce9615f79:4f75fa585875bf31:621d3c9ce9615f79:1"
time="2021-06-16T17:09:24Z" level=info msg="Send device plugins info" operation=sendDeviceUpdate span="621d3c9ce9615f79:4f75fa585875bf31:621d3c9ce9615f79:1"
time="2021-06-16T17:09:24Z" level=info msg="Delaying 30s" operation=ListAndWatch-8 span="621d3c9ce9615f79:621d3c9ce9615f79:0000000000000000:1"
2021/06/16 17:09:24 Reporting span 621d3c9ce9615f79:621d3c9ce9615f79:0000000000000000:1
2021/06/16 17:09:26 Reporting span 2cc0479bbdbe686c:52e112e82c2ae70f:28e63c77ed761e28:1
time="2021-06-16T17:09:26Z" level=info msg=">><<---- response={\"workspace\":\"nsm-26\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=2cc0479bbdbe686c:28e63c77ed761e28:2cc0479bbdbe686c:1"
time="2021-06-16T17:09:26Z" level=info msg=">><<---- response={\"workspace\":\"nsm-26\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=2cc0479bbdbe686c:005655afe659f9ac:28e63c77ed761e28:1"
time="2021-06-16T17:09:26Z" level=info msg="nsmd allocated workspace workspace:\"nsm-26\" hostBasedir:\"/var/lib/networkservicemesh/\" clientBaseDir:\"/var/lib/networkservicemesh/\" nsmServerSocket:\"nsm.server.io.sock\" nsmClientSocket:\"nsm.client.io.sock\"  for client operations..." operation=RequestWorkspace span="2cc0479bbdbe686c:005655afe659f9ac:28e63c77ed761e28:1"
2021/06/16 17:09:26 Reporting span 2cc0479bbdbe686c:005655afe659f9ac:28e63c77ed761e28:1
time="2021-06-16T17:09:26Z" level=info msg="Received Workspace workspace:\"nsm-26\" hostBasedir:\"/var/lib/networkservicemesh/\" clientBaseDir:\"/var/lib/networkservicemesh/\" nsmServerSocket:\"nsm.server.io.sock\" nsmClientSocket:\"nsm.client.io.sock\" " operation=Allocate span="2cc0479bbdbe686c:28e63c77ed761e28:2cc0479bbdbe686c:1"
time="2021-06-16T17:09:26Z" level=info msg=">><<-- responses={\"container_responses\":[{\"envs\":{\"NSM_CLIENT_SOCKET\":\"/var/lib/networkservicemesh/nsm.client.io.sock\",\"NSM_DEVICE_PLUGIN\":\"true\",\"NSM_SERVER_SOCKET\":\"/var/lib/networkservicemesh/nsm.server.io.sock\",\"WORKSPACE\":\"/var/lib/networkservicemesh/\"},\"mounts\":[{\"container_path\":\"/run/spire/sockets\",\"host_path\":\"/run/spire/sockets\",\"read_only\":true},{\"container_path\":\"/var/lib/networkservicemesh/\",\"host_path\":\"/var/lib/networkservicemesh/nsm-26\"}]}]} span=2cc0479bbdbe686c:28e63c77ed761e28:2cc0479bbdbe686c:1"
time="2021-06-16T17:09:26Z" level=info msg="AllocateResponse: &AllocateResponse{ContainerResponses:[]*ContainerAllocateResponse{&ContainerAllocateResponse{Envs:map[string]string{NSM_CLIENT_SOCKET: /var/lib/networkservicemesh/nsm.client.io.sock,NSM_DEVICE_PLUGIN: true,NSM_SERVER_SOCKET: /var/lib/networkservicemesh/nsm.server.io.sock,WORKSPACE: /var/lib/networkservicemesh/,},Mounts:[]*Mount{&Mount{ContainerPath:/run/spire/sockets,HostPath:/run/spire/sockets,ReadOnly:true,},&Mount{ContainerPath:/var/lib/networkservicemesh/,HostPath:/var/lib/networkservicemesh/nsm-26,ReadOnly:false,},},Devices:[]*DeviceSpec{},Annotations:map[string]string{},},},}" operation=Allocate span="2cc0479bbdbe686c:28e63c77ed761e28:2cc0479bbdbe686c:1"
2021/06/16 17:09:26 Reporting span 2cc0479bbdbe686c:28e63c77ed761e28:2cc0479bbdbe686c:1
time="2021-06-16T17:09:26Z" level=info msg=">><<-- response={\"container_responses\":[{\"envs\":{\"NSM_CLIENT_SOCKET\":\"/var/lib/networkservicemesh/nsm.client.io.sock\",\"NSM_DEVICE_PLUGIN\":\"true\",\"NSM_SERVER_SOCKET\":\"/var/lib/networkservicemesh/nsm.server.io.sock\",\"WORKSPACE\":\"/var/lib/networkservicemesh/\"},\"mounts\":[{\"container_path\":\"/run/spire/sockets\",\"host_path\":\"/run/spire/sockets\",\"read_only\":true},{\"container_path\":\"/var/lib/networkservicemesh/\",\"host_path\":\"/var/lib/networkservicemesh/nsm-26\"}]}]} span=2cc0479bbdbe686c:2cc0479bbdbe686c:0000000000000000:1"
2021/06/16 17:09:26 Reporting span 2cc0479bbdbe686c:2cc0479bbdbe686c:0000000000000000:1
time="2021-06-16T17:09:54Z" level=info msg="==--> ListAndWatch-9() span:69e2183dfa2f1bf2:69e2183dfa2f1bf2:0000000000000000:1"
time="2021-06-16T17:09:54Z" level=info msg="==----> recieveWorkspaces() span:69e2183dfa2f1bf2:7c9577428fe1ba5b:69e2183dfa2f1bf2:1"
time="2021-06-16T17:09:54Z" level=info msg="Request workspaces list" operation=recieveWorkspaces span="69e2183dfa2f1bf2:7c9577428fe1ba5b:69e2183dfa2f1bf2:1"
time="2021-06-16T17:09:54Z" level=info msg="==------> enumWorkspaces() span:69e2183dfa2f1bf2:62e88795f19b68ab:7c9577428fe1ba5b:1"
time="2021-06-16T17:09:54Z" level=info msg="Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock..."
time="2021-06-16T17:09:54Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:09:54Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:09:54Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0002d8f80 {member1.com}:0xc0002d9000 {member2.com}:0xc0002d8f00]}"
time="2021-06-16T17:09:54Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:09:54Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:54Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:09:54Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:09:54Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:54Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:09:54Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:09:54Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:54Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:09:54Z" level=info msg="Found 3 tlsconfigs. [0xc00038cf00 0xc00038d080 0xc00038d200]"
time="2021-06-16T17:09:54Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:59Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:09:59Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:04Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:10:04Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:04Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:10:04Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:10:04Z" level=info msg="Requesting nsmd for client connection..."
time="2021-06-16T17:10:04Z" level=info msg=">><<-------- /nsmdapi.NSMD/EnumConnection()=\"\" span=69e2183dfa2f1bf2:62e88795f19b68ab:7c9577428fe1ba5b:1"
time="2021-06-16T17:10:04Z" level=info msg=">><<-------- request={} span=69e2183dfa2f1bf2:62e88795f19b68ab:7c9577428fe1ba5b:1"
2021/06/16 17:10:04 Reporting span 69e2183dfa2f1bf2:2b44834b4381e2d8:62e88795f19b68ab:1
time="2021-06-16T17:10:04Z" level=info msg=">><<-------- response={\"workspace\":[\"nsm-18\",\"nsm-8\",\"nsm-26\",\"nsm-29\"]} span=69e2183dfa2f1bf2:62e88795f19b68ab:7c9577428fe1ba5b:1"
time="2021-06-16T17:10:04Z" level=info msg=">><<------ reply={\"workspace\":[\"nsm-18\",\"nsm-8\",\"nsm-26\",\"nsm-29\"]} span=69e2183dfa2f1bf2:62e88795f19b68ab:7c9577428fe1ba5b:1"
2021/06/16 17:10:04 Reporting span 69e2183dfa2f1bf2:62e88795f19b68ab:7c9577428fe1ba5b:1
time="2021-06-16T17:10:04Z" level=info msg=">><<---- reply={\"workspace\":[\"nsm-18\",\"nsm-8\",\"nsm-26\",\"nsm-29\"]} span=69e2183dfa2f1bf2:7c9577428fe1ba5b:69e2183dfa2f1bf2:1"
time="2021-06-16T17:10:04Z" level=info msg=">><<---- new-devices=[{\"ID\":\"nsm-1\",\"health\":\"Healthy\"},{\"ID\":\"nsm-2\",\"health\":\"Healthy\"},{\"ID\":\"nsm-3\",\"health\":\"Healthy\"},{\"ID\":\"nsm-4\",\"health\":\"Healthy\"},{\"ID\":\"nsm-5\",\"health\":\"Healthy\"},{\"ID\":\"nsm-6\",\"health\":\"Healthy\"},{\"ID\":\"nsm-7\",\"health\":\"Healthy\"},{\"ID\":\"nsm-8\",\"health\":\"Healthy\"},{\"ID\":\"nsm-9\",\"health\":\"Healthy\"},{\"ID\":\"nsm-10\",\"health\":\"Healthy\"},{\"ID\":\"nsm-11\",\"health\":\"Healthy\"},{\"ID\":\"nsm-12\",\"health\":\"Healthy\"},{\"ID\":\"nsm-13\",\"health\":\"Healthy\"},{\"ID\":\"nsm-14\",\"health\":\"Healthy\"},{\"ID\":\"nsm-15\",\"health\":\"Healthy\"},{\"ID\":\"nsm-16\",\"health\":\"Healthy\"},{\"ID\":\"nsm-17\",\"health\":\"Healthy\"},{\"ID\":\"nsm-18\",\"health\":\"Healthy\"},{\"ID\":\"nsm-19\",\"health\":\"Healthy\"},{\"ID\":\"nsm-20\",\"health\":\"Healthy\"},{\"ID\":\"nsm-21\",\"health\":\"Healthy\"},{\"ID\":\"nsm-22\",\"health\":\"Healthy\"},{\"ID\":\"nsm-23\",\"health\":\"Healthy\"},{\"ID\":\"nsm-24\",\"health\":\"Healthy\"},{\"ID\":\"nsm-25\",\"health\":\"Healthy\"},{\"ID\":\"nsm-26\",\"health\":\"Healthy\"},{\"ID\":\"nsm-27\",\"health\":\"Healthy\"},{\"ID\":\"nsm-28\",\"health\":\"Healthy\"},{\"ID\":\"nsm-29\",\"health\":\"Healthy\"},{\"ID\":\"nsm-30\",\"health\":\"Healthy\"},{\"ID\":\"nsm-31\",\"health\":\"Healthy\"},{\"ID\":\"nsm-32\",\"health\":\"Healthy\"},{\"ID\":\"nsm-33\",\"health\":\"Healthy\"},{\"ID\":\"nsm-34\",\"health\":\"Healthy\"}] span=69e2183dfa2f1bf2:7c9577428fe1ba5b:69e2183dfa2f1bf2:1"
2021/06/16 17:10:04 Reporting span 69e2183dfa2f1bf2:7c9577428fe1ba5b:69e2183dfa2f1bf2:1
time="2021-06-16T17:10:04Z" level=info msg="==----> sendDeviceUpdate() span:69e2183dfa2f1bf2:0d2a1ea19a9e7c13:69e2183dfa2f1bf2:1"
time="2021-06-16T17:10:04Z" level=info msg=">><<---- info={\"devices\":[{\"ID\":\"nsm-1\",\"health\":\"Healthy\"},{\"ID\":\"nsm-2\",\"health\":\"Healthy\"},{\"ID\":\"nsm-3\",\"health\":\"Healthy\"},{\"ID\":\"nsm-4\",\"health\":\"Healthy\"},{\"ID\":\"nsm-5\",\"health\":\"Healthy\"},{\"ID\":\"nsm-6\",\"health\":\"Healthy\"},{\"ID\":\"nsm-7\",\"health\":\"Healthy\"},{\"ID\":\"nsm-8\",\"health\":\"Healthy\"},{\"ID\":\"nsm-9\",\"health\":\"Healthy\"},{\"ID\":\"nsm-10\",\"health\":\"Healthy\"},{\"ID\":\"nsm-11\",\"health\":\"Healthy\"},{\"ID\":\"nsm-12\",\"health\":\"Healthy\"},{\"ID\":\"nsm-13\",\"health\":\"Healthy\"},{\"ID\":\"nsm-14\",\"health\":\"Healthy\"},{\"ID\":\"nsm-15\",\"health\":\"Healthy\"},{\"ID\":\"nsm-16\",\"health\":\"Healthy\"},{\"ID\":\"nsm-17\",\"health\":\"Healthy\"},{\"ID\":\"nsm-18\",\"health\":\"Healthy\"},{\"ID\":\"nsm-19\",\"health\":\"Healthy\"},{\"ID\":\"nsm-20\",\"health\":\"Healthy\"},{\"ID\":\"nsm-21\",\"health\":\"Healthy\"},{\"ID\":\"nsm-22\",\"health\":\"Healthy\"},{\"ID\":\"nsm-23\",\"health\":\"Healthy\"},{\"ID\":\"nsm-24\",\"health\":\"Healthy\"},{\"ID\":\"nsm-25\",\"health\":\"Healthy\"},{\"ID\":\"nsm-26\",\"health\":\"Healthy\"},{\"ID\":\"nsm-27\",\"health\":\"Healthy\"},{\"ID\":\"nsm-28\",\"health\":\"Healthy\"},{\"ID\":\"nsm-29\",\"health\":\"Healthy\"},{\"ID\":\"nsm-30\",\"health\":\"Healthy\"},{\"ID\":\"nsm-31\",\"health\":\"Healthy\"},{\"ID\":\"nsm-32\",\"health\":\"Healthy\"},{\"ID\":\"nsm-33\",\"health\":\"Healthy\"},{\"ID\":\"nsm-34\",\"health\":\"Healthy\"}]} span=69e2183dfa2f1bf2:0d2a1ea19a9e7c13:69e2183dfa2f1bf2:1"
time="2021-06-16T17:10:04Z" level=info msg="Send device plugins info" operation=sendDeviceUpdate span="69e2183dfa2f1bf2:0d2a1ea19a9e7c13:69e2183dfa2f1bf2:1"
time="2021-06-16T17:10:04Z" level=info msg="Delaying 30s" operation=ListAndWatch-9 span="69e2183dfa2f1bf2:69e2183dfa2f1bf2:0000000000000000:1"
2021/06/16 17:10:04 Reporting span 69e2183dfa2f1bf2:69e2183dfa2f1bf2:0000000000000000:1
time="2021-06-16T17:10:34Z" level=info msg="==--> ListAndWatch-10() span:2b46ce2cdc9a0a1a:2b46ce2cdc9a0a1a:0000000000000000:1"
time="2021-06-16T17:10:34Z" level=info msg="==----> recieveWorkspaces() span:2b46ce2cdc9a0a1a:61f2170e218d1286:2b46ce2cdc9a0a1a:1"
time="2021-06-16T17:10:34Z" level=info msg="Request workspaces list" operation=recieveWorkspaces span="2b46ce2cdc9a0a1a:61f2170e218d1286:2b46ce2cdc9a0a1a:1"
time="2021-06-16T17:10:34Z" level=info msg="==------> enumWorkspaces() span:2b46ce2cdc9a0a1a:6ac6dc33fe5a6ac6:61f2170e218d1286:1"
time="2021-06-16T17:10:34Z" level=info msg="Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock..."
time="2021-06-16T17:10:34Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:10:34Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:10:34Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000ad1c0 {member1.com}:0xc0000ad240 {member2.com}:0xc0000ad140]}"
time="2021-06-16T17:10:34Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:10:34Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:34Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:10:34Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:10:34Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:34Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:10:34Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:10:34Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:34Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:10:34Z" level=info msg="Found 3 tlsconfigs. [0xc00031a000 0xc00031a180 0xc00031a600]"
time="2021-06-16T17:10:34Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:39Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:10:39Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:44Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:10:44Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:44Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:10:44Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:10:44Z" level=info msg="Requesting nsmd for client connection..."
time="2021-06-16T17:10:44Z" level=info msg=">><<-------- /nsmdapi.NSMD/EnumConnection()=\"\" span=2b46ce2cdc9a0a1a:6ac6dc33fe5a6ac6:61f2170e218d1286:1"
time="2021-06-16T17:10:44Z" level=info msg=">><<-------- request={} span=2b46ce2cdc9a0a1a:6ac6dc33fe5a6ac6:61f2170e218d1286:1"
2021/06/16 17:10:44 Reporting span 2b46ce2cdc9a0a1a:2bcb12712b6930da:6ac6dc33fe5a6ac6:1
time="2021-06-16T17:10:44Z" level=info msg=">><<-------- response={\"workspace\":[\"nsm-18\",\"nsm-8\",\"nsm-26\",\"nsm-29\"]} span=2b46ce2cdc9a0a1a:6ac6dc33fe5a6ac6:61f2170e218d1286:1"
time="2021-06-16T17:10:44Z" level=info msg=">><<------ reply={\"workspace\":[\"nsm-18\",\"nsm-8\",\"nsm-26\",\"nsm-29\"]} span=2b46ce2cdc9a0a1a:6ac6dc33fe5a6ac6:61f2170e218d1286:1"
2021/06/16 17:10:44 Reporting span 2b46ce2cdc9a0a1a:6ac6dc33fe5a6ac6:61f2170e218d1286:1
time="2021-06-16T17:10:44Z" level=info msg=">><<---- reply={\"workspace\":[\"nsm-18\",\"nsm-8\",\"nsm-26\",\"nsm-29\"]} span=2b46ce2cdc9a0a1a:61f2170e218d1286:2b46ce2cdc9a0a1a:1"
2021/06/16 17:10:44 Reporting span 2b46ce2cdc9a0a1a:61f2170e218d1286:2b46ce2cdc9a0a1a:1
time="2021-06-16T17:10:44Z" level=info msg="==----> sendDeviceUpdate() span:2b46ce2cdc9a0a1a:5b33eb0b4df0fbb0:2b46ce2cdc9a0a1a:1"
time="2021-06-16T17:10:44Z" level=info msg=">><<---- info={\"devices\":[{\"ID\":\"nsm-1\",\"health\":\"Healthy\"},{\"ID\":\"nsm-2\",\"health\":\"Healthy\"},{\"ID\":\"nsm-3\",\"health\":\"Healthy\"},{\"ID\":\"nsm-4\",\"health\":\"Healthy\"},{\"ID\":\"nsm-5\",\"health\":\"Healthy\"},{\"ID\":\"nsm-6\",\"health\":\"Healthy\"},{\"ID\":\"nsm-7\",\"health\":\"Healthy\"},{\"ID\":\"nsm-8\",\"health\":\"Healthy\"},{\"ID\":\"nsm-9\",\"health\":\"Healthy\"},{\"ID\":\"nsm-10\",\"health\":\"Healthy\"},{\"ID\":\"nsm-11\",\"health\":\"Healthy\"},{\"ID\":\"nsm-12\",\"health\":\"Healthy\"},{\"ID\":\"nsm-13\",\"health\":\"Healthy\"},{\"ID\":\"nsm-14\",\"health\":\"Healthy\"},{\"ID\":\"nsm-15\",\"health\":\"Healthy\"},{\"ID\":\"nsm-16\",\"health\":\"Healthy\"},{\"ID\":\"nsm-17\",\"health\":\"Healthy\"},{\"ID\":\"nsm-18\",\"health\":\"Healthy\"},{\"ID\":\"nsm-19\",\"health\":\"Healthy\"},{\"ID\":\"nsm-20\",\"health\":\"Healthy\"},{\"ID\":\"nsm-21\",\"health\":\"Healthy\"},{\"ID\":\"nsm-22\",\"health\":\"Healthy\"},{\"ID\":\"nsm-23\",\"health\":\"Healthy\"},{\"ID\":\"nsm-24\",\"health\":\"Healthy\"},{\"ID\":\"nsm-25\",\"health\":\"Healthy\"},{\"ID\":\"nsm-26\",\"health\":\"Healthy\"},{\"ID\":\"nsm-27\",\"health\":\"Healthy\"},{\"ID\":\"nsm-28\",\"health\":\"Healthy\"},{\"ID\":\"nsm-29\",\"health\":\"Healthy\"},{\"ID\":\"nsm-30\",\"health\":\"Healthy\"},{\"ID\":\"nsm-31\",\"health\":\"Healthy\"},{\"ID\":\"nsm-32\",\"health\":\"Healthy\"},{\"ID\":\"nsm-33\",\"health\":\"Healthy\"},{\"ID\":\"nsm-34\",\"health\":\"Healthy\"}]} span=2b46ce2cdc9a0a1a:5b33eb0b4df0fbb0:2b46ce2cdc9a0a1a:1"
time="2021-06-16T17:10:44Z" level=info msg="Send device plugins info" operation=sendDeviceUpdate span="2b46ce2cdc9a0a1a:5b33eb0b4df0fbb0:2b46ce2cdc9a0a1a:1"
time="2021-06-16T17:10:44Z" level=info msg="Delaying 30s" operation=ListAndWatch-10 span="2b46ce2cdc9a0a1a:2b46ce2cdc9a0a1a:0000000000000000:1"
2021/06/16 17:10:44 Reporting span 2b46ce2cdc9a0a1a:2b46ce2cdc9a0a1a:0000000000000000:1
time="2021-06-16T17:11:14Z" level=info msg="==--> ListAndWatch-11() span:29945c79a649fc29:29945c79a649fc29:0000000000000000:1"
time="2021-06-16T17:11:14Z" level=info msg="==----> recieveWorkspaces() span:29945c79a649fc29:0a91c3c64875e4d9:29945c79a649fc29:1"
time="2021-06-16T17:11:14Z" level=info msg="Request workspaces list" operation=recieveWorkspaces span="29945c79a649fc29:0a91c3c64875e4d9:29945c79a649fc29:1"
time="2021-06-16T17:11:14Z" level=info msg="==------> enumWorkspaces() span:29945c79a649fc29:03b90cb814abf8c0:0a91c3c64875e4d9:1"
time="2021-06-16T17:11:14Z" level=info msg="Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock..."
time="2021-06-16T17:11:14Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:11:14Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:11:14Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000101bc0 {member1.com}:0xc000101c40 {member2.com}:0xc000101b40]}"
time="2021-06-16T17:11:14Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:11:14Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:14Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:11:14Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:11:14Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:14Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:11:14Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:11:14Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:14Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:11:14Z" level=info msg="Found 3 tlsconfigs. [0xc000411b00 0xc000411e00 0xc0000d6000]"
time="2021-06-16T17:11:14Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:11:19Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:11:19Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:11:24Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:11:24Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:11:24Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:11:24Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:11:24Z" level=info msg="Requesting nsmd for client connection..."
time="2021-06-16T17:11:24Z" level=info msg=">><<-------- /nsmdapi.NSMD/EnumConnection()=\"\" span=29945c79a649fc29:03b90cb814abf8c0:0a91c3c64875e4d9:1"
time="2021-06-16T17:11:24Z" level=info msg=">><<-------- request={} span=29945c79a649fc29:03b90cb814abf8c0:0a91c3c64875e4d9:1"
2021/06/16 17:11:24 Reporting span 29945c79a649fc29:476d1fe89764228a:03b90cb814abf8c0:1
time="2021-06-16T17:11:24Z" level=info msg=">><<-------- response={\"workspace\":[\"nsm-29\",\"nsm-18\",\"nsm-8\",\"nsm-26\"]} span=29945c79a649fc29:03b90cb814abf8c0:0a91c3c64875e4d9:1"
time="2021-06-16T17:11:24Z" level=info msg=">><<------ reply={\"workspace\":[\"nsm-29\",\"nsm-18\",\"nsm-8\",\"nsm-26\"]} span=29945c79a649fc29:03b90cb814abf8c0:0a91c3c64875e4d9:1"
2021/06/16 17:11:24 Reporting span 29945c79a649fc29:03b90cb814abf8c0:0a91c3c64875e4d9:1
time="2021-06-16T17:11:24Z" level=info msg=">><<---- reply={\"workspace\":[\"nsm-29\",\"nsm-18\",\"nsm-8\",\"nsm-26\"]} span=29945c79a649fc29:0a91c3c64875e4d9:29945c79a649fc29:1"
2021/06/16 17:11:24 Reporting span 29945c79a649fc29:0a91c3c64875e4d9:29945c79a649fc29:1
time="2021-06-16T17:11:24Z" level=info msg="==----> sendDeviceUpdate() span:29945c79a649fc29:03803434c08611ec:29945c79a649fc29:1"
time="2021-06-16T17:11:24Z" level=info msg=">><<---- info={\"devices\":[{\"ID\":\"nsm-1\",\"health\":\"Healthy\"},{\"ID\":\"nsm-2\",\"health\":\"Healthy\"},{\"ID\":\"nsm-3\",\"health\":\"Healthy\"},{\"ID\":\"nsm-4\",\"health\":\"Healthy\"},{\"ID\":\"nsm-5\",\"health\":\"Healthy\"},{\"ID\":\"nsm-6\",\"health\":\"Healthy\"},{\"ID\":\"nsm-7\",\"health\":\"Healthy\"},{\"ID\":\"nsm-8\",\"health\":\"Healthy\"},{\"ID\":\"nsm-9\",\"health\":\"Healthy\"},{\"ID\":\"nsm-10\",\"health\":\"Healthy\"},{\"ID\":\"nsm-11\",\"health\":\"Healthy\"},{\"ID\":\"nsm-12\",\"health\":\"Healthy\"},{\"ID\":\"nsm-13\",\"health\":\"Healthy\"},{\"ID\":\"nsm-14\",\"health\":\"Healthy\"},{\"ID\":\"nsm-15\",\"health\":\"Healthy\"},{\"ID\":\"nsm-16\",\"health\":\"Healthy\"},{\"ID\":\"nsm-17\",\"health\":\"Healthy\"},{\"ID\":\"nsm-18\",\"health\":\"Healthy\"},{\"ID\":\"nsm-19\",\"health\":\"Healthy\"},{\"ID\":\"nsm-20\",\"health\":\"Healthy\"},{\"ID\":\"nsm-21\",\"health\":\"Healthy\"},{\"ID\":\"nsm-22\",\"health\":\"Healthy\"},{\"ID\":\"nsm-23\",\"health\":\"Healthy\"},{\"ID\":\"nsm-24\",\"health\":\"Healthy\"},{\"ID\":\"nsm-25\",\"health\":\"Healthy\"},{\"ID\":\"nsm-26\",\"health\":\"Healthy\"},{\"ID\":\"nsm-27\",\"health\":\"Healthy\"},{\"ID\":\"nsm-28\",\"health\":\"Healthy\"},{\"ID\":\"nsm-29\",\"health\":\"Healthy\"},{\"ID\":\"nsm-30\",\"health\":\"Healthy\"},{\"ID\":\"nsm-31\",\"health\":\"Healthy\"},{\"ID\":\"nsm-32\",\"health\":\"Healthy\"},{\"ID\":\"nsm-33\",\"health\":\"Healthy\"},{\"ID\":\"nsm-34\",\"health\":\"Healthy\"}]} span=29945c79a649fc29:03803434c08611ec:29945c79a649fc29:1"
time="2021-06-16T17:11:24Z" level=info msg="Send device plugins info" operation=sendDeviceUpdate span="29945c79a649fc29:03803434c08611ec:29945c79a649fc29:1"
time="2021-06-16T17:11:24Z" level=info msg="Delaying 30s" operation=ListAndWatch-11 span="29945c79a649fc29:29945c79a649fc29:0000000000000000:1"
2021/06/16 17:11:24 Reporting span 29945c79a649fc29:29945c79a649fc29:0000000000000000:1
time="2021-06-16T17:11:54Z" level=info msg="==--> ListAndWatch-12() span:7b4faa9316f5f420:7b4faa9316f5f420:0000000000000000:1"
time="2021-06-16T17:11:54Z" level=info msg="==----> recieveWorkspaces() span:7b4faa9316f5f420:38ae2a99965cbb19:7b4faa9316f5f420:1"
time="2021-06-16T17:11:54Z" level=info msg="Request workspaces list" operation=recieveWorkspaces span="7b4faa9316f5f420:38ae2a99965cbb19:7b4faa9316f5f420:1"
time="2021-06-16T17:11:54Z" level=info msg="==------> enumWorkspaces() span:7b4faa9316f5f420:6f52de57d8f83c7b:38ae2a99965cbb19:1"
time="2021-06-16T17:11:54Z" level=info msg="Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock..."
time="2021-06-16T17:11:54Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:11:54Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:11:54Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00031cc40 {member1.com}:0xc00031cbc0 {member2.com}:0xc00031ca80]}"
time="2021-06-16T17:11:54Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:11:54Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:54Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:11:54Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:11:54Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:54Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:11:54Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:11:54Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:54Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:11:54Z" level=info msg="Found 3 tlsconfigs. [0xc0000d7380 0xc0000d7680 0xc0000d7980]"
time="2021-06-16T17:11:54Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:11:59Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:11:59Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:04Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:12:04Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:04Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:12:04Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:12:04Z" level=info msg="Requesting nsmd for client connection..."
time="2021-06-16T17:12:04Z" level=info msg=">><<-------- /nsmdapi.NSMD/EnumConnection()=\"\" span=7b4faa9316f5f420:6f52de57d8f83c7b:38ae2a99965cbb19:1"
time="2021-06-16T17:12:04Z" level=info msg=">><<-------- request={} span=7b4faa9316f5f420:6f52de57d8f83c7b:38ae2a99965cbb19:1"
2021/06/16 17:12:04 Reporting span 7b4faa9316f5f420:69813595cc98fdc0:6f52de57d8f83c7b:1
time="2021-06-16T17:12:04Z" level=info msg=">><<-------- response={\"workspace\":[\"nsm-29\",\"nsm-18\",\"nsm-8\",\"nsm-26\"]} span=7b4faa9316f5f420:6f52de57d8f83c7b:38ae2a99965cbb19:1"
time="2021-06-16T17:12:04Z" level=info msg=">><<------ reply={\"workspace\":[\"nsm-29\",\"nsm-18\",\"nsm-8\",\"nsm-26\"]} span=7b4faa9316f5f420:6f52de57d8f83c7b:38ae2a99965cbb19:1"
2021/06/16 17:12:04 Reporting span 7b4faa9316f5f420:6f52de57d8f83c7b:38ae2a99965cbb19:1
time="2021-06-16T17:12:04Z" level=info msg=">><<---- reply={\"workspace\":[\"nsm-29\",\"nsm-18\",\"nsm-8\",\"nsm-26\"]} span=7b4faa9316f5f420:38ae2a99965cbb19:7b4faa9316f5f420:1"
2021/06/16 17:12:04 Reporting span 7b4faa9316f5f420:38ae2a99965cbb19:7b4faa9316f5f420:1
time="2021-06-16T17:12:04Z" level=info msg="==----> sendDeviceUpdate() span:7b4faa9316f5f420:422752afc6c98877:7b4faa9316f5f420:1"
time="2021-06-16T17:12:04Z" level=info msg=">><<---- info={\"devices\":[{\"ID\":\"nsm-1\",\"health\":\"Healthy\"},{\"ID\":\"nsm-2\",\"health\":\"Healthy\"},{\"ID\":\"nsm-3\",\"health\":\"Healthy\"},{\"ID\":\"nsm-4\",\"health\":\"Healthy\"},{\"ID\":\"nsm-5\",\"health\":\"Healthy\"},{\"ID\":\"nsm-6\",\"health\":\"Healthy\"},{\"ID\":\"nsm-7\",\"health\":\"Healthy\"},{\"ID\":\"nsm-8\",\"health\":\"Healthy\"},{\"ID\":\"nsm-9\",\"health\":\"Healthy\"},{\"ID\":\"nsm-10\",\"health\":\"Healthy\"},{\"ID\":\"nsm-11\",\"health\":\"Healthy\"},{\"ID\":\"nsm-12\",\"health\":\"Healthy\"},{\"ID\":\"nsm-13\",\"health\":\"Healthy\"},{\"ID\":\"nsm-14\",\"health\":\"Healthy\"},{\"ID\":\"nsm-15\",\"health\":\"Healthy\"},{\"ID\":\"nsm-16\",\"health\":\"Healthy\"},{\"ID\":\"nsm-17\",\"health\":\"Healthy\"},{\"ID\":\"nsm-18\",\"health\":\"Healthy\"},{\"ID\":\"nsm-19\",\"health\":\"Healthy\"},{\"ID\":\"nsm-20\",\"health\":\"Healthy\"},{\"ID\":\"nsm-21\",\"health\":\"Healthy\"},{\"ID\":\"nsm-22\",\"health\":\"Healthy\"},{\"ID\":\"nsm-23\",\"health\":\"Healthy\"},{\"ID\":\"nsm-24\",\"health\":\"Healthy\"},{\"ID\":\"nsm-25\",\"health\":\"Healthy\"},{\"ID\":\"nsm-26\",\"health\":\"Healthy\"},{\"ID\":\"nsm-27\",\"health\":\"Healthy\"},{\"ID\":\"nsm-28\",\"health\":\"Healthy\"},{\"ID\":\"nsm-29\",\"health\":\"Healthy\"},{\"ID\":\"nsm-30\",\"health\":\"Healthy\"},{\"ID\":\"nsm-31\",\"health\":\"Healthy\"},{\"ID\":\"nsm-32\",\"health\":\"Healthy\"},{\"ID\":\"nsm-33\",\"health\":\"Healthy\"},{\"ID\":\"nsm-34\",\"health\":\"Healthy\"}]} span=7b4faa9316f5f420:422752afc6c98877:7b4faa9316f5f420:1"
time="2021-06-16T17:12:04Z" level=info msg="Send device plugins info" operation=sendDeviceUpdate span="7b4faa9316f5f420:422752afc6c98877:7b4faa9316f5f420:1"
time="2021-06-16T17:12:04Z" level=info msg="Delaying 30s" operation=ListAndWatch-12 span="7b4faa9316f5f420:7b4faa9316f5f420:0000000000000000:1"
2021/06/16 17:12:04 Reporting span 7b4faa9316f5f420:7b4faa9316f5f420:0000000000000000:1
time="2021-06-16T17:12:34Z" level=info msg="==--> ListAndWatch-13() span:26f0b8d5cfc35df8:26f0b8d5cfc35df8:0000000000000000:1"
time="2021-06-16T17:12:34Z" level=info msg="==----> recieveWorkspaces() span:26f0b8d5cfc35df8:7f0e8c074fe5ab97:26f0b8d5cfc35df8:1"
time="2021-06-16T17:12:34Z" level=info msg="Request workspaces list" operation=recieveWorkspaces span="26f0b8d5cfc35df8:7f0e8c074fe5ab97:26f0b8d5cfc35df8:1"
time="2021-06-16T17:12:34Z" level=info msg="==------> enumWorkspaces() span:26f0b8d5cfc35df8:08bd8b497e3d5a3f:7f0e8c074fe5ab97:1"
time="2021-06-16T17:12:34Z" level=info msg="Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock..."
time="2021-06-16T17:12:34Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:12:34Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:12:34Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004d6540 {member1.com}:0xc0004d65c0 {member2.com}:0xc0004d64c0]}"
time="2021-06-16T17:12:34Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:12:34Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:34Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:12:34Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:12:34Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:34Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:12:34Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:12:34Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:34Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:12:34Z" level=info msg="Found 3 tlsconfigs. [0xc000588480 0xc000588600 0xc000588780]"
time="2021-06-16T17:12:34Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:39Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:12:39Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:44Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:12:44Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:44Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:12:44Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:12:44Z" level=info msg="Requesting nsmd for client connection..."
time="2021-06-16T17:12:44Z" level=info msg=">><<-------- /nsmdapi.NSMD/EnumConnection()=\"\" span=26f0b8d5cfc35df8:08bd8b497e3d5a3f:7f0e8c074fe5ab97:1"
time="2021-06-16T17:12:44Z" level=info msg=">><<-------- request={} span=26f0b8d5cfc35df8:08bd8b497e3d5a3f:7f0e8c074fe5ab97:1"
2021/06/16 17:12:44 Reporting span 26f0b8d5cfc35df8:415e80cf9452bc79:08bd8b497e3d5a3f:1
time="2021-06-16T17:12:44Z" level=info msg=">><<-------- response={\"workspace\":[\"nsm-29\",\"nsm-18\",\"nsm-8\",\"nsm-26\"]} span=26f0b8d5cfc35df8:08bd8b497e3d5a3f:7f0e8c074fe5ab97:1"
time="2021-06-16T17:12:44Z" level=info msg=">><<------ reply={\"workspace\":[\"nsm-29\",\"nsm-18\",\"nsm-8\",\"nsm-26\"]} span=26f0b8d5cfc35df8:08bd8b497e3d5a3f:7f0e8c074fe5ab97:1"
2021/06/16 17:12:44 Reporting span 26f0b8d5cfc35df8:08bd8b497e3d5a3f:7f0e8c074fe5ab97:1
time="2021-06-16T17:12:44Z" level=info msg=">><<---- reply={\"workspace\":[\"nsm-29\",\"nsm-18\",\"nsm-8\",\"nsm-26\"]} span=26f0b8d5cfc35df8:7f0e8c074fe5ab97:26f0b8d5cfc35df8:1"
2021/06/16 17:12:44 Reporting span 26f0b8d5cfc35df8:7f0e8c074fe5ab97:26f0b8d5cfc35df8:1
time="2021-06-16T17:12:44Z" level=info msg="==----> sendDeviceUpdate() span:26f0b8d5cfc35df8:60f43c7fd54acaca:26f0b8d5cfc35df8:1"
time="2021-06-16T17:12:44Z" level=info msg=">><<---- info={\"devices\":[{\"ID\":\"nsm-1\",\"health\":\"Healthy\"},{\"ID\":\"nsm-2\",\"health\":\"Healthy\"},{\"ID\":\"nsm-3\",\"health\":\"Healthy\"},{\"ID\":\"nsm-4\",\"health\":\"Healthy\"},{\"ID\":\"nsm-5\",\"health\":\"Healthy\"},{\"ID\":\"nsm-6\",\"health\":\"Healthy\"},{\"ID\":\"nsm-7\",\"health\":\"Healthy\"},{\"ID\":\"nsm-8\",\"health\":\"Healthy\"},{\"ID\":\"nsm-9\",\"health\":\"Healthy\"},{\"ID\":\"nsm-10\",\"health\":\"Healthy\"},{\"ID\":\"nsm-11\",\"health\":\"Healthy\"},{\"ID\":\"nsm-12\",\"health\":\"Healthy\"},{\"ID\":\"nsm-13\",\"health\":\"Healthy\"},{\"ID\":\"nsm-14\",\"health\":\"Healthy\"},{\"ID\":\"nsm-15\",\"health\":\"Healthy\"},{\"ID\":\"nsm-16\",\"health\":\"Healthy\"},{\"ID\":\"nsm-17\",\"health\":\"Healthy\"},{\"ID\":\"nsm-18\",\"health\":\"Healthy\"},{\"ID\":\"nsm-19\",\"health\":\"Healthy\"},{\"ID\":\"nsm-20\",\"health\":\"Healthy\"},{\"ID\":\"nsm-21\",\"health\":\"Healthy\"},{\"ID\":\"nsm-22\",\"health\":\"Healthy\"},{\"ID\":\"nsm-23\",\"health\":\"Healthy\"},{\"ID\":\"nsm-24\",\"health\":\"Healthy\"},{\"ID\":\"nsm-25\",\"health\":\"Healthy\"},{\"ID\":\"nsm-26\",\"health\":\"Healthy\"},{\"ID\":\"nsm-27\",\"health\":\"Healthy\"},{\"ID\":\"nsm-28\",\"health\":\"Healthy\"},{\"ID\":\"nsm-29\",\"health\":\"Healthy\"},{\"ID\":\"nsm-30\",\"health\":\"Healthy\"},{\"ID\":\"nsm-31\",\"health\":\"Healthy\"},{\"ID\":\"nsm-32\",\"health\":\"Healthy\"},{\"ID\":\"nsm-33\",\"health\":\"Healthy\"},{\"ID\":\"nsm-34\",\"health\":\"Healthy\"}]} span=26f0b8d5cfc35df8:60f43c7fd54acaca:26f0b8d5cfc35df8:1"
time="2021-06-16T17:12:44Z" level=info msg="Send device plugins info" operation=sendDeviceUpdate span="26f0b8d5cfc35df8:60f43c7fd54acaca:26f0b8d5cfc35df8:1"
time="2021-06-16T17:12:44Z" level=info msg="Delaying 30s" operation=ListAndWatch-13 span="26f0b8d5cfc35df8:26f0b8d5cfc35df8:0000000000000000:1"
2021/06/16 17:12:44 Reporting span 26f0b8d5cfc35df8:26f0b8d5cfc35df8:0000000000000000:1
time="2021-06-16T17:13:14Z" level=info msg="==--> ListAndWatch-14() span:4688c473683d1b58:4688c473683d1b58:0000000000000000:1"
time="2021-06-16T17:13:14Z" level=info msg="==----> recieveWorkspaces() span:4688c473683d1b58:56feff5bf5e93e9c:4688c473683d1b58:1"
time="2021-06-16T17:13:14Z" level=info msg="Request workspaces list" operation=recieveWorkspaces span="4688c473683d1b58:56feff5bf5e93e9c:4688c473683d1b58:1"
time="2021-06-16T17:13:14Z" level=info msg="==------> enumWorkspaces() span:4688c473683d1b58:21cb6b0b753473bd:56feff5bf5e93e9c:1"
time="2021-06-16T17:13:14Z" level=info msg="Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock..."
time="2021-06-16T17:13:14Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:13:14Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:13:14Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000380c40 {member1.com}:0xc000380d00 {member2.com}:0xc000380b80]}"
time="2021-06-16T17:13:14Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:13:14Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:14Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:13:14Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:13:14Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:14Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:13:14Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:13:14Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:14Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:13:14Z" level=info msg="Found 3 tlsconfigs. [0xc00031a180 0xc00031a600 0xc00038c000]"
time="2021-06-16T17:13:14Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:13:19Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:13:19Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:13:24Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:13:24Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:13:24Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:13:24Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x966460 <nil> 0x9664e0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:13:24Z" level=info msg="Requesting nsmd for client connection..."
time="2021-06-16T17:13:24Z" level=info msg=">><<-------- /nsmdapi.NSMD/EnumConnection()=\"\" span=4688c473683d1b58:21cb6b0b753473bd:56feff5bf5e93e9c:1"
time="2021-06-16T17:13:24Z" level=info msg=">><<-------- request={} span=4688c473683d1b58:21cb6b0b753473bd:56feff5bf5e93e9c:1"
2021/06/16 17:13:24 Reporting span 4688c473683d1b58:075bd3ff8cca503c:21cb6b0b753473bd:1
time="2021-06-16T17:13:24Z" level=info msg=">><<-------- response={\"workspace\":[\"nsm-29\",\"nsm-18\",\"nsm-8\",\"nsm-26\"]} span=4688c473683d1b58:21cb6b0b753473bd:56feff5bf5e93e9c:1"
time="2021-06-16T17:13:24Z" level=info msg=">><<------ reply={\"workspace\":[\"nsm-29\",\"nsm-18\",\"nsm-8\",\"nsm-26\"]} span=4688c473683d1b58:21cb6b0b753473bd:56feff5bf5e93e9c:1"
2021/06/16 17:13:24 Reporting span 4688c473683d1b58:21cb6b0b753473bd:56feff5bf5e93e9c:1
time="2021-06-16T17:13:24Z" level=info msg=">><<---- reply={\"workspace\":[\"nsm-29\",\"nsm-18\",\"nsm-8\",\"nsm-26\"]} span=4688c473683d1b58:56feff5bf5e93e9c:4688c473683d1b58:1"
2021/06/16 17:13:24 Reporting span 4688c473683d1b58:56feff5bf5e93e9c:4688c473683d1b58:1
time="2021-06-16T17:13:24Z" level=info msg="==----> sendDeviceUpdate() span:4688c473683d1b58:2ca5bb33e363cefd:4688c473683d1b58:1"
time="2021-06-16T17:13:24Z" level=info msg=">><<---- info={\"devices\":[{\"ID\":\"nsm-1\",\"health\":\"Healthy\"},{\"ID\":\"nsm-2\",\"health\":\"Healthy\"},{\"ID\":\"nsm-3\",\"health\":\"Healthy\"},{\"ID\":\"nsm-4\",\"health\":\"Healthy\"},{\"ID\":\"nsm-5\",\"health\":\"Healthy\"},{\"ID\":\"nsm-6\",\"health\":\"Healthy\"},{\"ID\":\"nsm-7\",\"health\":\"Healthy\"},{\"ID\":\"nsm-8\",\"health\":\"Healthy\"},{\"ID\":\"nsm-9\",\"health\":\"Healthy\"},{\"ID\":\"nsm-10\",\"health\":\"Healthy\"},{\"ID\":\"nsm-11\",\"health\":\"Healthy\"},{\"ID\":\"nsm-12\",\"health\":\"Healthy\"},{\"ID\":\"nsm-13\",\"health\":\"Healthy\"},{\"ID\":\"nsm-14\",\"health\":\"Healthy\"},{\"ID\":\"nsm-15\",\"health\":\"Healthy\"},{\"ID\":\"nsm-16\",\"health\":\"Healthy\"},{\"ID\":\"nsm-17\",\"health\":\"Healthy\"},{\"ID\":\"nsm-18\",\"health\":\"Healthy\"},{\"ID\":\"nsm-19\",\"health\":\"Healthy\"},{\"ID\":\"nsm-20\",\"health\":\"Healthy\"},{\"ID\":\"nsm-21\",\"health\":\"Healthy\"},{\"ID\":\"nsm-22\",\"health\":\"Healthy\"},{\"ID\":\"nsm-23\",\"health\":\"Healthy\"},{\"ID\":\"nsm-24\",\"health\":\"Healthy\"},{\"ID\":\"nsm-25\",\"health\":\"Healthy\"},{\"ID\":\"nsm-26\",\"health\":\"Healthy\"},{\"ID\":\"nsm-27\",\"health\":\"Healthy\"},{\"ID\":\"nsm-28\",\"health\":\"Healthy\"},{\"ID\":\"nsm-29\",\"health\":\"Healthy\"},{\"ID\":\"nsm-30\",\"health\":\"Healthy\"},{\"ID\":\"nsm-31\",\"health\":\"Healthy\"},{\"ID\":\"nsm-32\",\"health\":\"Healthy\"},{\"ID\":\"nsm-33\",\"health\":\"Healthy\"},{\"ID\":\"nsm-34\",\"health\":\"Healthy\"}]} span=4688c473683d1b58:2ca5bb33e363cefd:4688c473683d1b58:1"
time="2021-06-16T17:13:24Z" level=info msg="Send device plugins info" operation=sendDeviceUpdate span="4688c473683d1b58:2ca5bb33e363cefd:4688c473683d1b58:1"
time="2021-06-16T17:13:24Z" level=info msg="Delaying 30s" operation=ListAndWatch-14 span="4688c473683d1b58:4688c473683d1b58:0000000000000000:1"
2021/06/16 17:13:24 Reporting span 4688c473683d1b58:4688c473683d1b58:0000000000000000:1
time="2021-06-16T17:13:54Z" level=info msg="==--> ListAndWatch-15() span:74895ee52c98bf17:74895ee52c98bf17:0000000000000000:1"
time="2021-06-16T17:13:54Z" level=info msg="==----> recieveWorkspaces() span:74895ee52c98bf17:738a860eba2e668c:74895ee52c98bf17:1"
time="2021-06-16T17:13:54Z" level=info msg="Request workspaces list" operation=recieveWorkspaces span="74895ee52c98bf17:738a860eba2e668c:74895ee52c98bf17:1"
time="2021-06-16T17:13:54Z" level=info msg="==------> enumWorkspaces() span:74895ee52c98bf17:2ae59a426296ae8d:738a860eba2e668c:1"
time="2021-06-16T17:13:54Z" level=info msg="Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock..."
time="2021-06-16T17:13:54Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:13:54Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:13:54Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0002d80c0 {member1.com}:0xc0002d81c0 {member2.com}:0xc0002d8040]}"
time="2021-06-16T17:13:54Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:13:54Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:54Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:13:54Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:13:54Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:54Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:13:54Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:13:54Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:54Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:13:54Z" level=info msg="Found 3 tlsconfigs. [0xc0000d6000 0xc0000d6300 0xc0000d6480]"
time="2021-06-16T17:13:54Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x966460 GetConfigForClient:<nil> VerifyPeerCertificate:0x9664e0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
==== END logs for container wcm-nsmgr of pod nsm-system/wcm-nsmgr-jf5x8 ====
==== START logs for container nsmd of pod nsm-system/wcm-nsmgr-jf5x8 ====
time="2021-06-16T17:02:14Z" level=info msg="Starting nsmd..."
time="2021-06-16T17:02:14Z" level=info msg="Version: v1.0.1-rc.2-8-g6913a73f"
time="2021-06-16T17:02:14Z" level=info msg="All env variables:"
time="2021-06-16T17:02:14Z" level=info msg="JAEGER_AGENT_PORT=6831"
time="2021-06-16T17:02:14Z" level=info msg="TRACER_ENABLED=true"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_PORT_5006_TCP=tcp://10.100.122.189:5006"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_SERVICE_PORT=5005"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_PORT=tcp://10.100.122.189:5005"
time="2021-06-16T17:02:14Z" level=info msg="KUBERNETES_SERVICE_PORT=443"
time="2021-06-16T17:02:14Z" level=info msg="KUBERNETES_PORT=tcp://10.96.0.1:443"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_PORT_6831_UDP=udp://10.100.4.133:6831"
time="2021-06-16T17:02:14Z" level=info msg="HOSTNAME=wcm-nsmgr-jf5x8"
time="2021-06-16T17:02:14Z" level=info msg="SHLVL=1"
time="2021-06-16T17:02:14Z" level=info msg="HOME=/root"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_PORT_16686_TCP_ADDR=10.100.4.133"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSM_ADMISSION_WEBHOOK_PORT_443_TCP_ADDR=10.102.238.54"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_PORT_16686_TCP_PORT=16686"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSM_ADMISSION_WEBHOOK_PORT_443_TCP_PORT=443"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSM_ADMISSION_WEBHOOK_PORT_443_TCP_PROTO=tcp"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_PORT_16686_TCP_PROTO=tcp"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_SERVICE_PORT_JAEGER=6831"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_SERVICE_PORT_PNSMD=5006"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_PORT_5000_TCP_ADDR=10.96.67.173"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_PORT_5001_TCP_ADDR=10.96.67.173"
time="2021-06-16T17:02:14Z" level=info msg="PROXY_NSMD_K8S_ADDRESS=wcm-proxy-nsmgr:5005"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_PORT_5000_TCP_PORT=5000"
time="2021-06-16T17:02:14Z" level=info msg="INSECURE=false"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_SERVICE_PORT_HTTP=16686"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSM_ADMISSION_WEBHOOK_PORT_443_TCP=tcp://10.102.238.54:443"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_PORT_5000_TCP_PROTO=tcp"
time="2021-06-16T17:02:14Z" level=info msg="KUBERNETES_PORT_443_TCP_ADDR=10.96.0.1"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_PORT_5001_TCP_PORT=5001"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_PORT_16686_TCP=tcp://10.100.4.133:16686"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_SERVICE_PORT_REGISTRY=5000"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_PORT_5001_TCP_PROTO=tcp"
time="2021-06-16T17:02:14Z" level=info msg="PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
time="2021-06-16T17:02:14Z" level=info msg="PROXY_NSMD_ADDRESS=wcm-proxy-nsmgr:5006"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSM_ADMISSION_WEBHOOK_SERVICE_HOST=10.102.238.54"
time="2021-06-16T17:02:14Z" level=info msg="KUBERNETES_PORT_443_TCP_PORT=443"
time="2021-06-16T17:02:14Z" level=info msg="KUBERNETES_PORT_443_TCP_PROTO=tcp"
time="2021-06-16T17:02:14Z" level=info msg="ENTRY=nsmd"
time="2021-06-16T17:02:14Z" level=info msg="PREFERRED_REMOTE_MECHANISM=IPSEC"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_SERVICE_HOST=10.96.67.173"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_SERVICE_HOST=10.100.4.133"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_PORT_5005_TCP_ADDR=10.100.122.189"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_SERVICE_PORT_PNSMR=5005"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_PORT_5000_TCP=tcp://10.96.67.173:5000"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_PORT_5006_TCP_ADDR=10.100.122.189"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_PORT_5001_TCP=tcp://10.96.67.173:5001"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSM_ADMISSION_WEBHOOK_PORT=tcp://10.102.238.54:443"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSM_ADMISSION_WEBHOOK_SERVICE_PORT=443"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_PORT_5005_TCP_PORT=5005"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_PORT_5006_TCP_PORT=5006"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_PORT_6831_UDP_ADDR=10.100.4.133"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_PORT_5005_TCP_PROTO=tcp"
time="2021-06-16T17:02:14Z" level=info msg="KUBERNETES_SERVICE_PORT_HTTPS=443"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_PORT_5006_TCP_PROTO=tcp"
time="2021-06-16T17:02:14Z" level=info msg="KUBERNETES_PORT_443_TCP=tcp://10.96.0.1:443"
time="2021-06-16T17:02:14Z" level=info msg="JAEGER_AGENT_HOST=wcm-jaeger.nsm-system"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_SERVICE_HOST=10.100.122.189"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_PORT=tcp://10.100.4.133:16686"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_SERVICE_PORT=5000"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_PORT=tcp://10.96.67.173:5000"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_SERVICE_PORT=16686"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_PORT_6831_UDP_PORT=6831"
time="2021-06-16T17:02:14Z" level=info msg="KUBERNETES_SERVICE_HOST=10.96.0.1"
time="2021-06-16T17:02:14Z" level=info msg="PWD=/"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_SERVICE_PORT_API=5001"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_PORT_6831_UDP_PROTO=udp"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_PORT_5005_TCP=tcp://10.100.122.189:5005"
time="2021-06-16T17:02:14Z" level=info msg="Creating logger from config: &{nsmd@wcm-nsmgr-jf5x8 false false [] 0xc000292060 0xc0002a0000 <nil> <nil> <nil>}"
2021/06/16 17:02:14 debug logging disabled
2021/06/16 17:02:14 Initializing logging reporter
2021/06/16 17:02:14 debug logging disabled
time="2021-06-16T17:02:14Z" level=info msg="==--> nsmd.server() span:15f83bfc61db9a18:15f83bfc61db9a18:0000000000000000:1"
time="2021-06-16T17:02:14Z" level=info msg=">><<-- tracing.init-complete=12.936923ms span=15f83bfc61db9a18:15f83bfc61db9a18:0000000000000000:1"
time="2021-06-16T17:02:14Z" level=info msg="==----> nsm-server-start() span:15f83bfc61db9a18:1fff58e3f528c7c7:15f83bfc61db9a18:1"
time="2021-06-16T17:02:14Z" level=info msg="Starting NSM server" operation=nsm-server-start span="15f83bfc61db9a18:1fff58e3f528c7c7:15f83bfc61db9a18:1"
time="2021-06-16T17:02:14Z" level=info msg="==------> NewServer() span:15f83bfc61db9a18:68198a12f07d51c4:1fff58e3f528c7c7:1"
time="2021-06-16T17:02:14Z" level=info msg="Establish connection with the spire provider at address:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:02:15Z" level=info msg="Got x509:&{0xc0002f41b0 <nil> {{0 0} 0 0 0 0} 0xc000076e10 0xc00047c3c0 {{0 0} 0 0 0 0} false} <nil>"
time="2021-06-16T17:02:15Z" level=info msg="GRPC.NewServer with open tracing enabled" operation=NewServer span="15f83bfc61db9a18:68198a12f07d51c4:1fff58e3f528c7c7:1"
time="2021-06-16T17:02:15Z" level=info msg="Issued identity:spiffe://member2.com/wcm-nsmgr"
time="2021-06-16T17:02:15Z" level=info msg="==--------> GetCertificate() span:15f83bfc61db9a18:15702c49b20f7ade:68198a12f07d51c4:1"
time="2021-06-16T17:02:15Z" level=info msg="SPIRE -- GetX509SVID:&{spiffe://member2.com/wcm-nsmgr [0xc0000e7080 0xc0000e7600] 0xc000278db0}"
time="2021-06-16T17:02:15Z" level=info msg="Default trust domain:member2.com"
time="2021-06-16T17:02:15Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:02:15Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:02:15Z" level=info msg="Server will be started in secure mode using tlsConfig:&{<nil> <nil> [] map[] 0x97a4c0 <nil> <nil> 0x97a5c0 <nil> <nil> []  RequireAnyClientCert <nil> false [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
2021/06/16 17:02:15 Reporting span 15f83bfc61db9a18:15702c49b20f7ade:68198a12f07d51c4:1
2021/06/16 17:02:15 Reporting span 15f83bfc61db9a18:68198a12f07d51c4:1fff58e3f528c7c7:1
time="2021-06-16T17:02:15Z" level=info msg="Starting NSM gRPC server listening on socket: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:02:15Z" level=info msg="==------> set-local-nsm() span:15f83bfc61db9a18:0d51a6f10039dc3f:1fff58e3f528c7c7:1"
time="2021-06-16T17:02:15Z" level=info msg="Requesting NsmRegistryClient..." span="15f83bfc61db9a18:0d51a6f10039dc3f:1fff58e3f528c7c7:1"
time="2021-06-16T17:02:15Z" level=info msg="==----------> initRegistryClient() span:15f83bfc61db9a18:70cc5f7a99422e50:0d51a6f10039dc3f:1"
time="2021-06-16T17:02:15Z" level=info msg="Waiting for liveness probe: tcp:127.0.0.1:5000"
time="2021-06-16T17:02:15Z" level=info msg="Liveness probe was successful: tcp:127.0.0.1:5000"
time="2021-06-16T17:02:15Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="15f83bfc61db9a18:70cc5f7a99422e50:0d51a6f10039dc3f:1"
time="2021-06-16T17:02:15Z" level=info msg="Trying to establish connection to target: 127.0.0.1:5000"
time="2021-06-16T17:02:15Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:02:15Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{member2.com}:0xc00027ae40]}"
time="2021-06-16T17:02:15Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:02:15Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:02:15Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:02:15Z" level=info msg="Found 1 tlsconfigs. [0xc000083800]"
time="2021-06-16T17:02:15Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:02:15Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:02:15Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:02:15Z" level=info msg=">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\"\" span=7209803badaf9cde:7c0ff1a491611c2f:7b7d63cd770aadeb:1"
time="2021-06-16T17:02:15Z" level=info msg=">><<-- request={} span=7209803badaf9cde:7c0ff1a491611c2f:7b7d63cd770aadeb:1"
time="2021-06-16T17:02:15Z" level=info msg=">><<-- response={} span=7209803badaf9cde:7c0ff1a491611c2f:7b7d63cd770aadeb:1"
2021/06/16 17:02:15 Reporting span 7209803badaf9cde:7c0ff1a491611c2f:7b7d63cd770aadeb:1
time="2021-06-16T17:02:15Z" level=info msg="Successfully connected to 127.0.0.1:5000" operation=initRegistryClient span="15f83bfc61db9a18:70cc5f7a99422e50:0d51a6f10039dc3f:1"
2021/06/16 17:02:15 Reporting span 15f83bfc61db9a18:70cc5f7a99422e50:0d51a6f10039dc3f:1
time="2021-06-16T17:02:15Z" level=info msg=">><<------ url=10.244.0.13:5001 span=15f83bfc61db9a18:0d51a6f10039dc3f:1fff58e3f528c7c7:1"
time="2021-06-16T17:02:15Z" level=info msg=">><<-------- /registry.NsmRegistry/RegisterNSM()=\"\" span=15f83bfc61db9a18:0d51a6f10039dc3f:1fff58e3f528c7c7:1"
time="2021-06-16T17:02:15Z" level=info msg=">><<-------- request={\"url\":\"10.244.0.13:5001\"} span=15f83bfc61db9a18:0d51a6f10039dc3f:1fff58e3f528c7c7:1"
2021/06/16 17:02:15 Reporting span 15f83bfc61db9a18:159cb6b4adf7532a:0d51a6f10039dc3f:1
time="2021-06-16T17:02:15Z" level=info msg=">><<-------- response={\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"} span=15f83bfc61db9a18:0d51a6f10039dc3f:1fff58e3f528c7c7:1"
time="2021-06-16T17:02:15Z" level=info msg=">><<-------- /registry.NsmRegistry/GetEndpoints()=\"\" span=15f83bfc61db9a18:0d51a6f10039dc3f:1fff58e3f528c7c7:1"
time="2021-06-16T17:02:15Z" level=info msg=">><<-------- request={} span=15f83bfc61db9a18:0d51a6f10039dc3f:1fff58e3f528c7c7:1"
2021/06/16 17:02:15 Reporting span 15f83bfc61db9a18:1d4b0a9017613481:0d51a6f10039dc3f:1
time="2021-06-16T17:02:15Z" level=info msg=">><<-------- response={} span=15f83bfc61db9a18:0d51a6f10039dc3f:1fff58e3f528c7c7:1"
time="2021-06-16T17:02:15Z" level=info msg="Setting local NSM name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" "
2021/06/16 17:02:15 Reporting span 15f83bfc61db9a18:0d51a6f10039dc3f:1fff58e3f528c7c7:1
time="2021-06-16T17:02:15Z" level=info msg=">><<---- registered-endpoints={} span=15f83bfc61db9a18:1fff58e3f528c7c7:15f83bfc61db9a18:1"
time="2021-06-16T17:02:15Z" level=info msg="Connecting to nsmd on socket: /var/lib/networkservicemesh/nsm.io.sock..."
time="2021-06-16T17:02:15Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.io.sock"
time="2021-06-16T17:02:15Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:02:15Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{member2.com}:0xc0000be100]}"
time="2021-06-16T17:02:15Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:02:15Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:02:15Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:02:15Z" level=info msg="Found 1 tlsconfigs. [0xc00041f800]"
time="2021-06-16T17:02:15Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:02:15Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:02:15Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:02:15Z" level=info msg="Requesting nsmd for client connection..."
time="2021-06-16T17:02:15Z" level=info msg="NSM gRPC socket: /var/lib/networkservicemesh/nsm.io.sock is operational" operation=nsm-server-start span="15f83bfc61db9a18:1fff58e3f528c7c7:15f83bfc61db9a18:1"
time="2021-06-16T17:02:15Z" level=info msg="create monitor servers" operation=nsm-server-start span="15f83bfc61db9a18:1fff58e3f528c7c7:15f83bfc61db9a18:1"
time="2021-06-16T17:02:15Z" level=info msg="Reading excluded prefixes config file: /var/lib/networkservicemesh/config/excluded_prefixes.yaml"
time="2021-06-16T17:02:15Z" level=info msg="Excluded prefixes: []"
time="2021-06-16T17:02:15Z" level=info msg="==------> restore() span:15f83bfc61db9a18:695fef33ef2c1fb8:1fff58e3f528c7c7:1"
time="2021-06-16T17:02:15Z" level=info msg=">><<------ delete.client.registry=false span=15f83bfc61db9a18:695fef33ef2c1fb8:1fff58e3f528c7c7:1"
time="2021-06-16T17:02:15Z" level=info msg="No stored registry file exists"
time="2021-06-16T17:02:15Z" level=info msg=">><<------ clients=null span=15f83bfc61db9a18:695fef33ef2c1fb8:1fff58e3f528c7c7:1"
time="2021-06-16T17:02:15Z" level=info msg="CrossConnect - Serve starting..."
time="2021-06-16T17:02:15Z" level=info msg=">><<------ endpoints={} span=15f83bfc61db9a18:695fef33ef2c1fb8:1fff58e3f528c7c7:1"
time="2021-06-16T17:02:15Z" level=info msg="==--------> restoreClients() span:15f83bfc61db9a18:2509df9666ade81f:695fef33ef2c1fb8:1"
time="2021-06-16T17:02:15Z" level=info msg="NSMServer: Creating workspaces for existing clients..." operation=restoreClients span="15f83bfc61db9a18:2509df9666ade81f:695fef33ef2c1fb8:1"
2021/06/16 17:02:15 Reporting span 15f83bfc61db9a18:2509df9666ade81f:695fef33ef2c1fb8:1
time="2021-06-16T17:02:15Z" level=info msg=">><<------ updated-clients=[] span=15f83bfc61db9a18:695fef33ef2c1fb8:1fff58e3f528c7c7:1"
time="2021-06-16T17:02:15Z" level=info msg="==--------> restore-endpoints() span:15f83bfc61db9a18:60f98827a25b87c6:695fef33ef2c1fb8:1"
time="2021-06-16T17:02:15Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:02:15Z" level=info msg="Requesting NseRegistryClient..."
2021/06/16 17:02:15 Reporting span 15f83bfc61db9a18:60f98827a25b87c6:695fef33ef2c1fb8:1
time="2021-06-16T17:02:15Z" level=info msg="RemoteConnection - Serve starting..."
time="2021-06-16T17:02:15Z" level=info msg=">><<------ updated-endpoints={} span=15f83bfc61db9a18:695fef33ef2c1fb8:1fff58e3f528c7c7:1"
time="2021-06-16T17:02:15Z" level=info msg="NSMD: Restore of NSE/Clients Complete..." operation=restore span="15f83bfc61db9a18:695fef33ef2c1fb8:1fff58e3f528c7c7:1"
2021/06/16 17:02:15 Reporting span 15f83bfc61db9a18:695fef33ef2c1fb8:1fff58e3f528c7c7:1
2021/06/16 17:02:15 Reporting span 15f83bfc61db9a18:1fff58e3f528c7c7:15f83bfc61db9a18:1
time="2021-06-16T17:02:15Z" level=info msg="NSM server is ready"
time="2021-06-16T17:02:15Z" level=info msg="Starting Forwarder registration server..."
time="2021-06-16T17:02:15Z" level=info msg="==----> ForwarderRegistrarServer() span:15f83bfc61db9a18:6886efad89096037:15f83bfc61db9a18:1"
time="2021-06-16T17:02:15Z" level=info msg="==------> NewServer() span:15f83bfc61db9a18:05cc37275c1d1154:6886efad89096037:1"
time="2021-06-16T17:02:15Z" level=info msg="GRPC.NewServer with open tracing enabled" operation=NewServer span="15f83bfc61db9a18:05cc37275c1d1154:6886efad89096037:1"
time="2021-06-16T17:02:15Z" level=info msg="==--------> GetCertificate() span:15f83bfc61db9a18:4e6bfb210bbcecfe:05cc37275c1d1154:1"
time="2021-06-16T17:02:15Z" level=info msg="SPIRE -- GetX509SVID:&{spiffe://member2.com/wcm-nsmgr [0xc000463700 0xc0002f0000] 0xc0003c31a0}"
time="2021-06-16T17:02:15Z" level=info msg="Default trust domain:member2.com"
time="2021-06-16T17:02:15Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:02:15Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:02:15Z" level=info msg="Server will be started in secure mode using tlsConfig:&{<nil> <nil> [] map[] 0x97a4c0 <nil> <nil> 0x97a5c0 <nil> <nil> []  RequireAnyClientCert <nil> false [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
2021/06/16 17:02:15 Reporting span 15f83bfc61db9a18:4e6bfb210bbcecfe:05cc37275c1d1154:1
2021/06/16 17:02:15 Reporting span 15f83bfc61db9a18:05cc37275c1d1154:6886efad89096037:1
time="2021-06-16T17:02:15Z" level=info msg="==------> StartForwarderRegistrarServer() span:15f83bfc61db9a18:16bc4d4de7b26972:6886efad89096037:1"
time="2021-06-16T17:02:15Z" level=info msg=">><<------ path=/var/lib/networkservicemesh/nsm.forwarder-registrar.io.sock span=15f83bfc61db9a18:16bc4d4de7b26972:6886efad89096037:1"
time="2021-06-16T17:02:15Z" level=info msg="Starting Forwarder Registrar gRPC server listening on socket: /var/lib/networkservicemesh/nsm.forwarder-registrar.io.sock" operation=StartForwarderRegistrarServer span="15f83bfc61db9a18:16bc4d4de7b26972:6886efad89096037:1"
time="2021-06-16T17:02:15Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm.forwarder-registrar.io.sock"
time="2021-06-16T17:02:15Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:02:15Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{member2.com}:0xc0004012c0]}"
time="2021-06-16T17:02:15Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:02:15Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:02:15Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:02:15Z" level=info msg="Found 1 tlsconfigs. [0xc000505e00]"
time="2021-06-16T17:02:15Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:02:15Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:02:15Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:02:15Z" level=info msg="forwarder registrar Server socket: /var/lib/networkservicemesh/nsm.forwarder-registrar.io.sock is operational" operation=StartForwarderRegistrarServer span="15f83bfc61db9a18:16bc4d4de7b26972:6886efad89096037:1"
2021/06/16 17:02:15 Reporting span 15f83bfc61db9a18:16bc4d4de7b26972:6886efad89096037:1
2021/06/16 17:02:15 Reporting span 15f83bfc61db9a18:6886efad89096037:15f83bfc61db9a18:1
time="2021-06-16T17:02:15Z" level=info msg="==----> wait-forwarder() span:15f83bfc61db9a18:6312f21e5c44a252:15f83bfc61db9a18:1"
time="2021-06-16T17:02:15Z" level=info msg="Waiting for forwarder available..." operation=wait-forwarder span="15f83bfc61db9a18:6312f21e5c44a252:15f83bfc61db9a18:1"
time="2021-06-16T17:02:15Z" level=info msg=">><<-- GRPC->/forwarderregistrar.ForwarderRegistration/RequestForwarderRegistration()=\"\" span=6f581cd2be610b61:41f3a5c9846cc2c5:69aad99e1fdcaa66:1"
time="2021-06-16T17:02:15Z" level=info msg=">><<-- request={\"forwarder_name\":\"vppagent\",\"forwarder_socket\":\"/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock\"} span=6f581cd2be610b61:41f3a5c9846cc2c5:69aad99e1fdcaa66:1"
time="2021-06-16T17:02:15Z" level=info msg="Received new forwarder registration requests from vppagent"
time="2021-06-16T17:02:15Z" level=info msg="resourceAdded started: &{vppagent /var/lib/networkservicemesh/nsm-vppagent.forwarder.sock [] [] false}"
time="2021-06-16T17:02:15Z" level=info msg="resourceAdded finished: &{vppagent /var/lib/networkservicemesh/nsm-vppagent.forwarder.sock [] [] false}"
time="2021-06-16T17:02:15Z" level=info msg=">><<-- response={\"registered\":true} span=6f581cd2be610b61:41f3a5c9846cc2c5:69aad99e1fdcaa66:1"
2021/06/16 17:02:15 Reporting span 6f581cd2be610b61:41f3a5c9846cc2c5:69aad99e1fdcaa66:1
time="2021-06-16T17:02:15Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm-vppagent.forwarder.sock"
time="2021-06-16T17:02:15Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:02:15Z" level=info msg="==--> ForwarderAdded() span:710fbe314171c687:710fbe314171c687:0000000000000000:1"
2021/06/16 17:02:15 Reporting span 710fbe314171c687:710fbe314171c687:0000000000000000:1
time="2021-06-16T17:02:15Z" level=info msg="==----> Forwarder-vppagent-monitor() span:710fbe314171c687:5c41ba51f5b4c58e:710fbe314171c687:1"
time="2021-06-16T17:02:15Z" level=info msg="Starting Forwarder crossconnect monitoring client..." operation=Forwarder-vppagent-monitor span="710fbe314171c687:5c41ba51f5b4c58e:710fbe314171c687:1"
time="2021-06-16T17:02:15Z" level=info msg="NSM-ForwarderMonitor(vppagent): Added"
time="2021-06-16T17:02:15Z" level=info msg="NSM-ForwarderMonitor(vppagent): Connecting to: /var/lib/networkservicemesh/nsm-vppagent.forwarder.sock"
time="2021-06-16T17:02:15Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm-vppagent.forwarder.sock"
time="2021-06-16T17:02:15Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:02:15Z" level=info msg="Liveness Request received"
time="2021-06-16T17:02:15Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{member2.com}:0xc0000bfd00]}"
time="2021-06-16T17:02:15Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:02:15Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:02:15Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:02:15Z" level=info msg="Found 1 tlsconfigs. [0xc0004f1680]"
time="2021-06-16T17:02:15Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:02:15Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{member2.com}:0xc00027a140]}"
time="2021-06-16T17:02:15Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:02:15Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:02:15Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:02:15Z" level=info msg="Found 1 tlsconfigs. [0xc00001b980]"
time="2021-06-16T17:02:15Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:02:15Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:02:15Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:02:15Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:02:15Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:02:15Z" level=info msg="NSM-ForwarderMonitor(vppagent): Connected"
time="2021-06-16T17:02:15Z" level=info msg="NSM-ForwarderMonitor(vppagent): Started monitor"
time="2021-06-16T17:02:15Z" level=info msg="NSM-ForwarderMonitor(vppagent): Received event: &{{INITIAL_STATE_TRANSFER map[] 0xc0000a8000} map[] <nil>}"
time="2021-06-16T17:02:15Z" level=info msg="==----> Nsmgr.RestoreConnections() span:15f83bfc61db9a18:242cef55d4ff8f47:15f83bfc61db9a18:1"
time="2021-06-16T17:02:15Z" level=info msg="All connections are recovered..." operation=Nsmgr.RestoreConnections span="15f83bfc61db9a18:242cef55d4ff8f47:15f83bfc61db9a18:1"
2021/06/16 17:02:15 Reporting span 15f83bfc61db9a18:242cef55d4ff8f47:15f83bfc61db9a18:1
time="2021-06-16T17:02:15Z" level=info msg="Forwarder vppagent informed of its parameters changes, applying new parameters [type:\"VXLAN\" parameters:<key:\"mtu_overhead\" value:\"50\" > parameters:<key:\"src_ip\" value:\"172.17.0.4\" >  type:\"IPSEC\" parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"src_ip\" value:\"172.17.0.4\" > ]"
time="2021-06-16T17:02:15Z" level=info msg="resourceUpdated started: &{vppagent /var/lib/networkservicemesh/nsm-vppagent.forwarder.sock [type:\"MEMIF\"  type:\"KERNEL_INTERFACE\" ] [type:\"VXLAN\" parameters:<key:\"mtu_overhead\" value:\"50\" > parameters:<key:\"src_ip\" value:\"172.17.0.4\" >  type:\"IPSEC\" parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"src_ip\" value:\"172.17.0.4\" > ] true}"
time="2021-06-16T17:02:15Z" level=info msg="resourceUpdated finished: &{vppagent /var/lib/networkservicemesh/nsm-vppagent.forwarder.sock [type:\"MEMIF\"  type:\"KERNEL_INTERFACE\" ] [type:\"VXLAN\" parameters:<key:\"mtu_overhead\" value:\"50\" > parameters:<key:\"src_ip\" value:\"172.17.0.4\" >  type:\"IPSEC\" parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"src_ip\" value:\"172.17.0.4\" > ] true}"
2021/06/16 17:02:16 Reporting span 15f83bfc61db9a18:6312f21e5c44a252:15f83bfc61db9a18:1
time="2021-06-16T17:02:16Z" level=info msg="Forwarder is available, waiting for initial state received and processed..."
time="2021-06-16T17:02:16Z" level=info msg="Forwarder server is ready" operation=nsmd.server span="15f83bfc61db9a18:15f83bfc61db9a18:0000000000000000:1"
time="2021-06-16T17:02:16Z" level=info msg=">><<-- api-address=\":5001\" span=15f83bfc61db9a18:15f83bfc61db9a18:0000000000000000:1"
time="2021-06-16T17:02:16Z" level=info msg="Public listener is ready" operation=nsmd.server span="15f83bfc61db9a18:15f83bfc61db9a18:0000000000000000:1"
time="2021-06-16T17:02:16Z" level=info msg="==----> start-public-api-server() span:15f83bfc61db9a18:488c1d7d350158d1:15f83bfc61db9a18:1"
time="2021-06-16T17:02:16Z" level=info msg="==------> NewServer() span:15f83bfc61db9a18:10a892754da9880d:488c1d7d350158d1:1"
time="2021-06-16T17:02:16Z" level=info msg="GRPC.NewServer with open tracing enabled" operation=NewServer span="15f83bfc61db9a18:10a892754da9880d:488c1d7d350158d1:1"
time="2021-06-16T17:02:16Z" level=info msg="==--------> GetCertificate() span:15f83bfc61db9a18:7daead70cedc1f7b:10a892754da9880d:1"
time="2021-06-16T17:02:16Z" level=info msg="SPIRE -- GetX509SVID:&{spiffe://member2.com/wcm-nsmgr [0xc000462c00 0xc000463180] 0xc0004ca810}"
time="2021-06-16T17:02:16Z" level=info msg="Default trust domain:member2.com"
time="2021-06-16T17:02:16Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:02:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:02:16Z" level=info msg="Server will be started in secure mode using tlsConfig:&{<nil> <nil> [] map[] 0x97a4c0 <nil> <nil> 0x97a5c0 <nil> <nil> []  RequireAnyClientCert <nil> false [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
2021/06/16 17:02:16 Reporting span 15f83bfc61db9a18:7daead70cedc1f7b:10a892754da9880d:1
2021/06/16 17:02:16 Reporting span 15f83bfc61db9a18:10a892754da9880d:488c1d7d350158d1:1
time="2021-06-16T17:02:16Z" level=info msg="NSM gRPC API Server: [::]:5001 is operational" operation=start-public-api-server span="15f83bfc61db9a18:488c1d7d350158d1:15f83bfc61db9a18:1"
2021/06/16 17:02:16 Reporting span 15f83bfc61db9a18:488c1d7d350158d1:15f83bfc61db9a18:1
time="2021-06-16T17:02:16Z" level=info msg="Serve api is ready" operation=nsmd.server span="15f83bfc61db9a18:15f83bfc61db9a18:0000000000000000:1"
time="2021-06-16T17:02:16Z" level=info msg=">><<-- start-time=1.617055522s span=15f83bfc61db9a18:15f83bfc61db9a18:0000000000000000:1"
2021/06/16 17:02:16 Reporting span 15f83bfc61db9a18:15f83bfc61db9a18:0000000000000000:1
time="2021-06-16T17:02:16Z" level=info msg="MonitorServerImpl.AddRecipient: CrossConnect-&{0xc000422240}"
time="2021-06-16T17:02:30Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:02:45Z" level=info msg=">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\"\" span=6375f3a9482b8c35:453bc20d3e4e98eb:3180558a7937a389:1"
time="2021-06-16T17:02:45Z" level=info msg=">><<-- request={} span=6375f3a9482b8c35:453bc20d3e4e98eb:3180558a7937a389:1"
time="2021-06-16T17:02:45Z" level=info msg=">><<-- response={} span=6375f3a9482b8c35:453bc20d3e4e98eb:3180558a7937a389:1"
2021/06/16 17:02:45 Reporting span 6375f3a9482b8c35:453bc20d3e4e98eb:3180558a7937a389:1
time="2021-06-16T17:02:45Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:03:00Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:03:15Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:03:30Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:03:45Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:04:00Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:04:03Z" level=info msg=">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\"\" span=5336cd279eaa21df:1ac2370ccc75ed79:439de00acbc338c7:1"
time="2021-06-16T17:04:03Z" level=info msg=">><<-- request={} span=5336cd279eaa21df:1ac2370ccc75ed79:439de00acbc338c7:1"
time="2021-06-16T17:04:03Z" level=info msg=">><<-- response={} span=5336cd279eaa21df:1ac2370ccc75ed79:439de00acbc338c7:1"
2021/06/16 17:04:03 Reporting span 5336cd279eaa21df:1ac2370ccc75ed79:439de00acbc338c7:1
time="2021-06-16T17:04:15Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:04:30Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:04:43Z" level=info msg=">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\"\" span=4db053ba358acc88:2d3d2b7516693b23:39304c348616e4ac:1"
time="2021-06-16T17:04:43Z" level=info msg=">><<-- request={} span=4db053ba358acc88:2d3d2b7516693b23:39304c348616e4ac:1"
time="2021-06-16T17:04:43Z" level=info msg=">><<-- response={} span=4db053ba358acc88:2d3d2b7516693b23:39304c348616e4ac:1"
2021/06/16 17:04:43 Reporting span 4db053ba358acc88:2d3d2b7516693b23:39304c348616e4ac:1
time="2021-06-16T17:04:45Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:04:50Z" level=info msg=">><<-- GRPC->/nsmdapi.NSMD/RequestClientConnection()=\"\" span=7e84dce40d47e4a8:7d53fdc4ee83ba20:34a6884c69c5878c:1"
time="2021-06-16T17:04:50Z" level=info msg=">><<-- request={\"workspace\":\"nsm-29\"} span=7e84dce40d47e4a8:7d53fdc4ee83ba20:34a6884c69c5878c:1"
time="2021-06-16T17:04:50Z" level=info msg="==--> RequestClientConnection() span:7e84dce40d47e4a8:166d1cb56f328e6e:7d53fdc4ee83ba20:1"
time="2021-06-16T17:04:50Z" level=info msg="Requested client connection to nsmd : workspace:\"nsm-29\" " operation=RequestClientConnection span="7e84dce40d47e4a8:166d1cb56f328e6e:7d53fdc4ee83ba20:1"
time="2021-06-16T17:04:50Z" level=info msg="==----> Workspace:nsm-29() span:7e84dce40d47e4a8:0277790a7752d340:166d1cb56f328e6e:1"
time="2021-06-16T17:04:50Z" level=info msg="Creating new workspace: nsm-29" operation="Workspace:nsm-29" span="7e84dce40d47e4a8:0277790a7752d340:166d1cb56f328e6e:1"
time="2021-06-16T17:04:50Z" level=info msg=">><<---- restore=false span=7e84dce40d47e4a8:0277790a7752d340:166d1cb56f328e6e:1"
time="2021-06-16T17:04:50Z" level=info msg="==------> clearContents() span:7e84dce40d47e4a8:01b9dfefad282d1e:0277790a7752d340:1"
time="2021-06-16T17:04:50Z" level=info msg="No exist folder /var/lib/networkservicemesh/nsm-29" operation=clearContents span="7e84dce40d47e4a8:01b9dfefad282d1e:0277790a7752d340:1"
2021/06/16 17:04:50 Reporting span 7e84dce40d47e4a8:01b9dfefad282d1e:0277790a7752d340:1
time="2021-06-16T17:04:50Z" level=info msg="Creating new directory: /var/lib/networkservicemesh/nsm-29" operation="Workspace:nsm-29" span="7e84dce40d47e4a8:0277790a7752d340:166d1cb56f328e6e:1"
time="2021-06-16T17:04:50Z" level=info msg="Creating new listener on: /var/lib/networkservicemesh/nsm-29/nsm.server.io.sock" operation="Workspace:nsm-29" span="7e84dce40d47e4a8:0277790a7752d340:166d1cb56f328e6e:1"
time="2021-06-16T17:04:50Z" level=info msg="Creating new NetworkServiceRegistryServer" operation="Workspace:nsm-29" span="7e84dce40d47e4a8:0277790a7752d340:166d1cb56f328e6e:1"
time="2021-06-16T17:04:50Z" level=info msg="Creating new MonitorConnectionServer" operation="Workspace:nsm-29" span="7e84dce40d47e4a8:0277790a7752d340:166d1cb56f328e6e:1"
time="2021-06-16T17:04:50Z" level=info msg="Creating new NetworkServiceServer" operation="Workspace:nsm-29" span="7e84dce40d47e4a8:0277790a7752d340:166d1cb56f328e6e:1"
time="2021-06-16T17:04:50Z" level=info msg="Reading excluded prefixes config file: /var/lib/networkservicemesh/config/excluded_prefixes.yaml"
time="2021-06-16T17:04:50Z" level=info msg="Excluded prefixes: []"
time="2021-06-16T17:04:50Z" level=info msg="Creating new GRPC MonitorServer" operation="Workspace:nsm-29" span="7e84dce40d47e4a8:0277790a7752d340:166d1cb56f328e6e:1"
time="2021-06-16T17:04:50Z" level=info msg="==------> NewServer() span:7e84dce40d47e4a8:27e4618492c62ff2:0277790a7752d340:1"
time="2021-06-16T17:04:50Z" level=info msg="GRPC.NewServer with open tracing enabled" operation=NewServer span="7e84dce40d47e4a8:27e4618492c62ff2:0277790a7752d340:1"
time="2021-06-16T17:04:50Z" level=info msg="==--------> GetCertificate() span:7e84dce40d47e4a8:076a3c2bb15fcd07:27e4618492c62ff2:1"
time="2021-06-16T17:04:50Z" level=info msg="LocalConnection - Serve starting..."
time="2021-06-16T17:04:50Z" level=info msg="SPIRE -- GetX509SVID:&{spiffe://member2.com/wcm-nsmgr [0xc0002f1b80 0xc0002f2c00] 0xc0004cb920}"
time="2021-06-16T17:04:50Z" level=info msg="Default trust domain:member2.com"
time="2021-06-16T17:04:50Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:04:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:50Z" level=info msg="Server will be started in secure mode using tlsConfig:&{<nil> <nil> [] map[] 0x97a4c0 <nil> <nil> 0x97a5c0 <nil> <nil> []  RequireAnyClientCert <nil> false [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
2021/06/16 17:04:50 Reporting span 7e84dce40d47e4a8:076a3c2bb15fcd07:27e4618492c62ff2:1
2021/06/16 17:04:50 Reporting span 7e84dce40d47e4a8:27e4618492c62ff2:0277790a7752d340:1
time="2021-06-16T17:04:50Z" level=info msg="Registering NetworkServiceRegistryServer with registerServer" operation="Workspace:nsm-29" span="7e84dce40d47e4a8:0277790a7752d340:166d1cb56f328e6e:1"
time="2021-06-16T17:04:50Z" level=info msg="Registering NetworkServiceDiscoveryServer with discoveryServer" operation="Workspace:nsm-29" span="7e84dce40d47e4a8:0277790a7752d340:166d1cb56f328e6e:1"
time="2021-06-16T17:04:50Z" level=info msg="Registering NetworkServiceServer with registerServer" operation="Workspace:nsm-29" span="7e84dce40d47e4a8:0277790a7752d340:166d1cb56f328e6e:1"
time="2021-06-16T17:04:50Z" level=info msg="Registering MonitorConnectionServer with registerServer" operation="Workspace:nsm-29" span="7e84dce40d47e4a8:0277790a7752d340:166d1cb56f328e6e:1"
time="2021-06-16T17:04:50Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm-29/nsm.server.io.sock"
time="2021-06-16T17:04:50Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:04:50Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0006de3c0 {member1.com}:0xc0006de480 {member2.com}:0xc0006de240]}"
time="2021-06-16T17:04:50Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:04:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:50Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:04:50Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:04:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:50Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:04:50Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:04:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:04:50Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:04:50Z" level=info msg="Found 3 tlsconfigs. [0xc00085e000 0xc00085e180 0xc00085e480]"
time="2021-06-16T17:04:50Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:04:55Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:04:55Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:05:00Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:05:00Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:05:00Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:05:00Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:05:00Z" level=info msg="grpcserver for workspace &{name:nsm-29 listener:0xc0005633c0 registryServer:0xc000563460 networkServiceServer:0xc0004ca210 monitorConnectionServer:0xc000563500 grpcServer:0xc000214c40 Mutex:{state:0 sema:0} state:2 locationProvider:0xc0002924e0 localRegistry:0xc0002a4c40 ctx:0xc000391890 discoveryServer:0xc000485430} is operational" operation="Workspace:nsm-29" span="7e84dce40d47e4a8:0277790a7752d340:166d1cb56f328e6e:1"
time="2021-06-16T17:05:00Z" level=info msg="Created new workspace: &{name:nsm-29 listener:0xc0005633c0 registryServer:0xc000563460 networkServiceServer:0xc0004ca210 monitorConnectionServer:0xc000563500 grpcServer:0xc000214c40 Mutex:{state:0 sema:0} state:2 locationProvider:0xc0002924e0 localRegistry:0xc0002a4c40 ctx:0xc000391890 discoveryServer:0xc000485430}" operation="Workspace:nsm-29" span="7e84dce40d47e4a8:0277790a7752d340:166d1cb56f328e6e:1"
time="2021-06-16T17:05:00Z" level=info msg="==------> cleanup() span:7e84dce40d47e4a8:7f161dbdf3618c1c:0277790a7752d340:1"
2021/06/16 17:05:00 Reporting span 7e84dce40d47e4a8:7f161dbdf3618c1c:0277790a7752d340:1
2021/06/16 17:05:00 Reporting span 7e84dce40d47e4a8:0277790a7752d340:166d1cb56f328e6e:1
time="2021-06-16T17:05:00Z" level=info msg="New workspace created: &{name:nsm-29 listener:0xc0005633c0 registryServer:0xc000563460 networkServiceServer:0xc0004ca210 monitorConnectionServer:0xc000563500 grpcServer:0xc000214c40 Mutex:{state:0 sema:0} state:2 locationProvider:0xc0002924e0 localRegistry:0xc0002a4c40 ctx:0xc000391890 discoveryServer:0xc000485430}" operation=RequestClientConnection span="7e84dce40d47e4a8:166d1cb56f328e6e:7d53fdc4ee83ba20:1"
time="2021-06-16T17:05:00Z" level=info msg=">><<-- ClientConnectionReply={\"workspace\":\"nsm-29\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=7e84dce40d47e4a8:166d1cb56f328e6e:7d53fdc4ee83ba20:1"
2021/06/16 17:05:00 Reporting span 7e84dce40d47e4a8:166d1cb56f328e6e:7d53fdc4ee83ba20:1
time="2021-06-16T17:05:00Z" level=info msg=">><<-- response={\"workspace\":\"nsm-29\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=7e84dce40d47e4a8:7d53fdc4ee83ba20:34a6884c69c5878c:1"
2021/06/16 17:05:00 Reporting span 7e84dce40d47e4a8:7d53fdc4ee83ba20:34a6884c69c5878c:1
time="2021-06-16T17:05:00Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:05:10Z" level=info msg=">><<-- GRPC->/nsmdapi.NSMD/RequestClientConnection()=\"\" span=63de0fb2806c3023:6f422b5f2fb4bd58:012ea8dfc900c90a:1"
time="2021-06-16T17:05:10Z" level=info msg=">><<-- request={\"workspace\":\"nsm-18\"} span=63de0fb2806c3023:6f422b5f2fb4bd58:012ea8dfc900c90a:1"
time="2021-06-16T17:05:10Z" level=info msg="==--> RequestClientConnection() span:63de0fb2806c3023:03a05d99a1ff4730:6f422b5f2fb4bd58:1"
time="2021-06-16T17:05:10Z" level=info msg="Requested client connection to nsmd : workspace:\"nsm-18\" " operation=RequestClientConnection span="63de0fb2806c3023:03a05d99a1ff4730:6f422b5f2fb4bd58:1"
time="2021-06-16T17:05:10Z" level=info msg="==----> Workspace:nsm-18() span:63de0fb2806c3023:5943d114a2a68a55:03a05d99a1ff4730:1"
time="2021-06-16T17:05:10Z" level=info msg="Creating new workspace: nsm-18" operation="Workspace:nsm-18" span="63de0fb2806c3023:5943d114a2a68a55:03a05d99a1ff4730:1"
time="2021-06-16T17:05:10Z" level=info msg=">><<---- restore=false span=63de0fb2806c3023:5943d114a2a68a55:03a05d99a1ff4730:1"
time="2021-06-16T17:05:10Z" level=info msg="==------> clearContents() span:63de0fb2806c3023:79443f3a6f67173d:5943d114a2a68a55:1"
time="2021-06-16T17:05:10Z" level=info msg="No exist folder /var/lib/networkservicemesh/nsm-18" operation=clearContents span="63de0fb2806c3023:79443f3a6f67173d:5943d114a2a68a55:1"
2021/06/16 17:05:10 Reporting span 63de0fb2806c3023:79443f3a6f67173d:5943d114a2a68a55:1
time="2021-06-16T17:05:10Z" level=info msg="Creating new directory: /var/lib/networkservicemesh/nsm-18" operation="Workspace:nsm-18" span="63de0fb2806c3023:5943d114a2a68a55:03a05d99a1ff4730:1"
time="2021-06-16T17:05:10Z" level=info msg="Creating new listener on: /var/lib/networkservicemesh/nsm-18/nsm.server.io.sock" operation="Workspace:nsm-18" span="63de0fb2806c3023:5943d114a2a68a55:03a05d99a1ff4730:1"
time="2021-06-16T17:05:10Z" level=info msg="Creating new NetworkServiceRegistryServer" operation="Workspace:nsm-18" span="63de0fb2806c3023:5943d114a2a68a55:03a05d99a1ff4730:1"
time="2021-06-16T17:05:10Z" level=info msg="Creating new MonitorConnectionServer" operation="Workspace:nsm-18" span="63de0fb2806c3023:5943d114a2a68a55:03a05d99a1ff4730:1"
time="2021-06-16T17:05:10Z" level=info msg="Creating new NetworkServiceServer" operation="Workspace:nsm-18" span="63de0fb2806c3023:5943d114a2a68a55:03a05d99a1ff4730:1"
time="2021-06-16T17:05:10Z" level=info msg="Reading excluded prefixes config file: /var/lib/networkservicemesh/config/excluded_prefixes.yaml"
time="2021-06-16T17:05:10Z" level=info msg="Excluded prefixes: []"
time="2021-06-16T17:05:10Z" level=info msg="Creating new GRPC MonitorServer" operation="Workspace:nsm-18" span="63de0fb2806c3023:5943d114a2a68a55:03a05d99a1ff4730:1"
time="2021-06-16T17:05:10Z" level=info msg="==------> NewServer() span:63de0fb2806c3023:62587845a3c3b2b2:5943d114a2a68a55:1"
time="2021-06-16T17:05:10Z" level=info msg="GRPC.NewServer with open tracing enabled" operation=NewServer span="63de0fb2806c3023:62587845a3c3b2b2:5943d114a2a68a55:1"
time="2021-06-16T17:05:10Z" level=info msg="==--------> GetCertificate() span:63de0fb2806c3023:785530c75941feb4:62587845a3c3b2b2:1"
time="2021-06-16T17:05:10Z" level=info msg="LocalConnection - Serve starting..."
time="2021-06-16T17:05:10Z" level=info msg="SPIRE -- GetX509SVID:&{spiffe://member2.com/wcm-nsmgr [0xc000175b80 0xc000176100] 0xc00036b3b0}"
time="2021-06-16T17:05:10Z" level=info msg="Default trust domain:member2.com"
time="2021-06-16T17:05:10Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:05:10Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:10Z" level=info msg="Server will be started in secure mode using tlsConfig:&{<nil> <nil> [] map[] 0x97a4c0 <nil> <nil> 0x97a5c0 <nil> <nil> []  RequireAnyClientCert <nil> false [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
2021/06/16 17:05:10 Reporting span 63de0fb2806c3023:785530c75941feb4:62587845a3c3b2b2:1
2021/06/16 17:05:10 Reporting span 63de0fb2806c3023:62587845a3c3b2b2:5943d114a2a68a55:1
time="2021-06-16T17:05:10Z" level=info msg="Registering NetworkServiceRegistryServer with registerServer" operation="Workspace:nsm-18" span="63de0fb2806c3023:5943d114a2a68a55:03a05d99a1ff4730:1"
time="2021-06-16T17:05:10Z" level=info msg="Registering NetworkServiceDiscoveryServer with discoveryServer" operation="Workspace:nsm-18" span="63de0fb2806c3023:5943d114a2a68a55:03a05d99a1ff4730:1"
time="2021-06-16T17:05:10Z" level=info msg="Registering NetworkServiceServer with registerServer" operation="Workspace:nsm-18" span="63de0fb2806c3023:5943d114a2a68a55:03a05d99a1ff4730:1"
time="2021-06-16T17:05:10Z" level=info msg="Registering MonitorConnectionServer with registerServer" operation="Workspace:nsm-18" span="63de0fb2806c3023:5943d114a2a68a55:03a05d99a1ff4730:1"
time="2021-06-16T17:05:10Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm-18/nsm.server.io.sock"
time="2021-06-16T17:05:10Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:05:10Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0002ab000 {member1.com}:0xc0002ab080 {member2.com}:0xc0002aaf80]}"
time="2021-06-16T17:05:10Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:05:10Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:10Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:05:10Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:05:10Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:10Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:05:10Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:05:10Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:10Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:05:10Z" level=info msg="Found 3 tlsconfigs. [0xc00039dc80 0xc00039de00 0xc00038d680]"
time="2021-06-16T17:05:10Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:05:15Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:05:15Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:05:15Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:05:20Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:05:20Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:05:20Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:05:20Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:05:20Z" level=info msg="grpcserver for workspace &{name:nsm-18 listener:0xc00045e820 registryServer:0xc00045e8e0 networkServiceServer:0xc0006d2f90 monitorConnectionServer:0xc00045e980 grpcServer:0xc0004fa1c0 Mutex:{state:0 sema:0} state:2 locationProvider:0xc0002924e0 localRegistry:0xc0002a4c40 ctx:0xc0006d2660 discoveryServer:0xc0006bec40} is operational" operation="Workspace:nsm-18" span="63de0fb2806c3023:5943d114a2a68a55:03a05d99a1ff4730:1"
time="2021-06-16T17:05:20Z" level=info msg="Created new workspace: &{name:nsm-18 listener:0xc00045e820 registryServer:0xc00045e8e0 networkServiceServer:0xc0006d2f90 monitorConnectionServer:0xc00045e980 grpcServer:0xc0004fa1c0 Mutex:{state:0 sema:0} state:2 locationProvider:0xc0002924e0 localRegistry:0xc0002a4c40 ctx:0xc0006d2660 discoveryServer:0xc0006bec40}" operation="Workspace:nsm-18" span="63de0fb2806c3023:5943d114a2a68a55:03a05d99a1ff4730:1"
time="2021-06-16T17:05:20Z" level=info msg="==------> cleanup() span:63de0fb2806c3023:289449c25be85ecc:5943d114a2a68a55:1"
2021/06/16 17:05:20 Reporting span 63de0fb2806c3023:289449c25be85ecc:5943d114a2a68a55:1
2021/06/16 17:05:20 Reporting span 63de0fb2806c3023:5943d114a2a68a55:03a05d99a1ff4730:1
time="2021-06-16T17:05:20Z" level=info msg="New workspace created: &{name:nsm-18 listener:0xc00045e820 registryServer:0xc00045e8e0 networkServiceServer:0xc0006d2f90 monitorConnectionServer:0xc00045e980 grpcServer:0xc0004fa1c0 Mutex:{state:0 sema:0} state:2 locationProvider:0xc0002924e0 localRegistry:0xc0002a4c40 ctx:0xc0006d2660 discoveryServer:0xc0006bec40}" operation=RequestClientConnection span="63de0fb2806c3023:03a05d99a1ff4730:6f422b5f2fb4bd58:1"
time="2021-06-16T17:05:20Z" level=info msg=">><<-- ClientConnectionReply={\"workspace\":\"nsm-18\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=63de0fb2806c3023:03a05d99a1ff4730:6f422b5f2fb4bd58:1"
2021/06/16 17:05:20 Reporting span 63de0fb2806c3023:03a05d99a1ff4730:6f422b5f2fb4bd58:1
time="2021-06-16T17:05:20Z" level=info msg=">><<-- response={\"workspace\":\"nsm-18\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=63de0fb2806c3023:6f422b5f2fb4bd58:012ea8dfc900c90a:1"
2021/06/16 17:05:20 Reporting span 63de0fb2806c3023:6f422b5f2fb4bd58:012ea8dfc900c90a:1
time="2021-06-16T17:05:23Z" level=info msg=">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\"\" span=114661d187987e57:56e957811ce617b5:40a4707852d02df5:1"
time="2021-06-16T17:05:23Z" level=info msg=">><<-- request={} span=114661d187987e57:56e957811ce617b5:40a4707852d02df5:1"
time="2021-06-16T17:05:23Z" level=info msg=">><<-- response={\"workspace\":[\"nsm-29\",\"nsm-18\"]} span=114661d187987e57:56e957811ce617b5:40a4707852d02df5:1"
2021/06/16 17:05:23 Reporting span 114661d187987e57:56e957811ce617b5:40a4707852d02df5:1
time="2021-06-16T17:05:30Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:05:45Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:05:51Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=6259cad18ffe4ab3:1ba965dfb203f48f:652b70ad5cccb913:1"
time="2021-06-16T17:05:51Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_endpoint\":{\"payload\":\"IP\",\"network_service_name\":\"green\",\"labels\":{\"app\":\"vl3-nse-green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"}}} span=6259cad18ffe4ab3:1ba965dfb203f48f:652b70ad5cccb913:1"
time="2021-06-16T17:05:51Z" level=info msg="==--> RegisterNSE() span:6259cad18ffe4ab3:31f8187b9388e2f7:1ba965dfb203f48f:1"
time="2021-06-16T17:05:51Z" level=info msg="Received RegisterNSE request: network_service:<name:\"green\" payload:\"IP\" > network_service_endpoint:<payload:\"IP\" network_service_name:\"green\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > > " operation=RegisterNSE span="6259cad18ffe4ab3:31f8187b9388e2f7:1ba965dfb203f48f:1"
time="2021-06-16T17:05:51Z" level=info msg="Requesting NseRegistryClient..."
time="2021-06-16T17:05:51Z" level=info msg=">><<---- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=6259cad18ffe4ab3:31f8187b9388e2f7:1ba965dfb203f48f:1"
time="2021-06-16T17:05:51Z" level=info msg=">><<---- request={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"url\":\"10.244.0.13:5001\"},\"network_service_endpoint\":{\"payload\":\"IP\",\"network_service_name\":\"green\",\"labels\":{\"app\":\"vl3-nse-green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"}}} span=6259cad18ffe4ab3:31f8187b9388e2f7:1ba965dfb203f48f:1"
2021/06/16 17:05:51 Reporting span 6259cad18ffe4ab3:58e5bcb7ea4dd9b1:31f8187b9388e2f7:1
time="2021-06-16T17:05:51Z" level=info msg=">><<---- response={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=6259cad18ffe4ab3:31f8187b9388e2f7:1ba965dfb203f48f:1"
time="2021-06-16T17:05:51Z" level=info msg="resourceAdded started: &{network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock nsm-29}"
time="2021-06-16T17:05:51Z" level=info msg="==--> EndpointAdded() span:6259cad18ffe4ab3:25cfcf65c0a8e687:31f8187b9388e2f7:1"
2021/06/16 17:05:51 Reporting span 6259cad18ffe4ab3:25cfcf65c0a8e687:31f8187b9388e2f7:1
time="2021-06-16T17:05:51Z" level=info msg="NSM-EndpointMonitor(green6bjtj): Added"
time="2021-06-16T17:05:51Z" level=info msg="NSM-EndpointMonitor(green6bjtj): Connecting to: /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock"
time="2021-06-16T17:05:51Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock"
time="2021-06-16T17:05:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:05:51Z" level=info msg="resourceAdded finished: &{network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock nsm-29}"
time="2021-06-16T17:05:51Z" level=info msg="Received upstream NSERegitration: network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" > "
time="2021-06-16T17:05:51Z" level=info msg="Requesting NseRegistryClient..."
time="2021-06-16T17:05:51Z" level=info msg=">><<-- registration={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=6259cad18ffe4ab3:31f8187b9388e2f7:1ba965dfb203f48f:1"
2021/06/16 17:05:51 Reporting span 6259cad18ffe4ab3:31f8187b9388e2f7:1ba965dfb203f48f:1
time="2021-06-16T17:05:51Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=6259cad18ffe4ab3:1ba965dfb203f48f:652b70ad5cccb913:1"
2021/06/16 17:05:51 Reporting span 6259cad18ffe4ab3:1ba965dfb203f48f:652b70ad5cccb913:1
time="2021-06-16T17:05:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000400b00 {member1.com}:0xc000400b80 {member2.com}:0xc000400a40]}"
time="2021-06-16T17:05:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:05:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:05:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:05:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:05:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:05:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:05:51Z" level=info msg="Found 3 tlsconfigs. [0xc000548900 0xc000548a80 0xc000548c00]"
time="2021-06-16T17:05:51Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:05:52Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=4951a7b77fd453c8:7ce129ccc3671f24:1d1f2ae1f947ac77:1"
time="2021-06-16T17:05:52Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_endpoint\":{\"payload\":\"IP\",\"network_service_name\":\"green\",\"labels\":{\"app\":\"vl3-nse-green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"}}} span=4951a7b77fd453c8:7ce129ccc3671f24:1d1f2ae1f947ac77:1"
time="2021-06-16T17:05:52Z" level=info msg="==--> RegisterNSE() span:4951a7b77fd453c8:41a91f10fd095c34:7ce129ccc3671f24:1"
time="2021-06-16T17:05:52Z" level=info msg="Received RegisterNSE request: network_service:<name:\"green\" payload:\"IP\" > network_service_endpoint:<payload:\"IP\" network_service_name:\"green\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > > " operation=RegisterNSE span="4951a7b77fd453c8:41a91f10fd095c34:7ce129ccc3671f24:1"
time="2021-06-16T17:05:52Z" level=info msg="Requesting NseRegistryClient..."
time="2021-06-16T17:05:52Z" level=info msg=">><<---- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=4951a7b77fd453c8:41a91f10fd095c34:7ce129ccc3671f24:1"
time="2021-06-16T17:05:52Z" level=info msg=">><<---- request={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"url\":\"10.244.0.13:5001\"},\"network_service_endpoint\":{\"payload\":\"IP\",\"network_service_name\":\"green\",\"labels\":{\"app\":\"vl3-nse-green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"}}} span=4951a7b77fd453c8:41a91f10fd095c34:7ce129ccc3671f24:1"
2021/06/16 17:05:52 Reporting span 4951a7b77fd453c8:0b53ac0731ab33e2:41a91f10fd095c34:1
time="2021-06-16T17:05:52Z" level=info msg=">><<---- response={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=4951a7b77fd453c8:41a91f10fd095c34:7ce129ccc3671f24:1"
time="2021-06-16T17:05:52Z" level=info msg="resourceAdded started: &{network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6gqkr\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  /var/lib/networkservicemesh/nsm-18/nsm.client.io.sock nsm-18}"
time="2021-06-16T17:05:52Z" level=info msg="resourceAdded finished: &{network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6gqkr\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  /var/lib/networkservicemesh/nsm-18/nsm.client.io.sock nsm-18}"
time="2021-06-16T17:05:52Z" level=info msg="Received upstream NSERegitration: network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6gqkr\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" > "
time="2021-06-16T17:05:52Z" level=info msg="Requesting NseRegistryClient..."
time="2021-06-16T17:05:52Z" level=info msg="==--> EndpointAdded() span:4951a7b77fd453c8:5f3cb22fa11f3856:41a91f10fd095c34:1"
2021/06/16 17:05:52 Reporting span 4951a7b77fd453c8:5f3cb22fa11f3856:41a91f10fd095c34:1
time="2021-06-16T17:05:52Z" level=info msg="NSM-EndpointMonitor(green6gqkr): Added"
time="2021-06-16T17:05:52Z" level=info msg="NSM-EndpointMonitor(green6gqkr): Connecting to: /var/lib/networkservicemesh/nsm-18/nsm.client.io.sock"
time="2021-06-16T17:05:52Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm-18/nsm.client.io.sock"
time="2021-06-16T17:05:52Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:05:52Z" level=info msg=">><<-- registration={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=4951a7b77fd453c8:41a91f10fd095c34:7ce129ccc3671f24:1"
2021/06/16 17:05:52 Reporting span 4951a7b77fd453c8:41a91f10fd095c34:7ce129ccc3671f24:1
time="2021-06-16T17:05:52Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=4951a7b77fd453c8:7ce129ccc3671f24:1d1f2ae1f947ac77:1"
2021/06/16 17:05:52 Reporting span 4951a7b77fd453c8:7ce129ccc3671f24:1d1f2ae1f947ac77:1
time="2021-06-16T17:05:52Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00072b000 {member1.com}:0xc00072b080 {member2.com}:0xc00072af80]}"
time="2021-06-16T17:05:52Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:05:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:52Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:05:52Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:05:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:05:52Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:05:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:05:52Z" level=info msg="Found 3 tlsconfigs. [0xc000549980 0xc000549b00 0xc000549c80]"
time="2021-06-16T17:05:52Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:05:56Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:05:56Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:05:57Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:05:57Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:00Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:06:01Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:06:01Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:01Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:01Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:01Z" level=info msg="NSM-EndpointMonitor(green6bjtj): Connected"
time="2021-06-16T17:06:01Z" level=info msg="NSM-EndpointMonitor(green6bjtj): Started monitor"
time="2021-06-16T17:06:01Z" level=info msg="NSM-EndpointMonitor(green6bjtj): Received event: &{{INITIAL_STATE_TRANSFER map[] 0xc0000a8000}}"
time="2021-06-16T17:06:01Z" level=info msg="NSM-EndpointMonitor(green6bjtj): Handler is nil, event: %v not handled: &{{INITIAL_STATE_TRANSFER map[] 0xc0000a8000}}"
time="2021-06-16T17:06:02Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:06:02Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:02Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:02Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:02Z" level=info msg="NSM-EndpointMonitor(green6gqkr): Connected"
time="2021-06-16T17:06:02Z" level=info msg="NSM-EndpointMonitor(green6gqkr): Started monitor"
time="2021-06-16T17:06:02Z" level=info msg="NSM-EndpointMonitor(green6gqkr): Received event: &{{INITIAL_STATE_TRANSFER map[] 0xc0000a8000}}"
time="2021-06-16T17:06:02Z" level=info msg="NSM-EndpointMonitor(green6gqkr): Handler is nil, event: %v not handled: &{{INITIAL_STATE_TRANSFER map[] 0xc0000a8000}}"
time="2021-06-16T17:06:03Z" level=info msg=">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\"\" span=435ab8cbdd3095a6:691e332ff1e673ec:63410f673e886688:1"
time="2021-06-16T17:06:03Z" level=info msg=">><<-- request={} span=435ab8cbdd3095a6:691e332ff1e673ec:63410f673e886688:1"
time="2021-06-16T17:06:03Z" level=info msg=">><<-- response={\"workspace\":[\"nsm-29\",\"nsm-18\"]} span=435ab8cbdd3095a6:691e332ff1e673ec:63410f673e886688:1"
2021/06/16 17:06:03 Reporting span 435ab8cbdd3095a6:691e332ff1e673ec:63410f673e886688:1
time="2021-06-16T17:06:15Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:06:16Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:06:17Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:06:22Z" level=info msg=">><<-- GRPC->/networkservice.NetworkService/Request()=\"\" span=784cf8459a76ba30:40e3c336255ee5b8:2a4fa9bba3fe8f91:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<-- request={\"connection\":{\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\"}}]} span=784cf8459a76ba30:40e3c336255ee5b8:2a4fa9bba3fe8f91:1"
time="2021-06-16T17:06:22Z" level=info msg="==--> Local.*requestValidator.Request() span:784cf8459a76ba30:6aa9743b6d8c2d82:40e3c336255ee5b8:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<-- request={\"connection\":{\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\"}}]} span=784cf8459a76ba30:6aa9743b6d8c2d82:40e3c336255ee5b8:1"
time="2021-06-16T17:06:22Z" level=info msg="==----> Local.*monitorService.Request() span:784cf8459a76ba30:7081dd2931e0db6d:6aa9743b6d8c2d82:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<---- request={\"connection\":{\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\"}}]} span=784cf8459a76ba30:7081dd2931e0db6d:6aa9743b6d8c2d82:1"
time="2021-06-16T17:06:22Z" level=info msg="==------> Local.*workspaceProviderService.Request() span:784cf8459a76ba30:68fc05b6a04237b5:7081dd2931e0db6d:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<------ request={\"connection\":{\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\"}}]} span=784cf8459a76ba30:68fc05b6a04237b5:7081dd2931e0db6d:1"
time="2021-06-16T17:06:22Z" level=info msg="Received request from client to connect to NetworkService: connection:<network_service:\"green\" context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > mechanism_preferences:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > > "
time="2021-06-16T17:06:22Z" level=info msg="==--------> Local.*connectionService.Request() span:784cf8459a76ba30:061801da590d3483:68fc05b6a04237b5:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<-------- request={\"connection\":{\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}}]} span=784cf8459a76ba30:061801da590d3483:68fc05b6a04237b5:1"
time="2021-06-16T17:06:22Z" level=info msg="Received request from client to connect to NetworkService: connection:<network_service:\"green\" context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > mechanism_preferences:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > " span="784cf8459a76ba30:061801da590d3483:68fc05b6a04237b5:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<---------- connection-id= span=784cf8459a76ba30:061801da590d3483:68fc05b6a04237b5:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<---------- workspace=nsm-18 span=784cf8459a76ba30:061801da590d3483:68fc05b6a04237b5:1"
time="2021-06-16T17:06:22Z" level=info msg="resourceAdded started: &{1 <nil> <nil> <nil> <nil>  1 0 0xc0007df480 0xc00045e980}"
time="2021-06-16T17:06:22Z" level=info msg="resourceAdded finished: &{1 <nil> <nil> <nil> <nil>  1 0 0xc0007df480 0xc00045e980}"
time="2021-06-16T17:06:22Z" level=info msg="==----------> Local.*forwarderService.Request() span:784cf8459a76ba30:455d0c063c3a5115:061801da590d3483:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<---------- request={\"connection\":{\"id\":\"1\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}}]} span=784cf8459a76ba30:455d0c063c3a5115:061801da590d3483:1"
time="2021-06-16T17:06:22Z" level=info msg="==------------> wait-forwarder() span:784cf8459a76ba30:3e1b3e7ca0d5bdde:455d0c063c3a5115:1"
time="2021-06-16T17:06:22Z" level=info msg="Waiting for forwarder available..." operation=wait-forwarder span="784cf8459a76ba30:3e1b3e7ca0d5bdde:455d0c063c3a5115:1"
2021/06/16 17:06:22 Reporting span 784cf8459a76ba30:3e1b3e7ca0d5bdde:455d0c063c3a5115:1
time="2021-06-16T17:06:22Z" level=info msg=">><<------------ dataplane={\"RegisteredName\":\"vppagent\",\"SocketLocation\":\"/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock\",\"LocalMechanisms\":[{\"type\":\"MEMIF\"},{\"type\":\"KERNEL_INTERFACE\"}],\"RemoteMechanisms\":[{\"type\":\"VXLAN\",\"parameters\":{\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.4\"}},{\"type\":\"IPSEC\",\"parameters\":{\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.4\"}}],\"MechanismsConfigured\":true} span=784cf8459a76ba30:455d0c063c3a5115:061801da590d3483:1"
time="2021-06-16T17:06:22Z" level=info msg="==------------> Local.*endpointSelectorService.Request() span:784cf8459a76ba30:1b3725004a1bd643:455d0c063c3a5115:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<------------ request={\"connection\":{\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}}]} span=784cf8459a76ba30:1b3725004a1bd643:455d0c063c3a5115:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<-------------- requestNSEOnUpdate=false span=784cf8459a76ba30:1b3725004a1bd643:455d0c063c3a5115:1"
time="2021-06-16T17:06:22Z" level=info msg="==--------------> select-nse-1() span:784cf8459a76ba30:304ed9044ff1522b:1b3725004a1bd643:1"
time="2021-06-16T17:06:22Z" level=info msg="==----------------> GetEndpoint() span:784cf8459a76ba30:5e51bf610758dc2c:304ed9044ff1522b:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<---------------- request={\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=784cf8459a76ba30:5e51bf610758dc2c:304ed9044ff1522b:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<---------------- ignores={} span=784cf8459a76ba30:5e51bf610758dc2c:304ed9044ff1522b:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<---------------- targetEndpoint=\"green6bjtj\" span=784cf8459a76ba30:5e51bf610758dc2c:304ed9044ff1522b:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<---------------- targetNsemName=\"\" span=784cf8459a76ba30:5e51bf610758dc2c:304ed9044ff1522b:1"
time="2021-06-16T17:06:22Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:06:22Z" level=info msg=">><<---------------- nseRequest={\"network_service_name\":\"green\"} span=784cf8459a76ba30:5e51bf610758dc2c:304ed9044ff1522b:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<---------------- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=784cf8459a76ba30:304ed9044ff1522b:1b3725004a1bd643:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<---------------- request={\"network_service_name\":\"green\"} span=784cf8459a76ba30:304ed9044ff1522b:1b3725004a1bd643:1"
time="2021-06-16T17:06:22Z" level=info msg="==----------> ClientConnectionAdded() span:784cf8459a76ba30:0371bcd19a41145b:061801da590d3483:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<---------- clientConnection={\"ConnectionID\":\"1\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"Server\":{}}} span=784cf8459a76ba30:0371bcd19a41145b:061801da590d3483:1"
2021/06/16 17:06:22 Reporting span 784cf8459a76ba30:0371bcd19a41145b:061801da590d3483:1
2021/06/16 17:06:22 Reporting span 784cf8459a76ba30:11796ed946a8f94b:304ed9044ff1522b:1
time="2021-06-16T17:06:22Z" level=info msg=">><<---------------- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=784cf8459a76ba30:304ed9044ff1522b:1b3725004a1bd643:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<---------------- nseResponse={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=784cf8459a76ba30:5e51bf610758dc2c:304ed9044ff1522b:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<---------------- endpoint={\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"} span=784cf8459a76ba30:5e51bf610758dc2c:304ed9044ff1522b:1"
2021/06/16 17:06:22 Reporting span 784cf8459a76ba30:5e51bf610758dc2c:304ed9044ff1522b:1
time="2021-06-16T17:06:22Z" level=info msg=">><<---------------- selected endpoint={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=784cf8459a76ba30:304ed9044ff1522b:1b3725004a1bd643:1"
time="2021-06-16T17:06:22Z" level=info msg="==----------------> Local.*excludedPrefixesService.Request() span:784cf8459a76ba30:1474d57d02e730b9:304ed9044ff1522b:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<---------------- request={\"connection\":{\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}}]} span=784cf8459a76ba30:1474d57d02e730b9:304ed9044ff1522b:1"
time="2021-06-16T17:06:22Z" level=info msg="ExcludedPrefixesService: adding excluded prefixes to connection: []" operation="Local.*excludedPrefixesService.Request" span="784cf8459a76ba30:1474d57d02e730b9:304ed9044ff1522b:1"
time="2021-06-16T17:06:22Z" level=info msg="==------------------> Local.*endpointService.Request() span:784cf8459a76ba30:3aff13f4245d378f:1474d57d02e730b9:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<------------------ request={\"connection\":{\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}}]} span=784cf8459a76ba30:3aff13f4245d378f:1474d57d02e730b9:1"
time="2021-06-16T17:06:22Z" level=info msg="==--------------------> createNSEClient() span:784cf8459a76ba30:24d6250b981c36f7:3aff13f4245d378f:1"
time="2021-06-16T17:06:22Z" level=info msg="Create local NSE connection to endpoint: &{network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock nsm-29}" operation=createNSEClient span="784cf8459a76ba30:24d6250b981c36f7:3aff13f4245d378f:1"
time="2021-06-16T17:06:22Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock"
time="2021-06-16T17:06:22Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:06:22Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0005f8dc0 {member1.com}:0xc0005f8e40 {member2.com}:0xc0005f8d40]}"
time="2021-06-16T17:06:22Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:06:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:22Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:06:22Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:06:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:06:22Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:06:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:06:22Z" level=info msg="Found 3 tlsconfigs. [0xc000549200 0xc000549500 0xc000549e00]"
time="2021-06-16T17:06:22Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:27Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:06:27Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:30Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:06:31Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:06:32Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:06:32Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:32Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:32Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
2021/06/16 17:06:32 Reporting span 784cf8459a76ba30:24d6250b981c36f7:3aff13f4245d378f:1
time="2021-06-16T17:06:32Z" level=info msg="NSM:(7.2.6.2) Requesting NSE with request connection:<id:\"2\" network_service:\"green\" context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > > mechanism_preferences:<type:\"MEMIF\" > mechanism_preferences:<type:\"KERNEL_INTERFACE\" > " operation="Local.*endpointService.Request" span="784cf8459a76ba30:3aff13f4245d378f:1474d57d02e730b9:1"
time="2021-06-16T17:06:32Z" level=info msg="==--------------------> nse.request() span:784cf8459a76ba30:0a81f4fe7aebf5f4:3aff13f4245d378f:1"
time="2021-06-16T17:06:32Z" level=info msg=">><<-------------------- nse.request={\"connection\":{\"id\":\"2\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}},\"mechanism_preferences\":[{\"type\":\"MEMIF\"},{\"type\":\"KERNEL_INTERFACE\"}]} span=784cf8459a76ba30:0a81f4fe7aebf5f4:3aff13f4245d378f:1"
time="2021-06-16T17:06:32Z" level=info msg=">><<---------------------- /networkservice.NetworkService/Request()=\"\" span=784cf8459a76ba30:0a81f4fe7aebf5f4:3aff13f4245d378f:1"
time="2021-06-16T17:06:32Z" level=info msg=">><<---------------------- request={\"connection\":{\"id\":\"2\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}},\"mechanism_preferences\":[{\"type\":\"MEMIF\"},{\"type\":\"KERNEL_INTERFACE\"}]} span=784cf8459a76ba30:0a81f4fe7aebf5f4:3aff13f4245d378f:1"
time="2021-06-16T17:06:32Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
2021/06/16 17:06:32 Reporting span 784cf8459a76ba30:5f4ad8500a4a7fcd:0a81f4fe7aebf5f4:1
time="2021-06-16T17:06:32Z" level=info msg=">><<---------------------- response={\"id\":\"2\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsms4ytL0wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsms4ytL0wp/memif.sock\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}} span=784cf8459a76ba30:0a81f4fe7aebf5f4:3aff13f4245d378f:1"
time="2021-06-16T17:06:32Z" level=info msg=">><<-------------------- nse.response={\"id\":\"2\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsms4ytL0wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsms4ytL0wp/memif.sock\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}} span=784cf8459a76ba30:0a81f4fe7aebf5f4:3aff13f4245d378f:1"
time="2021-06-16T17:06:32Z" level=info msg="NSM:(7.2.6.2.4) Update Local NSE connection parameters: cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > "
time="2021-06-16T17:06:32Z" level=info msg="==----------------------> Local.*rossConnectService.Request() span:784cf8459a76ba30:0bb6138b24e80baa:0a81f4fe7aebf5f4:1"
time="2021-06-16T17:06:32Z" level=info msg=">><<---------------------- request={\"connection\":{\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}}]} span=784cf8459a76ba30:0bb6138b24e80baa:0a81f4fe7aebf5f4:1"
time="2021-06-16T17:06:32Z" level=info msg=">><<---------------------- response={\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=784cf8459a76ba30:0bb6138b24e80baa:0a81f4fe7aebf5f4:1"
2021/06/16 17:06:32 Reporting span 784cf8459a76ba30:0bb6138b24e80baa:0a81f4fe7aebf5f4:1
2021/06/16 17:06:32 Reporting span 784cf8459a76ba30:0a81f4fe7aebf5f4:3aff13f4245d378f:1
time="2021-06-16T17:06:32Z" level=info msg=">><<------------------ response={\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=784cf8459a76ba30:3aff13f4245d378f:1474d57d02e730b9:1"
2021/06/16 17:06:32 Reporting span 784cf8459a76ba30:3aff13f4245d378f:1474d57d02e730b9:1
time="2021-06-16T17:06:32Z" level=info msg=">><<---------------- response={\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=784cf8459a76ba30:1474d57d02e730b9:304ed9044ff1522b:1"
2021/06/16 17:06:32 Reporting span 784cf8459a76ba30:1474d57d02e730b9:304ed9044ff1522b:1
2021/06/16 17:06:32 Reporting span 784cf8459a76ba30:304ed9044ff1522b:1b3725004a1bd643:1
time="2021-06-16T17:06:32Z" level=info msg=">><<------------ response={\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=784cf8459a76ba30:1b3725004a1bd643:455d0c063c3a5115:1"
2021/06/16 17:06:32 Reporting span 784cf8459a76ba30:1b3725004a1bd643:455d0c063c3a5115:1
time="2021-06-16T17:06:32Z" level=info msg="==------------> programForwarder() span:784cf8459a76ba30:52174da0d51c2442:455d0c063c3a5115:1"
time="2021-06-16T17:06:32Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm-vppagent.forwarder.sock"
time="2021-06-16T17:06:32Z" level=info msg="NSM-EndpointMonitor(green6bjtj): Received event: &{{UPDATE map[2:0xc000a8ad00] 0xc0000a8000}}"
time="2021-06-16T17:06:32Z" level=info msg="NSM-EndpointMonitor(green6bjtj): Handler is nil, event: %v not handled: &{{UPDATE map[2:0xc000a8ad00] 0xc0000a8000}}"
time="2021-06-16T17:06:32Z" level=info msg="NSM-EndpointMonitor(green6bjtj): Received event: &{{UPDATE map[2:0xc000a8ae00] 0xc0000a8000}}"
time="2021-06-16T17:06:32Z" level=info msg="NSM-EndpointMonitor(green6bjtj): Handler is nil, event: %v not handled: &{{UPDATE map[2:0xc000a8ae00] 0xc0000a8000}}"
time="2021-06-16T17:06:32Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:06:32Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000401900 {member1.com}:0xc000401ac0 {member2.com}:0xc000401880]}"
time="2021-06-16T17:06:32Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:06:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:32Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:06:32Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:06:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:06:32Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:06:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:06:32Z" level=info msg="Found 3 tlsconfigs. [0xc000a1e300 0xc000a1e480 0xc000a1e600]"
time="2021-06-16T17:06:32Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:37Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:06:37Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:42Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:06:42Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:42Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:42Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:42Z" level=info msg="==--------------> ProgramAttempt-0() span:784cf8459a76ba30:03a6828aea02ceb3:52174da0d51c2442:1"
time="2021-06-16T17:06:42Z" level=info msg=">><<-------------- attempt=0 span=784cf8459a76ba30:03a6828aea02ceb3:52174da0d51c2442:1"
time="2021-06-16T17:06:42Z" level=info msg="NSM:(9.1) Sending request to forwarder" operation=programForwarder span="784cf8459a76ba30:52174da0d51c2442:455d0c063c3a5115:1"
time="2021-06-16T17:06:42Z" level=info msg=">><<-------------- request={\"id\":\"1\",\"payload\":\"IP\",\"source\":{\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"2\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsms4ytL0wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsms4ytL0wp/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}}} span=784cf8459a76ba30:03a6828aea02ceb3:52174da0d51c2442:1"
time="2021-06-16T17:06:42Z" level=info msg=">><<---------------- /forwarder.Forwarder/Request()=\"\" span=784cf8459a76ba30:03a6828aea02ceb3:52174da0d51c2442:1"
time="2021-06-16T17:06:42Z" level=info msg=">><<---------------- request={\"id\":\"1\",\"payload\":\"IP\",\"source\":{\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"2\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsms4ytL0wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsms4ytL0wp/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}}} span=784cf8459a76ba30:03a6828aea02ceb3:52174da0d51c2442:1"
2021/06/16 17:06:42 Reporting span 784cf8459a76ba30:3c2be334d8e2e734:03a6828aea02ceb3:1
time="2021-06-16T17:06:42Z" level=info msg="NSM-ForwarderMonitor(vppagent): Received event: &{{UPDATE map[1:0xc00073ea50] 0xc0000a8000} map[] <nil>}"
time="2021-06-16T17:06:42Z" level=info msg="==--> CrossConnectUpdate() span:784cf8459a76ba30:00954a45fcbdb9a1:40e3c336255ee5b8:1"
time="2021-06-16T17:06:42Z" level=info msg=">><<-- clientConnection={\"ConnectionID\":\"1\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"Server\":{}}} span=784cf8459a76ba30:00954a45fcbdb9a1:40e3c336255ee5b8:1"
time="2021-06-16T17:06:42Z" level=info msg=">><<-- event=id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  span=784cf8459a76ba30:00954a45fcbdb9a1:40e3c336255ee5b8:1"
time="2021-06-16T17:06:42Z" level=info msg=">><<---------------- response={\"id\":\"1\",\"payload\":\"IP\",\"source\":{\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"2\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsms4ytL0wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsms4ytL0wp/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}}} span=784cf8459a76ba30:03a6828aea02ceb3:52174da0d51c2442:1"
time="2021-06-16T17:06:42Z" level=info msg="NSM:(9.2) Forwarder configuration successful" operation=ProgramAttempt-0 span="784cf8459a76ba30:03a6828aea02ceb3:52174da0d51c2442:1"
time="2021-06-16T17:06:42Z" level=info msg=">><<-- eventType=\"UPDATE\" span=784cf8459a76ba30:00954a45fcbdb9a1:40e3c336255ee5b8:1"
time="2021-06-16T17:06:42Z" level=info msg=">><<-------------- crossConnection={\"id\":\"1\",\"payload\":\"IP\",\"source\":{\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"2\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsms4ytL0wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsms4ytL0wp/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}}} span=784cf8459a76ba30:03a6828aea02ceb3:52174da0d51c2442:1"
2021/06/16 17:06:42 Reporting span 784cf8459a76ba30:03a6828aea02ceb3:52174da0d51c2442:1
time="2021-06-16T17:06:42Z" level=info msg="Send cross connect event: id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > > " operation=CrossConnectUpdate span="784cf8459a76ba30:00954a45fcbdb9a1:40e3c336255ee5b8:1"
time="2021-06-16T17:06:42Z" level=info msg="==----> UpdateXcon() span:784cf8459a76ba30:01d864ddb145395b:00954a45fcbdb9a1:1"
time="2021-06-16T17:06:42Z" level=info msg=">><<---- connection={\"ConnectionID\":\"1\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"Server\":{}}} span=784cf8459a76ba30:01d864ddb145395b:00954a45fcbdb9a1:1"
time="2021-06-16T17:06:42Z" level=info msg=">><<---- newXCon={\"id\":\"1\",\"payload\":\"IP\",\"source\":{\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"2\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsms4ytL0wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsms4ytL0wp/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}}} span=784cf8459a76ba30:01d864ddb145395b:00954a45fcbdb9a1:1"
time="2021-06-16T17:06:42Z" level=info msg="resourceUpdated started: &{1 <nil> id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  <nil> <nil>  1 0 0xc0007df480 0xc00045e980}"
time="2021-06-16T17:06:42Z" level=info msg="CrossConnect-New event: &{{UPDATE map[1:0xc00073ea50] 0xc0003c36b0} map[] 0xc0003c36b0}"
time="2021-06-16T17:06:42Z" level=info msg="==----> CrossConnect-send-update() span:784cf8459a76ba30:5b008c51ec747be8:00954a45fcbdb9a1:1"
time="2021-06-16T17:06:42Z" level=info msg=">><<---- eventType=\"UPDATE\" span=784cf8459a76ba30:5b008c51ec747be8:00954a45fcbdb9a1:1"
time="2021-06-16T17:06:42Z" level=info msg=">><<---- msg={\"type\":1,\"cross_connects\":{\"1\":{\"id\":\"1\",\"payload\":\"IP\",\"source\":{\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"2\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsms4ytL0wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsms4ytL0wp/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}}}}} span=784cf8459a76ba30:5b008c51ec747be8:00954a45fcbdb9a1:1"
time="2021-06-16T17:06:42Z" level=info msg="resourceUpdated finished: &{1 <nil> id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  <nil> <nil>  1 0 0xc0007df480 0xc00045e980}"
time="2021-06-16T17:06:42Z" level=info msg="==------> ClientConnectionUpdated() span:784cf8459a76ba30:7950803049dd57fd:01d864ddb145395b:1"
time="2021-06-16T17:06:42Z" level=info msg=">><<------ new={\"ConnectionID\":\"1\",\"Request\":null,\"Xcon\":{\"id\":\"1\",\"payload\":\"IP\",\"source\":{\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"2\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsms4ytL0wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsms4ytL0wp/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}}},\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"Server\":{}}} span=784cf8459a76ba30:7950803049dd57fd:01d864ddb145395b:1"
time="2021-06-16T17:06:42Z" level=info msg=">><<------ old={\"ConnectionID\":\"1\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"Server\":{}}} span=784cf8459a76ba30:7950803049dd57fd:01d864ddb145395b:1"
time="2021-06-16T17:06:42Z" level=info msg="LocalConnection-New event: &{{UPDATE map[1:0xc0007c7800] 0xc000391ce0}}"
time="2021-06-16T17:06:42Z" level=info msg="==--------> LocalConnection-send-update() span:784cf8459a76ba30:79ff4b2626eaa079:7950803049dd57fd:1"
time="2021-06-16T17:06:42Z" level=info msg=">><<-------- eventType=\"UPDATE\" span=784cf8459a76ba30:79ff4b2626eaa079:7950803049dd57fd:1"
time="2021-06-16T17:06:42Z" level=info msg=">><<-------- msg={\"type\":1,\"connections\":{\"1\":{\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}}} span=784cf8459a76ba30:79ff4b2626eaa079:7950803049dd57fd:1"
2021/06/16 17:06:42 Reporting span 784cf8459a76ba30:52174da0d51c2442:455d0c063c3a5115:1
2021/06/16 17:06:42 Reporting span 784cf8459a76ba30:5b008c51ec747be8:00954a45fcbdb9a1:1
2021/06/16 17:06:42 Reporting span 784cf8459a76ba30:01d864ddb145395b:00954a45fcbdb9a1:1
2021/06/16 17:06:42 Reporting span 784cf8459a76ba30:00954a45fcbdb9a1:40e3c336255ee5b8:1
2021/06/16 17:06:42 Reporting span 784cf8459a76ba30:7950803049dd57fd:01d864ddb145395b:1
2021/06/16 17:06:42 Reporting span 784cf8459a76ba30:79ff4b2626eaa079:7950803049dd57fd:1
time="2021-06-16T17:06:42Z" level=info msg=">><<---------- response={\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=784cf8459a76ba30:455d0c063c3a5115:061801da590d3483:1"
2021/06/16 17:06:42 Reporting span 784cf8459a76ba30:455d0c063c3a5115:061801da590d3483:1
time="2021-06-16T17:06:42Z" level=info msg=">><<---------- client-connection={\"ConnectionID\":\"1\",\"Request\":{\"connection\":{\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}}]},\"Xcon\":{\"id\":\"1\",\"payload\":\"IP\",\"source\":{\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"2\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsms4ytL0wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsms4ytL0wp/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}}},\"RemoteNsm\":null,\"Endpoint\":{\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}},\"ForwarderRegisteredName\":\"vppagent\",\"ConnectionState\":0,\"ForwarderState\":1,\"Span\":{},\"Monitor\":{\"Server\":{}}} span=784cf8459a76ba30:061801da590d3483:68fc05b6a04237b5:1"
time="2021-06-16T17:06:42Z" level=info msg="resourceUpdated started: &{1 connection:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > mechanism_preferences:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > >  id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  <nil> network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  vppagent 0 1 0xc0007df480 0xc00045e980}"
time="2021-06-16T17:06:42Z" level=info msg="resourceUpdated finished: &{1 connection:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > mechanism_preferences:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > >  id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  <nil> network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  vppagent 0 1 0xc0007df480 0xc00045e980}"
time="2021-06-16T17:06:42Z" level=info msg=">><<-------- response={\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=784cf8459a76ba30:061801da590d3483:68fc05b6a04237b5:1"
2021/06/16 17:06:42 Reporting span 784cf8459a76ba30:061801da590d3483:68fc05b6a04237b5:1
time="2021-06-16T17:06:42Z" level=info msg="==----------> ClientConnectionUpdated() span:784cf8459a76ba30:4fbe478147cc0ad9:061801da590d3483:1"
time="2021-06-16T17:06:42Z" level=info msg=">><<---------- new={\"ConnectionID\":\"1\",\"Request\":{\"connection\":{\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}}]},\"Xcon\":{\"id\":\"1\",\"payload\":\"IP\",\"source\":{\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"2\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsms4ytL0wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsms4ytL0wp/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}}},\"RemoteNsm\":null,\"Endpoint\":{\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}},\"ForwarderRegisteredName\":\"vppagent\",\"ConnectionState\":0,\"ForwarderState\":1,\"Span\":{},\"Monitor\":{\"Server\":{}}} span=784cf8459a76ba30:4fbe478147cc0ad9:061801da590d3483:1"
time="2021-06-16T17:06:42Z" level=info msg=">><<------ response={\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=784cf8459a76ba30:68fc05b6a04237b5:7081dd2931e0db6d:1"
2021/06/16 17:06:42 Reporting span 784cf8459a76ba30:68fc05b6a04237b5:7081dd2931e0db6d:1
time="2021-06-16T17:06:42Z" level=info msg=">><<---------- old={\"ConnectionID\":\"1\",\"Request\":null,\"Xcon\":{\"id\":\"1\",\"payload\":\"IP\",\"source\":{\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\",\"workspace\":\"nsm-18\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"2\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsms4ytL0wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsms4ytL0wp/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}}},\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"Server\":{}}} span=784cf8459a76ba30:4fbe478147cc0ad9:061801da590d3483:1"
2021/06/16 17:06:42 Reporting span 784cf8459a76ba30:4fbe478147cc0ad9:061801da590d3483:1
time="2021-06-16T17:06:42Z" level=info msg=">><<---- response={\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=784cf8459a76ba30:7081dd2931e0db6d:6aa9743b6d8c2d82:1"
2021/06/16 17:06:42 Reporting span 784cf8459a76ba30:7081dd2931e0db6d:6aa9743b6d8c2d82:1
time="2021-06-16T17:06:42Z" level=info msg="LocalConnection-New event: &{{UPDATE map[1:0xc0007c7980] 0xc0004c6cf0}}"
time="2021-06-16T17:06:42Z" level=info msg="==------> LocalConnection-send-update() span:784cf8459a76ba30:658b6ff37f4d4039:7081dd2931e0db6d:1"
time="2021-06-16T17:06:42Z" level=info msg=">><<------ eventType=\"UPDATE\" span=784cf8459a76ba30:658b6ff37f4d4039:7081dd2931e0db6d:1"
time="2021-06-16T17:06:42Z" level=info msg=">><<------ msg={\"type\":1,\"connections\":{\"1\":{\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}}} span=784cf8459a76ba30:658b6ff37f4d4039:7081dd2931e0db6d:1"
2021/06/16 17:06:42 Reporting span 784cf8459a76ba30:658b6ff37f4d4039:7081dd2931e0db6d:1
time="2021-06-16T17:06:42Z" level=info msg=">><<-- response={\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=784cf8459a76ba30:6aa9743b6d8c2d82:40e3c336255ee5b8:1"
2021/06/16 17:06:42 Reporting span 784cf8459a76ba30:6aa9743b6d8c2d82:40e3c336255ee5b8:1
time="2021-06-16T17:06:42Z" level=info msg=">><<-- response={\"id\":\"1\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"VPP interface green6bjtj\",\"name\":\"green6bjtj\",\"netnsInode\":\"4026536032\",\"socketfile\":\"green6bjtj/memif.sock\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.1/30\",\"dst_ip_addr\":\"172.100.244.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.240.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=784cf8459a76ba30:40e3c336255ee5b8:2a4fa9bba3fe8f91:1"
2021/06/16 17:06:42 Reporting span 784cf8459a76ba30:40e3c336255ee5b8:2a4fa9bba3fe8f91:1
time="2021-06-16T17:06:43Z" level=info msg=">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\"\" span=165fac64feeb1067:5bc5f33d2112fa9e:13c9850c4cceaf67:1"
time="2021-06-16T17:06:43Z" level=info msg=">><<-- request={} span=165fac64feeb1067:5bc5f33d2112fa9e:13c9850c4cceaf67:1"
time="2021-06-16T17:06:43Z" level=info msg=">><<-- response={\"workspace\":[\"nsm-29\",\"nsm-18\"]} span=165fac64feeb1067:5bc5f33d2112fa9e:13c9850c4cceaf67:1"
2021/06/16 17:06:43 Reporting span 165fac64feeb1067:5bc5f33d2112fa9e:13c9850c4cceaf67:1
time="2021-06-16T17:06:47Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:06:47Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:06:55Z" level=info msg=">><<-- GRPC->/networkservice.NetworkService/Request()=\"\" span=747c50b742da5d81:69d92f5aa5614a9d:44b2cf92d22ea297:1"
time="2021-06-16T17:06:55Z" level=info msg=">><<-- request={\"connection\":{\"id\":\"-\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.3\"}}]} span=747c50b742da5d81:69d92f5aa5614a9d:44b2cf92d22ea297:1"
time="2021-06-16T17:06:55Z" level=info msg="==--> Remote.*requestValidator.Request() span:747c50b742da5d81:1f5d27ce9d99f856:69d92f5aa5614a9d:1"
time="2021-06-16T17:06:55Z" level=info msg=">><<-- request={\"connection\":{\"id\":\"-\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.3\"}}]} span=747c50b742da5d81:1f5d27ce9d99f856:69d92f5aa5614a9d:1"
time="2021-06-16T17:06:55Z" level=info msg="==----> Remote.*monitorService.Request() span:747c50b742da5d81:5ca3dfb1251cc0c9:1f5d27ce9d99f856:1"
time="2021-06-16T17:06:55Z" level=info msg=">><<---- request={\"connection\":{\"id\":\"-\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.3\"}}]} span=747c50b742da5d81:5ca3dfb1251cc0c9:1f5d27ce9d99f856:1"
time="2021-06-16T17:06:55Z" level=info msg="==------> Remote.*connectionService.Request() span:747c50b742da5d81:5e454fde6070a908:5ca3dfb1251cc0c9:1"
time="2021-06-16T17:06:55Z" level=info msg=">><<------ request={\"connection\":{\"id\":\"-\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.3\"}}]} span=747c50b742da5d81:5e454fde6070a908:5ca3dfb1251cc0c9:1"
time="2021-06-16T17:06:55Z" level=info msg="Received request from client to connect to NetworkService: connection:<id:\"-\" network_service:\"green\" context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > mechanism_preferences:<type:\"VXLAN\" parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"mtu_overhead\" value:\"50\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > > mechanism_preferences:<type:\"IPSEC\" parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > > " span="747c50b742da5d81:5e454fde6070a908:5ca3dfb1251cc0c9:1"
time="2021-06-16T17:06:55Z" level=info msg=">><<-------- connection-id=- span=747c50b742da5d81:5e454fde6070a908:5ca3dfb1251cc0c9:1"
time="2021-06-16T17:06:55Z" level=info msg="resourceAdded started: &{3 <nil> <nil> <nil> <nil>  1 0 0xc0006dedc0 0xc0000b4760}"
time="2021-06-16T17:06:55Z" level=info msg="resourceAdded finished: &{3 <nil> <nil> <nil> <nil>  1 0 0xc0006dedc0 0xc0000b4760}"
time="2021-06-16T17:06:55Z" level=info msg="==--------> Remote.*forwarderService.Request() span:747c50b742da5d81:0da698fb0bc37d19:5e454fde6070a908:1"
time="2021-06-16T17:06:55Z" level=info msg=">><<-------- request={\"connection\":{\"id\":\"3\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.3\"}}]} span=747c50b742da5d81:0da698fb0bc37d19:5e454fde6070a908:1"
time="2021-06-16T17:06:55Z" level=info msg="==--------> ClientConnectionAdded() span:747c50b742da5d81:3b4c5feac3028262:5e454fde6070a908:1"
time="2021-06-16T17:06:55Z" level=info msg="==----------> wait-forwarder() span:747c50b742da5d81:1ef4cd256e9fead5:0da698fb0bc37d19:1"
time="2021-06-16T17:06:55Z" level=info msg="Waiting for forwarder available..." operation=wait-forwarder span="747c50b742da5d81:1ef4cd256e9fead5:0da698fb0bc37d19:1"
time="2021-06-16T17:06:55Z" level=info msg=">><<-------- clientConnection={\"ConnectionID\":\"3\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=747c50b742da5d81:3b4c5feac3028262:5e454fde6070a908:1"
2021/06/16 17:06:55 Reporting span 747c50b742da5d81:3b4c5feac3028262:5e454fde6070a908:1
2021/06/16 17:06:55 Reporting span 747c50b742da5d81:1ef4cd256e9fead5:0da698fb0bc37d19:1
time="2021-06-16T17:06:55Z" level=info msg="NSM:(5.1) Remote mechanism selected type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > "
time="2021-06-16T17:06:55Z" level=info msg=">><<---------- dataplane={\"RegisteredName\":\"vppagent\",\"SocketLocation\":\"/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock\",\"LocalMechanisms\":[{\"type\":\"MEMIF\"},{\"type\":\"KERNEL_INTERFACE\"}],\"RemoteMechanisms\":[{\"type\":\"VXLAN\",\"parameters\":{\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.4\"}},{\"type\":\"IPSEC\",\"parameters\":{\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.4\"}}],\"MechanismsConfigured\":true} span=747c50b742da5d81:0da698fb0bc37d19:5e454fde6070a908:1"
time="2021-06-16T17:06:55Z" level=info msg="==----------> Remote.*endpointSelectorService.Request() span:747c50b742da5d81:745d159d9d41d956:0da698fb0bc37d19:1"
time="2021-06-16T17:06:55Z" level=info msg=">><<---------- request={\"connection\":{\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}}]} span=747c50b742da5d81:745d159d9d41d956:0da698fb0bc37d19:1"
time="2021-06-16T17:06:55Z" level=info msg=">><<------------ requestNSEOnUpdate=false span=747c50b742da5d81:745d159d9d41d956:0da698fb0bc37d19:1"
time="2021-06-16T17:06:55Z" level=info msg="selected endpoint &{network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock nsm-29}" operation="Remote.*endpointSelectorService.Request" span="747c50b742da5d81:745d159d9d41d956:0da698fb0bc37d19:1"
time="2021-06-16T17:06:55Z" level=info msg="==------------> Remote.*excludedPrefixesService.Request() span:747c50b742da5d81:665da6c7eaf21ec5:745d159d9d41d956:1"
time="2021-06-16T17:06:55Z" level=info msg=">><<------------ request={\"connection\":{\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}}]} span=747c50b742da5d81:665da6c7eaf21ec5:745d159d9d41d956:1"
time="2021-06-16T17:06:55Z" level=info msg="ExcludedPrefixesService: adding excluded prefixes to connection: []" operation="Remote.*excludedPrefixesService.Request" span="747c50b742da5d81:665da6c7eaf21ec5:745d159d9d41d956:1"
time="2021-06-16T17:06:55Z" level=info msg="==--------------> Remote.*endpointService.Request() span:747c50b742da5d81:75fadd7393d38ed2:665da6c7eaf21ec5:1"
time="2021-06-16T17:06:55Z" level=info msg=">><<-------------- request={\"connection\":{\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}}]} span=747c50b742da5d81:75fadd7393d38ed2:665da6c7eaf21ec5:1"
time="2021-06-16T17:06:55Z" level=info msg="==----------------> createNSEClient() span:747c50b742da5d81:19e52661bc1c7e03:75fadd7393d38ed2:1"
time="2021-06-16T17:06:55Z" level=info msg="Create local NSE connection to endpoint: &{network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock nsm-29}" operation=createNSEClient span="747c50b742da5d81:19e52661bc1c7e03:75fadd7393d38ed2:1"
time="2021-06-16T17:06:55Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock"
time="2021-06-16T17:06:55Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:06:55Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0006de3c0 {member1.com}:0xc0006de2c0 {member2.com}:0xc0006de1c0]}"
time="2021-06-16T17:06:55Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:06:55Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:55Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:06:55Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:06:55Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:55Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:06:55Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:06:55Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:55Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:06:55Z" level=info msg="Found 3 tlsconfigs. [0xc000972000 0xc000972600 0xc000972900]"
time="2021-06-16T17:06:55Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:56Z" level=info msg=">><<-- GRPC->/networkservice.NetworkService/Request()=\"\" span=183b98f44076bf76:474020545b3db02e:1f14bb028b60e462:1"
time="2021-06-16T17:06:56Z" level=info msg=">><<-- request={\"connection\":{\"id\":\"-\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.3\"}}]} span=183b98f44076bf76:474020545b3db02e:1f14bb028b60e462:1"
time="2021-06-16T17:06:56Z" level=info msg="==--> Remote.*requestValidator.Request() span:183b98f44076bf76:5db4919789af122b:474020545b3db02e:1"
time="2021-06-16T17:06:56Z" level=info msg=">><<-- request={\"connection\":{\"id\":\"-\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.3\"}}]} span=183b98f44076bf76:5db4919789af122b:474020545b3db02e:1"
time="2021-06-16T17:06:56Z" level=info msg="==----> Remote.*monitorService.Request() span:183b98f44076bf76:2ef79aee401d3527:5db4919789af122b:1"
time="2021-06-16T17:06:56Z" level=info msg=">><<---- request={\"connection\":{\"id\":\"-\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.3\"}}]} span=183b98f44076bf76:2ef79aee401d3527:5db4919789af122b:1"
time="2021-06-16T17:06:56Z" level=info msg="==------> Remote.*connectionService.Request() span:183b98f44076bf76:38b5e1de507c51c6:2ef79aee401d3527:1"
time="2021-06-16T17:06:56Z" level=info msg=">><<------ request={\"connection\":{\"id\":\"-\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.3\"}}]} span=183b98f44076bf76:38b5e1de507c51c6:2ef79aee401d3527:1"
time="2021-06-16T17:06:56Z" level=info msg="Received request from client to connect to NetworkService: connection:<id:\"-\" network_service:\"green\" context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > mechanism_preferences:<type:\"VXLAN\" parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"mtu_overhead\" value:\"50\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > > mechanism_preferences:<type:\"IPSEC\" parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > > " span="183b98f44076bf76:38b5e1de507c51c6:2ef79aee401d3527:1"
time="2021-06-16T17:06:56Z" level=info msg=">><<-------- connection-id=- span=183b98f44076bf76:38b5e1de507c51c6:2ef79aee401d3527:1"
time="2021-06-16T17:06:56Z" level=info msg="resourceAdded started: &{4 <nil> <nil> <nil> <nil>  1 0 0xc000543480 0xc0000b4760}"
time="2021-06-16T17:06:56Z" level=info msg="resourceAdded finished: &{4 <nil> <nil> <nil> <nil>  1 0 0xc000543480 0xc0000b4760}"
time="2021-06-16T17:06:56Z" level=info msg="==--------> Remote.*forwarderService.Request() span:183b98f44076bf76:6318a8f38e704989:38b5e1de507c51c6:1"
time="2021-06-16T17:06:56Z" level=info msg=">><<-------- request={\"connection\":{\"id\":\"4\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.3\"}}]} span=183b98f44076bf76:6318a8f38e704989:38b5e1de507c51c6:1"
time="2021-06-16T17:06:56Z" level=info msg="==----------> wait-forwarder() span:183b98f44076bf76:79519d8f77f0c599:6318a8f38e704989:1"
time="2021-06-16T17:06:56Z" level=info msg="Waiting for forwarder available..." operation=wait-forwarder span="183b98f44076bf76:79519d8f77f0c599:6318a8f38e704989:1"
2021/06/16 17:06:56 Reporting span 183b98f44076bf76:79519d8f77f0c599:6318a8f38e704989:1
time="2021-06-16T17:06:56Z" level=info msg="NSM:(5.1) Remote mechanism selected type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > "
time="2021-06-16T17:06:56Z" level=info msg=">><<---------- dataplane={\"RegisteredName\":\"vppagent\",\"SocketLocation\":\"/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock\",\"LocalMechanisms\":[{\"type\":\"MEMIF\"},{\"type\":\"KERNEL_INTERFACE\"}],\"RemoteMechanisms\":[{\"type\":\"VXLAN\",\"parameters\":{\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.4\"}},{\"type\":\"IPSEC\",\"parameters\":{\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.4\"}}],\"MechanismsConfigured\":true} span=183b98f44076bf76:6318a8f38e704989:38b5e1de507c51c6:1"
time="2021-06-16T17:06:56Z" level=info msg="==----------> Remote.*endpointSelectorService.Request() span:183b98f44076bf76:1df74d5a94f7b4fe:6318a8f38e704989:1"
time="2021-06-16T17:06:56Z" level=info msg=">><<---------- request={\"connection\":{\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}}]} span=183b98f44076bf76:1df74d5a94f7b4fe:6318a8f38e704989:1"
time="2021-06-16T17:06:56Z" level=info msg=">><<------------ requestNSEOnUpdate=false span=183b98f44076bf76:1df74d5a94f7b4fe:6318a8f38e704989:1"
time="2021-06-16T17:06:56Z" level=info msg="selected endpoint &{network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock nsm-29}" operation="Remote.*endpointSelectorService.Request" span="183b98f44076bf76:1df74d5a94f7b4fe:6318a8f38e704989:1"
time="2021-06-16T17:06:56Z" level=info msg="==--------> ClientConnectionAdded() span:183b98f44076bf76:3fd2455c66e0cf56:38b5e1de507c51c6:1"
time="2021-06-16T17:06:56Z" level=info msg=">><<-------- clientConnection={\"ConnectionID\":\"4\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=183b98f44076bf76:3fd2455c66e0cf56:38b5e1de507c51c6:1"
2021/06/16 17:06:56 Reporting span 183b98f44076bf76:3fd2455c66e0cf56:38b5e1de507c51c6:1
time="2021-06-16T17:06:56Z" level=info msg="==------------> Remote.*excludedPrefixesService.Request() span:183b98f44076bf76:679f364b3ab01eaa:1df74d5a94f7b4fe:1"
time="2021-06-16T17:06:56Z" level=info msg=">><<------------ request={\"connection\":{\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}}]} span=183b98f44076bf76:679f364b3ab01eaa:1df74d5a94f7b4fe:1"
time="2021-06-16T17:06:56Z" level=info msg="ExcludedPrefixesService: adding excluded prefixes to connection: []" operation="Remote.*excludedPrefixesService.Request" span="183b98f44076bf76:679f364b3ab01eaa:1df74d5a94f7b4fe:1"
time="2021-06-16T17:06:56Z" level=info msg="==--------------> Remote.*endpointService.Request() span:183b98f44076bf76:638fbde55f67379d:679f364b3ab01eaa:1"
time="2021-06-16T17:06:56Z" level=info msg=">><<-------------- request={\"connection\":{\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}}]} span=183b98f44076bf76:638fbde55f67379d:679f364b3ab01eaa:1"
time="2021-06-16T17:06:56Z" level=info msg="==----------------> createNSEClient() span:183b98f44076bf76:6200c0bfffa9abb3:638fbde55f67379d:1"
time="2021-06-16T17:06:56Z" level=info msg="Create local NSE connection to endpoint: &{network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock nsm-29}" operation=createNSEClient span="183b98f44076bf76:6200c0bfffa9abb3:638fbde55f67379d:1"
time="2021-06-16T17:06:56Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock"
time="2021-06-16T17:06:56Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:06:56Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0007df840 {member1.com}:0xc0007df980 {member2.com}:0xc0007df7c0]}"
time="2021-06-16T17:06:56Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:06:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:56Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:06:56Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:06:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:56Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:06:56Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:06:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:56Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:06:56Z" level=info msg="Found 3 tlsconfigs. [0xc000376c00 0xc000377080 0xc000377500]"
time="2021-06-16T17:06:56Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:57Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:07:00Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:07:00Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:01Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:07:01Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:02Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:07:02Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:07:05Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:07:05Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:05Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:07:05Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
2021/06/16 17:07:05 Reporting span 747c50b742da5d81:19e52661bc1c7e03:75fadd7393d38ed2:1
time="2021-06-16T17:07:05Z" level=info msg="NSM:(7.2.6.2) Requesting NSE with request connection:<id:\"5\" network_service:\"green\" context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > mechanism_preferences:<type:\"MEMIF\" > mechanism_preferences:<type:\"KERNEL_INTERFACE\" > " operation="Remote.*endpointService.Request" span="747c50b742da5d81:75fadd7393d38ed2:665da6c7eaf21ec5:1"
time="2021-06-16T17:07:05Z" level=info msg="==----------------> nse.request() span:747c50b742da5d81:4cb3aefc68f4e036:75fadd7393d38ed2:1"
time="2021-06-16T17:07:05Z" level=info msg=">><<---------------- nse.request={\"connection\":{\"id\":\"5\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"MEMIF\"},{\"type\":\"KERNEL_INTERFACE\"}]} span=747c50b742da5d81:4cb3aefc68f4e036:75fadd7393d38ed2:1"
time="2021-06-16T17:07:05Z" level=info msg=">><<------------------ /networkservice.NetworkService/Request()=\"\" span=747c50b742da5d81:4cb3aefc68f4e036:75fadd7393d38ed2:1"
time="2021-06-16T17:07:05Z" level=info msg=">><<------------------ request={\"connection\":{\"id\":\"5\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"MEMIF\"},{\"type\":\"KERNEL_INTERFACE\"}]} span=747c50b742da5d81:4cb3aefc68f4e036:75fadd7393d38ed2:1"
time="2021-06-16T17:07:05Z" level=info msg="NSM-EndpointMonitor(green6bjtj): Received event: &{{UPDATE map[5:0xc0002ed200] 0xc0000a8000}}"
time="2021-06-16T17:07:05Z" level=info msg="checking existing connection: id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  to match 5"
time="2021-06-16T17:07:05Z" level=info msg="checking existing connection: id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  to match 5"
time="2021-06-16T17:07:05Z" level=info msg="NSM-EndpointMonitor(green6bjtj): Handler is nil, event: %v not handled: &{{UPDATE map[5:0xc0002ed200] 0xc0000a8000}}"
2021/06/16 17:07:05 Reporting span 747c50b742da5d81:2a8c469e92d72c26:4cb3aefc68f4e036:1
time="2021-06-16T17:07:05Z" level=info msg=">><<------------------ response={\"id\":\"5\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmP0dPKA8Wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmP0dPKA8Wp/memif.sock\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=747c50b742da5d81:4cb3aefc68f4e036:75fadd7393d38ed2:1"
time="2021-06-16T17:07:05Z" level=info msg=">><<---------------- nse.response={\"id\":\"5\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmP0dPKA8Wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmP0dPKA8Wp/memif.sock\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=747c50b742da5d81:4cb3aefc68f4e036:75fadd7393d38ed2:1"
time="2021-06-16T17:07:05Z" level=info msg="NSM:(7.2.6.2.4) Update Local NSE connection parameters: cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmP0dPKA8Wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmP0dPKA8Wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > "
time="2021-06-16T17:07:05Z" level=info msg="==------------------> Remote.*rossConnectService.Request() span:747c50b742da5d81:20f482ff565c94c0:4cb3aefc68f4e036:1"
time="2021-06-16T17:07:05Z" level=info msg=">><<------------------ request={\"connection\":{\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}}]} span=747c50b742da5d81:20f482ff565c94c0:4cb3aefc68f4e036:1"
time="2021-06-16T17:07:05Z" level=info msg=">><<------------------ response={\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=747c50b742da5d81:20f482ff565c94c0:4cb3aefc68f4e036:1"
2021/06/16 17:07:05 Reporting span 747c50b742da5d81:20f482ff565c94c0:4cb3aefc68f4e036:1
2021/06/16 17:07:05 Reporting span 747c50b742da5d81:4cb3aefc68f4e036:75fadd7393d38ed2:1
time="2021-06-16T17:07:05Z" level=info msg=">><<-------------- response={\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=747c50b742da5d81:75fadd7393d38ed2:665da6c7eaf21ec5:1"
2021/06/16 17:07:05 Reporting span 747c50b742da5d81:75fadd7393d38ed2:665da6c7eaf21ec5:1
time="2021-06-16T17:07:05Z" level=info msg=">><<------------ response={\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=747c50b742da5d81:665da6c7eaf21ec5:745d159d9d41d956:1"
2021/06/16 17:07:05 Reporting span 747c50b742da5d81:665da6c7eaf21ec5:745d159d9d41d956:1
time="2021-06-16T17:07:05Z" level=info msg=">><<---------- response={\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=747c50b742da5d81:745d159d9d41d956:0da698fb0bc37d19:1"
2021/06/16 17:07:05 Reporting span 747c50b742da5d81:745d159d9d41d956:0da698fb0bc37d19:1
time="2021-06-16T17:07:05Z" level=info msg="==----------> programForwarder() span:747c50b742da5d81:60b2c5fec01ddb07:0da698fb0bc37d19:1"
time="2021-06-16T17:07:05Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm-vppagent.forwarder.sock"
time="2021-06-16T17:07:05Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:07:05Z" level=info msg="NSM-EndpointMonitor(green6bjtj): Received event: &{{UPDATE map[5:0xc000a8b580] 0xc0000a8000}}"
time="2021-06-16T17:07:05Z" level=info msg="checking existing connection: id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  to match 5"
time="2021-06-16T17:07:05Z" level=info msg="checking existing connection: id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  to match 5"
time="2021-06-16T17:07:05Z" level=info msg="NSM-EndpointMonitor(green6bjtj): Handler is nil, event: %v not handled: &{{UPDATE map[5:0xc000a8b580] 0xc0000a8000}}"
time="2021-06-16T17:07:05Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000c5a340 {member1.com}:0xc000c5a3c0 {member2.com}:0xc000c5a2c0]}"
time="2021-06-16T17:07:05Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:07:05Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:05Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:07:05Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:07:05Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:05Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:07:05Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:07:05Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:05Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:07:05Z" level=info msg="Found 3 tlsconfigs. [0xc000c3cf00 0xc000c3d080 0xc000c3d200]"
time="2021-06-16T17:07:05Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:06Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:07:06Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:06Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:07:06Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
2021/06/16 17:07:06 Reporting span 183b98f44076bf76:6200c0bfffa9abb3:638fbde55f67379d:1
time="2021-06-16T17:07:06Z" level=info msg="NSM:(7.2.6.2) Requesting NSE with request connection:<id:\"6\" network_service:\"green\" context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > mechanism_preferences:<type:\"MEMIF\" > mechanism_preferences:<type:\"KERNEL_INTERFACE\" > " operation="Remote.*endpointService.Request" span="183b98f44076bf76:638fbde55f67379d:679f364b3ab01eaa:1"
time="2021-06-16T17:07:06Z" level=info msg="==----------------> nse.request() span:183b98f44076bf76:398c9ab04ad05aad:638fbde55f67379d:1"
time="2021-06-16T17:07:06Z" level=info msg=">><<---------------- nse.request={\"connection\":{\"id\":\"6\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"MEMIF\"},{\"type\":\"KERNEL_INTERFACE\"}]} span=183b98f44076bf76:398c9ab04ad05aad:638fbde55f67379d:1"
time="2021-06-16T17:07:06Z" level=info msg=">><<------------------ /networkservice.NetworkService/Request()=\"\" span=183b98f44076bf76:398c9ab04ad05aad:638fbde55f67379d:1"
time="2021-06-16T17:07:06Z" level=info msg=">><<------------------ request={\"connection\":{\"id\":\"6\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"MEMIF\"},{\"type\":\"KERNEL_INTERFACE\"}]} span=183b98f44076bf76:398c9ab04ad05aad:638fbde55f67379d:1"
time="2021-06-16T17:07:06Z" level=info msg="NSM-EndpointMonitor(green6bjtj): Received event: &{{UPDATE map[6:0xc000938080] 0xc0000a8000}}"
2021/06/16 17:07:06 Reporting span 183b98f44076bf76:62a1bcb7af4b0f59:398c9ab04ad05aad:1
time="2021-06-16T17:07:06Z" level=info msg=">><<------------------ response={\"id\":\"6\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmXrW4K0WX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmXrW4K0WX/memif.sock\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=183b98f44076bf76:398c9ab04ad05aad:638fbde55f67379d:1"
time="2021-06-16T17:07:06Z" level=info msg=">><<---------------- nse.response={\"id\":\"6\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmXrW4K0WX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmXrW4K0WX/memif.sock\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=183b98f44076bf76:398c9ab04ad05aad:638fbde55f67379d:1"
time="2021-06-16T17:07:06Z" level=info msg="NSM:(7.2.6.2.4) Update Local NSE connection parameters: cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmXrW4K0WX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmXrW4K0WX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > "
time="2021-06-16T17:07:06Z" level=info msg="checking existing connection: id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  to match 6"
time="2021-06-16T17:07:06Z" level=info msg="==------------------> Remote.*rossConnectService.Request() span:183b98f44076bf76:2b259ea36c91da65:398c9ab04ad05aad:1"
time="2021-06-16T17:07:06Z" level=info msg=">><<------------------ request={\"connection\":{\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}}]} span=183b98f44076bf76:2b259ea36c91da65:398c9ab04ad05aad:1"
time="2021-06-16T17:07:06Z" level=info msg="checking existing connection: id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  to match 6"
time="2021-06-16T17:07:06Z" level=info msg="NSM-EndpointMonitor(green6bjtj): Handler is nil, event: %v not handled: &{{UPDATE map[6:0xc000938080] 0xc0000a8000}}"
time="2021-06-16T17:07:06Z" level=info msg="NSM-EndpointMonitor(green6bjtj): Received event: &{{UPDATE map[6:0xc000be1200] 0xc0000a8000}}"
time="2021-06-16T17:07:06Z" level=info msg=">><<------------------ response={\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=183b98f44076bf76:2b259ea36c91da65:398c9ab04ad05aad:1"
2021/06/16 17:07:06 Reporting span 183b98f44076bf76:2b259ea36c91da65:398c9ab04ad05aad:1
2021/06/16 17:07:06 Reporting span 183b98f44076bf76:398c9ab04ad05aad:638fbde55f67379d:1
time="2021-06-16T17:07:06Z" level=info msg=">><<-------------- response={\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=183b98f44076bf76:638fbde55f67379d:679f364b3ab01eaa:1"
2021/06/16 17:07:06 Reporting span 183b98f44076bf76:638fbde55f67379d:679f364b3ab01eaa:1
time="2021-06-16T17:07:06Z" level=info msg=">><<------------ response={\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=183b98f44076bf76:679f364b3ab01eaa:1df74d5a94f7b4fe:1"
2021/06/16 17:07:06 Reporting span 183b98f44076bf76:679f364b3ab01eaa:1df74d5a94f7b4fe:1
time="2021-06-16T17:07:06Z" level=info msg=">><<---------- response={\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=183b98f44076bf76:1df74d5a94f7b4fe:6318a8f38e704989:1"
2021/06/16 17:07:06 Reporting span 183b98f44076bf76:1df74d5a94f7b4fe:6318a8f38e704989:1
time="2021-06-16T17:07:06Z" level=info msg="==----------> programForwarder() span:183b98f44076bf76:511817501885bb39:6318a8f38e704989:1"
time="2021-06-16T17:07:06Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm-vppagent.forwarder.sock"
time="2021-06-16T17:07:06Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:07:06Z" level=info msg="checking existing connection: id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  to match 6"
time="2021-06-16T17:07:06Z" level=info msg="checking existing connection: id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  to match 6"
time="2021-06-16T17:07:06Z" level=info msg="NSM-EndpointMonitor(green6bjtj): Handler is nil, event: %v not handled: &{{UPDATE map[6:0xc000be1200] 0xc0000a8000}}"
time="2021-06-16T17:07:06Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000abe340 {member1.com}:0xc000abe2c0 {member2.com}:0xc000abe240]}"
time="2021-06-16T17:07:06Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:07:06Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:06Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:07:06Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:07:06Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:06Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:07:06Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:07:06Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:06Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:07:06Z" level=info msg="Found 3 tlsconfigs. [0xc000ac8000 0xc000ac8180 0xc000ac8300]"
time="2021-06-16T17:07:06Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:10Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:07:10Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:11Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:07:11Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:12Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:07:15Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:07:15Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:15Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:07:15Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:07:15Z" level=info msg="==------------> ProgramAttempt-0() span:747c50b742da5d81:37c4f87eaa52c767:60b2c5fec01ddb07:1"
time="2021-06-16T17:07:15Z" level=info msg=">><<------------ attempt=0 span=747c50b742da5d81:37c4f87eaa52c767:60b2c5fec01ddb07:1"
time="2021-06-16T17:07:15Z" level=info msg="NSM:(9.1) Sending request to forwarder" operation=programForwarder span="747c50b742da5d81:60b2c5fec01ddb07:0da698fb0bc37d19:1"
time="2021-06-16T17:07:15Z" level=info msg=">><<------------ request={\"id\":\"3\",\"payload\":\"IP\",\"source\":{\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"5\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmP0dPKA8Wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmP0dPKA8Wp/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}} span=747c50b742da5d81:37c4f87eaa52c767:60b2c5fec01ddb07:1"
time="2021-06-16T17:07:15Z" level=info msg=">><<-------------- /forwarder.Forwarder/Request()=\"\" span=747c50b742da5d81:37c4f87eaa52c767:60b2c5fec01ddb07:1"
time="2021-06-16T17:07:15Z" level=info msg=">><<-------------- request={\"id\":\"3\",\"payload\":\"IP\",\"source\":{\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"5\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmP0dPKA8Wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmP0dPKA8Wp/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}} span=747c50b742da5d81:37c4f87eaa52c767:60b2c5fec01ddb07:1"
2021/06/16 17:07:15 Reporting span 747c50b742da5d81:142ddbcd50fd4fc0:37c4f87eaa52c767:1
time="2021-06-16T17:07:15Z" level=info msg=">><<-------------- response={\"id\":\"3\",\"payload\":\"IP\",\"source\":{\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"5\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmP0dPKA8Wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmP0dPKA8Wp/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}} span=747c50b742da5d81:37c4f87eaa52c767:60b2c5fec01ddb07:1"
time="2021-06-16T17:07:15Z" level=info msg="NSM:(9.2) Forwarder configuration successful" operation=ProgramAttempt-0 span="747c50b742da5d81:37c4f87eaa52c767:60b2c5fec01ddb07:1"
time="2021-06-16T17:07:15Z" level=info msg=">><<------------ crossConnection={\"id\":\"3\",\"payload\":\"IP\",\"source\":{\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"5\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmP0dPKA8Wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmP0dPKA8Wp/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}} span=747c50b742da5d81:37c4f87eaa52c767:60b2c5fec01ddb07:1"
2021/06/16 17:07:15 Reporting span 747c50b742da5d81:37c4f87eaa52c767:60b2c5fec01ddb07:1
2021/06/16 17:07:15 Reporting span 747c50b742da5d81:60b2c5fec01ddb07:0da698fb0bc37d19:1
time="2021-06-16T17:07:15Z" level=info msg=">><<-------- response={\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=747c50b742da5d81:0da698fb0bc37d19:5e454fde6070a908:1"
2021/06/16 17:07:15 Reporting span 747c50b742da5d81:0da698fb0bc37d19:5e454fde6070a908:1
time="2021-06-16T17:07:15Z" level=info msg="NSM-ForwarderMonitor(vppagent): Received event: &{{UPDATE map[3:0xc0006cedc0] 0xc0000a8000} map[] <nil>}"
time="2021-06-16T17:07:15Z" level=info msg="==--> CrossConnectUpdate() span:747c50b742da5d81:61b6c420616d5ff8:69d92f5aa5614a9d:1"
time="2021-06-16T17:07:15Z" level=info msg=">><<-- clientConnection={\"ConnectionID\":\"3\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=747c50b742da5d81:61b6c420616d5ff8:69d92f5aa5614a9d:1"
time="2021-06-16T17:07:15Z" level=info msg=">><<-------- client-connection={\"ConnectionID\":\"3\",\"Request\":{\"connection\":{\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}}]},\"Xcon\":{\"id\":\"3\",\"payload\":\"IP\",\"source\":{\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"5\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmP0dPKA8Wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmP0dPKA8Wp/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}},\"RemoteNsm\":null,\"Endpoint\":{\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}},\"ForwarderRegisteredName\":\"vppagent\",\"ConnectionState\":0,\"ForwarderState\":1,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=747c50b742da5d81:5e454fde6070a908:5ca3dfb1251cc0c9:1"
time="2021-06-16T17:07:15Z" level=info msg=">><<-- event=id:\"3\" payload:\"IP\" source:<id:\"3\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"5\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmP0dPKA8Wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmP0dPKA8Wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  span=747c50b742da5d81:61b6c420616d5ff8:69d92f5aa5614a9d:1"
time="2021-06-16T17:07:15Z" level=info msg=">><<-- eventType=\"UPDATE\" span=747c50b742da5d81:61b6c420616d5ff8:69d92f5aa5614a9d:1"
time="2021-06-16T17:07:15Z" level=info msg="resourceUpdated started: &{3 connection:<id:\"3\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > > context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > mechanism_preferences:<type:\"VXLAN\" parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"mtu_overhead\" value:\"50\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > > mechanism_preferences:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > >  id:\"3\" payload:\"IP\" source:<id:\"3\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"5\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmP0dPKA8Wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmP0dPKA8Wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  <nil> network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  vppagent 0 1 0xc0006dedc0 0xc0000b4760}"
time="2021-06-16T17:07:15Z" level=info msg="Send cross connect event: id:\"3\" payload:\"IP\" source:<id:\"3\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"5\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmP0dPKA8Wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmP0dPKA8Wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > " operation=CrossConnectUpdate span="747c50b742da5d81:61b6c420616d5ff8:69d92f5aa5614a9d:1"
time="2021-06-16T17:07:15Z" level=info msg="==----> UpdateXcon() span:747c50b742da5d81:597b77588173e9de:61b6c420616d5ff8:1"
time="2021-06-16T17:07:15Z" level=info msg=">><<---- connection={\"ConnectionID\":\"3\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=747c50b742da5d81:597b77588173e9de:61b6c420616d5ff8:1"
time="2021-06-16T17:07:15Z" level=info msg=">><<---- newXCon={\"id\":\"3\",\"payload\":\"IP\",\"source\":{\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"5\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmP0dPKA8Wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmP0dPKA8Wp/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}} span=747c50b742da5d81:597b77588173e9de:61b6c420616d5ff8:1"
time="2021-06-16T17:07:15Z" level=info msg="CrossConnect-New event: &{{UPDATE map[3:0xc0006cedc0] 0xc00078bda0} map[] 0xc00078bda0}"
time="2021-06-16T17:07:15Z" level=info msg="resourceUpdated finished: &{3 connection:<id:\"3\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > > context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > mechanism_preferences:<type:\"VXLAN\" parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"mtu_overhead\" value:\"50\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > > mechanism_preferences:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > >  id:\"3\" payload:\"IP\" source:<id:\"3\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"5\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmP0dPKA8Wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmP0dPKA8Wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  <nil> network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  vppagent 0 1 0xc0006dedc0 0xc0000b4760}"
time="2021-06-16T17:07:15Z" level=info msg="==----> CrossConnect-send-update() span:747c50b742da5d81:05c6bc72f1f81140:61b6c420616d5ff8:1"
time="2021-06-16T17:07:15Z" level=info msg=">><<---- eventType=\"UPDATE\" span=747c50b742da5d81:05c6bc72f1f81140:61b6c420616d5ff8:1"
time="2021-06-16T17:07:15Z" level=info msg=">><<---- msg={\"type\":1,\"cross_connects\":{\"3\":{\"id\":\"3\",\"payload\":\"IP\",\"source\":{\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"5\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmP0dPKA8Wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmP0dPKA8Wp/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}}}} span=747c50b742da5d81:05c6bc72f1f81140:61b6c420616d5ff8:1"
2021/06/16 17:07:15 Reporting span 747c50b742da5d81:05c6bc72f1f81140:61b6c420616d5ff8:1
time="2021-06-16T17:07:15Z" level=info msg=">><<------ response={\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=747c50b742da5d81:5e454fde6070a908:5ca3dfb1251cc0c9:1"
2021/06/16 17:07:15 Reporting span 747c50b742da5d81:5e454fde6070a908:5ca3dfb1251cc0c9:1
time="2021-06-16T17:07:15Z" level=info msg=">><<---- response={\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=747c50b742da5d81:5ca3dfb1251cc0c9:1f5d27ce9d99f856:1"
2021/06/16 17:07:15 Reporting span 747c50b742da5d81:5ca3dfb1251cc0c9:1f5d27ce9d99f856:1
time="2021-06-16T17:07:15Z" level=info msg=">><<-- response={\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=747c50b742da5d81:1f5d27ce9d99f856:69d92f5aa5614a9d:1"
2021/06/16 17:07:15 Reporting span 747c50b742da5d81:1f5d27ce9d99f856:69d92f5aa5614a9d:1
time="2021-06-16T17:07:15Z" level=info msg="resourceUpdated started: &{3 connection:<id:\"3\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > > context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > mechanism_preferences:<type:\"VXLAN\" parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"mtu_overhead\" value:\"50\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > > mechanism_preferences:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > >  id:\"3\" payload:\"IP\" source:<id:\"3\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"5\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmP0dPKA8Wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmP0dPKA8Wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  <nil> network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  vppagent 0 1 0xc0006dedc0 0xc0000b4760}"
time="2021-06-16T17:07:15Z" level=info msg="resourceUpdated finished: &{3 connection:<id:\"3\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > > context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > mechanism_preferences:<type:\"VXLAN\" parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"mtu_overhead\" value:\"50\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > > mechanism_preferences:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > >  id:\"3\" payload:\"IP\" source:<id:\"3\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"5\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmP0dPKA8Wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmP0dPKA8Wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  <nil> network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  vppagent 0 1 0xc0006dedc0 0xc0000b4760}"
time="2021-06-16T17:07:15Z" level=info msg="RemoteConnection-New event: &{{UPDATE map[3:0xc000537400] 0xc000ac2d80}}"
time="2021-06-16T17:07:15Z" level=info msg="==------> RemoteConnection-send-update() span:747c50b742da5d81:4c0f9a1aebb42e3e:5ca3dfb1251cc0c9:1"
time="2021-06-16T17:07:15Z" level=info msg=">><<------ eventType=\"UPDATE\" span=747c50b742da5d81:4c0f9a1aebb42e3e:5ca3dfb1251cc0c9:1"
2021/06/16 17:07:15 Reporting span 747c50b742da5d81:597b77588173e9de:61b6c420616d5ff8:1
2021/06/16 17:07:15 Reporting span 747c50b742da5d81:61b6c420616d5ff8:69d92f5aa5614a9d:1
time="2021-06-16T17:07:15Z" level=info msg=">><<------ msg={\"type\":1,\"connections\":{\"3\":{\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}}} span=747c50b742da5d81:4c0f9a1aebb42e3e:5ca3dfb1251cc0c9:1"
2021/06/16 17:07:15 Reporting span 747c50b742da5d81:4c0f9a1aebb42e3e:5ca3dfb1251cc0c9:1
time="2021-06-16T17:07:15Z" level=info msg="==--------> ClientConnectionUpdated() span:747c50b742da5d81:5a1d48253aa58c83:5e454fde6070a908:1"
time="2021-06-16T17:07:15Z" level=info msg=">><<-- response={\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=747c50b742da5d81:69d92f5aa5614a9d:44b2cf92d22ea297:1"
2021/06/16 17:07:15 Reporting span 747c50b742da5d81:69d92f5aa5614a9d:44b2cf92d22ea297:1
time="2021-06-16T17:07:15Z" level=info msg=">><<-------- new={\"ConnectionID\":\"3\",\"Request\":{\"connection\":{\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}}]},\"Xcon\":{\"id\":\"3\",\"payload\":\"IP\",\"source\":{\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"5\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmP0dPKA8Wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmP0dPKA8Wp/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}},\"RemoteNsm\":null,\"Endpoint\":{\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}},\"ForwarderRegisteredName\":\"vppagent\",\"ConnectionState\":0,\"ForwarderState\":1,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=747c50b742da5d81:5a1d48253aa58c83:5e454fde6070a908:1"
time="2021-06-16T17:07:15Z" level=info msg=">><<-------- old={\"ConnectionID\":\"3\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=747c50b742da5d81:5a1d48253aa58c83:5e454fde6070a908:1"
2021/06/16 17:07:15 Reporting span 747c50b742da5d81:5a1d48253aa58c83:5e454fde6070a908:1
time="2021-06-16T17:07:15Z" level=info msg="==------> ClientConnectionUpdated() span:747c50b742da5d81:4f44bd026038e899:597b77588173e9de:1"
time="2021-06-16T17:07:15Z" level=info msg="RemoteConnection-New event: &{{UPDATE map[3:0xc000be1a80] 0xc000567560}}"
time="2021-06-16T17:07:15Z" level=info msg="==----------> RemoteConnection-send-update() span:747c50b742da5d81:357f3b7a88ad2461:5a1d48253aa58c83:1"
time="2021-06-16T17:07:15Z" level=info msg=">><<---------- eventType=\"UPDATE\" span=747c50b742da5d81:357f3b7a88ad2461:5a1d48253aa58c83:1"
time="2021-06-16T17:07:15Z" level=info msg=">><<---------- msg={\"type\":1,\"connections\":{\"3\":{\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}}} span=747c50b742da5d81:357f3b7a88ad2461:5a1d48253aa58c83:1"
2021/06/16 17:07:15 Reporting span 747c50b742da5d81:357f3b7a88ad2461:5a1d48253aa58c83:1
time="2021-06-16T17:07:15Z" level=info msg=">><<------ new={\"ConnectionID\":\"3\",\"Request\":{\"connection\":{\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}}]},\"Xcon\":{\"id\":\"3\",\"payload\":\"IP\",\"source\":{\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"5\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmP0dPKA8Wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmP0dPKA8Wp/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}},\"RemoteNsm\":null,\"Endpoint\":{\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}},\"ForwarderRegisteredName\":\"vppagent\",\"ConnectionState\":0,\"ForwarderState\":1,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=747c50b742da5d81:4f44bd026038e899:597b77588173e9de:1"
time="2021-06-16T17:07:15Z" level=info msg=">><<------ old={\"ConnectionID\":\"3\",\"Request\":{\"connection\":{\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}}]},\"Xcon\":{\"id\":\"3\",\"payload\":\"IP\",\"source\":{\"id\":\"3\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"1869566bfa05f3b46c2ac0713631f33d\",\"localEspSpi\":\"d13aa75cdee15262\",\"localIntegKey\":\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\",\"localSAInIdx\":\"814159574\",\"localSAOutIdx\":\"883681338\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"ccd5abfce91f9659529a0a6e88e4fa5c\",\"remoteEspSpi\":\"9268d24bb2c7970d\",\"remoteIntegKey\":\"66ab8ca86413431969158107a3066100fadf66a7\",\"src_ip\":\"172.17.0.3\",\"vni\":\"2\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"5\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmP0dPKA8Wp\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmP0dPKA8Wp/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.5/30\",\"dst_ip_addr\":\"172.100.244.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}},\"RemoteNsm\":null,\"Endpoint\":{\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}},\"ForwarderRegisteredName\":\"vppagent\",\"ConnectionState\":0,\"ForwarderState\":1,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=747c50b742da5d81:4f44bd026038e899:597b77588173e9de:1"
2021/06/16 17:07:15 Reporting span 747c50b742da5d81:4f44bd026038e899:597b77588173e9de:1
time="2021-06-16T17:07:16Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:07:16Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:16Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:07:16Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:07:16Z" level=info msg="==------------> ProgramAttempt-0() span:183b98f44076bf76:65aff65e14bc16d3:511817501885bb39:1"
time="2021-06-16T17:07:16Z" level=info msg=">><<------------ attempt=0 span=183b98f44076bf76:65aff65e14bc16d3:511817501885bb39:1"
time="2021-06-16T17:07:16Z" level=info msg="NSM:(9.1) Sending request to forwarder" operation=programForwarder span="183b98f44076bf76:511817501885bb39:6318a8f38e704989:1"
time="2021-06-16T17:07:16Z" level=info msg=">><<------------ request={\"id\":\"4\",\"payload\":\"IP\",\"source\":{\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"6\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmXrW4K0WX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmXrW4K0WX/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}} span=183b98f44076bf76:65aff65e14bc16d3:511817501885bb39:1"
time="2021-06-16T17:07:16Z" level=info msg=">><<-------------- /forwarder.Forwarder/Request()=\"\" span=183b98f44076bf76:65aff65e14bc16d3:511817501885bb39:1"
time="2021-06-16T17:07:16Z" level=info msg=">><<-------------- request={\"id\":\"4\",\"payload\":\"IP\",\"source\":{\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"6\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmXrW4K0WX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmXrW4K0WX/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}} span=183b98f44076bf76:65aff65e14bc16d3:511817501885bb39:1"
2021/06/16 17:07:16 Reporting span 183b98f44076bf76:6662027f94ef4633:65aff65e14bc16d3:1
time="2021-06-16T17:07:16Z" level=info msg=">><<-------------- response={\"id\":\"4\",\"payload\":\"IP\",\"source\":{\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"6\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmXrW4K0WX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmXrW4K0WX/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}} span=183b98f44076bf76:65aff65e14bc16d3:511817501885bb39:1"
time="2021-06-16T17:07:16Z" level=info msg="NSM:(9.2) Forwarder configuration successful" operation=ProgramAttempt-0 span="183b98f44076bf76:65aff65e14bc16d3:511817501885bb39:1"
time="2021-06-16T17:07:16Z" level=info msg=">><<------------ crossConnection={\"id\":\"4\",\"payload\":\"IP\",\"source\":{\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"6\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmXrW4K0WX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmXrW4K0WX/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}} span=183b98f44076bf76:65aff65e14bc16d3:511817501885bb39:1"
2021/06/16 17:07:16 Reporting span 183b98f44076bf76:65aff65e14bc16d3:511817501885bb39:1
2021/06/16 17:07:16 Reporting span 183b98f44076bf76:511817501885bb39:6318a8f38e704989:1
time="2021-06-16T17:07:16Z" level=info msg=">><<-------- response={\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=183b98f44076bf76:6318a8f38e704989:38b5e1de507c51c6:1"
2021/06/16 17:07:16 Reporting span 183b98f44076bf76:6318a8f38e704989:38b5e1de507c51c6:1
time="2021-06-16T17:07:16Z" level=info msg="NSM-ForwarderMonitor(vppagent): Received event: &{{UPDATE map[4:0xc000aef810] 0xc0000a8000} map[] <nil>}"
time="2021-06-16T17:07:16Z" level=info msg="==--> CrossConnectUpdate() span:183b98f44076bf76:497ccb2fb1cfc268:474020545b3db02e:1"
time="2021-06-16T17:07:16Z" level=info msg=">><<-- clientConnection={\"ConnectionID\":\"4\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=183b98f44076bf76:497ccb2fb1cfc268:474020545b3db02e:1"
time="2021-06-16T17:07:16Z" level=info msg=">><<-------- client-connection={\"ConnectionID\":\"4\",\"Request\":{\"connection\":{\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}}]},\"Xcon\":{\"id\":\"4\",\"payload\":\"IP\",\"source\":{\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"6\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmXrW4K0WX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmXrW4K0WX/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}},\"RemoteNsm\":null,\"Endpoint\":{\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}},\"ForwarderRegisteredName\":\"vppagent\",\"ConnectionState\":0,\"ForwarderState\":1,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=183b98f44076bf76:38b5e1de507c51c6:2ef79aee401d3527:1"
time="2021-06-16T17:07:16Z" level=info msg="resourceUpdated started: &{4 connection:<id:\"4\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > > context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > mechanism_preferences:<type:\"VXLAN\" parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"mtu_overhead\" value:\"50\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > > mechanism_preferences:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > >  id:\"4\" payload:\"IP\" source:<id:\"4\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"6\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmXrW4K0WX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmXrW4K0WX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  <nil> network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  vppagent 0 1 0xc000543480 0xc0000b4760}"
time="2021-06-16T17:07:16Z" level=info msg=">><<-- event=id:\"4\" payload:\"IP\" source:<id:\"4\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"6\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmXrW4K0WX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmXrW4K0WX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  span=183b98f44076bf76:497ccb2fb1cfc268:474020545b3db02e:1"
time="2021-06-16T17:07:16Z" level=info msg=">><<-- eventType=\"UPDATE\" span=183b98f44076bf76:497ccb2fb1cfc268:474020545b3db02e:1"
time="2021-06-16T17:07:16Z" level=info msg="==--------> ClientConnectionUpdated() span:183b98f44076bf76:6feb0bf47bdfa1b4:38b5e1de507c51c6:1"
time="2021-06-16T17:07:16Z" level=info msg="resourceUpdated finished: &{4 connection:<id:\"4\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > > context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > mechanism_preferences:<type:\"VXLAN\" parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"mtu_overhead\" value:\"50\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > > mechanism_preferences:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > >  id:\"4\" payload:\"IP\" source:<id:\"4\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"6\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmXrW4K0WX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmXrW4K0WX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  <nil> network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  vppagent 0 1 0xc000543480 0xc0000b4760}"
time="2021-06-16T17:07:16Z" level=info msg=">><<------ response={\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=183b98f44076bf76:38b5e1de507c51c6:2ef79aee401d3527:1"
2021/06/16 17:07:16 Reporting span 183b98f44076bf76:38b5e1de507c51c6:2ef79aee401d3527:1
time="2021-06-16T17:07:16Z" level=info msg=">><<---- response={\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=183b98f44076bf76:2ef79aee401d3527:5db4919789af122b:1"
2021/06/16 17:07:16 Reporting span 183b98f44076bf76:2ef79aee401d3527:5db4919789af122b:1
time="2021-06-16T17:07:16Z" level=info msg="Send cross connect event: id:\"4\" payload:\"IP\" source:<id:\"4\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"6\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmXrW4K0WX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmXrW4K0WX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > " operation=CrossConnectUpdate span="183b98f44076bf76:497ccb2fb1cfc268:474020545b3db02e:1"
time="2021-06-16T17:07:16Z" level=info msg=">><<-- response={\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=183b98f44076bf76:5db4919789af122b:474020545b3db02e:1"
2021/06/16 17:07:16 Reporting span 183b98f44076bf76:5db4919789af122b:474020545b3db02e:1
time="2021-06-16T17:07:16Z" level=info msg=">><<-- response={\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"} span=183b98f44076bf76:474020545b3db02e:1f14bb028b60e462:1"
2021/06/16 17:07:16 Reporting span 183b98f44076bf76:474020545b3db02e:1f14bb028b60e462:1
time="2021-06-16T17:07:16Z" level=info msg="RemoteConnection-New event: &{{UPDATE map[4:0xc000be0b00] 0xc000278bd0}}"
time="2021-06-16T17:07:16Z" level=info msg="==------> RemoteConnection-send-update() span:183b98f44076bf76:3f745c020e4f74c1:2ef79aee401d3527:1"
time="2021-06-16T17:07:16Z" level=info msg=">><<------ eventType=\"UPDATE\" span=183b98f44076bf76:3f745c020e4f74c1:2ef79aee401d3527:1"
time="2021-06-16T17:07:16Z" level=info msg=">><<------ msg={\"type\":1,\"connections\":{\"4\":{\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}}} span=183b98f44076bf76:3f745c020e4f74c1:2ef79aee401d3527:1"
2021/06/16 17:07:16 Reporting span 183b98f44076bf76:3f745c020e4f74c1:2ef79aee401d3527:1
time="2021-06-16T17:07:16Z" level=info msg=">><<-------- new={\"ConnectionID\":\"4\",\"Request\":{\"connection\":{\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}}]},\"Xcon\":{\"id\":\"4\",\"payload\":\"IP\",\"source\":{\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"6\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmXrW4K0WX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmXrW4K0WX/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}},\"RemoteNsm\":null,\"Endpoint\":{\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}},\"ForwarderRegisteredName\":\"vppagent\",\"ConnectionState\":0,\"ForwarderState\":1,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=183b98f44076bf76:6feb0bf47bdfa1b4:38b5e1de507c51c6:1"
time="2021-06-16T17:07:16Z" level=info msg=">><<-------- old={\"ConnectionID\":\"4\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=183b98f44076bf76:6feb0bf47bdfa1b4:38b5e1de507c51c6:1"
2021/06/16 17:07:16 Reporting span 183b98f44076bf76:6feb0bf47bdfa1b4:38b5e1de507c51c6:1
time="2021-06-16T17:07:16Z" level=info msg="CrossConnect-New event: &{{UPDATE map[4:0xc000aef810] 0xc00070ff20} map[] 0xc00070ff20}"
time="2021-06-16T17:07:16Z" level=info msg="==----> CrossConnect-send-update() span:183b98f44076bf76:14b152e7128467c8:497ccb2fb1cfc268:1"
time="2021-06-16T17:07:16Z" level=info msg=">><<---- eventType=\"UPDATE\" span=183b98f44076bf76:14b152e7128467c8:497ccb2fb1cfc268:1"
time="2021-06-16T17:07:16Z" level=info msg=">><<---- msg={\"type\":1,\"cross_connects\":{\"4\":{\"id\":\"4\",\"payload\":\"IP\",\"source\":{\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"6\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmXrW4K0WX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmXrW4K0WX/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}}}} span=183b98f44076bf76:14b152e7128467c8:497ccb2fb1cfc268:1"
2021/06/16 17:07:16 Reporting span 183b98f44076bf76:14b152e7128467c8:497ccb2fb1cfc268:1
time="2021-06-16T17:07:16Z" level=info msg="RemoteConnection-New event: &{{UPDATE map[4:0xc0002ed980] 0xc0006e1710}}"
time="2021-06-16T17:07:16Z" level=info msg="==----------> RemoteConnection-send-update() span:183b98f44076bf76:3d2a62840a56752a:6feb0bf47bdfa1b4:1"
time="2021-06-16T17:07:16Z" level=info msg=">><<---------- eventType=\"UPDATE\" span=183b98f44076bf76:3d2a62840a56752a:6feb0bf47bdfa1b4:1"
time="2021-06-16T17:07:16Z" level=info msg=">><<---------- msg={\"type\":1,\"connections\":{\"4\":{\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}}} span=183b98f44076bf76:3d2a62840a56752a:6feb0bf47bdfa1b4:1"
time="2021-06-16T17:07:16Z" level=info msg="==----> UpdateXcon() span:183b98f44076bf76:455423f4971b45b0:497ccb2fb1cfc268:1"
time="2021-06-16T17:07:16Z" level=info msg=">><<---- connection={\"ConnectionID\":\"4\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=183b98f44076bf76:455423f4971b45b0:497ccb2fb1cfc268:1"
2021/06/16 17:07:16 Reporting span 183b98f44076bf76:3d2a62840a56752a:6feb0bf47bdfa1b4:1
time="2021-06-16T17:07:16Z" level=info msg=">><<---- newXCon={\"id\":\"4\",\"payload\":\"IP\",\"source\":{\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"6\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmXrW4K0WX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmXrW4K0WX/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}} span=183b98f44076bf76:455423f4971b45b0:497ccb2fb1cfc268:1"
time="2021-06-16T17:07:16Z" level=info msg="resourceUpdated started: &{4 connection:<id:\"4\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > > context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > mechanism_preferences:<type:\"VXLAN\" parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"mtu_overhead\" value:\"50\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > > mechanism_preferences:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > >  id:\"4\" payload:\"IP\" source:<id:\"4\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"6\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmXrW4K0WX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmXrW4K0WX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  <nil> network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  vppagent 0 1 0xc000543480 0xc0000b4760}"
time="2021-06-16T17:07:16Z" level=info msg="resourceUpdated finished: &{4 connection:<id:\"4\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > > context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > mechanism_preferences:<type:\"VXLAN\" parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"mtu_overhead\" value:\"50\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > > mechanism_preferences:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > >  id:\"4\" payload:\"IP\" source:<id:\"4\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"6\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmXrW4K0WX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmXrW4K0WX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  <nil> network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  vppagent 0 1 0xc000543480 0xc0000b4760}"
2021/06/16 17:07:16 Reporting span 183b98f44076bf76:455423f4971b45b0:497ccb2fb1cfc268:1
2021/06/16 17:07:16 Reporting span 183b98f44076bf76:497ccb2fb1cfc268:474020545b3db02e:1
time="2021-06-16T17:07:16Z" level=info msg="==------> ClientConnectionUpdated() span:183b98f44076bf76:336be180b0be57ee:455423f4971b45b0:1"
time="2021-06-16T17:07:16Z" level=info msg=">><<------ new={\"ConnectionID\":\"4\",\"Request\":{\"connection\":{\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}}]},\"Xcon\":{\"id\":\"4\",\"payload\":\"IP\",\"source\":{\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"6\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmXrW4K0WX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmXrW4K0WX/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}},\"RemoteNsm\":null,\"Endpoint\":{\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}},\"ForwarderRegisteredName\":\"vppagent\",\"ConnectionState\":0,\"ForwarderState\":1,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=183b98f44076bf76:336be180b0be57ee:455423f4971b45b0:1"
time="2021-06-16T17:07:16Z" level=info msg=">><<------ old={\"ConnectionID\":\"4\",\"Request\":{\"connection\":{\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}}]},\"Xcon\":{\"id\":\"4\",\"payload\":\"IP\",\"source\":{\"id\":\"4\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"88d8d94d1f079aff45b2a5fe810bb29a\",\"localEspSpi\":\"04771d972ad8dd3b\",\"localIntegKey\":\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\",\"localSAInIdx\":\"2207338102\",\"localSAOutIdx\":\"1780161114\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"67c53e0612edc14042bd59ced83cceda\",\"remoteEspSpi\":\"792d2f55b84ba0d1\",\"remoteIntegKey\":\"c879deb316344cd510f6ea71536f0011f99d46e2\",\"src_ip\":\"172.17.0.3\",\"vni\":\"4\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"6\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmXrW4K0WX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmXrW4K0WX/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.9/30\",\"dst_ip_addr\":\"172.100.244.10/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.244.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6bjtj\"}},\"RemoteNsm\":null,\"Endpoint\":{\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}},\"ForwarderRegisteredName\":\"vppagent\",\"ConnectionState\":0,\"ForwarderState\":1,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=183b98f44076bf76:336be180b0be57ee:455423f4971b45b0:1"
2021/06/16 17:07:16 Reporting span 183b98f44076bf76:336be180b0be57ee:455423f4971b45b0:1
time="2021-06-16T17:07:17Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:07:21Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:07:23Z" level=info msg=">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\"\" span=6704b109db5bc0cb:48babf9474b3fb2a:21c398078fbd220c:1"
time="2021-06-16T17:07:23Z" level=info msg=">><<-- request={} span=6704b109db5bc0cb:48babf9474b3fb2a:21c398078fbd220c:1"
time="2021-06-16T17:07:23Z" level=info msg=">><<-- response={\"workspace\":[\"nsm-29\",\"nsm-18\"]} span=6704b109db5bc0cb:48babf9474b3fb2a:21c398078fbd220c:1"
2021/06/16 17:07:23 Reporting span 6704b109db5bc0cb:48babf9474b3fb2a:21c398078fbd220c:1
time="2021-06-16T17:07:31Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:07:32Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:07:36Z" level=info msg="RemoteConnectionMonitor using filter path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane\" > "
time="2021-06-16T17:07:36Z" level=info msg="MonitorServerImpl.AddRecipient: RemoteConnection-&{0xc000295d50 0xc000401d80}"
time="2021-06-16T17:07:36Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:07:46Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:07:47Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:07:51Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:07:56Z" level=info msg=">><<-- GRPC->/networkservice.NetworkService/Request()=\"\" span=3904c06c72d5e6a4:3aceaa2919d00489:438081bdc8e7576a:1"
time="2021-06-16T17:07:56Z" level=info msg=">><<-- request={\"connection\":{\"id\":\"-\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.3\"}}]} span=3904c06c72d5e6a4:3aceaa2919d00489:438081bdc8e7576a:1"
time="2021-06-16T17:07:56Z" level=info msg="==--> Remote.*requestValidator.Request() span:3904c06c72d5e6a4:4fcdbaf7051e6d9f:3aceaa2919d00489:1"
time="2021-06-16T17:07:56Z" level=info msg=">><<-- request={\"connection\":{\"id\":\"-\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.3\"}}]} span=3904c06c72d5e6a4:4fcdbaf7051e6d9f:3aceaa2919d00489:1"
time="2021-06-16T17:07:56Z" level=info msg="==----> Remote.*monitorService.Request() span:3904c06c72d5e6a4:183b1149c015ce5d:4fcdbaf7051e6d9f:1"
time="2021-06-16T17:07:56Z" level=info msg=">><<---- request={\"connection\":{\"id\":\"-\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.3\"}}]} span=3904c06c72d5e6a4:183b1149c015ce5d:4fcdbaf7051e6d9f:1"
time="2021-06-16T17:07:56Z" level=info msg="==------> Remote.*connectionService.Request() span:3904c06c72d5e6a4:29f6ae5dfe136918:183b1149c015ce5d:1"
time="2021-06-16T17:07:56Z" level=info msg=">><<------ request={\"connection\":{\"id\":\"-\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.3\"}}]} span=3904c06c72d5e6a4:29f6ae5dfe136918:183b1149c015ce5d:1"
time="2021-06-16T17:07:56Z" level=info msg="Received request from client to connect to NetworkService: connection:<id:\"-\" network_service:\"green\" context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > mechanism_preferences:<type:\"VXLAN\" parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"mtu_overhead\" value:\"50\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > > mechanism_preferences:<type:\"IPSEC\" parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"7df393ea83cf027b3a63fe1d96a37894\" > parameters:<key:\"localEspSpi\" value:\"9e42b6b9714c5531\" > parameters:<key:\"localIntegKey\" value:\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\" > parameters:<key:\"localSAInIdx\" value:\"363725565\" > parameters:<key:\"localSAOutIdx\" value:\"1698663593\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > > " span="3904c06c72d5e6a4:29f6ae5dfe136918:183b1149c015ce5d:1"
time="2021-06-16T17:07:56Z" level=info msg=">><<-------- connection-id=- span=3904c06c72d5e6a4:29f6ae5dfe136918:183b1149c015ce5d:1"
time="2021-06-16T17:07:56Z" level=info msg="resourceAdded started: &{7 <nil> <nil> <nil> <nil>  1 0 0xc0009f2f00 0xc0000b4760}"
time="2021-06-16T17:07:56Z" level=info msg="resourceAdded finished: &{7 <nil> <nil> <nil> <nil>  1 0 0xc0009f2f00 0xc0000b4760}"
time="2021-06-16T17:07:56Z" level=info msg="==--------> Remote.*forwarderService.Request() span:3904c06c72d5e6a4:4b9d895156c786a9:29f6ae5dfe136918:1"
time="2021-06-16T17:07:56Z" level=info msg=">><<-------- request={\"connection\":{\"id\":\"7\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.3\"}}]} span=3904c06c72d5e6a4:4b9d895156c786a9:29f6ae5dfe136918:1"
time="2021-06-16T17:07:56Z" level=info msg="==----------> wait-forwarder() span:3904c06c72d5e6a4:736a0479f3de7945:4b9d895156c786a9:1"
time="2021-06-16T17:07:56Z" level=info msg="Waiting for forwarder available..." operation=wait-forwarder span="3904c06c72d5e6a4:736a0479f3de7945:4b9d895156c786a9:1"
2021/06/16 17:07:56 Reporting span 3904c06c72d5e6a4:736a0479f3de7945:4b9d895156c786a9:1
time="2021-06-16T17:07:56Z" level=info msg="==--------> ClientConnectionAdded() span:3904c06c72d5e6a4:01767c5362b5710c:29f6ae5dfe136918:1"
time="2021-06-16T17:07:56Z" level=info msg=">><<-------- clientConnection={\"ConnectionID\":\"7\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=3904c06c72d5e6a4:01767c5362b5710c:29f6ae5dfe136918:1"
2021/06/16 17:07:56 Reporting span 3904c06c72d5e6a4:01767c5362b5710c:29f6ae5dfe136918:1
time="2021-06-16T17:07:56Z" level=info msg="NSM:(5.1) Remote mechanism selected type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"7df393ea83cf027b3a63fe1d96a37894\" > parameters:<key:\"localEspSpi\" value:\"9e42b6b9714c5531\" > parameters:<key:\"localIntegKey\" value:\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\" > parameters:<key:\"localSAInIdx\" value:\"363725565\" > parameters:<key:\"localSAOutIdx\" value:\"1698663593\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"aa037eae0475183d3e73a5b29f14d66b\" > parameters:<key:\"remoteEspSpi\" value:\"7cbba95e9053b3e2\" > parameters:<key:\"remoteIntegKey\" value:\"58db78d358602879cde12bf41e2b93e335563712\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"6\" > "
time="2021-06-16T17:07:56Z" level=info msg=">><<---------- dataplane={\"RegisteredName\":\"vppagent\",\"SocketLocation\":\"/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock\",\"LocalMechanisms\":[{\"type\":\"MEMIF\"},{\"type\":\"KERNEL_INTERFACE\"}],\"RemoteMechanisms\":[{\"type\":\"VXLAN\",\"parameters\":{\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.4\"}},{\"type\":\"IPSEC\",\"parameters\":{\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.4\"}}],\"MechanismsConfigured\":true} span=3904c06c72d5e6a4:4b9d895156c786a9:29f6ae5dfe136918:1"
time="2021-06-16T17:07:56Z" level=info msg="==----------> Remote.*endpointSelectorService.Request() span:3904c06c72d5e6a4:54337be6eb6f0352:4b9d895156c786a9:1"
time="2021-06-16T17:07:56Z" level=info msg=">><<---------- request={\"connection\":{\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}}]} span=3904c06c72d5e6a4:54337be6eb6f0352:4b9d895156c786a9:1"
time="2021-06-16T17:07:56Z" level=info msg=">><<------------ requestNSEOnUpdate=false span=3904c06c72d5e6a4:54337be6eb6f0352:4b9d895156c786a9:1"
time="2021-06-16T17:07:56Z" level=info msg="selected endpoint &{network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6gqkr\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  /var/lib/networkservicemesh/nsm-18/nsm.client.io.sock nsm-18}" operation="Remote.*endpointSelectorService.Request" span="3904c06c72d5e6a4:54337be6eb6f0352:4b9d895156c786a9:1"
time="2021-06-16T17:07:56Z" level=info msg="==------------> Remote.*excludedPrefixesService.Request() span:3904c06c72d5e6a4:22933888fb2e649e:54337be6eb6f0352:1"
time="2021-06-16T17:07:56Z" level=info msg=">><<------------ request={\"connection\":{\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}}]} span=3904c06c72d5e6a4:22933888fb2e649e:54337be6eb6f0352:1"
time="2021-06-16T17:07:56Z" level=info msg="ExcludedPrefixesService: adding excluded prefixes to connection: []" operation="Remote.*excludedPrefixesService.Request" span="3904c06c72d5e6a4:22933888fb2e649e:54337be6eb6f0352:1"
time="2021-06-16T17:07:56Z" level=info msg="==--------------> Remote.*endpointService.Request() span:3904c06c72d5e6a4:678d65677f5498d7:22933888fb2e649e:1"
time="2021-06-16T17:07:56Z" level=info msg=">><<-------------- request={\"connection\":{\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}}]} span=3904c06c72d5e6a4:678d65677f5498d7:22933888fb2e649e:1"
time="2021-06-16T17:07:56Z" level=info msg="==----------------> createNSEClient() span:3904c06c72d5e6a4:04277ee751e200a7:678d65677f5498d7:1"
time="2021-06-16T17:07:56Z" level=info msg="Create local NSE connection to endpoint: &{network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6gqkr\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  /var/lib/networkservicemesh/nsm-18/nsm.client.io.sock nsm-18}" operation=createNSEClient span="3904c06c72d5e6a4:04277ee751e200a7:678d65677f5498d7:1"
time="2021-06-16T17:07:56Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm-18/nsm.client.io.sock"
time="2021-06-16T17:07:56Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:07:56Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0006deec0 {member1.com}:0xc0006deb00 {member2.com}:0xc0006dea00]}"
time="2021-06-16T17:07:56Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:07:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:56Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:07:56Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:07:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:56Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:07:56Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:07:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:56Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:07:56Z" level=info msg="Found 3 tlsconfigs. [0xc000ac8f00 0xc000ac9080 0xc000ac9200]"
time="2021-06-16T17:07:56Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:57Z" level=info msg=">><<-- GRPC->/networkservice.NetworkService/Request()=\"\" span=1421cbfcdf7d2a39:515aab82a5bdba41:67254c65a2eb6722:1"
time="2021-06-16T17:07:57Z" level=info msg=">><<-- request={\"connection\":{\"id\":\"-\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.3\"}}]} span=1421cbfcdf7d2a39:515aab82a5bdba41:67254c65a2eb6722:1"
time="2021-06-16T17:07:57Z" level=info msg="==--> Remote.*requestValidator.Request() span:1421cbfcdf7d2a39:6c9eab9f60abd054:515aab82a5bdba41:1"
time="2021-06-16T17:07:57Z" level=info msg=">><<-- request={\"connection\":{\"id\":\"-\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.3\"}}]} span=1421cbfcdf7d2a39:6c9eab9f60abd054:515aab82a5bdba41:1"
time="2021-06-16T17:07:57Z" level=info msg="==----> Remote.*monitorService.Request() span:1421cbfcdf7d2a39:085d2b9fb93f38b2:6c9eab9f60abd054:1"
time="2021-06-16T17:07:57Z" level=info msg=">><<---- request={\"connection\":{\"id\":\"-\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.3\"}}]} span=1421cbfcdf7d2a39:085d2b9fb93f38b2:6c9eab9f60abd054:1"
time="2021-06-16T17:07:57Z" level=info msg="==------> Remote.*connectionService.Request() span:1421cbfcdf7d2a39:3c151d0402aed7cd:085d2b9fb93f38b2:1"
time="2021-06-16T17:07:57Z" level=info msg=">><<------ request={\"connection\":{\"id\":\"-\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.3\"}}]} span=1421cbfcdf7d2a39:3c151d0402aed7cd:085d2b9fb93f38b2:1"
time="2021-06-16T17:07:57Z" level=info msg="Received request from client to connect to NetworkService: connection:<id:\"-\" network_service:\"green\" context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > mechanism_preferences:<type:\"VXLAN\" parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"mtu_overhead\" value:\"50\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > > mechanism_preferences:<type:\"IPSEC\" parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"f7c07c2142a3fab39e49e3030d3557c8\" > parameters:<key:\"localEspSpi\" value:\"c4796f40a943b2a7\" > parameters:<key:\"localIntegKey\" value:\"d8d443bcce2ce9542319d43f84bda47f2517db90\" > parameters:<key:\"localSAInIdx\" value:\"1756800925\" > parameters:<key:\"localSAOutIdx\" value:\"962949249\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > > " span="1421cbfcdf7d2a39:3c151d0402aed7cd:085d2b9fb93f38b2:1"
time="2021-06-16T17:07:57Z" level=info msg=">><<-------- connection-id=- span=1421cbfcdf7d2a39:3c151d0402aed7cd:085d2b9fb93f38b2:1"
time="2021-06-16T17:07:57Z" level=info msg="resourceAdded started: &{8 <nil> <nil> <nil> <nil>  1 0 0xc0009f3c80 0xc0000b4760}"
time="2021-06-16T17:07:57Z" level=info msg="resourceAdded finished: &{8 <nil> <nil> <nil> <nil>  1 0 0xc0009f3c80 0xc0000b4760}"
time="2021-06-16T17:07:57Z" level=info msg="==--------> Remote.*forwarderService.Request() span:1421cbfcdf7d2a39:770119d39f32c922:3c151d0402aed7cd:1"
time="2021-06-16T17:07:57Z" level=info msg=">><<-------- request={\"connection\":{\"id\":\"8\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.3\"}}]} span=1421cbfcdf7d2a39:770119d39f32c922:3c151d0402aed7cd:1"
time="2021-06-16T17:07:57Z" level=info msg="==----------> wait-forwarder() span:1421cbfcdf7d2a39:3bbe56ca191d1c25:770119d39f32c922:1"
time="2021-06-16T17:07:57Z" level=info msg="Waiting for forwarder available..." operation=wait-forwarder span="1421cbfcdf7d2a39:3bbe56ca191d1c25:770119d39f32c922:1"
2021/06/16 17:07:57 Reporting span 1421cbfcdf7d2a39:3bbe56ca191d1c25:770119d39f32c922:1
time="2021-06-16T17:07:57Z" level=info msg="NSM:(5.1) Remote mechanism selected type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"f7c07c2142a3fab39e49e3030d3557c8\" > parameters:<key:\"localEspSpi\" value:\"c4796f40a943b2a7\" > parameters:<key:\"localIntegKey\" value:\"d8d443bcce2ce9542319d43f84bda47f2517db90\" > parameters:<key:\"localSAInIdx\" value:\"1756800925\" > parameters:<key:\"localSAOutIdx\" value:\"962949249\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"bed020a680bd5a2c37e8202536d0fc8d\" > parameters:<key:\"remoteEspSpi\" value:\"616bfacaf36d54c2\" > parameters:<key:\"remoteIntegKey\" value:\"704ba33abcfa181781244fb0f925fd257c512e57\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"8\" > "
time="2021-06-16T17:07:57Z" level=info msg=">><<---------- dataplane={\"RegisteredName\":\"vppagent\",\"SocketLocation\":\"/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock\",\"LocalMechanisms\":[{\"type\":\"MEMIF\"},{\"type\":\"KERNEL_INTERFACE\"}],\"RemoteMechanisms\":[{\"type\":\"VXLAN\",\"parameters\":{\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.4\"}},{\"type\":\"IPSEC\",\"parameters\":{\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.4\"}}],\"MechanismsConfigured\":true} span=1421cbfcdf7d2a39:770119d39f32c922:3c151d0402aed7cd:1"
time="2021-06-16T17:07:57Z" level=info msg="==----------> Remote.*endpointSelectorService.Request() span:1421cbfcdf7d2a39:1da17c4d1db09bb0:770119d39f32c922:1"
time="2021-06-16T17:07:57Z" level=info msg=">><<---------- request={\"connection\":{\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}}]} span=1421cbfcdf7d2a39:1da17c4d1db09bb0:770119d39f32c922:1"
time="2021-06-16T17:07:57Z" level=info msg=">><<------------ requestNSEOnUpdate=false span=1421cbfcdf7d2a39:1da17c4d1db09bb0:770119d39f32c922:1"
time="2021-06-16T17:07:57Z" level=info msg="selected endpoint &{network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6gqkr\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  /var/lib/networkservicemesh/nsm-18/nsm.client.io.sock nsm-18}" operation="Remote.*endpointSelectorService.Request" span="1421cbfcdf7d2a39:1da17c4d1db09bb0:770119d39f32c922:1"
time="2021-06-16T17:07:57Z" level=info msg="==------------> Remote.*excludedPrefixesService.Request() span:1421cbfcdf7d2a39:3783b807556986f8:1da17c4d1db09bb0:1"
time="2021-06-16T17:07:57Z" level=info msg="==--------> ClientConnectionAdded() span:1421cbfcdf7d2a39:7717ef60b4753f32:3c151d0402aed7cd:1"
time="2021-06-16T17:07:57Z" level=info msg=">><<-------- clientConnection={\"ConnectionID\":\"8\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=1421cbfcdf7d2a39:7717ef60b4753f32:3c151d0402aed7cd:1"
2021/06/16 17:07:57 Reporting span 1421cbfcdf7d2a39:7717ef60b4753f32:3c151d0402aed7cd:1
time="2021-06-16T17:07:57Z" level=info msg=">><<------------ request={\"connection\":{\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}}]} span=1421cbfcdf7d2a39:3783b807556986f8:1da17c4d1db09bb0:1"
time="2021-06-16T17:07:57Z" level=info msg="ExcludedPrefixesService: adding excluded prefixes to connection: []" operation="Remote.*excludedPrefixesService.Request" span="1421cbfcdf7d2a39:3783b807556986f8:1da17c4d1db09bb0:1"
time="2021-06-16T17:07:57Z" level=info msg="==--------------> Remote.*endpointService.Request() span:1421cbfcdf7d2a39:41b9fdfa9b157f3f:3783b807556986f8:1"
time="2021-06-16T17:07:57Z" level=info msg=">><<-------------- request={\"connection\":{\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}}]} span=1421cbfcdf7d2a39:41b9fdfa9b157f3f:3783b807556986f8:1"
time="2021-06-16T17:07:57Z" level=info msg="==----------------> createNSEClient() span:1421cbfcdf7d2a39:340c4a105df5b2e3:41b9fdfa9b157f3f:1"
time="2021-06-16T17:07:57Z" level=info msg="Create local NSE connection to endpoint: &{network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6gqkr\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  /var/lib/networkservicemesh/nsm-18/nsm.client.io.sock nsm-18}" operation=createNSEClient span="1421cbfcdf7d2a39:340c4a105df5b2e3:41b9fdfa9b157f3f:1"
time="2021-06-16T17:07:57Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm-18/nsm.client.io.sock"
time="2021-06-16T17:07:57Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:07:57Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00027b300 {member1.com}:0xc00027b380 {member2.com}:0xc00027b200]}"
time="2021-06-16T17:07:57Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:07:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:57Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:07:57Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:07:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:07:57Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:07:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:07:57Z" level=info msg="Found 3 tlsconfigs. [0xc000376480 0xc000376c00 0xc000377080]"
time="2021-06-16T17:07:57Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:01Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:01Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:01Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:08:02Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:02Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:02Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:08:03Z" level=info msg=">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\"\" span=597c046ac7b17e48:4062a822d7a27355:24d24d667928f3d4:1"
time="2021-06-16T17:08:03Z" level=info msg=">><<-- request={} span=597c046ac7b17e48:4062a822d7a27355:24d24d667928f3d4:1"
time="2021-06-16T17:08:03Z" level=info msg=">><<-- response={\"workspace\":[\"nsm-18\",\"nsm-29\"]} span=597c046ac7b17e48:4062a822d7a27355:24d24d667928f3d4:1"
2021/06/16 17:08:03 Reporting span 597c046ac7b17e48:4062a822d7a27355:24d24d667928f3d4:1
time="2021-06-16T17:08:06Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:06Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:06Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:06Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
2021/06/16 17:08:06 Reporting span 3904c06c72d5e6a4:04277ee751e200a7:678d65677f5498d7:1
time="2021-06-16T17:08:06Z" level=info msg="NSM:(7.2.6.2) Requesting NSE with request connection:<id:\"9\" network_service:\"green\" context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > mechanism_preferences:<type:\"MEMIF\" > mechanism_preferences:<type:\"KERNEL_INTERFACE\" > " operation="Remote.*endpointService.Request" span="3904c06c72d5e6a4:678d65677f5498d7:22933888fb2e649e:1"
time="2021-06-16T17:08:06Z" level=info msg="==----------------> nse.request() span:3904c06c72d5e6a4:381407f3b92c3164:678d65677f5498d7:1"
time="2021-06-16T17:08:06Z" level=info msg=">><<---------------- nse.request={\"connection\":{\"id\":\"9\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"MEMIF\"},{\"type\":\"KERNEL_INTERFACE\"}]} span=3904c06c72d5e6a4:381407f3b92c3164:678d65677f5498d7:1"
time="2021-06-16T17:08:06Z" level=info msg=">><<------------------ /networkservice.NetworkService/Request()=\"\" span=3904c06c72d5e6a4:381407f3b92c3164:678d65677f5498d7:1"
time="2021-06-16T17:08:06Z" level=info msg=">><<------------------ request={\"connection\":{\"id\":\"9\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"MEMIF\"},{\"type\":\"KERNEL_INTERFACE\"}]} span=3904c06c72d5e6a4:381407f3b92c3164:678d65677f5498d7:1"
time="2021-06-16T17:08:06Z" level=info msg="NSM-EndpointMonitor(green6gqkr): Received event: &{{UPDATE map[9:0xc00044e680] 0xc0000a8000}}"
time="2021-06-16T17:08:06Z" level=info msg="checking existing connection: id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  to match 9"
time="2021-06-16T17:08:06Z" level=info msg="checking existing connection: id:\"3\" payload:\"IP\" source:<id:\"3\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"5\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmP0dPKA8Wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmP0dPKA8Wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match 9"
time="2021-06-16T17:08:06Z" level=info msg="checking existing connection: id:\"4\" payload:\"IP\" source:<id:\"4\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"6\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmXrW4K0WX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmXrW4K0WX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match 9"
time="2021-06-16T17:08:06Z" level=info msg="checking existing connection: id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  to match 9"
time="2021-06-16T17:08:06Z" level=info msg="checking existing connection: id:\"3\" payload:\"IP\" source:<id:\"3\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"5\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmP0dPKA8Wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmP0dPKA8Wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match 9"
time="2021-06-16T17:08:06Z" level=info msg="checking existing connection: id:\"4\" payload:\"IP\" source:<id:\"4\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"6\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmXrW4K0WX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmXrW4K0WX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match 9"
time="2021-06-16T17:08:06Z" level=info msg="NSM-EndpointMonitor(green6gqkr): Handler is nil, event: %v not handled: &{{UPDATE map[9:0xc00044e680] 0xc0000a8000}}"
time="2021-06-16T17:08:06Z" level=info msg="NSM-EndpointMonitor(green6gqkr): Received event: &{{UPDATE map[9:0xc00044f300] 0xc0000a8000}}"
2021/06/16 17:08:06 Reporting span 3904c06c72d5e6a4:0bca57871f37ed59:381407f3b92c3164:1
time="2021-06-16T17:08:06Z" level=info msg=">><<------------------ response={\"id\":\"9\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmr0bzvJTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmr0bzvJTx/memif.sock\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"} span=3904c06c72d5e6a4:381407f3b92c3164:678d65677f5498d7:1"
time="2021-06-16T17:08:06Z" level=info msg=">><<---------------- nse.response={\"id\":\"9\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmr0bzvJTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmr0bzvJTx/memif.sock\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"} span=3904c06c72d5e6a4:381407f3b92c3164:678d65677f5498d7:1"
time="2021-06-16T17:08:06Z" level=info msg="NSM:(7.2.6.2.4) Update Local NSE connection parameters: cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmr0bzvJTx\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"nsmr0bzvJTx/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > parameters:<key:\"workspaceNseName\" value:\"green6gqkr\" > "
time="2021-06-16T17:08:06Z" level=info msg="==------------------> Remote.*rossConnectService.Request() span:3904c06c72d5e6a4:4b9f7ba944a4c855:381407f3b92c3164:1"
time="2021-06-16T17:08:06Z" level=info msg=">><<------------------ request={\"connection\":{\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}}]} span=3904c06c72d5e6a4:4b9f7ba944a4c855:381407f3b92c3164:1"
time="2021-06-16T17:08:06Z" level=info msg=">><<------------------ response={\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"} span=3904c06c72d5e6a4:4b9f7ba944a4c855:381407f3b92c3164:1"
2021/06/16 17:08:06 Reporting span 3904c06c72d5e6a4:4b9f7ba944a4c855:381407f3b92c3164:1
2021/06/16 17:08:06 Reporting span 3904c06c72d5e6a4:381407f3b92c3164:678d65677f5498d7:1
time="2021-06-16T17:08:06Z" level=info msg="checking existing connection: id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  to match 9"
time="2021-06-16T17:08:06Z" level=info msg="checking existing connection: id:\"3\" payload:\"IP\" source:<id:\"3\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"5\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmP0dPKA8Wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmP0dPKA8Wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match 9"
time="2021-06-16T17:08:06Z" level=info msg=">><<-------------- response={\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"} span=3904c06c72d5e6a4:678d65677f5498d7:22933888fb2e649e:1"
2021/06/16 17:08:06 Reporting span 3904c06c72d5e6a4:678d65677f5498d7:22933888fb2e649e:1
time="2021-06-16T17:08:06Z" level=info msg=">><<------------ response={\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"} span=3904c06c72d5e6a4:22933888fb2e649e:54337be6eb6f0352:1"
2021/06/16 17:08:06 Reporting span 3904c06c72d5e6a4:22933888fb2e649e:54337be6eb6f0352:1
time="2021-06-16T17:08:06Z" level=info msg=">><<---------- response={\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"} span=3904c06c72d5e6a4:54337be6eb6f0352:4b9d895156c786a9:1"
2021/06/16 17:08:06 Reporting span 3904c06c72d5e6a4:54337be6eb6f0352:4b9d895156c786a9:1
time="2021-06-16T17:08:06Z" level=info msg="==----------> programForwarder() span:3904c06c72d5e6a4:57901dbf8a09a1ca:4b9d895156c786a9:1"
time="2021-06-16T17:08:06Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm-vppagent.forwarder.sock"
time="2021-06-16T17:08:06Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:08:06Z" level=info msg="checking existing connection: id:\"4\" payload:\"IP\" source:<id:\"4\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"6\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmXrW4K0WX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmXrW4K0WX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match 9"
time="2021-06-16T17:08:06Z" level=info msg="checking existing connection: id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  to match 9"
time="2021-06-16T17:08:06Z" level=info msg="checking existing connection: id:\"3\" payload:\"IP\" source:<id:\"3\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"5\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmP0dPKA8Wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmP0dPKA8Wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match 9"
time="2021-06-16T17:08:06Z" level=info msg="checking existing connection: id:\"4\" payload:\"IP\" source:<id:\"4\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"6\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmXrW4K0WX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmXrW4K0WX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match 9"
time="2021-06-16T17:08:06Z" level=info msg="NSM-EndpointMonitor(green6gqkr): Handler is nil, event: %v not handled: &{{UPDATE map[9:0xc00044f300] 0xc0000a8000}}"
time="2021-06-16T17:08:06Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000530f00 {member1.com}:0xc000530f80 {member2.com}:0xc000530e80]}"
time="2021-06-16T17:08:06Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:08:06Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:06Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:08:06Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:08:06Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:06Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:08:06Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:08:06Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:06Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:08:06Z" level=info msg="Found 3 tlsconfigs. [0xc000dea780 0xc000dea900 0xc000deaa80]"
time="2021-06-16T17:08:06Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:06Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:08:07Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:07Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:07Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:07Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
2021/06/16 17:08:07 Reporting span 1421cbfcdf7d2a39:340c4a105df5b2e3:41b9fdfa9b157f3f:1
time="2021-06-16T17:08:07Z" level=info msg="NSM:(7.2.6.2) Requesting NSE with request connection:<id:\"a\" network_service:\"green\" context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > mechanism_preferences:<type:\"MEMIF\" > mechanism_preferences:<type:\"KERNEL_INTERFACE\" > " operation="Remote.*endpointService.Request" span="1421cbfcdf7d2a39:41b9fdfa9b157f3f:3783b807556986f8:1"
time="2021-06-16T17:08:07Z" level=info msg="==----------------> nse.request() span:1421cbfcdf7d2a39:3bf25b323460ac4b:41b9fdfa9b157f3f:1"
time="2021-06-16T17:08:07Z" level=info msg=">><<---------------- nse.request={\"connection\":{\"id\":\"a\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"MEMIF\"},{\"type\":\"KERNEL_INTERFACE\"}]} span=1421cbfcdf7d2a39:3bf25b323460ac4b:41b9fdfa9b157f3f:1"
time="2021-06-16T17:08:07Z" level=info msg=">><<------------------ /networkservice.NetworkService/Request()=\"\" span=1421cbfcdf7d2a39:3bf25b323460ac4b:41b9fdfa9b157f3f:1"
time="2021-06-16T17:08:07Z" level=info msg=">><<------------------ request={\"connection\":{\"id\":\"a\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"MEMIF\"},{\"type\":\"KERNEL_INTERFACE\"}]} span=1421cbfcdf7d2a39:3bf25b323460ac4b:41b9fdfa9b157f3f:1"
time="2021-06-16T17:08:07Z" level=info msg="NSM-EndpointMonitor(green6gqkr): Received event: &{{UPDATE map[a:0xc000be1780] 0xc0000a8000}}"
time="2021-06-16T17:08:07Z" level=info msg="checking existing connection: id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  to match a"
time="2021-06-16T17:08:07Z" level=info msg="checking existing connection: id:\"3\" payload:\"IP\" source:<id:\"3\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"5\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmP0dPKA8Wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmP0dPKA8Wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match a"
time="2021-06-16T17:08:07Z" level=info msg="checking existing connection: id:\"4\" payload:\"IP\" source:<id:\"4\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"6\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmXrW4K0WX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmXrW4K0WX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match a"
time="2021-06-16T17:08:07Z" level=info msg="checking existing connection: id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  to match a"
time="2021-06-16T17:08:07Z" level=info msg="checking existing connection: id:\"3\" payload:\"IP\" source:<id:\"3\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"5\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmP0dPKA8Wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmP0dPKA8Wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match a"
time="2021-06-16T17:08:07Z" level=info msg="checking existing connection: id:\"4\" payload:\"IP\" source:<id:\"4\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"6\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmXrW4K0WX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmXrW4K0WX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match a"
time="2021-06-16T17:08:07Z" level=info msg="NSM-EndpointMonitor(green6gqkr): Handler is nil, event: %v not handled: &{{UPDATE map[a:0xc000be1780] 0xc0000a8000}}"
2021/06/16 17:08:07 Reporting span 1421cbfcdf7d2a39:04ce321dd10df304:3bf25b323460ac4b:1
time="2021-06-16T17:08:07Z" level=info msg=">><<------------------ response={\"id\":\"a\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmQ35gmTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmQ35gmTx/memif.sock\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"} span=1421cbfcdf7d2a39:3bf25b323460ac4b:41b9fdfa9b157f3f:1"
time="2021-06-16T17:08:07Z" level=info msg=">><<---------------- nse.response={\"id\":\"a\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmQ35gmTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmQ35gmTx/memif.sock\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"} span=1421cbfcdf7d2a39:3bf25b323460ac4b:41b9fdfa9b157f3f:1"
time="2021-06-16T17:08:07Z" level=info msg="NSM:(7.2.6.2.4) Update Local NSE connection parameters: cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmQ35gmTx\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"nsmQ35gmTx/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > parameters:<key:\"workspaceNseName\" value:\"green6gqkr\" > "
time="2021-06-16T17:08:07Z" level=info msg="==------------------> Remote.*rossConnectService.Request() span:1421cbfcdf7d2a39:587622e39e66c339:3bf25b323460ac4b:1"
time="2021-06-16T17:08:07Z" level=info msg=">><<------------------ request={\"connection\":{\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}}]} span=1421cbfcdf7d2a39:587622e39e66c339:3bf25b323460ac4b:1"
time="2021-06-16T17:08:07Z" level=info msg=">><<------------------ response={\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"} span=1421cbfcdf7d2a39:587622e39e66c339:3bf25b323460ac4b:1"
2021/06/16 17:08:07 Reporting span 1421cbfcdf7d2a39:587622e39e66c339:3bf25b323460ac4b:1
2021/06/16 17:08:07 Reporting span 1421cbfcdf7d2a39:3bf25b323460ac4b:41b9fdfa9b157f3f:1
time="2021-06-16T17:08:07Z" level=info msg=">><<-------------- response={\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"} span=1421cbfcdf7d2a39:41b9fdfa9b157f3f:3783b807556986f8:1"
2021/06/16 17:08:07 Reporting span 1421cbfcdf7d2a39:41b9fdfa9b157f3f:3783b807556986f8:1
time="2021-06-16T17:08:07Z" level=info msg=">><<------------ response={\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"} span=1421cbfcdf7d2a39:3783b807556986f8:1da17c4d1db09bb0:1"
2021/06/16 17:08:07 Reporting span 1421cbfcdf7d2a39:3783b807556986f8:1da17c4d1db09bb0:1
time="2021-06-16T17:08:07Z" level=info msg=">><<---------- response={\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"} span=1421cbfcdf7d2a39:1da17c4d1db09bb0:770119d39f32c922:1"
2021/06/16 17:08:07 Reporting span 1421cbfcdf7d2a39:1da17c4d1db09bb0:770119d39f32c922:1
time="2021-06-16T17:08:07Z" level=info msg="==----------> programForwarder() span:1421cbfcdf7d2a39:53db87137276e0bb:770119d39f32c922:1"
time="2021-06-16T17:08:07Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm-vppagent.forwarder.sock"
time="2021-06-16T17:08:07Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:08:07Z" level=info msg="NSM-EndpointMonitor(green6gqkr): Received event: &{{UPDATE map[a:0xc000537400] 0xc0000a8000}}"
time="2021-06-16T17:08:07Z" level=info msg="checking existing connection: id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  to match a"
time="2021-06-16T17:08:07Z" level=info msg="checking existing connection: id:\"3\" payload:\"IP\" source:<id:\"3\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"5\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmP0dPKA8Wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmP0dPKA8Wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match a"
time="2021-06-16T17:08:07Z" level=info msg="checking existing connection: id:\"4\" payload:\"IP\" source:<id:\"4\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"6\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmXrW4K0WX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmXrW4K0WX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match a"
time="2021-06-16T17:08:07Z" level=info msg="checking existing connection: id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  to match a"
time="2021-06-16T17:08:07Z" level=info msg="checking existing connection: id:\"3\" payload:\"IP\" source:<id:\"3\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"5\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmP0dPKA8Wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmP0dPKA8Wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match a"
time="2021-06-16T17:08:07Z" level=info msg="checking existing connection: id:\"4\" payload:\"IP\" source:<id:\"4\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"6\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmXrW4K0WX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmXrW4K0WX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match a"
time="2021-06-16T17:08:07Z" level=info msg="NSM-EndpointMonitor(green6gqkr): Handler is nil, event: %v not handled: &{{UPDATE map[a:0xc000537400] 0xc0000a8000}}"
time="2021-06-16T17:08:07Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0005f86c0 {member1.com}:0xc0005f85c0 {member2.com}:0xc0005f8540]}"
time="2021-06-16T17:08:07Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:08:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:07Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:08:07Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:08:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:08:07Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:08:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:08:07Z" level=info msg="Found 3 tlsconfigs. [0xc000c3ca80 0xc000c3cc00 0xc000c3cd80]"
time="2021-06-16T17:08:07Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:11Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:11Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:12Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:12Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:16Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:16Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:16Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:16Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:16Z" level=info msg="==------------> ProgramAttempt-0() span:3904c06c72d5e6a4:7abae53d94ff75d6:57901dbf8a09a1ca:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<------------ attempt=0 span=3904c06c72d5e6a4:7abae53d94ff75d6:57901dbf8a09a1ca:1"
time="2021-06-16T17:08:16Z" level=info msg="NSM:(9.1) Sending request to forwarder" operation=programForwarder span="3904c06c72d5e6a4:57901dbf8a09a1ca:4b9d895156c786a9:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<------------ request={\"id\":\"7\",\"payload\":\"IP\",\"source\":{\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"destination\":{\"id\":\"9\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmr0bzvJTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmr0bzvJTx/memif.sock\",\"workspace\":\"nsm-18\",\"workspaceNseName\":\"green6gqkr\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}} span=3904c06c72d5e6a4:7abae53d94ff75d6:57901dbf8a09a1ca:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<-------------- /forwarder.Forwarder/Request()=\"\" span=3904c06c72d5e6a4:7abae53d94ff75d6:57901dbf8a09a1ca:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<-------------- request={\"id\":\"7\",\"payload\":\"IP\",\"source\":{\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"destination\":{\"id\":\"9\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmr0bzvJTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmr0bzvJTx/memif.sock\",\"workspace\":\"nsm-18\",\"workspaceNseName\":\"green6gqkr\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}} span=3904c06c72d5e6a4:7abae53d94ff75d6:57901dbf8a09a1ca:1"
time="2021-06-16T17:08:16Z" level=info msg="NSM-ForwarderMonitor(vppagent): Received event: &{{UPDATE map[7:0xc000990320] 0xc0000a8000} map[] <nil>}"
time="2021-06-16T17:08:16Z" level=info msg="==--> CrossConnectUpdate() span:3904c06c72d5e6a4:733fed343517d27c:3aceaa2919d00489:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<-- clientConnection={\"ConnectionID\":\"7\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=3904c06c72d5e6a4:733fed343517d27c:3aceaa2919d00489:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<-- event=id:\"7\" payload:\"IP\" source:<id:\"7\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"7df393ea83cf027b3a63fe1d96a37894\" > parameters:<key:\"localEspSpi\" value:\"9e42b6b9714c5531\" > parameters:<key:\"localIntegKey\" value:\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\" > parameters:<key:\"localSAInIdx\" value:\"363725565\" > parameters:<key:\"localSAOutIdx\" value:\"1698663593\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"aa037eae0475183d3e73a5b29f14d66b\" > parameters:<key:\"remoteEspSpi\" value:\"7cbba95e9053b3e2\" > parameters:<key:\"remoteIntegKey\" value:\"58db78d358602879cde12bf41e2b93e335563712\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"6\" > > context:<ip_context:<src_ip_addr:\"172.100.240.1/30\" dst_ip_addr:\"172.100.240.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > destination:<id:\"9\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmr0bzvJTx\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"nsmr0bzvJTx/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > parameters:<key:\"workspaceNseName\" value:\"green6gqkr\" > > context:<ip_context:<src_ip_addr:\"172.100.240.1/30\" dst_ip_addr:\"172.100.240.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" >  span=3904c06c72d5e6a4:733fed343517d27c:3aceaa2919d00489:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<-- eventType=\"UPDATE\" span=3904c06c72d5e6a4:733fed343517d27c:3aceaa2919d00489:1"
time="2021-06-16T17:08:16Z" level=info msg="Send cross connect event: id:\"7\" payload:\"IP\" source:<id:\"7\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"7df393ea83cf027b3a63fe1d96a37894\" > parameters:<key:\"localEspSpi\" value:\"9e42b6b9714c5531\" > parameters:<key:\"localIntegKey\" value:\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\" > parameters:<key:\"localSAInIdx\" value:\"363725565\" > parameters:<key:\"localSAOutIdx\" value:\"1698663593\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"aa037eae0475183d3e73a5b29f14d66b\" > parameters:<key:\"remoteEspSpi\" value:\"7cbba95e9053b3e2\" > parameters:<key:\"remoteIntegKey\" value:\"58db78d358602879cde12bf41e2b93e335563712\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"6\" > > context:<ip_context:<src_ip_addr:\"172.100.240.1/30\" dst_ip_addr:\"172.100.240.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > destination:<id:\"9\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmr0bzvJTx\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"nsmr0bzvJTx/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > parameters:<key:\"workspaceNseName\" value:\"green6gqkr\" > > context:<ip_context:<src_ip_addr:\"172.100.240.1/30\" dst_ip_addr:\"172.100.240.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > " operation=CrossConnectUpdate span="3904c06c72d5e6a4:733fed343517d27c:3aceaa2919d00489:1"
time="2021-06-16T17:08:16Z" level=info msg="==----> UpdateXcon() span:3904c06c72d5e6a4:58d02d0e67e2d8b0:733fed343517d27c:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<---- connection={\"ConnectionID\":\"7\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=3904c06c72d5e6a4:58d02d0e67e2d8b0:733fed343517d27c:1"
2021/06/16 17:08:16 Reporting span 3904c06c72d5e6a4:4ac05d0bbf9cd91c:7abae53d94ff75d6:1
time="2021-06-16T17:08:16Z" level=info msg="CrossConnect-New event: &{{UPDATE map[7:0xc000990320] 0xc0006c4f00} map[] 0xc0006c4f00}"
time="2021-06-16T17:08:16Z" level=info msg=">><<-------------- response={\"id\":\"7\",\"payload\":\"IP\",\"source\":{\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"destination\":{\"id\":\"9\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmr0bzvJTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmr0bzvJTx/memif.sock\",\"workspace\":\"nsm-18\",\"workspaceNseName\":\"green6gqkr\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}} span=3904c06c72d5e6a4:7abae53d94ff75d6:57901dbf8a09a1ca:1"
time="2021-06-16T17:08:16Z" level=info msg="NSM:(9.2) Forwarder configuration successful" operation=ProgramAttempt-0 span="3904c06c72d5e6a4:7abae53d94ff75d6:57901dbf8a09a1ca:1"
time="2021-06-16T17:08:16Z" level=info msg="==----> CrossConnect-send-update() span:3904c06c72d5e6a4:588a55bf4e432dd2:733fed343517d27c:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<---- eventType=\"UPDATE\" span=3904c06c72d5e6a4:588a55bf4e432dd2:733fed343517d27c:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<---- msg={\"type\":1,\"cross_connects\":{\"7\":{\"id\":\"7\",\"payload\":\"IP\",\"source\":{\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"destination\":{\"id\":\"9\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmr0bzvJTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmr0bzvJTx/memif.sock\",\"workspace\":\"nsm-18\",\"workspaceNseName\":\"green6gqkr\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}}}} span=3904c06c72d5e6a4:588a55bf4e432dd2:733fed343517d27c:1"
2021/06/16 17:08:16 Reporting span 3904c06c72d5e6a4:588a55bf4e432dd2:733fed343517d27c:1
time="2021-06-16T17:08:16Z" level=info msg=">><<---- newXCon={\"id\":\"7\",\"payload\":\"IP\",\"source\":{\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"destination\":{\"id\":\"9\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmr0bzvJTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmr0bzvJTx/memif.sock\",\"workspace\":\"nsm-18\",\"workspaceNseName\":\"green6gqkr\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}} span=3904c06c72d5e6a4:58d02d0e67e2d8b0:733fed343517d27c:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<------------ crossConnection={\"id\":\"7\",\"payload\":\"IP\",\"source\":{\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"destination\":{\"id\":\"9\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmr0bzvJTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmr0bzvJTx/memif.sock\",\"workspace\":\"nsm-18\",\"workspaceNseName\":\"green6gqkr\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}} span=3904c06c72d5e6a4:7abae53d94ff75d6:57901dbf8a09a1ca:1"
2021/06/16 17:08:16 Reporting span 3904c06c72d5e6a4:7abae53d94ff75d6:57901dbf8a09a1ca:1
2021/06/16 17:08:16 Reporting span 3904c06c72d5e6a4:57901dbf8a09a1ca:4b9d895156c786a9:1
time="2021-06-16T17:08:16Z" level=info msg=">><<-------- response={\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"} span=3904c06c72d5e6a4:4b9d895156c786a9:29f6ae5dfe136918:1"
2021/06/16 17:08:16 Reporting span 3904c06c72d5e6a4:4b9d895156c786a9:29f6ae5dfe136918:1
time="2021-06-16T17:08:16Z" level=info msg="resourceUpdated started: &{7 <nil> id:\"7\" payload:\"IP\" source:<id:\"7\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"7df393ea83cf027b3a63fe1d96a37894\" > parameters:<key:\"localEspSpi\" value:\"9e42b6b9714c5531\" > parameters:<key:\"localIntegKey\" value:\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\" > parameters:<key:\"localSAInIdx\" value:\"363725565\" > parameters:<key:\"localSAOutIdx\" value:\"1698663593\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"aa037eae0475183d3e73a5b29f14d66b\" > parameters:<key:\"remoteEspSpi\" value:\"7cbba95e9053b3e2\" > parameters:<key:\"remoteIntegKey\" value:\"58db78d358602879cde12bf41e2b93e335563712\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"6\" > > context:<ip_context:<src_ip_addr:\"172.100.240.1/30\" dst_ip_addr:\"172.100.240.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > destination:<id:\"9\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmr0bzvJTx\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"nsmr0bzvJTx/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > parameters:<key:\"workspaceNseName\" value:\"green6gqkr\" > > context:<ip_context:<src_ip_addr:\"172.100.240.1/30\" dst_ip_addr:\"172.100.240.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" >  <nil> <nil>  1 0 0xc0009f2f00 0xc0000b4760}"
time="2021-06-16T17:08:16Z" level=info msg=">><<-------- client-connection={\"ConnectionID\":\"7\",\"Request\":{\"connection\":{\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}}]},\"Xcon\":{\"id\":\"7\",\"payload\":\"IP\",\"source\":{\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"destination\":{\"id\":\"9\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmr0bzvJTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmr0bzvJTx/memif.sock\",\"workspace\":\"nsm-18\",\"workspaceNseName\":\"green6gqkr\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}},\"RemoteNsm\":null,\"Endpoint\":{\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}},\"ForwarderRegisteredName\":\"vppagent\",\"ConnectionState\":0,\"ForwarderState\":1,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=3904c06c72d5e6a4:29f6ae5dfe136918:183b1149c015ce5d:1"
time="2021-06-16T17:08:16Z" level=info msg="==------> ClientConnectionUpdated() span:3904c06c72d5e6a4:123120b01158a87a:58d02d0e67e2d8b0:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<------ new={\"ConnectionID\":\"7\",\"Request\":null,\"Xcon\":{\"id\":\"7\",\"payload\":\"IP\",\"source\":{\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"destination\":{\"id\":\"9\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmr0bzvJTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmr0bzvJTx/memif.sock\",\"workspace\":\"nsm-18\",\"workspaceNseName\":\"green6gqkr\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}},\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=3904c06c72d5e6a4:123120b01158a87a:58d02d0e67e2d8b0:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<------ old={\"ConnectionID\":\"7\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=3904c06c72d5e6a4:123120b01158a87a:58d02d0e67e2d8b0:1"
2021/06/16 17:08:16 Reporting span 3904c06c72d5e6a4:123120b01158a87a:58d02d0e67e2d8b0:1
time="2021-06-16T17:08:16Z" level=info msg="RemoteConnection-New event: &{{UPDATE map[7:0xc000a8b480] 0xc000a887b0}}"
time="2021-06-16T17:08:16Z" level=info msg="==--------> RemoteConnection-send-update() span:3904c06c72d5e6a4:5f85a140dc9aaf1a:123120b01158a87a:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<-------- eventType=\"UPDATE\" span=3904c06c72d5e6a4:5f85a140dc9aaf1a:123120b01158a87a:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<-------- msg={\"type\":1,\"connections\":{\"7\":{\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}}} span=3904c06c72d5e6a4:5f85a140dc9aaf1a:123120b01158a87a:1"
2021/06/16 17:08:16 Reporting span 3904c06c72d5e6a4:5f85a140dc9aaf1a:123120b01158a87a:1
time="2021-06-16T17:08:16Z" level=info msg="resourceUpdated finished: &{7 <nil> id:\"7\" payload:\"IP\" source:<id:\"7\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"7df393ea83cf027b3a63fe1d96a37894\" > parameters:<key:\"localEspSpi\" value:\"9e42b6b9714c5531\" > parameters:<key:\"localIntegKey\" value:\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\" > parameters:<key:\"localSAInIdx\" value:\"363725565\" > parameters:<key:\"localSAOutIdx\" value:\"1698663593\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"aa037eae0475183d3e73a5b29f14d66b\" > parameters:<key:\"remoteEspSpi\" value:\"7cbba95e9053b3e2\" > parameters:<key:\"remoteIntegKey\" value:\"58db78d358602879cde12bf41e2b93e335563712\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"6\" > > context:<ip_context:<src_ip_addr:\"172.100.240.1/30\" dst_ip_addr:\"172.100.240.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > destination:<id:\"9\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmr0bzvJTx\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"nsmr0bzvJTx/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > parameters:<key:\"workspaceNseName\" value:\"green6gqkr\" > > context:<ip_context:<src_ip_addr:\"172.100.240.1/30\" dst_ip_addr:\"172.100.240.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" >  <nil> <nil>  1 0 0xc0009f2f00 0xc0000b4760}"
2021/06/16 17:08:16 Reporting span 3904c06c72d5e6a4:58d02d0e67e2d8b0:733fed343517d27c:1
2021/06/16 17:08:16 Reporting span 3904c06c72d5e6a4:733fed343517d27c:3aceaa2919d00489:1
time="2021-06-16T17:08:16Z" level=info msg="resourceUpdated started: &{7 connection:<id:\"7\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"7df393ea83cf027b3a63fe1d96a37894\" > parameters:<key:\"localEspSpi\" value:\"9e42b6b9714c5531\" > parameters:<key:\"localIntegKey\" value:\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\" > parameters:<key:\"localSAInIdx\" value:\"363725565\" > parameters:<key:\"localSAOutIdx\" value:\"1698663593\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"aa037eae0475183d3e73a5b29f14d66b\" > parameters:<key:\"remoteEspSpi\" value:\"7cbba95e9053b3e2\" > parameters:<key:\"remoteIntegKey\" value:\"58db78d358602879cde12bf41e2b93e335563712\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"6\" > > context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > mechanism_preferences:<type:\"VXLAN\" parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"mtu_overhead\" value:\"50\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > > mechanism_preferences:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"7df393ea83cf027b3a63fe1d96a37894\" > parameters:<key:\"localEspSpi\" value:\"9e42b6b9714c5531\" > parameters:<key:\"localIntegKey\" value:\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\" > parameters:<key:\"localSAInIdx\" value:\"363725565\" > parameters:<key:\"localSAOutIdx\" value:\"1698663593\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"aa037eae0475183d3e73a5b29f14d66b\" > parameters:<key:\"remoteEspSpi\" value:\"7cbba95e9053b3e2\" > parameters:<key:\"remoteIntegKey\" value:\"58db78d358602879cde12bf41e2b93e335563712\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"6\" > >  id:\"7\" payload:\"IP\" source:<id:\"7\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"7df393ea83cf027b3a63fe1d96a37894\" > parameters:<key:\"localEspSpi\" value:\"9e42b6b9714c5531\" > parameters:<key:\"localIntegKey\" value:\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\" > parameters:<key:\"localSAInIdx\" value:\"363725565\" > parameters:<key:\"localSAOutIdx\" value:\"1698663593\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"aa037eae0475183d3e73a5b29f14d66b\" > parameters:<key:\"remoteEspSpi\" value:\"7cbba95e9053b3e2\" > parameters:<key:\"remoteIntegKey\" value:\"58db78d358602879cde12bf41e2b93e335563712\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"6\" > > context:<ip_context:<src_ip_addr:\"172.100.240.1/30\" dst_ip_addr:\"172.100.240.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > destination:<id:\"9\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmr0bzvJTx\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"nsmr0bzvJTx/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > parameters:<key:\"workspaceNseName\" value:\"green6gqkr\" > > context:<ip_context:<src_ip_addr:\"172.100.240.1/30\" dst_ip_addr:\"172.100.240.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" >  <nil> network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6gqkr\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  vppagent 0 1 0xc0009f2f00 0xc0000b4760}"
time="2021-06-16T17:08:16Z" level=info msg="resourceUpdated finished: &{7 connection:<id:\"7\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"7df393ea83cf027b3a63fe1d96a37894\" > parameters:<key:\"localEspSpi\" value:\"9e42b6b9714c5531\" > parameters:<key:\"localIntegKey\" value:\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\" > parameters:<key:\"localSAInIdx\" value:\"363725565\" > parameters:<key:\"localSAOutIdx\" value:\"1698663593\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"aa037eae0475183d3e73a5b29f14d66b\" > parameters:<key:\"remoteEspSpi\" value:\"7cbba95e9053b3e2\" > parameters:<key:\"remoteIntegKey\" value:\"58db78d358602879cde12bf41e2b93e335563712\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"6\" > > context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > mechanism_preferences:<type:\"VXLAN\" parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"mtu_overhead\" value:\"50\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > > mechanism_preferences:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"7df393ea83cf027b3a63fe1d96a37894\" > parameters:<key:\"localEspSpi\" value:\"9e42b6b9714c5531\" > parameters:<key:\"localIntegKey\" value:\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\" > parameters:<key:\"localSAInIdx\" value:\"363725565\" > parameters:<key:\"localSAOutIdx\" value:\"1698663593\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"aa037eae0475183d3e73a5b29f14d66b\" > parameters:<key:\"remoteEspSpi\" value:\"7cbba95e9053b3e2\" > parameters:<key:\"remoteIntegKey\" value:\"58db78d358602879cde12bf41e2b93e335563712\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"6\" > >  id:\"7\" payload:\"IP\" source:<id:\"7\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"7df393ea83cf027b3a63fe1d96a37894\" > parameters:<key:\"localEspSpi\" value:\"9e42b6b9714c5531\" > parameters:<key:\"localIntegKey\" value:\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\" > parameters:<key:\"localSAInIdx\" value:\"363725565\" > parameters:<key:\"localSAOutIdx\" value:\"1698663593\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"aa037eae0475183d3e73a5b29f14d66b\" > parameters:<key:\"remoteEspSpi\" value:\"7cbba95e9053b3e2\" > parameters:<key:\"remoteIntegKey\" value:\"58db78d358602879cde12bf41e2b93e335563712\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"6\" > > context:<ip_context:<src_ip_addr:\"172.100.240.1/30\" dst_ip_addr:\"172.100.240.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > destination:<id:\"9\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmr0bzvJTx\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"nsmr0bzvJTx/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > parameters:<key:\"workspaceNseName\" value:\"green6gqkr\" > > context:<ip_context:<src_ip_addr:\"172.100.240.1/30\" dst_ip_addr:\"172.100.240.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" >  <nil> network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6gqkr\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  vppagent 0 1 0xc0009f2f00 0xc0000b4760}"
time="2021-06-16T17:08:16Z" level=info msg=">><<------ response={\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"} span=3904c06c72d5e6a4:29f6ae5dfe136918:183b1149c015ce5d:1"
2021/06/16 17:08:16 Reporting span 3904c06c72d5e6a4:29f6ae5dfe136918:183b1149c015ce5d:1
time="2021-06-16T17:08:16Z" level=info msg=">><<---- response={\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"} span=3904c06c72d5e6a4:183b1149c015ce5d:4fcdbaf7051e6d9f:1"
2021/06/16 17:08:16 Reporting span 3904c06c72d5e6a4:183b1149c015ce5d:4fcdbaf7051e6d9f:1
time="2021-06-16T17:08:16Z" level=info msg=">><<-- response={\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"} span=3904c06c72d5e6a4:4fcdbaf7051e6d9f:3aceaa2919d00489:1"
2021/06/16 17:08:16 Reporting span 3904c06c72d5e6a4:4fcdbaf7051e6d9f:3aceaa2919d00489:1
time="2021-06-16T17:08:16Z" level=info msg=">><<-- response={\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"} span=3904c06c72d5e6a4:3aceaa2919d00489:438081bdc8e7576a:1"
2021/06/16 17:08:16 Reporting span 3904c06c72d5e6a4:3aceaa2919d00489:438081bdc8e7576a:1
time="2021-06-16T17:08:16Z" level=info msg="RemoteConnection-New event: &{{UPDATE map[7:0xc000537c00] 0xc000ac3c20}}"
time="2021-06-16T17:08:16Z" level=info msg="==------> RemoteConnection-send-update() span:3904c06c72d5e6a4:23733b0690e057f5:183b1149c015ce5d:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<------ eventType=\"UPDATE\" span=3904c06c72d5e6a4:23733b0690e057f5:183b1149c015ce5d:1"
time="2021-06-16T17:08:16Z" level=info msg="==--------> ClientConnectionUpdated() span:3904c06c72d5e6a4:1e89527fba32f4cc:29f6ae5dfe136918:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<-------- new={\"ConnectionID\":\"7\",\"Request\":{\"connection\":{\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}}]},\"Xcon\":{\"id\":\"7\",\"payload\":\"IP\",\"source\":{\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"destination\":{\"id\":\"9\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmr0bzvJTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmr0bzvJTx/memif.sock\",\"workspace\":\"nsm-18\",\"workspaceNseName\":\"green6gqkr\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}},\"RemoteNsm\":null,\"Endpoint\":{\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}},\"ForwarderRegisteredName\":\"vppagent\",\"ConnectionState\":0,\"ForwarderState\":1,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=3904c06c72d5e6a4:1e89527fba32f4cc:29f6ae5dfe136918:1"
time="2021-06-16T17:08:16Z" level=info msg=">><<------ msg={\"type\":1,\"connections\":{\"7\":{\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}}} span=3904c06c72d5e6a4:23733b0690e057f5:183b1149c015ce5d:1"
2021/06/16 17:08:16 Reporting span 3904c06c72d5e6a4:23733b0690e057f5:183b1149c015ce5d:1
time="2021-06-16T17:08:16Z" level=info msg=">><<-------- old={\"ConnectionID\":\"7\",\"Request\":null,\"Xcon\":{\"id\":\"7\",\"payload\":\"IP\",\"source\":{\"id\":\"7\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"7df393ea83cf027b3a63fe1d96a37894\",\"localEspSpi\":\"9e42b6b9714c5531\",\"localIntegKey\":\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\",\"localSAInIdx\":\"363725565\",\"localSAOutIdx\":\"1698663593\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"aa037eae0475183d3e73a5b29f14d66b\",\"remoteEspSpi\":\"7cbba95e9053b3e2\",\"remoteIntegKey\":\"58db78d358602879cde12bf41e2b93e335563712\",\"src_ip\":\"172.17.0.3\",\"vni\":\"6\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"destination\":{\"id\":\"9\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmr0bzvJTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmr0bzvJTx/memif.sock\",\"workspace\":\"nsm-18\",\"workspaceNseName\":\"green6gqkr\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.1/30\",\"dst_ip_addr\":\"172.100.240.2/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.252.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}},\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=3904c06c72d5e6a4:1e89527fba32f4cc:29f6ae5dfe136918:1"
2021/06/16 17:08:16 Reporting span 3904c06c72d5e6a4:1e89527fba32f4cc:29f6ae5dfe136918:1
time="2021-06-16T17:08:17Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:17Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:17Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:17Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:17Z" level=info msg="==------------> ProgramAttempt-0() span:1421cbfcdf7d2a39:0502dbefb7434b31:53db87137276e0bb:1"
time="2021-06-16T17:08:17Z" level=info msg=">><<------------ attempt=0 span=1421cbfcdf7d2a39:0502dbefb7434b31:53db87137276e0bb:1"
time="2021-06-16T17:08:17Z" level=info msg="NSM:(9.1) Sending request to forwarder" operation=programForwarder span="1421cbfcdf7d2a39:53db87137276e0bb:770119d39f32c922:1"
time="2021-06-16T17:08:17Z" level=info msg=">><<------------ request={\"id\":\"8\",\"payload\":\"IP\",\"source\":{\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"destination\":{\"id\":\"a\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmQ35gmTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmQ35gmTx/memif.sock\",\"workspace\":\"nsm-18\",\"workspaceNseName\":\"green6gqkr\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}} span=1421cbfcdf7d2a39:0502dbefb7434b31:53db87137276e0bb:1"
time="2021-06-16T17:08:17Z" level=info msg=">><<-------------- /forwarder.Forwarder/Request()=\"\" span=1421cbfcdf7d2a39:0502dbefb7434b31:53db87137276e0bb:1"
time="2021-06-16T17:08:17Z" level=info msg=">><<-------------- request={\"id\":\"8\",\"payload\":\"IP\",\"source\":{\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"destination\":{\"id\":\"a\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmQ35gmTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmQ35gmTx/memif.sock\",\"workspace\":\"nsm-18\",\"workspaceNseName\":\"green6gqkr\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}} span=1421cbfcdf7d2a39:0502dbefb7434b31:53db87137276e0bb:1"
2021/06/16 17:08:17 Reporting span 1421cbfcdf7d2a39:70dc0686b7d96a75:0502dbefb7434b31:1
time="2021-06-16T17:08:17Z" level=info msg=">><<-------------- response={\"id\":\"8\",\"payload\":\"IP\",\"source\":{\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"destination\":{\"id\":\"a\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmQ35gmTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmQ35gmTx/memif.sock\",\"workspace\":\"nsm-18\",\"workspaceNseName\":\"green6gqkr\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}} span=1421cbfcdf7d2a39:0502dbefb7434b31:53db87137276e0bb:1"
time="2021-06-16T17:08:17Z" level=info msg="NSM:(9.2) Forwarder configuration successful" operation=ProgramAttempt-0 span="1421cbfcdf7d2a39:0502dbefb7434b31:53db87137276e0bb:1"
time="2021-06-16T17:08:17Z" level=info msg="NSM-ForwarderMonitor(vppagent): Received event: &{{UPDATE map[8:0xc0002d6820] 0xc0000a8000} map[] <nil>}"
time="2021-06-16T17:08:17Z" level=info msg="==--> CrossConnectUpdate() span:1421cbfcdf7d2a39:5289dc89b1cc7387:515aab82a5bdba41:1"
time="2021-06-16T17:08:17Z" level=info msg=">><<-- clientConnection={\"ConnectionID\":\"8\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=1421cbfcdf7d2a39:5289dc89b1cc7387:515aab82a5bdba41:1"
time="2021-06-16T17:08:17Z" level=info msg=">><<------------ crossConnection={\"id\":\"8\",\"payload\":\"IP\",\"source\":{\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"destination\":{\"id\":\"a\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmQ35gmTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmQ35gmTx/memif.sock\",\"workspace\":\"nsm-18\",\"workspaceNseName\":\"green6gqkr\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}} span=1421cbfcdf7d2a39:0502dbefb7434b31:53db87137276e0bb:1"
2021/06/16 17:08:17 Reporting span 1421cbfcdf7d2a39:0502dbefb7434b31:53db87137276e0bb:1
2021/06/16 17:08:17 Reporting span 1421cbfcdf7d2a39:53db87137276e0bb:770119d39f32c922:1
time="2021-06-16T17:08:17Z" level=info msg=">><<-- event=id:\"8\" payload:\"IP\" source:<id:\"8\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"f7c07c2142a3fab39e49e3030d3557c8\" > parameters:<key:\"localEspSpi\" value:\"c4796f40a943b2a7\" > parameters:<key:\"localIntegKey\" value:\"d8d443bcce2ce9542319d43f84bda47f2517db90\" > parameters:<key:\"localSAInIdx\" value:\"1756800925\" > parameters:<key:\"localSAOutIdx\" value:\"962949249\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"bed020a680bd5a2c37e8202536d0fc8d\" > parameters:<key:\"remoteEspSpi\" value:\"616bfacaf36d54c2\" > parameters:<key:\"remoteIntegKey\" value:\"704ba33abcfa181781244fb0f925fd257c512e57\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"8\" > > context:<ip_context:<src_ip_addr:\"172.100.240.5/30\" dst_ip_addr:\"172.100.240.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > destination:<id:\"a\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmQ35gmTx\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"nsmQ35gmTx/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > parameters:<key:\"workspaceNseName\" value:\"green6gqkr\" > > context:<ip_context:<src_ip_addr:\"172.100.240.5/30\" dst_ip_addr:\"172.100.240.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" >  span=1421cbfcdf7d2a39:5289dc89b1cc7387:515aab82a5bdba41:1"
time="2021-06-16T17:08:17Z" level=info msg=">><<-- eventType=\"UPDATE\" span=1421cbfcdf7d2a39:5289dc89b1cc7387:515aab82a5bdba41:1"
time="2021-06-16T17:08:17Z" level=info msg=">><<-------- response={\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"} span=1421cbfcdf7d2a39:770119d39f32c922:3c151d0402aed7cd:1"
2021/06/16 17:08:17 Reporting span 1421cbfcdf7d2a39:770119d39f32c922:3c151d0402aed7cd:1
time="2021-06-16T17:08:17Z" level=info msg="Send cross connect event: id:\"8\" payload:\"IP\" source:<id:\"8\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"f7c07c2142a3fab39e49e3030d3557c8\" > parameters:<key:\"localEspSpi\" value:\"c4796f40a943b2a7\" > parameters:<key:\"localIntegKey\" value:\"d8d443bcce2ce9542319d43f84bda47f2517db90\" > parameters:<key:\"localSAInIdx\" value:\"1756800925\" > parameters:<key:\"localSAOutIdx\" value:\"962949249\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"bed020a680bd5a2c37e8202536d0fc8d\" > parameters:<key:\"remoteEspSpi\" value:\"616bfacaf36d54c2\" > parameters:<key:\"remoteIntegKey\" value:\"704ba33abcfa181781244fb0f925fd257c512e57\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"8\" > > context:<ip_context:<src_ip_addr:\"172.100.240.5/30\" dst_ip_addr:\"172.100.240.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > destination:<id:\"a\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmQ35gmTx\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"nsmQ35gmTx/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > parameters:<key:\"workspaceNseName\" value:\"green6gqkr\" > > context:<ip_context:<src_ip_addr:\"172.100.240.5/30\" dst_ip_addr:\"172.100.240.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > " operation=CrossConnectUpdate span="1421cbfcdf7d2a39:5289dc89b1cc7387:515aab82a5bdba41:1"
time="2021-06-16T17:08:17Z" level=info msg=">><<-------- client-connection={\"ConnectionID\":\"8\",\"Request\":{\"connection\":{\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}}]},\"Xcon\":{\"id\":\"8\",\"payload\":\"IP\",\"source\":{\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"destination\":{\"id\":\"a\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmQ35gmTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmQ35gmTx/memif.sock\",\"workspace\":\"nsm-18\",\"workspaceNseName\":\"green6gqkr\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}},\"RemoteNsm\":null,\"Endpoint\":{\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}},\"ForwarderRegisteredName\":\"vppagent\",\"ConnectionState\":0,\"ForwarderState\":1,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=1421cbfcdf7d2a39:3c151d0402aed7cd:085d2b9fb93f38b2:1"
time="2021-06-16T17:08:17Z" level=info msg="==----> UpdateXcon() span:1421cbfcdf7d2a39:53bbd169ff3ed951:5289dc89b1cc7387:1"
time="2021-06-16T17:08:17Z" level=info msg=">><<---- connection={\"ConnectionID\":\"8\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=1421cbfcdf7d2a39:53bbd169ff3ed951:5289dc89b1cc7387:1"
time="2021-06-16T17:08:17Z" level=info msg=">><<---- newXCon={\"id\":\"8\",\"payload\":\"IP\",\"source\":{\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"destination\":{\"id\":\"a\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmQ35gmTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmQ35gmTx/memif.sock\",\"workspace\":\"nsm-18\",\"workspaceNseName\":\"green6gqkr\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}} span=1421cbfcdf7d2a39:53bbd169ff3ed951:5289dc89b1cc7387:1"
time="2021-06-16T17:08:17Z" level=info msg="CrossConnect-New event: &{{UPDATE map[8:0xc0002d6820] 0xc000bfc840} map[] 0xc000bfc840}"
time="2021-06-16T17:08:17Z" level=info msg="==----> CrossConnect-send-update() span:1421cbfcdf7d2a39:1673f75b14c95a21:5289dc89b1cc7387:1"
time="2021-06-16T17:08:17Z" level=info msg=">><<---- eventType=\"UPDATE\" span=1421cbfcdf7d2a39:1673f75b14c95a21:5289dc89b1cc7387:1"
time="2021-06-16T17:08:17Z" level=info msg=">><<---- msg={\"type\":1,\"cross_connects\":{\"8\":{\"id\":\"8\",\"payload\":\"IP\",\"source\":{\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"destination\":{\"id\":\"a\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmQ35gmTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmQ35gmTx/memif.sock\",\"workspace\":\"nsm-18\",\"workspaceNseName\":\"green6gqkr\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}}}} span=1421cbfcdf7d2a39:1673f75b14c95a21:5289dc89b1cc7387:1"
2021/06/16 17:08:17 Reporting span 1421cbfcdf7d2a39:1673f75b14c95a21:5289dc89b1cc7387:1
time="2021-06-16T17:08:17Z" level=info msg="resourceUpdated started: &{8 connection:<id:\"8\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"f7c07c2142a3fab39e49e3030d3557c8\" > parameters:<key:\"localEspSpi\" value:\"c4796f40a943b2a7\" > parameters:<key:\"localIntegKey\" value:\"d8d443bcce2ce9542319d43f84bda47f2517db90\" > parameters:<key:\"localSAInIdx\" value:\"1756800925\" > parameters:<key:\"localSAOutIdx\" value:\"962949249\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"bed020a680bd5a2c37e8202536d0fc8d\" > parameters:<key:\"remoteEspSpi\" value:\"616bfacaf36d54c2\" > parameters:<key:\"remoteIntegKey\" value:\"704ba33abcfa181781244fb0f925fd257c512e57\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"8\" > > context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > mechanism_preferences:<type:\"VXLAN\" parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"mtu_overhead\" value:\"50\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > > mechanism_preferences:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"f7c07c2142a3fab39e49e3030d3557c8\" > parameters:<key:\"localEspSpi\" value:\"c4796f40a943b2a7\" > parameters:<key:\"localIntegKey\" value:\"d8d443bcce2ce9542319d43f84bda47f2517db90\" > parameters:<key:\"localSAInIdx\" value:\"1756800925\" > parameters:<key:\"localSAOutIdx\" value:\"962949249\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"bed020a680bd5a2c37e8202536d0fc8d\" > parameters:<key:\"remoteEspSpi\" value:\"616bfacaf36d54c2\" > parameters:<key:\"remoteIntegKey\" value:\"704ba33abcfa181781244fb0f925fd257c512e57\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"8\" > >  id:\"8\" payload:\"IP\" source:<id:\"8\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"f7c07c2142a3fab39e49e3030d3557c8\" > parameters:<key:\"localEspSpi\" value:\"c4796f40a943b2a7\" > parameters:<key:\"localIntegKey\" value:\"d8d443bcce2ce9542319d43f84bda47f2517db90\" > parameters:<key:\"localSAInIdx\" value:\"1756800925\" > parameters:<key:\"localSAOutIdx\" value:\"962949249\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"bed020a680bd5a2c37e8202536d0fc8d\" > parameters:<key:\"remoteEspSpi\" value:\"616bfacaf36d54c2\" > parameters:<key:\"remoteIntegKey\" value:\"704ba33abcfa181781244fb0f925fd257c512e57\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"8\" > > context:<ip_context:<src_ip_addr:\"172.100.240.5/30\" dst_ip_addr:\"172.100.240.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > destination:<id:\"a\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmQ35gmTx\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"nsmQ35gmTx/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > parameters:<key:\"workspaceNseName\" value:\"green6gqkr\" > > context:<ip_context:<src_ip_addr:\"172.100.240.5/30\" dst_ip_addr:\"172.100.240.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" >  <nil> network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6gqkr\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  vppagent 0 1 0xc0009f3c80 0xc0000b4760}"
time="2021-06-16T17:08:17Z" level=info msg="resourceUpdated finished: &{8 connection:<id:\"8\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"f7c07c2142a3fab39e49e3030d3557c8\" > parameters:<key:\"localEspSpi\" value:\"c4796f40a943b2a7\" > parameters:<key:\"localIntegKey\" value:\"d8d443bcce2ce9542319d43f84bda47f2517db90\" > parameters:<key:\"localSAInIdx\" value:\"1756800925\" > parameters:<key:\"localSAOutIdx\" value:\"962949249\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"bed020a680bd5a2c37e8202536d0fc8d\" > parameters:<key:\"remoteEspSpi\" value:\"616bfacaf36d54c2\" > parameters:<key:\"remoteIntegKey\" value:\"704ba33abcfa181781244fb0f925fd257c512e57\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"8\" > > context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > mechanism_preferences:<type:\"VXLAN\" parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"mtu_overhead\" value:\"50\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > > mechanism_preferences:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"f7c07c2142a3fab39e49e3030d3557c8\" > parameters:<key:\"localEspSpi\" value:\"c4796f40a943b2a7\" > parameters:<key:\"localIntegKey\" value:\"d8d443bcce2ce9542319d43f84bda47f2517db90\" > parameters:<key:\"localSAInIdx\" value:\"1756800925\" > parameters:<key:\"localSAOutIdx\" value:\"962949249\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"bed020a680bd5a2c37e8202536d0fc8d\" > parameters:<key:\"remoteEspSpi\" value:\"616bfacaf36d54c2\" > parameters:<key:\"remoteIntegKey\" value:\"704ba33abcfa181781244fb0f925fd257c512e57\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"8\" > >  id:\"8\" payload:\"IP\" source:<id:\"8\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"f7c07c2142a3fab39e49e3030d3557c8\" > parameters:<key:\"localEspSpi\" value:\"c4796f40a943b2a7\" > parameters:<key:\"localIntegKey\" value:\"d8d443bcce2ce9542319d43f84bda47f2517db90\" > parameters:<key:\"localSAInIdx\" value:\"1756800925\" > parameters:<key:\"localSAOutIdx\" value:\"962949249\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"bed020a680bd5a2c37e8202536d0fc8d\" > parameters:<key:\"remoteEspSpi\" value:\"616bfacaf36d54c2\" > parameters:<key:\"remoteIntegKey\" value:\"704ba33abcfa181781244fb0f925fd257c512e57\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"8\" > > context:<ip_context:<src_ip_addr:\"172.100.240.5/30\" dst_ip_addr:\"172.100.240.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > destination:<id:\"a\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmQ35gmTx\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"nsmQ35gmTx/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > parameters:<key:\"workspaceNseName\" value:\"green6gqkr\" > > context:<ip_context:<src_ip_addr:\"172.100.240.5/30\" dst_ip_addr:\"172.100.240.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" >  <nil> network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6gqkr\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  vppagent 0 1 0xc0009f3c80 0xc0000b4760}"
time="2021-06-16T17:08:17Z" level=info msg=">><<------ response={\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"} span=1421cbfcdf7d2a39:3c151d0402aed7cd:085d2b9fb93f38b2:1"
2021/06/16 17:08:17 Reporting span 1421cbfcdf7d2a39:3c151d0402aed7cd:085d2b9fb93f38b2:1
time="2021-06-16T17:08:17Z" level=info msg=">><<---- response={\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"} span=1421cbfcdf7d2a39:085d2b9fb93f38b2:6c9eab9f60abd054:1"
2021/06/16 17:08:17 Reporting span 1421cbfcdf7d2a39:085d2b9fb93f38b2:6c9eab9f60abd054:1
time="2021-06-16T17:08:17Z" level=info msg=">><<-- response={\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"} span=1421cbfcdf7d2a39:6c9eab9f60abd054:515aab82a5bdba41:1"
2021/06/16 17:08:17 Reporting span 1421cbfcdf7d2a39:6c9eab9f60abd054:515aab82a5bdba41:1
time="2021-06-16T17:08:17Z" level=info msg=">><<-- response={\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"} span=1421cbfcdf7d2a39:515aab82a5bdba41:67254c65a2eb6722:1"
2021/06/16 17:08:17 Reporting span 1421cbfcdf7d2a39:515aab82a5bdba41:67254c65a2eb6722:1
time="2021-06-16T17:08:17Z" level=info msg="==--------> ClientConnectionUpdated() span:1421cbfcdf7d2a39:0bf7dfc2e12c9568:3c151d0402aed7cd:1"
time="2021-06-16T17:08:17Z" level=info msg=">><<-------- new={\"ConnectionID\":\"8\",\"Request\":{\"connection\":{\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}}]},\"Xcon\":{\"id\":\"8\",\"payload\":\"IP\",\"source\":{\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"destination\":{\"id\":\"a\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmQ35gmTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmQ35gmTx/memif.sock\",\"workspace\":\"nsm-18\",\"workspaceNseName\":\"green6gqkr\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}},\"RemoteNsm\":null,\"Endpoint\":{\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}},\"ForwarderRegisteredName\":\"vppagent\",\"ConnectionState\":0,\"ForwarderState\":1,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=1421cbfcdf7d2a39:0bf7dfc2e12c9568:3c151d0402aed7cd:1"
time="2021-06-16T17:08:17Z" level=info msg=">><<-------- old={\"ConnectionID\":\"8\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=1421cbfcdf7d2a39:0bf7dfc2e12c9568:3c151d0402aed7cd:1"
2021/06/16 17:08:17 Reporting span 1421cbfcdf7d2a39:0bf7dfc2e12c9568:3c151d0402aed7cd:1
time="2021-06-16T17:08:17Z" level=info msg="RemoteConnection-New event: &{{UPDATE map[8:0xc000a08a00] 0xc0004ca150}}"
time="2021-06-16T17:08:17Z" level=info msg="==------> RemoteConnection-send-update() span:1421cbfcdf7d2a39:729c3da6defbf9e7:085d2b9fb93f38b2:1"
time="2021-06-16T17:08:17Z" level=info msg=">><<------ eventType=\"UPDATE\" span=1421cbfcdf7d2a39:729c3da6defbf9e7:085d2b9fb93f38b2:1"
time="2021-06-16T17:08:17Z" level=info msg=">><<------ msg={\"type\":1,\"connections\":{\"8\":{\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}}} span=1421cbfcdf7d2a39:729c3da6defbf9e7:085d2b9fb93f38b2:1"
2021/06/16 17:08:17 Reporting span 1421cbfcdf7d2a39:729c3da6defbf9e7:085d2b9fb93f38b2:1
time="2021-06-16T17:08:17Z" level=info msg="resourceUpdated started: &{8 connection:<id:\"8\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"f7c07c2142a3fab39e49e3030d3557c8\" > parameters:<key:\"localEspSpi\" value:\"c4796f40a943b2a7\" > parameters:<key:\"localIntegKey\" value:\"d8d443bcce2ce9542319d43f84bda47f2517db90\" > parameters:<key:\"localSAInIdx\" value:\"1756800925\" > parameters:<key:\"localSAOutIdx\" value:\"962949249\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"bed020a680bd5a2c37e8202536d0fc8d\" > parameters:<key:\"remoteEspSpi\" value:\"616bfacaf36d54c2\" > parameters:<key:\"remoteIntegKey\" value:\"704ba33abcfa181781244fb0f925fd257c512e57\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"8\" > > context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > mechanism_preferences:<type:\"VXLAN\" parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"mtu_overhead\" value:\"50\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > > mechanism_preferences:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"f7c07c2142a3fab39e49e3030d3557c8\" > parameters:<key:\"localEspSpi\" value:\"c4796f40a943b2a7\" > parameters:<key:\"localIntegKey\" value:\"d8d443bcce2ce9542319d43f84bda47f2517db90\" > parameters:<key:\"localSAInIdx\" value:\"1756800925\" > parameters:<key:\"localSAOutIdx\" value:\"962949249\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"bed020a680bd5a2c37e8202536d0fc8d\" > parameters:<key:\"remoteEspSpi\" value:\"616bfacaf36d54c2\" > parameters:<key:\"remoteIntegKey\" value:\"704ba33abcfa181781244fb0f925fd257c512e57\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"8\" > >  id:\"8\" payload:\"IP\" source:<id:\"8\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"f7c07c2142a3fab39e49e3030d3557c8\" > parameters:<key:\"localEspSpi\" value:\"c4796f40a943b2a7\" > parameters:<key:\"localIntegKey\" value:\"d8d443bcce2ce9542319d43f84bda47f2517db90\" > parameters:<key:\"localSAInIdx\" value:\"1756800925\" > parameters:<key:\"localSAOutIdx\" value:\"962949249\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"bed020a680bd5a2c37e8202536d0fc8d\" > parameters:<key:\"remoteEspSpi\" value:\"616bfacaf36d54c2\" > parameters:<key:\"remoteIntegKey\" value:\"704ba33abcfa181781244fb0f925fd257c512e57\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"8\" > > context:<ip_context:<src_ip_addr:\"172.100.240.5/30\" dst_ip_addr:\"172.100.240.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > destination:<id:\"a\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmQ35gmTx\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"nsmQ35gmTx/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > parameters:<key:\"workspaceNseName\" value:\"green6gqkr\" > > context:<ip_context:<src_ip_addr:\"172.100.240.5/30\" dst_ip_addr:\"172.100.240.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" >  <nil> network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6gqkr\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  vppagent 0 1 0xc0009f3c80 0xc0000b4760}"
time="2021-06-16T17:08:17Z" level=info msg="RemoteConnection-New event: &{{UPDATE map[8:0xc000c09e80] 0xc000a890e0}}"
time="2021-06-16T17:08:17Z" level=info msg="==----------> RemoteConnection-send-update() span:1421cbfcdf7d2a39:0d78714a00dc4d7a:0bf7dfc2e12c9568:1"
time="2021-06-16T17:08:17Z" level=info msg=">><<---------- eventType=\"UPDATE\" span=1421cbfcdf7d2a39:0d78714a00dc4d7a:0bf7dfc2e12c9568:1"
time="2021-06-16T17:08:17Z" level=info msg="==------> ClientConnectionUpdated() span:1421cbfcdf7d2a39:23291adc81482843:53bbd169ff3ed951:1"
time="2021-06-16T17:08:17Z" level=info msg=">><<---------- msg={\"type\":1,\"connections\":{\"8\":{\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}}} span=1421cbfcdf7d2a39:0d78714a00dc4d7a:0bf7dfc2e12c9568:1"
2021/06/16 17:08:17 Reporting span 1421cbfcdf7d2a39:0d78714a00dc4d7a:0bf7dfc2e12c9568:1
time="2021-06-16T17:08:17Z" level=info msg="resourceUpdated finished: &{8 connection:<id:\"8\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"f7c07c2142a3fab39e49e3030d3557c8\" > parameters:<key:\"localEspSpi\" value:\"c4796f40a943b2a7\" > parameters:<key:\"localIntegKey\" value:\"d8d443bcce2ce9542319d43f84bda47f2517db90\" > parameters:<key:\"localSAInIdx\" value:\"1756800925\" > parameters:<key:\"localSAOutIdx\" value:\"962949249\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"bed020a680bd5a2c37e8202536d0fc8d\" > parameters:<key:\"remoteEspSpi\" value:\"616bfacaf36d54c2\" > parameters:<key:\"remoteIntegKey\" value:\"704ba33abcfa181781244fb0f925fd257c512e57\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"8\" > > context:<ip_context:<src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > mechanism_preferences:<type:\"VXLAN\" parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"mtu_overhead\" value:\"50\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > > mechanism_preferences:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"f7c07c2142a3fab39e49e3030d3557c8\" > parameters:<key:\"localEspSpi\" value:\"c4796f40a943b2a7\" > parameters:<key:\"localIntegKey\" value:\"d8d443bcce2ce9542319d43f84bda47f2517db90\" > parameters:<key:\"localSAInIdx\" value:\"1756800925\" > parameters:<key:\"localSAOutIdx\" value:\"962949249\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"bed020a680bd5a2c37e8202536d0fc8d\" > parameters:<key:\"remoteEspSpi\" value:\"616bfacaf36d54c2\" > parameters:<key:\"remoteIntegKey\" value:\"704ba33abcfa181781244fb0f925fd257c512e57\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"8\" > >  id:\"8\" payload:\"IP\" source:<id:\"8\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"f7c07c2142a3fab39e49e3030d3557c8\" > parameters:<key:\"localEspSpi\" value:\"c4796f40a943b2a7\" > parameters:<key:\"localIntegKey\" value:\"d8d443bcce2ce9542319d43f84bda47f2517db90\" > parameters:<key:\"localSAInIdx\" value:\"1756800925\" > parameters:<key:\"localSAOutIdx\" value:\"962949249\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"bed020a680bd5a2c37e8202536d0fc8d\" > parameters:<key:\"remoteEspSpi\" value:\"616bfacaf36d54c2\" > parameters:<key:\"remoteIntegKey\" value:\"704ba33abcfa181781244fb0f925fd257c512e57\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"8\" > > context:<ip_context:<src_ip_addr:\"172.100.240.5/30\" dst_ip_addr:\"172.100.240.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > destination:<id:\"a\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmQ35gmTx\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"nsmQ35gmTx/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > parameters:<key:\"workspaceNseName\" value:\"green6gqkr\" > > context:<ip_context:<src_ip_addr:\"172.100.240.5/30\" dst_ip_addr:\"172.100.240.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" >  <nil> network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6gqkr\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  vppagent 0 1 0xc0009f3c80 0xc0000b4760}"
2021/06/16 17:08:17 Reporting span 1421cbfcdf7d2a39:53bbd169ff3ed951:5289dc89b1cc7387:1
2021/06/16 17:08:17 Reporting span 1421cbfcdf7d2a39:5289dc89b1cc7387:515aab82a5bdba41:1
time="2021-06-16T17:08:17Z" level=info msg=">><<------ new={\"ConnectionID\":\"8\",\"Request\":{\"connection\":{\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}}]},\"Xcon\":{\"id\":\"8\",\"payload\":\"IP\",\"source\":{\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"destination\":{\"id\":\"a\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmQ35gmTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmQ35gmTx/memif.sock\",\"workspace\":\"nsm-18\",\"workspaceNseName\":\"green6gqkr\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}},\"RemoteNsm\":null,\"Endpoint\":{\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}},\"ForwarderRegisteredName\":\"vppagent\",\"ConnectionState\":0,\"ForwarderState\":1,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=1421cbfcdf7d2a39:23291adc81482843:53bbd169ff3ed951:1"
time="2021-06-16T17:08:17Z" level=info msg=">><<------ old={\"ConnectionID\":\"8\",\"Request\":{\"connection\":{\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"mechanism_preferences\":[{\"type\":\"VXLAN\",\"parameters\":{\"ext_src_ip\":\"172.17.0.4\",\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.3\"}},{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}}]},\"Xcon\":{\"id\":\"8\",\"payload\":\"IP\",\"source\":{\"id\":\"8\",\"network_service\":\"green\",\"mechanism\":{\"type\":\"IPSEC\",\"parameters\":{\"dst_ip\":\"172.17.0.4\",\"ext_src_ip\":\"172.17.0.4\",\"localEncrKey\":\"f7c07c2142a3fab39e49e3030d3557c8\",\"localEspSpi\":\"c4796f40a943b2a7\",\"localIntegKey\":\"d8d443bcce2ce9542319d43f84bda47f2517db90\",\"localSAInIdx\":\"1756800925\",\"localSAOutIdx\":\"962949249\",\"mtu_overhead\":\"70\",\"remoteEncrKey\":\"bed020a680bd5a2c37e8202536d0fc8d\",\"remoteEspSpi\":\"616bfacaf36d54c2\",\"remoteIntegKey\":\"704ba33abcfa181781244fb0f925fd257c512e57\",\"src_ip\":\"172.17.0.3\",\"vni\":\"8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-2-control-plane\"},{\"name\":\"kind-3-control-plane@172.17.0.4:5001\"},{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"},\"destination\":{\"id\":\"a\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmQ35gmTx\",\"netnsInode\":\"4026536032\",\"socketfile\":\"nsmQ35gmTx/memif.sock\",\"workspace\":\"nsm-18\",\"workspaceNseName\":\"green6gqkr\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.240.5/30\",\"dst_ip_addr\":\"172.100.240.6/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"src_routes\":[{\"prefix\":\"172.100.248.0/22\"}],\"dst_routes\":[{\"prefix\":\"172.100.240.0/22\"}]}},\"labels\":{\"\":\"\",\"ucnf/peerName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"vl3Nse/nseSource/endpointName\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]},\"network_service_endpoint_name\":\"green6gqkr\"}},\"RemoteNsm\":null,\"Endpoint\":{\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}},\"ForwarderRegisteredName\":\"vppagent\",\"ConnectionState\":0,\"ForwarderState\":1,\"Span\":{},\"Monitor\":{\"MonitorServer\":{\"Server\":{}}}} span=1421cbfcdf7d2a39:23291adc81482843:53bbd169ff3ed951:1"
2021/06/16 17:08:17 Reporting span 1421cbfcdf7d2a39:23291adc81482843:53bbd169ff3ed951:1
time="2021-06-16T17:08:21Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:08:22Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:08:32Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:08:36Z" level=info msg=">><<-- GRPC->/nsmdapi.NSMD/RequestClientConnection()=\"\" span=4a21312687909c8c:00c8628923924d64:198fd9c4738ba6a9:1"
time="2021-06-16T17:08:36Z" level=info msg=">><<-- request={\"workspace\":\"nsm-8\"} span=4a21312687909c8c:00c8628923924d64:198fd9c4738ba6a9:1"
time="2021-06-16T17:08:36Z" level=info msg="==--> RequestClientConnection() span:4a21312687909c8c:27debf29ff64c154:00c8628923924d64:1"
time="2021-06-16T17:08:36Z" level=info msg="Requested client connection to nsmd : workspace:\"nsm-8\" " operation=RequestClientConnection span="4a21312687909c8c:27debf29ff64c154:00c8628923924d64:1"
time="2021-06-16T17:08:36Z" level=info msg="==----> Workspace:nsm-8() span:4a21312687909c8c:1dec3934e8f20c17:27debf29ff64c154:1"
time="2021-06-16T17:08:36Z" level=info msg="Creating new workspace: nsm-8" operation="Workspace:nsm-8" span="4a21312687909c8c:1dec3934e8f20c17:27debf29ff64c154:1"
time="2021-06-16T17:08:36Z" level=info msg=">><<---- restore=false span=4a21312687909c8c:1dec3934e8f20c17:27debf29ff64c154:1"
time="2021-06-16T17:08:36Z" level=info msg="==------> clearContents() span:4a21312687909c8c:040e383e88dd699f:1dec3934e8f20c17:1"
time="2021-06-16T17:08:36Z" level=info msg="No exist folder /var/lib/networkservicemesh/nsm-8" operation=clearContents span="4a21312687909c8c:040e383e88dd699f:1dec3934e8f20c17:1"
2021/06/16 17:08:36 Reporting span 4a21312687909c8c:040e383e88dd699f:1dec3934e8f20c17:1
time="2021-06-16T17:08:36Z" level=info msg="Creating new directory: /var/lib/networkservicemesh/nsm-8" operation="Workspace:nsm-8" span="4a21312687909c8c:1dec3934e8f20c17:27debf29ff64c154:1"
time="2021-06-16T17:08:36Z" level=info msg="Creating new listener on: /var/lib/networkservicemesh/nsm-8/nsm.server.io.sock" operation="Workspace:nsm-8" span="4a21312687909c8c:1dec3934e8f20c17:27debf29ff64c154:1"
time="2021-06-16T17:08:36Z" level=info msg="Creating new NetworkServiceRegistryServer" operation="Workspace:nsm-8" span="4a21312687909c8c:1dec3934e8f20c17:27debf29ff64c154:1"
time="2021-06-16T17:08:36Z" level=info msg="Creating new MonitorConnectionServer" operation="Workspace:nsm-8" span="4a21312687909c8c:1dec3934e8f20c17:27debf29ff64c154:1"
time="2021-06-16T17:08:36Z" level=info msg="Creating new NetworkServiceServer" operation="Workspace:nsm-8" span="4a21312687909c8c:1dec3934e8f20c17:27debf29ff64c154:1"
time="2021-06-16T17:08:36Z" level=info msg="LocalConnection - Serve starting..."
time="2021-06-16T17:08:36Z" level=info msg="Reading excluded prefixes config file: /var/lib/networkservicemesh/config/excluded_prefixes.yaml"
time="2021-06-16T17:08:36Z" level=info msg="Excluded prefixes: []"
time="2021-06-16T17:08:36Z" level=info msg="Creating new GRPC MonitorServer" operation="Workspace:nsm-8" span="4a21312687909c8c:1dec3934e8f20c17:27debf29ff64c154:1"
time="2021-06-16T17:08:36Z" level=info msg="==------> NewServer() span:4a21312687909c8c:21f47b18bca86a75:1dec3934e8f20c17:1"
time="2021-06-16T17:08:36Z" level=info msg="GRPC.NewServer with open tracing enabled" operation=NewServer span="4a21312687909c8c:21f47b18bca86a75:1dec3934e8f20c17:1"
time="2021-06-16T17:08:36Z" level=info msg="==--------> GetCertificate() span:4a21312687909c8c:031ee2e99d0ec525:21f47b18bca86a75:1"
time="2021-06-16T17:08:36Z" level=info msg="SPIRE -- GetX509SVID:&{spiffe://member2.com/wcm-nsmgr [0xc0006b5700 0xc000177700] 0xc0004025a0}"
time="2021-06-16T17:08:36Z" level=info msg="Default trust domain:member2.com"
time="2021-06-16T17:08:36Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:08:36Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:36Z" level=info msg="Server will be started in secure mode using tlsConfig:&{<nil> <nil> [] map[] 0x97a4c0 <nil> <nil> 0x97a5c0 <nil> <nil> []  RequireAnyClientCert <nil> false [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
2021/06/16 17:08:36 Reporting span 4a21312687909c8c:031ee2e99d0ec525:21f47b18bca86a75:1
2021/06/16 17:08:36 Reporting span 4a21312687909c8c:21f47b18bca86a75:1dec3934e8f20c17:1
time="2021-06-16T17:08:36Z" level=info msg="Registering NetworkServiceRegistryServer with registerServer" operation="Workspace:nsm-8" span="4a21312687909c8c:1dec3934e8f20c17:27debf29ff64c154:1"
time="2021-06-16T17:08:36Z" level=info msg="Registering NetworkServiceDiscoveryServer with discoveryServer" operation="Workspace:nsm-8" span="4a21312687909c8c:1dec3934e8f20c17:27debf29ff64c154:1"
time="2021-06-16T17:08:36Z" level=info msg="Registering NetworkServiceServer with registerServer" operation="Workspace:nsm-8" span="4a21312687909c8c:1dec3934e8f20c17:27debf29ff64c154:1"
time="2021-06-16T17:08:36Z" level=info msg="Registering MonitorConnectionServer with registerServer" operation="Workspace:nsm-8" span="4a21312687909c8c:1dec3934e8f20c17:27debf29ff64c154:1"
time="2021-06-16T17:08:36Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm-8/nsm.server.io.sock"
time="2021-06-16T17:08:36Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:08:36Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0009f22c0 {member1.com}:0xc0009f2340 {member2.com}:0xc0009f2240]}"
time="2021-06-16T17:08:36Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:08:36Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:36Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:08:36Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:08:36Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:36Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:08:36Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:08:36Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:36Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:08:36Z" level=info msg="Found 3 tlsconfigs. [0xc000ac8000 0xc000ac8300 0xc000ac8780]"
time="2021-06-16T17:08:36Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:36Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:08:37Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:08:41Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:41Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:43Z" level=info msg=">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\"\" span=4ce1b083913d38d7:6e77e8aa08a4d893:294e7925889e848f:1"
time="2021-06-16T17:08:43Z" level=info msg=">><<-- request={} span=4ce1b083913d38d7:6e77e8aa08a4d893:294e7925889e848f:1"
time="2021-06-16T17:08:43Z" level=info msg=">><<-- response={\"workspace\":[\"nsm-18\",\"nsm-29\"]} span=4ce1b083913d38d7:6e77e8aa08a4d893:294e7925889e848f:1"
2021/06/16 17:08:43 Reporting span 4ce1b083913d38d7:6e77e8aa08a4d893:294e7925889e848f:1
time="2021-06-16T17:08:46Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:46Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:46Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:46Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:46Z" level=info msg="grpcserver for workspace &{name:nsm-8 listener:0xc000389320 registryServer:0xc0003893e0 networkServiceServer:0xc000390900 monitorConnectionServer:0xc000389480 grpcServer:0xc0001a1180 Mutex:{state:0 sema:0} state:2 locationProvider:0xc0002924e0 localRegistry:0xc0002a4c40 ctx:0xc000b3b530 discoveryServer:0xc000affbe0} is operational" operation="Workspace:nsm-8" span="4a21312687909c8c:1dec3934e8f20c17:27debf29ff64c154:1"
time="2021-06-16T17:08:46Z" level=info msg="Created new workspace: &{name:nsm-8 listener:0xc000389320 registryServer:0xc0003893e0 networkServiceServer:0xc000390900 monitorConnectionServer:0xc000389480 grpcServer:0xc0001a1180 Mutex:{state:0 sema:0} state:2 locationProvider:0xc0002924e0 localRegistry:0xc0002a4c40 ctx:0xc000b3b530 discoveryServer:0xc000affbe0}" operation="Workspace:nsm-8" span="4a21312687909c8c:1dec3934e8f20c17:27debf29ff64c154:1"
time="2021-06-16T17:08:46Z" level=info msg="==------> cleanup() span:4a21312687909c8c:11329fca06a54f2f:1dec3934e8f20c17:1"
2021/06/16 17:08:46 Reporting span 4a21312687909c8c:11329fca06a54f2f:1dec3934e8f20c17:1
2021/06/16 17:08:46 Reporting span 4a21312687909c8c:1dec3934e8f20c17:27debf29ff64c154:1
time="2021-06-16T17:08:46Z" level=info msg="New workspace created: &{name:nsm-8 listener:0xc000389320 registryServer:0xc0003893e0 networkServiceServer:0xc000390900 monitorConnectionServer:0xc000389480 grpcServer:0xc0001a1180 Mutex:{state:0 sema:0} state:2 locationProvider:0xc0002924e0 localRegistry:0xc0002a4c40 ctx:0xc000b3b530 discoveryServer:0xc000affbe0}" operation=RequestClientConnection span="4a21312687909c8c:27debf29ff64c154:00c8628923924d64:1"
time="2021-06-16T17:08:46Z" level=info msg=">><<-- ClientConnectionReply={\"workspace\":\"nsm-8\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=4a21312687909c8c:27debf29ff64c154:00c8628923924d64:1"
2021/06/16 17:08:46 Reporting span 4a21312687909c8c:27debf29ff64c154:00c8628923924d64:1
time="2021-06-16T17:08:46Z" level=info msg=">><<-- response={\"workspace\":\"nsm-8\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=4a21312687909c8c:00c8628923924d64:198fd9c4738ba6a9:1"
2021/06/16 17:08:46 Reporting span 4a21312687909c8c:00c8628923924d64:198fd9c4738ba6a9:1
time="2021-06-16T17:08:47Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:08:51Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:08:52Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:08:56Z" level=info msg=">><<-- GRPC->/nsmdapi.NSMD/RequestClientConnection()=\"\" span=68aa25d3d0dfdf40:7ca0d650a024a053:099f77c2e8181ba1:1"
time="2021-06-16T17:08:56Z" level=info msg=">><<-- request={\"workspace\":\"nsm-8\"} span=68aa25d3d0dfdf40:7ca0d650a024a053:099f77c2e8181ba1:1"
time="2021-06-16T17:08:56Z" level=info msg="==--> RequestClientConnection() span:68aa25d3d0dfdf40:51755dd753ff0fe0:7ca0d650a024a053:1"
time="2021-06-16T17:08:56Z" level=info msg="Requested client connection to nsmd : workspace:\"nsm-8\" " operation=RequestClientConnection span="68aa25d3d0dfdf40:51755dd753ff0fe0:7ca0d650a024a053:1"
time="2021-06-16T17:08:56Z" level=info msg="workspace nsm-8 already exists. reusing it." operation=RequestClientConnection span="68aa25d3d0dfdf40:51755dd753ff0fe0:7ca0d650a024a053:1"
time="2021-06-16T17:08:56Z" level=info msg=">><<-- ClientConnectionReply={\"workspace\":\"nsm-8\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=68aa25d3d0dfdf40:51755dd753ff0fe0:7ca0d650a024a053:1"
2021/06/16 17:08:56 Reporting span 68aa25d3d0dfdf40:51755dd753ff0fe0:7ca0d650a024a053:1
time="2021-06-16T17:08:56Z" level=info msg=">><<-- response={\"workspace\":\"nsm-8\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=68aa25d3d0dfdf40:7ca0d650a024a053:099f77c2e8181ba1:1"
2021/06/16 17:08:56 Reporting span 68aa25d3d0dfdf40:7ca0d650a024a053:099f77c2e8181ba1:1
time="2021-06-16T17:09:02Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:09:06Z" level=info msg=">><<-- GRPC->/nsmdapi.NSMD/RequestClientConnection()=\"\" span=7d712ef808961694:4ab90fe3e29a9254:79b5df5789cc33e9:1"
time="2021-06-16T17:09:06Z" level=info msg=">><<-- request={\"workspace\":\"nsm-8\"} span=7d712ef808961694:4ab90fe3e29a9254:79b5df5789cc33e9:1"
time="2021-06-16T17:09:06Z" level=info msg="==--> RequestClientConnection() span:7d712ef808961694:5ca875df53f72885:4ab90fe3e29a9254:1"
time="2021-06-16T17:09:06Z" level=info msg="Requested client connection to nsmd : workspace:\"nsm-8\" " operation=RequestClientConnection span="7d712ef808961694:5ca875df53f72885:4ab90fe3e29a9254:1"
time="2021-06-16T17:09:06Z" level=info msg="workspace nsm-8 already exists. reusing it." operation=RequestClientConnection span="7d712ef808961694:5ca875df53f72885:4ab90fe3e29a9254:1"
time="2021-06-16T17:09:06Z" level=info msg=">><<-- ClientConnectionReply={\"workspace\":\"nsm-8\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=7d712ef808961694:5ca875df53f72885:4ab90fe3e29a9254:1"
2021/06/16 17:09:06 Reporting span 7d712ef808961694:5ca875df53f72885:4ab90fe3e29a9254:1
time="2021-06-16T17:09:06Z" level=info msg=">><<-- response={\"workspace\":\"nsm-8\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=7d712ef808961694:4ab90fe3e29a9254:79b5df5789cc33e9:1"
2021/06/16 17:09:06 Reporting span 7d712ef808961694:4ab90fe3e29a9254:79b5df5789cc33e9:1
time="2021-06-16T17:09:06Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:09:07Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:09:16Z" level=info msg=">><<-- GRPC->/nsmdapi.NSMD/RequestClientConnection()=\"\" span=2cc0479bbdbe686c:4d5f68f97a5c03e5:52e112e82c2ae70f:1"
time="2021-06-16T17:09:16Z" level=info msg=">><<-- request={\"workspace\":\"nsm-26\"} span=2cc0479bbdbe686c:4d5f68f97a5c03e5:52e112e82c2ae70f:1"
time="2021-06-16T17:09:16Z" level=info msg="==--> RequestClientConnection() span:2cc0479bbdbe686c:587ac34312cb9f1d:4d5f68f97a5c03e5:1"
time="2021-06-16T17:09:16Z" level=info msg="Requested client connection to nsmd : workspace:\"nsm-26\" " operation=RequestClientConnection span="2cc0479bbdbe686c:587ac34312cb9f1d:4d5f68f97a5c03e5:1"
time="2021-06-16T17:09:16Z" level=info msg="==----> Workspace:nsm-26() span:2cc0479bbdbe686c:23e4e617723777c4:587ac34312cb9f1d:1"
time="2021-06-16T17:09:16Z" level=info msg="Creating new workspace: nsm-26" operation="Workspace:nsm-26" span="2cc0479bbdbe686c:23e4e617723777c4:587ac34312cb9f1d:1"
time="2021-06-16T17:09:16Z" level=info msg=">><<---- restore=false span=2cc0479bbdbe686c:23e4e617723777c4:587ac34312cb9f1d:1"
time="2021-06-16T17:09:16Z" level=info msg="==------> clearContents() span:2cc0479bbdbe686c:2c264f48ad890d0d:23e4e617723777c4:1"
time="2021-06-16T17:09:16Z" level=info msg="No exist folder /var/lib/networkservicemesh/nsm-26" operation=clearContents span="2cc0479bbdbe686c:2c264f48ad890d0d:23e4e617723777c4:1"
2021/06/16 17:09:16 Reporting span 2cc0479bbdbe686c:2c264f48ad890d0d:23e4e617723777c4:1
time="2021-06-16T17:09:16Z" level=info msg="Creating new directory: /var/lib/networkservicemesh/nsm-26" operation="Workspace:nsm-26" span="2cc0479bbdbe686c:23e4e617723777c4:587ac34312cb9f1d:1"
time="2021-06-16T17:09:16Z" level=info msg="Creating new listener on: /var/lib/networkservicemesh/nsm-26/nsm.server.io.sock" operation="Workspace:nsm-26" span="2cc0479bbdbe686c:23e4e617723777c4:587ac34312cb9f1d:1"
time="2021-06-16T17:09:16Z" level=info msg="Creating new NetworkServiceRegistryServer" operation="Workspace:nsm-26" span="2cc0479bbdbe686c:23e4e617723777c4:587ac34312cb9f1d:1"
time="2021-06-16T17:09:16Z" level=info msg="Creating new MonitorConnectionServer" operation="Workspace:nsm-26" span="2cc0479bbdbe686c:23e4e617723777c4:587ac34312cb9f1d:1"
time="2021-06-16T17:09:16Z" level=info msg="Creating new NetworkServiceServer" operation="Workspace:nsm-26" span="2cc0479bbdbe686c:23e4e617723777c4:587ac34312cb9f1d:1"
time="2021-06-16T17:09:16Z" level=info msg="Reading excluded prefixes config file: /var/lib/networkservicemesh/config/excluded_prefixes.yaml"
time="2021-06-16T17:09:16Z" level=info msg="Excluded prefixes: []"
time="2021-06-16T17:09:16Z" level=info msg="Creating new GRPC MonitorServer" operation="Workspace:nsm-26" span="2cc0479bbdbe686c:23e4e617723777c4:587ac34312cb9f1d:1"
time="2021-06-16T17:09:16Z" level=info msg="==------> NewServer() span:2cc0479bbdbe686c:02e71e5d88c396d0:23e4e617723777c4:1"
time="2021-06-16T17:09:16Z" level=info msg="GRPC.NewServer with open tracing enabled" operation=NewServer span="2cc0479bbdbe686c:02e71e5d88c396d0:23e4e617723777c4:1"
time="2021-06-16T17:09:16Z" level=info msg="==--------> GetCertificate() span:2cc0479bbdbe686c:5f1bc4ee540c7d25:02e71e5d88c396d0:1"
time="2021-06-16T17:09:16Z" level=info msg="LocalConnection - Serve starting..."
time="2021-06-16T17:09:16Z" level=info msg="SPIRE -- GetX509SVID:&{spiffe://member2.com/wcm-nsmgr [0xc00098db80 0xc00098e100] 0xc00070f950}"
time="2021-06-16T17:09:16Z" level=info msg="Default trust domain:member2.com"
time="2021-06-16T17:09:16Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:09:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:16Z" level=info msg="Server will be started in secure mode using tlsConfig:&{<nil> <nil> [] map[] 0x97a4c0 <nil> <nil> 0x97a5c0 <nil> <nil> []  RequireAnyClientCert <nil> false [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
2021/06/16 17:09:16 Reporting span 2cc0479bbdbe686c:5f1bc4ee540c7d25:02e71e5d88c396d0:1
2021/06/16 17:09:16 Reporting span 2cc0479bbdbe686c:02e71e5d88c396d0:23e4e617723777c4:1
time="2021-06-16T17:09:16Z" level=info msg="Registering NetworkServiceRegistryServer with registerServer" operation="Workspace:nsm-26" span="2cc0479bbdbe686c:23e4e617723777c4:587ac34312cb9f1d:1"
time="2021-06-16T17:09:16Z" level=info msg="Registering NetworkServiceDiscoveryServer with discoveryServer" operation="Workspace:nsm-26" span="2cc0479bbdbe686c:23e4e617723777c4:587ac34312cb9f1d:1"
time="2021-06-16T17:09:16Z" level=info msg="Registering NetworkServiceServer with registerServer" operation="Workspace:nsm-26" span="2cc0479bbdbe686c:23e4e617723777c4:587ac34312cb9f1d:1"
time="2021-06-16T17:09:16Z" level=info msg="Registering MonitorConnectionServer with registerServer" operation="Workspace:nsm-26" span="2cc0479bbdbe686c:23e4e617723777c4:587ac34312cb9f1d:1"
time="2021-06-16T17:09:16Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm-26/nsm.server.io.sock"
time="2021-06-16T17:09:16Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:09:16Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0007ded00 {member1.com}:0xc0007df040 {member2.com}:0xc0007deb80]}"
time="2021-06-16T17:09:16Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:09:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:16Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:09:16Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:09:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:09:16Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:09:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:09:16Z" level=info msg="Found 3 tlsconfigs. [0xc000ac8000 0xc000ac8300 0xc000ac8780]"
time="2021-06-16T17:09:16Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:17Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:09:21Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:09:21Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:21Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:09:22Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:09:24Z" level=info msg=">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\"\" span=621d3c9ce9615f79:20b0472556fbb285:1955aace69282d81:1"
time="2021-06-16T17:09:24Z" level=info msg=">><<-- request={} span=621d3c9ce9615f79:20b0472556fbb285:1955aace69282d81:1"
time="2021-06-16T17:09:24Z" level=info msg=">><<-- response={\"workspace\":[\"nsm-18\",\"nsm-8\",\"nsm-29\"]} span=621d3c9ce9615f79:20b0472556fbb285:1955aace69282d81:1"
2021/06/16 17:09:24 Reporting span 621d3c9ce9615f79:20b0472556fbb285:1955aace69282d81:1
time="2021-06-16T17:09:26Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:09:26Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:26Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:09:26Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:09:26Z" level=info msg="grpcserver for workspace &{name:nsm-26 listener:0xc000afb660 registryServer:0xc000afb700 networkServiceServer:0xc000bfc1e0 monitorConnectionServer:0xc000afb7a0 grpcServer:0xc000992700 Mutex:{state:0 sema:0} state:2 locationProvider:0xc0002924e0 localRegistry:0xc0002a4c40 ctx:0xc000ac3e00 discoveryServer:0xc000afdcd0} is operational" operation="Workspace:nsm-26" span="2cc0479bbdbe686c:23e4e617723777c4:587ac34312cb9f1d:1"
time="2021-06-16T17:09:26Z" level=info msg="Created new workspace: &{name:nsm-26 listener:0xc000afb660 registryServer:0xc000afb700 networkServiceServer:0xc000bfc1e0 monitorConnectionServer:0xc000afb7a0 grpcServer:0xc000992700 Mutex:{state:0 sema:0} state:2 locationProvider:0xc0002924e0 localRegistry:0xc0002a4c40 ctx:0xc000ac3e00 discoveryServer:0xc000afdcd0}" operation="Workspace:nsm-26" span="2cc0479bbdbe686c:23e4e617723777c4:587ac34312cb9f1d:1"
time="2021-06-16T17:09:26Z" level=info msg="==------> cleanup() span:2cc0479bbdbe686c:19185495c3e35510:23e4e617723777c4:1"
2021/06/16 17:09:26 Reporting span 2cc0479bbdbe686c:19185495c3e35510:23e4e617723777c4:1
2021/06/16 17:09:26 Reporting span 2cc0479bbdbe686c:23e4e617723777c4:587ac34312cb9f1d:1
time="2021-06-16T17:09:26Z" level=info msg="New workspace created: &{name:nsm-26 listener:0xc000afb660 registryServer:0xc000afb700 networkServiceServer:0xc000bfc1e0 monitorConnectionServer:0xc000afb7a0 grpcServer:0xc000992700 Mutex:{state:0 sema:0} state:2 locationProvider:0xc0002924e0 localRegistry:0xc0002a4c40 ctx:0xc000ac3e00 discoveryServer:0xc000afdcd0}" operation=RequestClientConnection span="2cc0479bbdbe686c:587ac34312cb9f1d:4d5f68f97a5c03e5:1"
time="2021-06-16T17:09:26Z" level=info msg=">><<-- ClientConnectionReply={\"workspace\":\"nsm-26\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=2cc0479bbdbe686c:587ac34312cb9f1d:4d5f68f97a5c03e5:1"
2021/06/16 17:09:26 Reporting span 2cc0479bbdbe686c:587ac34312cb9f1d:4d5f68f97a5c03e5:1
time="2021-06-16T17:09:26Z" level=info msg=">><<-- response={\"workspace\":\"nsm-26\",\"hostBasedir\":\"/var/lib/networkservicemesh/\",\"clientBaseDir\":\"/var/lib/networkservicemesh/\",\"nsmServerSocket\":\"nsm.server.io.sock\",\"nsmClientSocket\":\"nsm.client.io.sock\"} span=2cc0479bbdbe686c:4d5f68f97a5c03e5:52e112e82c2ae70f:1"
2021/06/16 17:09:26 Reporting span 2cc0479bbdbe686c:4d5f68f97a5c03e5:52e112e82c2ae70f:1
time="2021-06-16T17:09:28Z" level=info msg=">><<-- GRPC->/networkservice.NetworkService/Request()=\"\" span=7df889a351f36def:2fa8ba4fc347727b:7be8c964ffcd9ebe:1"
time="2021-06-16T17:09:28Z" level=info msg=">><<-- request={\"connection\":{\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"}},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\"}}]} span=7df889a351f36def:2fa8ba4fc347727b:7be8c964ffcd9ebe:1"
time="2021-06-16T17:09:28Z" level=info msg="==--> Local.*requestValidator.Request() span:7df889a351f36def:02ecd09896ed1d21:2fa8ba4fc347727b:1"
time="2021-06-16T17:09:28Z" level=info msg=">><<-- request={\"connection\":{\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"}},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\"}}]} span=7df889a351f36def:02ecd09896ed1d21:2fa8ba4fc347727b:1"
time="2021-06-16T17:09:28Z" level=info msg="==----> Local.*monitorService.Request() span:7df889a351f36def:7d3f938506bff917:02ecd09896ed1d21:1"
time="2021-06-16T17:09:28Z" level=info msg=">><<---- request={\"connection\":{\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"}},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\"}}]} span=7df889a351f36def:7d3f938506bff917:02ecd09896ed1d21:1"
time="2021-06-16T17:09:28Z" level=info msg="==------> Local.*workspaceProviderService.Request() span:7df889a351f36def:056dea6f611e83ee:7d3f938506bff917:1"
time="2021-06-16T17:09:28Z" level=info msg=">><<------ request={\"connection\":{\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"}},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\"}}]} span=7df889a351f36def:056dea6f611e83ee:7d3f938506bff917:1"
time="2021-06-16T17:09:28Z" level=info msg="Received request from client to connect to NetworkService: connection:<network_service:\"green\" context:<ip_context:<src_ip_required:true dst_ip_required:true > > labels:<key:\"clusterName\" value:\"cluster3\" > labels:<key:\"namespace\" value:\"nsm-system\" > labels:<key:\"podName\" value:\"helloworld-green-64b8686595-vjmdh\" > labels:<key:\"port\" value:\"5000\" > labels:<key:\"service\" value:\"helloworld\" > > mechanism_preferences:<cls:\"LOCAL\" type:\"KERNEL_INTERFACE\" parameters:<key:\"description\" value:\"Primary interface\" > parameters:<key:\"name\" value:\"nsm0\" > parameters:<key:\"netnsInode\" value:\"4026536181\" > parameters:<key:\"socketfile\" value:\"nsm0/memif.sock\" > > "
time="2021-06-16T17:09:28Z" level=info msg="==--------> Local.*connectionService.Request() span:7df889a351f36def:75ec821af8ff9bc1:056dea6f611e83ee:1"
time="2021-06-16T17:09:28Z" level=info msg=">><<-------- request={\"connection\":{\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"}},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}}]} span=7df889a351f36def:75ec821af8ff9bc1:056dea6f611e83ee:1"
time="2021-06-16T17:09:28Z" level=info msg="Received request from client to connect to NetworkService: connection:<network_service:\"green\" context:<ip_context:<src_ip_required:true dst_ip_required:true > > labels:<key:\"clusterName\" value:\"cluster3\" > labels:<key:\"namespace\" value:\"nsm-system\" > labels:<key:\"podName\" value:\"helloworld-green-64b8686595-vjmdh\" > labels:<key:\"port\" value:\"5000\" > labels:<key:\"service\" value:\"helloworld\" > > mechanism_preferences:<cls:\"LOCAL\" type:\"KERNEL_INTERFACE\" parameters:<key:\"description\" value:\"Primary interface\" > parameters:<key:\"name\" value:\"nsm0\" > parameters:<key:\"netnsInode\" value:\"4026536181\" > parameters:<key:\"socketfile\" value:\"nsm0/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-8\" > > " span="7df889a351f36def:75ec821af8ff9bc1:056dea6f611e83ee:1"
time="2021-06-16T17:09:28Z" level=info msg=">><<---------- connection-id= span=7df889a351f36def:75ec821af8ff9bc1:056dea6f611e83ee:1"
time="2021-06-16T17:09:28Z" level=info msg=">><<---------- workspace=nsm-8 span=7df889a351f36def:75ec821af8ff9bc1:056dea6f611e83ee:1"
time="2021-06-16T17:09:28Z" level=info msg="resourceAdded started: &{b <nil> <nil> <nil> <nil>  1 0 0xc0006deb00 0xc000389480}"
time="2021-06-16T17:09:28Z" level=info msg="resourceAdded finished: &{b <nil> <nil> <nil> <nil>  1 0 0xc0006deb00 0xc000389480}"
time="2021-06-16T17:09:28Z" level=info msg="==----------> Local.*forwarderService.Request() span:7df889a351f36def:21420fb05d1d3b37:75ec821af8ff9bc1:1"
time="2021-06-16T17:09:28Z" level=info msg=">><<---------- request={\"connection\":{\"id\":\"b\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"}},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}}]} span=7df889a351f36def:21420fb05d1d3b37:75ec821af8ff9bc1:1"
time="2021-06-16T17:09:28Z" level=info msg="==------------> wait-forwarder() span:7df889a351f36def:1ead1b9f59d9a4f0:21420fb05d1d3b37:1"
time="2021-06-16T17:09:28Z" level=info msg="==----------> ClientConnectionAdded() span:7df889a351f36def:3e529072154ae4f9:75ec821af8ff9bc1:1"
time="2021-06-16T17:09:28Z" level=info msg=">><<---------- clientConnection={\"ConnectionID\":\"b\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"Server\":{}}} span=7df889a351f36def:3e529072154ae4f9:75ec821af8ff9bc1:1"
2021/06/16 17:09:28 Reporting span 7df889a351f36def:3e529072154ae4f9:75ec821af8ff9bc1:1
time="2021-06-16T17:09:28Z" level=info msg="Waiting for forwarder available..." operation=wait-forwarder span="7df889a351f36def:1ead1b9f59d9a4f0:21420fb05d1d3b37:1"
2021/06/16 17:09:28 Reporting span 7df889a351f36def:1ead1b9f59d9a4f0:21420fb05d1d3b37:1
time="2021-06-16T17:09:28Z" level=info msg=">><<------------ dataplane={\"RegisteredName\":\"vppagent\",\"SocketLocation\":\"/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock\",\"LocalMechanisms\":[{\"type\":\"MEMIF\"},{\"type\":\"KERNEL_INTERFACE\"}],\"RemoteMechanisms\":[{\"type\":\"VXLAN\",\"parameters\":{\"mtu_overhead\":\"50\",\"src_ip\":\"172.17.0.4\"}},{\"type\":\"IPSEC\",\"parameters\":{\"mtu_overhead\":\"70\",\"src_ip\":\"172.17.0.4\"}}],\"MechanismsConfigured\":true} span=7df889a351f36def:21420fb05d1d3b37:75ec821af8ff9bc1:1"
time="2021-06-16T17:09:28Z" level=info msg="==------------> Local.*endpointSelectorService.Request() span:7df889a351f36def:72f773981c8a0d0a:21420fb05d1d3b37:1"
time="2021-06-16T17:09:28Z" level=info msg=">><<------------ request={\"connection\":{\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"}},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}}]} span=7df889a351f36def:72f773981c8a0d0a:21420fb05d1d3b37:1"
time="2021-06-16T17:09:28Z" level=info msg=">><<-------------- requestNSEOnUpdate=false span=7df889a351f36def:72f773981c8a0d0a:21420fb05d1d3b37:1"
time="2021-06-16T17:09:28Z" level=info msg="==--------------> select-nse-1() span:7df889a351f36def:68515c2abd1a93c7:72f773981c8a0d0a:1"
time="2021-06-16T17:09:28Z" level=info msg="==----------------> GetEndpoint() span:7df889a351f36def:3ee031b1cbdacdf5:68515c2abd1a93c7:1"
time="2021-06-16T17:09:28Z" level=info msg=">><<---------------- request={\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"}} span=7df889a351f36def:3ee031b1cbdacdf5:68515c2abd1a93c7:1"
time="2021-06-16T17:09:28Z" level=info msg=">><<---------------- ignores={} span=7df889a351f36def:3ee031b1cbdacdf5:68515c2abd1a93c7:1"
time="2021-06-16T17:09:28Z" level=info msg=">><<---------------- targetEndpoint=\"\" span=7df889a351f36def:3ee031b1cbdacdf5:68515c2abd1a93c7:1"
time="2021-06-16T17:09:28Z" level=info msg=">><<---------------- targetNsemName=\"\" span=7df889a351f36def:3ee031b1cbdacdf5:68515c2abd1a93c7:1"
time="2021-06-16T17:09:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:09:28Z" level=info msg=">><<---------------- nseRequest={\"network_service_name\":\"green\"} span=7df889a351f36def:3ee031b1cbdacdf5:68515c2abd1a93c7:1"
time="2021-06-16T17:09:28Z" level=info msg=">><<---------------- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7df889a351f36def:68515c2abd1a93c7:72f773981c8a0d0a:1"
time="2021-06-16T17:09:28Z" level=info msg=">><<---------------- request={\"network_service_name\":\"green\"} span=7df889a351f36def:68515c2abd1a93c7:72f773981c8a0d0a:1"
2021/06/16 17:09:28 Reporting span 7df889a351f36def:105e45f0ccf76262:68515c2abd1a93c7:1
time="2021-06-16T17:09:28Z" level=info msg=">><<---------------- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7df889a351f36def:68515c2abd1a93c7:72f773981c8a0d0a:1"
time="2021-06-16T17:09:28Z" level=info msg=">><<---------------- nseResponse={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7df889a351f36def:3ee031b1cbdacdf5:68515c2abd1a93c7:1"
time="2021-06-16T17:09:28Z" level=info msg="Selecting endpoint for green with 0 matches."
time="2021-06-16T17:09:28Z" level=info msg="RoundRobin selected name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" "
time="2021-06-16T17:09:28Z" level=info msg=">><<---------------- endpoint={\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"} span=7df889a351f36def:3ee031b1cbdacdf5:68515c2abd1a93c7:1"
2021/06/16 17:09:28 Reporting span 7df889a351f36def:3ee031b1cbdacdf5:68515c2abd1a93c7:1
time="2021-06-16T17:09:28Z" level=info msg=">><<---------------- selected endpoint={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=7df889a351f36def:68515c2abd1a93c7:72f773981c8a0d0a:1"
time="2021-06-16T17:09:28Z" level=info msg="==----------------> Local.*excludedPrefixesService.Request() span:7df889a351f36def:44e81f3aa01e85bd:68515c2abd1a93c7:1"
time="2021-06-16T17:09:28Z" level=info msg=">><<---------------- request={\"connection\":{\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}}]} span=7df889a351f36def:44e81f3aa01e85bd:68515c2abd1a93c7:1"
time="2021-06-16T17:09:28Z" level=info msg="ExcludedPrefixesService: adding excluded prefixes to connection: []" operation="Local.*excludedPrefixesService.Request" span="7df889a351f36def:44e81f3aa01e85bd:68515c2abd1a93c7:1"
time="2021-06-16T17:09:28Z" level=info msg="==------------------> Local.*endpointService.Request() span:7df889a351f36def:2a2284934695ce82:44e81f3aa01e85bd:1"
time="2021-06-16T17:09:28Z" level=info msg=">><<------------------ request={\"connection\":{\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}}]} span=7df889a351f36def:2a2284934695ce82:44e81f3aa01e85bd:1"
time="2021-06-16T17:09:28Z" level=info msg="==--------------------> createNSEClient() span:7df889a351f36def:39b280e85fdec61b:2a2284934695ce82:1"
time="2021-06-16T17:09:28Z" level=info msg="Create local NSE connection to endpoint: &{network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock nsm-29}" operation=createNSEClient span="7df889a351f36def:39b280e85fdec61b:2a2284934695ce82:1"
time="2021-06-16T17:09:28Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm-29/nsm.client.io.sock"
time="2021-06-16T17:09:28Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:09:28Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000abf6c0 {member1.com}:0xc000abf880 {member2.com}:0xc000abf640]}"
time="2021-06-16T17:09:28Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:09:28Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:09:28Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:09:28Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:09:28Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:09:28Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:09:28Z" level=info msg="Found 3 tlsconfigs. [0xc000222600 0xc000222780 0xc000222900]"
time="2021-06-16T17:09:28Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:32Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:09:33Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:09:33Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:36Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:09:37Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:09:38Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:09:38Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:38Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:09:38Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
2021/06/16 17:09:38 Reporting span 7df889a351f36def:39b280e85fdec61b:2a2284934695ce82:1
time="2021-06-16T17:09:38Z" level=info msg="NSM:(7.2.6.2) Requesting NSE with request connection:<id:\"c\" network_service:\"green\" context:<ip_context:<src_ip_required:true dst_ip_required:true > > labels:<key:\"clusterName\" value:\"cluster3\" > labels:<key:\"namespace\" value:\"nsm-system\" > labels:<key:\"podName\" value:\"helloworld-green-64b8686595-vjmdh\" > labels:<key:\"port\" value:\"5000\" > labels:<key:\"service\" value:\"helloworld\" > path:<path_segments:<name:\"kind-3-control-plane\" > > > mechanism_preferences:<type:\"MEMIF\" > mechanism_preferences:<type:\"KERNEL_INTERFACE\" > " operation="Local.*endpointService.Request" span="7df889a351f36def:2a2284934695ce82:44e81f3aa01e85bd:1"
time="2021-06-16T17:09:38Z" level=info msg="==--------------------> nse.request() span:7df889a351f36def:59fc5f9353c78323:2a2284934695ce82:1"
time="2021-06-16T17:09:38Z" level=info msg=">><<-------------------- nse.request={\"connection\":{\"id\":\"c\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}},\"mechanism_preferences\":[{\"type\":\"MEMIF\"},{\"type\":\"KERNEL_INTERFACE\"}]} span=7df889a351f36def:59fc5f9353c78323:2a2284934695ce82:1"
time="2021-06-16T17:09:38Z" level=info msg=">><<---------------------- /networkservice.NetworkService/Request()=\"\" span=7df889a351f36def:59fc5f9353c78323:2a2284934695ce82:1"
time="2021-06-16T17:09:38Z" level=info msg=">><<---------------------- request={\"connection\":{\"id\":\"c\",\"network_service\":\"green\",\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}},\"mechanism_preferences\":[{\"type\":\"MEMIF\"},{\"type\":\"KERNEL_INTERFACE\"}]} span=7df889a351f36def:59fc5f9353c78323:2a2284934695ce82:1"
time="2021-06-16T17:09:47Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:09:48Z" level=info msg="NSM-EndpointMonitor(green6bjtj): Received event: &{{UPDATE map[c:0xc0002edf00] 0xc0000a8000}}"
2021/06/16 17:09:48 Reporting span 7df889a351f36def:57f2404a354e80bb:59fc5f9353c78323:1
time="2021-06-16T17:09:48Z" level=info msg="checking existing connection: id:\"7\" payload:\"IP\" source:<id:\"7\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"7df393ea83cf027b3a63fe1d96a37894\" > parameters:<key:\"localEspSpi\" value:\"9e42b6b9714c5531\" > parameters:<key:\"localIntegKey\" value:\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\" > parameters:<key:\"localSAInIdx\" value:\"363725565\" > parameters:<key:\"localSAOutIdx\" value:\"1698663593\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"aa037eae0475183d3e73a5b29f14d66b\" > parameters:<key:\"remoteEspSpi\" value:\"7cbba95e9053b3e2\" > parameters:<key:\"remoteIntegKey\" value:\"58db78d358602879cde12bf41e2b93e335563712\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"6\" > > context:<ip_context:<src_ip_addr:\"172.100.240.1/30\" dst_ip_addr:\"172.100.240.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > destination:<id:\"9\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmr0bzvJTx\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"nsmr0bzvJTx/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > parameters:<key:\"workspaceNseName\" value:\"green6gqkr\" > > context:<ip_context:<src_ip_addr:\"172.100.240.1/30\" dst_ip_addr:\"172.100.240.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" >  to match c"
time="2021-06-16T17:09:48Z" level=info msg=">><<---------------------- response={\"id\":\"c\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmskUpa0wX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmskUpa0wX/memif.sock\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}} span=7df889a351f36def:59fc5f9353c78323:2a2284934695ce82:1"
time="2021-06-16T17:09:48Z" level=info msg=">><<-------------------- nse.response={\"id\":\"c\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmskUpa0wX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmskUpa0wX/memif.sock\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}} span=7df889a351f36def:59fc5f9353c78323:2a2284934695ce82:1"
time="2021-06-16T17:09:48Z" level=info msg="checking existing connection: id:\"8\" payload:\"IP\" source:<id:\"8\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"f7c07c2142a3fab39e49e3030d3557c8\" > parameters:<key:\"localEspSpi\" value:\"c4796f40a943b2a7\" > parameters:<key:\"localIntegKey\" value:\"d8d443bcce2ce9542319d43f84bda47f2517db90\" > parameters:<key:\"localSAInIdx\" value:\"1756800925\" > parameters:<key:\"localSAOutIdx\" value:\"962949249\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"bed020a680bd5a2c37e8202536d0fc8d\" > parameters:<key:\"remoteEspSpi\" value:\"616bfacaf36d54c2\" > parameters:<key:\"remoteIntegKey\" value:\"704ba33abcfa181781244fb0f925fd257c512e57\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"8\" > > context:<ip_context:<src_ip_addr:\"172.100.240.5/30\" dst_ip_addr:\"172.100.240.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > destination:<id:\"a\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmQ35gmTx\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"nsmQ35gmTx/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > parameters:<key:\"workspaceNseName\" value:\"green6gqkr\" > > context:<ip_context:<src_ip_addr:\"172.100.240.5/30\" dst_ip_addr:\"172.100.240.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" >  to match c"
time="2021-06-16T17:09:48Z" level=info msg="NSM:(7.2.6.2.4) Update Local NSE connection parameters: cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmskUpa0wX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmskUpa0wX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > "
time="2021-06-16T17:09:48Z" level=info msg="checking existing connection: id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  to match c"
time="2021-06-16T17:09:48Z" level=info msg="checking existing connection: id:\"3\" payload:\"IP\" source:<id:\"3\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"5\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmP0dPKA8Wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmP0dPKA8Wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match c"
time="2021-06-16T17:09:48Z" level=info msg="checking existing connection: id:\"4\" payload:\"IP\" source:<id:\"4\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"6\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmXrW4K0WX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmXrW4K0WX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match c"
time="2021-06-16T17:09:48Z" level=info msg="checking existing connection: id:\"4\" payload:\"IP\" source:<id:\"4\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"6\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmXrW4K0WX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmXrW4K0WX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match c"
time="2021-06-16T17:09:48Z" level=info msg="checking existing connection: id:\"7\" payload:\"IP\" source:<id:\"7\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"7df393ea83cf027b3a63fe1d96a37894\" > parameters:<key:\"localEspSpi\" value:\"9e42b6b9714c5531\" > parameters:<key:\"localIntegKey\" value:\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\" > parameters:<key:\"localSAInIdx\" value:\"363725565\" > parameters:<key:\"localSAOutIdx\" value:\"1698663593\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"aa037eae0475183d3e73a5b29f14d66b\" > parameters:<key:\"remoteEspSpi\" value:\"7cbba95e9053b3e2\" > parameters:<key:\"remoteIntegKey\" value:\"58db78d358602879cde12bf41e2b93e335563712\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"6\" > > context:<ip_context:<src_ip_addr:\"172.100.240.1/30\" dst_ip_addr:\"172.100.240.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > destination:<id:\"9\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmr0bzvJTx\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"nsmr0bzvJTx/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > parameters:<key:\"workspaceNseName\" value:\"green6gqkr\" > > context:<ip_context:<src_ip_addr:\"172.100.240.1/30\" dst_ip_addr:\"172.100.240.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" >  to match c"
time="2021-06-16T17:09:48Z" level=info msg="checking existing connection: id:\"8\" payload:\"IP\" source:<id:\"8\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"f7c07c2142a3fab39e49e3030d3557c8\" > parameters:<key:\"localEspSpi\" value:\"c4796f40a943b2a7\" > parameters:<key:\"localIntegKey\" value:\"d8d443bcce2ce9542319d43f84bda47f2517db90\" > parameters:<key:\"localSAInIdx\" value:\"1756800925\" > parameters:<key:\"localSAOutIdx\" value:\"962949249\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"bed020a680bd5a2c37e8202536d0fc8d\" > parameters:<key:\"remoteEspSpi\" value:\"616bfacaf36d54c2\" > parameters:<key:\"remoteIntegKey\" value:\"704ba33abcfa181781244fb0f925fd257c512e57\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"8\" > > context:<ip_context:<src_ip_addr:\"172.100.240.5/30\" dst_ip_addr:\"172.100.240.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > destination:<id:\"a\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmQ35gmTx\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"nsmQ35gmTx/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > parameters:<key:\"workspaceNseName\" value:\"green6gqkr\" > > context:<ip_context:<src_ip_addr:\"172.100.240.5/30\" dst_ip_addr:\"172.100.240.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" >  to match c"
time="2021-06-16T17:09:48Z" level=info msg="checking existing connection: id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  to match c"
time="2021-06-16T17:09:48Z" level=info msg="checking existing connection: id:\"3\" payload:\"IP\" source:<id:\"3\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"5\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmP0dPKA8Wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmP0dPKA8Wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match c"
time="2021-06-16T17:09:48Z" level=info msg="NSM-EndpointMonitor(green6bjtj): Handler is nil, event: %v not handled: &{{UPDATE map[c:0xc0002edf00] 0xc0000a8000}}"
time="2021-06-16T17:09:48Z" level=info msg="NSM-EndpointMonitor(green6bjtj): Received event: &{{UPDATE map[c:0xc000be1d00] 0xc0000a8000}}"
time="2021-06-16T17:09:48Z" level=info msg="checking existing connection: id:\"8\" payload:\"IP\" source:<id:\"8\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"f7c07c2142a3fab39e49e3030d3557c8\" > parameters:<key:\"localEspSpi\" value:\"c4796f40a943b2a7\" > parameters:<key:\"localIntegKey\" value:\"d8d443bcce2ce9542319d43f84bda47f2517db90\" > parameters:<key:\"localSAInIdx\" value:\"1756800925\" > parameters:<key:\"localSAOutIdx\" value:\"962949249\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"bed020a680bd5a2c37e8202536d0fc8d\" > parameters:<key:\"remoteEspSpi\" value:\"616bfacaf36d54c2\" > parameters:<key:\"remoteIntegKey\" value:\"704ba33abcfa181781244fb0f925fd257c512e57\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"8\" > > context:<ip_context:<src_ip_addr:\"172.100.240.5/30\" dst_ip_addr:\"172.100.240.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > destination:<id:\"a\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmQ35gmTx\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"nsmQ35gmTx/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > parameters:<key:\"workspaceNseName\" value:\"green6gqkr\" > > context:<ip_context:<src_ip_addr:\"172.100.240.5/30\" dst_ip_addr:\"172.100.240.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" >  to match c"
time="2021-06-16T17:09:48Z" level=info msg="checking existing connection: id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  to match c"
time="2021-06-16T17:09:48Z" level=info msg="checking existing connection: id:\"3\" payload:\"IP\" source:<id:\"3\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"5\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmP0dPKA8Wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmP0dPKA8Wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match c"
time="2021-06-16T17:09:48Z" level=info msg="checking existing connection: id:\"4\" payload:\"IP\" source:<id:\"4\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"6\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmXrW4K0WX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmXrW4K0WX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match c"
time="2021-06-16T17:09:48Z" level=info msg="checking existing connection: id:\"7\" payload:\"IP\" source:<id:\"7\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"7df393ea83cf027b3a63fe1d96a37894\" > parameters:<key:\"localEspSpi\" value:\"9e42b6b9714c5531\" > parameters:<key:\"localIntegKey\" value:\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\" > parameters:<key:\"localSAInIdx\" value:\"363725565\" > parameters:<key:\"localSAOutIdx\" value:\"1698663593\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"aa037eae0475183d3e73a5b29f14d66b\" > parameters:<key:\"remoteEspSpi\" value:\"7cbba95e9053b3e2\" > parameters:<key:\"remoteIntegKey\" value:\"58db78d358602879cde12bf41e2b93e335563712\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"6\" > > context:<ip_context:<src_ip_addr:\"172.100.240.1/30\" dst_ip_addr:\"172.100.240.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > destination:<id:\"9\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmr0bzvJTx\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"nsmr0bzvJTx/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > parameters:<key:\"workspaceNseName\" value:\"green6gqkr\" > > context:<ip_context:<src_ip_addr:\"172.100.240.1/30\" dst_ip_addr:\"172.100.240.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" >  to match c"
time="2021-06-16T17:09:48Z" level=info msg="checking existing connection: id:\"4\" payload:\"IP\" source:<id:\"4\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"88d8d94d1f079aff45b2a5fe810bb29a\" > parameters:<key:\"localEspSpi\" value:\"04771d972ad8dd3b\" > parameters:<key:\"localIntegKey\" value:\"3524a5f6c1a204b507676680b3aa4035f8ead1f2\" > parameters:<key:\"localSAInIdx\" value:\"2207338102\" > parameters:<key:\"localSAOutIdx\" value:\"1780161114\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"67c53e0612edc14042bd59ced83cceda\" > parameters:<key:\"remoteEspSpi\" value:\"792d2f55b84ba0d1\" > parameters:<key:\"remoteIntegKey\" value:\"c879deb316344cd510f6ea71536f0011f99d46e2\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"4\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"6\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmXrW4K0WX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmXrW4K0WX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.9/30\" dst_ip_addr:\"172.100.244.10/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match c"
time="2021-06-16T17:09:48Z" level=info msg="checking existing connection: id:\"7\" payload:\"IP\" source:<id:\"7\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"7df393ea83cf027b3a63fe1d96a37894\" > parameters:<key:\"localEspSpi\" value:\"9e42b6b9714c5531\" > parameters:<key:\"localIntegKey\" value:\"c787c7c006034d8cd8446e8be9f7e6d9bdcd537e\" > parameters:<key:\"localSAInIdx\" value:\"363725565\" > parameters:<key:\"localSAOutIdx\" value:\"1698663593\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"aa037eae0475183d3e73a5b29f14d66b\" > parameters:<key:\"remoteEspSpi\" value:\"7cbba95e9053b3e2\" > parameters:<key:\"remoteIntegKey\" value:\"58db78d358602879cde12bf41e2b93e335563712\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"6\" > > context:<ip_context:<src_ip_addr:\"172.100.240.1/30\" dst_ip_addr:\"172.100.240.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > destination:<id:\"9\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmr0bzvJTx\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"nsmr0bzvJTx/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > parameters:<key:\"workspaceNseName\" value:\"green6gqkr\" > > context:<ip_context:<src_ip_addr:\"172.100.240.1/30\" dst_ip_addr:\"172.100.240.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" >  to match c"
time="2021-06-16T17:09:48Z" level=info msg="checking existing connection: id:\"8\" payload:\"IP\" source:<id:\"8\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"f7c07c2142a3fab39e49e3030d3557c8\" > parameters:<key:\"localEspSpi\" value:\"c4796f40a943b2a7\" > parameters:<key:\"localIntegKey\" value:\"d8d443bcce2ce9542319d43f84bda47f2517db90\" > parameters:<key:\"localSAInIdx\" value:\"1756800925\" > parameters:<key:\"localSAOutIdx\" value:\"962949249\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"bed020a680bd5a2c37e8202536d0fc8d\" > parameters:<key:\"remoteEspSpi\" value:\"616bfacaf36d54c2\" > parameters:<key:\"remoteIntegKey\" value:\"704ba33abcfa181781244fb0f925fd257c512e57\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"8\" > > context:<ip_context:<src_ip_addr:\"172.100.240.5/30\" dst_ip_addr:\"172.100.240.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" > destination:<id:\"a\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmQ35gmTx\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"nsmQ35gmTx/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > parameters:<key:\"workspaceNseName\" value:\"green6gqkr\" > > context:<ip_context:<src_ip_addr:\"172.100.240.5/30\" dst_ip_addr:\"172.100.240.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.248.0/22\" > dst_routes:<prefix:\"172.100.240.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6gqkr\" >  to match c"
time="2021-06-16T17:09:48Z" level=info msg="checking existing connection: id:\"1\" payload:\"IP\" source:<id:\"1\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"VPP interface green6bjtj\" > parameters:<key:\"name\" value:\"green6bjtj\" > parameters:<key:\"netnsInode\" value:\"4026536032\" > parameters:<key:\"socketfile\" value:\"green6bjtj/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-18\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"2\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsms4ytL0wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsms4ytL0wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.1/30\" dst_ip_addr:\"172.100.244.2/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.240.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  to match c"
time="2021-06-16T17:09:48Z" level=info msg="checking existing connection: id:\"3\" payload:\"IP\" source:<id:\"3\" network_service:\"green\" mechanism:<type:\"IPSEC\" parameters:<key:\"dst_ip\" value:\"172.17.0.4\" > parameters:<key:\"ext_src_ip\" value:\"172.17.0.4\" > parameters:<key:\"localEncrKey\" value:\"1869566bfa05f3b46c2ac0713631f33d\" > parameters:<key:\"localEspSpi\" value:\"d13aa75cdee15262\" > parameters:<key:\"localIntegKey\" value:\"0e44fc74000a0a1750cac94ea276d94262ec4b5a\" > parameters:<key:\"localSAInIdx\" value:\"814159574\" > parameters:<key:\"localSAOutIdx\" value:\"883681338\" > parameters:<key:\"mtu_overhead\" value:\"70\" > parameters:<key:\"remoteEncrKey\" value:\"ccd5abfce91f9659529a0a6e88e4fa5c\" > parameters:<key:\"remoteEspSpi\" value:\"9268d24bb2c7970d\" > parameters:<key:\"remoteIntegKey\" value:\"66ab8ca86413431969158107a3066100fadf66a7\" > parameters:<key:\"src_ip\" value:\"172.17.0.3\" > parameters:<key:\"vni\" value:\"2\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-2-control-plane\" > path_segments:<name:\"kind-3-control-plane@172.17.0.4:5001\" > path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"5\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmP0dPKA8Wp\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmP0dPKA8Wp/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.5/30\" dst_ip_addr:\"172.100.244.6/30\" src_ip_required:true dst_ip_required:true src_routes:<prefix:\"172.100.252.0/22\" > dst_routes:<prefix:\"172.100.244.0/22\" > > > labels:<key:\"\" value:\"\" > labels:<key:\"ucnf/peerName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > labels:<key:\"vl3Nse/nseSource/endpointName\" value:\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\" > path:<path_segments:<name:\"kind-3-control-plane\" > > network_service_endpoint_name:\"green6bjtj\" >  to match c"
time="2021-06-16T17:09:48Z" level=info msg="NSM-EndpointMonitor(green6bjtj): Handler is nil, event: %v not handled: &{{UPDATE map[c:0xc000be1d00] 0xc0000a8000}}"
time="2021-06-16T17:09:48Z" level=info msg="==----------------------> Local.*rossConnectService.Request() span:7df889a351f36def:33770b33deb55fa1:59fc5f9353c78323:1"
time="2021-06-16T17:09:48Z" level=info msg=">><<---------------------- request={\"connection\":{\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}}]} span=7df889a351f36def:33770b33deb55fa1:59fc5f9353c78323:1"
time="2021-06-16T17:09:48Z" level=info msg=">><<---------------------- response={\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"} span=7df889a351f36def:33770b33deb55fa1:59fc5f9353c78323:1"
2021/06/16 17:09:48 Reporting span 7df889a351f36def:33770b33deb55fa1:59fc5f9353c78323:1
2021/06/16 17:09:48 Reporting span 7df889a351f36def:59fc5f9353c78323:2a2284934695ce82:1
time="2021-06-16T17:09:48Z" level=info msg=">><<------------------ response={\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"} span=7df889a351f36def:2a2284934695ce82:44e81f3aa01e85bd:1"
2021/06/16 17:09:48 Reporting span 7df889a351f36def:2a2284934695ce82:44e81f3aa01e85bd:1
time="2021-06-16T17:09:48Z" level=info msg=">><<---------------- response={\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"} span=7df889a351f36def:44e81f3aa01e85bd:68515c2abd1a93c7:1"
2021/06/16 17:09:48 Reporting span 7df889a351f36def:44e81f3aa01e85bd:68515c2abd1a93c7:1
2021/06/16 17:09:48 Reporting span 7df889a351f36def:68515c2abd1a93c7:72f773981c8a0d0a:1
time="2021-06-16T17:09:48Z" level=info msg=">><<------------ response={\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"} span=7df889a351f36def:72f773981c8a0d0a:21420fb05d1d3b37:1"
2021/06/16 17:09:48 Reporting span 7df889a351f36def:72f773981c8a0d0a:21420fb05d1d3b37:1
time="2021-06-16T17:09:48Z" level=info msg="==------------> programForwarder() span:7df889a351f36def:472955e9a52565d0:21420fb05d1d3b37:1"
time="2021-06-16T17:09:48Z" level=info msg="Trying to establish connection to target: /var/lib/networkservicemesh/nsm-vppagent.forwarder.sock"
time="2021-06-16T17:09:48Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:09:48Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000531d00 {member1.com}:0xc000531d80 {member2.com}:0xc000531c40]}"
time="2021-06-16T17:09:48Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:09:48Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:48Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:09:48Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:09:48Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:48Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:09:48Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:09:48Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:48Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:09:48Z" level=info msg="Found 3 tlsconfigs. [0xc000a1d980 0xc000a1db00 0xc000a1dc80]"
time="2021-06-16T17:09:48Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:52Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:09:53Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:09:53Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:58Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:09:58Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x97a540 GetConfigForClient:<nil> VerifyPeerCertificate:0x97a5c0 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:58Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:09:58Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x97a540 <nil> 0x97a5c0 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:09:58Z" level=info msg="==--------------> ProgramAttempt-0() span:7df889a351f36def:02086ba5b40327d3:472955e9a52565d0:1"
time="2021-06-16T17:09:58Z" level=info msg=">><<-------------- attempt=0 span=7df889a351f36def:02086ba5b40327d3:472955e9a52565d0:1"
time="2021-06-16T17:09:58Z" level=info msg="NSM:(9.1) Sending request to forwarder" operation=programForwarder span="7df889a351f36def:472955e9a52565d0:21420fb05d1d3b37:1"
time="2021-06-16T17:09:58Z" level=info msg=">><<-------------- request={\"id\":\"b\",\"payload\":\"IP\",\"source\":{\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"c\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmskUpa0wX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmskUpa0wX/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}}} span=7df889a351f36def:02086ba5b40327d3:472955e9a52565d0:1"
time="2021-06-16T17:09:58Z" level=info msg=">><<---------------- /forwarder.Forwarder/Request()=\"\" span=7df889a351f36def:02086ba5b40327d3:472955e9a52565d0:1"
time="2021-06-16T17:09:58Z" level=info msg=">><<---------------- request={\"id\":\"b\",\"payload\":\"IP\",\"source\":{\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"c\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmskUpa0wX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmskUpa0wX/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}}} span=7df889a351f36def:02086ba5b40327d3:472955e9a52565d0:1"
2021/06/16 17:09:59 Reporting span 7df889a351f36def:42e4f52a0cc0e8a7:02086ba5b40327d3:1
time="2021-06-16T17:09:59Z" level=info msg="NSM-ForwarderMonitor(vppagent): Received event: &{{UPDATE map[b:0xc000540820] 0xc0000a8000} map[] <nil>}"
time="2021-06-16T17:09:59Z" level=info msg="==--> CrossConnectUpdate() span:7df889a351f36def:5a78cf56baa41086:2fa8ba4fc347727b:1"
time="2021-06-16T17:09:59Z" level=info msg=">><<---------------- response={\"id\":\"b\",\"payload\":\"IP\",\"source\":{\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"c\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmskUpa0wX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmskUpa0wX/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}}} span=7df889a351f36def:02086ba5b40327d3:472955e9a52565d0:1"
time="2021-06-16T17:09:59Z" level=info msg="NSM:(9.2) Forwarder configuration successful" operation=ProgramAttempt-0 span="7df889a351f36def:02086ba5b40327d3:472955e9a52565d0:1"
time="2021-06-16T17:09:59Z" level=info msg=">><<-- clientConnection={\"ConnectionID\":\"b\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"Server\":{}}} span=7df889a351f36def:5a78cf56baa41086:2fa8ba4fc347727b:1"
time="2021-06-16T17:09:59Z" level=info msg=">><<-- event=id:\"b\" payload:\"IP\" source:<id:\"b\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"KERNEL_INTERFACE\" parameters:<key:\"description\" value:\"Primary interface\" > parameters:<key:\"name\" value:\"nsm0\" > parameters:<key:\"netnsInode\" value:\"4026536181\" > parameters:<key:\"socketfile\" value:\"nsm0/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-8\" > > context:<ip_context:<src_ip_addr:\"172.100.244.13/30\" dst_ip_addr:\"172.100.244.14/30\" src_ip_required:true dst_ip_required:true dst_routes:<prefix:\"172.100.0.0/16\" > > > labels:<key:\"clusterName\" value:\"cluster3\" > labels:<key:\"namespace\" value:\"nsm-system\" > labels:<key:\"podName\" value:\"helloworld-green-64b8686595-vjmdh\" > labels:<key:\"port\" value:\"5000\" > labels:<key:\"service\" value:\"helloworld\" > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"c\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmskUpa0wX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmskUpa0wX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.13/30\" dst_ip_addr:\"172.100.244.14/30\" src_ip_required:true dst_ip_required:true dst_routes:<prefix:\"172.100.0.0/16\" > > > labels:<key:\"clusterName\" value:\"cluster3\" > labels:<key:\"namespace\" value:\"nsm-system\" > labels:<key:\"podName\" value:\"helloworld-green-64b8686595-vjmdh\" > labels:<key:\"port\" value:\"5000\" > labels:<key:\"service\" value:\"helloworld\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  span=7df889a351f36def:5a78cf56baa41086:2fa8ba4fc347727b:1"
time="2021-06-16T17:09:59Z" level=info msg=">><<-- eventType=\"UPDATE\" span=7df889a351f36def:5a78cf56baa41086:2fa8ba4fc347727b:1"
time="2021-06-16T17:09:59Z" level=info msg="Send cross connect event: id:\"b\" payload:\"IP\" source:<id:\"b\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"KERNEL_INTERFACE\" parameters:<key:\"description\" value:\"Primary interface\" > parameters:<key:\"name\" value:\"nsm0\" > parameters:<key:\"netnsInode\" value:\"4026536181\" > parameters:<key:\"socketfile\" value:\"nsm0/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-8\" > > context:<ip_context:<src_ip_addr:\"172.100.244.13/30\" dst_ip_addr:\"172.100.244.14/30\" src_ip_required:true dst_ip_required:true dst_routes:<prefix:\"172.100.0.0/16\" > > > labels:<key:\"clusterName\" value:\"cluster3\" > labels:<key:\"namespace\" value:\"nsm-system\" > labels:<key:\"podName\" value:\"helloworld-green-64b8686595-vjmdh\" > labels:<key:\"port\" value:\"5000\" > labels:<key:\"service\" value:\"helloworld\" > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"c\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmskUpa0wX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmskUpa0wX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.13/30\" dst_ip_addr:\"172.100.244.14/30\" src_ip_required:true dst_ip_required:true dst_routes:<prefix:\"172.100.0.0/16\" > > > labels:<key:\"clusterName\" value:\"cluster3\" > labels:<key:\"namespace\" value:\"nsm-system\" > labels:<key:\"podName\" value:\"helloworld-green-64b8686595-vjmdh\" > labels:<key:\"port\" value:\"5000\" > labels:<key:\"service\" value:\"helloworld\" > path:<path_segments:<name:\"kind-3-control-plane\" > > > " operation=CrossConnectUpdate span="7df889a351f36def:5a78cf56baa41086:2fa8ba4fc347727b:1"
time="2021-06-16T17:09:59Z" level=info msg="==----> UpdateXcon() span:7df889a351f36def:3bf727d44e512bae:5a78cf56baa41086:1"
time="2021-06-16T17:09:59Z" level=info msg=">><<---- connection={\"ConnectionID\":\"b\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"Server\":{}}} span=7df889a351f36def:3bf727d44e512bae:5a78cf56baa41086:1"
time="2021-06-16T17:09:59Z" level=info msg=">><<---- newXCon={\"id\":\"b\",\"payload\":\"IP\",\"source\":{\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"c\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmskUpa0wX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmskUpa0wX/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}}} span=7df889a351f36def:3bf727d44e512bae:5a78cf56baa41086:1"
time="2021-06-16T17:09:59Z" level=info msg="resourceUpdated started: &{b <nil> id:\"b\" payload:\"IP\" source:<id:\"b\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"KERNEL_INTERFACE\" parameters:<key:\"description\" value:\"Primary interface\" > parameters:<key:\"name\" value:\"nsm0\" > parameters:<key:\"netnsInode\" value:\"4026536181\" > parameters:<key:\"socketfile\" value:\"nsm0/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-8\" > > context:<ip_context:<src_ip_addr:\"172.100.244.13/30\" dst_ip_addr:\"172.100.244.14/30\" src_ip_required:true dst_ip_required:true dst_routes:<prefix:\"172.100.0.0/16\" > > > labels:<key:\"clusterName\" value:\"cluster3\" > labels:<key:\"namespace\" value:\"nsm-system\" > labels:<key:\"podName\" value:\"helloworld-green-64b8686595-vjmdh\" > labels:<key:\"port\" value:\"5000\" > labels:<key:\"service\" value:\"helloworld\" > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"c\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmskUpa0wX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmskUpa0wX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.13/30\" dst_ip_addr:\"172.100.244.14/30\" src_ip_required:true dst_ip_required:true dst_routes:<prefix:\"172.100.0.0/16\" > > > labels:<key:\"clusterName\" value:\"cluster3\" > labels:<key:\"namespace\" value:\"nsm-system\" > labels:<key:\"podName\" value:\"helloworld-green-64b8686595-vjmdh\" > labels:<key:\"port\" value:\"5000\" > labels:<key:\"service\" value:\"helloworld\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  <nil> <nil>  1 0 0xc0006deb00 0xc000389480}"
time="2021-06-16T17:09:59Z" level=info msg="resourceUpdated finished: &{b <nil> id:\"b\" payload:\"IP\" source:<id:\"b\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"KERNEL_INTERFACE\" parameters:<key:\"description\" value:\"Primary interface\" > parameters:<key:\"name\" value:\"nsm0\" > parameters:<key:\"netnsInode\" value:\"4026536181\" > parameters:<key:\"socketfile\" value:\"nsm0/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-8\" > > context:<ip_context:<src_ip_addr:\"172.100.244.13/30\" dst_ip_addr:\"172.100.244.14/30\" src_ip_required:true dst_ip_required:true dst_routes:<prefix:\"172.100.0.0/16\" > > > labels:<key:\"clusterName\" value:\"cluster3\" > labels:<key:\"namespace\" value:\"nsm-system\" > labels:<key:\"podName\" value:\"helloworld-green-64b8686595-vjmdh\" > labels:<key:\"port\" value:\"5000\" > labels:<key:\"service\" value:\"helloworld\" > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"c\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmskUpa0wX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmskUpa0wX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.13/30\" dst_ip_addr:\"172.100.244.14/30\" src_ip_required:true dst_ip_required:true dst_routes:<prefix:\"172.100.0.0/16\" > > > labels:<key:\"clusterName\" value:\"cluster3\" > labels:<key:\"namespace\" value:\"nsm-system\" > labels:<key:\"podName\" value:\"helloworld-green-64b8686595-vjmdh\" > labels:<key:\"port\" value:\"5000\" > labels:<key:\"service\" value:\"helloworld\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  <nil> <nil>  1 0 0xc0006deb00 0xc000389480}"
2021/06/16 17:09:59 Reporting span 7df889a351f36def:3bf727d44e512bae:5a78cf56baa41086:1
2021/06/16 17:09:59 Reporting span 7df889a351f36def:5a78cf56baa41086:2fa8ba4fc347727b:1
time="2021-06-16T17:09:59Z" level=info msg=">><<-------------- crossConnection={\"id\":\"b\",\"payload\":\"IP\",\"source\":{\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"c\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmskUpa0wX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmskUpa0wX/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}}} span=7df889a351f36def:02086ba5b40327d3:472955e9a52565d0:1"
2021/06/16 17:09:59 Reporting span 7df889a351f36def:02086ba5b40327d3:472955e9a52565d0:1
2021/06/16 17:09:59 Reporting span 7df889a351f36def:472955e9a52565d0:21420fb05d1d3b37:1
time="2021-06-16T17:09:59Z" level=info msg=">><<---------- response={\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"} span=7df889a351f36def:21420fb05d1d3b37:75ec821af8ff9bc1:1"
2021/06/16 17:09:59 Reporting span 7df889a351f36def:21420fb05d1d3b37:75ec821af8ff9bc1:1
time="2021-06-16T17:09:59Z" level=info msg="==------> ClientConnectionUpdated() span:7df889a351f36def:26e723a4f0d29516:3bf727d44e512bae:1"
time="2021-06-16T17:09:59Z" level=info msg=">><<------ new={\"ConnectionID\":\"b\",\"Request\":null,\"Xcon\":{\"id\":\"b\",\"payload\":\"IP\",\"source\":{\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"c\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmskUpa0wX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmskUpa0wX/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}}},\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"Server\":{}}} span=7df889a351f36def:26e723a4f0d29516:3bf727d44e512bae:1"
time="2021-06-16T17:09:59Z" level=info msg=">><<---------- client-connection={\"ConnectionID\":\"b\",\"Request\":{\"connection\":{\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"}},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}}]},\"Xcon\":{\"id\":\"b\",\"payload\":\"IP\",\"source\":{\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"c\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmskUpa0wX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmskUpa0wX/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}}},\"RemoteNsm\":null,\"Endpoint\":{\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}},\"ForwarderRegisteredName\":\"vppagent\",\"ConnectionState\":0,\"ForwarderState\":1,\"Span\":{},\"Monitor\":{\"Server\":{}}} span=7df889a351f36def:75ec821af8ff9bc1:056dea6f611e83ee:1"
time="2021-06-16T17:09:59Z" level=info msg="resourceUpdated started: &{b connection:<id:\"b\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"KERNEL_INTERFACE\" parameters:<key:\"description\" value:\"Primary interface\" > parameters:<key:\"name\" value:\"nsm0\" > parameters:<key:\"netnsInode\" value:\"4026536181\" > parameters:<key:\"socketfile\" value:\"nsm0/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-8\" > > context:<ip_context:<src_ip_required:true dst_ip_required:true > > labels:<key:\"clusterName\" value:\"cluster3\" > labels:<key:\"namespace\" value:\"nsm-system\" > labels:<key:\"podName\" value:\"helloworld-green-64b8686595-vjmdh\" > labels:<key:\"port\" value:\"5000\" > labels:<key:\"service\" value:\"helloworld\" > > mechanism_preferences:<cls:\"LOCAL\" type:\"KERNEL_INTERFACE\" parameters:<key:\"description\" value:\"Primary interface\" > parameters:<key:\"name\" value:\"nsm0\" > parameters:<key:\"netnsInode\" value:\"4026536181\" > parameters:<key:\"socketfile\" value:\"nsm0/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-8\" > >  id:\"b\" payload:\"IP\" source:<id:\"b\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"KERNEL_INTERFACE\" parameters:<key:\"description\" value:\"Primary interface\" > parameters:<key:\"name\" value:\"nsm0\" > parameters:<key:\"netnsInode\" value:\"4026536181\" > parameters:<key:\"socketfile\" value:\"nsm0/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-8\" > > context:<ip_context:<src_ip_addr:\"172.100.244.13/30\" dst_ip_addr:\"172.100.244.14/30\" src_ip_required:true dst_ip_required:true dst_routes:<prefix:\"172.100.0.0/16\" > > > labels:<key:\"clusterName\" value:\"cluster3\" > labels:<key:\"namespace\" value:\"nsm-system\" > labels:<key:\"podName\" value:\"helloworld-green-64b8686595-vjmdh\" > labels:<key:\"port\" value:\"5000\" > labels:<key:\"service\" value:\"helloworld\" > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"c\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmskUpa0wX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmskUpa0wX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.13/30\" dst_ip_addr:\"172.100.244.14/30\" src_ip_required:true dst_ip_required:true dst_routes:<prefix:\"172.100.0.0/16\" > > > labels:<key:\"clusterName\" value:\"cluster3\" > labels:<key:\"namespace\" value:\"nsm-system\" > labels:<key:\"podName\" value:\"helloworld-green-64b8686595-vjmdh\" > labels:<key:\"port\" value:\"5000\" > labels:<key:\"service\" value:\"helloworld\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  <nil> network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  vppagent 0 1 0xc0006deb00 0xc000389480}"
time="2021-06-16T17:09:59Z" level=info msg="resourceUpdated finished: &{b connection:<id:\"b\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"KERNEL_INTERFACE\" parameters:<key:\"description\" value:\"Primary interface\" > parameters:<key:\"name\" value:\"nsm0\" > parameters:<key:\"netnsInode\" value:\"4026536181\" > parameters:<key:\"socketfile\" value:\"nsm0/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-8\" > > context:<ip_context:<src_ip_required:true dst_ip_required:true > > labels:<key:\"clusterName\" value:\"cluster3\" > labels:<key:\"namespace\" value:\"nsm-system\" > labels:<key:\"podName\" value:\"helloworld-green-64b8686595-vjmdh\" > labels:<key:\"port\" value:\"5000\" > labels:<key:\"service\" value:\"helloworld\" > > mechanism_preferences:<cls:\"LOCAL\" type:\"KERNEL_INTERFACE\" parameters:<key:\"description\" value:\"Primary interface\" > parameters:<key:\"name\" value:\"nsm0\" > parameters:<key:\"netnsInode\" value:\"4026536181\" > parameters:<key:\"socketfile\" value:\"nsm0/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-8\" > >  id:\"b\" payload:\"IP\" source:<id:\"b\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"KERNEL_INTERFACE\" parameters:<key:\"description\" value:\"Primary interface\" > parameters:<key:\"name\" value:\"nsm0\" > parameters:<key:\"netnsInode\" value:\"4026536181\" > parameters:<key:\"socketfile\" value:\"nsm0/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-8\" > > context:<ip_context:<src_ip_addr:\"172.100.244.13/30\" dst_ip_addr:\"172.100.244.14/30\" src_ip_required:true dst_ip_required:true dst_routes:<prefix:\"172.100.0.0/16\" > > > labels:<key:\"clusterName\" value:\"cluster3\" > labels:<key:\"namespace\" value:\"nsm-system\" > labels:<key:\"podName\" value:\"helloworld-green-64b8686595-vjmdh\" > labels:<key:\"port\" value:\"5000\" > labels:<key:\"service\" value:\"helloworld\" > network_service_endpoint_name:\"green6bjtj\" > destination:<id:\"c\" network_service:\"green\" mechanism:<cls:\"LOCAL\" type:\"MEMIF\" parameters:<key:\"description\" value:\"NSM Endpoint\" > parameters:<key:\"name\" value:\"nsmskUpa0wX\" > parameters:<key:\"netnsInode\" value:\"4026535960\" > parameters:<key:\"socketfile\" value:\"nsmskUpa0wX/memif.sock\" > parameters:<key:\"workspace\" value:\"nsm-29\" > parameters:<key:\"workspaceNseName\" value:\"green6bjtj\" > > context:<ip_context:<src_ip_addr:\"172.100.244.13/30\" dst_ip_addr:\"172.100.244.14/30\" src_ip_required:true dst_ip_required:true dst_routes:<prefix:\"172.100.0.0/16\" > > > labels:<key:\"clusterName\" value:\"cluster3\" > labels:<key:\"namespace\" value:\"nsm-system\" > labels:<key:\"podName\" value:\"helloworld-green-64b8686595-vjmdh\" > labels:<key:\"port\" value:\"5000\" > labels:<key:\"service\" value:\"helloworld\" > path:<path_segments:<name:\"kind-3-control-plane\" > > >  <nil> network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" >  vppagent 0 1 0xc0006deb00 0xc000389480}"
time="2021-06-16T17:09:59Z" level=info msg=">><<-------- response={\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"} span=7df889a351f36def:75ec821af8ff9bc1:056dea6f611e83ee:1"
time="2021-06-16T17:09:59Z" level=info msg=">><<------ old={\"ConnectionID\":\"b\",\"Request\":null,\"Xcon\":null,\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"Server\":{}}} span=7df889a351f36def:26e723a4f0d29516:3bf727d44e512bae:1"
2021/06/16 17:09:59 Reporting span 7df889a351f36def:75ec821af8ff9bc1:056dea6f611e83ee:1
time="2021-06-16T17:09:59Z" level=info msg="LocalConnection-New event: &{{UPDATE map[b:0xc000e90600] 0xc000bbeff0}}"
time="2021-06-16T17:09:59Z" level=info msg="==--------> LocalConnection-send-update() span:7df889a351f36def:4abbaedbade6186f:26e723a4f0d29516:1"
time="2021-06-16T17:09:59Z" level=info msg=">><<-------- eventType=\"UPDATE\" span=7df889a351f36def:4abbaedbade6186f:26e723a4f0d29516:1"
time="2021-06-16T17:09:59Z" level=info msg=">><<-------- msg={\"type\":1,\"connections\":{\"b\":{\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"}}} span=7df889a351f36def:4abbaedbade6186f:26e723a4f0d29516:1"
2021/06/16 17:09:59 Reporting span 7df889a351f36def:4abbaedbade6186f:26e723a4f0d29516:1
time="2021-06-16T17:09:59Z" level=info msg="==----------> ClientConnectionUpdated() span:7df889a351f36def:4cf87aba1939635c:75ec821af8ff9bc1:1"
time="2021-06-16T17:09:59Z" level=info msg=">><<---------- new={\"ConnectionID\":\"b\",\"Request\":{\"connection\":{\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_required\":true,\"dst_ip_required\":true}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"}},\"mechanism_preferences\":[{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}}]},\"Xcon\":{\"id\":\"b\",\"payload\":\"IP\",\"source\":{\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"c\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmskUpa0wX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmskUpa0wX/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}}},\"RemoteNsm\":null,\"Endpoint\":{\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}},\"ForwarderRegisteredName\":\"vppagent\",\"ConnectionState\":0,\"ForwarderState\":1,\"Span\":{},\"Monitor\":{\"Server\":{}}} span=7df889a351f36def:4cf87aba1939635c:75ec821af8ff9bc1:1"
time="2021-06-16T17:09:59Z" level=info msg=">><<---------- old={\"ConnectionID\":\"b\",\"Request\":null,\"Xcon\":{\"id\":\"b\",\"payload\":\"IP\",\"source\":{\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"c\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmskUpa0wX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmskUpa0wX/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}}},\"RemoteNsm\":null,\"Endpoint\":null,\"ForwarderRegisteredName\":\"\",\"ConnectionState\":1,\"ForwarderState\":0,\"Span\":{},\"Monitor\":{\"Server\":{}}} span=7df889a351f36def:4cf87aba1939635c:75ec821af8ff9bc1:1"
time="2021-06-16T17:09:59Z" level=info msg="CrossConnect-New event: &{{UPDATE map[b:0xc000540820] 0xc000bbef30} map[] 0xc000bbef30}"
time="2021-06-16T17:09:59Z" level=info msg="==----> CrossConnect-send-update() span:7df889a351f36def:293f57159248b6e3:5a78cf56baa41086:1"
time="2021-06-16T17:09:59Z" level=info msg=">><<---- eventType=\"UPDATE\" span=7df889a351f36def:293f57159248b6e3:5a78cf56baa41086:1"
time="2021-06-16T17:09:59Z" level=info msg=">><<---- msg={\"type\":1,\"cross_connects\":{\"b\":{\"id\":\"b\",\"payload\":\"IP\",\"source\":{\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\",\"workspace\":\"nsm-8\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"},\"destination\":{\"id\":\"c\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"MEMIF\",\"parameters\":{\"description\":\"NSM Endpoint\",\"name\":\"nsmskUpa0wX\",\"netnsInode\":\"4026535960\",\"socketfile\":\"nsmskUpa0wX/memif.sock\",\"workspace\":\"nsm-29\",\"workspaceNseName\":\"green6bjtj\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"path\":{\"path_segments\":[{\"name\":\"kind-3-control-plane\"}]}}}}} span=7df889a351f36def:293f57159248b6e3:5a78cf56baa41086:1"
time="2021-06-16T17:09:59Z" level=info msg=">><<------ response={\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"} span=7df889a351f36def:056dea6f611e83ee:7d3f938506bff917:1"
2021/06/16 17:09:59 Reporting span 7df889a351f36def:26e723a4f0d29516:3bf727d44e512bae:1
2021/06/16 17:09:59 Reporting span 7df889a351f36def:4cf87aba1939635c:75ec821af8ff9bc1:1
2021/06/16 17:09:59 Reporting span 7df889a351f36def:293f57159248b6e3:5a78cf56baa41086:1
2021/06/16 17:09:59 Reporting span 7df889a351f36def:056dea6f611e83ee:7d3f938506bff917:1
time="2021-06-16T17:09:59Z" level=info msg=">><<---- response={\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"} span=7df889a351f36def:7d3f938506bff917:02ecd09896ed1d21:1"
2021/06/16 17:09:59 Reporting span 7df889a351f36def:7d3f938506bff917:02ecd09896ed1d21:1
time="2021-06-16T17:09:59Z" level=info msg=">><<-- response={\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"} span=7df889a351f36def:02ecd09896ed1d21:2fa8ba4fc347727b:1"
2021/06/16 17:09:59 Reporting span 7df889a351f36def:02ecd09896ed1d21:2fa8ba4fc347727b:1
time="2021-06-16T17:09:59Z" level=info msg=">><<-- response={\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"} span=7df889a351f36def:2fa8ba4fc347727b:7be8c964ffcd9ebe:1"
2021/06/16 17:09:59 Reporting span 7df889a351f36def:2fa8ba4fc347727b:7be8c964ffcd9ebe:1
time="2021-06-16T17:09:59Z" level=info msg="LocalConnection-New event: &{{UPDATE map[b:0xc000be0a00] 0xc000cdec60}}"
time="2021-06-16T17:09:59Z" level=info msg="==------> LocalConnection-send-update() span:7df889a351f36def:5aefbfae60324026:7d3f938506bff917:1"
time="2021-06-16T17:09:59Z" level=info msg=">><<------ eventType=\"UPDATE\" span=7df889a351f36def:5aefbfae60324026:7d3f938506bff917:1"
time="2021-06-16T17:09:59Z" level=info msg=">><<------ msg={\"type\":1,\"connections\":{\"b\":{\"id\":\"b\",\"network_service\":\"green\",\"mechanism\":{\"cls\":\"LOCAL\",\"type\":\"KERNEL_INTERFACE\",\"parameters\":{\"description\":\"Primary interface\",\"name\":\"nsm0\",\"netnsInode\":\"4026536181\",\"socketfile\":\"nsm0/memif.sock\"}},\"context\":{\"ip_context\":{\"src_ip_addr\":\"172.100.244.13/30\",\"dst_ip_addr\":\"172.100.244.14/30\",\"src_ip_required\":true,\"dst_ip_required\":true,\"dst_routes\":[{\"prefix\":\"172.100.0.0/16\"}]}},\"labels\":{\"clusterName\":\"cluster3\",\"namespace\":\"nsm-system\",\"podName\":\"helloworld-green-64b8686595-vjmdh\",\"port\":\"5000\",\"service\":\"helloworld\"},\"network_service_endpoint_name\":\"green6bjtj\"}}} span=7df889a351f36def:5aefbfae60324026:7d3f938506bff917:1"
2021/06/16 17:09:59 Reporting span 7df889a351f36def:5aefbfae60324026:7d3f938506bff917:1
time="2021-06-16T17:10:00Z" level=info msg="LocalConnectionMonitor using filter "
time="2021-06-16T17:10:00Z" level=info msg="MonitorServerImpl.AddRecipient: LocalConnection-&{0xc000f8ed70 0xc0008c8180}"
time="2021-06-16T17:10:03Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:10:04Z" level=info msg=">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\"\" span=69e2183dfa2f1bf2:2d10603dca18f856:2b44834b4381e2d8:1"
time="2021-06-16T17:10:04Z" level=info msg=">><<-- request={} span=69e2183dfa2f1bf2:2d10603dca18f856:2b44834b4381e2d8:1"
time="2021-06-16T17:10:04Z" level=info msg=">><<-- response={\"workspace\":[\"nsm-18\",\"nsm-8\",\"nsm-26\",\"nsm-29\"]} span=69e2183dfa2f1bf2:2d10603dca18f856:2b44834b4381e2d8:1"
2021/06/16 17:10:04 Reporting span 69e2183dfa2f1bf2:2d10603dca18f856:2b44834b4381e2d8:1
time="2021-06-16T17:10:07Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:10:14Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:10:18Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:10:22Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:10:29Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:10:33Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:10:37Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:10:44Z" level=info msg=">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\"\" span=2b46ce2cdc9a0a1a:360f1994c23ea53b:2bcb12712b6930da:1"
time="2021-06-16T17:10:44Z" level=info msg=">><<-- request={} span=2b46ce2cdc9a0a1a:360f1994c23ea53b:2bcb12712b6930da:1"
time="2021-06-16T17:10:44Z" level=info msg=">><<-- response={\"workspace\":[\"nsm-18\",\"nsm-8\",\"nsm-26\",\"nsm-29\"]} span=2b46ce2cdc9a0a1a:360f1994c23ea53b:2bcb12712b6930da:1"
2021/06/16 17:10:44 Reporting span 2b46ce2cdc9a0a1a:360f1994c23ea53b:2bcb12712b6930da:1
time="2021-06-16T17:10:44Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:10:48Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:10:52Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:10:59Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:11:03Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:11:07Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:11:14Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:11:18Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:11:22Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:11:24Z" level=info msg=">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\"\" span=29945c79a649fc29:2dc573790b9c6b12:476d1fe89764228a:1"
time="2021-06-16T17:11:24Z" level=info msg=">><<-- request={} span=29945c79a649fc29:2dc573790b9c6b12:476d1fe89764228a:1"
time="2021-06-16T17:11:24Z" level=info msg=">><<-- response={\"workspace\":[\"nsm-29\",\"nsm-18\",\"nsm-8\",\"nsm-26\"]} span=29945c79a649fc29:2dc573790b9c6b12:476d1fe89764228a:1"
2021/06/16 17:11:24 Reporting span 29945c79a649fc29:2dc573790b9c6b12:476d1fe89764228a:1
time="2021-06-16T17:11:29Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:11:33Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:11:37Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:11:44Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:11:48Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:11:52Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:11:59Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:12:03Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:12:04Z" level=info msg=">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\"\" span=7b4faa9316f5f420:1f4f76a41c3c59a5:69813595cc98fdc0:1"
time="2021-06-16T17:12:04Z" level=info msg=">><<-- request={} span=7b4faa9316f5f420:1f4f76a41c3c59a5:69813595cc98fdc0:1"
time="2021-06-16T17:12:04Z" level=info msg=">><<-- response={\"workspace\":[\"nsm-29\",\"nsm-18\",\"nsm-8\",\"nsm-26\"]} span=7b4faa9316f5f420:1f4f76a41c3c59a5:69813595cc98fdc0:1"
2021/06/16 17:12:04 Reporting span 7b4faa9316f5f420:1f4f76a41c3c59a5:69813595cc98fdc0:1
time="2021-06-16T17:12:07Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:12:14Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:12:18Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:12:22Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:12:29Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:12:33Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:12:37Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:12:44Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:12:44Z" level=info msg=">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\"\" span=26f0b8d5cfc35df8:5b79c2006526d041:415e80cf9452bc79:1"
time="2021-06-16T17:12:44Z" level=info msg=">><<-- request={} span=26f0b8d5cfc35df8:5b79c2006526d041:415e80cf9452bc79:1"
time="2021-06-16T17:12:44Z" level=info msg=">><<-- response={\"workspace\":[\"nsm-29\",\"nsm-18\",\"nsm-8\",\"nsm-26\"]} span=26f0b8d5cfc35df8:5b79c2006526d041:415e80cf9452bc79:1"
2021/06/16 17:12:44 Reporting span 26f0b8d5cfc35df8:5b79c2006526d041:415e80cf9452bc79:1
time="2021-06-16T17:12:48Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:12:52Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:12:59Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:13:03Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:13:07Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:13:14Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:13:18Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:13:22Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:13:24Z" level=info msg=">><<-- GRPC->/nsmdapi.NSMD/EnumConnection()=\"\" span=4688c473683d1b58:1a1eaa9b71c3f72d:075bd3ff8cca503c:1"
time="2021-06-16T17:13:24Z" level=info msg=">><<-- request={} span=4688c473683d1b58:1a1eaa9b71c3f72d:075bd3ff8cca503c:1"
time="2021-06-16T17:13:24Z" level=info msg=">><<-- response={\"workspace\":[\"nsm-29\",\"nsm-18\",\"nsm-8\",\"nsm-26\"]} span=4688c473683d1b58:1a1eaa9b71c3f72d:075bd3ff8cca503c:1"
2021/06/16 17:13:24 Reporting span 4688c473683d1b58:1a1eaa9b71c3f72d:075bd3ff8cca503c:1
time="2021-06-16T17:13:29Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:13:33Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:13:37Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:13:44Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-vppagent.forwarder.sock) connection status: READY"
time="2021-06-16T17:13:48Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-29/nsm.client.io.sock) connection status: READY"
time="2021-06-16T17:13:52Z" level=info msg="monitor client(/var/lib/networkservicemesh/nsm-18/nsm.client.io.sock) connection status: READY"
==== END logs for container nsmd of pod nsm-system/wcm-nsmgr-jf5x8 ====
==== START logs for container nsmd-k8s of pod nsm-system/wcm-nsmgr-jf5x8 ====
time="2021-06-16T17:02:14Z" level=info msg="Starting nsmd-k8s..."
time="2021-06-16T17:02:14Z" level=info msg="Version: v1.0.1-rc.2-8-g6913a73f"
time="2021-06-16T17:02:14Z" level=info msg="All env variables:"
time="2021-06-16T17:02:14Z" level=info msg="TRACER_ENABLED=true"
time="2021-06-16T17:02:14Z" level=info msg="JAEGER_AGENT_PORT=6831"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_PORT=tcp://10.100.122.189:5005"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_SERVICE_PORT=5005"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_PORT_5006_TCP=tcp://10.100.122.189:5006"
time="2021-06-16T17:02:14Z" level=info msg="KUBERNETES_SERVICE_PORT=443"
time="2021-06-16T17:02:14Z" level=info msg="KUBERNETES_PORT=tcp://10.96.0.1:443"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_PORT_6831_UDP=udp://10.100.4.133:6831"
time="2021-06-16T17:02:14Z" level=info msg="HOSTNAME=wcm-nsmgr-jf5x8"
time="2021-06-16T17:02:14Z" level=info msg="SHLVL=1"
time="2021-06-16T17:02:14Z" level=info msg="HOME=/root"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_PORT_16686_TCP_ADDR=10.100.4.133"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSM_ADMISSION_WEBHOOK_PORT_443_TCP_ADDR=10.102.238.54"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_PORT_16686_TCP_PORT=16686"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSM_ADMISSION_WEBHOOK_PORT_443_TCP_PORT=443"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSM_ADMISSION_WEBHOOK_PORT_443_TCP_PROTO=tcp"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_PORT_16686_TCP_PROTO=tcp"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_SERVICE_PORT_JAEGER=6831"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_SERVICE_PORT_PNSMD=5006"
time="2021-06-16T17:02:14Z" level=info msg="NODE_NAME=kind-3-control-plane"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_PORT_5000_TCP_ADDR=10.96.67.173"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_PORT_5001_TCP_ADDR=10.96.67.173"
time="2021-06-16T17:02:14Z" level=info msg="PROXY_NSMD_K8S_ADDRESS=wcm-proxy-nsmgr:5005"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_PORT_5000_TCP_PORT=5000"
time="2021-06-16T17:02:14Z" level=info msg="INSECURE=false"
time="2021-06-16T17:02:14Z" level=info msg="POD_NAME=wcm-nsmgr-jf5x8"
time="2021-06-16T17:02:14Z" level=info msg="KUBERNETES_PORT_443_TCP_ADDR=10.96.0.1"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_PORT_5000_TCP_PROTO=tcp"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_PORT_16686_TCP=tcp://10.100.4.133:16686"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_PORT_5001_TCP_PORT=5001"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_SERVICE_PORT_HTTP=16686"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSM_ADMISSION_WEBHOOK_PORT_443_TCP=tcp://10.102.238.54:443"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_PORT_5001_TCP_PROTO=tcp"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_SERVICE_PORT_REGISTRY=5000"
time="2021-06-16T17:02:14Z" level=info msg="PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
time="2021-06-16T17:02:14Z" level=info msg="PROXY_NSMD_ADDRESS=wcm-proxy-nsmgr:5006"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSM_ADMISSION_WEBHOOK_SERVICE_HOST=10.102.238.54"
time="2021-06-16T17:02:14Z" level=info msg="KUBERNETES_PORT_443_TCP_PORT=443"
time="2021-06-16T17:02:14Z" level=info msg="KUBERNETES_PORT_443_TCP_PROTO=tcp"
time="2021-06-16T17:02:14Z" level=info msg="ENTRY=nsmd-k8s"
time="2021-06-16T17:02:14Z" level=info msg="PREFERRED_REMOTE_MECHANISM=IPSEC"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_PORT_5005_TCP_ADDR=10.100.122.189"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_SERVICE_HOST=10.96.67.173"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_SERVICE_HOST=10.100.4.133"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_PORT_5006_TCP_ADDR=10.100.122.189"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_PORT_5000_TCP=tcp://10.96.67.173:5000"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_SERVICE_PORT_PNSMR=5005"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSM_ADMISSION_WEBHOOK_SERVICE_PORT=443"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSM_ADMISSION_WEBHOOK_PORT=tcp://10.102.238.54:443"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_PORT_5001_TCP=tcp://10.96.67.173:5001"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_PORT_5005_TCP_PORT=5005"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_PORT_5006_TCP_PORT=5006"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_PORT_5005_TCP_PROTO=tcp"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_PORT_6831_UDP_ADDR=10.100.4.133"
time="2021-06-16T17:02:14Z" level=info msg="KUBERNETES_SERVICE_PORT_HTTPS=443"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_PORT_5006_TCP_PROTO=tcp"
time="2021-06-16T17:02:14Z" level=info msg="KUBERNETES_PORT_443_TCP=tcp://10.96.0.1:443"
time="2021-06-16T17:02:14Z" level=info msg="JAEGER_AGENT_HOST=wcm-jaeger.nsm-system"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_SERVICE_HOST=10.100.122.189"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_SERVICE_PORT=16686"
time="2021-06-16T17:02:14Z" level=info msg="KUBERNETES_SERVICE_HOST=10.96.0.1"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_PORT=tcp://10.100.4.133:16686"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_PORT_6831_UDP_PORT=6831"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_SERVICE_PORT=5000"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_PORT=tcp://10.96.67.173:5000"
time="2021-06-16T17:02:14Z" level=info msg="PWD=/"
time="2021-06-16T17:02:14Z" level=info msg="POD_UID=024f2b15-9729-45e8-a4e2-3d91825a127e"
time="2021-06-16T17:02:14Z" level=info msg="WCM_NSMGR_SERVICE_PORT_API=5001"
time="2021-06-16T17:02:14Z" level=info msg="WCM_JAEGER_PORT_6831_UDP_PROTO=udp"
time="2021-06-16T17:02:14Z" level=info msg="WCM_PROXY_NSMGR_PORT_5005_TCP=tcp://10.100.122.189:5005"
time="2021-06-16T17:02:14Z" level=info msg="Creating logger from config: &{nsmd-k8s@wcm-nsmgr-jf5x8 false false [] 0xc00041aa20 0xc000474c40 <nil> <nil> <nil>}"
2021/06/16 17:02:14 debug logging disabled
2021/06/16 17:02:14 Initializing logging reporter
2021/06/16 17:02:14 debug logging disabled
time="2021-06-16T17:02:14Z" level=info msg="==--> Start-NSMD-k8s() span:4fe8d0cb24dcb886:4fe8d0cb24dcb886:0000000000000000:1"
time="2021-06-16T17:02:14Z" level=info msg=">><<-- address=\"0.0.0.0:5000\" span=4fe8d0cb24dcb886:4fe8d0cb24dcb886:0000000000000000:1"
time="2021-06-16T17:02:14Z" level=info msg=">><<-- nsmName=\"kind-3-control-plane\" span=4fe8d0cb24dcb886:4fe8d0cb24dcb886:0000000000000000:1"
time="2021-06-16T17:02:14Z" level=info msg=">><<-- NODE_NAME=kind-3-control-plane span=4fe8d0cb24dcb886:4fe8d0cb24dcb886:0000000000000000:1"
time="2021-06-16T17:02:14Z" level=info msg="Starting NSMD Kubernetes on 0.0.0.0:5000 with NsmName kind-3-control-plane" operation=Start-NSMD-k8s span="4fe8d0cb24dcb886:4fe8d0cb24dcb886:0000000000000000:1"
time="2021-06-16T17:02:14Z" level=info msg="==----> K8SServer.New() span:4fe8d0cb24dcb886:18b89c5a6fd8cfab:4fe8d0cb24dcb886:1"
time="2021-06-16T17:02:14Z" level=info msg="==------> NewServer() span:4fe8d0cb24dcb886:4c7436204641f73c:18b89c5a6fd8cfab:1"
time="2021-06-16T17:02:14Z" level=info msg="Establish connection with the spire provider at address:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:02:15Z" level=info msg="Got x509:&{0xc00016c7e0 <nil> {{0 0} 0 0 0 0} 0xc000101860 0xc0002d44e0 {{0 0} 0 0 0 0} false} <nil>"
time="2021-06-16T17:02:15Z" level=info msg="GRPC.NewServer with open tracing enabled" operation=NewServer span="4fe8d0cb24dcb886:4c7436204641f73c:18b89c5a6fd8cfab:1"
time="2021-06-16T17:02:15Z" level=info msg="Issued identity:spiffe://member2.com/wcm-nsmgr"
time="2021-06-16T17:02:15Z" level=info msg="==--------> GetCertificate() span:4fe8d0cb24dcb886:3e930035b65b72de:4c7436204641f73c:1"
time="2021-06-16T17:02:15Z" level=info msg="SPIRE -- GetX509SVID:&{spiffe://member2.com/wcm-nsmgr [0xc0004f6000 0xc0004f6580] 0xc00047a6f0}"
time="2021-06-16T17:02:15Z" level=info msg="Default trust domain:member2.com"
time="2021-06-16T17:02:15Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:02:15Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:02:15Z" level=info msg="Server will be started in secure mode using tlsConfig:&{<nil> <nil> [] map[] 0x99b800 <nil> <nil> 0x99b900 <nil> <nil> []  RequireAnyClientCert <nil> false [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
2021/06/16 17:02:15 Reporting span 4fe8d0cb24dcb886:3e930035b65b72de:4c7436204641f73c:1
2021/06/16 17:02:15 Reporting span 4fe8d0cb24dcb886:4c7436204641f73c:18b89c5a6fd8cfab:1
time="2021-06-16T17:02:15Z" level=info msg="Replacing Network services with: []"
time="2021-06-16T17:02:15Z" level=info msg="Replacing Network service endpoints with: []"
time="2021-06-16T17:02:15Z" level=info msg="Replacing Network service endpoints with: []"
time="2021-06-16T17:02:15Z" level=info msg="RegistryCache started" operation=K8SServer.New span="4fe8d0cb24dcb886:18b89c5a6fd8cfab:4fe8d0cb24dcb886:1"
2021/06/16 17:02:15 Reporting span 4fe8d0cb24dcb886:18b89c5a6fd8cfab:4fe8d0cb24dcb886:1
time="2021-06-16T17:02:15Z" level=info msg="nsmd-k8s initialized and waiting for connection" operation=Start-NSMD-k8s span="4fe8d0cb24dcb886:4fe8d0cb24dcb886:0000000000000000:1"
2021/06/16 17:02:15 Reporting span 4fe8d0cb24dcb886:4fe8d0cb24dcb886:0000000000000000:1
time="2021-06-16T17:02:15Z" level=info msg=">><<-- GRPC->/registry.NsmRegistry/RegisterNSM()=\"\" span=15f83bfc61db9a18:5b0e305494045b5b:159cb6b4adf7532a:1"
time="2021-06-16T17:02:15Z" level=info msg=">><<-- request={\"url\":\"10.244.0.13:5001\"} span=15f83bfc61db9a18:5b0e305494045b5b:159cb6b4adf7532a:1"
time="2021-06-16T17:02:15Z" level=info msg="==--> RegisterNSM() span:15f83bfc61db9a18:4c1c63ae1121030b:5b0e305494045b5b:1"
time="2021-06-16T17:02:15Z" level=info msg=">><<-- nsm={\"url\":\"10.244.0.13:5001\"} span=15f83bfc61db9a18:4c1c63ae1121030b:5b0e305494045b5b:1"
time="2021-06-16T17:02:15Z" level=info msg=">><<-- nsm-cr={\"metadata\":{\"name\":\"kind-3-control-plane\",\"creationTimestamp\":null,\"ownerReferences\":[{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"name\":\"wcm-nsmgr-jf5x8\",\"uid\":\"024f2b15-9729-45e8-a4e2-3d91825a127e\",\"controller\":true,\"blockOwnerDeletion\":false}]},\"spec\":{\"url\":\"10.244.0.13:5001\",\"expirationtime\":\"2021-06-16T17:02:15Z\"},\"status\":{\"state\":\"RUNNING\"}} span=15f83bfc61db9a18:4c1c63ae1121030b:5b0e305494045b5b:1"
time="2021-06-16T17:02:15Z" level=info msg="CreateOrUpdateNSM attempt 0: "
time="2021-06-16T17:02:15Z" level=info msg="Creating NSM: &{{ } {kind-3-control-plane      0 0001-01-01 00:00:00 +0000 UTC <nil> <nil> map[] map[] [{v1 Pod wcm-nsmgr-jf5x8 024f2b15-9729-45e8-a4e2-3d91825a127e 0xc000044f08 0xc000044f09}] []  []} {10.244.0.13:5001 2021-06-16 17:02:15.703678516 +0000 UTC m=+1.275129121} {RUNNING}}"
time="2021-06-16T17:02:15Z" level=info msg="NetworkServiceManagerCache.Add(&{{ } {kind-3-control-plane  nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkservicemanagers/kind-3-control-plane 80b1f788-d9db-4cdb-9b51-fe3d2f13180d 1723 1 2021-06-16 17:02:15 +0000 UTC <nil> <nil> map[] map[] [{v1 Pod wcm-nsmgr-jf5x8 024f2b15-9729-45e8-a4e2-3d91825a127e 0xc00030c90d 0xc00030c90c}] []  []} {10.244.0.13:5001 2021-06-16 17:02:15 +0000 UTC} {RUNNING}})"
time="2021-06-16T17:02:15Z" level=info msg=">><<-- registered-nsm={\"metadata\":{\"name\":\"kind-3-control-plane\",\"namespace\":\"nsm-system\",\"selfLink\":\"/apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkservicemanagers/kind-3-control-plane\",\"uid\":\"80b1f788-d9db-4cdb-9b51-fe3d2f13180d\",\"resourceVersion\":\"1723\",\"generation\":1,\"creationTimestamp\":\"2021-06-16T17:02:15Z\",\"ownerReferences\":[{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"name\":\"wcm-nsmgr-jf5x8\",\"uid\":\"024f2b15-9729-45e8-a4e2-3d91825a127e\",\"controller\":true,\"blockOwnerDeletion\":false}]},\"spec\":{\"url\":\"10.244.0.13:5001\",\"expirationtime\":\"2021-06-16T17:02:15Z\"},\"status\":{\"state\":\"RUNNING\"}} span=15f83bfc61db9a18:4c1c63ae1121030b:5b0e305494045b5b:1"
time="2021-06-16T17:02:15Z" level=info msg=">><<-- response={\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"} span=15f83bfc61db9a18:4c1c63ae1121030b:5b0e305494045b5b:1"
2021/06/16 17:02:15 Reporting span 15f83bfc61db9a18:4c1c63ae1121030b:5b0e305494045b5b:1
time="2021-06-16T17:02:15Z" level=info msg=">><<-- response={\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"} span=15f83bfc61db9a18:5b0e305494045b5b:159cb6b4adf7532a:1"
2021/06/16 17:02:15 Reporting span 15f83bfc61db9a18:5b0e305494045b5b:159cb6b4adf7532a:1
time="2021-06-16T17:02:15Z" level=info msg="NetworkServiceManagerCache.Added(&{{ } {kind-3-control-plane  nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkservicemanagers/kind-3-control-plane 80b1f788-d9db-4cdb-9b51-fe3d2f13180d 1723 1 2021-06-16 17:02:15 +0000 UTC <nil> <nil> map[] map[] [{v1 Pod wcm-nsmgr-jf5x8 024f2b15-9729-45e8-a4e2-3d91825a127e 0xc00030c90d 0xc00030c90c}] []  []} {10.244.0.13:5001 2021-06-16 17:02:15 +0000 UTC} {RUNNING}})"
time="2021-06-16T17:02:15Z" level=info msg="Start apply filter by namespace nsm-system for &{{ } {kind-3-control-plane  nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkservicemanagers/kind-3-control-plane 80b1f788-d9db-4cdb-9b51-fe3d2f13180d 1723 1 2021-06-16 17:02:15 +0000 UTC <nil> <nil> map[] map[] [{v1 Pod wcm-nsmgr-jf5x8 024f2b15-9729-45e8-a4e2-3d91825a127e 0xc00030cc1d 0xc00030cc1c}] []  []} {10.244.0.13:5001 2021-06-16 17:02:15 +0000 UTC} {RUNNING}}"
time="2021-06-16T17:02:15Z" level=info msg="Add from k8s-registry: *v1alpha1.NetworkServiceManager"
time="2021-06-16T17:02:15Z" level=info msg="NetworkServiceManagerCache.Added(&{{ } {kind-3-control-plane  nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkservicemanagers/kind-3-control-plane 80b1f788-d9db-4cdb-9b51-fe3d2f13180d 1723 1 2021-06-16 17:02:15 +0000 UTC <nil> <nil> map[] map[] [{v1 Pod wcm-nsmgr-jf5x8 024f2b15-9729-45e8-a4e2-3d91825a127e 0xc00030cc1d 0xc00030cc1c}] []  []} {10.244.0.13:5001 2021-06-16 17:02:15 +0000 UTC} {RUNNING}})"
time="2021-06-16T17:02:15Z" level=info msg=">><<-- GRPC->/registry.NsmRegistry/GetEndpoints()=\"\" span=15f83bfc61db9a18:234ca05c609bff1c:1d4b0a9017613481:1"
time="2021-06-16T17:02:15Z" level=info msg=">><<-- request={} span=15f83bfc61db9a18:234ca05c609bff1c:1d4b0a9017613481:1"
time="2021-06-16T17:02:15Z" level=info msg="Received GetEndpoints"
time="2021-06-16T17:02:15Z" level=info msg="GetEndpoints return: []"
time="2021-06-16T17:02:15Z" level=info msg=">><<-- response={} span=15f83bfc61db9a18:234ca05c609bff1c:1d4b0a9017613481:1"
2021/06/16 17:02:15 Reporting span 15f83bfc61db9a18:234ca05c609bff1c:1d4b0a9017613481:1
time="2021-06-16T17:05:51Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=6259cad18ffe4ab3:0ced915859ad7215:58e5bcb7ea4dd9b1:1"
time="2021-06-16T17:05:51Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"url\":\"10.244.0.13:5001\"},\"network_service_endpoint\":{\"payload\":\"IP\",\"network_service_name\":\"green\",\"labels\":{\"app\":\"vl3-nse-green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"}}} span=6259cad18ffe4ab3:0ced915859ad7215:58e5bcb7ea4dd9b1:1"
time="2021-06-16T17:05:51Z" level=info msg="==--> nsmgr.RegisterNSE() span:6259cad18ffe4ab3:7910d64a2d5c5f2f:0ced915859ad7215:1"
time="2021-06-16T17:05:51Z" level=info msg="Received RegisterNSE(network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<url:\"10.244.0.13:5001\" > network_service_endpoint:<payload:\"IP\" network_service_name:\"green\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > > )" operation=nsmgr.RegisterNSE span="6259cad18ffe4ab3:7910d64a2d5c5f2f:0ced915859ad7215:1"
time="2021-06-16T17:05:51Z" level=info msg="Add from k8s-registry: *v1alpha1.NetworkService"
time="2021-06-16T17:05:51Z" level=info msg="Add from k8s-registry: *v1alpha1.NetworkServiceEndpoint"
time="2021-06-16T17:05:51Z" level=info msg="Adding NSE to cache: {{ } {green6bjtj green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green6bjtj bc1940f0-d1f7-4201-ab95-951ed8e63d07 2512 1 2021-06-16 17:05:51 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-24scx wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}"
time="2021-06-16T17:05:51Z" level=info msg="==--> ProxyNsmgr.forwardRegisterNSE() span:64ce07b79c852e17:64ce07b79c852e17:0000000000000000:1"
time="2021-06-16T17:05:51Z" level=info msg="Forwarding Register NSE request (network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" > )" operation=ProxyNsmgr.forwardRegisterNSE span="64ce07b79c852e17:64ce07b79c852e17:0000000000000000:1"
time="2021-06-16T17:05:51Z" level=info msg="Returned from RegisterNSE: time: 27.556731ms request: network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" > " operation=nsmgr.RegisterNSE span="6259cad18ffe4ab3:7910d64a2d5c5f2f:0ced915859ad7215:1"
2021/06/16 17:05:51 Reporting span 6259cad18ffe4ab3:7910d64a2d5c5f2f:0ced915859ad7215:1
time="2021-06-16T17:05:51Z" level=info msg="Requesting NseRegistryClient..."
time="2021-06-16T17:05:51Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=6259cad18ffe4ab3:0ced915859ad7215:58e5bcb7ea4dd9b1:1"
2021/06/16 17:05:51 Reporting span 6259cad18ffe4ab3:0ced915859ad7215:58e5bcb7ea4dd9b1:1
time="2021-06-16T17:05:51Z" level=info msg="==----> initRegistryClient() span:64ce07b79c852e17:2ab0375d977aa1ff:64ce07b79c852e17:1"
time="2021-06-16T17:05:51Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:05:51Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:05:51Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="64ce07b79c852e17:2ab0375d977aa1ff:64ce07b79c852e17:1"
time="2021-06-16T17:05:51Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:05:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:05:51Z" level=info msg="==--> ProxyNsmgr.BulkRegisterNSE() span:65c2b76707fee904:397d8a7c23712cab:2089e007e5400dde:1"
time="2021-06-16T17:05:51Z" level=info msg="Forwarding Bulk Register NSE stream..." operation=ProxyNsmgr.BulkRegisterNSE span="65c2b76707fee904:397d8a7c23712cab:2089e007e5400dde:1"
time="2021-06-16T17:05:51Z" level=info msg="Requesting NseRegistryClient..."
time="2021-06-16T17:05:51Z" level=info msg="==----> initRegistryClient() span:65c2b76707fee904:6dc9b6b3d25cbc10:397d8a7c23712cab:1"
time="2021-06-16T17:05:51Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:05:51Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:05:51Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="65c2b76707fee904:6dc9b6b3d25cbc10:397d8a7c23712cab:1"
time="2021-06-16T17:05:51Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:05:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:05:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0002ec680 {member1.com}:0xc0002ec600 {member2.com}:0xc0002ec540]}"
time="2021-06-16T17:05:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:05:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:05:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:05:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:05:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:05:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:05:51Z" level=info msg="Found 3 tlsconfigs. [0xc0001f1680 0xc0001f1800 0xc0001f1980]"
time="2021-06-16T17:05:51Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:05:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0003b2840 {member1.com}:0xc0003b27c0 {member2.com}:0xc0003b2640]}"
time="2021-06-16T17:05:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:05:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:05:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:05:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:05:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:05:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:05:51Z" level=info msg="Found 3 tlsconfigs. [0xc0006b6300 0xc0006b6780 0xc0006b6900]"
time="2021-06-16T17:05:51Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:05:52Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=4951a7b77fd453c8:3268541cca56ceff:0b53ac0731ab33e2:1"
time="2021-06-16T17:05:52Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"url\":\"10.244.0.13:5001\"},\"network_service_endpoint\":{\"payload\":\"IP\",\"network_service_name\":\"green\",\"labels\":{\"app\":\"vl3-nse-green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"}}} span=4951a7b77fd453c8:3268541cca56ceff:0b53ac0731ab33e2:1"
time="2021-06-16T17:05:52Z" level=info msg="==--> nsmgr.RegisterNSE() span:4951a7b77fd453c8:2afdfa462e80f9b0:3268541cca56ceff:1"
time="2021-06-16T17:05:52Z" level=info msg="Received RegisterNSE(network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<url:\"10.244.0.13:5001\" > network_service_endpoint:<payload:\"IP\" network_service_name:\"green\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > > )" operation=nsmgr.RegisterNSE span="4951a7b77fd453c8:2afdfa462e80f9b0:3268541cca56ceff:1"
time="2021-06-16T17:05:52Z" level=info msg="Adding NSE to cache: {{ } {green6gqkr green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green6gqkr ea086f35-cd3b-4708-b648-f753f0dc1442 2516 1 2021-06-16 17:05:52 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-5ldtk wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}"
time="2021-06-16T17:05:52Z" level=info msg="Returned from RegisterNSE: time: 4.62699ms request: network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6gqkr\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" > " operation=nsmgr.RegisterNSE span="4951a7b77fd453c8:2afdfa462e80f9b0:3268541cca56ceff:1"
2021/06/16 17:05:52 Reporting span 4951a7b77fd453c8:2afdfa462e80f9b0:3268541cca56ceff:1
time="2021-06-16T17:05:52Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=4951a7b77fd453c8:3268541cca56ceff:0b53ac0731ab33e2:1"
2021/06/16 17:05:52 Reporting span 4951a7b77fd453c8:3268541cca56ceff:0b53ac0731ab33e2:1
time="2021-06-16T17:05:52Z" level=info msg="Add from k8s-registry: *v1alpha1.NetworkServiceEndpoint"
time="2021-06-16T17:05:52Z" level=info msg="==--> ProxyNsmgr.forwardRegisterNSE() span:5ed9d136bb76f4a6:5ed9d136bb76f4a6:0000000000000000:1"
time="2021-06-16T17:05:52Z" level=info msg="Forwarding Register NSE request (network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6gqkr\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" > )" operation=ProxyNsmgr.forwardRegisterNSE span="5ed9d136bb76f4a6:5ed9d136bb76f4a6:0000000000000000:1"
time="2021-06-16T17:05:52Z" level=info msg="Requesting NseRegistryClient..."
time="2021-06-16T17:05:52Z" level=info msg="==----> initRegistryClient() span:5ed9d136bb76f4a6:3ef8f2f6b910cd4d:5ed9d136bb76f4a6:1"
time="2021-06-16T17:05:52Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:05:52Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:05:52Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5ed9d136bb76f4a6:3ef8f2f6b910cd4d:5ed9d136bb76f4a6:1"
time="2021-06-16T17:05:52Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:05:52Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:05:52Z" level=info msg="==--> ProxyNsmgr.BulkRegisterNSE() span:406bf10b3b03d016:5918e7597a476d30:67e2e892cdf20e69:1"
time="2021-06-16T17:05:52Z" level=info msg="Forwarding Bulk Register NSE stream..." operation=ProxyNsmgr.BulkRegisterNSE span="406bf10b3b03d016:5918e7597a476d30:67e2e892cdf20e69:1"
time="2021-06-16T17:05:52Z" level=info msg="Requesting NseRegistryClient..."
time="2021-06-16T17:05:52Z" level=info msg="==----> initRegistryClient() span:406bf10b3b03d016:78a08d53825e88d6:5918e7597a476d30:1"
time="2021-06-16T17:05:52Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:05:52Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:05:52Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="406bf10b3b03d016:78a08d53825e88d6:5918e7597a476d30:1"
time="2021-06-16T17:05:52Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:05:52Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:05:52Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004d5500 {member1.com}:0xc0004d5580 {member2.com}:0xc0004d5480]}"
time="2021-06-16T17:05:52Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:05:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:52Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:05:52Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:05:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:05:52Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:05:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:05:52Z" level=info msg="Found 3 tlsconfigs. [0xc0005dbe00 0xc000768000 0xc000768180]"
time="2021-06-16T17:05:52Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:05:52Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004709c0 {member1.com}:0xc000470940 {member2.com}:0xc0004708c0]}"
time="2021-06-16T17:05:52Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:05:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:52Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:05:52Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:05:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:05:52Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:05:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:05:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:05:52Z" level=info msg="Found 3 tlsconfigs. [0xc00021a000 0xc00021a180 0xc00021a300]"
time="2021-06-16T17:05:52Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:05:56Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:05:56Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:05:56Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:05:56Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:05:57Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:05:57Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:05:57Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:05:57Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:01Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:06:01Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:01Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:01Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:01Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="64ce07b79c852e17:2ab0375d977aa1ff:64ce07b79c852e17:1"
2021/06/16 17:06:01 Reporting span 64ce07b79c852e17:2ab0375d977aa1ff:64ce07b79c852e17:1
time="2021-06-16T17:06:01Z" level=info msg=">><<---- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=64ce07b79c852e17:64ce07b79c852e17:0000000000000000:1"
time="2021-06-16T17:06:01Z" level=info msg=">><<---- request={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=64ce07b79c852e17:64ce07b79c852e17:0000000000000000:1"
2021/06/16 17:06:01 Reporting span 64ce07b79c852e17:6a33343604dfac03:64ce07b79c852e17:1
time="2021-06-16T17:06:01Z" level=info msg=">><<---- response={} span=64ce07b79c852e17:64ce07b79c852e17:0000000000000000:1"
2021/06/16 17:06:01 Reporting span 64ce07b79c852e17:64ce07b79c852e17:0000000000000000:1
time="2021-06-16T17:06:01Z" level=error msg="Cannot forward NSE Registration: rpc error: code = Unknown desc = NSMRS Address variable was not set" operation=nsmgr.RegisterNSE span="6259cad18ffe4ab3:7910d64a2d5c5f2f:0ced915859ad7215:1"
time="2021-06-16T17:06:01Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:06:01Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:01Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:01Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:01Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="65c2b76707fee904:6dc9b6b3d25cbc10:397d8a7c23712cab:1"
2021/06/16 17:06:01 Reporting span 65c2b76707fee904:6dc9b6b3d25cbc10:397d8a7c23712cab:1
time="2021-06-16T17:06:02Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:06:02Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:02Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:02Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:02Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="5ed9d136bb76f4a6:3ef8f2f6b910cd4d:5ed9d136bb76f4a6:1"
2021/06/16 17:06:02 Reporting span 5ed9d136bb76f4a6:3ef8f2f6b910cd4d:5ed9d136bb76f4a6:1
time="2021-06-16T17:06:02Z" level=info msg=">><<---- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=5ed9d136bb76f4a6:5ed9d136bb76f4a6:0000000000000000:1"
time="2021-06-16T17:06:02Z" level=info msg=">><<---- request={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=5ed9d136bb76f4a6:5ed9d136bb76f4a6:0000000000000000:1"
2021/06/16 17:06:02 Reporting span 5ed9d136bb76f4a6:3222bd39d932da5f:5ed9d136bb76f4a6:1
time="2021-06-16T17:06:02Z" level=info msg=">><<---- response={} span=5ed9d136bb76f4a6:5ed9d136bb76f4a6:0000000000000000:1"
2021/06/16 17:06:02 Reporting span 5ed9d136bb76f4a6:5ed9d136bb76f4a6:0000000000000000:1
time="2021-06-16T17:06:02Z" level=error msg="Cannot forward NSE Registration: rpc error: code = Unknown desc = NSMRS Address variable was not set" operation=nsmgr.RegisterNSE span="4951a7b77fd453c8:2afdfa462e80f9b0:3268541cca56ceff:1"
time="2021-06-16T17:06:02Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:06:02Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:02Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:02Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:02Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="406bf10b3b03d016:78a08d53825e88d6:5918e7597a476d30:1"
2021/06/16 17:06:02 Reporting span 406bf10b3b03d016:78a08d53825e88d6:5918e7597a476d30:1
time="2021-06-16T17:06:21Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=17705e2cb403e654:17705e2cb403e654:0000000000000000:1"
time="2021-06-16T17:06:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=17705e2cb403e654:17705e2cb403e654:0000000000000000:1"
time="2021-06-16T17:06:21Z" level=info msg="==--> discovery.FindNetworkService() span:17705e2cb403e654:33ad2123d6c66e03:17705e2cb403e654:1"
time="2021-06-16T17:06:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=17705e2cb403e654:33ad2123d6c66e03:17705e2cb403e654:1"
time="2021-06-16T17:06:21Z" level=info msg="NSE found 2, retrieve time: 5.93s"
time="2021-06-16T17:06:21Z" level=info msg="FindNetworkService done: time 125.811s [green6bjtj green6gqkr]"
2021/06/16 17:06:21 Reporting span 17705e2cb403e654:33ad2123d6c66e03:17705e2cb403e654:1
time="2021-06-16T17:06:21Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=17705e2cb403e654:17705e2cb403e654:0000000000000000:1"
2021/06/16 17:06:21 Reporting span 17705e2cb403e654:17705e2cb403e654:0000000000000000:1
time="2021-06-16T17:06:21Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5c839f682c857d97:5c839f682c857d97:0000000000000000:1"
time="2021-06-16T17:06:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=5c839f682c857d97:5c839f682c857d97:0000000000000000:1"
time="2021-06-16T17:06:21Z" level=info msg="==--> discovery.FindNetworkService() span:5c839f682c857d97:643e8e98dd278ed0:5c839f682c857d97:1"
time="2021-06-16T17:06:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=5c839f682c857d97:643e8e98dd278ed0:5c839f682c857d97:1"
time="2021-06-16T17:06:21Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=5c839f682c857d97:643e8e98dd278ed0:5c839f682c857d97:1"
time="2021-06-16T17:06:21Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:06:21Z" level=info msg="==----> initRegistryClient() span:5c839f682c857d97:650746a90788a365:643e8e98dd278ed0:1"
time="2021-06-16T17:06:21Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:06:21Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:06:21Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5c839f682c857d97:650746a90788a365:643e8e98dd278ed0:1"
time="2021-06-16T17:06:21Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:06:21Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:06:21Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004d5a40 {member1.com}:0xc0004d5ac0 {member2.com}:0xc0004d59c0]}"
time="2021-06-16T17:06:21Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:06:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:21Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:06:21Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:06:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:06:21Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:06:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:06:21Z" level=info msg="Found 3 tlsconfigs. [0xc00021b200 0xc00021b380 0xc00021b500]"
time="2021-06-16T17:06:21Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:22Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=73bab0b88f248c64:73bab0b88f248c64:0000000000000000:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=73bab0b88f248c64:73bab0b88f248c64:0000000000000000:1"
time="2021-06-16T17:06:22Z" level=info msg="==--> discovery.FindNetworkService() span:73bab0b88f248c64:3284ce70c8e7c0d8:73bab0b88f248c64:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=73bab0b88f248c64:3284ce70c8e7c0d8:73bab0b88f248c64:1"
time="2021-06-16T17:06:22Z" level=info msg="NSE found 2, retrieve time: 4.89s"
time="2021-06-16T17:06:22Z" level=info msg="FindNetworkService done: time 45.411s [green6bjtj green6gqkr]"
2021/06/16 17:06:22 Reporting span 73bab0b88f248c64:3284ce70c8e7c0d8:73bab0b88f248c64:1
time="2021-06-16T17:06:22Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=73bab0b88f248c64:73bab0b88f248c64:0000000000000000:1"
2021/06/16 17:06:22 Reporting span 73bab0b88f248c64:73bab0b88f248c64:0000000000000000:1
time="2021-06-16T17:06:22Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=68f04943c271f163:68f04943c271f163:0000000000000000:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=68f04943c271f163:68f04943c271f163:0000000000000000:1"
time="2021-06-16T17:06:22Z" level=info msg="==--> discovery.FindNetworkService() span:68f04943c271f163:5efce8e4a181d8ce:68f04943c271f163:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=68f04943c271f163:5efce8e4a181d8ce:68f04943c271f163:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=68f04943c271f163:5efce8e4a181d8ce:68f04943c271f163:1"
time="2021-06-16T17:06:22Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:06:22Z" level=info msg="==----> initRegistryClient() span:68f04943c271f163:0c8dd21d75a53eb0:5efce8e4a181d8ce:1"
time="2021-06-16T17:06:22Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:06:22Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:06:22Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="68f04943c271f163:0c8dd21d75a53eb0:5efce8e4a181d8ce:1"
time="2021-06-16T17:06:22Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:06:22Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:06:22Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=784cf8459a76ba30:1aaf3d7e4232a812:11796ed946a8f94b:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=784cf8459a76ba30:1aaf3d7e4232a812:11796ed946a8f94b:1"
time="2021-06-16T17:06:22Z" level=info msg="==--> discovery.FindNetworkService() span:784cf8459a76ba30:63b1d7f6546d831d:1aaf3d7e4232a812:1"
time="2021-06-16T17:06:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=784cf8459a76ba30:63b1d7f6546d831d:1aaf3d7e4232a812:1"
time="2021-06-16T17:06:22Z" level=info msg="NSE found 2, retrieve time: 4.9s"
time="2021-06-16T17:06:22Z" level=info msg="FindNetworkService done: time 179.482s [green6bjtj green6gqkr]"
2021/06/16 17:06:22 Reporting span 784cf8459a76ba30:63b1d7f6546d831d:1aaf3d7e4232a812:1
time="2021-06-16T17:06:22Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=784cf8459a76ba30:1aaf3d7e4232a812:11796ed946a8f94b:1"
2021/06/16 17:06:22 Reporting span 784cf8459a76ba30:1aaf3d7e4232a812:11796ed946a8f94b:1
time="2021-06-16T17:06:22Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00084eb80 {member1.com}:0xc00084ec00 {member2.com}:0xc00084eb00]}"
time="2021-06-16T17:06:22Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:06:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:22Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:06:22Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:06:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:06:22Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:06:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:06:22Z" level=info msg="Found 3 tlsconfigs. [0xc0006c0a80 0xc0006c0c00 0xc0006c0d80]"
time="2021-06-16T17:06:22Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:26Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:06:26Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:27Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:06:27Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:31Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:06:31Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:31Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:31Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:31Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="5c839f682c857d97:650746a90788a365:643e8e98dd278ed0:1"
2021/06/16 17:06:31 Reporting span 5c839f682c857d97:650746a90788a365:643e8e98dd278ed0:1
time="2021-06-16T17:06:31Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:06:31Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5c839f682c857d97:643e8e98dd278ed0:5c839f682c857d97:1"
time="2021-06-16T17:06:31Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=5c839f682c857d97:643e8e98dd278ed0:5c839f682c857d97:1"
2021/06/16 17:06:31 Reporting span 5c839f682c857d97:04ab77db8ae91db4:643e8e98dd278ed0:1
time="2021-06-16T17:06:31Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5c839f682c857d97:643e8e98dd278ed0:5c839f682c857d97:1"
2021/06/16 17:06:31 Reporting span 5c839f682c857d97:643e8e98dd278ed0:5c839f682c857d97:1
time="2021-06-16T17:06:31Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5c839f682c857d97:5c839f682c857d97:0000000000000000:1"
2021/06/16 17:06:31 Reporting span 5c839f682c857d97:5c839f682c857d97:0000000000000000:1
time="2021-06-16T17:06:32Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:06:32Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:32Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:32Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:06:32Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="68f04943c271f163:0c8dd21d75a53eb0:5efce8e4a181d8ce:1"
2021/06/16 17:06:32 Reporting span 68f04943c271f163:0c8dd21d75a53eb0:5efce8e4a181d8ce:1
time="2021-06-16T17:06:32Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:06:32Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=68f04943c271f163:5efce8e4a181d8ce:68f04943c271f163:1"
time="2021-06-16T17:06:32Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=68f04943c271f163:5efce8e4a181d8ce:68f04943c271f163:1"
2021/06/16 17:06:32 Reporting span 68f04943c271f163:47aa222d401436f1:5efce8e4a181d8ce:1
time="2021-06-16T17:06:32Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=68f04943c271f163:5efce8e4a181d8ce:68f04943c271f163:1"
2021/06/16 17:06:32 Reporting span 68f04943c271f163:5efce8e4a181d8ce:68f04943c271f163:1
time="2021-06-16T17:06:32Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=68f04943c271f163:68f04943c271f163:0000000000000000:1"
2021/06/16 17:06:32 Reporting span 68f04943c271f163:68f04943c271f163:0000000000000000:1
time="2021-06-16T17:06:51Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2330c4635d95fd5b:2330c4635d95fd5b:0000000000000000:1"
time="2021-06-16T17:06:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2330c4635d95fd5b:2330c4635d95fd5b:0000000000000000:1"
time="2021-06-16T17:06:51Z" level=info msg="==--> discovery.FindNetworkService() span:2330c4635d95fd5b:5a8e86bb4a3c7bb4:2330c4635d95fd5b:1"
time="2021-06-16T17:06:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2330c4635d95fd5b:5a8e86bb4a3c7bb4:2330c4635d95fd5b:1"
time="2021-06-16T17:06:51Z" level=info msg="NSE found 2, retrieve time: 5.54s"
time="2021-06-16T17:06:51Z" level=info msg="FindNetworkService done: time 55.371s [green6bjtj green6gqkr]"
2021/06/16 17:06:51 Reporting span 2330c4635d95fd5b:5a8e86bb4a3c7bb4:2330c4635d95fd5b:1
time="2021-06-16T17:06:51Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2330c4635d95fd5b:2330c4635d95fd5b:0000000000000000:1"
2021/06/16 17:06:51 Reporting span 2330c4635d95fd5b:2330c4635d95fd5b:0000000000000000:1
time="2021-06-16T17:06:51Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5d80176069057a45:5d80176069057a45:0000000000000000:1"
time="2021-06-16T17:06:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=5d80176069057a45:5d80176069057a45:0000000000000000:1"
time="2021-06-16T17:06:51Z" level=info msg="==--> discovery.FindNetworkService() span:5d80176069057a45:1898e790908fe19a:5d80176069057a45:1"
time="2021-06-16T17:06:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=5d80176069057a45:1898e790908fe19a:5d80176069057a45:1"
time="2021-06-16T17:06:51Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=5d80176069057a45:1898e790908fe19a:5d80176069057a45:1"
time="2021-06-16T17:06:51Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:06:51Z" level=info msg="==----> initRegistryClient() span:5d80176069057a45:7a598dc58481cbbb:1898e790908fe19a:1"
time="2021-06-16T17:06:51Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:06:51Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:06:51Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5d80176069057a45:7a598dc58481cbbb:1898e790908fe19a:1"
time="2021-06-16T17:06:51Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:06:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:06:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00084f3c0 {member1.com}:0xc00084f440 {member2.com}:0xc00084f340]}"
time="2021-06-16T17:06:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:06:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:06:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:06:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:06:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:06:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:06:51Z" level=info msg="Found 3 tlsconfigs. [0xc00021a600 0xc00021a780 0xc00021af00]"
time="2021-06-16T17:06:51Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:52Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=3bb9e02b7ec6e2f3:3bb9e02b7ec6e2f3:0000000000000000:1"
time="2021-06-16T17:06:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3bb9e02b7ec6e2f3:3bb9e02b7ec6e2f3:0000000000000000:1"
time="2021-06-16T17:06:52Z" level=info msg="==--> discovery.FindNetworkService() span:3bb9e02b7ec6e2f3:4ebffac3aabaacf3:3bb9e02b7ec6e2f3:1"
time="2021-06-16T17:06:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3bb9e02b7ec6e2f3:4ebffac3aabaacf3:3bb9e02b7ec6e2f3:1"
time="2021-06-16T17:06:52Z" level=info msg="NSE found 2, retrieve time: 5.661s"
time="2021-06-16T17:06:52Z" level=info msg="FindNetworkService done: time 532.287s [green6bjtj green6gqkr]"
2021/06/16 17:06:52 Reporting span 3bb9e02b7ec6e2f3:4ebffac3aabaacf3:3bb9e02b7ec6e2f3:1
time="2021-06-16T17:06:52Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=3bb9e02b7ec6e2f3:3bb9e02b7ec6e2f3:0000000000000000:1"
2021/06/16 17:06:52 Reporting span 3bb9e02b7ec6e2f3:3bb9e02b7ec6e2f3:0000000000000000:1
time="2021-06-16T17:06:52Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5701886e29633b94:5701886e29633b94:0000000000000000:1"
time="2021-06-16T17:06:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=5701886e29633b94:5701886e29633b94:0000000000000000:1"
time="2021-06-16T17:06:52Z" level=info msg="==--> discovery.FindNetworkService() span:5701886e29633b94:5dd76c86f3f61fb0:5701886e29633b94:1"
time="2021-06-16T17:06:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=5701886e29633b94:5dd76c86f3f61fb0:5701886e29633b94:1"
time="2021-06-16T17:06:52Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=5701886e29633b94:5dd76c86f3f61fb0:5701886e29633b94:1"
time="2021-06-16T17:06:52Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:06:52Z" level=info msg="==----> initRegistryClient() span:5701886e29633b94:1642c6313f83d268:5dd76c86f3f61fb0:1"
time="2021-06-16T17:06:52Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:06:52Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:06:52Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5701886e29633b94:1642c6313f83d268:5dd76c86f3f61fb0:1"
time="2021-06-16T17:06:52Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:06:52Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:06:52Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00047c100 {member1.com}:0xc00047c180 {member2.com}:0xc00047c080]}"
time="2021-06-16T17:06:52Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:06:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:52Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:06:52Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:06:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:06:52Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:06:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:06:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:06:52Z" level=info msg="Found 3 tlsconfigs. [0xc00071e000 0xc00071e180 0xc00071e300]"
time="2021-06-16T17:06:52Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:56Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:06:56Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:06:57Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:06:57Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:01Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:07:01Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:01Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:07:01Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:07:01Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="5d80176069057a45:7a598dc58481cbbb:1898e790908fe19a:1"
2021/06/16 17:07:01 Reporting span 5d80176069057a45:7a598dc58481cbbb:1898e790908fe19a:1
time="2021-06-16T17:07:01Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:07:01Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5d80176069057a45:1898e790908fe19a:5d80176069057a45:1"
time="2021-06-16T17:07:01Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=5d80176069057a45:1898e790908fe19a:5d80176069057a45:1"
2021/06/16 17:07:01 Reporting span 5d80176069057a45:45a884dd3b8cb3eb:1898e790908fe19a:1
time="2021-06-16T17:07:01Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5d80176069057a45:1898e790908fe19a:5d80176069057a45:1"
2021/06/16 17:07:01 Reporting span 5d80176069057a45:1898e790908fe19a:5d80176069057a45:1
time="2021-06-16T17:07:01Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5d80176069057a45:5d80176069057a45:0000000000000000:1"
2021/06/16 17:07:01 Reporting span 5d80176069057a45:5d80176069057a45:0000000000000000:1
time="2021-06-16T17:07:02Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:07:02Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:02Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:07:02Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:07:02Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="5701886e29633b94:1642c6313f83d268:5dd76c86f3f61fb0:1"
2021/06/16 17:07:02 Reporting span 5701886e29633b94:1642c6313f83d268:5dd76c86f3f61fb0:1
time="2021-06-16T17:07:02Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:07:02Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5701886e29633b94:5dd76c86f3f61fb0:5701886e29633b94:1"
time="2021-06-16T17:07:02Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=5701886e29633b94:5dd76c86f3f61fb0:5701886e29633b94:1"
2021/06/16 17:07:02 Reporting span 5701886e29633b94:2f188718632594ea:5dd76c86f3f61fb0:1
time="2021-06-16T17:07:02Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5701886e29633b94:5dd76c86f3f61fb0:5701886e29633b94:1"
2021/06/16 17:07:02 Reporting span 5701886e29633b94:5dd76c86f3f61fb0:5701886e29633b94:1
time="2021-06-16T17:07:02Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5701886e29633b94:5701886e29633b94:0000000000000000:1"
2021/06/16 17:07:02 Reporting span 5701886e29633b94:5701886e29633b94:0000000000000000:1
time="2021-06-16T17:07:21Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=550de13729db364a:550de13729db364a:0000000000000000:1"
time="2021-06-16T17:07:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=550de13729db364a:550de13729db364a:0000000000000000:1"
time="2021-06-16T17:07:21Z" level=info msg="==--> discovery.FindNetworkService() span:550de13729db364a:670d0da9e853d502:550de13729db364a:1"
time="2021-06-16T17:07:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=550de13729db364a:670d0da9e853d502:550de13729db364a:1"
time="2021-06-16T17:07:21Z" level=info msg="NSE found 2, retrieve time: 4.33s"
time="2021-06-16T17:07:21Z" level=info msg="FindNetworkService done: time 60.921s [green6bjtj green6gqkr]"
2021/06/16 17:07:21 Reporting span 550de13729db364a:670d0da9e853d502:550de13729db364a:1
time="2021-06-16T17:07:21Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=550de13729db364a:550de13729db364a:0000000000000000:1"
2021/06/16 17:07:21 Reporting span 550de13729db364a:550de13729db364a:0000000000000000:1
time="2021-06-16T17:07:21Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1b25206740727f5b:1b25206740727f5b:0000000000000000:1"
time="2021-06-16T17:07:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=1b25206740727f5b:1b25206740727f5b:0000000000000000:1"
time="2021-06-16T17:07:21Z" level=info msg="==--> discovery.FindNetworkService() span:1b25206740727f5b:023f44dab7cf4ebf:1b25206740727f5b:1"
time="2021-06-16T17:07:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=1b25206740727f5b:023f44dab7cf4ebf:1b25206740727f5b:1"
time="2021-06-16T17:07:21Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=1b25206740727f5b:023f44dab7cf4ebf:1b25206740727f5b:1"
time="2021-06-16T17:07:21Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:07:21Z" level=info msg="==----> initRegistryClient() span:1b25206740727f5b:3a24631a269d0463:023f44dab7cf4ebf:1"
time="2021-06-16T17:07:21Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:07:21Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:07:21Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1b25206740727f5b:3a24631a269d0463:023f44dab7cf4ebf:1"
time="2021-06-16T17:07:21Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:07:21Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:07:21Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00078c7c0 {member1.com}:0xc00078c740 {member2.com}:0xc00078c6c0]}"
time="2021-06-16T17:07:21Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:07:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:21Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:07:21Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:07:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:07:21Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:07:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:07:21Z" level=info msg="Found 3 tlsconfigs. [0xc0006b6780 0xc0006b6900 0xc0006b6a80]"
time="2021-06-16T17:07:21Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:22Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=0a12c468e00c4945:0a12c468e00c4945:0000000000000000:1"
time="2021-06-16T17:07:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=0a12c468e00c4945:0a12c468e00c4945:0000000000000000:1"
time="2021-06-16T17:07:22Z" level=info msg="==--> discovery.FindNetworkService() span:0a12c468e00c4945:77a35cc7e6586e10:0a12c468e00c4945:1"
time="2021-06-16T17:07:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=0a12c468e00c4945:77a35cc7e6586e10:0a12c468e00c4945:1"
time="2021-06-16T17:07:22Z" level=info msg="NSE found 2, retrieve time: 5.51s"
time="2021-06-16T17:07:22Z" level=info msg="FindNetworkService done: time 48.06s [green6bjtj green6gqkr]"
2021/06/16 17:07:22 Reporting span 0a12c468e00c4945:77a35cc7e6586e10:0a12c468e00c4945:1
time="2021-06-16T17:07:22Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=0a12c468e00c4945:0a12c468e00c4945:0000000000000000:1"
2021/06/16 17:07:22 Reporting span 0a12c468e00c4945:0a12c468e00c4945:0000000000000000:1
time="2021-06-16T17:07:22Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=117bb39491ce60eb:117bb39491ce60eb:0000000000000000:1"
time="2021-06-16T17:07:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=117bb39491ce60eb:117bb39491ce60eb:0000000000000000:1"
time="2021-06-16T17:07:22Z" level=info msg="==--> discovery.FindNetworkService() span:117bb39491ce60eb:00aabde47cd2ed81:117bb39491ce60eb:1"
time="2021-06-16T17:07:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=117bb39491ce60eb:00aabde47cd2ed81:117bb39491ce60eb:1"
time="2021-06-16T17:07:22Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=117bb39491ce60eb:00aabde47cd2ed81:117bb39491ce60eb:1"
time="2021-06-16T17:07:22Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:07:22Z" level=info msg="==----> initRegistryClient() span:117bb39491ce60eb:72d259a50d0deafd:00aabde47cd2ed81:1"
time="2021-06-16T17:07:22Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:07:22Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:07:22Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="117bb39491ce60eb:72d259a50d0deafd:00aabde47cd2ed81:1"
time="2021-06-16T17:07:22Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:07:22Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:07:22Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004d5780 {member1.com}:0xc0004d5840 {member2.com}:0xc0004d5700]}"
time="2021-06-16T17:07:22Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:07:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:22Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:07:22Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:07:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:07:22Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:07:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:07:22Z" level=info msg="Found 3 tlsconfigs. [0xc000768780 0xc000768c00 0xc000769080]"
time="2021-06-16T17:07:22Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:26Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:07:26Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:27Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:07:27Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:31Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:07:31Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:31Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:07:31Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:07:31Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="1b25206740727f5b:3a24631a269d0463:023f44dab7cf4ebf:1"
2021/06/16 17:07:31 Reporting span 1b25206740727f5b:3a24631a269d0463:023f44dab7cf4ebf:1
time="2021-06-16T17:07:31Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:07:31Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1b25206740727f5b:023f44dab7cf4ebf:1b25206740727f5b:1"
time="2021-06-16T17:07:31Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=1b25206740727f5b:023f44dab7cf4ebf:1b25206740727f5b:1"
2021/06/16 17:07:31 Reporting span 1b25206740727f5b:5862fe3a70c0f641:023f44dab7cf4ebf:1
time="2021-06-16T17:07:31Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1b25206740727f5b:023f44dab7cf4ebf:1b25206740727f5b:1"
2021/06/16 17:07:31 Reporting span 1b25206740727f5b:023f44dab7cf4ebf:1b25206740727f5b:1
time="2021-06-16T17:07:31Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1b25206740727f5b:1b25206740727f5b:0000000000000000:1"
2021/06/16 17:07:31 Reporting span 1b25206740727f5b:1b25206740727f5b:0000000000000000:1
time="2021-06-16T17:07:32Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:07:32Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:32Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:07:32Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:07:32Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="117bb39491ce60eb:72d259a50d0deafd:00aabde47cd2ed81:1"
2021/06/16 17:07:32 Reporting span 117bb39491ce60eb:72d259a50d0deafd:00aabde47cd2ed81:1
time="2021-06-16T17:07:32Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:07:32Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=117bb39491ce60eb:00aabde47cd2ed81:117bb39491ce60eb:1"
time="2021-06-16T17:07:32Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=117bb39491ce60eb:00aabde47cd2ed81:117bb39491ce60eb:1"
2021/06/16 17:07:32 Reporting span 117bb39491ce60eb:7cc0d5f8b8f15511:00aabde47cd2ed81:1
time="2021-06-16T17:07:32Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=117bb39491ce60eb:00aabde47cd2ed81:117bb39491ce60eb:1"
2021/06/16 17:07:32 Reporting span 117bb39491ce60eb:00aabde47cd2ed81:117bb39491ce60eb:1
time="2021-06-16T17:07:32Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=117bb39491ce60eb:117bb39491ce60eb:0000000000000000:1"
2021/06/16 17:07:32 Reporting span 117bb39491ce60eb:117bb39491ce60eb:0000000000000000:1
time="2021-06-16T17:07:51Z" level=info msg="Forward BulkRegisterNSE request: network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" > " operation=ProxyNsmgr.BulkRegisterNSE span="65c2b76707fee904:397d8a7c23712cab:2089e007e5400dde:1"
2021/06/16 17:07:51 Reporting span 65c2b76707fee904:1b3ffc0eb4b382ac:397d8a7c23712cab:1
time="2021-06-16T17:07:51Z" level=warning msg="Error forwarding BulkRegisterNSE request to wcm-proxy-nsmgr:5005 : EOF" operation=ProxyNsmgr.BulkRegisterNSE span="65c2b76707fee904:397d8a7c23712cab:2089e007e5400dde:1"
time="2021-06-16T17:07:51Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=69fba634b7e528e1:69fba634b7e528e1:0000000000000000:1"
time="2021-06-16T17:07:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=69fba634b7e528e1:69fba634b7e528e1:0000000000000000:1"
time="2021-06-16T17:07:51Z" level=info msg="==--> discovery.FindNetworkService() span:69fba634b7e528e1:542e7a742eb16ba4:69fba634b7e528e1:1"
time="2021-06-16T17:07:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=69fba634b7e528e1:542e7a742eb16ba4:69fba634b7e528e1:1"
time="2021-06-16T17:07:51Z" level=info msg="NSE found 2, retrieve time: 4.37s"
time="2021-06-16T17:07:51Z" level=info msg="FindNetworkService done: time 75.851s [green6bjtj green6gqkr]"
2021/06/16 17:07:51 Reporting span 69fba634b7e528e1:542e7a742eb16ba4:69fba634b7e528e1:1
time="2021-06-16T17:07:51Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=69fba634b7e528e1:69fba634b7e528e1:0000000000000000:1"
2021/06/16 17:07:51 Reporting span 69fba634b7e528e1:69fba634b7e528e1:0000000000000000:1
time="2021-06-16T17:07:51Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=764b83cd8da6b15c:764b83cd8da6b15c:0000000000000000:1"
time="2021-06-16T17:07:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=764b83cd8da6b15c:764b83cd8da6b15c:0000000000000000:1"
time="2021-06-16T17:07:51Z" level=info msg="==--> discovery.FindNetworkService() span:764b83cd8da6b15c:09c8985e297a59b8:764b83cd8da6b15c:1"
time="2021-06-16T17:07:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=764b83cd8da6b15c:09c8985e297a59b8:764b83cd8da6b15c:1"
time="2021-06-16T17:07:51Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=764b83cd8da6b15c:09c8985e297a59b8:764b83cd8da6b15c:1"
time="2021-06-16T17:07:51Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:07:51Z" level=info msg="==----> initRegistryClient() span:764b83cd8da6b15c:694dd933deeccec0:09c8985e297a59b8:1"
time="2021-06-16T17:07:51Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:07:51Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:07:51Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="764b83cd8da6b15c:694dd933deeccec0:09c8985e297a59b8:1"
time="2021-06-16T17:07:51Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:07:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:07:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0003b3100 {member1.com}:0xc0003b3180 {member2.com}:0xc0003b3080]}"
time="2021-06-16T17:07:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:07:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:07:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:07:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:07:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:07:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:07:51Z" level=info msg="Found 3 tlsconfigs. [0xc000768300 0xc000768480 0xc000768600]"
time="2021-06-16T17:07:51Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:52Z" level=info msg="Forward BulkRegisterNSE request: network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6gqkr\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" > " operation=ProxyNsmgr.BulkRegisterNSE span="406bf10b3b03d016:5918e7597a476d30:67e2e892cdf20e69:1"
2021/06/16 17:07:52 Reporting span 406bf10b3b03d016:3dab7c968d8ad74f:5918e7597a476d30:1
time="2021-06-16T17:07:52Z" level=warning msg="Error forwarding BulkRegisterNSE request to wcm-proxy-nsmgr:5005 : EOF" operation=ProxyNsmgr.BulkRegisterNSE span="406bf10b3b03d016:5918e7597a476d30:67e2e892cdf20e69:1"
time="2021-06-16T17:07:52Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7ac512f029ff88bb:7ac512f029ff88bb:0000000000000000:1"
time="2021-06-16T17:07:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7ac512f029ff88bb:7ac512f029ff88bb:0000000000000000:1"
time="2021-06-16T17:07:52Z" level=info msg="==--> discovery.FindNetworkService() span:7ac512f029ff88bb:2b2e14677ee1d35e:7ac512f029ff88bb:1"
time="2021-06-16T17:07:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7ac512f029ff88bb:2b2e14677ee1d35e:7ac512f029ff88bb:1"
time="2021-06-16T17:07:52Z" level=info msg="NSE found 2, retrieve time: 5.98s"
time="2021-06-16T17:07:52Z" level=info msg="FindNetworkService done: time 71.991s [green6bjtj green6gqkr]"
2021/06/16 17:07:52 Reporting span 7ac512f029ff88bb:2b2e14677ee1d35e:7ac512f029ff88bb:1
time="2021-06-16T17:07:52Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7ac512f029ff88bb:7ac512f029ff88bb:0000000000000000:1"
2021/06/16 17:07:52 Reporting span 7ac512f029ff88bb:7ac512f029ff88bb:0000000000000000:1
time="2021-06-16T17:07:52Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=469a1c17e5eec4fa:469a1c17e5eec4fa:0000000000000000:1"
time="2021-06-16T17:07:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=469a1c17e5eec4fa:469a1c17e5eec4fa:0000000000000000:1"
time="2021-06-16T17:07:52Z" level=info msg="==--> discovery.FindNetworkService() span:469a1c17e5eec4fa:770e11aa553ac048:469a1c17e5eec4fa:1"
time="2021-06-16T17:07:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=469a1c17e5eec4fa:770e11aa553ac048:469a1c17e5eec4fa:1"
time="2021-06-16T17:07:52Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=469a1c17e5eec4fa:770e11aa553ac048:469a1c17e5eec4fa:1"
time="2021-06-16T17:07:52Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:07:52Z" level=info msg="==----> initRegistryClient() span:469a1c17e5eec4fa:308c59161b1f6875:770e11aa553ac048:1"
time="2021-06-16T17:07:52Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:07:52Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:07:52Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="469a1c17e5eec4fa:308c59161b1f6875:770e11aa553ac048:1"
time="2021-06-16T17:07:52Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:07:52Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:07:52Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0002ec880 {member1.com}:0xc0002ec7c0 {member2.com}:0xc0002ec740]}"
time="2021-06-16T17:07:52Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:07:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:52Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:07:52Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:07:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:07:52Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:07:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:07:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:07:52Z" level=info msg="Found 3 tlsconfigs. [0xc0006c0d80 0xc0006c0f00 0xc0006c1200]"
time="2021-06-16T17:07:52Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:56Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:07:56Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:07:57Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:07:57Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:01Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:01Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:01Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:01Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:01Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="764b83cd8da6b15c:694dd933deeccec0:09c8985e297a59b8:1"
2021/06/16 17:08:01 Reporting span 764b83cd8da6b15c:694dd933deeccec0:09c8985e297a59b8:1
time="2021-06-16T17:08:01Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:08:01Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=764b83cd8da6b15c:09c8985e297a59b8:764b83cd8da6b15c:1"
time="2021-06-16T17:08:01Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=764b83cd8da6b15c:09c8985e297a59b8:764b83cd8da6b15c:1"
2021/06/16 17:08:01 Reporting span 764b83cd8da6b15c:20c3b156a202dcc3:09c8985e297a59b8:1
time="2021-06-16T17:08:01Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=764b83cd8da6b15c:09c8985e297a59b8:764b83cd8da6b15c:1"
2021/06/16 17:08:01 Reporting span 764b83cd8da6b15c:09c8985e297a59b8:764b83cd8da6b15c:1
time="2021-06-16T17:08:01Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=764b83cd8da6b15c:764b83cd8da6b15c:0000000000000000:1"
2021/06/16 17:08:01 Reporting span 764b83cd8da6b15c:764b83cd8da6b15c:0000000000000000:1
time="2021-06-16T17:08:02Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:02Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:02Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:02Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:02Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="469a1c17e5eec4fa:308c59161b1f6875:770e11aa553ac048:1"
2021/06/16 17:08:02 Reporting span 469a1c17e5eec4fa:308c59161b1f6875:770e11aa553ac048:1
time="2021-06-16T17:08:02Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:08:02Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=469a1c17e5eec4fa:770e11aa553ac048:469a1c17e5eec4fa:1"
time="2021-06-16T17:08:02Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=469a1c17e5eec4fa:770e11aa553ac048:469a1c17e5eec4fa:1"
2021/06/16 17:08:02 Reporting span 469a1c17e5eec4fa:1114fcba43ef5cf4:770e11aa553ac048:1
time="2021-06-16T17:08:02Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=469a1c17e5eec4fa:770e11aa553ac048:469a1c17e5eec4fa:1"
2021/06/16 17:08:02 Reporting span 469a1c17e5eec4fa:770e11aa553ac048:469a1c17e5eec4fa:1
time="2021-06-16T17:08:02Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=469a1c17e5eec4fa:469a1c17e5eec4fa:0000000000000000:1"
2021/06/16 17:08:02 Reporting span 469a1c17e5eec4fa:469a1c17e5eec4fa:0000000000000000:1
time="2021-06-16T17:08:06Z" level=info msg="Requesting NseRegistryClient..."
time="2021-06-16T17:08:07Z" level=info msg="Requesting NseRegistryClient..."
time="2021-06-16T17:08:21Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=3552ece098a29067:3552ece098a29067:0000000000000000:1"
time="2021-06-16T17:08:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3552ece098a29067:3552ece098a29067:0000000000000000:1"
time="2021-06-16T17:08:21Z" level=info msg="==--> discovery.FindNetworkService() span:3552ece098a29067:1c3ba1e90a0ab49b:3552ece098a29067:1"
time="2021-06-16T17:08:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3552ece098a29067:1c3ba1e90a0ab49b:3552ece098a29067:1"
time="2021-06-16T17:08:21Z" level=info msg="NSE found 2, retrieve time: 5.53s"
time="2021-06-16T17:08:21Z" level=info msg="FindNetworkService done: time 66.421s [green6bjtj green6gqkr]"
2021/06/16 17:08:21 Reporting span 3552ece098a29067:1c3ba1e90a0ab49b:3552ece098a29067:1
time="2021-06-16T17:08:21Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=3552ece098a29067:3552ece098a29067:0000000000000000:1"
2021/06/16 17:08:21 Reporting span 3552ece098a29067:3552ece098a29067:0000000000000000:1
time="2021-06-16T17:08:21Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1aea50bb9f112174:1aea50bb9f112174:0000000000000000:1"
time="2021-06-16T17:08:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=1aea50bb9f112174:1aea50bb9f112174:0000000000000000:1"
time="2021-06-16T17:08:21Z" level=info msg="==--> discovery.FindNetworkService() span:1aea50bb9f112174:37dd9c41911dc55d:1aea50bb9f112174:1"
time="2021-06-16T17:08:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=1aea50bb9f112174:37dd9c41911dc55d:1aea50bb9f112174:1"
time="2021-06-16T17:08:21Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=1aea50bb9f112174:37dd9c41911dc55d:1aea50bb9f112174:1"
time="2021-06-16T17:08:21Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:08:21Z" level=info msg="==----> initRegistryClient() span:1aea50bb9f112174:2d9022d0c8b28602:37dd9c41911dc55d:1"
time="2021-06-16T17:08:21Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:08:21Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:08:21Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1aea50bb9f112174:2d9022d0c8b28602:37dd9c41911dc55d:1"
time="2021-06-16T17:08:21Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:08:21Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:08:21Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00028f700 {member1.com}:0xc00028f780 {member2.com}:0xc00028f680]}"
time="2021-06-16T17:08:21Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:08:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:21Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:08:21Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:08:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:08:21Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:08:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:08:21Z" level=info msg="Found 3 tlsconfigs. [0xc00071f980 0xc00071fe00 0xc0006b6300]"
time="2021-06-16T17:08:21Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:22Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=3bafc87f7a7a30e5:3bafc87f7a7a30e5:0000000000000000:1"
time="2021-06-16T17:08:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3bafc87f7a7a30e5:3bafc87f7a7a30e5:0000000000000000:1"
time="2021-06-16T17:08:22Z" level=info msg="==--> discovery.FindNetworkService() span:3bafc87f7a7a30e5:3de4367bc1e85218:3bafc87f7a7a30e5:1"
time="2021-06-16T17:08:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3bafc87f7a7a30e5:3de4367bc1e85218:3bafc87f7a7a30e5:1"
time="2021-06-16T17:08:22Z" level=info msg="NSE found 2, retrieve time: 5.64s"
time="2021-06-16T17:08:22Z" level=info msg="FindNetworkService done: time 46.25s [green6bjtj green6gqkr]"
2021/06/16 17:08:22 Reporting span 3bafc87f7a7a30e5:3de4367bc1e85218:3bafc87f7a7a30e5:1
time="2021-06-16T17:08:22Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=3bafc87f7a7a30e5:3bafc87f7a7a30e5:0000000000000000:1"
2021/06/16 17:08:22 Reporting span 3bafc87f7a7a30e5:3bafc87f7a7a30e5:0000000000000000:1
time="2021-06-16T17:08:22Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=03ce30a6c329177e:03ce30a6c329177e:0000000000000000:1"
time="2021-06-16T17:08:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=03ce30a6c329177e:03ce30a6c329177e:0000000000000000:1"
time="2021-06-16T17:08:22Z" level=info msg="==--> discovery.FindNetworkService() span:03ce30a6c329177e:5eeed7f7d6ef8de0:03ce30a6c329177e:1"
time="2021-06-16T17:08:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=03ce30a6c329177e:5eeed7f7d6ef8de0:03ce30a6c329177e:1"
time="2021-06-16T17:08:22Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=03ce30a6c329177e:5eeed7f7d6ef8de0:03ce30a6c329177e:1"
time="2021-06-16T17:08:22Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:08:22Z" level=info msg="==----> initRegistryClient() span:03ce30a6c329177e:44772f9c81c92dc5:5eeed7f7d6ef8de0:1"
time="2021-06-16T17:08:22Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:08:22Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:08:22Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="03ce30a6c329177e:44772f9c81c92dc5:5eeed7f7d6ef8de0:1"
time="2021-06-16T17:08:22Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:08:22Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:08:22Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00084f380 {member1.com}:0xc00084f400 {member2.com}:0xc00084f300]}"
time="2021-06-16T17:08:22Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:08:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:22Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:08:22Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:08:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:08:22Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:08:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:08:22Z" level=info msg="Found 3 tlsconfigs. [0xc000795080 0xc000795200 0xc000795380]"
time="2021-06-16T17:08:22Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:26Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:26Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:27Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:27Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:31Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:31Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:31Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:31Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:31Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="1aea50bb9f112174:2d9022d0c8b28602:37dd9c41911dc55d:1"
2021/06/16 17:08:31 Reporting span 1aea50bb9f112174:2d9022d0c8b28602:37dd9c41911dc55d:1
time="2021-06-16T17:08:31Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:08:31Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1aea50bb9f112174:37dd9c41911dc55d:1aea50bb9f112174:1"
time="2021-06-16T17:08:31Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=1aea50bb9f112174:37dd9c41911dc55d:1aea50bb9f112174:1"
2021/06/16 17:08:31 Reporting span 1aea50bb9f112174:3df66a3b121460c0:37dd9c41911dc55d:1
time="2021-06-16T17:08:31Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1aea50bb9f112174:37dd9c41911dc55d:1aea50bb9f112174:1"
2021/06/16 17:08:31 Reporting span 1aea50bb9f112174:37dd9c41911dc55d:1aea50bb9f112174:1
time="2021-06-16T17:08:31Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1aea50bb9f112174:1aea50bb9f112174:0000000000000000:1"
2021/06/16 17:08:31 Reporting span 1aea50bb9f112174:1aea50bb9f112174:0000000000000000:1
time="2021-06-16T17:08:32Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:32Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:32Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:32Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:08:32Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="03ce30a6c329177e:44772f9c81c92dc5:5eeed7f7d6ef8de0:1"
2021/06/16 17:08:32 Reporting span 03ce30a6c329177e:44772f9c81c92dc5:5eeed7f7d6ef8de0:1
time="2021-06-16T17:08:32Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:08:32Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=03ce30a6c329177e:5eeed7f7d6ef8de0:03ce30a6c329177e:1"
time="2021-06-16T17:08:32Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=03ce30a6c329177e:5eeed7f7d6ef8de0:03ce30a6c329177e:1"
2021/06/16 17:08:32 Reporting span 03ce30a6c329177e:2aa0d76010127e43:5eeed7f7d6ef8de0:1
time="2021-06-16T17:08:32Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=03ce30a6c329177e:5eeed7f7d6ef8de0:03ce30a6c329177e:1"
2021/06/16 17:08:32 Reporting span 03ce30a6c329177e:5eeed7f7d6ef8de0:03ce30a6c329177e:1
time="2021-06-16T17:08:32Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=03ce30a6c329177e:03ce30a6c329177e:0000000000000000:1"
2021/06/16 17:08:32 Reporting span 03ce30a6c329177e:03ce30a6c329177e:0000000000000000:1
time="2021-06-16T17:08:51Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=4d316cb1f6906211:4d316cb1f6906211:0000000000000000:1"
time="2021-06-16T17:08:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=4d316cb1f6906211:4d316cb1f6906211:0000000000000000:1"
time="2021-06-16T17:08:51Z" level=info msg="==--> discovery.FindNetworkService() span:4d316cb1f6906211:4d7a329f4a7f9cd0:4d316cb1f6906211:1"
time="2021-06-16T17:08:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=4d316cb1f6906211:4d7a329f4a7f9cd0:4d316cb1f6906211:1"
time="2021-06-16T17:08:51Z" level=info msg="NSE found 2, retrieve time: 5.1s"
time="2021-06-16T17:08:51Z" level=info msg="FindNetworkService done: time 35.88s [green6bjtj green6gqkr]"
2021/06/16 17:08:51 Reporting span 4d316cb1f6906211:4d7a329f4a7f9cd0:4d316cb1f6906211:1
time="2021-06-16T17:08:51Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=4d316cb1f6906211:4d316cb1f6906211:0000000000000000:1"
2021/06/16 17:08:51 Reporting span 4d316cb1f6906211:4d316cb1f6906211:0000000000000000:1
time="2021-06-16T17:08:51Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=002cee24e933b170:002cee24e933b170:0000000000000000:1"
time="2021-06-16T17:08:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=002cee24e933b170:002cee24e933b170:0000000000000000:1"
time="2021-06-16T17:08:51Z" level=info msg="==--> discovery.FindNetworkService() span:002cee24e933b170:6d78977b5ef30694:002cee24e933b170:1"
time="2021-06-16T17:08:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=002cee24e933b170:6d78977b5ef30694:002cee24e933b170:1"
time="2021-06-16T17:08:51Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=002cee24e933b170:6d78977b5ef30694:002cee24e933b170:1"
time="2021-06-16T17:08:51Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:08:51Z" level=info msg="==----> initRegistryClient() span:002cee24e933b170:40d37e99650363b9:6d78977b5ef30694:1"
time="2021-06-16T17:08:51Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:08:51Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:08:51Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="002cee24e933b170:40d37e99650363b9:6d78977b5ef30694:1"
time="2021-06-16T17:08:51Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:08:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:08:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000808f40 {member1.com}:0xc000808ec0 {member2.com}:0xc000808e40]}"
time="2021-06-16T17:08:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:08:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:08:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:08:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:08:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:08:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:08:51Z" level=info msg="Found 3 tlsconfigs. [0xc000769500 0xc000769680 0xc000769800]"
time="2021-06-16T17:08:51Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:52Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2b9114cbf109a4cb:2b9114cbf109a4cb:0000000000000000:1"
time="2021-06-16T17:08:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2b9114cbf109a4cb:2b9114cbf109a4cb:0000000000000000:1"
time="2021-06-16T17:08:52Z" level=info msg="==--> discovery.FindNetworkService() span:2b9114cbf109a4cb:25520511a8756892:2b9114cbf109a4cb:1"
time="2021-06-16T17:08:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2b9114cbf109a4cb:25520511a8756892:2b9114cbf109a4cb:1"
time="2021-06-16T17:08:52Z" level=info msg="NSE found 2, retrieve time: 5.28s"
time="2021-06-16T17:08:52Z" level=info msg="FindNetworkService done: time 73.031s [green6bjtj green6gqkr]"
2021/06/16 17:08:52 Reporting span 2b9114cbf109a4cb:25520511a8756892:2b9114cbf109a4cb:1
time="2021-06-16T17:08:52Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2b9114cbf109a4cb:2b9114cbf109a4cb:0000000000000000:1"
2021/06/16 17:08:52 Reporting span 2b9114cbf109a4cb:2b9114cbf109a4cb:0000000000000000:1
time="2021-06-16T17:08:52Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5d2526f3cbb4d01a:5d2526f3cbb4d01a:0000000000000000:1"
time="2021-06-16T17:08:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=5d2526f3cbb4d01a:5d2526f3cbb4d01a:0000000000000000:1"
time="2021-06-16T17:08:52Z" level=info msg="==--> discovery.FindNetworkService() span:5d2526f3cbb4d01a:44de0f66c878ff0e:5d2526f3cbb4d01a:1"
time="2021-06-16T17:08:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=5d2526f3cbb4d01a:44de0f66c878ff0e:5d2526f3cbb4d01a:1"
time="2021-06-16T17:08:52Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=5d2526f3cbb4d01a:44de0f66c878ff0e:5d2526f3cbb4d01a:1"
time="2021-06-16T17:08:52Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:08:52Z" level=info msg="==----> initRegistryClient() span:5d2526f3cbb4d01a:711ab7cb508b4595:44de0f66c878ff0e:1"
time="2021-06-16T17:08:52Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:08:52Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:08:52Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5d2526f3cbb4d01a:711ab7cb508b4595:44de0f66c878ff0e:1"
time="2021-06-16T17:08:52Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:08:52Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:08:52Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000809d40 {member1.com}:0xc000809cc0 {member2.com}:0xc000809c40]}"
time="2021-06-16T17:08:52Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:08:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:52Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:08:52Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:08:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:08:52Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:08:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:08:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:08:52Z" level=info msg="Found 3 tlsconfigs. [0xc0001f1980 0xc0001f1e00 0xc00071e000]"
time="2021-06-16T17:08:52Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:56Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:56Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:08:57Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:08:57Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:01Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:09:01Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:01Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:09:01Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:09:01Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="002cee24e933b170:40d37e99650363b9:6d78977b5ef30694:1"
2021/06/16 17:09:01 Reporting span 002cee24e933b170:40d37e99650363b9:6d78977b5ef30694:1
time="2021-06-16T17:09:01Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:09:01Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=002cee24e933b170:6d78977b5ef30694:002cee24e933b170:1"
time="2021-06-16T17:09:01Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=002cee24e933b170:6d78977b5ef30694:002cee24e933b170:1"
2021/06/16 17:09:01 Reporting span 002cee24e933b170:4abed242b46cc55e:6d78977b5ef30694:1
time="2021-06-16T17:09:01Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=002cee24e933b170:6d78977b5ef30694:002cee24e933b170:1"
2021/06/16 17:09:01 Reporting span 002cee24e933b170:6d78977b5ef30694:002cee24e933b170:1
time="2021-06-16T17:09:01Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=002cee24e933b170:002cee24e933b170:0000000000000000:1"
2021/06/16 17:09:01 Reporting span 002cee24e933b170:002cee24e933b170:0000000000000000:1
time="2021-06-16T17:09:02Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:09:02Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:02Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:09:02Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:09:02Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="5d2526f3cbb4d01a:711ab7cb508b4595:44de0f66c878ff0e:1"
2021/06/16 17:09:02 Reporting span 5d2526f3cbb4d01a:711ab7cb508b4595:44de0f66c878ff0e:1
time="2021-06-16T17:09:02Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:09:02Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5d2526f3cbb4d01a:44de0f66c878ff0e:5d2526f3cbb4d01a:1"
time="2021-06-16T17:09:02Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=5d2526f3cbb4d01a:44de0f66c878ff0e:5d2526f3cbb4d01a:1"
2021/06/16 17:09:02 Reporting span 5d2526f3cbb4d01a:4dff808ca1cbf688:44de0f66c878ff0e:1
time="2021-06-16T17:09:02Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5d2526f3cbb4d01a:44de0f66c878ff0e:5d2526f3cbb4d01a:1"
2021/06/16 17:09:02 Reporting span 5d2526f3cbb4d01a:44de0f66c878ff0e:5d2526f3cbb4d01a:1
time="2021-06-16T17:09:02Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5d2526f3cbb4d01a:5d2526f3cbb4d01a:0000000000000000:1"
2021/06/16 17:09:02 Reporting span 5d2526f3cbb4d01a:5d2526f3cbb4d01a:0000000000000000:1
time="2021-06-16T17:09:21Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6dcc6cccc61622b7:6dcc6cccc61622b7:0000000000000000:1"
time="2021-06-16T17:09:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6dcc6cccc61622b7:6dcc6cccc61622b7:0000000000000000:1"
time="2021-06-16T17:09:21Z" level=info msg="==--> discovery.FindNetworkService() span:6dcc6cccc61622b7:753727498c6b0a5d:6dcc6cccc61622b7:1"
time="2021-06-16T17:09:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6dcc6cccc61622b7:753727498c6b0a5d:6dcc6cccc61622b7:1"
time="2021-06-16T17:09:21Z" level=info msg="NSE found 2, retrieve time: 5.7s"
time="2021-06-16T17:09:21Z" level=info msg="FindNetworkService done: time 72.291s [green6bjtj green6gqkr]"
2021/06/16 17:09:21 Reporting span 6dcc6cccc61622b7:753727498c6b0a5d:6dcc6cccc61622b7:1
time="2021-06-16T17:09:21Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6dcc6cccc61622b7:6dcc6cccc61622b7:0000000000000000:1"
2021/06/16 17:09:21 Reporting span 6dcc6cccc61622b7:6dcc6cccc61622b7:0000000000000000:1
time="2021-06-16T17:09:21Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=200faa4600621a7a:200faa4600621a7a:0000000000000000:1"
time="2021-06-16T17:09:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=200faa4600621a7a:200faa4600621a7a:0000000000000000:1"
time="2021-06-16T17:09:21Z" level=info msg="==--> discovery.FindNetworkService() span:200faa4600621a7a:317202db9f9cc71f:200faa4600621a7a:1"
time="2021-06-16T17:09:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=200faa4600621a7a:317202db9f9cc71f:200faa4600621a7a:1"
time="2021-06-16T17:09:21Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=200faa4600621a7a:317202db9f9cc71f:200faa4600621a7a:1"
time="2021-06-16T17:09:21Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:09:21Z" level=info msg="==----> initRegistryClient() span:200faa4600621a7a:4618918b5e543973:317202db9f9cc71f:1"
time="2021-06-16T17:09:21Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:09:21Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:09:21Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="200faa4600621a7a:4618918b5e543973:317202db9f9cc71f:1"
time="2021-06-16T17:09:21Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:09:21Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:09:21Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000808240 {member1.com}:0xc0008082c0 {member2.com}:0xc0008081c0]}"
time="2021-06-16T17:09:21Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:09:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:21Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:09:21Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:09:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:09:21Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:09:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:09:21Z" level=info msg="Found 3 tlsconfigs. [0xc000768300 0xc000768480 0xc000768600]"
time="2021-06-16T17:09:21Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:22Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=4746117ec3e7be5e:4746117ec3e7be5e:0000000000000000:1"
time="2021-06-16T17:09:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=4746117ec3e7be5e:4746117ec3e7be5e:0000000000000000:1"
time="2021-06-16T17:09:22Z" level=info msg="==--> discovery.FindNetworkService() span:4746117ec3e7be5e:06f280967cc38cd0:4746117ec3e7be5e:1"
time="2021-06-16T17:09:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=4746117ec3e7be5e:06f280967cc38cd0:4746117ec3e7be5e:1"
time="2021-06-16T17:09:22Z" level=info msg="NSE found 2, retrieve time: 5.3s"
time="2021-06-16T17:09:22Z" level=info msg="FindNetworkService done: time 67.941s [green6bjtj green6gqkr]"
2021/06/16 17:09:22 Reporting span 4746117ec3e7be5e:06f280967cc38cd0:4746117ec3e7be5e:1
time="2021-06-16T17:09:22Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=4746117ec3e7be5e:4746117ec3e7be5e:0000000000000000:1"
2021/06/16 17:09:22 Reporting span 4746117ec3e7be5e:4746117ec3e7be5e:0000000000000000:1
time="2021-06-16T17:09:22Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=4ddca28660d2184b:4ddca28660d2184b:0000000000000000:1"
time="2021-06-16T17:09:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=4ddca28660d2184b:4ddca28660d2184b:0000000000000000:1"
time="2021-06-16T17:09:22Z" level=info msg="==--> discovery.FindNetworkService() span:4ddca28660d2184b:50ce2c6ea3267521:4ddca28660d2184b:1"
time="2021-06-16T17:09:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=4ddca28660d2184b:50ce2c6ea3267521:4ddca28660d2184b:1"
time="2021-06-16T17:09:22Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=4ddca28660d2184b:50ce2c6ea3267521:4ddca28660d2184b:1"
time="2021-06-16T17:09:22Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:09:22Z" level=info msg="==----> initRegistryClient() span:4ddca28660d2184b:231e1636ec8bb075:50ce2c6ea3267521:1"
time="2021-06-16T17:09:22Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:09:22Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:09:22Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4ddca28660d2184b:231e1636ec8bb075:50ce2c6ea3267521:1"
time="2021-06-16T17:09:22Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:09:22Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:09:22Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00084efc0 {member1.com}:0xc00084f040 {member2.com}:0xc00084ef40]}"
time="2021-06-16T17:09:22Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:09:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:22Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:09:22Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:09:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:09:22Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:09:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:09:22Z" level=info msg="Found 3 tlsconfigs. [0xc0006b6900 0xc0006b6a80 0xc0006b6c00]"
time="2021-06-16T17:09:22Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:26Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:09:26Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:27Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:09:27Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:28Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7df889a351f36def:04ba05e49edc02fc:105e45f0ccf76262:1"
time="2021-06-16T17:09:28Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7df889a351f36def:04ba05e49edc02fc:105e45f0ccf76262:1"
time="2021-06-16T17:09:28Z" level=info msg="==--> discovery.FindNetworkService() span:7df889a351f36def:33b56d513731f6ba:04ba05e49edc02fc:1"
time="2021-06-16T17:09:28Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7df889a351f36def:33b56d513731f6ba:04ba05e49edc02fc:1"
time="2021-06-16T17:09:28Z" level=info msg="NSE found 2, retrieve time: 5.24s"
time="2021-06-16T17:09:28Z" level=info msg="FindNetworkService done: time 69.301s [green6bjtj green6gqkr]"
2021/06/16 17:09:28 Reporting span 7df889a351f36def:33b56d513731f6ba:04ba05e49edc02fc:1
time="2021-06-16T17:09:28Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7df889a351f36def:04ba05e49edc02fc:105e45f0ccf76262:1"
2021/06/16 17:09:28 Reporting span 7df889a351f36def:04ba05e49edc02fc:105e45f0ccf76262:1
time="2021-06-16T17:09:31Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:09:31Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:31Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:09:31Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:09:31Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="200faa4600621a7a:4618918b5e543973:317202db9f9cc71f:1"
2021/06/16 17:09:31 Reporting span 200faa4600621a7a:4618918b5e543973:317202db9f9cc71f:1
time="2021-06-16T17:09:31Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:09:31Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=200faa4600621a7a:317202db9f9cc71f:200faa4600621a7a:1"
time="2021-06-16T17:09:31Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=200faa4600621a7a:317202db9f9cc71f:200faa4600621a7a:1"
2021/06/16 17:09:31 Reporting span 200faa4600621a7a:3a57d37f074e9d2f:317202db9f9cc71f:1
time="2021-06-16T17:09:31Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=200faa4600621a7a:317202db9f9cc71f:200faa4600621a7a:1"
2021/06/16 17:09:31 Reporting span 200faa4600621a7a:317202db9f9cc71f:200faa4600621a7a:1
time="2021-06-16T17:09:31Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=200faa4600621a7a:200faa4600621a7a:0000000000000000:1"
2021/06/16 17:09:31 Reporting span 200faa4600621a7a:200faa4600621a7a:0000000000000000:1
time="2021-06-16T17:09:32Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:09:32Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:32Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:09:32Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:09:32Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="4ddca28660d2184b:231e1636ec8bb075:50ce2c6ea3267521:1"
2021/06/16 17:09:32 Reporting span 4ddca28660d2184b:231e1636ec8bb075:50ce2c6ea3267521:1
time="2021-06-16T17:09:32Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:09:32Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=4ddca28660d2184b:50ce2c6ea3267521:4ddca28660d2184b:1"
time="2021-06-16T17:09:32Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=4ddca28660d2184b:50ce2c6ea3267521:4ddca28660d2184b:1"
2021/06/16 17:09:32 Reporting span 4ddca28660d2184b:3e56d4d0da784adf:50ce2c6ea3267521:1
time="2021-06-16T17:09:32Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=4ddca28660d2184b:50ce2c6ea3267521:4ddca28660d2184b:1"
2021/06/16 17:09:32 Reporting span 4ddca28660d2184b:50ce2c6ea3267521:4ddca28660d2184b:1
time="2021-06-16T17:09:32Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=4ddca28660d2184b:4ddca28660d2184b:0000000000000000:1"
2021/06/16 17:09:32 Reporting span 4ddca28660d2184b:4ddca28660d2184b:0000000000000000:1
time="2021-06-16T17:09:38Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=0e5283d845ee94c7:0e5283d845ee94c7:0000000000000000:1"
time="2021-06-16T17:09:38Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=0e5283d845ee94c7:0e5283d845ee94c7:0000000000000000:1"
time="2021-06-16T17:09:38Z" level=info msg="==--> discovery.FindNetworkService() span:0e5283d845ee94c7:17dcc5f7fe9ab399:0e5283d845ee94c7:1"
time="2021-06-16T17:09:38Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=0e5283d845ee94c7:17dcc5f7fe9ab399:0e5283d845ee94c7:1"
time="2021-06-16T17:09:38Z" level=info msg="NSE found 2, retrieve time: 4.94s"
time="2021-06-16T17:09:38Z" level=info msg="FindNetworkService done: time 62.821s [green6bjtj green6gqkr]"
2021/06/16 17:09:38 Reporting span 0e5283d845ee94c7:17dcc5f7fe9ab399:0e5283d845ee94c7:1
time="2021-06-16T17:09:38Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=0e5283d845ee94c7:0e5283d845ee94c7:0000000000000000:1"
2021/06/16 17:09:38 Reporting span 0e5283d845ee94c7:0e5283d845ee94c7:0000000000000000:1
time="2021-06-16T17:09:38Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=650e25c362a9b0fb:650e25c362a9b0fb:0000000000000000:1"
time="2021-06-16T17:09:38Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=650e25c362a9b0fb:650e25c362a9b0fb:0000000000000000:1"
time="2021-06-16T17:09:38Z" level=info msg="==--> discovery.FindNetworkService() span:650e25c362a9b0fb:7aa09745c886a2d4:650e25c362a9b0fb:1"
time="2021-06-16T17:09:38Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=650e25c362a9b0fb:7aa09745c886a2d4:650e25c362a9b0fb:1"
time="2021-06-16T17:09:38Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=650e25c362a9b0fb:7aa09745c886a2d4:650e25c362a9b0fb:1"
time="2021-06-16T17:09:38Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:09:38Z" level=info msg="==----> initRegistryClient() span:650e25c362a9b0fb:1b7579c1a9411c9e:7aa09745c886a2d4:1"
time="2021-06-16T17:09:38Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:09:38Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:09:38Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="650e25c362a9b0fb:1b7579c1a9411c9e:7aa09745c886a2d4:1"
time="2021-06-16T17:09:38Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:09:38Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:09:38Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0003bd080 {member1.com}:0xc0003bd100 {member2.com}:0xc0003bd000]}"
time="2021-06-16T17:09:38Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:09:38Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:38Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:09:38Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:09:38Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:38Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:09:38Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:09:38Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:38Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:09:38Z" level=info msg="Found 3 tlsconfigs. [0xc0006b6300 0xc0006b6780 0xc0006b6d80]"
time="2021-06-16T17:09:38Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:43Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:09:43Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:48Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:09:48Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:48Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:09:48Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:09:48Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="650e25c362a9b0fb:1b7579c1a9411c9e:7aa09745c886a2d4:1"
2021/06/16 17:09:48 Reporting span 650e25c362a9b0fb:1b7579c1a9411c9e:7aa09745c886a2d4:1
time="2021-06-16T17:09:48Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:09:48Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=650e25c362a9b0fb:7aa09745c886a2d4:650e25c362a9b0fb:1"
time="2021-06-16T17:09:48Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=650e25c362a9b0fb:7aa09745c886a2d4:650e25c362a9b0fb:1"
2021/06/16 17:09:48 Reporting span 650e25c362a9b0fb:0fb53f4051837236:7aa09745c886a2d4:1
time="2021-06-16T17:09:48Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=650e25c362a9b0fb:7aa09745c886a2d4:650e25c362a9b0fb:1"
2021/06/16 17:09:48 Reporting span 650e25c362a9b0fb:7aa09745c886a2d4:650e25c362a9b0fb:1
time="2021-06-16T17:09:48Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=650e25c362a9b0fb:650e25c362a9b0fb:0000000000000000:1"
2021/06/16 17:09:48 Reporting span 650e25c362a9b0fb:650e25c362a9b0fb:0000000000000000:1
time="2021-06-16T17:09:51Z" level=info msg="Forward BulkRegisterNSE request: network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" > " operation=ProxyNsmgr.BulkRegisterNSE span="65c2b76707fee904:397d8a7c23712cab:2089e007e5400dde:1"
2021/06/16 17:09:51 Reporting span 65c2b76707fee904:76fa24cd44e4c4f3:397d8a7c23712cab:1
time="2021-06-16T17:09:51Z" level=warning msg="Error forwarding BulkRegisterNSE request to wcm-proxy-nsmgr:5005 : EOF" operation=ProxyNsmgr.BulkRegisterNSE span="65c2b76707fee904:397d8a7c23712cab:2089e007e5400dde:1"
time="2021-06-16T17:09:51Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7c841abd57f0d02c:7c841abd57f0d02c:0000000000000000:1"
time="2021-06-16T17:09:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7c841abd57f0d02c:7c841abd57f0d02c:0000000000000000:1"
time="2021-06-16T17:09:51Z" level=info msg="==--> discovery.FindNetworkService() span:7c841abd57f0d02c:1bdd3c3f657647c8:7c841abd57f0d02c:1"
time="2021-06-16T17:09:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7c841abd57f0d02c:1bdd3c3f657647c8:7c841abd57f0d02c:1"
time="2021-06-16T17:09:51Z" level=info msg="NSE found 2, retrieve time: 5.54s"
time="2021-06-16T17:09:51Z" level=info msg="FindNetworkService done: time 75.971s [green6bjtj green6gqkr]"
2021/06/16 17:09:51 Reporting span 7c841abd57f0d02c:1bdd3c3f657647c8:7c841abd57f0d02c:1
time="2021-06-16T17:09:51Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7c841abd57f0d02c:7c841abd57f0d02c:0000000000000000:1"
2021/06/16 17:09:51 Reporting span 7c841abd57f0d02c:7c841abd57f0d02c:0000000000000000:1
time="2021-06-16T17:09:51Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2ae7218b9e9fa15a:2ae7218b9e9fa15a:0000000000000000:1"
time="2021-06-16T17:09:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=2ae7218b9e9fa15a:2ae7218b9e9fa15a:0000000000000000:1"
time="2021-06-16T17:09:51Z" level=info msg="==--> discovery.FindNetworkService() span:2ae7218b9e9fa15a:156062af2d310c69:2ae7218b9e9fa15a:1"
time="2021-06-16T17:09:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=2ae7218b9e9fa15a:156062af2d310c69:2ae7218b9e9fa15a:1"
time="2021-06-16T17:09:51Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=2ae7218b9e9fa15a:156062af2d310c69:2ae7218b9e9fa15a:1"
time="2021-06-16T17:09:51Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:09:51Z" level=info msg="==----> initRegistryClient() span:2ae7218b9e9fa15a:7d06791423f26e7c:156062af2d310c69:1"
time="2021-06-16T17:09:51Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:09:51Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:09:51Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2ae7218b9e9fa15a:7d06791423f26e7c:156062af2d310c69:1"
time="2021-06-16T17:09:51Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:09:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:09:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000470740 {member1.com}:0xc000470880 {member2.com}:0xc000470640]}"
time="2021-06-16T17:09:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:09:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:09:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:09:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:09:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:09:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:09:51Z" level=info msg="Found 3 tlsconfigs. [0xc0001f0f00 0xc0001f1680 0xc0001f1800]"
time="2021-06-16T17:09:51Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:52Z" level=info msg="Forward BulkRegisterNSE request: network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6gqkr\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" > " operation=ProxyNsmgr.BulkRegisterNSE span="406bf10b3b03d016:5918e7597a476d30:67e2e892cdf20e69:1"
2021/06/16 17:09:52 Reporting span 406bf10b3b03d016:548ffffe66f0e766:5918e7597a476d30:1
time="2021-06-16T17:09:52Z" level=warning msg="Error forwarding BulkRegisterNSE request to wcm-proxy-nsmgr:5005 : EOF" operation=ProxyNsmgr.BulkRegisterNSE span="406bf10b3b03d016:5918e7597a476d30:67e2e892cdf20e69:1"
time="2021-06-16T17:09:52Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=373595a1645deae2:373595a1645deae2:0000000000000000:1"
time="2021-06-16T17:09:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=373595a1645deae2:373595a1645deae2:0000000000000000:1"
time="2021-06-16T17:09:52Z" level=info msg="==--> discovery.FindNetworkService() span:373595a1645deae2:6796938ad93ef80f:373595a1645deae2:1"
time="2021-06-16T17:09:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=373595a1645deae2:6796938ad93ef80f:373595a1645deae2:1"
time="2021-06-16T17:09:52Z" level=info msg="NSE found 2, retrieve time: 5.58s"
time="2021-06-16T17:09:52Z" level=info msg="FindNetworkService done: time 151.012s [green6bjtj green6gqkr]"
2021/06/16 17:09:52 Reporting span 373595a1645deae2:6796938ad93ef80f:373595a1645deae2:1
time="2021-06-16T17:09:52Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=373595a1645deae2:373595a1645deae2:0000000000000000:1"
2021/06/16 17:09:52 Reporting span 373595a1645deae2:373595a1645deae2:0000000000000000:1
time="2021-06-16T17:09:52Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1f651092910e9a96:1f651092910e9a96:0000000000000000:1"
time="2021-06-16T17:09:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=1f651092910e9a96:1f651092910e9a96:0000000000000000:1"
time="2021-06-16T17:09:52Z" level=info msg="==--> discovery.FindNetworkService() span:1f651092910e9a96:3c210dfd79aacffe:1f651092910e9a96:1"
time="2021-06-16T17:09:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=1f651092910e9a96:3c210dfd79aacffe:1f651092910e9a96:1"
time="2021-06-16T17:09:52Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=1f651092910e9a96:3c210dfd79aacffe:1f651092910e9a96:1"
time="2021-06-16T17:09:52Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:09:52Z" level=info msg="==----> initRegistryClient() span:1f651092910e9a96:7d1344dd54ce43c0:3c210dfd79aacffe:1"
time="2021-06-16T17:09:52Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:09:52Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:09:52Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1f651092910e9a96:7d1344dd54ce43c0:3c210dfd79aacffe:1"
time="2021-06-16T17:09:52Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:09:52Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:09:52Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004d5c40 {member1.com}:0xc0004d5cc0 {member2.com}:0xc0004d5bc0]}"
time="2021-06-16T17:09:52Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:09:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:52Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:09:52Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:09:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:09:52Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:09:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:09:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:09:52Z" level=info msg="Found 3 tlsconfigs. [0xc0006c0900 0xc0006c0a80 0xc0006c0c00]"
time="2021-06-16T17:09:52Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:56Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:09:56Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:09:57Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:09:57Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:01Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:10:01Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:01Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:10:01Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:10:01Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="2ae7218b9e9fa15a:7d06791423f26e7c:156062af2d310c69:1"
2021/06/16 17:10:01 Reporting span 2ae7218b9e9fa15a:7d06791423f26e7c:156062af2d310c69:1
time="2021-06-16T17:10:01Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:10:01Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2ae7218b9e9fa15a:156062af2d310c69:2ae7218b9e9fa15a:1"
time="2021-06-16T17:10:01Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=2ae7218b9e9fa15a:156062af2d310c69:2ae7218b9e9fa15a:1"
2021/06/16 17:10:01 Reporting span 2ae7218b9e9fa15a:123147d477adffad:156062af2d310c69:1
time="2021-06-16T17:10:01Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2ae7218b9e9fa15a:156062af2d310c69:2ae7218b9e9fa15a:1"
2021/06/16 17:10:01 Reporting span 2ae7218b9e9fa15a:156062af2d310c69:2ae7218b9e9fa15a:1
time="2021-06-16T17:10:01Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2ae7218b9e9fa15a:2ae7218b9e9fa15a:0000000000000000:1"
2021/06/16 17:10:01 Reporting span 2ae7218b9e9fa15a:2ae7218b9e9fa15a:0000000000000000:1
time="2021-06-16T17:10:02Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:10:02Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:02Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:10:02Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:10:02Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="1f651092910e9a96:7d1344dd54ce43c0:3c210dfd79aacffe:1"
2021/06/16 17:10:02 Reporting span 1f651092910e9a96:7d1344dd54ce43c0:3c210dfd79aacffe:1
time="2021-06-16T17:10:02Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:10:02Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1f651092910e9a96:3c210dfd79aacffe:1f651092910e9a96:1"
time="2021-06-16T17:10:02Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=1f651092910e9a96:3c210dfd79aacffe:1f651092910e9a96:1"
2021/06/16 17:10:02 Reporting span 1f651092910e9a96:14871678a37dd336:3c210dfd79aacffe:1
time="2021-06-16T17:10:02Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1f651092910e9a96:3c210dfd79aacffe:1f651092910e9a96:1"
2021/06/16 17:10:02 Reporting span 1f651092910e9a96:3c210dfd79aacffe:1f651092910e9a96:1
time="2021-06-16T17:10:02Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1f651092910e9a96:1f651092910e9a96:0000000000000000:1"
2021/06/16 17:10:02 Reporting span 1f651092910e9a96:1f651092910e9a96:0000000000000000:1
time="2021-06-16T17:10:06Z" level=info msg="Requesting NseRegistryClient..."
time="2021-06-16T17:10:07Z" level=info msg="Requesting NseRegistryClient..."
time="2021-06-16T17:10:21Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=63fcea98d84be410:63fcea98d84be410:0000000000000000:1"
time="2021-06-16T17:10:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=63fcea98d84be410:63fcea98d84be410:0000000000000000:1"
time="2021-06-16T17:10:21Z" level=info msg="==--> discovery.FindNetworkService() span:63fcea98d84be410:4ae0da85bd24a1d1:63fcea98d84be410:1"
time="2021-06-16T17:10:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=63fcea98d84be410:4ae0da85bd24a1d1:63fcea98d84be410:1"
time="2021-06-16T17:10:21Z" level=info msg="NSE found 2, retrieve time: 5.32s"
time="2021-06-16T17:10:21Z" level=info msg="FindNetworkService done: time 74.561s [green6bjtj green6gqkr]"
2021/06/16 17:10:21 Reporting span 63fcea98d84be410:4ae0da85bd24a1d1:63fcea98d84be410:1
time="2021-06-16T17:10:21Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=63fcea98d84be410:63fcea98d84be410:0000000000000000:1"
2021/06/16 17:10:21 Reporting span 63fcea98d84be410:63fcea98d84be410:0000000000000000:1
time="2021-06-16T17:10:21Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6e144088dc828b6f:6e144088dc828b6f:0000000000000000:1"
time="2021-06-16T17:10:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=6e144088dc828b6f:6e144088dc828b6f:0000000000000000:1"
time="2021-06-16T17:10:21Z" level=info msg="==--> discovery.FindNetworkService() span:6e144088dc828b6f:6227bcba7387013f:6e144088dc828b6f:1"
time="2021-06-16T17:10:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=6e144088dc828b6f:6227bcba7387013f:6e144088dc828b6f:1"
time="2021-06-16T17:10:21Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=6e144088dc828b6f:6227bcba7387013f:6e144088dc828b6f:1"
time="2021-06-16T17:10:21Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:10:21Z" level=info msg="==----> initRegistryClient() span:6e144088dc828b6f:595f814fddb00cd3:6227bcba7387013f:1"
time="2021-06-16T17:10:21Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:10:21Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:10:21Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6e144088dc828b6f:595f814fddb00cd3:6227bcba7387013f:1"
time="2021-06-16T17:10:21Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:10:21Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:10:21Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004704c0 {member1.com}:0xc000470380 {member2.com}:0xc000470300]}"
time="2021-06-16T17:10:21Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:10:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:21Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:10:21Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:10:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:10:21Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:10:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:10:21Z" level=info msg="Found 3 tlsconfigs. [0xc0006b6900 0xc0006b6a80 0xc0006b6c00]"
time="2021-06-16T17:10:21Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:22Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5ea48171e7b0d07e:5ea48171e7b0d07e:0000000000000000:1"
time="2021-06-16T17:10:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=5ea48171e7b0d07e:5ea48171e7b0d07e:0000000000000000:1"
time="2021-06-16T17:10:22Z" level=info msg="==--> discovery.FindNetworkService() span:5ea48171e7b0d07e:6b44e96dfdb52920:5ea48171e7b0d07e:1"
time="2021-06-16T17:10:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=5ea48171e7b0d07e:6b44e96dfdb52920:5ea48171e7b0d07e:1"
time="2021-06-16T17:10:22Z" level=info msg="NSE found 2, retrieve time: 5.26s"
time="2021-06-16T17:10:22Z" level=info msg="FindNetworkService done: time 87.061s [green6bjtj green6gqkr]"
2021/06/16 17:10:22 Reporting span 5ea48171e7b0d07e:6b44e96dfdb52920:5ea48171e7b0d07e:1
time="2021-06-16T17:10:22Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5ea48171e7b0d07e:5ea48171e7b0d07e:0000000000000000:1"
2021/06/16 17:10:22 Reporting span 5ea48171e7b0d07e:5ea48171e7b0d07e:0000000000000000:1
time="2021-06-16T17:10:22Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5efe27e0ee18a8ff:5efe27e0ee18a8ff:0000000000000000:1"
time="2021-06-16T17:10:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=5efe27e0ee18a8ff:5efe27e0ee18a8ff:0000000000000000:1"
time="2021-06-16T17:10:22Z" level=info msg="==--> discovery.FindNetworkService() span:5efe27e0ee18a8ff:3afccc4dc7eb5f76:5efe27e0ee18a8ff:1"
time="2021-06-16T17:10:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=5efe27e0ee18a8ff:3afccc4dc7eb5f76:5efe27e0ee18a8ff:1"
time="2021-06-16T17:10:22Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=5efe27e0ee18a8ff:3afccc4dc7eb5f76:5efe27e0ee18a8ff:1"
time="2021-06-16T17:10:22Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:10:22Z" level=info msg="==----> initRegistryClient() span:5efe27e0ee18a8ff:66e77ba24c40701e:3afccc4dc7eb5f76:1"
time="2021-06-16T17:10:22Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:10:22Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:10:22Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5efe27e0ee18a8ff:66e77ba24c40701e:3afccc4dc7eb5f76:1"
time="2021-06-16T17:10:22Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:10:22Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:10:22Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004d4b00 {member1.com}:0xc0004d4a40 {member2.com}:0xc0004d47c0]}"
time="2021-06-16T17:10:22Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:10:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:22Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:10:22Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:10:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:10:22Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:10:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:10:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:10:22Z" level=info msg="Found 3 tlsconfigs. [0xc0006b7b00 0xc0006b7c80 0xc0006b7e00]"
time="2021-06-16T17:10:22Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:26Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:10:26Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:27Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:10:27Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:31Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:10:31Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:31Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:10:31Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:10:31Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="6e144088dc828b6f:595f814fddb00cd3:6227bcba7387013f:1"
2021/06/16 17:10:31 Reporting span 6e144088dc828b6f:595f814fddb00cd3:6227bcba7387013f:1
time="2021-06-16T17:10:31Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:10:31Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6e144088dc828b6f:6227bcba7387013f:6e144088dc828b6f:1"
time="2021-06-16T17:10:31Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=6e144088dc828b6f:6227bcba7387013f:6e144088dc828b6f:1"
time="2021-06-16T17:10:32Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:10:32Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:10:32Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:10:32Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:10:32Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="5efe27e0ee18a8ff:66e77ba24c40701e:3afccc4dc7eb5f76:1"
2021/06/16 17:10:32 Reporting span 5efe27e0ee18a8ff:66e77ba24c40701e:3afccc4dc7eb5f76:1
time="2021-06-16T17:10:32Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:10:32Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5efe27e0ee18a8ff:3afccc4dc7eb5f76:5efe27e0ee18a8ff:1"
time="2021-06-16T17:10:32Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=5efe27e0ee18a8ff:3afccc4dc7eb5f76:5efe27e0ee18a8ff:1"
2021/06/16 17:11:01 Reporting span 6e144088dc828b6f:715f6912edda4709:6227bcba7387013f:1
time="2021-06-16T17:11:01Z" level=info msg=">><<---- response={} span=6e144088dc828b6f:6227bcba7387013f:6e144088dc828b6f:1"
2021/06/16 17:11:01 Reporting span 6e144088dc828b6f:6227bcba7387013f:6e144088dc828b6f:1
time="2021-06-16T17:11:01Z" level=info msg=">><<-- response=null span=6e144088dc828b6f:6e144088dc828b6f:0000000000000000:1"
2021/06/16 17:11:01 Reporting span 6e144088dc828b6f:6e144088dc828b6f:0000000000000000:1
time="2021-06-16T17:11:01Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=3996251c380edc09:3996251c380edc09:0000000000000000:1"
time="2021-06-16T17:11:01Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3996251c380edc09:3996251c380edc09:0000000000000000:1"
time="2021-06-16T17:11:01Z" level=info msg="==--> discovery.FindNetworkService() span:3996251c380edc09:117465bdf842569a:3996251c380edc09:1"
time="2021-06-16T17:11:01Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3996251c380edc09:117465bdf842569a:3996251c380edc09:1"
time="2021-06-16T17:11:01Z" level=info msg="NSE found 2, retrieve time: 5.62s"
time="2021-06-16T17:11:01Z" level=info msg="FindNetworkService done: time 197.512s [green6bjtj green6gqkr]"
2021/06/16 17:11:01 Reporting span 3996251c380edc09:117465bdf842569a:3996251c380edc09:1
time="2021-06-16T17:11:01Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=3996251c380edc09:3996251c380edc09:0000000000000000:1"
2021/06/16 17:11:01 Reporting span 3996251c380edc09:3996251c380edc09:0000000000000000:1
time="2021-06-16T17:11:01Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=624502977f609635:624502977f609635:0000000000000000:1"
time="2021-06-16T17:11:01Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=624502977f609635:624502977f609635:0000000000000000:1"
time="2021-06-16T17:11:01Z" level=info msg="==--> discovery.FindNetworkService() span:624502977f609635:2f3b982b1ec9c07d:624502977f609635:1"
time="2021-06-16T17:11:01Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=624502977f609635:2f3b982b1ec9c07d:624502977f609635:1"
time="2021-06-16T17:11:01Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=624502977f609635:2f3b982b1ec9c07d:624502977f609635:1"
time="2021-06-16T17:11:01Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:11:01Z" level=info msg="==----> initRegistryClient() span:624502977f609635:7e974f0a1670ceb6:2f3b982b1ec9c07d:1"
time="2021-06-16T17:11:01Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:11:01Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:11:01Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="624502977f609635:7e974f0a1670ceb6:2f3b982b1ec9c07d:1"
time="2021-06-16T17:11:01Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:11:01Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:11:01Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00084f180 {member1.com}:0xc00084f200 {member2.com}:0xc00084f100]}"
time="2021-06-16T17:11:01Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:11:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:01Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:11:01Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:11:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:01Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:11:01Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:11:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:01Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:11:01Z" level=info msg="Found 3 tlsconfigs. [0xc000795200 0xc000795680 0xc000795800]"
time="2021-06-16T17:11:01Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
2021/06/16 17:11:02 Reporting span 5efe27e0ee18a8ff:6c40e7c0817732f0:3afccc4dc7eb5f76:1
time="2021-06-16T17:11:02Z" level=info msg=">><<---- response={} span=5efe27e0ee18a8ff:3afccc4dc7eb5f76:5efe27e0ee18a8ff:1"
2021/06/16 17:11:02 Reporting span 5efe27e0ee18a8ff:3afccc4dc7eb5f76:5efe27e0ee18a8ff:1
time="2021-06-16T17:11:02Z" level=info msg=">><<-- response=null span=5efe27e0ee18a8ff:5efe27e0ee18a8ff:0000000000000000:1"
2021/06/16 17:11:02 Reporting span 5efe27e0ee18a8ff:5efe27e0ee18a8ff:0000000000000000:1
time="2021-06-16T17:11:02Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=0034e2bb8fa5ad03:0034e2bb8fa5ad03:0000000000000000:1"
time="2021-06-16T17:11:02Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=0034e2bb8fa5ad03:0034e2bb8fa5ad03:0000000000000000:1"
time="2021-06-16T17:11:02Z" level=info msg="==--> discovery.FindNetworkService() span:0034e2bb8fa5ad03:1bbb64bca60ac4a8:0034e2bb8fa5ad03:1"
time="2021-06-16T17:11:02Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=0034e2bb8fa5ad03:1bbb64bca60ac4a8:0034e2bb8fa5ad03:1"
time="2021-06-16T17:11:02Z" level=info msg="NSE found 2, retrieve time: 4.78s"
time="2021-06-16T17:11:02Z" level=info msg="FindNetworkService done: time 41.52s [green6bjtj green6gqkr]"
2021/06/16 17:11:02 Reporting span 0034e2bb8fa5ad03:1bbb64bca60ac4a8:0034e2bb8fa5ad03:1
time="2021-06-16T17:11:02Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=0034e2bb8fa5ad03:0034e2bb8fa5ad03:0000000000000000:1"
2021/06/16 17:11:02 Reporting span 0034e2bb8fa5ad03:0034e2bb8fa5ad03:0000000000000000:1
time="2021-06-16T17:11:02Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7f1688179ad22271:7f1688179ad22271:0000000000000000:1"
time="2021-06-16T17:11:02Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=7f1688179ad22271:7f1688179ad22271:0000000000000000:1"
time="2021-06-16T17:11:02Z" level=info msg="==--> discovery.FindNetworkService() span:7f1688179ad22271:6d75d679d6d96c53:7f1688179ad22271:1"
time="2021-06-16T17:11:02Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=7f1688179ad22271:6d75d679d6d96c53:7f1688179ad22271:1"
time="2021-06-16T17:11:02Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=7f1688179ad22271:6d75d679d6d96c53:7f1688179ad22271:1"
time="2021-06-16T17:11:02Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:11:02Z" level=info msg="==----> initRegistryClient() span:7f1688179ad22271:08abae241c7cb1ce:6d75d679d6d96c53:1"
time="2021-06-16T17:11:02Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:11:02Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:11:02Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7f1688179ad22271:08abae241c7cb1ce:6d75d679d6d96c53:1"
time="2021-06-16T17:11:02Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:11:02Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:11:02Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0002ec480 {member1.com}:0xc0002ec500 {member2.com}:0xc0002ec400]}"
time="2021-06-16T17:11:02Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:11:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:02Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:11:02Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:11:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:02Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:11:02Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:11:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:02Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:11:02Z" level=info msg="Found 3 tlsconfigs. [0xc000768480 0xc000768600 0xc000768780]"
time="2021-06-16T17:11:02Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:11:06Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:11:06Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:11:07Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:11:07Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:11:11Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:11:11Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:11:11Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:11:11Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:11:11Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="624502977f609635:7e974f0a1670ceb6:2f3b982b1ec9c07d:1"
2021/06/16 17:11:11 Reporting span 624502977f609635:7e974f0a1670ceb6:2f3b982b1ec9c07d:1
time="2021-06-16T17:11:11Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:11:11Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=624502977f609635:2f3b982b1ec9c07d:624502977f609635:1"
time="2021-06-16T17:11:11Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=624502977f609635:2f3b982b1ec9c07d:624502977f609635:1"
time="2021-06-16T17:11:12Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:11:12Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:11:12Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:11:12Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:11:12Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="7f1688179ad22271:08abae241c7cb1ce:6d75d679d6d96c53:1"
2021/06/16 17:11:12 Reporting span 7f1688179ad22271:08abae241c7cb1ce:6d75d679d6d96c53:1
time="2021-06-16T17:11:12Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:11:12Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7f1688179ad22271:6d75d679d6d96c53:7f1688179ad22271:1"
time="2021-06-16T17:11:12Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=7f1688179ad22271:6d75d679d6d96c53:7f1688179ad22271:1"
2021/06/16 17:11:22 Reporting span 7f1688179ad22271:297e4a05a42eda79:6d75d679d6d96c53:1
time="2021-06-16T17:11:22Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7f1688179ad22271:6d75d679d6d96c53:7f1688179ad22271:1"
2021/06/16 17:11:22 Reporting span 7f1688179ad22271:6d75d679d6d96c53:7f1688179ad22271:1
time="2021-06-16T17:11:22Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7f1688179ad22271:7f1688179ad22271:0000000000000000:1"
2021/06/16 17:11:22 Reporting span 7f1688179ad22271:7f1688179ad22271:0000000000000000:1
time="2021-06-16T17:11:22Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2be43bec3034b099:2be43bec3034b099:0000000000000000:1"
time="2021-06-16T17:11:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2be43bec3034b099:2be43bec3034b099:0000000000000000:1"
time="2021-06-16T17:11:22Z" level=info msg="==--> discovery.FindNetworkService() span:2be43bec3034b099:1f657b105dc81347:2be43bec3034b099:1"
time="2021-06-16T17:11:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2be43bec3034b099:1f657b105dc81347:2be43bec3034b099:1"
time="2021-06-16T17:11:22Z" level=info msg="NSE found 2, retrieve time: 5.2s"
time="2021-06-16T17:11:22Z" level=info msg="FindNetworkService done: time 64.2s [green6bjtj green6gqkr]"
2021/06/16 17:11:22 Reporting span 2be43bec3034b099:1f657b105dc81347:2be43bec3034b099:1
time="2021-06-16T17:11:22Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2be43bec3034b099:2be43bec3034b099:0000000000000000:1"
2021/06/16 17:11:22 Reporting span 2be43bec3034b099:2be43bec3034b099:0000000000000000:1
time="2021-06-16T17:11:22Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=22e6740559871ecc:22e6740559871ecc:0000000000000000:1"
time="2021-06-16T17:11:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=22e6740559871ecc:22e6740559871ecc:0000000000000000:1"
time="2021-06-16T17:11:22Z" level=info msg="==--> discovery.FindNetworkService() span:22e6740559871ecc:1d30850ad06aaf4b:22e6740559871ecc:1"
time="2021-06-16T17:11:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=22e6740559871ecc:1d30850ad06aaf4b:22e6740559871ecc:1"
time="2021-06-16T17:11:22Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=22e6740559871ecc:1d30850ad06aaf4b:22e6740559871ecc:1"
time="2021-06-16T17:11:22Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:11:22Z" level=info msg="==----> initRegistryClient() span:22e6740559871ecc:7a12a45b92f46830:1d30850ad06aaf4b:1"
time="2021-06-16T17:11:22Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:11:22Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:11:22Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="22e6740559871ecc:7a12a45b92f46830:1d30850ad06aaf4b:1"
time="2021-06-16T17:11:22Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:11:22Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:11:22Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0003b3180 {member1.com}:0xc0003b3200 {member2.com}:0xc0003b3100]}"
time="2021-06-16T17:11:22Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:11:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:22Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:11:22Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:11:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:11:22Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:11:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:11:22Z" level=info msg="Found 3 tlsconfigs. [0xc00021b800 0xc00021bc80 0xc00021be00]"
time="2021-06-16T17:11:22Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:11:27Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:11:27Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:11:32Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:11:32Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:11:32Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:11:32Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:11:32Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="22e6740559871ecc:7a12a45b92f46830:1d30850ad06aaf4b:1"
2021/06/16 17:11:32 Reporting span 22e6740559871ecc:7a12a45b92f46830:1d30850ad06aaf4b:1
time="2021-06-16T17:11:32Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:11:32Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=22e6740559871ecc:1d30850ad06aaf4b:22e6740559871ecc:1"
time="2021-06-16T17:11:32Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=22e6740559871ecc:1d30850ad06aaf4b:22e6740559871ecc:1"
2021/06/16 17:11:41 Reporting span 624502977f609635:067ce4dedf2d813e:2f3b982b1ec9c07d:1
time="2021-06-16T17:11:41Z" level=info msg=">><<---- response={} span=624502977f609635:2f3b982b1ec9c07d:624502977f609635:1"
2021/06/16 17:11:41 Reporting span 624502977f609635:2f3b982b1ec9c07d:624502977f609635:1
time="2021-06-16T17:11:41Z" level=info msg=">><<-- response=null span=624502977f609635:624502977f609635:0000000000000000:1"
2021/06/16 17:11:41 Reporting span 624502977f609635:624502977f609635:0000000000000000:1
time="2021-06-16T17:11:41Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5d22f00d43c9091c:5d22f00d43c9091c:0000000000000000:1"
time="2021-06-16T17:11:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=5d22f00d43c9091c:5d22f00d43c9091c:0000000000000000:1"
time="2021-06-16T17:11:41Z" level=info msg="==--> discovery.FindNetworkService() span:5d22f00d43c9091c:5630f3ee03f223c7:5d22f00d43c9091c:1"
time="2021-06-16T17:11:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=5d22f00d43c9091c:5630f3ee03f223c7:5d22f00d43c9091c:1"
time="2021-06-16T17:11:41Z" level=info msg="NSE found 2, retrieve time: 5.04s"
time="2021-06-16T17:11:41Z" level=info msg="FindNetworkService done: time 37.31s [green6bjtj green6gqkr]"
2021/06/16 17:11:41 Reporting span 5d22f00d43c9091c:5630f3ee03f223c7:5d22f00d43c9091c:1
time="2021-06-16T17:11:41Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5d22f00d43c9091c:5d22f00d43c9091c:0000000000000000:1"
2021/06/16 17:11:41 Reporting span 5d22f00d43c9091c:5d22f00d43c9091c:0000000000000000:1
time="2021-06-16T17:11:41Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=38d15a65edd622a7:38d15a65edd622a7:0000000000000000:1"
time="2021-06-16T17:11:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=38d15a65edd622a7:38d15a65edd622a7:0000000000000000:1"
time="2021-06-16T17:11:41Z" level=info msg="==--> discovery.FindNetworkService() span:38d15a65edd622a7:01f57168ae6898c9:38d15a65edd622a7:1"
time="2021-06-16T17:11:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=38d15a65edd622a7:01f57168ae6898c9:38d15a65edd622a7:1"
time="2021-06-16T17:11:41Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=38d15a65edd622a7:01f57168ae6898c9:38d15a65edd622a7:1"
time="2021-06-16T17:11:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:11:41Z" level=info msg="==----> initRegistryClient() span:38d15a65edd622a7:6f87e42e423c4279:01f57168ae6898c9:1"
time="2021-06-16T17:11:41Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:11:41Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:11:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="38d15a65edd622a7:6f87e42e423c4279:01f57168ae6898c9:1"
time="2021-06-16T17:11:41Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:11:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:11:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00028e4c0 {member1.com}:0xc00028e540 {member2.com}:0xc00028e440]}"
time="2021-06-16T17:11:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:11:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:11:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:11:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:11:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:11:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:11:41Z" level=info msg="Found 3 tlsconfigs. [0xc000768300 0xc000768480 0xc000768600]"
time="2021-06-16T17:11:41Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:11:46Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:11:46Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:11:51Z" level=info msg="Forward BulkRegisterNSE request: network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" > " operation=ProxyNsmgr.BulkRegisterNSE span="65c2b76707fee904:397d8a7c23712cab:2089e007e5400dde:1"
2021/06/16 17:11:51 Reporting span 65c2b76707fee904:0cf50d6e982274bf:397d8a7c23712cab:1
time="2021-06-16T17:11:51Z" level=warning msg="Error forwarding BulkRegisterNSE request to wcm-proxy-nsmgr:5005 : EOF" operation=ProxyNsmgr.BulkRegisterNSE span="65c2b76707fee904:397d8a7c23712cab:2089e007e5400dde:1"
time="2021-06-16T17:11:51Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:11:51Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:11:51Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:11:51Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:11:51Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="38d15a65edd622a7:6f87e42e423c4279:01f57168ae6898c9:1"
2021/06/16 17:11:51 Reporting span 38d15a65edd622a7:6f87e42e423c4279:01f57168ae6898c9:1
time="2021-06-16T17:11:51Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:11:51Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=38d15a65edd622a7:01f57168ae6898c9:38d15a65edd622a7:1"
time="2021-06-16T17:11:51Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=38d15a65edd622a7:01f57168ae6898c9:38d15a65edd622a7:1"
time="2021-06-16T17:11:52Z" level=info msg="Forward BulkRegisterNSE request: network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6gqkr\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" > " operation=ProxyNsmgr.BulkRegisterNSE span="406bf10b3b03d016:5918e7597a476d30:67e2e892cdf20e69:1"
2021/06/16 17:11:52 Reporting span 406bf10b3b03d016:2a2c0c9e815e60f2:5918e7597a476d30:1
time="2021-06-16T17:11:52Z" level=warning msg="Error forwarding BulkRegisterNSE request to wcm-proxy-nsmgr:5005 : EOF" operation=ProxyNsmgr.BulkRegisterNSE span="406bf10b3b03d016:5918e7597a476d30:67e2e892cdf20e69:1"
2021/06/16 17:11:57 Reporting span 22e6740559871ecc:216d4fb197c8ee37:1d30850ad06aaf4b:1
time="2021-06-16T17:11:57Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=22e6740559871ecc:1d30850ad06aaf4b:22e6740559871ecc:1"
2021/06/16 17:11:57 Reporting span 22e6740559871ecc:1d30850ad06aaf4b:22e6740559871ecc:1
time="2021-06-16T17:11:57Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=22e6740559871ecc:22e6740559871ecc:0000000000000000:1"
2021/06/16 17:11:57 Reporting span 22e6740559871ecc:22e6740559871ecc:0000000000000000:1
time="2021-06-16T17:11:57Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1ec910af53c52cfc:1ec910af53c52cfc:0000000000000000:1"
time="2021-06-16T17:11:57Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1ec910af53c52cfc:1ec910af53c52cfc:0000000000000000:1"
time="2021-06-16T17:11:57Z" level=info msg="==--> discovery.FindNetworkService() span:1ec910af53c52cfc:6636e49aa3ea7be5:1ec910af53c52cfc:1"
time="2021-06-16T17:11:57Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1ec910af53c52cfc:6636e49aa3ea7be5:1ec910af53c52cfc:1"
time="2021-06-16T17:11:57Z" level=info msg="NSE found 2, retrieve time: 4.88s"
time="2021-06-16T17:11:57Z" level=info msg="FindNetworkService done: time 44.191s [green6bjtj green6gqkr]"
2021/06/16 17:11:57 Reporting span 1ec910af53c52cfc:6636e49aa3ea7be5:1ec910af53c52cfc:1
time="2021-06-16T17:11:57Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1ec910af53c52cfc:1ec910af53c52cfc:0000000000000000:1"
2021/06/16 17:11:57 Reporting span 1ec910af53c52cfc:1ec910af53c52cfc:0000000000000000:1
time="2021-06-16T17:11:57Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2358f9f5df59ccb3:2358f9f5df59ccb3:0000000000000000:1"
time="2021-06-16T17:11:57Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=2358f9f5df59ccb3:2358f9f5df59ccb3:0000000000000000:1"
time="2021-06-16T17:11:57Z" level=info msg="==--> discovery.FindNetworkService() span:2358f9f5df59ccb3:3a671fa792a53fe5:2358f9f5df59ccb3:1"
time="2021-06-16T17:11:57Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=2358f9f5df59ccb3:3a671fa792a53fe5:2358f9f5df59ccb3:1"
time="2021-06-16T17:11:57Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=2358f9f5df59ccb3:3a671fa792a53fe5:2358f9f5df59ccb3:1"
time="2021-06-16T17:11:57Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:11:57Z" level=info msg="==----> initRegistryClient() span:2358f9f5df59ccb3:2d38a4d8b2bdfe77:3a671fa792a53fe5:1"
time="2021-06-16T17:11:57Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:11:57Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:11:57Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2358f9f5df59ccb3:2d38a4d8b2bdfe77:3a671fa792a53fe5:1"
time="2021-06-16T17:11:57Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:11:57Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:11:57Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000809ec0 {member1.com}:0xc000809e40 {member2.com}:0xc000809dc0]}"
time="2021-06-16T17:11:57Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:11:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:57Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:11:57Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:11:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:11:57Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:11:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:11:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:11:57Z" level=info msg="Found 3 tlsconfigs. [0xc00021b200 0xc00021b800 0xc00021bc80]"
time="2021-06-16T17:11:57Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:02Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:12:02Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:06Z" level=info msg="Requesting NseRegistryClient..."
2021/06/16 17:12:06 Reporting span 38d15a65edd622a7:57e15360d7d0ef55:01f57168ae6898c9:1
time="2021-06-16T17:12:06Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=38d15a65edd622a7:01f57168ae6898c9:38d15a65edd622a7:1"
2021/06/16 17:12:06 Reporting span 38d15a65edd622a7:01f57168ae6898c9:38d15a65edd622a7:1
time="2021-06-16T17:12:06Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=38d15a65edd622a7:38d15a65edd622a7:0000000000000000:1"
2021/06/16 17:12:06 Reporting span 38d15a65edd622a7:38d15a65edd622a7:0000000000000000:1
time="2021-06-16T17:12:06Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=512b756fc4f32563:512b756fc4f32563:0000000000000000:1"
time="2021-06-16T17:12:06Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=512b756fc4f32563:512b756fc4f32563:0000000000000000:1"
time="2021-06-16T17:12:06Z" level=info msg="==--> discovery.FindNetworkService() span:512b756fc4f32563:13f76505a341d0ef:512b756fc4f32563:1"
time="2021-06-16T17:12:06Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=512b756fc4f32563:13f76505a341d0ef:512b756fc4f32563:1"
time="2021-06-16T17:12:06Z" level=info msg="NSE found 2, retrieve time: 4.83s"
time="2021-06-16T17:12:06Z" level=info msg="FindNetworkService done: time 224.573s [green6bjtj green6gqkr]"
2021/06/16 17:12:06 Reporting span 512b756fc4f32563:13f76505a341d0ef:512b756fc4f32563:1
time="2021-06-16T17:12:06Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=512b756fc4f32563:512b756fc4f32563:0000000000000000:1"
2021/06/16 17:12:06 Reporting span 512b756fc4f32563:512b756fc4f32563:0000000000000000:1
time="2021-06-16T17:12:06Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=56d9efaeb4baa699:56d9efaeb4baa699:0000000000000000:1"
time="2021-06-16T17:12:06Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=56d9efaeb4baa699:56d9efaeb4baa699:0000000000000000:1"
time="2021-06-16T17:12:06Z" level=info msg="==--> discovery.FindNetworkService() span:56d9efaeb4baa699:125484145f274a06:56d9efaeb4baa699:1"
time="2021-06-16T17:12:06Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=56d9efaeb4baa699:125484145f274a06:56d9efaeb4baa699:1"
time="2021-06-16T17:12:06Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=56d9efaeb4baa699:125484145f274a06:56d9efaeb4baa699:1"
time="2021-06-16T17:12:06Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:12:06Z" level=info msg="==----> initRegistryClient() span:56d9efaeb4baa699:6efad84fe5eb5a9b:125484145f274a06:1"
time="2021-06-16T17:12:06Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:12:06Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:12:06Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="56d9efaeb4baa699:6efad84fe5eb5a9b:125484145f274a06:1"
time="2021-06-16T17:12:06Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:12:06Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:12:06Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0003bce00 {member1.com}:0xc0003bce80 {member2.com}:0xc0003bcd80]}"
time="2021-06-16T17:12:06Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:12:06Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:06Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:12:06Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:12:06Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:06Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:12:06Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:12:06Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:06Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:12:06Z" level=info msg="Found 3 tlsconfigs. [0xc0006b6900 0xc0006b6a80 0xc0006b6c00]"
time="2021-06-16T17:12:06Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:07Z" level=info msg="Requesting NseRegistryClient..."
time="2021-06-16T17:12:07Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:12:07Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:07Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:12:07Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:12:07Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="2358f9f5df59ccb3:2d38a4d8b2bdfe77:3a671fa792a53fe5:1"
2021/06/16 17:12:07 Reporting span 2358f9f5df59ccb3:2d38a4d8b2bdfe77:3a671fa792a53fe5:1
time="2021-06-16T17:12:07Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:12:07Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2358f9f5df59ccb3:3a671fa792a53fe5:2358f9f5df59ccb3:1"
time="2021-06-16T17:12:07Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=2358f9f5df59ccb3:3a671fa792a53fe5:2358f9f5df59ccb3:1"
2021/06/16 17:12:07 Reporting span 2358f9f5df59ccb3:57513e900e15b04c:3a671fa792a53fe5:1
time="2021-06-16T17:12:07Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2358f9f5df59ccb3:3a671fa792a53fe5:2358f9f5df59ccb3:1"
2021/06/16 17:12:07 Reporting span 2358f9f5df59ccb3:3a671fa792a53fe5:2358f9f5df59ccb3:1
time="2021-06-16T17:12:07Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2358f9f5df59ccb3:2358f9f5df59ccb3:0000000000000000:1"
2021/06/16 17:12:07 Reporting span 2358f9f5df59ccb3:2358f9f5df59ccb3:0000000000000000:1
time="2021-06-16T17:12:11Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:12:11Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:16Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:12:16Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:16Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:12:16Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:12:16Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="56d9efaeb4baa699:6efad84fe5eb5a9b:125484145f274a06:1"
2021/06/16 17:12:16 Reporting span 56d9efaeb4baa699:6efad84fe5eb5a9b:125484145f274a06:1
time="2021-06-16T17:12:16Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:12:16Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=56d9efaeb4baa699:125484145f274a06:56d9efaeb4baa699:1"
time="2021-06-16T17:12:16Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=56d9efaeb4baa699:125484145f274a06:56d9efaeb4baa699:1"
2021/06/16 17:12:16 Reporting span 56d9efaeb4baa699:32a6e765cf41c195:125484145f274a06:1
time="2021-06-16T17:12:16Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=56d9efaeb4baa699:125484145f274a06:56d9efaeb4baa699:1"
2021/06/16 17:12:16 Reporting span 56d9efaeb4baa699:125484145f274a06:56d9efaeb4baa699:1
time="2021-06-16T17:12:16Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=56d9efaeb4baa699:56d9efaeb4baa699:0000000000000000:1"
2021/06/16 17:12:16 Reporting span 56d9efaeb4baa699:56d9efaeb4baa699:0000000000000000:1
time="2021-06-16T17:12:21Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=457c3ca414c9900d:457c3ca414c9900d:0000000000000000:1"
time="2021-06-16T17:12:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=457c3ca414c9900d:457c3ca414c9900d:0000000000000000:1"
time="2021-06-16T17:12:21Z" level=info msg="==--> discovery.FindNetworkService() span:457c3ca414c9900d:37e5288d8c3f5349:457c3ca414c9900d:1"
time="2021-06-16T17:12:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=457c3ca414c9900d:37e5288d8c3f5349:457c3ca414c9900d:1"
time="2021-06-16T17:12:21Z" level=info msg="NSE found 2, retrieve time: 5.35s"
time="2021-06-16T17:12:21Z" level=info msg="FindNetworkService done: time 284.804s [green6bjtj green6gqkr]"
2021/06/16 17:12:21 Reporting span 457c3ca414c9900d:37e5288d8c3f5349:457c3ca414c9900d:1
time="2021-06-16T17:12:21Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=457c3ca414c9900d:457c3ca414c9900d:0000000000000000:1"
2021/06/16 17:12:21 Reporting span 457c3ca414c9900d:457c3ca414c9900d:0000000000000000:1
time="2021-06-16T17:12:21Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=73a1fdf7c94ea262:73a1fdf7c94ea262:0000000000000000:1"
time="2021-06-16T17:12:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=73a1fdf7c94ea262:73a1fdf7c94ea262:0000000000000000:1"
time="2021-06-16T17:12:21Z" level=info msg="==--> discovery.FindNetworkService() span:73a1fdf7c94ea262:6cc12d231e3afd38:73a1fdf7c94ea262:1"
time="2021-06-16T17:12:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=73a1fdf7c94ea262:6cc12d231e3afd38:73a1fdf7c94ea262:1"
time="2021-06-16T17:12:21Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=73a1fdf7c94ea262:6cc12d231e3afd38:73a1fdf7c94ea262:1"
time="2021-06-16T17:12:21Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:12:21Z" level=info msg="==----> initRegistryClient() span:73a1fdf7c94ea262:6502e37f43981ff7:6cc12d231e3afd38:1"
time="2021-06-16T17:12:21Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:12:21Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:12:21Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="73a1fdf7c94ea262:6502e37f43981ff7:6cc12d231e3afd38:1"
time="2021-06-16T17:12:21Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:12:21Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:12:21Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00084e280 {member1.com}:0xc00084e200 {member2.com}:0xc00084e180]}"
time="2021-06-16T17:12:21Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:12:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:21Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:12:21Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:12:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:12:21Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:12:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:12:21Z" level=info msg="Found 3 tlsconfigs. [0xc0006c0780 0xc0006c0900 0xc0006c0a80]"
time="2021-06-16T17:12:21Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:22Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1ae6e1bb06f8eaf7:1ae6e1bb06f8eaf7:0000000000000000:1"
time="2021-06-16T17:12:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1ae6e1bb06f8eaf7:1ae6e1bb06f8eaf7:0000000000000000:1"
time="2021-06-16T17:12:22Z" level=info msg="==--> discovery.FindNetworkService() span:1ae6e1bb06f8eaf7:246cacbfa6723b13:1ae6e1bb06f8eaf7:1"
time="2021-06-16T17:12:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1ae6e1bb06f8eaf7:246cacbfa6723b13:1ae6e1bb06f8eaf7:1"
time="2021-06-16T17:12:22Z" level=info msg="NSE found 2, retrieve time: 5.99s"
time="2021-06-16T17:12:22Z" level=info msg="FindNetworkService done: time 105.631s [green6bjtj green6gqkr]"
2021/06/16 17:12:22 Reporting span 1ae6e1bb06f8eaf7:246cacbfa6723b13:1ae6e1bb06f8eaf7:1
time="2021-06-16T17:12:22Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1ae6e1bb06f8eaf7:1ae6e1bb06f8eaf7:0000000000000000:1"
2021/06/16 17:12:22 Reporting span 1ae6e1bb06f8eaf7:1ae6e1bb06f8eaf7:0000000000000000:1
time="2021-06-16T17:12:22Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=047a7bc5b74af21d:047a7bc5b74af21d:0000000000000000:1"
time="2021-06-16T17:12:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=047a7bc5b74af21d:047a7bc5b74af21d:0000000000000000:1"
time="2021-06-16T17:12:22Z" level=info msg="==--> discovery.FindNetworkService() span:047a7bc5b74af21d:473d56a105c20dbe:047a7bc5b74af21d:1"
time="2021-06-16T17:12:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=047a7bc5b74af21d:473d56a105c20dbe:047a7bc5b74af21d:1"
time="2021-06-16T17:12:22Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=047a7bc5b74af21d:473d56a105c20dbe:047a7bc5b74af21d:1"
time="2021-06-16T17:12:22Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:12:22Z" level=info msg="==----> initRegistryClient() span:047a7bc5b74af21d:19472c77b4095c0c:473d56a105c20dbe:1"
time="2021-06-16T17:12:22Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:12:22Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:12:22Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="047a7bc5b74af21d:19472c77b4095c0c:473d56a105c20dbe:1"
time="2021-06-16T17:12:22Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:12:22Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:12:22Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00028ee00 {member1.com}:0xc00028ee80 {member2.com}:0xc00028ed80]}"
time="2021-06-16T17:12:22Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:12:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:22Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:12:22Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:12:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:12:22Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:12:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:12:22Z" level=info msg="Found 3 tlsconfigs. [0xc000712000 0xc000712480 0xc000712780]"
time="2021-06-16T17:12:22Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:26Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:12:26Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:27Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:12:27Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:31Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:12:31Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:31Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:12:31Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:12:31Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="73a1fdf7c94ea262:6502e37f43981ff7:6cc12d231e3afd38:1"
2021/06/16 17:12:31 Reporting span 73a1fdf7c94ea262:6502e37f43981ff7:6cc12d231e3afd38:1
time="2021-06-16T17:12:31Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:12:31Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=73a1fdf7c94ea262:6cc12d231e3afd38:73a1fdf7c94ea262:1"
time="2021-06-16T17:12:31Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=73a1fdf7c94ea262:6cc12d231e3afd38:73a1fdf7c94ea262:1"
time="2021-06-16T17:12:32Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:12:32Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:32Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:12:32Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:12:32Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="047a7bc5b74af21d:19472c77b4095c0c:473d56a105c20dbe:1"
2021/06/16 17:12:32 Reporting span 047a7bc5b74af21d:19472c77b4095c0c:473d56a105c20dbe:1
time="2021-06-16T17:12:32Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:12:32Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=047a7bc5b74af21d:473d56a105c20dbe:047a7bc5b74af21d:1"
time="2021-06-16T17:12:32Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=047a7bc5b74af21d:473d56a105c20dbe:047a7bc5b74af21d:1"
2021/06/16 17:12:39 Reporting span 047a7bc5b74af21d:6eabd976322d70e3:473d56a105c20dbe:1
time="2021-06-16T17:12:39Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=047a7bc5b74af21d:473d56a105c20dbe:047a7bc5b74af21d:1"
2021/06/16 17:12:39 Reporting span 047a7bc5b74af21d:473d56a105c20dbe:047a7bc5b74af21d:1
time="2021-06-16T17:12:39Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green@green.nispatil-wcm-cisco.com\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane@172.17.0.3:5001\",\"url\":\"wcm-proxy-nsmgr:5006\",\"expiration_time\":{\"seconds\":1623866690},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623866761},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenbtshl\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-6tfnk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenn5mqx\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8hv98\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=047a7bc5b74af21d:047a7bc5b74af21d:0000000000000000:1"
2021/06/16 17:12:39 Reporting span 047a7bc5b74af21d:047a7bc5b74af21d:0000000000000000:1
time="2021-06-16T17:12:52Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6c6b08665b30092e:6c6b08665b30092e:0000000000000000:1"
time="2021-06-16T17:12:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6c6b08665b30092e:6c6b08665b30092e:0000000000000000:1"
time="2021-06-16T17:12:52Z" level=info msg="==--> discovery.FindNetworkService() span:6c6b08665b30092e:19277f54f1b6d3a5:6c6b08665b30092e:1"
time="2021-06-16T17:12:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6c6b08665b30092e:19277f54f1b6d3a5:6c6b08665b30092e:1"
time="2021-06-16T17:12:52Z" level=info msg="NSE found 2, retrieve time: 5.45s"
time="2021-06-16T17:12:52Z" level=info msg="FindNetworkService done: time 44.181s [green6bjtj green6gqkr]"
2021/06/16 17:12:52 Reporting span 6c6b08665b30092e:19277f54f1b6d3a5:6c6b08665b30092e:1
time="2021-06-16T17:12:52Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6c6b08665b30092e:6c6b08665b30092e:0000000000000000:1"
2021/06/16 17:12:52 Reporting span 6c6b08665b30092e:6c6b08665b30092e:0000000000000000:1
time="2021-06-16T17:12:52Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6ebd88f4342c3c66:6ebd88f4342c3c66:0000000000000000:1"
time="2021-06-16T17:12:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=6ebd88f4342c3c66:6ebd88f4342c3c66:0000000000000000:1"
time="2021-06-16T17:12:52Z" level=info msg="==--> discovery.FindNetworkService() span:6ebd88f4342c3c66:23d65b422b0c58f4:6ebd88f4342c3c66:1"
time="2021-06-16T17:12:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=6ebd88f4342c3c66:23d65b422b0c58f4:6ebd88f4342c3c66:1"
time="2021-06-16T17:12:52Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=6ebd88f4342c3c66:23d65b422b0c58f4:6ebd88f4342c3c66:1"
time="2021-06-16T17:12:52Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:12:52Z" level=info msg="==----> initRegistryClient() span:6ebd88f4342c3c66:7d2f7217ca910776:23d65b422b0c58f4:1"
time="2021-06-16T17:12:52Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:12:52Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:12:52Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6ebd88f4342c3c66:7d2f7217ca910776:23d65b422b0c58f4:1"
time="2021-06-16T17:12:52Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:12:52Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:12:52Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000808ec0 {member1.com}:0xc000808f40 {member2.com}:0xc000808e40]}"
time="2021-06-16T17:12:52Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:12:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:52Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:12:52Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:12:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:12:52Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:12:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:12:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:12:52Z" level=info msg="Found 3 tlsconfigs. [0xc0001f1680 0xc0001f1800 0xc0001f1980]"
time="2021-06-16T17:12:52Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:12:57Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:12:57Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
2021/06/16 17:13:01 Reporting span 73a1fdf7c94ea262:67ea05c0cebc667d:6cc12d231e3afd38:1
time="2021-06-16T17:13:01Z" level=info msg=">><<---- response={} span=73a1fdf7c94ea262:6cc12d231e3afd38:73a1fdf7c94ea262:1"
2021/06/16 17:13:01 Reporting span 73a1fdf7c94ea262:6cc12d231e3afd38:73a1fdf7c94ea262:1
time="2021-06-16T17:13:01Z" level=info msg=">><<-- response=null span=73a1fdf7c94ea262:73a1fdf7c94ea262:0000000000000000:1"
2021/06/16 17:13:01 Reporting span 73a1fdf7c94ea262:73a1fdf7c94ea262:0000000000000000:1
time="2021-06-16T17:13:01Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1045fdc447815503:1045fdc447815503:0000000000000000:1"
time="2021-06-16T17:13:01Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1045fdc447815503:1045fdc447815503:0000000000000000:1"
time="2021-06-16T17:13:01Z" level=info msg="==--> discovery.FindNetworkService() span:1045fdc447815503:569008302fee176a:1045fdc447815503:1"
time="2021-06-16T17:13:01Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1045fdc447815503:569008302fee176a:1045fdc447815503:1"
time="2021-06-16T17:13:01Z" level=info msg="NSE found 2, retrieve time: 5.19s"
time="2021-06-16T17:13:01Z" level=info msg="FindNetworkService done: time 109.582s [green6bjtj green6gqkr]"
2021/06/16 17:13:01 Reporting span 1045fdc447815503:569008302fee176a:1045fdc447815503:1
time="2021-06-16T17:13:01Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1045fdc447815503:1045fdc447815503:0000000000000000:1"
2021/06/16 17:13:01 Reporting span 1045fdc447815503:1045fdc447815503:0000000000000000:1
time="2021-06-16T17:13:01Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=561eaf421eda59b1:561eaf421eda59b1:0000000000000000:1"
time="2021-06-16T17:13:01Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=561eaf421eda59b1:561eaf421eda59b1:0000000000000000:1"
time="2021-06-16T17:13:01Z" level=info msg="==--> discovery.FindNetworkService() span:561eaf421eda59b1:0ac850bd686a1369:561eaf421eda59b1:1"
time="2021-06-16T17:13:01Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=561eaf421eda59b1:0ac850bd686a1369:561eaf421eda59b1:1"
time="2021-06-16T17:13:01Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=561eaf421eda59b1:0ac850bd686a1369:561eaf421eda59b1:1"
time="2021-06-16T17:13:01Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:13:01Z" level=info msg="==----> initRegistryClient() span:561eaf421eda59b1:495417fc16ac0ce6:0ac850bd686a1369:1"
time="2021-06-16T17:13:01Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:13:01Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:13:01Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="561eaf421eda59b1:495417fc16ac0ce6:0ac850bd686a1369:1"
time="2021-06-16T17:13:01Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:13:01Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:13:01Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0003b2e40 {member1.com}:0xc0003b2ec0 {member2.com}:0xc0003b2dc0]}"
time="2021-06-16T17:13:01Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:13:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:01Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:13:01Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:13:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:01Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:13:01Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:13:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:01Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:13:01Z" level=info msg="Found 3 tlsconfigs. [0xc000768c00 0xc000769080 0xc000769380]"
time="2021-06-16T17:13:01Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:13:02Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:13:02Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:13:02Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:13:02Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:13:02Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="6ebd88f4342c3c66:7d2f7217ca910776:23d65b422b0c58f4:1"
2021/06/16 17:13:02 Reporting span 6ebd88f4342c3c66:7d2f7217ca910776:23d65b422b0c58f4:1
time="2021-06-16T17:13:02Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:13:02Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6ebd88f4342c3c66:23d65b422b0c58f4:6ebd88f4342c3c66:1"
time="2021-06-16T17:13:02Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=6ebd88f4342c3c66:23d65b422b0c58f4:6ebd88f4342c3c66:1"
time="2021-06-16T17:13:06Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:13:06Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:13:11Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:13:11Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:13:11Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:13:11Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:13:11Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="561eaf421eda59b1:495417fc16ac0ce6:0ac850bd686a1369:1"
2021/06/16 17:13:11 Reporting span 561eaf421eda59b1:495417fc16ac0ce6:0ac850bd686a1369:1
time="2021-06-16T17:13:11Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:13:11Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=561eaf421eda59b1:0ac850bd686a1369:561eaf421eda59b1:1"
time="2021-06-16T17:13:11Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=561eaf421eda59b1:0ac850bd686a1369:561eaf421eda59b1:1"
2021/06/16 17:13:32 Reporting span 6ebd88f4342c3c66:2178d5242e21c4b7:23d65b422b0c58f4:1
time="2021-06-16T17:13:32Z" level=info msg=">><<---- response={} span=6ebd88f4342c3c66:23d65b422b0c58f4:6ebd88f4342c3c66:1"
2021/06/16 17:13:32 Reporting span 6ebd88f4342c3c66:23d65b422b0c58f4:6ebd88f4342c3c66:1
time="2021-06-16T17:13:32Z" level=info msg=">><<-- response=null span=6ebd88f4342c3c66:6ebd88f4342c3c66:0000000000000000:1"
2021/06/16 17:13:32 Reporting span 6ebd88f4342c3c66:6ebd88f4342c3c66:0000000000000000:1
time="2021-06-16T17:13:32Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=341a09a9ba0d46fb:341a09a9ba0d46fb:0000000000000000:1"
time="2021-06-16T17:13:32Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=341a09a9ba0d46fb:341a09a9ba0d46fb:0000000000000000:1"
time="2021-06-16T17:13:32Z" level=info msg="==--> discovery.FindNetworkService() span:341a09a9ba0d46fb:1591db3f35353373:341a09a9ba0d46fb:1"
time="2021-06-16T17:13:32Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=341a09a9ba0d46fb:1591db3f35353373:341a09a9ba0d46fb:1"
time="2021-06-16T17:13:32Z" level=info msg="NSE found 2, retrieve time: 4.57s"
time="2021-06-16T17:13:32Z" level=info msg="FindNetworkService done: time 36.14s [green6bjtj green6gqkr]"
2021/06/16 17:13:32 Reporting span 341a09a9ba0d46fb:1591db3f35353373:341a09a9ba0d46fb:1
time="2021-06-16T17:13:32Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=341a09a9ba0d46fb:341a09a9ba0d46fb:0000000000000000:1"
2021/06/16 17:13:32 Reporting span 341a09a9ba0d46fb:341a09a9ba0d46fb:0000000000000000:1
time="2021-06-16T17:13:32Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=25407a3d656fe38e:25407a3d656fe38e:0000000000000000:1"
time="2021-06-16T17:13:32Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=25407a3d656fe38e:25407a3d656fe38e:0000000000000000:1"
time="2021-06-16T17:13:32Z" level=info msg="==--> discovery.FindNetworkService() span:25407a3d656fe38e:6a4f81f7a1bc3a42:25407a3d656fe38e:1"
time="2021-06-16T17:13:32Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=25407a3d656fe38e:6a4f81f7a1bc3a42:25407a3d656fe38e:1"
time="2021-06-16T17:13:32Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=25407a3d656fe38e:6a4f81f7a1bc3a42:25407a3d656fe38e:1"
time="2021-06-16T17:13:32Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:13:32Z" level=info msg="==----> initRegistryClient() span:25407a3d656fe38e:14f8043454dbb2bd:6a4f81f7a1bc3a42:1"
time="2021-06-16T17:13:32Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:13:32Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:13:32Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="25407a3d656fe38e:14f8043454dbb2bd:6a4f81f7a1bc3a42:1"
time="2021-06-16T17:13:32Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:13:32Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:13:32Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004d4540 {member1.com}:0xc0004d45c0 {member2.com}:0xc0004d44c0]}"
time="2021-06-16T17:13:32Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:13:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:32Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:13:32Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:13:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:13:32Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:13:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:13:32Z" level=info msg="Found 3 tlsconfigs. [0xc000780f00 0xc00072c180 0xc00072c300]"
time="2021-06-16T17:13:32Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:13:37Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:13:37Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
2021/06/16 17:13:41 Reporting span 561eaf421eda59b1:1df70d17da66a273:0ac850bd686a1369:1
time="2021-06-16T17:13:41Z" level=info msg=">><<---- response={} span=561eaf421eda59b1:0ac850bd686a1369:561eaf421eda59b1:1"
2021/06/16 17:13:41 Reporting span 561eaf421eda59b1:0ac850bd686a1369:561eaf421eda59b1:1
time="2021-06-16T17:13:41Z" level=info msg=">><<-- response=null span=561eaf421eda59b1:561eaf421eda59b1:0000000000000000:1"
2021/06/16 17:13:41 Reporting span 561eaf421eda59b1:561eaf421eda59b1:0000000000000000:1
time="2021-06-16T17:13:41Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=75ec458fd18dc6ec:75ec458fd18dc6ec:0000000000000000:1"
time="2021-06-16T17:13:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=75ec458fd18dc6ec:75ec458fd18dc6ec:0000000000000000:1"
time="2021-06-16T17:13:41Z" level=info msg="==--> discovery.FindNetworkService() span:75ec458fd18dc6ec:1eb933107a94e4fe:75ec458fd18dc6ec:1"
time="2021-06-16T17:13:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=75ec458fd18dc6ec:1eb933107a94e4fe:75ec458fd18dc6ec:1"
time="2021-06-16T17:13:41Z" level=info msg="NSE found 2, retrieve time: 5.68s"
time="2021-06-16T17:13:41Z" level=info msg="FindNetworkService done: time 175.763s [green6bjtj green6gqkr]"
2021/06/16 17:13:41 Reporting span 75ec458fd18dc6ec:1eb933107a94e4fe:75ec458fd18dc6ec:1
time="2021-06-16T17:13:41Z" level=info msg=">><<-- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"10.244.0.13:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green6bjtj\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-24scx\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green6gqkr\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=75ec458fd18dc6ec:75ec458fd18dc6ec:0000000000000000:1"
2021/06/16 17:13:41 Reporting span 75ec458fd18dc6ec:75ec458fd18dc6ec:0000000000000000:1
time="2021-06-16T17:13:41Z" level=info msg=">><<-- GRPC->/registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=4c8154f6f4fba44e:4c8154f6f4fba44e:0000000000000000:1"
time="2021-06-16T17:13:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=4c8154f6f4fba44e:4c8154f6f4fba44e:0000000000000000:1"
time="2021-06-16T17:13:41Z" level=info msg="==--> discovery.FindNetworkService() span:4c8154f6f4fba44e:7149d9ab4d1b841f:4c8154f6f4fba44e:1"
time="2021-06-16T17:13:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=4c8154f6f4fba44e:7149d9ab4d1b841f:4c8154f6f4fba44e:1"
time="2021-06-16T17:13:41Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr:5005\" span=4c8154f6f4fba44e:7149d9ab4d1b841f:4c8154f6f4fba44e:1"
time="2021-06-16T17:13:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-16T17:13:41Z" level=info msg="==----> initRegistryClient() span:4c8154f6f4fba44e:2215222fa2e45edc:7149d9ab4d1b841f:1"
time="2021-06-16T17:13:41Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:13:41Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr:5005"
time="2021-06-16T17:13:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4c8154f6f4fba44e:2215222fa2e45edc:7149d9ab4d1b841f:1"
time="2021-06-16T17:13:41Z" level=info msg="Trying to establish connection to target: wcm-proxy-nsmgr:5005"
time="2021-06-16T17:13:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-16T17:13:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00084ed00 {member1.com}:0xc00084ed80 {member2.com}:0xc00084ec80]}"
time="2021-06-16T17:13:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-16T17:13:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-16T17:13:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-16T17:13:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-16T17:13:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-16T17:13:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-16T17:13:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-16T17:13:41Z" level=info msg="Found 3 tlsconfigs. [0xc0007fca80 0xc0007fcc00 0xc0006c0780]"
time="2021-06-16T17:13:41Z" level=info msg="trying to connect to target using tls: 0 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:13:42Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:13:42Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:13:42Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:13:42Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:13:42Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="25407a3d656fe38e:14f8043454dbb2bd:6a4f81f7a1bc3a42:1"
2021/06/16 17:13:42 Reporting span 25407a3d656fe38e:14f8043454dbb2bd:6a4f81f7a1bc3a42:1
time="2021-06-16T17:13:42Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:13:42Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=25407a3d656fe38e:6a4f81f7a1bc3a42:25407a3d656fe38e:1"
time="2021-06-16T17:13:42Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=25407a3d656fe38e:6a4f81f7a1bc3a42:25407a3d656fe38e:1"
time="2021-06-16T17:13:46Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:13:46Z" level=info msg="trying to connect to target using tls: 1 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:13:51Z" level=info msg="Forward BulkRegisterNSE request: network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6bjtj\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-24scx\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" > " operation=ProxyNsmgr.BulkRegisterNSE span="65c2b76707fee904:397d8a7c23712cab:2089e007e5400dde:1"
2021/06/16 17:13:51 Reporting span 65c2b76707fee904:3c15a29c89a41147:397d8a7c23712cab:1
time="2021-06-16T17:13:51Z" level=warning msg="Error forwarding BulkRegisterNSE request to wcm-proxy-nsmgr:5005 : EOF" operation=ProxyNsmgr.BulkRegisterNSE span="65c2b76707fee904:397d8a7c23712cab:2089e007e5400dde:1"
time="2021-06-16T17:13:51Z" level=warning msg="Tls didnt match server tls Error: context deadline exceeded"
time="2021-06-16T17:13:51Z" level=info msg="trying to connect to target using tls: 2 &{Rand:<nil> Time:<nil> Certificates:[] NameToCertificate:map[] GetCertificate:<nil> GetClientCertificate:0x99b880 GetConfigForClient:<nil> VerifyPeerCertificate:0x99b900 VerifyConnection:<nil> RootCAs:<nil> NextProtos:[] ServerName: ClientAuth:NoClientCert ClientCAs:<nil> InsecureSkipVerify:true CipherSuites:[] PreferServerCipherSuites:false SessionTicketsDisabled:false SessionTicketKey:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] ClientSessionCache:<nil> MinVersion:0 MaxVersion:0 CurvePreferences:[] DynamicRecordSizingDisabled:false Renegotiation:0 KeyLogWriter:<nil> mutex:{w:{state:0 sema:0} writerSem:0 readerSem:0 readerCount:0 readerWait:0} sessionTicketKeys:[] autoSessionTicketKeys:[]}"
time="2021-06-16T17:13:51Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:13:51Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0x99b880 <nil> 0x99b900 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-16T17:13:51Z" level=info msg="Successfully connected to wcm-proxy-nsmgr:5005" operation=initRegistryClient span="4c8154f6f4fba44e:2215222fa2e45edc:7149d9ab4d1b841f:1"
2021/06/16 17:13:51 Reporting span 4c8154f6f4fba44e:2215222fa2e45edc:7149d9ab4d1b841f:1
time="2021-06-16T17:13:51Z" level=info msg="Transfer request to proxy nsmd-k8s: network_service_name:\"green@green.nispatil-wcm-cisco.com\" "
time="2021-06-16T17:13:51Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=4c8154f6f4fba44e:7149d9ab4d1b841f:4c8154f6f4fba44e:1"
time="2021-06-16T17:13:51Z" level=info msg=">><<---- request={\"network_service_name\":\"green@green.nispatil-wcm-cisco.com\"} span=4c8154f6f4fba44e:7149d9ab4d1b841f:4c8154f6f4fba44e:1"
time="2021-06-16T17:13:52Z" level=info msg="Forward BulkRegisterNSE request: network_service:<name:\"green\" payload:\"IP\" > network_service_manager:<name:\"kind-3-control-plane\" url:\"10.244.0.13:5001\" state:\"RUNNING\" > network_service_endpoint:<name:\"green6gqkr\" payload:\"IP\" network_service_name:\"green\" network_service_manager_name:\"kind-3-control-plane\" labels:<key:\"app\" value:\"vl3-nse-green\" > labels:<key:\"networkservicename\" value:\"green\" > labels:<key:\"nsepod.name\" value:\"green-kind-3_vl3-nse-green-7555496c4c-5ldtk\" > labels:<key:\"wcm/nsr.addr\" value:\"green.nispatil-wcm-cisco.com\" > labels:<key:\"wcm/nsr.port\" value:\"443\" > state:\"RUNNING\" > " operation=ProxyNsmgr.BulkRegisterNSE span="406bf10b3b03d016:5918e7597a476d30:67e2e892cdf20e69:1"
2021/06/16 17:13:52 Reporting span 406bf10b3b03d016:53b8ed0dcb318516:5918e7597a476d30:1
time="2021-06-16T17:13:52Z" level=warning msg="Error forwarding BulkRegisterNSE request to wcm-proxy-nsmgr:5005 : EOF" operation=ProxyNsmgr.BulkRegisterNSE span="406bf10b3b03d016:5918e7597a476d30:67e2e892cdf20e69:1"
==== END logs for container nsmd-k8s of pod nsm-system/wcm-nsmgr-jf5x8 ====
