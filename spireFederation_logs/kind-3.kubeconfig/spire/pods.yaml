---
apiVersion: v1
items:
- metadata:
    creationTimestamp: "2021-06-17T06:26:04Z"
    generateName: wcm-spire-agent-
    labels:
      app: spire-agent
      controller-revision-hash: 8944446df
      pod-template-generation: "1"
    name: wcm-spire-agent-9s9hj
    namespace: spire
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: DaemonSet
      name: wcm-spire-agent
      uid: 41c9e7b8-8270-4b3b-9284-1ecfd14d668b
    resourceVersion: "3028"
    selfLink: /api/v1/namespaces/spire/pods/wcm-spire-agent-9s9hj
    uid: 88636a1d-0403-4d1b-9f4c-50367ac6ff09
  spec:
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
          - matchFields:
            - key: metadata.name
              operator: In
              values:
              - kind-3-control-plane
    containers:
    - args:
      - -config
      - /run/spire/config/agent.conf
      image: gcr.io/spiffe-io/spire-agent:0.11.0
      imagePullPolicy: IfNotPresent
      livenessProbe:
        exec:
          command:
          - /bin/sh
          - -c
          - /opt/spire/bin/spire-agent api fetch -socketPath /run/spire/sockets/agent.sock
            2>&1 | grep -vqE 'connection refused|no such file or directory'
        failureThreshold: 2
        initialDelaySeconds: 15
        periodSeconds: 60
        successThreshold: 1
        timeoutSeconds: 3
      name: spire-agent
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /run/spire/config
        name: spire-config
        readOnly: true
      - mountPath: /run/spire/sockets
        name: spire-agent-socket
      - mountPath: /run/spire/bundle
        name: wcm-spire-bundle-config-map
        readOnly: true
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: wcm-spire-agent-service-account-token-zgdgj
        readOnly: true
    dnsPolicy: ClusterFirstWithHostNet
    enableServiceLinks: true
    hostNetwork: true
    hostPID: true
    initContainers:
    - args:
      - -t
      - "30"
      - wcm-spire-server:8081
      image: gcr.io/spiffe-io/wait-for-it
      imagePullPolicy: Always
      name: init
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: wcm-spire-agent-service-account-token-zgdgj
        readOnly: true
    nodeName: kind-3-control-plane
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: wcm-spire-agent-service-account
    serviceAccountName: wcm-spire-agent-service-account
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/disk-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/memory-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/pid-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/unschedulable
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/network-unavailable
      operator: Exists
    volumes:
    - configMap:
        defaultMode: 420
        name: wcm-spire-agent-config-map
      name: spire-config
    - configMap:
        defaultMode: 420
        name: wcm-spire-bundle-config-map
      name: wcm-spire-bundle-config-map
    - hostPath:
        path: /run/spire/sockets
        type: DirectoryOrCreate
      name: spire-agent-socket
    - name: wcm-spire-agent-service-account-token-zgdgj
      secret:
        defaultMode: 420
        secretName: wcm-spire-agent-service-account-token-zgdgj
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2021-06-17T06:26:12Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2021-06-17T06:26:13Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2021-06-17T06:26:13Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2021-06-17T06:26:04Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://ebfb8aef31b289a956c06053f76fea9a517d4d088d0ab11e05c0a7508d7eee6d
      image: gcr.io/spiffe-io/spire-agent:0.11.0
      imageID: sha256:f24f52a2596fe1fb66586f6f68b410cdcc4c705424024c66a885104777ca4a0f
      lastState: {}
      name: spire-agent
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2021-06-17T06:26:12Z"
    hostIP: 172.17.0.4
    initContainerStatuses:
    - containerID: containerd://08e71276145326f2db10fdfdba6dd3a10e8c6bcbd2e0c51fa6e5880330b304fd
      image: gcr.io/spiffe-io/wait-for-it:latest
      imageID: gcr.io/spiffe-io/wait-for-it@sha256:d9bdc931e4404237d2fb0ba84db5ece88b236c40eeca570d786ee54fd243f4ae
      lastState: {}
      name: init
      ready: true
      restartCount: 0
      state:
        terminated:
          containerID: containerd://08e71276145326f2db10fdfdba6dd3a10e8c6bcbd2e0c51fa6e5880330b304fd
          exitCode: 0
          finishedAt: "2021-06-17T06:26:11Z"
          reason: Completed
          startedAt: "2021-06-17T06:26:07Z"
    phase: Running
    podIP: 172.17.0.4
    podIPs:
    - ip: 172.17.0.4
    qosClass: BestEffort
    startTime: "2021-06-17T06:26:05Z"
- metadata:
    creationTimestamp: "2021-06-17T06:34:28Z"
    generateName: wcm-spire-server-
    labels:
      app: wcm-spire-server
      controller-revision-hash: wcm-spire-server-665467cfdf
      statefulset.kubernetes.io/pod-name: wcm-spire-server-0
    name: wcm-spire-server-0
    namespace: spire
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: StatefulSet
      name: wcm-spire-server
      uid: 64ff88f8-a0a4-488b-aba3-c2c5b2e37f64
    resourceVersion: "4722"
    selfLink: /api/v1/namespaces/spire/pods/wcm-spire-server-0
    uid: 0755650f-f522-4d0e-b9f4-627b9c5c477d
  spec:
    containers:
    - image: docker.io/networkservicemesh/nsm-spire:master
      imagePullPolicy: IfNotPresent
      name: nsm-spire
      resources: {}
      securityContext:
        privileged: true
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /run/spire/sockets
        name: spire-server-socket
        readOnly: true
      - mountPath: /run/spire/entries
        name: wcm-spire-entries-config-map
        readOnly: true
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: wcm-spire-server-service-account-token-q5zzp
        readOnly: true
    - args:
      - -config
      - /run/spire/config/server.conf
      image: gcr.io/spiffe-io/spire-server:0.11.0
      imagePullPolicy: IfNotPresent
      livenessProbe:
        failureThreshold: 2
        initialDelaySeconds: 15
        periodSeconds: 60
        successThreshold: 1
        tcpSocket:
          port: 8081
        timeoutSeconds: 3
      name: wcm-spire-server
      ports:
      - containerPort: 8081
        protocol: TCP
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /run/spire/sockets
        name: spire-server-socket
      - mountPath: /run/spire/config
        name: spire-config
        readOnly: true
      - mountPath: /run/spire/data
        name: spire-data
      - mountPath: /run/spire/secret
        name: wcm-spire-server-secret
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: wcm-spire-server-service-account-token-q5zzp
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    hostname: wcm-spire-server-0
    nodeName: kind-3-control-plane
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: wcm-spire-server-service-account
    serviceAccountName: wcm-spire-server-service-account
    shareProcessNamespace: true
    subdomain: wcm-spire-server
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - hostPath:
        path: /run/spire/server-sockets
        type: DirectoryOrCreate
      name: spire-server-socket
    - configMap:
        defaultMode: 420
        name: wcm-spire-server-config-map
      name: spire-config
    - name: wcm-spire-server-secret
      secret:
        defaultMode: 420
        secretName: wcm-spire-server-secret
    - configMap:
        defaultMode: 420
        name: wcm-spire-entries-config-map
      name: wcm-spire-entries-config-map
    - hostPath:
        path: /var/spire-data
        type: DirectoryOrCreate
      name: spire-data
    - name: wcm-spire-server-service-account-token-q5zzp
      secret:
        defaultMode: 420
        secretName: wcm-spire-server-service-account-token-q5zzp
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2021-06-17T06:34:28Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2021-06-17T06:34:30Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2021-06-17T06:34:30Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2021-06-17T06:34:28Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://a1caa29c87520a44101bd3d576948228a44b9c208c8297f7e6d0bad638c4e1b1
      image: docker.io/networkservicemesh/nsm-spire:master
      imageID: docker.io/networkservicemesh/nsm-spire@sha256:a713d95627223bbf9b31306a429c9f6293609119a0d6c58e8d27971f4b6fdf1c
      lastState: {}
      name: nsm-spire
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2021-06-17T06:34:29Z"
    - containerID: containerd://6adef4046d7c63a56a2dd76b8caba02f4284aaa32b062e3a0ffda80cc5c2c914
      image: gcr.io/spiffe-io/spire-server:0.11.0
      imageID: gcr.io/spiffe-io/spire-server@sha256:bc42ea43755b040d6f30fe4245d13b844bd3d60792a3da8ac24e066eee87d76c
      lastState: {}
      name: wcm-spire-server
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2021-06-17T06:34:29Z"
    hostIP: 172.17.0.4
    phase: Running
    podIP: 10.244.0.15
    podIPs:
    - ip: 10.244.0.15
    qosClass: BestEffort
    startTime: "2021-06-17T06:34:28Z"
kind: PodList
metadata:
  resourceVersion: "107476"
  selfLink: /api/v1/namespaces/spire/pods
