---
apiVersion: v1
items:
- metadata:
    annotations:
      sidecar.istio.io/inject: "false"
      wcm/nsr.address: green.nispatil-wcm-cisco.com
      wcm/nsr.port: "443"
    creationTimestamp: "2021-06-14T14:56:00Z"
    generateName: vl3-nse-green-7555496c4c-
    labels:
      networkservicemesh.io/app: vl3-nse-green
      networkservicemesh.io/impl: green
      pod-template-hash: 7555496c4c
      wcm-nse: green
      wcm/nse.servicename: green
    name: vl3-nse-green-7555496c4c-blkt5
    namespace: wcm-system
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: vl3-nse-green-7555496c4c
      uid: 8a83ebe4-f15f-43ba-ad04-b99e8fcc7bda
    resourceVersion: "3636"
    selfLink: /api/v1/namespaces/wcm-system/pods/vl3-nse-green-7555496c4c-blkt5
    uid: 7b480888-470c-4939-8d4d-ba19cfe6d959
  spec:
    containers:
    - env:
      - name: ENDPOINT_NETWORK_SERVICE
        value: green
      - name: ENDPOINT_LABELS
        value: app=vl3-nse-green
      - name: TRACER_ENABLED
        value: "true"
      - name: JAEGER_SERVICE_HOST
        value: wcm-jaeger.nsm-system
      - name: JAEGER_SERVICE_PORT_JAEGER
        value: "6831"
      - name: JAEGER_AGENT_HOST
        value: wcm-jaeger.nsm-system
      - name: JAEGER_AGENT_PORT
        value: "6831"
      - name: WORKLOAD_REFRESH_INTERVAL
        value: 2h30m
      - name: NSREGISTRY_ADDR
        value: wcm-nsmgr.nsm-system
      - name: NSREGISTRY_PORT
        value: "5000"
      - name: CLUSTER_NAME
        value: green-kind-3
      - name: NSE_POD_IP
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: status.podIP
      - name: NSE_POD_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.name
      - name: NSM_REMOTE_NS_IP_LIST
        valueFrom:
          configMapKeyRef:
            key: remote.ip_list
            name: nsm-vl3-green-config-map
      - name: METRICS_PORT
        value: "2112"
      - name: WORKLOAD_METRICS_PORT
        value: "3000"
      - name: INSECURE
        value: "false"
      - name: TRUST_SVIDS
        value: spiffe://central.com/example-connectivity-domain-app-dns-publisher,spiffe://central.com/example-connectivity-domain-wcmd,spiffe://member1.com/wcm-nsmgr,spiffe://member2.com/wcm-nsmgr,spiffe://member1.com/wcm-nsm-vpp-forwarder,spiffe://member2.com/wcm-nsm-vpp-forwarder
      image: nishantapatil3/vl3_ucnf-nse:latest
      imagePullPolicy: IfNotPresent
      name: vl3-nse-green
      ports:
      - containerPort: 9191
        name: monitoring-vpp
        protocol: TCP
      - containerPort: 2112
        name: monitoring
        protocol: TCP
      - containerPort: 3000
        name: workload
        protocol: TCP
      resources:
        limits:
          networkservicemesh.io/socket: "1"
        requests:
          networkservicemesh.io/socket: "1"
      securityContext:
        capabilities:
          add:
          - NET_ADMIN
        privileged: true
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /etc/universal-cnf/config.yaml
        name: universal-cnf-config-volume
        subPath: config.yaml
      - mountPath: /run/spire/sockets
        name: spire-agent-socket
        readOnly: true
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: vl3-nse-green-service-account-token-mgwjd
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: kind-3-control-plane
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: vl3-nse-green-service-account
    serviceAccountName: vl3-nse-green-service-account
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - configMap:
        defaultMode: 420
        name: vl3-nse-green-config-map
      name: universal-cnf-config-volume
    - hostPath:
        path: /run/spire/sockets
        type: DirectoryOrCreate
      name: spire-agent-socket
    - name: vl3-nse-green-service-account-token-mgwjd
      secret:
        defaultMode: 420
        secretName: vl3-nse-green-service-account-token-mgwjd
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2021-06-14T14:56:00Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2021-06-14T14:58:55Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2021-06-14T14:58:55Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2021-06-14T14:56:00Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://bf3046e2bd43f244dd13b21721c08d9e99a12260018c3a2801648ef182388745
      image: docker.io/nishantapatil3/vl3_ucnf-nse:latest
      imageID: sha256:68ffa859d391d7c58c5c29126bbc0ba5348202a548865a1f69e2da76f4bb4a62
      lastState:
        terminated:
          containerID: containerd://237df070fc6f0f6d6a8d73c82ccc170fa14535c8a7c55316a9b815e3056051e6
          exitCode: 0
          finishedAt: "2021-06-14T14:58:38Z"
          reason: Completed
          startedAt: "2021-06-14T14:57:35Z"
      name: vl3-nse-green
      ready: true
      restartCount: 2
      started: true
      state:
        running:
          startedAt: "2021-06-14T14:58:55Z"
    hostIP: 172.17.0.4
    phase: Running
    podIP: 10.244.0.15
    podIPs:
    - ip: 10.244.0.15
    qosClass: BestEffort
    startTime: "2021-06-14T14:56:00Z"
- metadata:
    annotations:
      sidecar.istio.io/inject: "false"
      wcm/nsr.address: green.nispatil-wcm-cisco.com
      wcm/nsr.port: "443"
    creationTimestamp: "2021-06-14T14:56:00Z"
    generateName: vl3-nse-green-7555496c4c-
    labels:
      networkservicemesh.io/app: vl3-nse-green
      networkservicemesh.io/impl: green
      pod-template-hash: 7555496c4c
      wcm-nse: green
      wcm/nse.servicename: green
    name: vl3-nse-green-7555496c4c-xvfj4
    namespace: wcm-system
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: vl3-nse-green-7555496c4c
      uid: 8a83ebe4-f15f-43ba-ad04-b99e8fcc7bda
    resourceVersion: "3631"
    selfLink: /api/v1/namespaces/wcm-system/pods/vl3-nse-green-7555496c4c-xvfj4
    uid: 0100dc75-9750-4885-aeaa-abfb772fbc13
  spec:
    containers:
    - env:
      - name: ENDPOINT_NETWORK_SERVICE
        value: green
      - name: ENDPOINT_LABELS
        value: app=vl3-nse-green
      - name: TRACER_ENABLED
        value: "true"
      - name: JAEGER_SERVICE_HOST
        value: wcm-jaeger.nsm-system
      - name: JAEGER_SERVICE_PORT_JAEGER
        value: "6831"
      - name: JAEGER_AGENT_HOST
        value: wcm-jaeger.nsm-system
      - name: JAEGER_AGENT_PORT
        value: "6831"
      - name: WORKLOAD_REFRESH_INTERVAL
        value: 2h30m
      - name: NSREGISTRY_ADDR
        value: wcm-nsmgr.nsm-system
      - name: NSREGISTRY_PORT
        value: "5000"
      - name: CLUSTER_NAME
        value: green-kind-3
      - name: NSE_POD_IP
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: status.podIP
      - name: NSE_POD_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.name
      - name: NSM_REMOTE_NS_IP_LIST
        valueFrom:
          configMapKeyRef:
            key: remote.ip_list
            name: nsm-vl3-green-config-map
      - name: METRICS_PORT
        value: "2112"
      - name: WORKLOAD_METRICS_PORT
        value: "3000"
      - name: INSECURE
        value: "false"
      - name: TRUST_SVIDS
        value: spiffe://central.com/example-connectivity-domain-app-dns-publisher,spiffe://central.com/example-connectivity-domain-wcmd,spiffe://member1.com/wcm-nsmgr,spiffe://member2.com/wcm-nsmgr,spiffe://member1.com/wcm-nsm-vpp-forwarder,spiffe://member2.com/wcm-nsm-vpp-forwarder
      image: nishantapatil3/vl3_ucnf-nse:latest
      imagePullPolicy: IfNotPresent
      name: vl3-nse-green
      ports:
      - containerPort: 9191
        name: monitoring-vpp
        protocol: TCP
      - containerPort: 2112
        name: monitoring
        protocol: TCP
      - containerPort: 3000
        name: workload
        protocol: TCP
      resources:
        limits:
          networkservicemesh.io/socket: "1"
        requests:
          networkservicemesh.io/socket: "1"
      securityContext:
        capabilities:
          add:
          - NET_ADMIN
        privileged: true
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /etc/universal-cnf/config.yaml
        name: universal-cnf-config-volume
        subPath: config.yaml
      - mountPath: /run/spire/sockets
        name: spire-agent-socket
        readOnly: true
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: vl3-nse-green-service-account-token-mgwjd
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: kind-3-control-plane
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: vl3-nse-green-service-account
    serviceAccountName: vl3-nse-green-service-account
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - configMap:
        defaultMode: 420
        name: vl3-nse-green-config-map
      name: universal-cnf-config-volume
    - hostPath:
        path: /run/spire/sockets
        type: DirectoryOrCreate
      name: spire-agent-socket
    - name: vl3-nse-green-service-account-token-mgwjd
      secret:
        defaultMode: 420
        secretName: vl3-nse-green-service-account-token-mgwjd
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2021-06-14T14:56:01Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2021-06-14T14:58:55Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2021-06-14T14:58:55Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2021-06-14T14:56:00Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://e86110fe06787b066d7efe6ed119e2583d38e26e5109daafeadef43312a6e185
      image: docker.io/nishantapatil3/vl3_ucnf-nse:latest
      imageID: sha256:68ffa859d391d7c58c5c29126bbc0ba5348202a548865a1f69e2da76f4bb4a62
      lastState:
        terminated:
          containerID: containerd://748a3e19b90a27b1ef5c9f40e0b5a9c6a16b30c90d93caac62cda582f6a7c01e
          exitCode: 0
          finishedAt: "2021-06-14T14:58:38Z"
          reason: Completed
          startedAt: "2021-06-14T14:57:35Z"
      name: vl3-nse-green
      ready: true
      restartCount: 2
      started: true
      state:
        running:
          startedAt: "2021-06-14T14:58:54Z"
    hostIP: 172.17.0.4
    phase: Running
    podIP: 10.244.0.16
    podIPs:
    - ip: 10.244.0.16
    qosClass: BestEffort
    startTime: "2021-06-14T14:56:01Z"
- metadata:
    creationTimestamp: "2021-06-14T14:50:10Z"
    generateName: wcm-nse-discovery-5f68d85698-
    labels:
      app: nse-discovery-wcm
      membercore: wcm
      pod-template-hash: 5f68d85698
    name: wcm-nse-discovery-5f68d85698-2cc2k
    namespace: wcm-system
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: wcm-nse-discovery-5f68d85698
      uid: 9082ffb4-d667-4dae-920f-5614bf9257b6
    resourceVersion: "1978"
    selfLink: /api/v1/namespaces/wcm-system/pods/wcm-nse-discovery-5f68d85698-2cc2k
    uid: 330128d1-9db4-499f-8b63-0adc3d4ac5ef
  spec:
    containers:
    - env:
      - name: POD_UID
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.uid
      - name: CLUSTER_NAME
        value: member2
      - name: INSECURE
        value: "false"
      - name: NSE_NAMESPACE
        value: wcm-system
      - name: NSR_ADDRESS
        value: wcm-proxy-nsmgr.nsm-system:5005
      - name: METRICS_PORT
        value: "2112"
      image: nishantapatil3/nse-discovery-operator:latest
      imagePullPolicy: IfNotPresent
      name: wcm-nse-discovery
      ports:
      - containerPort: 2112
        name: monitoring
        protocol: TCP
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /run/spire/sockets
        name: spire-agent-socket
        readOnly: true
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: wcm-nse-discovery-service-account-token-2l8cq
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: kind-3-control-plane
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: wcm-nse-discovery-service-account
    serviceAccountName: wcm-nse-discovery-service-account
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - hostPath:
        path: /run/spire/sockets
        type: DirectoryOrCreate
      name: spire-agent-socket
    - name: wcm-nse-discovery-service-account-token-2l8cq
      secret:
        defaultMode: 420
        secretName: wcm-nse-discovery-service-account-token-2l8cq
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2021-06-14T14:50:10Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2021-06-14T14:50:11Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2021-06-14T14:50:11Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2021-06-14T14:50:10Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://b4f48e8b8b31afbd6fa22cbd6d77933abb35497ac19674d47a758b31955ff783
      image: docker.io/nishantapatil3/nse-discovery-operator:latest
      imageID: sha256:1b5ecfa6d0d767dd2db1c356acedf754f7294d781e4021d8bcbfc1310364d3e2
      lastState: {}
      name: wcm-nse-discovery
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2021-06-14T14:50:11Z"
    hostIP: 172.17.0.4
    phase: Running
    podIP: 10.244.0.14
    podIPs:
    - ip: 10.244.0.14
    qosClass: BestEffort
    startTime: "2021-06-14T14:50:10Z"
- metadata:
    creationTimestamp: "2021-06-14T14:49:43Z"
    generateName: wcm-nse-operator-6fb5b6fb4c-
    labels:
      name: wcm-nse-operator
      pod-template-hash: 6fb5b6fb4c
    name: wcm-nse-operator-6fb5b6fb4c-5rllm
    namespace: wcm-system
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: wcm-nse-operator-6fb5b6fb4c
      uid: 28dd9966-afa0-4e03-891a-1711d8665096
    resourceVersion: "1599"
    selfLink: /api/v1/namespaces/wcm-system/pods/wcm-nse-operator-6fb5b6fb4c-5rllm
    uid: 74084818-87aa-47b9-8926-0081c0360638
  spec:
    containers:
    - command:
      - wcm-nse-operator
      env:
      - name: WATCH_NAMESPACE
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.namespace
      - name: POD_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.name
      - name: OPERATOR_NAME
        value: wcm-nse-operator
      - name: CONFIG_PATH
        value: etc/wcm-vpp-nse-configmap/config.yaml
      - name: INSECURE
        value: "false"
      image: nishantapatil3/wcm-nse-operator:latest
      imagePullPolicy: IfNotPresent
      name: wcm-nse-operator
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: etc/wcm-vpp-nse-configmap/config.yaml
        name: config-data-wcm-nse
        subPath: config.yaml
      - mountPath: /run/spire/sockets
        name: spire-agent-socket
        readOnly: true
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: wcm-nse-operator-service-account-token-6xl24
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: kind-3-control-plane
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: wcm-nse-operator-service-account
    serviceAccountName: wcm-nse-operator-service-account
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - configMap:
        defaultMode: 420
        name: wcm-vpp-nse-configmap
      name: config-data-wcm-nse
    - hostPath:
        path: /run/spire/sockets
        type: DirectoryOrCreate
      name: spire-agent-socket
    - name: wcm-nse-operator-service-account-token-6xl24
      secret:
        defaultMode: 420
        secretName: wcm-nse-operator-service-account-token-6xl24
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2021-06-14T14:49:43Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2021-06-14T14:49:45Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2021-06-14T14:49:45Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2021-06-14T14:49:43Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://08ffccb744d740f519af7b450c8ff18413a0d628ab42263c836eb75c166b617d
      image: docker.io/nishantapatil3/wcm-nse-operator:latest
      imageID: sha256:9d37be55cadf9f97c4951248a9e7948f8ffcd4f60e3308ca620d6ada42733195
      lastState: {}
      name: wcm-nse-operator
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2021-06-14T14:49:44Z"
    hostIP: 172.17.0.4
    phase: Running
    podIP: 10.244.0.7
    podIPs:
    - ip: 10.244.0.7
    qosClass: BestEffort
    startTime: "2021-06-14T14:49:43Z"
kind: PodList
metadata:
  resourceVersion: "3771"
  selfLink: /api/v1/namespaces/wcm-system/pods
