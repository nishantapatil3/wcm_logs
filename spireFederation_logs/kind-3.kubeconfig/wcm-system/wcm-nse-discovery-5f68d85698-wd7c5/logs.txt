==== START logs for container wcm-nse-discovery of pod wcm-system/wcm-nse-discovery-5f68d85698-wd7c5 ====
{"level":"info","ts":1623911191.6908593,"caller":"cmd/main.go:45","msg":"Starting WCM nse-discovery...","app":"nse-discovery"}
{"level":"info","ts":1623911191.693699,"caller":"utils/nsrenv.go:29","msg":"All env variables:","app":"nse-discovery"}
{"level":"info","ts":1623911191.69372,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_PORT=tcp://10.107.140.148:2112","app":"nse-discovery"}
{"level":"info","ts":1623911191.6937342,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_SERVICE_PORT_HTTP_METRICS=8383","app":"nse-discovery"}
{"level":"info","ts":1623911191.693768,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_SERVICE_PORT=2112","app":"nse-discovery"}
{"level":"info","ts":1623911191.693782,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_SERVICE_HOST=10.111.230.235","app":"nse-discovery"}
{"level":"info","ts":1623911191.6941035,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_SERVICE_PORT=443","app":"nse-discovery"}
{"level":"info","ts":1623911191.694142,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_PORT=tcp://10.96.0.1:443","app":"nse-discovery"}
{"level":"info","ts":1623911191.6941533,"caller":"utils/nsrenv.go:31","msg":"NSE_NAMESPACE=wcm-system","app":"nse-discovery"}
{"level":"info","ts":1623911191.6941714,"caller":"utils/nsrenv.go:31","msg":"METRICS_PORT=2112","app":"nse-discovery"}
{"level":"info","ts":1623911191.6941776,"caller":"utils/nsrenv.go:31","msg":"HOSTNAME=wcm-nse-discovery-5f68d85698-wd7c5","app":"nse-discovery"}
{"level":"info","ts":1623911191.6941833,"caller":"utils/nsrenv.go:31","msg":"SHLVL=1","app":"nse-discovery"}
{"level":"info","ts":1623911191.6941907,"caller":"utils/nsrenv.go:31","msg":"HOME=/root","app":"nse-discovery"}
{"level":"info","ts":1623911191.6943274,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_PORT_8383_TCP_ADDR=10.111.230.235","app":"nse-discovery"}
{"level":"info","ts":1623911191.694415,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_SERVICE_PORT=8383","app":"nse-discovery"}
{"level":"info","ts":1623911191.6945193,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_PORT=tcp://10.111.230.235:8383","app":"nse-discovery"}
{"level":"info","ts":1623911191.6945662,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_PORT_8383_TCP_PORT=8383","app":"nse-discovery"}
{"level":"info","ts":1623911191.69461,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_SERVICE_PORT_MONITORING=2112","app":"nse-discovery"}
{"level":"info","ts":1623911191.694623,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_PORT_8383_TCP_PROTO=tcp","app":"nse-discovery"}
{"level":"info","ts":1623911191.6946568,"caller":"utils/nsrenv.go:31","msg":"CLUSTER_NAME=member2","app":"nse-discovery"}
{"level":"info","ts":1623911191.6947494,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_PORT_8686_TCP_ADDR=10.111.230.235","app":"nse-discovery"}
{"level":"info","ts":1623911191.6947668,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_PORT_8686_TCP_PORT=8686","app":"nse-discovery"}
{"level":"info","ts":1623911191.6947849,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_PORT_8686_TCP_PROTO=tcp","app":"nse-discovery"}
{"level":"info","ts":1623911191.6948073,"caller":"utils/nsrenv.go:31","msg":"INSECURE=false","app":"nse-discovery"}
{"level":"info","ts":1623911191.694872,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_PORT_443_TCP_ADDR=10.96.0.1","app":"nse-discovery"}
{"level":"info","ts":1623911191.694884,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_PORT_8383_TCP=tcp://10.111.230.235:8383","app":"nse-discovery"}
{"level":"info","ts":1623911191.6948931,"caller":"utils/nsrenv.go:31","msg":"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin","app":"nse-discovery"}
{"level":"info","ts":1623911191.694908,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_PORT_443_TCP_PORT=443","app":"nse-discovery"}
{"level":"info","ts":1623911191.694926,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_PORT_2112_TCP_ADDR=10.107.140.148","app":"nse-discovery"}
{"level":"info","ts":1623911191.6949644,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_PORT_443_TCP_PROTO=tcp","app":"nse-discovery"}
{"level":"info","ts":1623911191.6949766,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_SERVICE_PORT_CR_METRICS=8686","app":"nse-discovery"}
{"level":"info","ts":1623911191.6950195,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_PORT_2112_TCP_PORT=2112","app":"nse-discovery"}
{"level":"info","ts":1623911191.6950357,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_OPERATOR_METRICS_PORT_8686_TCP=tcp://10.111.230.235:8686","app":"nse-discovery"}
{"level":"info","ts":1623911191.6950498,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_PORT_2112_TCP_PROTO=tcp","app":"nse-discovery"}
{"level":"info","ts":1623911191.695059,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_PORT_443_TCP=tcp://10.96.0.1:443","app":"nse-discovery"}
{"level":"info","ts":1623911191.695067,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_SERVICE_PORT_HTTPS=443","app":"nse-discovery"}
{"level":"info","ts":1623911191.6951058,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_SERVICE_HOST=10.107.140.148","app":"nse-discovery"}
{"level":"info","ts":1623911191.6951206,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_SERVICE_HOST=10.96.0.1","app":"nse-discovery"}
{"level":"info","ts":1623911191.695153,"caller":"utils/nsrenv.go:31","msg":"PWD=/","app":"nse-discovery"}
{"level":"info","ts":1623911191.6951635,"caller":"utils/nsrenv.go:31","msg":"POD_UID=51e225be-e6cc-42d9-8312-efafba281818","app":"nse-discovery"}
{"level":"info","ts":1623911191.6951718,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_PORT_2112_TCP=tcp://10.107.140.148:2112","app":"nse-discovery"}
{"level":"info","ts":1623911191.6951795,"caller":"utils/nsrenv.go:31","msg":"NSR_ADDRESS=wcm-proxy-nsmgr.nsm-system:5005","app":"nse-discovery"}
{"level":"info","ts":1623911191.6951945,"caller":"metrics/metrics.go:56","msg":"Serving metrics","app":"nse-discovery"}
time="2021-06-17T06:26:31Z" level=info msg="Creating logger from config: &{wcm-nse-discovery.tpl@wcm-nse-discovery-5f68d85698-wd7c5 false false [] 0xc00008c540 0xc0000b6150 <nil> <nil> <nil>}"
2021/06/17 06:26:31 debug logging disabled
2021/06/17 06:26:31 Initializing logging reporter
2021/06/17 06:26:31 debug logging disabled
{"level":"info","ts":1623911191.714237,"caller":"nseinformer/nseInformerController.go:61","msg":"Creating NSE CR controller","app":"nse-discovery"}
{"level":"info","ts":1623911191.7143328,"caller":"nseinformer/nseInformerController.go:83","msg":"Created new informer for NSE pod controller","app":"nse-discovery"}
{"level":"info","ts":1623911191.7144866,"caller":"nseinformer/nseInformerController.go:123","msg":"starting NSE pod controller","app":"nse-discovery"}
{"level":"info","ts":1623941807.0673966,"caller":"nseinformer/nseInformerController.go:98","msg":"new NSE CR was created: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623941807.0675073,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623941807.0691884,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623941807.0694628,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T14:56:47Z" level=info msg="==--> discovery.FindNetworkService() span:396bd4e04a88abad:396bd4e04a88abad:0000000000000000:1"
time="2021-06-17T14:56:47Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=396bd4e04a88abad:396bd4e04a88abad:0000000000000000:1"
time="2021-06-17T14:56:47Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=396bd4e04a88abad:396bd4e04a88abad:0000000000000000:1"
time="2021-06-17T14:56:47Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T14:56:47Z" level=info msg="==----> initRegistryClient() span:396bd4e04a88abad:6c6fc4d39e47463b:396bd4e04a88abad:1"
time="2021-06-17T14:56:47Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T14:56:47Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T14:56:47Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="396bd4e04a88abad:6c6fc4d39e47463b:396bd4e04a88abad:1"
time="2021-06-17T14:56:47Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T14:56:47Z" level=info msg="Establish connection with the spire provider at address:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T14:56:47Z" level=info msg="Got x509:&{0xc000556090 <nil> {{0 0} 0 0 0 0} 0xc0000914f0 0xc00008ed60 {{0 0} 0 0 0 0} false} <nil>"
time="2021-06-17T14:56:47Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T14:56:47Z" level=info msg="Issued identity:spiffe://member2.com/wcm-nse-discovery"
time="2021-06-17T14:56:47Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001375c0 {member1.com}:0xc000137540 {member2.com}:0xc0001374c0]}"
time="2021-06-17T14:56:47Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T14:56:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:56:47Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T14:56:47Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T14:56:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:56:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T14:56:47Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T14:56:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:56:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T14:56:47Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
{"level":"info","ts":1623941808.1142046,"caller":"nseinformer/nseInformerController.go:98","msg":"new NSE CR was created: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T14:56:52Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T14:56:52Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:56:57Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T14:56:57Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:56:57Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:56:57Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:56:57Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="396bd4e04a88abad:6c6fc4d39e47463b:396bd4e04a88abad:1"
2021/06/17 14:56:57 Reporting span 396bd4e04a88abad:6c6fc4d39e47463b:396bd4e04a88abad:1
{"level":"info","ts":1623941817.1990566,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T14:56:57Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=396bd4e04a88abad:396bd4e04a88abad:0000000000000000:1"
time="2021-06-17T14:56:57Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=396bd4e04a88abad:396bd4e04a88abad:0000000000000000:1"
2021/06/17 14:56:57 Reporting span 396bd4e04a88abad:15933a09e71180c3:396bd4e04a88abad:1
time="2021-06-17T14:56:57Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=396bd4e04a88abad:396bd4e04a88abad:0000000000000000:1"
2021/06/17 14:56:57 Reporting span 396bd4e04a88abad:396bd4e04a88abad:0000000000000000:1
{"level":"info","ts":1623941817.2076464,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623941817.2076855,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623941817.2077177,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623941817.2077296,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T14:56:57Z" level=info msg="==--> discovery.FindNetworkService() span:3e1dc63d0eb1194a:3e1dc63d0eb1194a:0000000000000000:1"
time="2021-06-17T14:56:57Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3e1dc63d0eb1194a:3e1dc63d0eb1194a:0000000000000000:1"
time="2021-06-17T14:56:57Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=3e1dc63d0eb1194a:3e1dc63d0eb1194a:0000000000000000:1"
time="2021-06-17T14:56:57Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T14:56:57Z" level=info msg="==----> initRegistryClient() span:3e1dc63d0eb1194a:1655a59dbac7772b:3e1dc63d0eb1194a:1"
time="2021-06-17T14:56:57Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T14:56:57Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T14:56:57Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3e1dc63d0eb1194a:1655a59dbac7772b:3e1dc63d0eb1194a:1"
time="2021-06-17T14:56:57Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T14:56:57Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T14:56:57Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000baf00 {member1.com}:0xc0000baf80 {member2.com}:0xc0000bae80]}"
time="2021-06-17T14:56:57Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T14:56:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:56:57Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T14:56:57Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T14:56:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:56:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T14:56:57Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T14:56:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:56:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T14:56:57Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:56:57Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:56:57Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:56:57Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="3e1dc63d0eb1194a:1655a59dbac7772b:3e1dc63d0eb1194a:1"
2021/06/17 14:56:57 Reporting span 3e1dc63d0eb1194a:1655a59dbac7772b:3e1dc63d0eb1194a:1
{"level":"info","ts":1623941817.2459562,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T14:56:57Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=3e1dc63d0eb1194a:3e1dc63d0eb1194a:0000000000000000:1"
time="2021-06-17T14:56:57Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=3e1dc63d0eb1194a:3e1dc63d0eb1194a:0000000000000000:1"
2021/06/17 14:56:57 Reporting span 3e1dc63d0eb1194a:6c94a159ee5d1759:3e1dc63d0eb1194a:1
time="2021-06-17T14:56:57Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=3e1dc63d0eb1194a:3e1dc63d0eb1194a:0000000000000000:1"
2021/06/17 14:56:57 Reporting span 3e1dc63d0eb1194a:3e1dc63d0eb1194a:0000000000000000:1
{"level":"info","ts":1623941817.2481916,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623941817.2482214,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623941817.2482321,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 2 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623941817.2482612,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623941817.2483447,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623941817.2484028,"caller":"nseinformer/nseInformerController.go:338","msg":"NSE diff: For cluster member2, found diff endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623941817.248542,"caller":"nseinformer/nseInformerController.go:338","msg":"NSE diff: For cluster member2, found diff endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623941817.2485538,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623941817.2485623,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623941817.2485716,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623941817.24858,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623941817.2485888,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 2 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
time="2021-06-17T14:56:57Z" level=info msg="Requesting NseRegistryClient..."
time="2021-06-17T14:56:57Z" level=info msg="==--> initRegistryClient() span:2844a60bb44a5025:2844a60bb44a5025:0000000000000000:1"
time="2021-06-17T14:56:57Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T14:56:57Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T14:56:57Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2844a60bb44a5025:2844a60bb44a5025:0000000000000000:1"
time="2021-06-17T14:56:57Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T14:56:57Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T14:56:57Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001367c0 {member1.com}:0xc000136700 {member2.com}:0xc0001365c0]}"
time="2021-06-17T14:56:57Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T14:56:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:56:57Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T14:56:57Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T14:56:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:56:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T14:56:57Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T14:56:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:56:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T14:56:57Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:56:57Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:56:57Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:56:57Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="2844a60bb44a5025:2844a60bb44a5025:0000000000000000:1"
2021/06/17 14:56:57 Reporting span 2844a60bb44a5025:2844a60bb44a5025:0000000000000000:1
time="2021-06-17T14:56:57Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-06-17T14:56:57Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/06/17 14:56:57 Reporting span 5c2ac29e00040a96:5c2ac29e00040a96:0000000000000000:1
time="2021-06-17T14:56:57Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-06-17T14:56:57Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-06-17T14:56:57Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/06/17 14:56:57 Reporting span 3de97136adfbae5f:3de97136adfbae5f:0000000000000000:1
time="2021-06-17T14:56:57Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1623941817.3037004,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623941817.3037634,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623941817.3037755,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623941817.303786,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T14:56:57Z" level=info msg="==--> discovery.FindNetworkService() span:025e0de6ecb2ec35:025e0de6ecb2ec35:0000000000000000:1"
time="2021-06-17T14:56:57Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=025e0de6ecb2ec35:025e0de6ecb2ec35:0000000000000000:1"
time="2021-06-17T14:56:57Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=025e0de6ecb2ec35:025e0de6ecb2ec35:0000000000000000:1"
time="2021-06-17T14:56:57Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T14:56:57Z" level=info msg="==----> initRegistryClient() span:025e0de6ecb2ec35:7c0d84e9a2b766ba:025e0de6ecb2ec35:1"
time="2021-06-17T14:56:57Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T14:56:57Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T14:56:57Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="025e0de6ecb2ec35:7c0d84e9a2b766ba:025e0de6ecb2ec35:1"
time="2021-06-17T14:56:57Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T14:56:57Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T14:56:57Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ee940 {member1.com}:0xc0004ee8c0 {member2.com}:0xc0004ee7c0]}"
time="2021-06-17T14:56:57Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T14:56:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:56:57Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T14:56:57Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T14:56:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:56:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T14:56:57Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T14:56:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:56:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T14:56:57Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:57:02Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T14:57:02Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:57:07Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T14:57:07Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:57:07Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:57:07Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:57:07Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="025e0de6ecb2ec35:7c0d84e9a2b766ba:025e0de6ecb2ec35:1"
2021/06/17 14:57:07 Reporting span 025e0de6ecb2ec35:7c0d84e9a2b766ba:025e0de6ecb2ec35:1
{"level":"info","ts":1623941827.332256,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T14:57:07Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=025e0de6ecb2ec35:025e0de6ecb2ec35:0000000000000000:1"
time="2021-06-17T14:57:07Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=025e0de6ecb2ec35:025e0de6ecb2ec35:0000000000000000:1"
2021/06/17 14:57:07 Reporting span 025e0de6ecb2ec35:59e993f54cd3bb00:025e0de6ecb2ec35:1
time="2021-06-17T14:57:07Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=025e0de6ecb2ec35:025e0de6ecb2ec35:0000000000000000:1"
2021/06/17 14:57:07 Reporting span 025e0de6ecb2ec35:025e0de6ecb2ec35:0000000000000000:1
{"level":"info","ts":1623941827.3376217,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623941827.337651,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623941827.3376625,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623941827.3376737,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T14:57:07Z" level=info msg="==--> discovery.FindNetworkService() span:74870c9c19b95dc1:74870c9c19b95dc1:0000000000000000:1"
time="2021-06-17T14:57:07Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=74870c9c19b95dc1:74870c9c19b95dc1:0000000000000000:1"
time="2021-06-17T14:57:07Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=74870c9c19b95dc1:74870c9c19b95dc1:0000000000000000:1"
time="2021-06-17T14:57:07Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T14:57:07Z" level=info msg="==----> initRegistryClient() span:74870c9c19b95dc1:6f07dfd6d018273a:74870c9c19b95dc1:1"
time="2021-06-17T14:57:07Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T14:57:07Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T14:57:07Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="74870c9c19b95dc1:6f07dfd6d018273a:74870c9c19b95dc1:1"
time="2021-06-17T14:57:07Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T14:57:07Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T14:57:07Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000553280 {member1.com}:0xc000553300 {member2.com}:0xc000553200]}"
time="2021-06-17T14:57:07Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T14:57:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:57:07Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T14:57:07Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T14:57:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:57:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T14:57:07Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T14:57:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:57:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T14:57:07Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:57:07Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:57:07Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:57:07Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="74870c9c19b95dc1:6f07dfd6d018273a:74870c9c19b95dc1:1"
2021/06/17 14:57:07 Reporting span 74870c9c19b95dc1:6f07dfd6d018273a:74870c9c19b95dc1:1
{"level":"info","ts":1623941827.374563,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T14:57:07Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=74870c9c19b95dc1:74870c9c19b95dc1:0000000000000000:1"
time="2021-06-17T14:57:07Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=74870c9c19b95dc1:74870c9c19b95dc1:0000000000000000:1"
2021/06/17 14:57:07 Reporting span 74870c9c19b95dc1:087f455a4523fa74:74870c9c19b95dc1:1
time="2021-06-17T14:57:07Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=74870c9c19b95dc1:74870c9c19b95dc1:0000000000000000:1"
2021/06/17 14:57:07 Reporting span 74870c9c19b95dc1:74870c9c19b95dc1:0000000000000000:1
{"level":"info","ts":1623941827.3770337,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623941827.3770845,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623941827.3771336,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623941827.3771846,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623941827.3773587,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623941827.3774252,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623941827.377489,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623941827.3775256,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623941827.3775587,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623941827.3775954,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623941827.3776302,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623941827.3776648,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623941827.3776765,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623941827.377687,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623941827.3776958,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623941827.3777046,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623941827.3777132,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623941827.3777437,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623941827.3777547,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623941827.377762,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623941911.8321056,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623941911.8322139,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623941911.8322604,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623941911.832255,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623941911.8322737,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T14:58:31Z" level=info msg="==--> discovery.FindNetworkService() span:26f4038e7ad4f65a:26f4038e7ad4f65a:0000000000000000:1"
time="2021-06-17T14:58:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=26f4038e7ad4f65a:26f4038e7ad4f65a:0000000000000000:1"
time="2021-06-17T14:58:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=26f4038e7ad4f65a:26f4038e7ad4f65a:0000000000000000:1"
time="2021-06-17T14:58:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T14:58:31Z" level=info msg="==----> initRegistryClient() span:26f4038e7ad4f65a:4409503d32d3d327:26f4038e7ad4f65a:1"
time="2021-06-17T14:58:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T14:58:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T14:58:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="26f4038e7ad4f65a:4409503d32d3d327:26f4038e7ad4f65a:1"
time="2021-06-17T14:58:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T14:58:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T14:58:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000358700 {member1.com}:0xc000358780 {member2.com}:0xc000358680]}"
time="2021-06-17T14:58:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T14:58:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:58:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T14:58:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T14:58:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:58:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T14:58:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T14:58:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:58:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T14:58:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:58:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T14:58:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:58:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T14:58:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:58:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:58:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:58:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="26f4038e7ad4f65a:4409503d32d3d327:26f4038e7ad4f65a:1"
2021/06/17 14:58:41 Reporting span 26f4038e7ad4f65a:4409503d32d3d327:26f4038e7ad4f65a:1
{"level":"info","ts":1623941921.8620317,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T14:58:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=26f4038e7ad4f65a:26f4038e7ad4f65a:0000000000000000:1"
time="2021-06-17T14:58:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=26f4038e7ad4f65a:26f4038e7ad4f65a:0000000000000000:1"
2021/06/17 14:58:41 Reporting span 26f4038e7ad4f65a:31303879aab76f41:26f4038e7ad4f65a:1
time="2021-06-17T14:58:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=26f4038e7ad4f65a:26f4038e7ad4f65a:0000000000000000:1"
2021/06/17 14:58:41 Reporting span 26f4038e7ad4f65a:26f4038e7ad4f65a:0000000000000000:1
{"level":"info","ts":1623941921.867851,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623941921.8679032,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623941921.8679159,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623941921.8679264,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T14:58:41Z" level=info msg="==--> discovery.FindNetworkService() span:5595f4e554ef3713:5595f4e554ef3713:0000000000000000:1"
time="2021-06-17T14:58:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=5595f4e554ef3713:5595f4e554ef3713:0000000000000000:1"
time="2021-06-17T14:58:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=5595f4e554ef3713:5595f4e554ef3713:0000000000000000:1"
time="2021-06-17T14:58:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T14:58:41Z" level=info msg="==----> initRegistryClient() span:5595f4e554ef3713:15c951ad53888577:5595f4e554ef3713:1"
time="2021-06-17T14:58:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T14:58:41Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T14:58:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5595f4e554ef3713:15c951ad53888577:5595f4e554ef3713:1"
time="2021-06-17T14:58:41Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T14:58:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T14:58:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000bbe80 {member1.com}:0xc0000bbf00 {member2.com}:0xc0000bbe00]}"
time="2021-06-17T14:58:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T14:58:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:58:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T14:58:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T14:58:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:58:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T14:58:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T14:58:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:58:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T14:58:41Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:58:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:58:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:58:41Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="5595f4e554ef3713:15c951ad53888577:5595f4e554ef3713:1"
2021/06/17 14:58:41 Reporting span 5595f4e554ef3713:15c951ad53888577:5595f4e554ef3713:1
{"level":"info","ts":1623941921.9099095,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T14:58:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5595f4e554ef3713:5595f4e554ef3713:0000000000000000:1"
time="2021-06-17T14:58:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=5595f4e554ef3713:5595f4e554ef3713:0000000000000000:1"
2021/06/17 14:58:41 Reporting span 5595f4e554ef3713:52e3661da4442040:5595f4e554ef3713:1
time="2021-06-17T14:58:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5595f4e554ef3713:5595f4e554ef3713:0000000000000000:1"
2021/06/17 14:58:41 Reporting span 5595f4e554ef3713:5595f4e554ef3713:0000000000000000:1
{"level":"info","ts":1623941921.9126866,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623941921.9128184,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623941921.9130044,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623941921.9131365,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623941921.913397,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623941921.9134438,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623941921.9134557,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623941921.9134655,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623941921.9136827,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623941921.9138114,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623941921.9138236,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623941921.9138331,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623941921.9140017,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623941921.914037,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623941921.9140484,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623941921.914059,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623941921.914068,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623941921.9140775,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623941921.9140863,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623941921.9140954,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623941921.9142423,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623941921.9142761,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623941921.914288,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T14:58:41Z" level=info msg="==--> discovery.FindNetworkService() span:76f616fe003848d4:76f616fe003848d4:0000000000000000:1"
time="2021-06-17T14:58:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=76f616fe003848d4:76f616fe003848d4:0000000000000000:1"
time="2021-06-17T14:58:41Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=76f616fe003848d4:76f616fe003848d4:0000000000000000:1"
time="2021-06-17T14:58:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T14:58:41Z" level=info msg="==----> initRegistryClient() span:76f616fe003848d4:7e50330dbd951ae6:76f616fe003848d4:1"
time="2021-06-17T14:58:41Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T14:58:41Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T14:58:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="76f616fe003848d4:7e50330dbd951ae6:76f616fe003848d4:1"
time="2021-06-17T14:58:41Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T14:58:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T14:58:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004eeb00 {member1.com}:0xc0004eeb80 {member2.com}:0xc0004eea80]}"
time="2021-06-17T14:58:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T14:58:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:58:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T14:58:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T14:58:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:58:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T14:58:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T14:58:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:58:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T14:58:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:58:46Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T14:58:46Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:58:51Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T14:58:51Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:58:51Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:58:51Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:58:51Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="76f616fe003848d4:7e50330dbd951ae6:76f616fe003848d4:1"
2021/06/17 14:58:51 Reporting span 76f616fe003848d4:7e50330dbd951ae6:76f616fe003848d4:1
{"level":"info","ts":1623941931.9464116,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T14:58:51Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=76f616fe003848d4:76f616fe003848d4:0000000000000000:1"
time="2021-06-17T14:58:51Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=76f616fe003848d4:76f616fe003848d4:0000000000000000:1"
2021/06/17 14:58:51 Reporting span 76f616fe003848d4:739b1605a084b157:76f616fe003848d4:1
time="2021-06-17T14:58:51Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=76f616fe003848d4:76f616fe003848d4:0000000000000000:1"
2021/06/17 14:58:51 Reporting span 76f616fe003848d4:76f616fe003848d4:0000000000000000:1
{"level":"info","ts":1623941931.9538412,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623941931.9538713,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623941931.953886,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623941931.9538975,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T14:58:51Z" level=info msg="==--> discovery.FindNetworkService() span:15e8a49a22f26a80:15e8a49a22f26a80:0000000000000000:1"
time="2021-06-17T14:58:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=15e8a49a22f26a80:15e8a49a22f26a80:0000000000000000:1"
time="2021-06-17T14:58:51Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=15e8a49a22f26a80:15e8a49a22f26a80:0000000000000000:1"
time="2021-06-17T14:58:51Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T14:58:51Z" level=info msg="==----> initRegistryClient() span:15e8a49a22f26a80:7157e5dc08328163:15e8a49a22f26a80:1"
time="2021-06-17T14:58:51Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T14:58:51Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T14:58:51Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="15e8a49a22f26a80:7157e5dc08328163:15e8a49a22f26a80:1"
time="2021-06-17T14:58:51Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T14:58:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T14:58:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000626340 {member1.com}:0xc0006263c0 {member2.com}:0xc0006262c0]}"
time="2021-06-17T14:58:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T14:58:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:58:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T14:58:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T14:58:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:58:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T14:58:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T14:58:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T14:58:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T14:58:51Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:58:51Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:58:51Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T14:58:51Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="15e8a49a22f26a80:7157e5dc08328163:15e8a49a22f26a80:1"
2021/06/17 14:58:51 Reporting span 15e8a49a22f26a80:7157e5dc08328163:15e8a49a22f26a80:1
{"level":"info","ts":1623941931.9966116,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T14:58:51Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=15e8a49a22f26a80:15e8a49a22f26a80:0000000000000000:1"
time="2021-06-17T14:58:51Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=15e8a49a22f26a80:15e8a49a22f26a80:0000000000000000:1"
2021/06/17 14:58:51 Reporting span 15e8a49a22f26a80:55f0b4ab59d44579:15e8a49a22f26a80:1
time="2021-06-17T14:58:51Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=15e8a49a22f26a80:15e8a49a22f26a80:0000000000000000:1"
2021/06/17 14:58:51 Reporting span 15e8a49a22f26a80:15e8a49a22f26a80:0000000000000000:1
{"level":"info","ts":1623941931.9986858,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623941931.998712,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623941931.9987223,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623941931.9987307,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623941931.9987397,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623941931.998751,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623941931.998888,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623941931.999088,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623941931.999167,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623941931.999208,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623941931.999324,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623941931.9993567,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623941931.9993672,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623941931.9993758,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623941931.9993846,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623941931.9993935,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623941931.999403,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623941931.99941,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623941931.9994159,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623941931.9994218,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942031.8323686,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623942031.8325741,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623942031.8326006,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623942031.8326085,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942031.8326182,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:00:31Z" level=info msg="==--> discovery.FindNetworkService() span:03e4eb8d61525db9:03e4eb8d61525db9:0000000000000000:1"
time="2021-06-17T15:00:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=03e4eb8d61525db9:03e4eb8d61525db9:0000000000000000:1"
time="2021-06-17T15:00:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=03e4eb8d61525db9:03e4eb8d61525db9:0000000000000000:1"
time="2021-06-17T15:00:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:00:31Z" level=info msg="==----> initRegistryClient() span:03e4eb8d61525db9:0f967abc8d0e9fb8:03e4eb8d61525db9:1"
time="2021-06-17T15:00:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:00:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:00:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="03e4eb8d61525db9:0f967abc8d0e9fb8:03e4eb8d61525db9:1"
time="2021-06-17T15:00:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:00:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:00:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ee000 {member1.com}:0xc000137f80 {member2.com}:0xc000137f00]}"
time="2021-06-17T15:00:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:00:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:00:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:00:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:00:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:00:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:00:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:00:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:00:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:00:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:00:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:00:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:00:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:00:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:00:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:00:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:00:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="03e4eb8d61525db9:0f967abc8d0e9fb8:03e4eb8d61525db9:1"
2021/06/17 15:00:41 Reporting span 03e4eb8d61525db9:0f967abc8d0e9fb8:03e4eb8d61525db9:1
{"level":"info","ts":1623942041.8631604,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:00:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=03e4eb8d61525db9:03e4eb8d61525db9:0000000000000000:1"
time="2021-06-17T15:00:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=03e4eb8d61525db9:03e4eb8d61525db9:0000000000000000:1"
2021/06/17 15:00:41 Reporting span 03e4eb8d61525db9:0f389266cbe700fa:03e4eb8d61525db9:1
time="2021-06-17T15:00:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=03e4eb8d61525db9:03e4eb8d61525db9:0000000000000000:1"
2021/06/17 15:00:41 Reporting span 03e4eb8d61525db9:03e4eb8d61525db9:0000000000000000:1
{"level":"info","ts":1623942041.869547,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942041.8696434,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942041.8696864,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623942041.8697417,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:00:41Z" level=info msg="==--> discovery.FindNetworkService() span:3d391b491b592626:3d391b491b592626:0000000000000000:1"
time="2021-06-17T15:00:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3d391b491b592626:3d391b491b592626:0000000000000000:1"
time="2021-06-17T15:00:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=3d391b491b592626:3d391b491b592626:0000000000000000:1"
time="2021-06-17T15:00:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:00:41Z" level=info msg="==----> initRegistryClient() span:3d391b491b592626:129da2556f938dd1:3d391b491b592626:1"
time="2021-06-17T15:00:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:00:41Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:00:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3d391b491b592626:129da2556f938dd1:3d391b491b592626:1"
time="2021-06-17T15:00:41Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:00:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:00:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000626640 {member1.com}:0xc0006265c0 {member2.com}:0xc000626540]}"
time="2021-06-17T15:00:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:00:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:00:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:00:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:00:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:00:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:00:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:00:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:00:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:00:41Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:00:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:00:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:00:41Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="3d391b491b592626:129da2556f938dd1:3d391b491b592626:1"
2021/06/17 15:00:41 Reporting span 3d391b491b592626:129da2556f938dd1:3d391b491b592626:1
{"level":"info","ts":1623942041.9090402,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:00:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=3d391b491b592626:3d391b491b592626:0000000000000000:1"
time="2021-06-17T15:00:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=3d391b491b592626:3d391b491b592626:0000000000000000:1"
2021/06/17 15:00:41 Reporting span 3d391b491b592626:49d0e3f08e7f21d5:3d391b491b592626:1
time="2021-06-17T15:00:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=3d391b491b592626:3d391b491b592626:0000000000000000:1"
2021/06/17 15:00:41 Reporting span 3d391b491b592626:3d391b491b592626:0000000000000000:1
{"level":"info","ts":1623942041.911354,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623942041.9113867,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623942041.9113994,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942041.911409,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942041.9115891,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623942041.9117465,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942041.9117835,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942041.9118285,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942041.9119458,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942041.911981,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942041.9119916,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942041.912,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942041.912008,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942041.9120164,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942041.912026,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942041.912034,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942041.9120429,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942041.9120514,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623942041.91206,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942041.9120674,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942041.9120862,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623942041.9122496,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942041.912278,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:00:41Z" level=info msg="==--> discovery.FindNetworkService() span:4321e3dae000ba0b:4321e3dae000ba0b:0000000000000000:1"
time="2021-06-17T15:00:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=4321e3dae000ba0b:4321e3dae000ba0b:0000000000000000:1"
time="2021-06-17T15:00:41Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=4321e3dae000ba0b:4321e3dae000ba0b:0000000000000000:1"
time="2021-06-17T15:00:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:00:41Z" level=info msg="==----> initRegistryClient() span:4321e3dae000ba0b:206674304b6b133c:4321e3dae000ba0b:1"
time="2021-06-17T15:00:41Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:00:41Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:00:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4321e3dae000ba0b:206674304b6b133c:4321e3dae000ba0b:1"
time="2021-06-17T15:00:41Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:00:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:00:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ef200 {member1.com}:0xc0004ef280 {member2.com}:0xc0004ef140]}"
time="2021-06-17T15:00:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:00:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:00:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:00:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:00:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:00:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:00:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:00:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:00:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:00:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:00:46Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:00:46Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:00:51Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:00:51Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:00:51Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:00:51Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:00:51Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="4321e3dae000ba0b:206674304b6b133c:4321e3dae000ba0b:1"
2021/06/17 15:00:51 Reporting span 4321e3dae000ba0b:206674304b6b133c:4321e3dae000ba0b:1
{"level":"info","ts":1623942051.9480424,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:00:51Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=4321e3dae000ba0b:4321e3dae000ba0b:0000000000000000:1"
time="2021-06-17T15:00:51Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=4321e3dae000ba0b:4321e3dae000ba0b:0000000000000000:1"
2021/06/17 15:00:51 Reporting span 4321e3dae000ba0b:4b2a96415938e1c3:4321e3dae000ba0b:1
time="2021-06-17T15:00:51Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=4321e3dae000ba0b:4321e3dae000ba0b:0000000000000000:1"
2021/06/17 15:00:51 Reporting span 4321e3dae000ba0b:4321e3dae000ba0b:0000000000000000:1
{"level":"info","ts":1623942051.9540656,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942051.9540913,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942051.9541023,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623942051.954112,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:00:51Z" level=info msg="==--> discovery.FindNetworkService() span:78ab4b262dda85e4:78ab4b262dda85e4:0000000000000000:1"
time="2021-06-17T15:00:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=78ab4b262dda85e4:78ab4b262dda85e4:0000000000000000:1"
time="2021-06-17T15:00:51Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=78ab4b262dda85e4:78ab4b262dda85e4:0000000000000000:1"
time="2021-06-17T15:00:51Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:00:51Z" level=info msg="==----> initRegistryClient() span:78ab4b262dda85e4:27fe83d1c3fc8075:78ab4b262dda85e4:1"
time="2021-06-17T15:00:51Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:00:51Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:00:51Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="78ab4b262dda85e4:27fe83d1c3fc8075:78ab4b262dda85e4:1"
time="2021-06-17T15:00:51Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:00:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:00:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000baa00 {member1.com}:0xc0000baa80 {member2.com}:0xc0000ba980]}"
time="2021-06-17T15:00:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:00:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:00:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:00:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:00:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:00:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:00:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:00:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:00:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:00:51Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:00:51Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:00:51Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:00:51Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="78ab4b262dda85e4:27fe83d1c3fc8075:78ab4b262dda85e4:1"
2021/06/17 15:00:51 Reporting span 78ab4b262dda85e4:27fe83d1c3fc8075:78ab4b262dda85e4:1
{"level":"info","ts":1623942051.9921508,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:00:51Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=78ab4b262dda85e4:78ab4b262dda85e4:0000000000000000:1"
time="2021-06-17T15:00:51Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=78ab4b262dda85e4:78ab4b262dda85e4:0000000000000000:1"
2021/06/17 15:00:51 Reporting span 78ab4b262dda85e4:1fd2b2698a4e9bd1:78ab4b262dda85e4:1
time="2021-06-17T15:00:51Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=78ab4b262dda85e4:78ab4b262dda85e4:0000000000000000:1"
2021/06/17 15:00:51 Reporting span 78ab4b262dda85e4:78ab4b262dda85e4:0000000000000000:1
{"level":"info","ts":1623942051.9945967,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623942051.9946454,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623942051.9948938,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942051.994963,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942051.9950013,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623942051.995066,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942051.995136,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942051.9951744,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942051.995234,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942051.9952815,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942051.995362,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942051.9953976,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942051.9954534,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942051.9955027,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942051.9955156,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942051.995525,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942051.9955344,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942051.9955437,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623942051.9955525,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942051.995601,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942151.8327732,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623942151.8329108,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623942151.8330255,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623942151.833167,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942151.8332043,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:02:31Z" level=info msg="==--> discovery.FindNetworkService() span:4a70a8687a242b27:4a70a8687a242b27:0000000000000000:1"
time="2021-06-17T15:02:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=4a70a8687a242b27:4a70a8687a242b27:0000000000000000:1"
time="2021-06-17T15:02:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=4a70a8687a242b27:4a70a8687a242b27:0000000000000000:1"
time="2021-06-17T15:02:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:02:31Z" level=info msg="==----> initRegistryClient() span:4a70a8687a242b27:4208cde5ad42f968:4a70a8687a242b27:1"
time="2021-06-17T15:02:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:02:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:02:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4a70a8687a242b27:4208cde5ad42f968:4a70a8687a242b27:1"
time="2021-06-17T15:02:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:02:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:02:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000626100 {member1.com}:0xc000626180 {member2.com}:0xc000626080]}"
time="2021-06-17T15:02:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:02:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:02:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:02:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:02:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:02:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:02:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:02:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:02:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:02:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:02:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:02:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:02:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:02:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:02:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:02:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:02:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="4a70a8687a242b27:4208cde5ad42f968:4a70a8687a242b27:1"
2021/06/17 15:02:41 Reporting span 4a70a8687a242b27:4208cde5ad42f968:4a70a8687a242b27:1
{"level":"info","ts":1623942161.8708096,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:02:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=4a70a8687a242b27:4a70a8687a242b27:0000000000000000:1"
time="2021-06-17T15:02:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=4a70a8687a242b27:4a70a8687a242b27:0000000000000000:1"
2021/06/17 15:02:41 Reporting span 4a70a8687a242b27:5255c0b631efe0c3:4a70a8687a242b27:1
time="2021-06-17T15:02:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=4a70a8687a242b27:4a70a8687a242b27:0000000000000000:1"
2021/06/17 15:02:41 Reporting span 4a70a8687a242b27:4a70a8687a242b27:0000000000000000:1
{"level":"info","ts":1623942161.877388,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942161.8774197,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942161.8774319,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623942161.8775518,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:02:41Z" level=info msg="==--> discovery.FindNetworkService() span:3520e94f06b97f7b:3520e94f06b97f7b:0000000000000000:1"
time="2021-06-17T15:02:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3520e94f06b97f7b:3520e94f06b97f7b:0000000000000000:1"
time="2021-06-17T15:02:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=3520e94f06b97f7b:3520e94f06b97f7b:0000000000000000:1"
time="2021-06-17T15:02:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:02:41Z" level=info msg="==----> initRegistryClient() span:3520e94f06b97f7b:0f6e7564afdbf7ef:3520e94f06b97f7b:1"
time="2021-06-17T15:02:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:02:51Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:02:51Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3520e94f06b97f7b:0f6e7564afdbf7ef:3520e94f06b97f7b:1"
time="2021-06-17T15:02:51Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:02:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:02:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0006270c0 {member1.com}:0xc000627140 {member2.com}:0xc000627040]}"
time="2021-06-17T15:02:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:02:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:02:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:02:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:02:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:02:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:02:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:02:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:02:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:02:51Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:02:56Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:02:56Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:03:01Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:03:01Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:03:06Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:03:06Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:03:06Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:03:11Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:03:11Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="3520e94f06b97f7b:0f6e7564afdbf7ef:3520e94f06b97f7b:1"
2021/06/17 15:03:11 Reporting span 3520e94f06b97f7b:0f6e7564afdbf7ef:3520e94f06b97f7b:1
2021/06/17 15:03:11 Reporting span 3520e94f06b97f7b:3520e94f06b97f7b:0000000000000000:1
{"level":"info","ts":1623942191.878457,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623942191.8786263,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623942191.8786573,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942191.87867,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:03:11Z" level=info msg="==--> discovery.FindNetworkService() span:7171d093f2baaea4:7171d093f2baaea4:0000000000000000:1"
time="2021-06-17T15:03:11Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7171d093f2baaea4:7171d093f2baaea4:0000000000000000:1"
time="2021-06-17T15:03:11Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=7171d093f2baaea4:7171d093f2baaea4:0000000000000000:1"
time="2021-06-17T15:03:11Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:03:11Z" level=info msg="==----> initRegistryClient() span:7171d093f2baaea4:74b78245d903d34f:7171d093f2baaea4:1"
time="2021-06-17T15:03:11Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:03:11Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:03:11Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7171d093f2baaea4:74b78245d903d34f:7171d093f2baaea4:1"
time="2021-06-17T15:03:11Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:03:11Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:03:11Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000baa40 {member1.com}:0xc0000ba9c0 {member2.com}:0xc0000ba940]}"
time="2021-06-17T15:03:11Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:03:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:03:11Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:03:11Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:03:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:03:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:03:11Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:03:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:03:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:03:11Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:03:16Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:03:16Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:03:21Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:03:21Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:03:21Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:03:21Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:03:21Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="7171d093f2baaea4:74b78245d903d34f:7171d093f2baaea4:1"
2021/06/17 15:03:21 Reporting span 7171d093f2baaea4:74b78245d903d34f:7171d093f2baaea4:1
{"level":"info","ts":1623942201.9111972,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:03:21Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7171d093f2baaea4:7171d093f2baaea4:0000000000000000:1"
time="2021-06-17T15:03:21Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=7171d093f2baaea4:7171d093f2baaea4:0000000000000000:1"
2021/06/17 15:03:21 Reporting span 7171d093f2baaea4:50b1ab2ddd3b245f:7171d093f2baaea4:1
time="2021-06-17T15:03:21Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7171d093f2baaea4:7171d093f2baaea4:0000000000000000:1"
2021/06/17 15:03:21 Reporting span 7171d093f2baaea4:7171d093f2baaea4:0000000000000000:1
{"level":"info","ts":1623942201.9169798,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942201.917035,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942201.917047,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623942201.917057,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:03:21Z" level=info msg="==--> discovery.FindNetworkService() span:68eb2dc8df6211dc:68eb2dc8df6211dc:0000000000000000:1"
time="2021-06-17T15:03:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=68eb2dc8df6211dc:68eb2dc8df6211dc:0000000000000000:1"
time="2021-06-17T15:03:21Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=68eb2dc8df6211dc:68eb2dc8df6211dc:0000000000000000:1"
time="2021-06-17T15:03:21Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:03:21Z" level=info msg="==----> initRegistryClient() span:68eb2dc8df6211dc:418c0c5ac5fbf3fa:68eb2dc8df6211dc:1"
time="2021-06-17T15:03:21Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:03:31Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:03:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="68eb2dc8df6211dc:418c0c5ac5fbf3fa:68eb2dc8df6211dc:1"
time="2021-06-17T15:03:31Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:03:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:03:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000ba900 {member1.com}:0xc0000ba980 {member2.com}:0xc0000ba880]}"
time="2021-06-17T15:03:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:03:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:03:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:03:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:03:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:03:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:03:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:03:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:03:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:03:31Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:03:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:03:36Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:03:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:03:41Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:03:46Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:03:46Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:03:46Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:03:51Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:03:51Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="68eb2dc8df6211dc:418c0c5ac5fbf3fa:68eb2dc8df6211dc:1"
2021/06/17 15:03:51 Reporting span 68eb2dc8df6211dc:418c0c5ac5fbf3fa:68eb2dc8df6211dc:1
2021/06/17 15:03:51 Reporting span 68eb2dc8df6211dc:68eb2dc8df6211dc:0000000000000000:1
{"level":"info","ts":1623942231.9179316,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623942231.9180028,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623942231.918016,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942231.918034,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:03:51Z" level=info msg="==--> discovery.FindNetworkService() span:431604654a4ff78b:431604654a4ff78b:0000000000000000:1"
time="2021-06-17T15:03:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=431604654a4ff78b:431604654a4ff78b:0000000000000000:1"
time="2021-06-17T15:03:51Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=431604654a4ff78b:431604654a4ff78b:0000000000000000:1"
time="2021-06-17T15:03:51Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:03:51Z" level=info msg="==----> initRegistryClient() span:431604654a4ff78b:588b484032a6796e:431604654a4ff78b:1"
time="2021-06-17T15:03:51Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:03:51Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:03:51Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="431604654a4ff78b:588b484032a6796e:431604654a4ff78b:1"
time="2021-06-17T15:03:51Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:03:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:03:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ee0c0 {member1.com}:0xc0004ee140 {member2.com}:0xc0004ee040]}"
time="2021-06-17T15:03:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:03:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:03:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:03:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:03:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:03:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:03:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:03:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:03:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:03:51Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:03:56Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:03:56Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:04:01Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:04:01Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:04:01Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:04:01Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:04:01Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="431604654a4ff78b:588b484032a6796e:431604654a4ff78b:1"
2021/06/17 15:04:01 Reporting span 431604654a4ff78b:588b484032a6796e:431604654a4ff78b:1
{"level":"info","ts":1623942241.9489794,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:04:01Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=431604654a4ff78b:431604654a4ff78b:0000000000000000:1"
time="2021-06-17T15:04:01Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=431604654a4ff78b:431604654a4ff78b:0000000000000000:1"
2021/06/17 15:04:01 Reporting span 431604654a4ff78b:1357f7c9ac074c87:431604654a4ff78b:1
time="2021-06-17T15:04:01Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=431604654a4ff78b:431604654a4ff78b:0000000000000000:1"
2021/06/17 15:04:01 Reporting span 431604654a4ff78b:431604654a4ff78b:0000000000000000:1
{"level":"info","ts":1623942241.9582896,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942241.9583204,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942241.9584153,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623942241.9584289,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:04:01Z" level=info msg="==--> discovery.FindNetworkService() span:3c5f94b1aea45c51:3c5f94b1aea45c51:0000000000000000:1"
time="2021-06-17T15:04:01Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3c5f94b1aea45c51:3c5f94b1aea45c51:0000000000000000:1"
time="2021-06-17T15:04:01Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=3c5f94b1aea45c51:3c5f94b1aea45c51:0000000000000000:1"
time="2021-06-17T15:04:01Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:04:01Z" level=info msg="==----> initRegistryClient() span:3c5f94b1aea45c51:742d52af0b0f03a4:3c5f94b1aea45c51:1"
time="2021-06-17T15:04:01Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:04:11Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:04:11Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3c5f94b1aea45c51:742d52af0b0f03a4:3c5f94b1aea45c51:1"
time="2021-06-17T15:04:11Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:04:11Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:04:11Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000bb6c0 {member1.com}:0xc0000bb640 {member2.com}:0xc0000bb540]}"
time="2021-06-17T15:04:11Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:04:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:04:11Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:04:11Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:04:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:04:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:04:11Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:04:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:04:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:04:11Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:04:16Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:04:16Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:04:21Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:04:21Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:04:26Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:04:26Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:04:26Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
{"level":"info","ts":1623942271.8329968,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623942271.8331516,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T15:04:31Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:04:31Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="3c5f94b1aea45c51:742d52af0b0f03a4:3c5f94b1aea45c51:1"
2021/06/17 15:04:31 Reporting span 3c5f94b1aea45c51:742d52af0b0f03a4:3c5f94b1aea45c51:1
2021/06/17 15:04:31 Reporting span 3c5f94b1aea45c51:3c5f94b1aea45c51:0000000000000000:1
{"level":"info","ts":1623942271.9591856,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623942271.9592996,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623942271.9593153,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942271.9593272,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:04:31Z" level=info msg="==--> discovery.FindNetworkService() span:36e0faa59271e893:36e0faa59271e893:0000000000000000:1"
time="2021-06-17T15:04:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=36e0faa59271e893:36e0faa59271e893:0000000000000000:1"
time="2021-06-17T15:04:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=36e0faa59271e893:36e0faa59271e893:0000000000000000:1"
time="2021-06-17T15:04:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:04:31Z" level=info msg="==----> initRegistryClient() span:36e0faa59271e893:5f3e9b2e6d79ab41:36e0faa59271e893:1"
time="2021-06-17T15:04:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:04:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:04:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="36e0faa59271e893:5f3e9b2e6d79ab41:36e0faa59271e893:1"
time="2021-06-17T15:04:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:04:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:04:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000681640 {member1.com}:0xc0006816c0 {member2.com}:0xc0006815c0]}"
time="2021-06-17T15:04:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:04:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:04:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:04:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:04:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:04:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:04:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:04:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:04:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:04:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:04:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:04:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:04:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:04:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:04:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:04:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:04:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="36e0faa59271e893:5f3e9b2e6d79ab41:36e0faa59271e893:1"
2021/06/17 15:04:41 Reporting span 36e0faa59271e893:5f3e9b2e6d79ab41:36e0faa59271e893:1
{"level":"info","ts":1623942281.9942865,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:04:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=36e0faa59271e893:36e0faa59271e893:0000000000000000:1"
time="2021-06-17T15:04:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=36e0faa59271e893:36e0faa59271e893:0000000000000000:1"
2021/06/17 15:04:41 Reporting span 36e0faa59271e893:3add142b583c2201:36e0faa59271e893:1
time="2021-06-17T15:04:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=36e0faa59271e893:36e0faa59271e893:0000000000000000:1"
2021/06/17 15:04:41 Reporting span 36e0faa59271e893:36e0faa59271e893:0000000000000000:1
{"level":"info","ts":1623942281.9996052,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942281.9996526,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942281.999666,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623942281.999677,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:04:41Z" level=info msg="==--> discovery.FindNetworkService() span:72f6caeaf7003479:72f6caeaf7003479:0000000000000000:1"
time="2021-06-17T15:04:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=72f6caeaf7003479:72f6caeaf7003479:0000000000000000:1"
time="2021-06-17T15:04:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=72f6caeaf7003479:72f6caeaf7003479:0000000000000000:1"
time="2021-06-17T15:04:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:04:41Z" level=info msg="==----> initRegistryClient() span:72f6caeaf7003479:3171be5d853f0c9d:72f6caeaf7003479:1"
time="2021-06-17T15:04:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:05:02Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:05:02Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="72f6caeaf7003479:3171be5d853f0c9d:72f6caeaf7003479:1"
time="2021-06-17T15:05:02Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:05:02Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:05:02Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000182b40 {member1.com}:0xc000182ac0 {member2.com}:0xc000182a40]}"
time="2021-06-17T15:05:02Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:05:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:05:02Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:05:02Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:05:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:05:02Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:05:02Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:05:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:05:02Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:05:02Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:05:07Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:05:07Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:05:12Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:05:12Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:05:17Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:05:17Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:05:17Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:05:17Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:05:17Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="72f6caeaf7003479:3171be5d853f0c9d:72f6caeaf7003479:1"
2021/06/17 15:05:17 Reporting span 72f6caeaf7003479:3171be5d853f0c9d:72f6caeaf7003479:1
2021/06/17 15:05:17 Reporting span 72f6caeaf7003479:72f6caeaf7003479:0000000000000000:1
{"level":"info","ts":1623942317.0222816,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623942317.0223434,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623942317.0223548,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942317.022382,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:05:17Z" level=info msg="==--> discovery.FindNetworkService() span:06428e624ba1f5cd:06428e624ba1f5cd:0000000000000000:1"
time="2021-06-17T15:05:17Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=06428e624ba1f5cd:06428e624ba1f5cd:0000000000000000:1"
time="2021-06-17T15:05:17Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=06428e624ba1f5cd:06428e624ba1f5cd:0000000000000000:1"
time="2021-06-17T15:05:17Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:05:17Z" level=info msg="==----> initRegistryClient() span:06428e624ba1f5cd:12fabfcda82a5bea:06428e624ba1f5cd:1"
time="2021-06-17T15:05:17Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:05:17Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:05:17Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="06428e624ba1f5cd:12fabfcda82a5bea:06428e624ba1f5cd:1"
time="2021-06-17T15:05:17Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:05:17Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:05:17Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000889840 {member1.com}:0xc0008897c0 {member2.com}:0xc000889740]}"
time="2021-06-17T15:05:17Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:05:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:05:17Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:05:17Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:05:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:05:17Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:05:17Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:05:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:05:17Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:05:17Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:05:22Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:05:22Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:05:27Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:05:27Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:05:27Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:05:27Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:05:27Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="06428e624ba1f5cd:12fabfcda82a5bea:06428e624ba1f5cd:1"
2021/06/17 15:05:27 Reporting span 06428e624ba1f5cd:12fabfcda82a5bea:06428e624ba1f5cd:1
{"level":"info","ts":1623942327.0604239,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:05:27Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=06428e624ba1f5cd:06428e624ba1f5cd:0000000000000000:1"
time="2021-06-17T15:05:27Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=06428e624ba1f5cd:06428e624ba1f5cd:0000000000000000:1"
2021/06/17 15:05:27 Reporting span 06428e624ba1f5cd:70f20d70528774a6:06428e624ba1f5cd:1
time="2021-06-17T15:05:27Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=06428e624ba1f5cd:06428e624ba1f5cd:0000000000000000:1"
2021/06/17 15:05:27 Reporting span 06428e624ba1f5cd:06428e624ba1f5cd:0000000000000000:1
{"level":"info","ts":1623942327.0661001,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942327.066153,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942327.0661676,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623942327.0661993,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:05:27Z" level=info msg="==--> discovery.FindNetworkService() span:4fd22fc06685473d:4fd22fc06685473d:0000000000000000:1"
time="2021-06-17T15:05:27Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=4fd22fc06685473d:4fd22fc06685473d:0000000000000000:1"
time="2021-06-17T15:05:27Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=4fd22fc06685473d:4fd22fc06685473d:0000000000000000:1"
time="2021-06-17T15:05:27Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:05:27Z" level=info msg="==----> initRegistryClient() span:4fd22fc06685473d:6fc051a35053c8f3:4fd22fc06685473d:1"
time="2021-06-17T15:05:27Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:05:47Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:05:47Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4fd22fc06685473d:6fc051a35053c8f3:4fd22fc06685473d:1"
time="2021-06-17T15:05:47Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:05:47Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:05:47Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000ba1c0 {member1.com}:0xc0000ba140 {member2.com}:0xc0000ba0c0]}"
time="2021-06-17T15:05:47Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:05:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:05:47Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:05:47Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:05:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:05:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:05:47Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:05:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:05:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:05:47Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:05:52Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:05:52Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:05:57Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:05:57Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:06:02Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:06:02Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:06:02Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:06:02Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:06:02Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="4fd22fc06685473d:6fc051a35053c8f3:4fd22fc06685473d:1"
2021/06/17 15:06:02 Reporting span 4fd22fc06685473d:6fc051a35053c8f3:4fd22fc06685473d:1
2021/06/17 15:06:02 Reporting span 4fd22fc06685473d:4fd22fc06685473d:0000000000000000:1
{"level":"info","ts":1623942362.088368,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623942362.088419,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623942362.0884318,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942362.0884433,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:06:02Z" level=info msg="==--> discovery.FindNetworkService() span:2cc826bacbdb0719:2cc826bacbdb0719:0000000000000000:1"
time="2021-06-17T15:06:02Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2cc826bacbdb0719:2cc826bacbdb0719:0000000000000000:1"
time="2021-06-17T15:06:02Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=2cc826bacbdb0719:2cc826bacbdb0719:0000000000000000:1"
time="2021-06-17T15:06:02Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:06:02Z" level=info msg="==----> initRegistryClient() span:2cc826bacbdb0719:608cd3be86d7ec74:2cc826bacbdb0719:1"
time="2021-06-17T15:06:02Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:06:02Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:06:02Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2cc826bacbdb0719:608cd3be86d7ec74:2cc826bacbdb0719:1"
time="2021-06-17T15:06:02Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:06:02Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:06:02Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000358d80 {member1.com}:0xc000358e00 {member2.com}:0xc000358d00]}"
time="2021-06-17T15:06:02Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:06:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:06:02Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:06:02Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:06:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:06:02Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:06:02Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:06:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:06:02Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:06:02Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:06:07Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:06:07Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:06:12Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:06:12Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:06:12Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:06:12Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:06:12Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="2cc826bacbdb0719:608cd3be86d7ec74:2cc826bacbdb0719:1"
2021/06/17 15:06:12 Reporting span 2cc826bacbdb0719:608cd3be86d7ec74:2cc826bacbdb0719:1
{"level":"info","ts":1623942372.1209898,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:06:12Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2cc826bacbdb0719:2cc826bacbdb0719:0000000000000000:1"
time="2021-06-17T15:06:12Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=2cc826bacbdb0719:2cc826bacbdb0719:0000000000000000:1"
2021/06/17 15:06:12 Reporting span 2cc826bacbdb0719:33e3c5db28abbfe5:2cc826bacbdb0719:1
time="2021-06-17T15:06:12Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2cc826bacbdb0719:2cc826bacbdb0719:0000000000000000:1"
2021/06/17 15:06:12 Reporting span 2cc826bacbdb0719:2cc826bacbdb0719:0000000000000000:1
{"level":"info","ts":1623942372.126425,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942372.126457,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942372.126469,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623942372.1264796,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:06:12Z" level=info msg="==--> discovery.FindNetworkService() span:2cfe300926e618fb:2cfe300926e618fb:0000000000000000:1"
time="2021-06-17T15:06:12Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2cfe300926e618fb:2cfe300926e618fb:0000000000000000:1"
time="2021-06-17T15:06:12Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=2cfe300926e618fb:2cfe300926e618fb:0000000000000000:1"
time="2021-06-17T15:06:12Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:06:12Z" level=info msg="==----> initRegistryClient() span:2cfe300926e618fb:610ce2185b551a30:2cfe300926e618fb:1"
time="2021-06-17T15:06:12Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:06:12Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:06:12Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2cfe300926e618fb:610ce2185b551a30:2cfe300926e618fb:1"
time="2021-06-17T15:06:12Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:06:12Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:06:12Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00082e300 {member1.com}:0xc00082e380 {member2.com}:0xc00082e280]}"
time="2021-06-17T15:06:12Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:06:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:06:12Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:06:12Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:06:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:06:12Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:06:12Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:06:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:06:12Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:06:12Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:06:12Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:06:12Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:06:25Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="2cfe300926e618fb:610ce2185b551a30:2cfe300926e618fb:1"
2021/06/17 15:06:25 Reporting span 2cfe300926e618fb:610ce2185b551a30:2cfe300926e618fb:1
{"level":"info","ts":1623942385.5032532,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:06:25Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2cfe300926e618fb:2cfe300926e618fb:0000000000000000:1"
time="2021-06-17T15:06:25Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=2cfe300926e618fb:2cfe300926e618fb:0000000000000000:1"
2021/06/17 15:06:25 Reporting span 2cfe300926e618fb:41673cdca21abcd2:2cfe300926e618fb:1
time="2021-06-17T15:06:25Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2cfe300926e618fb:2cfe300926e618fb:0000000000000000:1"
2021/06/17 15:06:25 Reporting span 2cfe300926e618fb:2cfe300926e618fb:0000000000000000:1
{"level":"info","ts":1623942385.5063586,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623942385.5064077,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623942385.5064478,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942385.5064604,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942385.5064707,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623942385.5064833,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942385.5064924,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942385.5065365,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942385.5065775,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942385.506658,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942385.5068524,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942385.5068812,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942385.5068882,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942385.5068946,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942385.5069003,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942385.5069876,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942385.5070226,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942385.5070329,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623942385.5070424,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942385.5071104,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942385.5071325,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623942385.5072591,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942385.5072913,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:06:25Z" level=info msg="==--> discovery.FindNetworkService() span:70077ae89d0ba8f4:70077ae89d0ba8f4:0000000000000000:1"
time="2021-06-17T15:06:25Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=70077ae89d0ba8f4:70077ae89d0ba8f4:0000000000000000:1"
time="2021-06-17T15:06:25Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=70077ae89d0ba8f4:70077ae89d0ba8f4:0000000000000000:1"
time="2021-06-17T15:06:25Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:06:25Z" level=info msg="==----> initRegistryClient() span:70077ae89d0ba8f4:48c4cd2eb67564d6:70077ae89d0ba8f4:1"
time="2021-06-17T15:06:25Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:06:25Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:06:25Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="70077ae89d0ba8f4:48c4cd2eb67564d6:70077ae89d0ba8f4:1"
time="2021-06-17T15:06:25Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:06:25Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:06:25Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000888b00 {member1.com}:0xc000888bc0 {member2.com}:0xc000888a80]}"
time="2021-06-17T15:06:25Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:06:25Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:06:25Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:06:25Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:06:25Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:06:25Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:06:25Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:06:25Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:06:25Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:06:25Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:06:30Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:06:30Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
{"level":"info","ts":1623942391.8334162,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623942391.8335633,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T15:06:35Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:06:35Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:06:35Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:06:35Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:06:35Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="70077ae89d0ba8f4:48c4cd2eb67564d6:70077ae89d0ba8f4:1"
2021/06/17 15:06:35 Reporting span 70077ae89d0ba8f4:48c4cd2eb67564d6:70077ae89d0ba8f4:1
{"level":"info","ts":1623942395.5367737,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:06:35Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=70077ae89d0ba8f4:70077ae89d0ba8f4:0000000000000000:1"
time="2021-06-17T15:06:35Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=70077ae89d0ba8f4:70077ae89d0ba8f4:0000000000000000:1"
2021/06/17 15:06:35 Reporting span 70077ae89d0ba8f4:7638c07bcc3a98a8:70077ae89d0ba8f4:1
time="2021-06-17T15:06:35Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=70077ae89d0ba8f4:70077ae89d0ba8f4:0000000000000000:1"
2021/06/17 15:06:35 Reporting span 70077ae89d0ba8f4:70077ae89d0ba8f4:0000000000000000:1
{"level":"info","ts":1623942395.5426798,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942395.5427287,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942395.5427418,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623942395.5427513,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:06:35Z" level=info msg="==--> discovery.FindNetworkService() span:31553430b014792a:31553430b014792a:0000000000000000:1"
time="2021-06-17T15:06:35Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=31553430b014792a:31553430b014792a:0000000000000000:1"
time="2021-06-17T15:06:35Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=31553430b014792a:31553430b014792a:0000000000000000:1"
time="2021-06-17T15:06:35Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:06:35Z" level=info msg="==----> initRegistryClient() span:31553430b014792a:36e64ab53e4b3e1c:31553430b014792a:1"
time="2021-06-17T15:06:35Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:06:45Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:06:45Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="31553430b014792a:36e64ab53e4b3e1c:31553430b014792a:1"
time="2021-06-17T15:06:45Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:06:45Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:06:45Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00082ff00 {member1.com}:0xc00082ff80 {member2.com}:0xc00082fe80]}"
time="2021-06-17T15:06:45Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:06:45Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:06:45Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:06:45Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:06:45Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:06:45Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:06:45Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:06:45Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:06:45Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:06:45Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:06:45Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:06:45Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:06:52Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="31553430b014792a:36e64ab53e4b3e1c:31553430b014792a:1"
2021/06/17 15:06:52 Reporting span 31553430b014792a:36e64ab53e4b3e1c:31553430b014792a:1
{"level":"info","ts":1623942412.2630234,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:06:52Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=31553430b014792a:31553430b014792a:0000000000000000:1"
time="2021-06-17T15:06:52Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=31553430b014792a:31553430b014792a:0000000000000000:1"
2021/06/17 15:06:52 Reporting span 31553430b014792a:3fb2faa8e8811285:31553430b014792a:1
time="2021-06-17T15:06:52Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=31553430b014792a:31553430b014792a:0000000000000000:1"
2021/06/17 15:06:52 Reporting span 31553430b014792a:31553430b014792a:0000000000000000:1
{"level":"info","ts":1623942412.2660153,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623942412.266042,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623942412.266546,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942412.266582,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942412.2665896,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623942412.266603,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942412.266612,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942412.2666209,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942412.2666295,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942412.2666388,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942412.2666676,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942412.2666767,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942412.2666857,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942412.2666917,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942412.266697,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942412.266703,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942412.2667096,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942412.2667172,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623942412.2667286,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942412.2668009,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942412.2668664,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623942412.2668984,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942412.2669098,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:06:52Z" level=info msg="==--> discovery.FindNetworkService() span:1cae057bf74e610a:1cae057bf74e610a:0000000000000000:1"
time="2021-06-17T15:06:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1cae057bf74e610a:1cae057bf74e610a:0000000000000000:1"
time="2021-06-17T15:06:52Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=1cae057bf74e610a:1cae057bf74e610a:0000000000000000:1"
time="2021-06-17T15:06:52Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:06:52Z" level=info msg="==----> initRegistryClient() span:1cae057bf74e610a:6142206c23c78b25:1cae057bf74e610a:1"
time="2021-06-17T15:06:52Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:06:52Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:06:52Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1cae057bf74e610a:6142206c23c78b25:1cae057bf74e610a:1"
time="2021-06-17T15:06:52Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:06:52Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:06:52Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000358440 {member1.com}:0xc0003584c0 {member2.com}:0xc0003583c0]}"
time="2021-06-17T15:06:52Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:06:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:06:52Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:06:52Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:06:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:06:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:06:52Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:06:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:06:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:06:52Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:06:57Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:06:57Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:07:02Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:07:02Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:07:02Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:07:02Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:07:02Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="1cae057bf74e610a:6142206c23c78b25:1cae057bf74e610a:1"
2021/06/17 15:07:02 Reporting span 1cae057bf74e610a:6142206c23c78b25:1cae057bf74e610a:1
{"level":"info","ts":1623942422.297641,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:07:02Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1cae057bf74e610a:1cae057bf74e610a:0000000000000000:1"
time="2021-06-17T15:07:02Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=1cae057bf74e610a:1cae057bf74e610a:0000000000000000:1"
2021/06/17 15:07:02 Reporting span 1cae057bf74e610a:4cf7ecd6690b6d57:1cae057bf74e610a:1
time="2021-06-17T15:07:02Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1cae057bf74e610a:1cae057bf74e610a:0000000000000000:1"
2021/06/17 15:07:02 Reporting span 1cae057bf74e610a:1cae057bf74e610a:0000000000000000:1
{"level":"info","ts":1623942422.3029258,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942422.3030696,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942422.3031754,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623942422.303252,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:07:02Z" level=info msg="==--> discovery.FindNetworkService() span:7308a597fa65e8dd:7308a597fa65e8dd:0000000000000000:1"
time="2021-06-17T15:07:02Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7308a597fa65e8dd:7308a597fa65e8dd:0000000000000000:1"
time="2021-06-17T15:07:02Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=7308a597fa65e8dd:7308a597fa65e8dd:0000000000000000:1"
time="2021-06-17T15:07:02Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:07:02Z" level=info msg="==----> initRegistryClient() span:7308a597fa65e8dd:646cf8db2ce4bce4:7308a597fa65e8dd:1"
time="2021-06-17T15:07:02Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:07:12Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:07:12Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7308a597fa65e8dd:646cf8db2ce4bce4:7308a597fa65e8dd:1"
time="2021-06-17T15:07:12Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:07:12Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:07:12Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ef140 {member1.com}:0xc0004ef0c0 {member2.com}:0xc0004ef000]}"
time="2021-06-17T15:07:12Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:07:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:07:12Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:07:12Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:07:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:07:12Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:07:12Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:07:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:07:12Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:07:12Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:07:12Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:07:12Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:07:25Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="7308a597fa65e8dd:646cf8db2ce4bce4:7308a597fa65e8dd:1"
2021/06/17 15:07:25 Reporting span 7308a597fa65e8dd:646cf8db2ce4bce4:7308a597fa65e8dd:1
{"level":"info","ts":1623942445.675728,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:07:25Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7308a597fa65e8dd:7308a597fa65e8dd:0000000000000000:1"
time="2021-06-17T15:07:25Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=7308a597fa65e8dd:7308a597fa65e8dd:0000000000000000:1"
2021/06/17 15:07:25 Reporting span 7308a597fa65e8dd:52042fa53234b9a0:7308a597fa65e8dd:1
time="2021-06-17T15:07:25Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7308a597fa65e8dd:7308a597fa65e8dd:0000000000000000:1"
2021/06/17 15:07:25 Reporting span 7308a597fa65e8dd:7308a597fa65e8dd:0000000000000000:1
{"level":"info","ts":1623942445.6790786,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623942445.6792524,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623942445.6792808,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942445.679294,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942445.679306,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623942445.6793191,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942445.6793594,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942445.6794372,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942445.6795802,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942445.6796193,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942445.6796315,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942445.67964,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942445.6796532,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942445.6796696,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942445.6798174,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942445.6800282,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942445.6800747,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942445.6800904,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623942445.6801016,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942445.6801333,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942445.6801527,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623942445.6801732,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942445.680187,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:07:25Z" level=info msg="==--> discovery.FindNetworkService() span:420f709c151db447:420f709c151db447:0000000000000000:1"
time="2021-06-17T15:07:25Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=420f709c151db447:420f709c151db447:0000000000000000:1"
time="2021-06-17T15:07:25Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=420f709c151db447:420f709c151db447:0000000000000000:1"
time="2021-06-17T15:07:25Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:07:25Z" level=info msg="==----> initRegistryClient() span:420f709c151db447:0bfaf3a9cb334fcf:420f709c151db447:1"
time="2021-06-17T15:07:25Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:07:25Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:07:25Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="420f709c151db447:0bfaf3a9cb334fcf:420f709c151db447:1"
time="2021-06-17T15:07:25Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:07:25Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:07:25Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00082e100 {member1.com}:0xc00082e180 {member2.com}:0xc00082e080]}"
time="2021-06-17T15:07:25Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:07:25Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:07:25Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:07:25Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:07:25Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:07:25Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:07:25Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:07:25Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:07:25Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:07:25Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:07:30Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:07:30Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:07:35Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:07:35Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:07:35Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:07:35Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:07:35Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="420f709c151db447:0bfaf3a9cb334fcf:420f709c151db447:1"
2021/06/17 15:07:35 Reporting span 420f709c151db447:0bfaf3a9cb334fcf:420f709c151db447:1
{"level":"info","ts":1623942455.7169163,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:07:35Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=420f709c151db447:420f709c151db447:0000000000000000:1"
time="2021-06-17T15:07:35Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=420f709c151db447:420f709c151db447:0000000000000000:1"
2021/06/17 15:07:35 Reporting span 420f709c151db447:18acbb01529c4b7b:420f709c151db447:1
time="2021-06-17T15:07:35Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=420f709c151db447:420f709c151db447:0000000000000000:1"
2021/06/17 15:07:35 Reporting span 420f709c151db447:420f709c151db447:0000000000000000:1
{"level":"info","ts":1623942455.72693,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942455.727296,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942455.727383,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623942455.7275908,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:07:35Z" level=info msg="==--> discovery.FindNetworkService() span:1495acb913b7c661:1495acb913b7c661:0000000000000000:1"
time="2021-06-17T15:07:35Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1495acb913b7c661:1495acb913b7c661:0000000000000000:1"
time="2021-06-17T15:07:35Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=1495acb913b7c661:1495acb913b7c661:0000000000000000:1"
time="2021-06-17T15:07:35Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:07:35Z" level=info msg="==----> initRegistryClient() span:1495acb913b7c661:5e0ba90a1504e622:1495acb913b7c661:1"
time="2021-06-17T15:07:35Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:07:55Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:07:55Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1495acb913b7c661:5e0ba90a1504e622:1495acb913b7c661:1"
time="2021-06-17T15:07:55Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:07:55Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:07:55Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000182b00 {member1.com}:0xc000182a80 {member2.com}:0xc000182980]}"
time="2021-06-17T15:07:55Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:07:55Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:07:55Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:07:55Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:07:55Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:07:55Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:07:55Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:07:55Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:07:55Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:07:55Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:08:00Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:08:00Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:08:05Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:08:05Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:08:10Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:08:10Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:08:10Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:08:10Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:08:10Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="1495acb913b7c661:5e0ba90a1504e622:1495acb913b7c661:1"
2021/06/17 15:08:10 Reporting span 1495acb913b7c661:5e0ba90a1504e622:1495acb913b7c661:1
2021/06/17 15:08:10 Reporting span 1495acb913b7c661:1495acb913b7c661:0000000000000000:1
{"level":"info","ts":1623942490.750799,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623942490.7560258,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623942490.7560804,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942490.7560956,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:08:10Z" level=info msg="==--> discovery.FindNetworkService() span:2a7f6bc7818ec703:2a7f6bc7818ec703:0000000000000000:1"
time="2021-06-17T15:08:10Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2a7f6bc7818ec703:2a7f6bc7818ec703:0000000000000000:1"
time="2021-06-17T15:08:10Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=2a7f6bc7818ec703:2a7f6bc7818ec703:0000000000000000:1"
time="2021-06-17T15:08:10Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:08:10Z" level=info msg="==----> initRegistryClient() span:2a7f6bc7818ec703:5e10b490c566fc40:2a7f6bc7818ec703:1"
time="2021-06-17T15:08:10Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:08:10Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:08:10Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2a7f6bc7818ec703:5e10b490c566fc40:2a7f6bc7818ec703:1"
time="2021-06-17T15:08:10Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:08:10Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:08:10Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0003583c0 {member1.com}:0xc000358440 {member2.com}:0xc000358340]}"
time="2021-06-17T15:08:10Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:08:10Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:08:10Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:08:10Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:08:10Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:08:10Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:08:10Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:08:10Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:08:10Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:08:10Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:08:15Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:08:15Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:08:20Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:08:20Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:08:20Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:08:20Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:08:20Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="2a7f6bc7818ec703:5e10b490c566fc40:2a7f6bc7818ec703:1"
2021/06/17 15:08:20 Reporting span 2a7f6bc7818ec703:5e10b490c566fc40:2a7f6bc7818ec703:1
{"level":"info","ts":1623942500.802125,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:08:20Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2a7f6bc7818ec703:2a7f6bc7818ec703:0000000000000000:1"
time="2021-06-17T15:08:20Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=2a7f6bc7818ec703:2a7f6bc7818ec703:0000000000000000:1"
2021/06/17 15:08:20 Reporting span 2a7f6bc7818ec703:2416c729adccb02b:2a7f6bc7818ec703:1
time="2021-06-17T15:08:20Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2a7f6bc7818ec703:2a7f6bc7818ec703:0000000000000000:1"
2021/06/17 15:08:20 Reporting span 2a7f6bc7818ec703:2a7f6bc7818ec703:0000000000000000:1
{"level":"info","ts":1623942500.8118997,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942500.8121767,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942500.8128104,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623942500.8130207,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:08:20Z" level=info msg="==--> discovery.FindNetworkService() span:74fe09cb8c69ac6e:74fe09cb8c69ac6e:0000000000000000:1"
time="2021-06-17T15:08:20Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=74fe09cb8c69ac6e:74fe09cb8c69ac6e:0000000000000000:1"
time="2021-06-17T15:08:20Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=74fe09cb8c69ac6e:74fe09cb8c69ac6e:0000000000000000:1"
time="2021-06-17T15:08:20Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:08:20Z" level=info msg="==----> initRegistryClient() span:74fe09cb8c69ac6e:31bfd6966fbf9b22:74fe09cb8c69ac6e:1"
time="2021-06-17T15:08:20Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:08:30Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:08:30Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="74fe09cb8c69ac6e:31bfd6966fbf9b22:74fe09cb8c69ac6e:1"
time="2021-06-17T15:08:30Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:08:30Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:08:30Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00082e2c0 {member1.com}:0xc00082e340 {member2.com}:0xc00082e240]}"
time="2021-06-17T15:08:30Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:08:30Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:08:30Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:08:30Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:08:30Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:08:30Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:08:30Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:08:30Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:08:30Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:08:30Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
{"level":"info","ts":1623942511.8338525,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623942511.8339975,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T15:08:35Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:08:35Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:08:40Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:08:40Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:08:45Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:08:45Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:08:45Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:08:50Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:08:50Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="74fe09cb8c69ac6e:31bfd6966fbf9b22:74fe09cb8c69ac6e:1"
2021/06/17 15:08:50 Reporting span 74fe09cb8c69ac6e:31bfd6966fbf9b22:74fe09cb8c69ac6e:1
2021/06/17 15:08:50 Reporting span 74fe09cb8c69ac6e:74fe09cb8c69ac6e:0000000000000000:1
{"level":"info","ts":1623942530.8142421,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623942530.8143346,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623942530.8144076,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942530.8144455,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:08:50Z" level=info msg="==--> discovery.FindNetworkService() span:4460254f98336729:4460254f98336729:0000000000000000:1"
time="2021-06-17T15:08:50Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=4460254f98336729:4460254f98336729:0000000000000000:1"
time="2021-06-17T15:08:50Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=4460254f98336729:4460254f98336729:0000000000000000:1"
time="2021-06-17T15:08:50Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:08:50Z" level=info msg="==----> initRegistryClient() span:4460254f98336729:109d9f574c90c3c5:4460254f98336729:1"
time="2021-06-17T15:08:50Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:08:50Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:08:50Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4460254f98336729:109d9f574c90c3c5:4460254f98336729:1"
time="2021-06-17T15:08:50Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:08:50Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:08:50Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000359e00 {member1.com}:0xc000359d80 {member2.com}:0xc000359d00]}"
time="2021-06-17T15:08:50Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:08:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:08:50Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:08:50Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:08:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:08:50Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:08:50Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:08:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:08:50Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:08:50Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:08:55Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:08:55Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:09:00Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:09:00Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:09:00Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:09:00Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:09:00Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="4460254f98336729:109d9f574c90c3c5:4460254f98336729:1"
2021/06/17 15:09:00 Reporting span 4460254f98336729:109d9f574c90c3c5:4460254f98336729:1
{"level":"info","ts":1623942540.853067,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:09:00Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=4460254f98336729:4460254f98336729:0000000000000000:1"
time="2021-06-17T15:09:00Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=4460254f98336729:4460254f98336729:0000000000000000:1"
2021/06/17 15:09:00 Reporting span 4460254f98336729:13dd0ca3215e0e04:4460254f98336729:1
time="2021-06-17T15:09:00Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=4460254f98336729:4460254f98336729:0000000000000000:1"
2021/06/17 15:09:00 Reporting span 4460254f98336729:4460254f98336729:0000000000000000:1
{"level":"info","ts":1623942540.864634,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942540.864837,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942540.8649294,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623942540.865021,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:09:00Z" level=info msg="==--> discovery.FindNetworkService() span:71f2b9124abbf6c1:71f2b9124abbf6c1:0000000000000000:1"
time="2021-06-17T15:09:00Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=71f2b9124abbf6c1:71f2b9124abbf6c1:0000000000000000:1"
time="2021-06-17T15:09:00Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=71f2b9124abbf6c1:71f2b9124abbf6c1:0000000000000000:1"
time="2021-06-17T15:09:00Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:09:00Z" level=info msg="==----> initRegistryClient() span:71f2b9124abbf6c1:48087fe51aaf84b2:71f2b9124abbf6c1:1"
time="2021-06-17T15:09:00Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:09:00Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:09:00Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="71f2b9124abbf6c1:48087fe51aaf84b2:71f2b9124abbf6c1:1"
time="2021-06-17T15:09:00Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:09:00Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:09:00Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000183780 {member1.com}:0xc0001838c0 {member2.com}:0xc000183700]}"
time="2021-06-17T15:09:00Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:09:00Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:09:00Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:09:00Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:09:00Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:09:00Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:09:00Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:09:00Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:09:00Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:09:00Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:09:05Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:09:05Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:09:10Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:09:10Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:09:15Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:09:15Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:09:15Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:09:30Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:09:30Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="71f2b9124abbf6c1:48087fe51aaf84b2:71f2b9124abbf6c1:1"
2021/06/17 15:09:30 Reporting span 71f2b9124abbf6c1:48087fe51aaf84b2:71f2b9124abbf6c1:1
2021/06/17 15:09:30 Reporting span 71f2b9124abbf6c1:71f2b9124abbf6c1:0000000000000000:1
{"level":"info","ts":1623942570.8664978,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623942570.8669393,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623942570.8669903,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942570.8670018,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:09:30Z" level=info msg="==--> discovery.FindNetworkService() span:6535763dac6dd737:6535763dac6dd737:0000000000000000:1"
time="2021-06-17T15:09:30Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6535763dac6dd737:6535763dac6dd737:0000000000000000:1"
time="2021-06-17T15:09:30Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=6535763dac6dd737:6535763dac6dd737:0000000000000000:1"
time="2021-06-17T15:09:30Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:09:30Z" level=info msg="==----> initRegistryClient() span:6535763dac6dd737:56ce0241822d34f7:6535763dac6dd737:1"
time="2021-06-17T15:09:30Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:09:30Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:09:30Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6535763dac6dd737:56ce0241822d34f7:6535763dac6dd737:1"
time="2021-06-17T15:09:30Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:09:30Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:09:30Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000359240 {member1.com}:0xc000359340 {member2.com}:0xc000359100]}"
time="2021-06-17T15:09:30Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:09:30Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:09:30Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:09:30Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:09:30Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:09:30Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:09:30Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:09:30Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:09:30Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:09:30Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:09:35Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:09:35Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:09:40Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:09:40Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:09:40Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:09:40Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:09:40Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="6535763dac6dd737:56ce0241822d34f7:6535763dac6dd737:1"
2021/06/17 15:09:40 Reporting span 6535763dac6dd737:56ce0241822d34f7:6535763dac6dd737:1
{"level":"info","ts":1623942580.9023433,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:09:40Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6535763dac6dd737:6535763dac6dd737:0000000000000000:1"
time="2021-06-17T15:09:40Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=6535763dac6dd737:6535763dac6dd737:0000000000000000:1"
2021/06/17 15:09:40 Reporting span 6535763dac6dd737:01d565c1edec1dd7:6535763dac6dd737:1
time="2021-06-17T15:09:40Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6535763dac6dd737:6535763dac6dd737:0000000000000000:1"
2021/06/17 15:09:40 Reporting span 6535763dac6dd737:6535763dac6dd737:0000000000000000:1
{"level":"info","ts":1623942580.9080107,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942580.908047,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942580.9080586,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623942580.9081216,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:09:40Z" level=info msg="==--> discovery.FindNetworkService() span:4881db3e4d51fc82:4881db3e4d51fc82:0000000000000000:1"
time="2021-06-17T15:09:40Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=4881db3e4d51fc82:4881db3e4d51fc82:0000000000000000:1"
time="2021-06-17T15:09:40Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=4881db3e4d51fc82:4881db3e4d51fc82:0000000000000000:1"
time="2021-06-17T15:09:40Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:09:40Z" level=info msg="==----> initRegistryClient() span:4881db3e4d51fc82:0e4dc18656a53d50:4881db3e4d51fc82:1"
time="2021-06-17T15:09:40Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:09:50Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:09:50Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4881db3e4d51fc82:0e4dc18656a53d50:4881db3e4d51fc82:1"
time="2021-06-17T15:09:50Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:09:50Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:09:50Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000baa40 {member1.com}:0xc0000baac0 {member2.com}:0xc0000ba9c0]}"
time="2021-06-17T15:09:50Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:09:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:09:50Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:09:50Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:09:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:09:50Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:09:50Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:09:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:09:50Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:09:50Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:09:50Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:09:50Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:09:50Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="4881db3e4d51fc82:0e4dc18656a53d50:4881db3e4d51fc82:1"
2021/06/17 15:09:50 Reporting span 4881db3e4d51fc82:0e4dc18656a53d50:4881db3e4d51fc82:1
{"level":"info","ts":1623942590.9563818,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:09:50Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=4881db3e4d51fc82:4881db3e4d51fc82:0000000000000000:1"
time="2021-06-17T15:09:50Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=4881db3e4d51fc82:4881db3e4d51fc82:0000000000000000:1"
2021/06/17 15:09:50 Reporting span 4881db3e4d51fc82:53d101e53e5a2f51:4881db3e4d51fc82:1
time="2021-06-17T15:09:50Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=4881db3e4d51fc82:4881db3e4d51fc82:0000000000000000:1"
2021/06/17 15:09:50 Reporting span 4881db3e4d51fc82:4881db3e4d51fc82:0000000000000000:1
{"level":"info","ts":1623942590.958872,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623942590.9589133,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623942590.9589248,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942590.9589534,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942590.9589655,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623942590.9589856,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942590.9589958,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942590.9590042,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942590.9590125,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942590.9591286,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942590.9592435,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942590.9592702,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942590.9592798,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942590.9592896,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942590.9593573,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942590.9593751,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942590.9593842,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942590.9594114,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623942590.9594598,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942590.959487,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942590.9595044,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623942590.9596198,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942590.9596784,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:09:50Z" level=info msg="==--> discovery.FindNetworkService() span:65b625dd37b953aa:65b625dd37b953aa:0000000000000000:1"
time="2021-06-17T15:09:50Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=65b625dd37b953aa:65b625dd37b953aa:0000000000000000:1"
time="2021-06-17T15:09:50Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=65b625dd37b953aa:65b625dd37b953aa:0000000000000000:1"
time="2021-06-17T15:09:50Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:09:50Z" level=info msg="==----> initRegistryClient() span:65b625dd37b953aa:60a325ebec9ac7ce:65b625dd37b953aa:1"
time="2021-06-17T15:09:50Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:09:50Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:09:50Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="65b625dd37b953aa:60a325ebec9ac7ce:65b625dd37b953aa:1"
time="2021-06-17T15:09:50Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:09:50Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:09:50Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000182440 {member1.com}:0xc000182580 {member2.com}:0xc0001823c0]}"
time="2021-06-17T15:09:50Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:09:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:09:50Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:09:50Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:09:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:09:50Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:09:50Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:09:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:09:50Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:09:50Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:09:55Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:09:55Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:10:00Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:10:00Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:10:00Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:10:00Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:10:00Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="65b625dd37b953aa:60a325ebec9ac7ce:65b625dd37b953aa:1"
2021/06/17 15:10:00 Reporting span 65b625dd37b953aa:60a325ebec9ac7ce:65b625dd37b953aa:1
{"level":"info","ts":1623942600.9921732,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:10:00Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=65b625dd37b953aa:65b625dd37b953aa:0000000000000000:1"
time="2021-06-17T15:10:00Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=65b625dd37b953aa:65b625dd37b953aa:0000000000000000:1"
2021/06/17 15:10:00 Reporting span 65b625dd37b953aa:3a1484facf2b29f4:65b625dd37b953aa:1
time="2021-06-17T15:10:00Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=65b625dd37b953aa:65b625dd37b953aa:0000000000000000:1"
2021/06/17 15:10:00 Reporting span 65b625dd37b953aa:65b625dd37b953aa:0000000000000000:1
{"level":"info","ts":1623942600.9987054,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942600.998731,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942600.9987402,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623942600.9987504,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:10:00Z" level=info msg="==--> discovery.FindNetworkService() span:148c5eac34987446:148c5eac34987446:0000000000000000:1"
time="2021-06-17T15:10:00Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=148c5eac34987446:148c5eac34987446:0000000000000000:1"
time="2021-06-17T15:10:00Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=148c5eac34987446:148c5eac34987446:0000000000000000:1"
time="2021-06-17T15:10:00Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:10:00Z" level=info msg="==----> initRegistryClient() span:148c5eac34987446:2957cc7a14ea4bbf:148c5eac34987446:1"
time="2021-06-17T15:10:00Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:10:11Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:10:11Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="148c5eac34987446:2957cc7a14ea4bbf:148c5eac34987446:1"
time="2021-06-17T15:10:11Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:10:11Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:10:11Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000137c40 {member1.com}:0xc000137d80 {member2.com}:0xc000137bc0]}"
time="2021-06-17T15:10:11Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:10:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:10:11Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:10:11Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:10:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:10:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:10:11Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:10:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:10:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:10:11Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:10:11Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:10:11Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:10:11Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="148c5eac34987446:2957cc7a14ea4bbf:148c5eac34987446:1"
2021/06/17 15:10:11 Reporting span 148c5eac34987446:2957cc7a14ea4bbf:148c5eac34987446:1
{"level":"info","ts":1623942611.0399952,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:10:11Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=148c5eac34987446:148c5eac34987446:0000000000000000:1"
time="2021-06-17T15:10:11Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=148c5eac34987446:148c5eac34987446:0000000000000000:1"
2021/06/17 15:10:11 Reporting span 148c5eac34987446:198a9747bb87e42a:148c5eac34987446:1
time="2021-06-17T15:10:11Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=148c5eac34987446:148c5eac34987446:0000000000000000:1"
2021/06/17 15:10:11 Reporting span 148c5eac34987446:148c5eac34987446:0000000000000000:1
{"level":"info","ts":1623942611.0433385,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623942611.0436962,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623942611.0438178,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942611.0438972,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942611.0441656,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623942611.0443976,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942611.0445552,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942611.0447242,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942611.0448759,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942611.045017,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942611.045127,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942611.0453758,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942611.045561,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942611.0457227,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942611.0458305,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942611.0461297,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942611.0462062,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942611.0463648,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623942611.0463977,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942611.0464158,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942631.8341837,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623942631.8343062,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623942631.834329,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942631.8343327,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623942631.8343403,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:10:31Z" level=info msg="==--> discovery.FindNetworkService() span:7f4b1b9f01e96b42:7f4b1b9f01e96b42:0000000000000000:1"
time="2021-06-17T15:10:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7f4b1b9f01e96b42:7f4b1b9f01e96b42:0000000000000000:1"
time="2021-06-17T15:10:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=7f4b1b9f01e96b42:7f4b1b9f01e96b42:0000000000000000:1"
time="2021-06-17T15:10:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:10:31Z" level=info msg="==----> initRegistryClient() span:7f4b1b9f01e96b42:435b6ef0e028763c:7f4b1b9f01e96b42:1"
time="2021-06-17T15:10:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:10:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:10:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7f4b1b9f01e96b42:435b6ef0e028763c:7f4b1b9f01e96b42:1"
time="2021-06-17T15:10:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:10:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:10:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000890840 {member1.com}:0xc0008908c0 {member2.com}:0xc0008907c0]}"
time="2021-06-17T15:10:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:10:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:10:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:10:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:10:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:10:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:10:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:10:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:10:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:10:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:10:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:10:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:10:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:10:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:10:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:10:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:10:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="7f4b1b9f01e96b42:435b6ef0e028763c:7f4b1b9f01e96b42:1"
2021/06/17 15:10:41 Reporting span 7f4b1b9f01e96b42:435b6ef0e028763c:7f4b1b9f01e96b42:1
{"level":"info","ts":1623942641.8630822,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:10:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7f4b1b9f01e96b42:7f4b1b9f01e96b42:0000000000000000:1"
time="2021-06-17T15:10:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=7f4b1b9f01e96b42:7f4b1b9f01e96b42:0000000000000000:1"
2021/06/17 15:10:41 Reporting span 7f4b1b9f01e96b42:2bc1b254b7eea56b:7f4b1b9f01e96b42:1
time="2021-06-17T15:10:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7f4b1b9f01e96b42:7f4b1b9f01e96b42:0000000000000000:1"
2021/06/17 15:10:41 Reporting span 7f4b1b9f01e96b42:7f4b1b9f01e96b42:0000000000000000:1
{"level":"info","ts":1623942641.8680203,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942641.8681126,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942641.8681996,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623942641.8682437,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:10:41Z" level=info msg="==--> discovery.FindNetworkService() span:705a2e461fa8572a:705a2e461fa8572a:0000000000000000:1"
time="2021-06-17T15:10:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=705a2e461fa8572a:705a2e461fa8572a:0000000000000000:1"
time="2021-06-17T15:10:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=705a2e461fa8572a:705a2e461fa8572a:0000000000000000:1"
time="2021-06-17T15:10:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:10:41Z" level=info msg="==----> initRegistryClient() span:705a2e461fa8572a:700bd9c6f758a5c8:705a2e461fa8572a:1"
time="2021-06-17T15:10:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:11:01Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:11:01Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="705a2e461fa8572a:700bd9c6f758a5c8:705a2e461fa8572a:1"
time="2021-06-17T15:11:01Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:11:01Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:11:01Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001838c0 {member1.com}:0xc000183d00 {member2.com}:0xc000183780]}"
time="2021-06-17T15:11:01Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:11:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:11:01Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:11:01Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:11:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:11:01Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:11:01Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:11:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:11:01Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:11:01Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:11:06Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:11:06Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:11:11Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:11:11Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:11:16Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:11:16Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:11:16Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:11:16Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:11:16Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="705a2e461fa8572a:700bd9c6f758a5c8:705a2e461fa8572a:1"
2021/06/17 15:11:16 Reporting span 705a2e461fa8572a:700bd9c6f758a5c8:705a2e461fa8572a:1
2021/06/17 15:11:16 Reporting span 705a2e461fa8572a:705a2e461fa8572a:0000000000000000:1
{"level":"info","ts":1623942676.8963819,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623942676.8964202,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623942676.8964305,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942676.896443,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:11:16Z" level=info msg="==--> discovery.FindNetworkService() span:05584ed28b727280:05584ed28b727280:0000000000000000:1"
time="2021-06-17T15:11:16Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=05584ed28b727280:05584ed28b727280:0000000000000000:1"
time="2021-06-17T15:11:16Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=05584ed28b727280:05584ed28b727280:0000000000000000:1"
time="2021-06-17T15:11:16Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:11:16Z" level=info msg="==----> initRegistryClient() span:05584ed28b727280:7a3aff6b57ba2dd4:05584ed28b727280:1"
time="2021-06-17T15:11:16Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:11:16Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:11:16Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="05584ed28b727280:7a3aff6b57ba2dd4:05584ed28b727280:1"
time="2021-06-17T15:11:16Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:11:16Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:11:16Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ef140 {member1.com}:0xc0004ef200 {member2.com}:0xc0004ef0c0]}"
time="2021-06-17T15:11:16Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:11:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:11:16Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:11:16Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:11:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:11:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:11:16Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:11:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:11:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:11:16Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:11:21Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:11:21Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:11:26Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:11:26Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:11:26Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:11:26Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:11:26Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="05584ed28b727280:7a3aff6b57ba2dd4:05584ed28b727280:1"
2021/06/17 15:11:26 Reporting span 05584ed28b727280:7a3aff6b57ba2dd4:05584ed28b727280:1
{"level":"info","ts":1623942686.9287176,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:11:26Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=05584ed28b727280:05584ed28b727280:0000000000000000:1"
time="2021-06-17T15:11:26Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=05584ed28b727280:05584ed28b727280:0000000000000000:1"
2021/06/17 15:11:26 Reporting span 05584ed28b727280:5be45046ef8cb424:05584ed28b727280:1
time="2021-06-17T15:11:26Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=05584ed28b727280:05584ed28b727280:0000000000000000:1"
2021/06/17 15:11:26 Reporting span 05584ed28b727280:05584ed28b727280:0000000000000000:1
{"level":"info","ts":1623942686.93427,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942686.9343257,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942686.9343593,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623942686.9344158,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:11:26Z" level=info msg="==--> discovery.FindNetworkService() span:3e2662079ca8f06a:3e2662079ca8f06a:0000000000000000:1"
time="2021-06-17T15:11:26Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3e2662079ca8f06a:3e2662079ca8f06a:0000000000000000:1"
time="2021-06-17T15:11:26Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=3e2662079ca8f06a:3e2662079ca8f06a:0000000000000000:1"
time="2021-06-17T15:11:26Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:11:26Z" level=info msg="==----> initRegistryClient() span:3e2662079ca8f06a:4a73e4df8f003a49:3e2662079ca8f06a:1"
time="2021-06-17T15:11:26Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:11:36Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:11:36Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3e2662079ca8f06a:4a73e4df8f003a49:3e2662079ca8f06a:1"
time="2021-06-17T15:11:36Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:11:36Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:11:36Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000bab00 {member1.com}:0xc0000baa80 {member2.com}:0xc0000baa00]}"
time="2021-06-17T15:11:36Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:11:36Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:11:36Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:11:36Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:11:36Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:11:36Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:11:36Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:11:36Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:11:36Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:11:36Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:11:41Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:11:41Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:11:46Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:11:46Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:11:51Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:11:51Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:11:51Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:11:56Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:11:56Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="3e2662079ca8f06a:4a73e4df8f003a49:3e2662079ca8f06a:1"
2021/06/17 15:11:56 Reporting span 3e2662079ca8f06a:4a73e4df8f003a49:3e2662079ca8f06a:1
2021/06/17 15:11:56 Reporting span 3e2662079ca8f06a:3e2662079ca8f06a:0000000000000000:1
{"level":"info","ts":1623942716.935439,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623942716.9355235,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623942716.9355369,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942716.9355495,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:11:56Z" level=info msg="==--> discovery.FindNetworkService() span:6b0097a0e2a7076b:6b0097a0e2a7076b:0000000000000000:1"
time="2021-06-17T15:11:56Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6b0097a0e2a7076b:6b0097a0e2a7076b:0000000000000000:1"
time="2021-06-17T15:11:56Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=6b0097a0e2a7076b:6b0097a0e2a7076b:0000000000000000:1"
time="2021-06-17T15:11:56Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:11:56Z" level=info msg="==----> initRegistryClient() span:6b0097a0e2a7076b:332deac60c294bd3:6b0097a0e2a7076b:1"
time="2021-06-17T15:11:56Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:11:56Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:11:56Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6b0097a0e2a7076b:332deac60c294bd3:6b0097a0e2a7076b:1"
time="2021-06-17T15:11:56Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:11:56Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:11:56Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0008885c0 {member1.com}:0xc000888540 {member2.com}:0xc0008884c0]}"
time="2021-06-17T15:11:56Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:11:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:11:56Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:11:56Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:11:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:11:56Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:11:56Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:11:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:11:56Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:11:56Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:01Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:12:01Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:06Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:12:06Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:06Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:06Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:06Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="6b0097a0e2a7076b:332deac60c294bd3:6b0097a0e2a7076b:1"
2021/06/17 15:12:06 Reporting span 6b0097a0e2a7076b:332deac60c294bd3:6b0097a0e2a7076b:1
{"level":"info","ts":1623942726.9680982,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:12:06Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6b0097a0e2a7076b:6b0097a0e2a7076b:0000000000000000:1"
time="2021-06-17T15:12:06Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=6b0097a0e2a7076b:6b0097a0e2a7076b:0000000000000000:1"
2021/06/17 15:12:06 Reporting span 6b0097a0e2a7076b:11a44c2645588ed5:6b0097a0e2a7076b:1
time="2021-06-17T15:12:06Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6b0097a0e2a7076b:6b0097a0e2a7076b:0000000000000000:1"
2021/06/17 15:12:06 Reporting span 6b0097a0e2a7076b:6b0097a0e2a7076b:0000000000000000:1
{"level":"info","ts":1623942726.9737172,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942726.9737446,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942726.9737546,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623942726.973765,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:12:06Z" level=info msg="==--> discovery.FindNetworkService() span:57fc51c4ae2a4d65:57fc51c4ae2a4d65:0000000000000000:1"
time="2021-06-17T15:12:06Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=57fc51c4ae2a4d65:57fc51c4ae2a4d65:0000000000000000:1"
time="2021-06-17T15:12:06Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=57fc51c4ae2a4d65:57fc51c4ae2a4d65:0000000000000000:1"
time="2021-06-17T15:12:06Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:12:06Z" level=info msg="==----> initRegistryClient() span:57fc51c4ae2a4d65:1d09dc0958696974:57fc51c4ae2a4d65:1"
time="2021-06-17T15:12:06Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:12:26Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:12:26Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="57fc51c4ae2a4d65:1d09dc0958696974:57fc51c4ae2a4d65:1"
time="2021-06-17T15:12:26Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:12:26Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:12:26Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000137040 {member1.com}:0xc000136fc0 {member2.com}:0xc000136f40]}"
time="2021-06-17T15:12:26Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:12:26Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:12:26Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:12:26Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:12:26Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:12:26Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:12:26Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:12:26Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:12:26Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:12:26Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:27Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:27Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:27Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="57fc51c4ae2a4d65:1d09dc0958696974:57fc51c4ae2a4d65:1"
2021/06/17 15:12:27 Reporting span 57fc51c4ae2a4d65:1d09dc0958696974:57fc51c4ae2a4d65:1
{"level":"info","ts":1623942747.0108287,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:12:27Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=57fc51c4ae2a4d65:57fc51c4ae2a4d65:0000000000000000:1"
time="2021-06-17T15:12:27Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=57fc51c4ae2a4d65:57fc51c4ae2a4d65:0000000000000000:1"
2021/06/17 15:12:27 Reporting span 57fc51c4ae2a4d65:19274c3bcdc13008:57fc51c4ae2a4d65:1
time="2021-06-17T15:12:27Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=57fc51c4ae2a4d65:57fc51c4ae2a4d65:0000000000000000:1"
2021/06/17 15:12:27 Reporting span 57fc51c4ae2a4d65:57fc51c4ae2a4d65:0000000000000000:1
{"level":"info","ts":1623942747.0134797,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623942747.0136006,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623942747.013643,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942747.0136557,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942747.013667,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623942747.01368,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942747.0136898,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942747.0137548,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942747.0139072,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942747.0140114,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942747.014077,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942747.0141106,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942747.0141659,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942747.014231,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942747.014287,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942747.014332,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942747.014372,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942747.014455,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623942747.0145414,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942747.0146213,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942747.0146563,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623942747.014664,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942747.014671,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:12:27Z" level=info msg="==--> discovery.FindNetworkService() span:5a4df4dcd861ed37:5a4df4dcd861ed37:0000000000000000:1"
time="2021-06-17T15:12:27Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=5a4df4dcd861ed37:5a4df4dcd861ed37:0000000000000000:1"
time="2021-06-17T15:12:27Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=5a4df4dcd861ed37:5a4df4dcd861ed37:0000000000000000:1"
time="2021-06-17T15:12:27Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:12:27Z" level=info msg="==----> initRegistryClient() span:5a4df4dcd861ed37:5dc5efa88df87c19:5a4df4dcd861ed37:1"
time="2021-06-17T15:12:27Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:12:27Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:12:27Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5a4df4dcd861ed37:5dc5efa88df87c19:5a4df4dcd861ed37:1"
time="2021-06-17T15:12:27Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:12:27Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:12:27Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000817b00 {member1.com}:0xc000817b80 {member2.com}:0xc000817a80]}"
time="2021-06-17T15:12:27Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:12:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:12:27Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:12:27Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:12:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:12:27Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:12:27Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:12:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:12:27Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:12:27Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
{"level":"info","ts":1623942751.8345628,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623942751.8347106,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T15:12:32Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:12:32Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:37Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:12:37Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:37Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:37Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:37Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="5a4df4dcd861ed37:5dc5efa88df87c19:5a4df4dcd861ed37:1"
2021/06/17 15:12:37 Reporting span 5a4df4dcd861ed37:5dc5efa88df87c19:5a4df4dcd861ed37:1
{"level":"info","ts":1623942757.068521,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:12:37Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5a4df4dcd861ed37:5a4df4dcd861ed37:0000000000000000:1"
time="2021-06-17T15:12:37Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=5a4df4dcd861ed37:5a4df4dcd861ed37:0000000000000000:1"
2021/06/17 15:12:37 Reporting span 5a4df4dcd861ed37:1b23cc94fe9a0313:5a4df4dcd861ed37:1
time="2021-06-17T15:12:37Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5a4df4dcd861ed37:5a4df4dcd861ed37:0000000000000000:1"
2021/06/17 15:12:37 Reporting span 5a4df4dcd861ed37:5a4df4dcd861ed37:0000000000000000:1
{"level":"info","ts":1623942757.0738323,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942757.0738897,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942757.0739243,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623942757.073984,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:12:37Z" level=info msg="==--> discovery.FindNetworkService() span:03b2a0ba0ccff0ca:03b2a0ba0ccff0ca:0000000000000000:1"
time="2021-06-17T15:12:37Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=03b2a0ba0ccff0ca:03b2a0ba0ccff0ca:0000000000000000:1"
time="2021-06-17T15:12:37Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=03b2a0ba0ccff0ca:03b2a0ba0ccff0ca:0000000000000000:1"
time="2021-06-17T15:12:37Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:12:37Z" level=info msg="==----> initRegistryClient() span:03b2a0ba0ccff0ca:3da38e1ab4ce648c:03b2a0ba0ccff0ca:1"
time="2021-06-17T15:12:37Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:12:37Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:12:37Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="03b2a0ba0ccff0ca:3da38e1ab4ce648c:03b2a0ba0ccff0ca:1"
time="2021-06-17T15:12:37Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:12:37Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:12:37Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000ba880 {member1.com}:0xc0000ba900 {member2.com}:0xc0000ba800]}"
time="2021-06-17T15:12:37Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:12:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:12:37Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:12:37Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:12:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:12:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:12:37Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:12:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:12:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:12:37Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:37Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:37Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:37Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="03b2a0ba0ccff0ca:3da38e1ab4ce648c:03b2a0ba0ccff0ca:1"
2021/06/17 15:12:37 Reporting span 03b2a0ba0ccff0ca:3da38e1ab4ce648c:03b2a0ba0ccff0ca:1
{"level":"info","ts":1623942757.1163752,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:12:37Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=03b2a0ba0ccff0ca:03b2a0ba0ccff0ca:0000000000000000:1"
time="2021-06-17T15:12:37Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=03b2a0ba0ccff0ca:03b2a0ba0ccff0ca:0000000000000000:1"
2021/06/17 15:12:37 Reporting span 03b2a0ba0ccff0ca:57a80f247f50c1fe:03b2a0ba0ccff0ca:1
time="2021-06-17T15:12:37Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=03b2a0ba0ccff0ca:03b2a0ba0ccff0ca:0000000000000000:1"
2021/06/17 15:12:37 Reporting span 03b2a0ba0ccff0ca:03b2a0ba0ccff0ca:0000000000000000:1
{"level":"info","ts":1623942757.1187313,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623942757.1187506,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623942757.1187582,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942757.1189132,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942757.1189477,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623942757.1189575,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942757.118966,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942757.1189742,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942757.118983,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942757.1189926,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942757.119002,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942757.1190093,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942757.1190147,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942757.1190202,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942757.119026,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942757.1190312,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942757.1190374,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942757.1190443,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623942757.1190534,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942757.1190612,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942757.119077,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623942757.1190856,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942757.1190953,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:12:37Z" level=info msg="==--> discovery.FindNetworkService() span:14b3ee75a5cc419a:14b3ee75a5cc419a:0000000000000000:1"
time="2021-06-17T15:12:37Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=14b3ee75a5cc419a:14b3ee75a5cc419a:0000000000000000:1"
time="2021-06-17T15:12:37Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=14b3ee75a5cc419a:14b3ee75a5cc419a:0000000000000000:1"
time="2021-06-17T15:12:37Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:12:37Z" level=info msg="==----> initRegistryClient() span:14b3ee75a5cc419a:0f0a936646bb7d82:14b3ee75a5cc419a:1"
time="2021-06-17T15:12:37Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:12:37Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:12:37Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="14b3ee75a5cc419a:0f0a936646bb7d82:14b3ee75a5cc419a:1"
time="2021-06-17T15:12:37Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:12:37Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:12:37Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004eeb00 {member1.com}:0xc0004eeb80 {member2.com}:0xc0004eea00]}"
time="2021-06-17T15:12:37Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:12:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:12:37Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:12:37Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:12:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:12:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:12:37Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:12:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:12:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:12:37Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:42Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:12:42Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:47Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:12:47Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:47Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:47Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:47Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="14b3ee75a5cc419a:0f0a936646bb7d82:14b3ee75a5cc419a:1"
2021/06/17 15:12:47 Reporting span 14b3ee75a5cc419a:0f0a936646bb7d82:14b3ee75a5cc419a:1
{"level":"info","ts":1623942767.151571,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:12:47Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=14b3ee75a5cc419a:14b3ee75a5cc419a:0000000000000000:1"
time="2021-06-17T15:12:47Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=14b3ee75a5cc419a:14b3ee75a5cc419a:0000000000000000:1"
2021/06/17 15:12:47 Reporting span 14b3ee75a5cc419a:108ee9cd46510061:14b3ee75a5cc419a:1
time="2021-06-17T15:12:47Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=14b3ee75a5cc419a:14b3ee75a5cc419a:0000000000000000:1"
2021/06/17 15:12:47 Reporting span 14b3ee75a5cc419a:14b3ee75a5cc419a:0000000000000000:1
{"level":"info","ts":1623942767.1575835,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942767.1576502,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942767.1576622,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623942767.157697,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:12:47Z" level=info msg="==--> discovery.FindNetworkService() span:7165dcc2eff3838d:7165dcc2eff3838d:0000000000000000:1"
time="2021-06-17T15:12:47Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7165dcc2eff3838d:7165dcc2eff3838d:0000000000000000:1"
time="2021-06-17T15:12:47Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=7165dcc2eff3838d:7165dcc2eff3838d:0000000000000000:1"
time="2021-06-17T15:12:47Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:12:47Z" level=info msg="==----> initRegistryClient() span:7165dcc2eff3838d:56582caf89af10a1:7165dcc2eff3838d:1"
time="2021-06-17T15:12:47Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:12:47Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:12:47Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7165dcc2eff3838d:56582caf89af10a1:7165dcc2eff3838d:1"
time="2021-06-17T15:12:47Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:12:47Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:12:47Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000358600 {member1.com}:0xc000358680 {member2.com}:0xc000358580]}"
time="2021-06-17T15:12:47Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:12:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:12:47Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:12:47Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:12:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:12:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:12:47Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:12:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:12:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:12:47Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:47Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:47Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:47Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="7165dcc2eff3838d:56582caf89af10a1:7165dcc2eff3838d:1"
2021/06/17 15:12:47 Reporting span 7165dcc2eff3838d:56582caf89af10a1:7165dcc2eff3838d:1
{"level":"info","ts":1623942767.1966946,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:12:47Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7165dcc2eff3838d:7165dcc2eff3838d:0000000000000000:1"
time="2021-06-17T15:12:47Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=7165dcc2eff3838d:7165dcc2eff3838d:0000000000000000:1"
2021/06/17 15:12:47 Reporting span 7165dcc2eff3838d:21062766c83e2193:7165dcc2eff3838d:1
time="2021-06-17T15:12:47Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7165dcc2eff3838d:7165dcc2eff3838d:0000000000000000:1"
2021/06/17 15:12:47 Reporting span 7165dcc2eff3838d:7165dcc2eff3838d:0000000000000000:1
{"level":"info","ts":1623942767.1993105,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623942767.1993332,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623942767.1993434,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942767.1993694,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942767.1993816,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623942767.1994224,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942767.1994853,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942767.1994963,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942767.1997921,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942767.1998575,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942767.1999173,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942767.1999662,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942767.199998,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942767.200029,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942767.2000976,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942767.2001252,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942767.2001348,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942767.2001452,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623942767.200181,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942767.2001927,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942767.200209,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623942767.2003157,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942767.2003262,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:12:47Z" level=info msg="==--> discovery.FindNetworkService() span:15e75ab8884446a1:15e75ab8884446a1:0000000000000000:1"
time="2021-06-17T15:12:47Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=15e75ab8884446a1:15e75ab8884446a1:0000000000000000:1"
time="2021-06-17T15:12:47Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=15e75ab8884446a1:15e75ab8884446a1:0000000000000000:1"
time="2021-06-17T15:12:47Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:12:47Z" level=info msg="==----> initRegistryClient() span:15e75ab8884446a1:4639923818aea4e3:15e75ab8884446a1:1"
time="2021-06-17T15:12:47Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:12:47Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:12:47Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="15e75ab8884446a1:4639923818aea4e3:15e75ab8884446a1:1"
time="2021-06-17T15:12:47Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:12:47Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:12:47Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000816f80 {member1.com}:0xc000816f00 {member2.com}:0xc000816e80]}"
time="2021-06-17T15:12:47Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:12:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:12:47Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:12:47Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:12:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:12:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:12:47Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:12:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:12:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:12:47Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:52Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:12:52Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:57Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:12:57Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:57Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:57Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:57Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="15e75ab8884446a1:4639923818aea4e3:15e75ab8884446a1:1"
2021/06/17 15:12:57 Reporting span 15e75ab8884446a1:4639923818aea4e3:15e75ab8884446a1:1
{"level":"info","ts":1623942777.2324066,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:12:57Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=15e75ab8884446a1:15e75ab8884446a1:0000000000000000:1"
time="2021-06-17T15:12:57Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=15e75ab8884446a1:15e75ab8884446a1:0000000000000000:1"
2021/06/17 15:12:57 Reporting span 15e75ab8884446a1:414b02fb135d0b95:15e75ab8884446a1:1
time="2021-06-17T15:12:57Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=15e75ab8884446a1:15e75ab8884446a1:0000000000000000:1"
2021/06/17 15:12:57 Reporting span 15e75ab8884446a1:15e75ab8884446a1:0000000000000000:1
{"level":"info","ts":1623942777.2375712,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942777.2376034,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942777.2376153,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623942777.2376268,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:12:57Z" level=info msg="==--> discovery.FindNetworkService() span:66abd5cf162fa830:66abd5cf162fa830:0000000000000000:1"
time="2021-06-17T15:12:57Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=66abd5cf162fa830:66abd5cf162fa830:0000000000000000:1"
time="2021-06-17T15:12:57Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=66abd5cf162fa830:66abd5cf162fa830:0000000000000000:1"
time="2021-06-17T15:12:57Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:12:57Z" level=info msg="==----> initRegistryClient() span:66abd5cf162fa830:205cbe6493bb37e5:66abd5cf162fa830:1"
time="2021-06-17T15:12:57Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:12:57Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:12:57Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="66abd5cf162fa830:205cbe6493bb37e5:66abd5cf162fa830:1"
time="2021-06-17T15:12:57Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:12:57Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:12:57Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000136700 {member1.com}:0xc0001367c0 {member2.com}:0xc0001365c0]}"
time="2021-06-17T15:12:57Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:12:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:12:57Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:12:57Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:12:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:12:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:12:57Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:12:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:12:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:12:57Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:57Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:57Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:12:57Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="66abd5cf162fa830:205cbe6493bb37e5:66abd5cf162fa830:1"
2021/06/17 15:12:57 Reporting span 66abd5cf162fa830:205cbe6493bb37e5:66abd5cf162fa830:1
{"level":"info","ts":1623942777.2799711,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:12:57Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=66abd5cf162fa830:66abd5cf162fa830:0000000000000000:1"
time="2021-06-17T15:12:57Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=66abd5cf162fa830:66abd5cf162fa830:0000000000000000:1"
2021/06/17 15:12:57 Reporting span 66abd5cf162fa830:73d1c73d4a2627f3:66abd5cf162fa830:1
time="2021-06-17T15:12:57Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=66abd5cf162fa830:66abd5cf162fa830:0000000000000000:1"
2021/06/17 15:12:57 Reporting span 66abd5cf162fa830:66abd5cf162fa830:0000000000000000:1
{"level":"info","ts":1623942777.283099,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623942777.2831867,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623942777.2832406,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942777.2832742,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942777.2832859,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623942777.283348,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942777.2835114,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942777.2835703,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942777.2836213,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942777.2836483,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942777.2836804,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942777.2837133,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942777.283892,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942777.284034,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942777.2841094,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942777.284159,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942777.284211,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942777.2843978,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623942777.2844896,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942777.2845953,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942871.834836,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623942871.834956,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623942871.835034,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942871.8350828,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:14:31Z" level=info msg="==--> discovery.FindNetworkService() span:4b2f39d80f078d9a:4b2f39d80f078d9a:0000000000000000:1"
time="2021-06-17T15:14:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=4b2f39d80f078d9a:4b2f39d80f078d9a:0000000000000000:1"
time="2021-06-17T15:14:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=4b2f39d80f078d9a:4b2f39d80f078d9a:0000000000000000:1"
time="2021-06-17T15:14:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:14:31Z" level=info msg="==----> initRegistryClient() span:4b2f39d80f078d9a:39b37878c7752fce:4b2f39d80f078d9a:1"
time="2021-06-17T15:14:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
{"level":"info","ts":1623942871.8349795,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T15:14:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:14:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4b2f39d80f078d9a:39b37878c7752fce:4b2f39d80f078d9a:1"
time="2021-06-17T15:14:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:14:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:14:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000888b40 {member1.com}:0xc000888ac0 {member2.com}:0xc000888a40]}"
time="2021-06-17T15:14:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:14:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:14:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:14:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:14:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:14:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:14:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:14:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:14:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:14:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:14:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:14:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:14:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:14:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:14:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:14:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:14:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="4b2f39d80f078d9a:39b37878c7752fce:4b2f39d80f078d9a:1"
2021/06/17 15:14:41 Reporting span 4b2f39d80f078d9a:39b37878c7752fce:4b2f39d80f078d9a:1
{"level":"info","ts":1623942881.8634946,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:14:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=4b2f39d80f078d9a:4b2f39d80f078d9a:0000000000000000:1"
time="2021-06-17T15:14:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=4b2f39d80f078d9a:4b2f39d80f078d9a:0000000000000000:1"
2021/06/17 15:14:41 Reporting span 4b2f39d80f078d9a:5f7718392f8a33ee:4b2f39d80f078d9a:1
time="2021-06-17T15:14:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=4b2f39d80f078d9a:4b2f39d80f078d9a:0000000000000000:1"
2021/06/17 15:14:41 Reporting span 4b2f39d80f078d9a:4b2f39d80f078d9a:0000000000000000:1
{"level":"info","ts":1623942881.8688738,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942881.8689477,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942881.8689816,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623942881.8690264,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:14:41Z" level=info msg="==--> discovery.FindNetworkService() span:328172e19784c33a:328172e19784c33a:0000000000000000:1"
time="2021-06-17T15:14:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=328172e19784c33a:328172e19784c33a:0000000000000000:1"
time="2021-06-17T15:14:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=328172e19784c33a:328172e19784c33a:0000000000000000:1"
time="2021-06-17T15:14:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:14:41Z" level=info msg="==----> initRegistryClient() span:328172e19784c33a:79472b9beec540bc:328172e19784c33a:1"
time="2021-06-17T15:14:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:15:01Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:15:01Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="328172e19784c33a:79472b9beec540bc:328172e19784c33a:1"
time="2021-06-17T15:15:01Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:15:01Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:15:01Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000358380 {member1.com}:0xc000358300 {member2.com}:0xc000358280]}"
time="2021-06-17T15:15:01Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:15:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:15:01Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:15:01Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:15:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:15:01Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:15:01Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:15:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:15:01Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:15:01Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:15:01Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:15:01Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:15:08Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="328172e19784c33a:79472b9beec540bc:328172e19784c33a:1"
2021/06/17 15:15:08 Reporting span 328172e19784c33a:79472b9beec540bc:328172e19784c33a:1
{"level":"info","ts":1623942908.5797918,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:15:08Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=328172e19784c33a:328172e19784c33a:0000000000000000:1"
time="2021-06-17T15:15:08Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=328172e19784c33a:328172e19784c33a:0000000000000000:1"
2021/06/17 15:15:08 Reporting span 328172e19784c33a:2a800d7f28d8d0ee:328172e19784c33a:1
time="2021-06-17T15:15:08Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=328172e19784c33a:328172e19784c33a:0000000000000000:1"
2021/06/17 15:15:08 Reporting span 328172e19784c33a:328172e19784c33a:0000000000000000:1
{"level":"info","ts":1623942908.5826366,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623942908.5827785,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623942908.5827944,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942908.5829413,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942908.5829825,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623942908.5830004,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942908.5830112,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942908.5830207,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942908.5830307,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942908.5830407,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942908.583081,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942908.5830936,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942908.5831032,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942908.5831127,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942908.5831218,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942908.5831294,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942908.5831392,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942908.5831692,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623942908.5831785,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942908.5831866,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942908.583222,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623942908.5832329,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942908.5832632,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:15:08Z" level=info msg="==--> discovery.FindNetworkService() span:004dbcb1ba54a0d5:004dbcb1ba54a0d5:0000000000000000:1"
time="2021-06-17T15:15:08Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=004dbcb1ba54a0d5:004dbcb1ba54a0d5:0000000000000000:1"
time="2021-06-17T15:15:08Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=004dbcb1ba54a0d5:004dbcb1ba54a0d5:0000000000000000:1"
time="2021-06-17T15:15:08Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:15:08Z" level=info msg="==----> initRegistryClient() span:004dbcb1ba54a0d5:7db35e222f6b0ded:004dbcb1ba54a0d5:1"
time="2021-06-17T15:15:08Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:15:08Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:15:08Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="004dbcb1ba54a0d5:7db35e222f6b0ded:004dbcb1ba54a0d5:1"
time="2021-06-17T15:15:08Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:15:08Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:15:08Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000183540 {member1.com}:0xc000183700 {member2.com}:0xc000183180]}"
time="2021-06-17T15:15:08Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:15:08Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:15:08Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:15:08Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:15:08Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:15:08Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:15:08Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:15:08Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:15:08Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:15:08Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:15:13Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:15:13Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:15:18Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:15:18Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:15:18Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:15:18Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:15:18Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="004dbcb1ba54a0d5:7db35e222f6b0ded:004dbcb1ba54a0d5:1"
2021/06/17 15:15:18 Reporting span 004dbcb1ba54a0d5:7db35e222f6b0ded:004dbcb1ba54a0d5:1
{"level":"info","ts":1623942918.6140625,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:15:18Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=004dbcb1ba54a0d5:004dbcb1ba54a0d5:0000000000000000:1"
time="2021-06-17T15:15:18Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=004dbcb1ba54a0d5:004dbcb1ba54a0d5:0000000000000000:1"
2021/06/17 15:15:18 Reporting span 004dbcb1ba54a0d5:040d42892bdb7158:004dbcb1ba54a0d5:1
time="2021-06-17T15:15:18Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=004dbcb1ba54a0d5:004dbcb1ba54a0d5:0000000000000000:1"
2021/06/17 15:15:18 Reporting span 004dbcb1ba54a0d5:004dbcb1ba54a0d5:0000000000000000:1
{"level":"info","ts":1623942918.621541,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942918.6216192,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942918.621633,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623942918.621665,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:15:18Z" level=info msg="==--> discovery.FindNetworkService() span:3360fec41fc6a9c4:3360fec41fc6a9c4:0000000000000000:1"
time="2021-06-17T15:15:18Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3360fec41fc6a9c4:3360fec41fc6a9c4:0000000000000000:1"
time="2021-06-17T15:15:18Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=3360fec41fc6a9c4:3360fec41fc6a9c4:0000000000000000:1"
time="2021-06-17T15:15:18Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:15:18Z" level=info msg="==----> initRegistryClient() span:3360fec41fc6a9c4:767f6ed8a9aae4bd:3360fec41fc6a9c4:1"
time="2021-06-17T15:15:18Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:15:18Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:15:18Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3360fec41fc6a9c4:767f6ed8a9aae4bd:3360fec41fc6a9c4:1"
time="2021-06-17T15:15:18Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:15:18Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:15:18Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000358840 {member1.com}:0xc0003588c0 {member2.com}:0xc0003587c0]}"
time="2021-06-17T15:15:18Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:15:18Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:15:18Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:15:18Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:15:18Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:15:18Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:15:18Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:15:18Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:15:18Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:15:18Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:15:18Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:15:18Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:15:18Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="3360fec41fc6a9c4:767f6ed8a9aae4bd:3360fec41fc6a9c4:1"
2021/06/17 15:15:18 Reporting span 3360fec41fc6a9c4:767f6ed8a9aae4bd:3360fec41fc6a9c4:1
{"level":"info","ts":1623942918.6629493,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:15:18Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=3360fec41fc6a9c4:3360fec41fc6a9c4:0000000000000000:1"
time="2021-06-17T15:15:18Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=3360fec41fc6a9c4:3360fec41fc6a9c4:0000000000000000:1"
2021/06/17 15:15:18 Reporting span 3360fec41fc6a9c4:715d2d61cf364c52:3360fec41fc6a9c4:1
time="2021-06-17T15:15:18Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=3360fec41fc6a9c4:3360fec41fc6a9c4:0000000000000000:1"
2021/06/17 15:15:18 Reporting span 3360fec41fc6a9c4:3360fec41fc6a9c4:0000000000000000:1
{"level":"info","ts":1623942918.6661246,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623942918.666176,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623942918.6662056,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623942918.6662154,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623942918.6662254,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623942918.666238,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942918.6662467,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942918.6662557,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942918.6662643,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942918.6662717,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942918.6662774,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942918.666283,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942918.6662884,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942918.666294,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623942918.6662996,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623942918.6663072,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623942918.666316,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623942918.6663253,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623942918.6663337,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942918.6663423,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623942991.8352625,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623942991.835522,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623942991.8355806,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623942991.8355994,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623942991.8356295,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:16:31Z" level=info msg="==--> discovery.FindNetworkService() span:50db08b269c860d6:50db08b269c860d6:0000000000000000:1"
time="2021-06-17T15:16:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=50db08b269c860d6:50db08b269c860d6:0000000000000000:1"
time="2021-06-17T15:16:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=50db08b269c860d6:50db08b269c860d6:0000000000000000:1"
time="2021-06-17T15:16:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:16:31Z" level=info msg="==----> initRegistryClient() span:50db08b269c860d6:7eb105646e556f82:50db08b269c860d6:1"
time="2021-06-17T15:16:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:16:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:16:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="50db08b269c860d6:7eb105646e556f82:50db08b269c860d6:1"
time="2021-06-17T15:16:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:16:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:16:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001378c0 {member1.com}:0xc000137940 {member2.com}:0xc000137840]}"
time="2021-06-17T15:16:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:16:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:16:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:16:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:16:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:16:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:16:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:16:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:16:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:16:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:16:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:16:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:16:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:16:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:16:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:16:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:16:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="50db08b269c860d6:7eb105646e556f82:50db08b269c860d6:1"
2021/06/17 15:16:41 Reporting span 50db08b269c860d6:7eb105646e556f82:50db08b269c860d6:1
{"level":"info","ts":1623943001.8630672,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:16:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=50db08b269c860d6:50db08b269c860d6:0000000000000000:1"
time="2021-06-17T15:16:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=50db08b269c860d6:50db08b269c860d6:0000000000000000:1"
2021/06/17 15:16:41 Reporting span 50db08b269c860d6:53240a11db0330f5:50db08b269c860d6:1
time="2021-06-17T15:16:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=50db08b269c860d6:50db08b269c860d6:0000000000000000:1"
2021/06/17 15:16:41 Reporting span 50db08b269c860d6:50db08b269c860d6:0000000000000000:1
{"level":"info","ts":1623943001.8680243,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943001.8681076,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943001.8681264,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943001.8681374,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:16:41Z" level=info msg="==--> discovery.FindNetworkService() span:1221950456705d91:1221950456705d91:0000000000000000:1"
time="2021-06-17T15:16:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1221950456705d91:1221950456705d91:0000000000000000:1"
time="2021-06-17T15:16:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=1221950456705d91:1221950456705d91:0000000000000000:1"
time="2021-06-17T15:16:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:16:41Z" level=info msg="==----> initRegistryClient() span:1221950456705d91:037ff434a7af5772:1221950456705d91:1"
time="2021-06-17T15:16:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:16:51Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:16:51Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1221950456705d91:037ff434a7af5772:1221950456705d91:1"
time="2021-06-17T15:16:51Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:16:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:16:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000358140 {member1.com}:0xc0003581c0 {member2.com}:0xc000358080]}"
time="2021-06-17T15:16:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:16:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:16:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:16:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:16:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:16:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:16:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:16:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:16:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:16:51Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:16:51Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:16:51Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:16:58Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="1221950456705d91:037ff434a7af5772:1221950456705d91:1"
2021/06/17 15:16:58 Reporting span 1221950456705d91:037ff434a7af5772:1221950456705d91:1
{"level":"info","ts":1623943018.5777075,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:16:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1221950456705d91:1221950456705d91:0000000000000000:1"
time="2021-06-17T15:16:58Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=1221950456705d91:1221950456705d91:0000000000000000:1"
2021/06/17 15:16:58 Reporting span 1221950456705d91:3ebe6f9f348e398e:1221950456705d91:1
time="2021-06-17T15:16:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1221950456705d91:1221950456705d91:0000000000000000:1"
2021/06/17 15:16:58 Reporting span 1221950456705d91:1221950456705d91:0000000000000000:1
{"level":"info","ts":1623943018.5799272,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623943018.5799646,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623943018.579977,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943018.5800185,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943018.580081,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623943018.5801075,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943018.5801172,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943018.5802412,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943018.5802536,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943018.5802655,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943018.5802746,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943018.580284,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943018.580292,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943018.5803168,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943018.5803266,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943018.5803525,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943018.5803628,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943018.5803883,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623943018.580398,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943018.580423,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943018.580439,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623943018.5804532,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943018.5804627,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:16:58Z" level=info msg="==--> discovery.FindNetworkService() span:6d3affc9177472cf:6d3affc9177472cf:0000000000000000:1"
time="2021-06-17T15:16:58Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6d3affc9177472cf:6d3affc9177472cf:0000000000000000:1"
time="2021-06-17T15:16:58Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=6d3affc9177472cf:6d3affc9177472cf:0000000000000000:1"
time="2021-06-17T15:16:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:16:58Z" level=info msg="==----> initRegistryClient() span:6d3affc9177472cf:701c4ff6c35a6353:6d3affc9177472cf:1"
time="2021-06-17T15:16:58Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:16:58Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:16:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6d3affc9177472cf:701c4ff6c35a6353:6d3affc9177472cf:1"
time="2021-06-17T15:16:58Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:16:58Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:16:58Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000358fc0 {member1.com}:0xc000359040 {member2.com}:0xc000358f40]}"
time="2021-06-17T15:16:58Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:16:58Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:16:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:16:58Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:16:58Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:16:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:16:58Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:16:58Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:16:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:16:58Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:17:03Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:17:03Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:17:08Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:17:08Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:17:08Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:17:08Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:17:08Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="6d3affc9177472cf:701c4ff6c35a6353:6d3affc9177472cf:1"
2021/06/17 15:17:08 Reporting span 6d3affc9177472cf:701c4ff6c35a6353:6d3affc9177472cf:1
{"level":"info","ts":1623943028.630046,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:17:08Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6d3affc9177472cf:6d3affc9177472cf:0000000000000000:1"
time="2021-06-17T15:17:08Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=6d3affc9177472cf:6d3affc9177472cf:0000000000000000:1"
2021/06/17 15:17:08 Reporting span 6d3affc9177472cf:7b9b283f320fb184:6d3affc9177472cf:1
time="2021-06-17T15:17:08Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6d3affc9177472cf:6d3affc9177472cf:0000000000000000:1"
2021/06/17 15:17:08 Reporting span 6d3affc9177472cf:6d3affc9177472cf:0000000000000000:1
{"level":"info","ts":1623943028.6359665,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943028.6359925,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943028.6360033,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943028.6360455,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:17:08Z" level=info msg="==--> discovery.FindNetworkService() span:59d4410ec2952a4c:59d4410ec2952a4c:0000000000000000:1"
time="2021-06-17T15:17:08Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=59d4410ec2952a4c:59d4410ec2952a4c:0000000000000000:1"
time="2021-06-17T15:17:08Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=59d4410ec2952a4c:59d4410ec2952a4c:0000000000000000:1"
time="2021-06-17T15:17:08Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:17:08Z" level=info msg="==----> initRegistryClient() span:59d4410ec2952a4c:71ccefebf0d7cab6:59d4410ec2952a4c:1"
time="2021-06-17T15:17:08Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:17:18Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:17:18Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="59d4410ec2952a4c:71ccefebf0d7cab6:59d4410ec2952a4c:1"
time="2021-06-17T15:17:18Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:17:18Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:17:18Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000136a40 {member1.com}:0xc000136b40 {member2.com}:0xc0001369c0]}"
time="2021-06-17T15:17:18Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:17:18Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:17:18Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:17:18Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:17:18Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:17:18Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:17:18Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:17:18Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:17:18Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:17:18Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:17:23Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:17:23Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:17:28Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:17:28Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:17:33Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:17:33Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:17:33Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:17:38Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:17:38Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="59d4410ec2952a4c:71ccefebf0d7cab6:59d4410ec2952a4c:1"
2021/06/17 15:17:38 Reporting span 59d4410ec2952a4c:71ccefebf0d7cab6:59d4410ec2952a4c:1
2021/06/17 15:17:38 Reporting span 59d4410ec2952a4c:59d4410ec2952a4c:0000000000000000:1
{"level":"info","ts":1623943058.6367528,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623943058.6420443,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623943058.6420877,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943058.6420982,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:17:38Z" level=info msg="==--> discovery.FindNetworkService() span:739c01f3708c1013:739c01f3708c1013:0000000000000000:1"
time="2021-06-17T15:17:38Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=739c01f3708c1013:739c01f3708c1013:0000000000000000:1"
time="2021-06-17T15:17:38Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=739c01f3708c1013:739c01f3708c1013:0000000000000000:1"
time="2021-06-17T15:17:38Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:17:38Z" level=info msg="==----> initRegistryClient() span:739c01f3708c1013:1ddcb33f1d415b7c:739c01f3708c1013:1"
time="2021-06-17T15:17:38Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:17:38Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:17:38Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="739c01f3708c1013:1ddcb33f1d415b7c:739c01f3708c1013:1"
time="2021-06-17T15:17:38Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:17:38Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:17:38Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001836c0 {member1.com}:0xc000183740 {member2.com}:0xc0001831c0]}"
time="2021-06-17T15:17:38Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:17:38Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:17:38Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:17:38Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:17:38Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:17:38Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:17:38Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:17:38Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:17:38Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:17:38Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:17:43Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:17:43Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:17:48Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:17:48Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:17:48Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:17:48Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:17:48Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="739c01f3708c1013:1ddcb33f1d415b7c:739c01f3708c1013:1"
2021/06/17 15:17:48 Reporting span 739c01f3708c1013:1ddcb33f1d415b7c:739c01f3708c1013:1
{"level":"info","ts":1623943068.6738193,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:17:48Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=739c01f3708c1013:739c01f3708c1013:0000000000000000:1"
time="2021-06-17T15:17:48Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=739c01f3708c1013:739c01f3708c1013:0000000000000000:1"
2021/06/17 15:17:48 Reporting span 739c01f3708c1013:7270b62802e2a4cd:739c01f3708c1013:1
time="2021-06-17T15:17:48Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=739c01f3708c1013:739c01f3708c1013:0000000000000000:1"
2021/06/17 15:17:48 Reporting span 739c01f3708c1013:739c01f3708c1013:0000000000000000:1
{"level":"info","ts":1623943068.679432,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943068.6795373,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943068.679586,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943068.6796215,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:17:48Z" level=info msg="==--> discovery.FindNetworkService() span:4eb57edb9ac5a8f7:4eb57edb9ac5a8f7:0000000000000000:1"
time="2021-06-17T15:17:48Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=4eb57edb9ac5a8f7:4eb57edb9ac5a8f7:0000000000000000:1"
time="2021-06-17T15:17:48Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=4eb57edb9ac5a8f7:4eb57edb9ac5a8f7:0000000000000000:1"
time="2021-06-17T15:17:48Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:17:48Z" level=info msg="==----> initRegistryClient() span:4eb57edb9ac5a8f7:2281a3afc61e6f9b:4eb57edb9ac5a8f7:1"
time="2021-06-17T15:17:48Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:18:08Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:18:08Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4eb57edb9ac5a8f7:2281a3afc61e6f9b:4eb57edb9ac5a8f7:1"
time="2021-06-17T15:18:08Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:18:08Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:18:08Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000bb240 {member1.com}:0xc0000bb1c0 {member2.com}:0xc0000bb140]}"
time="2021-06-17T15:18:08Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:18:08Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:18:08Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:18:08Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:18:08Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:18:08Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:18:08Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:18:08Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:18:08Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:18:08Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:18:13Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:18:13Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:18:18Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:18:18Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:18:23Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:18:23Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:18:23Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:18:23Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:18:23Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="4eb57edb9ac5a8f7:2281a3afc61e6f9b:4eb57edb9ac5a8f7:1"
2021/06/17 15:18:23 Reporting span 4eb57edb9ac5a8f7:2281a3afc61e6f9b:4eb57edb9ac5a8f7:1
2021/06/17 15:18:23 Reporting span 4eb57edb9ac5a8f7:4eb57edb9ac5a8f7:0000000000000000:1
{"level":"info","ts":1623943103.7001736,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623943103.7104018,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623943103.7104418,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943103.7104514,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:18:23Z" level=info msg="==--> discovery.FindNetworkService() span:56507e42e8225ae9:56507e42e8225ae9:0000000000000000:1"
time="2021-06-17T15:18:23Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=56507e42e8225ae9:56507e42e8225ae9:0000000000000000:1"
time="2021-06-17T15:18:23Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=56507e42e8225ae9:56507e42e8225ae9:0000000000000000:1"
time="2021-06-17T15:18:23Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:18:23Z" level=info msg="==----> initRegistryClient() span:56507e42e8225ae9:31ab210cc39e52ba:56507e42e8225ae9:1"
time="2021-06-17T15:18:23Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:18:23Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:18:23Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="56507e42e8225ae9:31ab210cc39e52ba:56507e42e8225ae9:1"
time="2021-06-17T15:18:23Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:18:23Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:18:23Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0008893c0 {member1.com}:0xc000889340 {member2.com}:0xc0008892c0]}"
time="2021-06-17T15:18:23Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:18:23Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:18:23Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:18:23Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:18:23Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:18:23Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:18:23Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:18:23Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:18:23Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:18:23Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:18:28Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:18:28Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
{"level":"info","ts":1623943111.8355849,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623943111.8357613,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T15:18:33Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:18:33Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:18:33Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:18:33Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:18:33Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="56507e42e8225ae9:31ab210cc39e52ba:56507e42e8225ae9:1"
2021/06/17 15:18:33 Reporting span 56507e42e8225ae9:31ab210cc39e52ba:56507e42e8225ae9:1
{"level":"info","ts":1623943113.7387986,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:18:33Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=56507e42e8225ae9:56507e42e8225ae9:0000000000000000:1"
time="2021-06-17T15:18:33Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=56507e42e8225ae9:56507e42e8225ae9:0000000000000000:1"
2021/06/17 15:18:33 Reporting span 56507e42e8225ae9:2724ebced51e2d00:56507e42e8225ae9:1
time="2021-06-17T15:18:33Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=56507e42e8225ae9:56507e42e8225ae9:0000000000000000:1"
2021/06/17 15:18:33 Reporting span 56507e42e8225ae9:56507e42e8225ae9:0000000000000000:1
{"level":"info","ts":1623943113.7439184,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943113.7439554,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943113.743968,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943113.743979,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:18:33Z" level=info msg="==--> discovery.FindNetworkService() span:19864dddc2251cf9:19864dddc2251cf9:0000000000000000:1"
time="2021-06-17T15:18:33Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=19864dddc2251cf9:19864dddc2251cf9:0000000000000000:1"
time="2021-06-17T15:18:33Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=19864dddc2251cf9:19864dddc2251cf9:0000000000000000:1"
time="2021-06-17T15:18:33Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:18:33Z" level=info msg="==----> initRegistryClient() span:19864dddc2251cf9:7b759130ce585eee:19864dddc2251cf9:1"
time="2021-06-17T15:18:33Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:18:43Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:18:43Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="19864dddc2251cf9:7b759130ce585eee:19864dddc2251cf9:1"
time="2021-06-17T15:18:43Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:18:43Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:18:43Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000359600 {member1.com}:0xc000359680 {member2.com}:0xc000359580]}"
time="2021-06-17T15:18:43Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:18:43Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:18:43Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:18:43Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:18:43Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:18:43Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:18:43Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:18:43Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:18:43Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:18:43Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:18:48Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:18:48Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:18:53Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:18:53Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:18:58Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:18:58Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:18:58Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:19:03Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:19:03Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="19864dddc2251cf9:7b759130ce585eee:19864dddc2251cf9:1"
2021/06/17 15:19:03 Reporting span 19864dddc2251cf9:7b759130ce585eee:19864dddc2251cf9:1
2021/06/17 15:19:03 Reporting span 19864dddc2251cf9:19864dddc2251cf9:0000000000000000:1
{"level":"info","ts":1623943143.7446582,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623943143.744722,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623943143.7447333,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943143.7447448,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:19:03Z" level=info msg="==--> discovery.FindNetworkService() span:0ee98bfd0a549a2b:0ee98bfd0a549a2b:0000000000000000:1"
time="2021-06-17T15:19:03Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=0ee98bfd0a549a2b:0ee98bfd0a549a2b:0000000000000000:1"
time="2021-06-17T15:19:03Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=0ee98bfd0a549a2b:0ee98bfd0a549a2b:0000000000000000:1"
time="2021-06-17T15:19:03Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:19:03Z" level=info msg="==----> initRegistryClient() span:0ee98bfd0a549a2b:27a8213f2f58dd70:0ee98bfd0a549a2b:1"
time="2021-06-17T15:19:03Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:19:03Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:19:03Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="0ee98bfd0a549a2b:27a8213f2f58dd70:0ee98bfd0a549a2b:1"
time="2021-06-17T15:19:03Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:19:03Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:19:03Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0007cf980 {member1.com}:0xc0007cfa00 {member2.com}:0xc0007cf900]}"
time="2021-06-17T15:19:03Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:19:03Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:19:03Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:19:03Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:19:03Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:19:03Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:19:03Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:19:03Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:19:03Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:19:03Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:19:08Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:19:08Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:19:13Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:19:13Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:19:13Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:19:13Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:19:13Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="0ee98bfd0a549a2b:27a8213f2f58dd70:0ee98bfd0a549a2b:1"
2021/06/17 15:19:13 Reporting span 0ee98bfd0a549a2b:27a8213f2f58dd70:0ee98bfd0a549a2b:1
{"level":"info","ts":1623943153.7725973,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:19:13Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=0ee98bfd0a549a2b:0ee98bfd0a549a2b:0000000000000000:1"
time="2021-06-17T15:19:13Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=0ee98bfd0a549a2b:0ee98bfd0a549a2b:0000000000000000:1"
2021/06/17 15:19:13 Reporting span 0ee98bfd0a549a2b:0180975e7b2107b5:0ee98bfd0a549a2b:1
time="2021-06-17T15:19:13Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=0ee98bfd0a549a2b:0ee98bfd0a549a2b:0000000000000000:1"
2021/06/17 15:19:13 Reporting span 0ee98bfd0a549a2b:0ee98bfd0a549a2b:0000000000000000:1
{"level":"info","ts":1623943153.7783494,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943153.7783825,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943153.7783942,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943153.7784057,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:19:13Z" level=info msg="==--> discovery.FindNetworkService() span:152820ac873e33ac:152820ac873e33ac:0000000000000000:1"
time="2021-06-17T15:19:13Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=152820ac873e33ac:152820ac873e33ac:0000000000000000:1"
time="2021-06-17T15:19:13Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=152820ac873e33ac:152820ac873e33ac:0000000000000000:1"
time="2021-06-17T15:19:13Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:19:13Z" level=info msg="==----> initRegistryClient() span:152820ac873e33ac:397c4b3e2c5b195f:152820ac873e33ac:1"
time="2021-06-17T15:19:13Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:19:13Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:19:13Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="152820ac873e33ac:397c4b3e2c5b195f:152820ac873e33ac:1"
time="2021-06-17T15:19:13Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:19:13Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:19:13Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000136e00 {member1.com}:0xc000136f00 {member2.com}:0xc000136ac0]}"
time="2021-06-17T15:19:13Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:19:13Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:19:13Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:19:13Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:19:13Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:19:13Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:19:13Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:19:13Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:19:13Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:19:13Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:19:13Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:19:13Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:19:13Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="152820ac873e33ac:397c4b3e2c5b195f:152820ac873e33ac:1"
2021/06/17 15:19:13 Reporting span 152820ac873e33ac:397c4b3e2c5b195f:152820ac873e33ac:1
{"level":"info","ts":1623943153.822277,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:19:13Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=152820ac873e33ac:152820ac873e33ac:0000000000000000:1"
time="2021-06-17T15:19:13Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=152820ac873e33ac:152820ac873e33ac:0000000000000000:1"
2021/06/17 15:19:13 Reporting span 152820ac873e33ac:52a8a81596045dd4:152820ac873e33ac:1
time="2021-06-17T15:19:13Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=152820ac873e33ac:152820ac873e33ac:0000000000000000:1"
2021/06/17 15:19:13 Reporting span 152820ac873e33ac:152820ac873e33ac:0000000000000000:1
{"level":"info","ts":1623943153.8249931,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623943153.8251164,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623943153.8251808,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943153.825323,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943153.825363,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623943153.8255162,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943153.8255506,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943153.8255613,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943153.8255713,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943153.825579,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943153.8255863,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943153.8255951,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943153.8256204,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943153.825631,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943153.8256404,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943153.825664,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943153.8256743,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943153.825698,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623943153.8257084,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943153.82572,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943153.8257353,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623943153.8257444,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943153.8257544,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:19:13Z" level=info msg="==--> discovery.FindNetworkService() span:5ccdf990b8add0a7:5ccdf990b8add0a7:0000000000000000:1"
time="2021-06-17T15:19:13Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=5ccdf990b8add0a7:5ccdf990b8add0a7:0000000000000000:1"
time="2021-06-17T15:19:13Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=5ccdf990b8add0a7:5ccdf990b8add0a7:0000000000000000:1"
time="2021-06-17T15:19:13Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:19:13Z" level=info msg="==----> initRegistryClient() span:5ccdf990b8add0a7:2b4ae62d08c0df1c:5ccdf990b8add0a7:1"
time="2021-06-17T15:19:13Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:19:13Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:19:13Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5ccdf990b8add0a7:2b4ae62d08c0df1c:5ccdf990b8add0a7:1"
time="2021-06-17T15:19:13Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:19:13Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:19:13Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0007ce200 {member1.com}:0xc0007ce280 {member2.com}:0xc0007ce180]}"
time="2021-06-17T15:19:13Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:19:13Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:19:13Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:19:13Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:19:13Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:19:13Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:19:13Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:19:13Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:19:13Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:19:13Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:19:18Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:19:18Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:19:23Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:19:23Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:19:23Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:19:23Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:19:23Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="5ccdf990b8add0a7:2b4ae62d08c0df1c:5ccdf990b8add0a7:1"
2021/06/17 15:19:23 Reporting span 5ccdf990b8add0a7:2b4ae62d08c0df1c:5ccdf990b8add0a7:1
{"level":"info","ts":1623943163.8577373,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:19:23Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5ccdf990b8add0a7:5ccdf990b8add0a7:0000000000000000:1"
time="2021-06-17T15:19:23Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=5ccdf990b8add0a7:5ccdf990b8add0a7:0000000000000000:1"
2021/06/17 15:19:23 Reporting span 5ccdf990b8add0a7:5d9e23f296c23cf4:5ccdf990b8add0a7:1
time="2021-06-17T15:19:23Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5ccdf990b8add0a7:5ccdf990b8add0a7:0000000000000000:1"
2021/06/17 15:19:23 Reporting span 5ccdf990b8add0a7:5ccdf990b8add0a7:0000000000000000:1
{"level":"info","ts":1623943163.8634756,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943163.863514,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943163.8635259,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943163.863538,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:19:23Z" level=info msg="==--> discovery.FindNetworkService() span:502ca5a17ce1844d:502ca5a17ce1844d:0000000000000000:1"
time="2021-06-17T15:19:23Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=502ca5a17ce1844d:502ca5a17ce1844d:0000000000000000:1"
time="2021-06-17T15:19:23Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=502ca5a17ce1844d:502ca5a17ce1844d:0000000000000000:1"
time="2021-06-17T15:19:23Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:19:23Z" level=info msg="==----> initRegistryClient() span:502ca5a17ce1844d:2ae3901155f15c42:502ca5a17ce1844d:1"
time="2021-06-17T15:19:23Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:19:23Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:19:23Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="502ca5a17ce1844d:2ae3901155f15c42:502ca5a17ce1844d:1"
time="2021-06-17T15:19:23Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:19:23Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:19:23Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0007ceb00 {member1.com}:0xc0007ceb80 {member2.com}:0xc0007cea80]}"
time="2021-06-17T15:19:23Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:19:23Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:19:23Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:19:23Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:19:23Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:19:23Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:19:23Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:19:23Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:19:23Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:19:23Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:19:23Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:19:23Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:19:23Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="502ca5a17ce1844d:2ae3901155f15c42:502ca5a17ce1844d:1"
2021/06/17 15:19:23 Reporting span 502ca5a17ce1844d:2ae3901155f15c42:502ca5a17ce1844d:1
{"level":"info","ts":1623943163.904997,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:19:23Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=502ca5a17ce1844d:502ca5a17ce1844d:0000000000000000:1"
time="2021-06-17T15:19:23Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=502ca5a17ce1844d:502ca5a17ce1844d:0000000000000000:1"
2021/06/17 15:19:23 Reporting span 502ca5a17ce1844d:7dcf884a5f67facc:502ca5a17ce1844d:1
time="2021-06-17T15:19:23Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=502ca5a17ce1844d:502ca5a17ce1844d:0000000000000000:1"
2021/06/17 15:19:23 Reporting span 502ca5a17ce1844d:502ca5a17ce1844d:0000000000000000:1
{"level":"info","ts":1623943163.9086037,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623943163.9086711,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623943163.908947,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943163.909001,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943163.9090407,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623943163.909076,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943163.9091723,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943163.9092007,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943163.9093225,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943163.9093378,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943163.9093473,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943163.9093564,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943163.9093926,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943163.9094408,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943163.9094977,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943163.9095364,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943163.9095967,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943163.9097042,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623943163.909754,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943163.9097922,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943231.8358278,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623943231.8359263,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623943231.8359802,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943231.8360124,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:20:31Z" level=info msg="==--> discovery.FindNetworkService() span:6b3aee79e81eb3dd:6b3aee79e81eb3dd:0000000000000000:1"
time="2021-06-17T15:20:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6b3aee79e81eb3dd:6b3aee79e81eb3dd:0000000000000000:1"
time="2021-06-17T15:20:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=6b3aee79e81eb3dd:6b3aee79e81eb3dd:0000000000000000:1"
time="2021-06-17T15:20:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:20:31Z" level=info msg="==----> initRegistryClient() span:6b3aee79e81eb3dd:409ca405597b87c8:6b3aee79e81eb3dd:1"
time="2021-06-17T15:20:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
{"level":"info","ts":1623943231.8359878,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T15:20:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:20:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6b3aee79e81eb3dd:409ca405597b87c8:6b3aee79e81eb3dd:1"
time="2021-06-17T15:20:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:20:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:20:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000359380 {member1.com}:0xc000359400 {member2.com}:0xc000359300]}"
time="2021-06-17T15:20:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:20:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:20:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:20:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:20:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:20:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:20:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:20:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:20:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:20:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:20:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:20:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:20:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:20:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:20:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:20:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:20:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="6b3aee79e81eb3dd:409ca405597b87c8:6b3aee79e81eb3dd:1"
2021/06/17 15:20:41 Reporting span 6b3aee79e81eb3dd:409ca405597b87c8:6b3aee79e81eb3dd:1
{"level":"info","ts":1623943241.8718817,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:20:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6b3aee79e81eb3dd:6b3aee79e81eb3dd:0000000000000000:1"
time="2021-06-17T15:20:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=6b3aee79e81eb3dd:6b3aee79e81eb3dd:0000000000000000:1"
2021/06/17 15:20:41 Reporting span 6b3aee79e81eb3dd:7301b30ba1997495:6b3aee79e81eb3dd:1
time="2021-06-17T15:20:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6b3aee79e81eb3dd:6b3aee79e81eb3dd:0000000000000000:1"
2021/06/17 15:20:41 Reporting span 6b3aee79e81eb3dd:6b3aee79e81eb3dd:0000000000000000:1
{"level":"info","ts":1623943241.8789587,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943241.8790948,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943241.8792841,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943241.8793182,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:20:41Z" level=info msg="==--> discovery.FindNetworkService() span:05722c94e12113ff:05722c94e12113ff:0000000000000000:1"
time="2021-06-17T15:20:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=05722c94e12113ff:05722c94e12113ff:0000000000000000:1"
time="2021-06-17T15:20:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=05722c94e12113ff:05722c94e12113ff:0000000000000000:1"
time="2021-06-17T15:20:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:20:41Z" level=info msg="==----> initRegistryClient() span:05722c94e12113ff:2951c2a60e2cbd6b:05722c94e12113ff:1"
time="2021-06-17T15:20:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:20:41Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:20:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="05722c94e12113ff:2951c2a60e2cbd6b:05722c94e12113ff:1"
time="2021-06-17T15:20:41Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:20:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:20:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000182a40 {member1.com}:0xc000182ac0 {member2.com}:0xc000182940]}"
time="2021-06-17T15:20:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:20:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:20:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:20:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:20:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:20:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:20:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:20:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:20:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:20:41Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:20:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:20:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:20:48Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="05722c94e12113ff:2951c2a60e2cbd6b:05722c94e12113ff:1"
2021/06/17 15:20:48 Reporting span 05722c94e12113ff:2951c2a60e2cbd6b:05722c94e12113ff:1
{"level":"info","ts":1623943248.5879374,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:20:48Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=05722c94e12113ff:05722c94e12113ff:0000000000000000:1"
time="2021-06-17T15:20:48Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=05722c94e12113ff:05722c94e12113ff:0000000000000000:1"
2021/06/17 15:20:48 Reporting span 05722c94e12113ff:22c12a24617a0f91:05722c94e12113ff:1
time="2021-06-17T15:20:48Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=05722c94e12113ff:05722c94e12113ff:0000000000000000:1"
2021/06/17 15:20:48 Reporting span 05722c94e12113ff:05722c94e12113ff:0000000000000000:1
{"level":"info","ts":1623943248.591881,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623943248.5919588,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623943248.592039,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943248.5921147,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943248.5922124,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623943248.592258,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943248.5922709,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943248.5922801,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943248.592341,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943248.5923815,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943248.5924957,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943248.5925162,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943248.5925276,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943248.5925372,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943248.59255,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943248.592563,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943248.592573,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943248.5925848,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623943248.5925937,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943248.5926018,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943248.592617,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623943248.5926256,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943248.592636,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:20:48Z" level=info msg="==--> discovery.FindNetworkService() span:662f37567c454c9b:662f37567c454c9b:0000000000000000:1"
time="2021-06-17T15:20:48Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=662f37567c454c9b:662f37567c454c9b:0000000000000000:1"
time="2021-06-17T15:20:48Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=662f37567c454c9b:662f37567c454c9b:0000000000000000:1"
time="2021-06-17T15:20:48Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:20:48Z" level=info msg="==----> initRegistryClient() span:662f37567c454c9b:0cc79f77ae636fe9:662f37567c454c9b:1"
time="2021-06-17T15:20:48Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:20:48Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:20:48Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="662f37567c454c9b:0cc79f77ae636fe9:662f37567c454c9b:1"
time="2021-06-17T15:20:48Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:20:48Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:20:48Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0007cf2c0 {member1.com}:0xc0007cf240 {member2.com}:0xc0007cf1c0]}"
time="2021-06-17T15:20:48Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:20:48Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:20:48Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:20:48Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:20:48Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:20:48Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:20:48Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:20:48Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:20:48Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:20:48Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:20:53Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:20:53Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:20:58Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:20:58Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:20:58Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:20:58Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:20:58Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="662f37567c454c9b:0cc79f77ae636fe9:662f37567c454c9b:1"
2021/06/17 15:20:58 Reporting span 662f37567c454c9b:0cc79f77ae636fe9:662f37567c454c9b:1
{"level":"info","ts":1623943258.6205583,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:20:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=662f37567c454c9b:662f37567c454c9b:0000000000000000:1"
time="2021-06-17T15:20:58Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=662f37567c454c9b:662f37567c454c9b:0000000000000000:1"
2021/06/17 15:20:58 Reporting span 662f37567c454c9b:20ab6ed0959d5497:662f37567c454c9b:1
time="2021-06-17T15:20:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=662f37567c454c9b:662f37567c454c9b:0000000000000000:1"
2021/06/17 15:20:58 Reporting span 662f37567c454c9b:662f37567c454c9b:0000000000000000:1
{"level":"info","ts":1623943258.6258411,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943258.6274629,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943258.6274817,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943258.6274934,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:20:58Z" level=info msg="==--> discovery.FindNetworkService() span:4cdf0e4504309780:4cdf0e4504309780:0000000000000000:1"
time="2021-06-17T15:20:58Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=4cdf0e4504309780:4cdf0e4504309780:0000000000000000:1"
time="2021-06-17T15:20:58Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=4cdf0e4504309780:4cdf0e4504309780:0000000000000000:1"
time="2021-06-17T15:20:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:20:58Z" level=info msg="==----> initRegistryClient() span:4cdf0e4504309780:6c1f2ddc99de2936:4cdf0e4504309780:1"
time="2021-06-17T15:20:58Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:20:58Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:20:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4cdf0e4504309780:6c1f2ddc99de2936:4cdf0e4504309780:1"
time="2021-06-17T15:20:58Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:20:58Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:20:58Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001368c0 {member1.com}:0xc000136840 {member2.com}:0xc0001367c0]}"
time="2021-06-17T15:20:58Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:20:58Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:20:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:20:58Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:20:58Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:20:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:20:58Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:20:58Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:20:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:20:58Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:21:03Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:21:03Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:21:08Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:21:08Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:21:13Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:21:13Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:21:13Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:21:28Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:21:28Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="4cdf0e4504309780:6c1f2ddc99de2936:4cdf0e4504309780:1"
2021/06/17 15:21:28 Reporting span 4cdf0e4504309780:6c1f2ddc99de2936:4cdf0e4504309780:1
2021/06/17 15:21:28 Reporting span 4cdf0e4504309780:4cdf0e4504309780:0000000000000000:1
{"level":"info","ts":1623943288.628698,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623943288.6339152,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623943288.6339543,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943288.6339688,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:21:28Z" level=info msg="==--> discovery.FindNetworkService() span:14139de70ce8ce28:14139de70ce8ce28:0000000000000000:1"
time="2021-06-17T15:21:28Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=14139de70ce8ce28:14139de70ce8ce28:0000000000000000:1"
time="2021-06-17T15:21:28Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=14139de70ce8ce28:14139de70ce8ce28:0000000000000000:1"
time="2021-06-17T15:21:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:21:28Z" level=info msg="==----> initRegistryClient() span:14139de70ce8ce28:26c0b81378f41a45:14139de70ce8ce28:1"
time="2021-06-17T15:21:28Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:21:28Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:21:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="14139de70ce8ce28:26c0b81378f41a45:14139de70ce8ce28:1"
time="2021-06-17T15:21:28Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:21:28Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:21:28Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0007cf440 {member1.com}:0xc0007cf3c0 {member2.com}:0xc0007cf340]}"
time="2021-06-17T15:21:28Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:21:28Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:21:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:21:28Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:21:28Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:21:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:21:28Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:21:28Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:21:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:21:28Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:21:33Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:21:33Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:21:38Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:21:38Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:21:38Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:21:38Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:21:38Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="14139de70ce8ce28:26c0b81378f41a45:14139de70ce8ce28:1"
2021/06/17 15:21:38 Reporting span 14139de70ce8ce28:26c0b81378f41a45:14139de70ce8ce28:1
{"level":"info","ts":1623943298.662819,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:21:38Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=14139de70ce8ce28:14139de70ce8ce28:0000000000000000:1"
time="2021-06-17T15:21:38Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=14139de70ce8ce28:14139de70ce8ce28:0000000000000000:1"
2021/06/17 15:21:38 Reporting span 14139de70ce8ce28:6cbbf056474a9445:14139de70ce8ce28:1
time="2021-06-17T15:21:38Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=14139de70ce8ce28:14139de70ce8ce28:0000000000000000:1"
2021/06/17 15:21:38 Reporting span 14139de70ce8ce28:14139de70ce8ce28:0000000000000000:1
{"level":"info","ts":1623943298.6703458,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943298.6705003,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943298.6705225,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943298.6705337,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:21:38Z" level=info msg="==--> discovery.FindNetworkService() span:407acac72e5dc01e:407acac72e5dc01e:0000000000000000:1"
time="2021-06-17T15:21:38Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=407acac72e5dc01e:407acac72e5dc01e:0000000000000000:1"
time="2021-06-17T15:21:38Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=407acac72e5dc01e:407acac72e5dc01e:0000000000000000:1"
time="2021-06-17T15:21:38Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:21:38Z" level=info msg="==----> initRegistryClient() span:407acac72e5dc01e:5f65556ce70ef0c2:407acac72e5dc01e:1"
time="2021-06-17T15:21:38Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:21:48Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:21:48Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="407acac72e5dc01e:5f65556ce70ef0c2:407acac72e5dc01e:1"
time="2021-06-17T15:21:48Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:21:48Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:21:48Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000888140 {member1.com}:0xc0008880c0 {member2.com}:0xc000888040]}"
time="2021-06-17T15:21:48Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:21:48Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:21:48Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:21:48Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:21:48Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:21:48Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:21:48Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:21:48Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:21:48Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:21:48Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:21:53Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:21:53Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:21:58Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:21:58Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:22:03Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:22:03Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:22:03Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:22:08Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:22:08Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="407acac72e5dc01e:5f65556ce70ef0c2:407acac72e5dc01e:1"
2021/06/17 15:22:08 Reporting span 407acac72e5dc01e:5f65556ce70ef0c2:407acac72e5dc01e:1
2021/06/17 15:22:08 Reporting span 407acac72e5dc01e:407acac72e5dc01e:0000000000000000:1
{"level":"info","ts":1623943328.6710818,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623943328.6813276,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623943328.681402,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943328.6814167,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:22:08Z" level=info msg="==--> discovery.FindNetworkService() span:1c6e528dcc8f7026:1c6e528dcc8f7026:0000000000000000:1"
time="2021-06-17T15:22:08Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1c6e528dcc8f7026:1c6e528dcc8f7026:0000000000000000:1"
time="2021-06-17T15:22:08Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=1c6e528dcc8f7026:1c6e528dcc8f7026:0000000000000000:1"
time="2021-06-17T15:22:08Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:22:08Z" level=info msg="==----> initRegistryClient() span:1c6e528dcc8f7026:5704090c9499dada:1c6e528dcc8f7026:1"
time="2021-06-17T15:22:08Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:22:08Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:22:08Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1c6e528dcc8f7026:5704090c9499dada:1c6e528dcc8f7026:1"
time="2021-06-17T15:22:08Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:22:08Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:22:08Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000136780 {member1.com}:0xc000136800 {member2.com}:0xc000136700]}"
time="2021-06-17T15:22:08Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:22:08Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:22:08Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:22:08Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:22:08Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:22:08Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:22:08Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:22:08Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:22:08Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:22:08Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:22:13Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:22:13Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:22:18Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:22:18Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:22:18Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:22:18Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:22:18Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="1c6e528dcc8f7026:5704090c9499dada:1c6e528dcc8f7026:1"
2021/06/17 15:22:18 Reporting span 1c6e528dcc8f7026:5704090c9499dada:1c6e528dcc8f7026:1
{"level":"info","ts":1623943338.7153563,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:22:18Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1c6e528dcc8f7026:1c6e528dcc8f7026:0000000000000000:1"
time="2021-06-17T15:22:18Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=1c6e528dcc8f7026:1c6e528dcc8f7026:0000000000000000:1"
2021/06/17 15:22:18 Reporting span 1c6e528dcc8f7026:38b39328820af7f7:1c6e528dcc8f7026:1
time="2021-06-17T15:22:18Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1c6e528dcc8f7026:1c6e528dcc8f7026:0000000000000000:1"
2021/06/17 15:22:18 Reporting span 1c6e528dcc8f7026:1c6e528dcc8f7026:0000000000000000:1
{"level":"info","ts":1623943338.720672,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943338.720966,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943338.721,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943338.7210097,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:22:18Z" level=info msg="==--> discovery.FindNetworkService() span:52b299f035fbae2e:52b299f035fbae2e:0000000000000000:1"
time="2021-06-17T15:22:18Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=52b299f035fbae2e:52b299f035fbae2e:0000000000000000:1"
time="2021-06-17T15:22:18Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=52b299f035fbae2e:52b299f035fbae2e:0000000000000000:1"
time="2021-06-17T15:22:18Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:22:18Z" level=info msg="==----> initRegistryClient() span:52b299f035fbae2e:5c4b74e754218259:52b299f035fbae2e:1"
time="2021-06-17T15:22:18Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
{"level":"info","ts":1623943351.8362968,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623943351.8364553,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T15:22:38Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:22:38Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="52b299f035fbae2e:5c4b74e754218259:52b299f035fbae2e:1"
time="2021-06-17T15:22:38Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:22:38Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:22:38Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0008873c0 {member1.com}:0xc000887340 {member2.com}:0xc0008872c0]}"
time="2021-06-17T15:22:38Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:22:38Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:22:38Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:22:38Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:22:38Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:22:38Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:22:38Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:22:38Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:22:38Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:22:38Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:22:43Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:22:43Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:22:48Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:22:48Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:22:53Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:22:53Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:22:53Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:22:53Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:22:53Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="52b299f035fbae2e:5c4b74e754218259:52b299f035fbae2e:1"
2021/06/17 15:22:53 Reporting span 52b299f035fbae2e:5c4b74e754218259:52b299f035fbae2e:1
2021/06/17 15:22:53 Reporting span 52b299f035fbae2e:52b299f035fbae2e:0000000000000000:1
{"level":"info","ts":1623943373.7404091,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623943373.7404578,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623943373.7404857,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943373.7404988,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:22:53Z" level=info msg="==--> discovery.FindNetworkService() span:18e3eb53cb3de31a:18e3eb53cb3de31a:0000000000000000:1"
time="2021-06-17T15:22:53Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=18e3eb53cb3de31a:18e3eb53cb3de31a:0000000000000000:1"
time="2021-06-17T15:22:53Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=18e3eb53cb3de31a:18e3eb53cb3de31a:0000000000000000:1"
time="2021-06-17T15:22:53Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:22:53Z" level=info msg="==----> initRegistryClient() span:18e3eb53cb3de31a:42f23c97b3b01ab3:18e3eb53cb3de31a:1"
time="2021-06-17T15:22:53Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:22:53Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:22:53Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="18e3eb53cb3de31a:42f23c97b3b01ab3:18e3eb53cb3de31a:1"
time="2021-06-17T15:22:53Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:22:53Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:22:53Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0007ce140 {member1.com}:0xc0007ce0c0 {member2.com}:0xc0007ce040]}"
time="2021-06-17T15:22:53Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:22:53Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:22:53Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:22:53Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:22:53Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:22:53Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:22:53Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:22:53Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:22:53Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:22:53Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:22:58Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:22:58Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:23:03Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:23:03Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:23:03Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:23:03Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:23:03Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="18e3eb53cb3de31a:42f23c97b3b01ab3:18e3eb53cb3de31a:1"
2021/06/17 15:23:03 Reporting span 18e3eb53cb3de31a:42f23c97b3b01ab3:18e3eb53cb3de31a:1
{"level":"info","ts":1623943383.773596,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:23:03Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=18e3eb53cb3de31a:18e3eb53cb3de31a:0000000000000000:1"
time="2021-06-17T15:23:03Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=18e3eb53cb3de31a:18e3eb53cb3de31a:0000000000000000:1"
2021/06/17 15:23:03 Reporting span 18e3eb53cb3de31a:4900e6671ede3569:18e3eb53cb3de31a:1
time="2021-06-17T15:23:03Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=18e3eb53cb3de31a:18e3eb53cb3de31a:0000000000000000:1"
2021/06/17 15:23:03 Reporting span 18e3eb53cb3de31a:18e3eb53cb3de31a:0000000000000000:1
{"level":"info","ts":1623943383.7806828,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943383.7807336,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943383.7807682,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943383.7807808,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:23:03Z" level=info msg="==--> discovery.FindNetworkService() span:1f87e2c56f76747c:1f87e2c56f76747c:0000000000000000:1"
time="2021-06-17T15:23:03Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1f87e2c56f76747c:1f87e2c56f76747c:0000000000000000:1"
time="2021-06-17T15:23:03Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=1f87e2c56f76747c:1f87e2c56f76747c:0000000000000000:1"
time="2021-06-17T15:23:03Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:23:03Z" level=info msg="==----> initRegistryClient() span:1f87e2c56f76747c:1670c2cd5db2c1c8:1f87e2c56f76747c:1"
time="2021-06-17T15:23:03Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:23:13Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:23:13Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1f87e2c56f76747c:1670c2cd5db2c1c8:1f87e2c56f76747c:1"
time="2021-06-17T15:23:13Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:23:13Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:23:13Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000358b80 {member1.com}:0xc000358c00 {member2.com}:0xc000358b00]}"
time="2021-06-17T15:23:13Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:23:13Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:23:13Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:23:13Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:23:13Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:23:13Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:23:13Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:23:13Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:23:13Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:23:13Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:23:18Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:23:18Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:23:23Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:23:23Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:23:28Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:23:28Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:23:28Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:23:33Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:23:33Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="1f87e2c56f76747c:1670c2cd5db2c1c8:1f87e2c56f76747c:1"
2021/06/17 15:23:33 Reporting span 1f87e2c56f76747c:1670c2cd5db2c1c8:1f87e2c56f76747c:1
2021/06/17 15:23:33 Reporting span 1f87e2c56f76747c:1f87e2c56f76747c:0000000000000000:1
{"level":"info","ts":1623943413.7814188,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623943413.7814844,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623943413.7815032,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943413.7815154,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:23:33Z" level=info msg="==--> discovery.FindNetworkService() span:5218964f00e069e5:5218964f00e069e5:0000000000000000:1"
time="2021-06-17T15:23:33Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=5218964f00e069e5:5218964f00e069e5:0000000000000000:1"
time="2021-06-17T15:23:33Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=5218964f00e069e5:5218964f00e069e5:0000000000000000:1"
time="2021-06-17T15:23:33Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:23:33Z" level=info msg="==----> initRegistryClient() span:5218964f00e069e5:15de85a6af77022e:5218964f00e069e5:1"
time="2021-06-17T15:23:33Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:23:33Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:23:33Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5218964f00e069e5:15de85a6af77022e:5218964f00e069e5:1"
time="2021-06-17T15:23:33Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:23:33Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:23:33Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000358700 {member1.com}:0xc000358780 {member2.com}:0xc000358680]}"
time="2021-06-17T15:23:33Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:23:33Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:23:33Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:23:33Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:23:33Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:23:33Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:23:33Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:23:33Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:23:33Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:23:33Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:23:38Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:23:38Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:23:43Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:23:43Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:23:43Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:23:43Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:23:43Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="5218964f00e069e5:15de85a6af77022e:5218964f00e069e5:1"
2021/06/17 15:23:43 Reporting span 5218964f00e069e5:15de85a6af77022e:5218964f00e069e5:1
{"level":"info","ts":1623943423.8093996,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:23:43Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5218964f00e069e5:5218964f00e069e5:0000000000000000:1"
time="2021-06-17T15:23:43Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=5218964f00e069e5:5218964f00e069e5:0000000000000000:1"
2021/06/17 15:23:43 Reporting span 5218964f00e069e5:0905300a1da87d6d:5218964f00e069e5:1
time="2021-06-17T15:23:43Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5218964f00e069e5:5218964f00e069e5:0000000000000000:1"
2021/06/17 15:23:43 Reporting span 5218964f00e069e5:5218964f00e069e5:0000000000000000:1
{"level":"info","ts":1623943423.8146365,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943423.8146672,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943423.8146791,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943423.8147252,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:23:43Z" level=info msg="==--> discovery.FindNetworkService() span:6cd57d1330ad5b82:6cd57d1330ad5b82:0000000000000000:1"
time="2021-06-17T15:23:43Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6cd57d1330ad5b82:6cd57d1330ad5b82:0000000000000000:1"
time="2021-06-17T15:23:43Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=6cd57d1330ad5b82:6cd57d1330ad5b82:0000000000000000:1"
time="2021-06-17T15:23:43Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:23:43Z" level=info msg="==----> initRegistryClient() span:6cd57d1330ad5b82:6ea5fd9e724b2915:6cd57d1330ad5b82:1"
time="2021-06-17T15:23:43Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:23:43Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:23:43Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6cd57d1330ad5b82:6ea5fd9e724b2915:6cd57d1330ad5b82:1"
time="2021-06-17T15:23:43Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:23:43Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:23:43Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000889740 {member1.com}:0xc000889940 {member2.com}:0xc0008896c0]}"
time="2021-06-17T15:23:43Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:23:43Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:23:43Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:23:43Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:23:43Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:23:43Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:23:43Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:23:43Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:23:43Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:23:43Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:23:43Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:23:43Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:23:43Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="6cd57d1330ad5b82:6ea5fd9e724b2915:6cd57d1330ad5b82:1"
2021/06/17 15:23:43 Reporting span 6cd57d1330ad5b82:6ea5fd9e724b2915:6cd57d1330ad5b82:1
{"level":"info","ts":1623943423.858871,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:23:43Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6cd57d1330ad5b82:6cd57d1330ad5b82:0000000000000000:1"
time="2021-06-17T15:23:43Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=6cd57d1330ad5b82:6cd57d1330ad5b82:0000000000000000:1"
2021/06/17 15:23:43 Reporting span 6cd57d1330ad5b82:6e23da1daa51c717:6cd57d1330ad5b82:1
time="2021-06-17T15:23:43Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6cd57d1330ad5b82:6cd57d1330ad5b82:0000000000000000:1"
2021/06/17 15:23:43 Reporting span 6cd57d1330ad5b82:6cd57d1330ad5b82:0000000000000000:1
{"level":"info","ts":1623943423.8618932,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623943423.8621714,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623943423.862201,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943423.8622124,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943423.8622234,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623943423.862253,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943423.8622868,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943423.8623214,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943423.8623557,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943423.862393,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943423.8624423,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943423.8624675,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943423.8624773,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943423.8624861,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943423.862494,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943423.8625174,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943423.862527,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943423.8625355,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623943423.8625607,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943423.8625717,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943423.8625867,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623943423.8626091,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943423.862619,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:23:43Z" level=info msg="==--> discovery.FindNetworkService() span:5707758bf312fb36:5707758bf312fb36:0000000000000000:1"
time="2021-06-17T15:23:43Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=5707758bf312fb36:5707758bf312fb36:0000000000000000:1"
time="2021-06-17T15:23:43Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=5707758bf312fb36:5707758bf312fb36:0000000000000000:1"
time="2021-06-17T15:23:43Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:23:43Z" level=info msg="==----> initRegistryClient() span:5707758bf312fb36:133970ff513c77bb:5707758bf312fb36:1"
time="2021-06-17T15:23:43Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:23:43Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:23:43Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5707758bf312fb36:133970ff513c77bb:5707758bf312fb36:1"
time="2021-06-17T15:23:43Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:23:43Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:23:43Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ee140 {member1.com}:0xc0004ee1c0 {member2.com}:0xc0004ee0c0]}"
time="2021-06-17T15:23:43Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:23:43Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:23:43Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:23:43Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:23:43Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:23:43Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:23:43Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:23:43Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:23:43Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:23:43Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:23:48Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:23:48Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:23:53Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:23:53Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:23:53Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:23:53Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:23:53Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="5707758bf312fb36:133970ff513c77bb:5707758bf312fb36:1"
2021/06/17 15:23:53 Reporting span 5707758bf312fb36:133970ff513c77bb:5707758bf312fb36:1
{"level":"info","ts":1623943433.8911588,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:23:53Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5707758bf312fb36:5707758bf312fb36:0000000000000000:1"
time="2021-06-17T15:23:53Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=5707758bf312fb36:5707758bf312fb36:0000000000000000:1"
2021/06/17 15:23:53 Reporting span 5707758bf312fb36:0a253d1351396187:5707758bf312fb36:1
time="2021-06-17T15:23:53Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5707758bf312fb36:5707758bf312fb36:0000000000000000:1"
2021/06/17 15:23:53 Reporting span 5707758bf312fb36:5707758bf312fb36:0000000000000000:1
{"level":"info","ts":1623943433.898089,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943433.8981311,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943433.8982444,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943433.898285,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:23:53Z" level=info msg="==--> discovery.FindNetworkService() span:2e11745089f33180:2e11745089f33180:0000000000000000:1"
time="2021-06-17T15:23:53Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2e11745089f33180:2e11745089f33180:0000000000000000:1"
time="2021-06-17T15:23:53Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=2e11745089f33180:2e11745089f33180:0000000000000000:1"
time="2021-06-17T15:23:53Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:23:53Z" level=info msg="==----> initRegistryClient() span:2e11745089f33180:58b956bcfbc49818:2e11745089f33180:1"
time="2021-06-17T15:23:53Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:24:03Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:24:03Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2e11745089f33180:58b956bcfbc49818:2e11745089f33180:1"
time="2021-06-17T15:24:03Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:24:03Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:24:03Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000889500 {member1.com}:0xc000889580 {member2.com}:0xc000889440]}"
time="2021-06-17T15:24:03Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:24:03Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:24:03Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:24:03Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:24:03Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:24:03Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:24:03Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:24:03Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:24:03Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:24:03Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:24:08Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:24:08Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:24:13Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:24:13Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:24:18Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:24:18Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:24:18Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:24:23Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:24:23Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="2e11745089f33180:58b956bcfbc49818:2e11745089f33180:1"
2021/06/17 15:24:23 Reporting span 2e11745089f33180:58b956bcfbc49818:2e11745089f33180:1
2021/06/17 15:24:23 Reporting span 2e11745089f33180:2e11745089f33180:0000000000000000:1
{"level":"info","ts":1623943463.8992078,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623943463.9094455,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623943463.9095042,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943463.9095178,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:24:23Z" level=info msg="==--> discovery.FindNetworkService() span:678abebc44119acb:678abebc44119acb:0000000000000000:1"
time="2021-06-17T15:24:23Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=678abebc44119acb:678abebc44119acb:0000000000000000:1"
time="2021-06-17T15:24:23Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=678abebc44119acb:678abebc44119acb:0000000000000000:1"
time="2021-06-17T15:24:23Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:24:23Z" level=info msg="==----> initRegistryClient() span:678abebc44119acb:68f291c2a47d6774:678abebc44119acb:1"
time="2021-06-17T15:24:23Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:24:23Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:24:23Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="678abebc44119acb:68f291c2a47d6774:678abebc44119acb:1"
time="2021-06-17T15:24:23Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:24:23Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:24:23Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000137780 {member1.com}:0xc000137800 {member2.com}:0xc000137700]}"
time="2021-06-17T15:24:23Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:24:23Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:24:23Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:24:23Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:24:23Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:24:23Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:24:23Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:24:23Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:24:23Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:24:23Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:24:28Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:24:28Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
{"level":"info","ts":1623943471.836624,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623943471.8368669,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T15:24:33Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:24:33Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:24:33Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:24:33Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:24:33Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="678abebc44119acb:68f291c2a47d6774:678abebc44119acb:1"
2021/06/17 15:24:33 Reporting span 678abebc44119acb:68f291c2a47d6774:678abebc44119acb:1
{"level":"info","ts":1623943473.9377728,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:24:33Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=678abebc44119acb:678abebc44119acb:0000000000000000:1"
time="2021-06-17T15:24:33Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=678abebc44119acb:678abebc44119acb:0000000000000000:1"
2021/06/17 15:24:33 Reporting span 678abebc44119acb:4aafcea9c52b94ab:678abebc44119acb:1
time="2021-06-17T15:24:33Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=678abebc44119acb:678abebc44119acb:0000000000000000:1"
2021/06/17 15:24:33 Reporting span 678abebc44119acb:678abebc44119acb:0000000000000000:1
{"level":"info","ts":1623943473.942124,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943473.9421601,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943473.942169,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943473.9421976,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:24:33Z" level=info msg="==--> discovery.FindNetworkService() span:3191856feb211e21:3191856feb211e21:0000000000000000:1"
time="2021-06-17T15:24:33Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3191856feb211e21:3191856feb211e21:0000000000000000:1"
time="2021-06-17T15:24:33Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=3191856feb211e21:3191856feb211e21:0000000000000000:1"
time="2021-06-17T15:24:33Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:24:33Z" level=info msg="==----> initRegistryClient() span:3191856feb211e21:46d4eac8323323e7:3191856feb211e21:1"
time="2021-06-17T15:24:33Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:24:33Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:24:33Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3191856feb211e21:46d4eac8323323e7:3191856feb211e21:1"
time="2021-06-17T15:24:33Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:24:33Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:24:33Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000889380 {member1.com}:0xc000889300 {member2.com}:0xc000889280]}"
time="2021-06-17T15:24:33Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:24:33Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:24:33Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:24:33Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:24:33Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:24:33Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:24:33Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:24:33Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:24:33Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:24:33Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:24:33Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:24:33Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:24:33Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="3191856feb211e21:46d4eac8323323e7:3191856feb211e21:1"
2021/06/17 15:24:33 Reporting span 3191856feb211e21:46d4eac8323323e7:3191856feb211e21:1
{"level":"info","ts":1623943473.9768033,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:24:33Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=3191856feb211e21:3191856feb211e21:0000000000000000:1"
time="2021-06-17T15:24:33Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=3191856feb211e21:3191856feb211e21:0000000000000000:1"
2021/06/17 15:24:33 Reporting span 3191856feb211e21:4622d82b9fd6024d:3191856feb211e21:1
time="2021-06-17T15:24:33Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=3191856feb211e21:3191856feb211e21:0000000000000000:1"
2021/06/17 15:24:33 Reporting span 3191856feb211e21:3191856feb211e21:0000000000000000:1
{"level":"info","ts":1623943473.9790907,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623943473.9791138,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623943473.9791248,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943473.9791505,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943473.9791627,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623943473.9791868,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943473.9791934,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943473.9791994,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943473.9792223,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943473.9792325,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943473.9792593,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943473.97927,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943473.9792755,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943473.9792812,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943473.9792886,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943473.9792967,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943473.9793053,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943473.9793293,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623943473.9793391,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943473.979347,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943473.9793627,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623943473.979372,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943473.979379,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:24:33Z" level=info msg="==--> discovery.FindNetworkService() span:7e88311deeffa4fb:7e88311deeffa4fb:0000000000000000:1"
time="2021-06-17T15:24:33Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7e88311deeffa4fb:7e88311deeffa4fb:0000000000000000:1"
time="2021-06-17T15:24:33Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=7e88311deeffa4fb:7e88311deeffa4fb:0000000000000000:1"
time="2021-06-17T15:24:33Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:24:33Z" level=info msg="==----> initRegistryClient() span:7e88311deeffa4fb:5f72141226468173:7e88311deeffa4fb:1"
time="2021-06-17T15:24:33Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:24:33Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:24:33Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7e88311deeffa4fb:5f72141226468173:7e88311deeffa4fb:1"
time="2021-06-17T15:24:33Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:24:33Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:24:33Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000137380 {member1.com}:0xc000137300 {member2.com}:0xc000137080]}"
time="2021-06-17T15:24:33Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:24:33Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:24:33Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:24:33Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:24:33Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:24:33Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:24:33Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:24:33Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:24:33Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:24:33Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:24:38Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:24:38Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:24:43Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:24:43Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:24:44Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:24:44Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:24:44Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="7e88311deeffa4fb:5f72141226468173:7e88311deeffa4fb:1"
2021/06/17 15:24:44 Reporting span 7e88311deeffa4fb:5f72141226468173:7e88311deeffa4fb:1
{"level":"info","ts":1623943484.0071213,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:24:44Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7e88311deeffa4fb:7e88311deeffa4fb:0000000000000000:1"
time="2021-06-17T15:24:44Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=7e88311deeffa4fb:7e88311deeffa4fb:0000000000000000:1"
2021/06/17 15:24:44 Reporting span 7e88311deeffa4fb:02a6949d86da9271:7e88311deeffa4fb:1
time="2021-06-17T15:24:44Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7e88311deeffa4fb:7e88311deeffa4fb:0000000000000000:1"
2021/06/17 15:24:44 Reporting span 7e88311deeffa4fb:7e88311deeffa4fb:0000000000000000:1
{"level":"info","ts":1623943484.0125403,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943484.0131598,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943484.0131893,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943484.0131989,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:24:44Z" level=info msg="==--> discovery.FindNetworkService() span:2d3b6c6d129328d3:2d3b6c6d129328d3:0000000000000000:1"
time="2021-06-17T15:24:44Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2d3b6c6d129328d3:2d3b6c6d129328d3:0000000000000000:1"
time="2021-06-17T15:24:44Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=2d3b6c6d129328d3:2d3b6c6d129328d3:0000000000000000:1"
time="2021-06-17T15:24:44Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:24:44Z" level=info msg="==----> initRegistryClient() span:2d3b6c6d129328d3:4ca18d5e8504a71b:2d3b6c6d129328d3:1"
time="2021-06-17T15:24:44Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:24:44Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:24:44Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2d3b6c6d129328d3:4ca18d5e8504a71b:2d3b6c6d129328d3:1"
time="2021-06-17T15:24:44Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:24:44Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:24:44Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000bad80 {member1.com}:0xc0000bae00 {member2.com}:0xc0000bad00]}"
time="2021-06-17T15:24:44Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:24:44Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:24:44Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:24:44Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:24:44Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:24:44Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:24:44Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:24:44Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:24:44Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:24:44Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:24:44Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:24:44Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:24:44Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="2d3b6c6d129328d3:4ca18d5e8504a71b:2d3b6c6d129328d3:1"
2021/06/17 15:24:44 Reporting span 2d3b6c6d129328d3:4ca18d5e8504a71b:2d3b6c6d129328d3:1
{"level":"info","ts":1623943484.050278,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:24:44Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2d3b6c6d129328d3:2d3b6c6d129328d3:0000000000000000:1"
time="2021-06-17T15:24:44Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=2d3b6c6d129328d3:2d3b6c6d129328d3:0000000000000000:1"
2021/06/17 15:24:44 Reporting span 2d3b6c6d129328d3:7ee6dd7e96b446b9:2d3b6c6d129328d3:1
time="2021-06-17T15:24:44Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2d3b6c6d129328d3:2d3b6c6d129328d3:0000000000000000:1"
2021/06/17 15:24:44 Reporting span 2d3b6c6d129328d3:2d3b6c6d129328d3:0000000000000000:1
{"level":"info","ts":1623943484.0528803,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623943484.0529203,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623943484.0529318,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943484.0529585,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943484.0529706,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623943484.0529978,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943484.0530086,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943484.0531557,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943484.05338,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943484.053439,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943484.053546,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943484.0536253,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943484.0536625,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943484.0536942,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943484.053704,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943484.0537307,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943484.0537407,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943484.0537496,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623943484.0537758,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943484.053786,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943484.053803,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623943484.053812,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943484.0538213,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:24:44Z" level=info msg="==--> discovery.FindNetworkService() span:00a3c225423c0dd9:00a3c225423c0dd9:0000000000000000:1"
time="2021-06-17T15:24:44Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=00a3c225423c0dd9:00a3c225423c0dd9:0000000000000000:1"
time="2021-06-17T15:24:44Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=00a3c225423c0dd9:00a3c225423c0dd9:0000000000000000:1"
time="2021-06-17T15:24:44Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:24:44Z" level=info msg="==----> initRegistryClient() span:00a3c225423c0dd9:6bff50cba39dc26d:00a3c225423c0dd9:1"
time="2021-06-17T15:24:44Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:24:44Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:24:44Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="00a3c225423c0dd9:6bff50cba39dc26d:00a3c225423c0dd9:1"
time="2021-06-17T15:24:44Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:24:44Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:24:44Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000183fc0 {member1.com}:0xc000183f40 {member2.com}:0xc000183ec0]}"
time="2021-06-17T15:24:44Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:24:44Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:24:44Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:24:44Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:24:44Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:24:44Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:24:44Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:24:44Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:24:44Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:24:44Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:24:49Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:24:49Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:24:54Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:24:54Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:24:54Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:24:54Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:24:54Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="00a3c225423c0dd9:6bff50cba39dc26d:00a3c225423c0dd9:1"
2021/06/17 15:24:54 Reporting span 00a3c225423c0dd9:6bff50cba39dc26d:00a3c225423c0dd9:1
{"level":"info","ts":1623943494.0822506,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:24:54Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=00a3c225423c0dd9:00a3c225423c0dd9:0000000000000000:1"
time="2021-06-17T15:24:54Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=00a3c225423c0dd9:00a3c225423c0dd9:0000000000000000:1"
2021/06/17 15:24:54 Reporting span 00a3c225423c0dd9:3fb170d9bc550c0e:00a3c225423c0dd9:1
time="2021-06-17T15:24:54Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=00a3c225423c0dd9:00a3c225423c0dd9:0000000000000000:1"
2021/06/17 15:24:54 Reporting span 00a3c225423c0dd9:00a3c225423c0dd9:0000000000000000:1
{"level":"info","ts":1623943494.0877447,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943494.0877812,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943494.0877929,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943494.0878248,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:24:54Z" level=info msg="==--> discovery.FindNetworkService() span:11ed1b6645520c7e:11ed1b6645520c7e:0000000000000000:1"
time="2021-06-17T15:24:54Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=11ed1b6645520c7e:11ed1b6645520c7e:0000000000000000:1"
time="2021-06-17T15:24:54Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=11ed1b6645520c7e:11ed1b6645520c7e:0000000000000000:1"
time="2021-06-17T15:24:54Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:24:54Z" level=info msg="==----> initRegistryClient() span:11ed1b6645520c7e:0aa818fefd6c91c9:11ed1b6645520c7e:1"
time="2021-06-17T15:24:54Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:25:04Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:25:04Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="11ed1b6645520c7e:0aa818fefd6c91c9:11ed1b6645520c7e:1"
time="2021-06-17T15:25:04Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:25:04Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:25:04Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0007ced40 {member1.com}:0xc0007cedc0 {member2.com}:0xc0007cecc0]}"
time="2021-06-17T15:25:04Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:25:04Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:25:04Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:25:04Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:25:04Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:25:04Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:25:04Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:25:04Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:25:04Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:25:04Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:25:09Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:25:09Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:25:14Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:25:14Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:25:19Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:25:19Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:25:19Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:25:24Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:25:24Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="11ed1b6645520c7e:0aa818fefd6c91c9:11ed1b6645520c7e:1"
2021/06/17 15:25:24 Reporting span 11ed1b6645520c7e:0aa818fefd6c91c9:11ed1b6645520c7e:1
2021/06/17 15:25:24 Reporting span 11ed1b6645520c7e:11ed1b6645520c7e:0000000000000000:1
{"level":"info","ts":1623943524.0885496,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623943524.0936692,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623943524.093714,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943524.0937278,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:25:24Z" level=info msg="==--> discovery.FindNetworkService() span:31f07c261c639c39:31f07c261c639c39:0000000000000000:1"
time="2021-06-17T15:25:24Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=31f07c261c639c39:31f07c261c639c39:0000000000000000:1"
time="2021-06-17T15:25:24Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=31f07c261c639c39:31f07c261c639c39:0000000000000000:1"
time="2021-06-17T15:25:24Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:25:24Z" level=info msg="==----> initRegistryClient() span:31f07c261c639c39:7d29cd21b3ad0297:31f07c261c639c39:1"
time="2021-06-17T15:25:24Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:25:24Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:25:24Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="31f07c261c639c39:7d29cd21b3ad0297:31f07c261c639c39:1"
time="2021-06-17T15:25:24Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:25:24Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:25:24Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000359340 {member1.com}:0xc0003593c0 {member2.com}:0xc000359240]}"
time="2021-06-17T15:25:24Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:25:24Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:25:24Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:25:24Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:25:24Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:25:24Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:25:24Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:25:24Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:25:24Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:25:24Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:25:29Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:25:29Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:25:34Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:25:34Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:25:34Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:25:34Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:25:34Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="31f07c261c639c39:7d29cd21b3ad0297:31f07c261c639c39:1"
2021/06/17 15:25:34 Reporting span 31f07c261c639c39:7d29cd21b3ad0297:31f07c261c639c39:1
{"level":"info","ts":1623943534.1314824,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:25:34Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=31f07c261c639c39:31f07c261c639c39:0000000000000000:1"
time="2021-06-17T15:25:34Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=31f07c261c639c39:31f07c261c639c39:0000000000000000:1"
2021/06/17 15:25:34 Reporting span 31f07c261c639c39:4861d1ad8dfa60f8:31f07c261c639c39:1
time="2021-06-17T15:25:34Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=31f07c261c639c39:31f07c261c639c39:0000000000000000:1"
2021/06/17 15:25:34 Reporting span 31f07c261c639c39:31f07c261c639c39:0000000000000000:1
{"level":"info","ts":1623943534.1381903,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943534.1383042,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943534.1383965,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943534.138447,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:25:34Z" level=info msg="==--> discovery.FindNetworkService() span:743467b476d373cb:743467b476d373cb:0000000000000000:1"
time="2021-06-17T15:25:34Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=743467b476d373cb:743467b476d373cb:0000000000000000:1"
time="2021-06-17T15:25:34Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=743467b476d373cb:743467b476d373cb:0000000000000000:1"
time="2021-06-17T15:25:34Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:25:34Z" level=info msg="==----> initRegistryClient() span:743467b476d373cb:700caf7e0e3a3969:743467b476d373cb:1"
time="2021-06-17T15:25:34Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:25:44Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:25:44Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="743467b476d373cb:700caf7e0e3a3969:743467b476d373cb:1"
time="2021-06-17T15:25:44Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:25:44Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:25:44Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0003584c0 {member1.com}:0xc000358540 {member2.com}:0xc000358440]}"
time="2021-06-17T15:25:44Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:25:44Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:25:44Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:25:44Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:25:44Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:25:44Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:25:44Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:25:44Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:25:44Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:25:44Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:25:49Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:25:49Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:25:54Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:25:54Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:25:59Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:25:59Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:25:59Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:26:04Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:26:04Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="743467b476d373cb:700caf7e0e3a3969:743467b476d373cb:1"
2021/06/17 15:26:04 Reporting span 743467b476d373cb:700caf7e0e3a3969:743467b476d373cb:1
2021/06/17 15:26:04 Reporting span 743467b476d373cb:743467b476d373cb:0000000000000000:1
{"level":"info","ts":1623943564.1407316,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623943564.1523705,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623943564.1524484,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943564.1524606,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:26:04Z" level=info msg="==--> discovery.FindNetworkService() span:19925ba7a01d091c:19925ba7a01d091c:0000000000000000:1"
time="2021-06-17T15:26:04Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=19925ba7a01d091c:19925ba7a01d091c:0000000000000000:1"
time="2021-06-17T15:26:04Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=19925ba7a01d091c:19925ba7a01d091c:0000000000000000:1"
time="2021-06-17T15:26:04Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:26:04Z" level=info msg="==----> initRegistryClient() span:19925ba7a01d091c:023c31f1c31c4dd5:19925ba7a01d091c:1"
time="2021-06-17T15:26:04Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:26:04Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:26:04Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="19925ba7a01d091c:023c31f1c31c4dd5:19925ba7a01d091c:1"
time="2021-06-17T15:26:04Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:26:04Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:26:04Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000359600 {member1.com}:0xc000359680 {member2.com}:0xc000359580]}"
time="2021-06-17T15:26:04Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:26:04Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:26:04Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:26:04Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:26:04Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:26:04Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:26:04Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:26:04Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:26:04Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:26:04Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:26:09Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:26:09Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:26:14Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:26:14Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:26:14Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:26:14Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:26:14Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="19925ba7a01d091c:023c31f1c31c4dd5:19925ba7a01d091c:1"
2021/06/17 15:26:14 Reporting span 19925ba7a01d091c:023c31f1c31c4dd5:19925ba7a01d091c:1
{"level":"info","ts":1623943574.1870155,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:26:14Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=19925ba7a01d091c:19925ba7a01d091c:0000000000000000:1"
time="2021-06-17T15:26:14Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=19925ba7a01d091c:19925ba7a01d091c:0000000000000000:1"
2021/06/17 15:26:14 Reporting span 19925ba7a01d091c:1cb16105ea6f5f5a:19925ba7a01d091c:1
time="2021-06-17T15:26:14Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=19925ba7a01d091c:19925ba7a01d091c:0000000000000000:1"
2021/06/17 15:26:14 Reporting span 19925ba7a01d091c:19925ba7a01d091c:0000000000000000:1
{"level":"info","ts":1623943574.1926773,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943574.1927094,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943574.1927495,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943574.192822,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:26:14Z" level=info msg="==--> discovery.FindNetworkService() span:16ece933339079e5:16ece933339079e5:0000000000000000:1"
time="2021-06-17T15:26:14Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=16ece933339079e5:16ece933339079e5:0000000000000000:1"
time="2021-06-17T15:26:14Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=16ece933339079e5:16ece933339079e5:0000000000000000:1"
time="2021-06-17T15:26:14Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:26:14Z" level=info msg="==----> initRegistryClient() span:16ece933339079e5:28ec925461bdcf22:16ece933339079e5:1"
time="2021-06-17T15:26:14Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
{"level":"info","ts":1623943591.8370318,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623943591.8371594,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T15:26:34Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:26:34Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="16ece933339079e5:28ec925461bdcf22:16ece933339079e5:1"
time="2021-06-17T15:26:34Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:26:34Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:26:34Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00078de00 {member1.com}:0xc00078de80 {member2.com}:0xc00078dd80]}"
time="2021-06-17T15:26:34Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:26:34Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:26:34Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:26:34Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:26:34Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:26:34Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:26:34Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:26:34Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:26:34Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:26:34Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:26:39Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:26:39Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:26:44Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:26:44Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:26:49Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:26:49Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:26:49Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:26:49Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:26:49Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="16ece933339079e5:28ec925461bdcf22:16ece933339079e5:1"
2021/06/17 15:26:49 Reporting span 16ece933339079e5:28ec925461bdcf22:16ece933339079e5:1
2021/06/17 15:26:49 Reporting span 16ece933339079e5:16ece933339079e5:0000000000000000:1
{"level":"info","ts":1623943609.2153897,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623943609.21544,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623943609.2161067,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943609.2161589,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:26:49Z" level=info msg="==--> discovery.FindNetworkService() span:17c9f596ae538f58:17c9f596ae538f58:0000000000000000:1"
time="2021-06-17T15:26:49Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=17c9f596ae538f58:17c9f596ae538f58:0000000000000000:1"
time="2021-06-17T15:26:49Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=17c9f596ae538f58:17c9f596ae538f58:0000000000000000:1"
time="2021-06-17T15:26:49Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:26:49Z" level=info msg="==----> initRegistryClient() span:17c9f596ae538f58:06e03f5c3bfa8fac:17c9f596ae538f58:1"
time="2021-06-17T15:26:49Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:26:49Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:26:49Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="17c9f596ae538f58:06e03f5c3bfa8fac:17c9f596ae538f58:1"
time="2021-06-17T15:26:49Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:26:49Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:26:49Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001364c0 {member1.com}:0xc000136680 {member2.com}:0xc000136340]}"
time="2021-06-17T15:26:49Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:26:49Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:26:49Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:26:49Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:26:49Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:26:49Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:26:49Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:26:49Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:26:49Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:26:49Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:26:54Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:26:54Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:26:59Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:26:59Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:26:59Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:26:59Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:26:59Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="17c9f596ae538f58:06e03f5c3bfa8fac:17c9f596ae538f58:1"
2021/06/17 15:26:59 Reporting span 17c9f596ae538f58:06e03f5c3bfa8fac:17c9f596ae538f58:1
{"level":"info","ts":1623943619.2495425,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:26:59Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=17c9f596ae538f58:17c9f596ae538f58:0000000000000000:1"
time="2021-06-17T15:26:59Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=17c9f596ae538f58:17c9f596ae538f58:0000000000000000:1"
2021/06/17 15:26:59 Reporting span 17c9f596ae538f58:295f836ba5fee220:17c9f596ae538f58:1
time="2021-06-17T15:26:59Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=17c9f596ae538f58:17c9f596ae538f58:0000000000000000:1"
2021/06/17 15:26:59 Reporting span 17c9f596ae538f58:17c9f596ae538f58:0000000000000000:1
{"level":"info","ts":1623943619.2550077,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943619.2550676,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943619.255081,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943619.2550905,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:26:59Z" level=info msg="==--> discovery.FindNetworkService() span:46638c1c88103700:46638c1c88103700:0000000000000000:1"
time="2021-06-17T15:26:59Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=46638c1c88103700:46638c1c88103700:0000000000000000:1"
time="2021-06-17T15:26:59Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=46638c1c88103700:46638c1c88103700:0000000000000000:1"
time="2021-06-17T15:26:59Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:26:59Z" level=info msg="==----> initRegistryClient() span:46638c1c88103700:2abc70ef23f51843:46638c1c88103700:1"
time="2021-06-17T15:26:59Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:26:59Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:26:59Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="46638c1c88103700:2abc70ef23f51843:46638c1c88103700:1"
time="2021-06-17T15:26:59Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:26:59Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:26:59Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000889340 {member1.com}:0xc0008893c0 {member2.com}:0xc0008892c0]}"
time="2021-06-17T15:26:59Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:26:59Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:26:59Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:26:59Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:26:59Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:26:59Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:26:59Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:26:59Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:26:59Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:26:59Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:26:59Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:26:59Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:26:59Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="46638c1c88103700:2abc70ef23f51843:46638c1c88103700:1"
2021/06/17 15:26:59 Reporting span 46638c1c88103700:2abc70ef23f51843:46638c1c88103700:1
{"level":"info","ts":1623943619.3072479,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:26:59Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=46638c1c88103700:46638c1c88103700:0000000000000000:1"
time="2021-06-17T15:26:59Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=46638c1c88103700:46638c1c88103700:0000000000000000:1"
2021/06/17 15:26:59 Reporting span 46638c1c88103700:1d20781e5ee5cda1:46638c1c88103700:1
time="2021-06-17T15:26:59Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=46638c1c88103700:46638c1c88103700:0000000000000000:1"
2021/06/17 15:26:59 Reporting span 46638c1c88103700:46638c1c88103700:0000000000000000:1
{"level":"info","ts":1623943619.3103502,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623943619.310391,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623943619.3104026,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943619.310425,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943619.3104358,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623943619.3104646,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943619.310475,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943619.3104842,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943619.310493,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943619.3105028,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943619.3105125,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943619.310522,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943619.3105302,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943619.3105385,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943619.310547,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943619.3105605,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943619.3105695,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943619.3105786,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623943619.3106027,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943619.3106132,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943619.310629,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623943619.3106377,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943619.3106465,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:26:59Z" level=info msg="==--> discovery.FindNetworkService() span:2a47ea9569267ee1:2a47ea9569267ee1:0000000000000000:1"
time="2021-06-17T15:26:59Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2a47ea9569267ee1:2a47ea9569267ee1:0000000000000000:1"
time="2021-06-17T15:26:59Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=2a47ea9569267ee1:2a47ea9569267ee1:0000000000000000:1"
time="2021-06-17T15:26:59Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:26:59Z" level=info msg="==----> initRegistryClient() span:2a47ea9569267ee1:4380c014fa67279d:2a47ea9569267ee1:1"
time="2021-06-17T15:26:59Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:26:59Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:26:59Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2a47ea9569267ee1:4380c014fa67279d:2a47ea9569267ee1:1"
time="2021-06-17T15:26:59Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:26:59Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:26:59Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0008899c0 {member1.com}:0xc000889a40 {member2.com}:0xc000889940]}"
time="2021-06-17T15:26:59Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:26:59Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:26:59Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:26:59Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:26:59Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:26:59Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:26:59Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:26:59Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:26:59Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:26:59Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:27:04Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:27:04Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:27:09Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:27:09Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:27:09Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:27:09Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:27:09Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="2a47ea9569267ee1:4380c014fa67279d:2a47ea9569267ee1:1"
2021/06/17 15:27:09 Reporting span 2a47ea9569267ee1:4380c014fa67279d:2a47ea9569267ee1:1
{"level":"info","ts":1623943629.3420813,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:27:09Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2a47ea9569267ee1:2a47ea9569267ee1:0000000000000000:1"
time="2021-06-17T15:27:09Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=2a47ea9569267ee1:2a47ea9569267ee1:0000000000000000:1"
2021/06/17 15:27:09 Reporting span 2a47ea9569267ee1:21a9c1abcfa8e551:2a47ea9569267ee1:1
time="2021-06-17T15:27:09Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2a47ea9569267ee1:2a47ea9569267ee1:0000000000000000:1"
2021/06/17 15:27:09 Reporting span 2a47ea9569267ee1:2a47ea9569267ee1:0000000000000000:1
{"level":"info","ts":1623943629.3467104,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943629.3468719,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943629.3468878,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943629.3468997,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:27:09Z" level=info msg="==--> discovery.FindNetworkService() span:149fcd50b2b956e1:149fcd50b2b956e1:0000000000000000:1"
time="2021-06-17T15:27:09Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=149fcd50b2b956e1:149fcd50b2b956e1:0000000000000000:1"
time="2021-06-17T15:27:09Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=149fcd50b2b956e1:149fcd50b2b956e1:0000000000000000:1"
time="2021-06-17T15:27:09Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:27:09Z" level=info msg="==----> initRegistryClient() span:149fcd50b2b956e1:4ca6ace60fc0639e:149fcd50b2b956e1:1"
time="2021-06-17T15:27:09Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:27:09Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:27:09Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="149fcd50b2b956e1:4ca6ace60fc0639e:149fcd50b2b956e1:1"
time="2021-06-17T15:27:09Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:27:09Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:27:09Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000359340 {member1.com}:0xc0003593c0 {member2.com}:0xc000359240]}"
time="2021-06-17T15:27:09Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:27:09Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:27:09Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:27:09Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:27:09Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:27:09Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:27:09Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:27:09Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:27:09Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:27:09Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:27:09Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:27:09Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:27:09Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="149fcd50b2b956e1:4ca6ace60fc0639e:149fcd50b2b956e1:1"
2021/06/17 15:27:09 Reporting span 149fcd50b2b956e1:4ca6ace60fc0639e:149fcd50b2b956e1:1
{"level":"info","ts":1623943629.383273,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:27:09Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=149fcd50b2b956e1:149fcd50b2b956e1:0000000000000000:1"
time="2021-06-17T15:27:09Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=149fcd50b2b956e1:149fcd50b2b956e1:0000000000000000:1"
2021/06/17 15:27:09 Reporting span 149fcd50b2b956e1:19fc0213457828e2:149fcd50b2b956e1:1
time="2021-06-17T15:27:09Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=149fcd50b2b956e1:149fcd50b2b956e1:0000000000000000:1"
2021/06/17 15:27:09 Reporting span 149fcd50b2b956e1:149fcd50b2b956e1:0000000000000000:1
{"level":"info","ts":1623943629.385831,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623943629.3858755,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623943629.3858888,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943629.3859146,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943629.3859274,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623943629.3859396,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943629.385949,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943629.3859575,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943629.3859665,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943629.3859763,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943629.3859925,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943629.3860016,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943629.3860142,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943629.3860235,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943629.386045,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943629.386055,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943629.386063,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943629.3860912,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623943629.3860993,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943629.3861072,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943711.8376925,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623943711.8378181,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623943711.8379,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943711.8379307,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:28:31Z" level=info msg="==--> discovery.FindNetworkService() span:2dab451036f1a82f:2dab451036f1a82f:0000000000000000:1"
time="2021-06-17T15:28:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2dab451036f1a82f:2dab451036f1a82f:0000000000000000:1"
time="2021-06-17T15:28:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=2dab451036f1a82f:2dab451036f1a82f:0000000000000000:1"
{"level":"info","ts":1623943711.8380094,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T15:28:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:28:31Z" level=info msg="==----> initRegistryClient() span:2dab451036f1a82f:491aed681e12486d:2dab451036f1a82f:1"
time="2021-06-17T15:28:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:28:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:28:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2dab451036f1a82f:491aed681e12486d:2dab451036f1a82f:1"
time="2021-06-17T15:28:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:28:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:28:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00078df40 {member1.com}:0xc00078dfc0 {member2.com}:0xc00078dec0]}"
time="2021-06-17T15:28:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:28:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:28:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:28:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:28:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:28:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:28:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:28:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:28:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:28:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:28:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:28:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:28:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:28:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:28:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:28:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:28:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="2dab451036f1a82f:491aed681e12486d:2dab451036f1a82f:1"
2021/06/17 15:28:41 Reporting span 2dab451036f1a82f:491aed681e12486d:2dab451036f1a82f:1
{"level":"info","ts":1623943721.870043,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:28:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2dab451036f1a82f:2dab451036f1a82f:0000000000000000:1"
time="2021-06-17T15:28:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=2dab451036f1a82f:2dab451036f1a82f:0000000000000000:1"
2021/06/17 15:28:41 Reporting span 2dab451036f1a82f:213e69c004e6239a:2dab451036f1a82f:1
time="2021-06-17T15:28:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2dab451036f1a82f:2dab451036f1a82f:0000000000000000:1"
2021/06/17 15:28:41 Reporting span 2dab451036f1a82f:2dab451036f1a82f:0000000000000000:1
{"level":"info","ts":1623943721.875631,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943721.8756843,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943721.8756971,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943721.8757086,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:28:41Z" level=info msg="==--> discovery.FindNetworkService() span:7f571b3e947cec22:7f571b3e947cec22:0000000000000000:1"
time="2021-06-17T15:28:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7f571b3e947cec22:7f571b3e947cec22:0000000000000000:1"
time="2021-06-17T15:28:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=7f571b3e947cec22:7f571b3e947cec22:0000000000000000:1"
time="2021-06-17T15:28:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:28:41Z" level=info msg="==----> initRegistryClient() span:7f571b3e947cec22:6c620bb312ccf1ab:7f571b3e947cec22:1"
time="2021-06-17T15:28:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:28:41Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:28:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7f571b3e947cec22:6c620bb312ccf1ab:7f571b3e947cec22:1"
time="2021-06-17T15:28:41Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:28:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:28:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00082ef00 {member1.com}:0xc00082ee80 {member2.com}:0xc00082ee00]}"
time="2021-06-17T15:28:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:28:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:28:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:28:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:28:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:28:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:28:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:28:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:28:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:28:41Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:28:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:28:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:28:55Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="7f571b3e947cec22:6c620bb312ccf1ab:7f571b3e947cec22:1"
2021/06/17 15:28:55 Reporting span 7f571b3e947cec22:6c620bb312ccf1ab:7f571b3e947cec22:1
{"level":"info","ts":1623943735.2421436,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:28:55Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7f571b3e947cec22:7f571b3e947cec22:0000000000000000:1"
time="2021-06-17T15:28:55Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=7f571b3e947cec22:7f571b3e947cec22:0000000000000000:1"
2021/06/17 15:28:55 Reporting span 7f571b3e947cec22:08bca4a6f527c6af:7f571b3e947cec22:1
time="2021-06-17T15:28:55Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7f571b3e947cec22:7f571b3e947cec22:0000000000000000:1"
2021/06/17 15:28:55 Reporting span 7f571b3e947cec22:7f571b3e947cec22:0000000000000000:1
{"level":"info","ts":1623943735.244195,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623943735.2442222,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623943735.2442343,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943735.2442436,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943735.2442527,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623943735.2442656,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943735.2442746,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943735.2442834,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943735.244292,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943735.2442987,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943735.2443047,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943735.2443118,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943735.2443228,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943735.2443316,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943735.2443383,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943735.2443438,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943735.2443504,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943735.2443576,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623943735.244366,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943735.2443738,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943735.244389,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623943735.244398,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943735.244407,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:28:55Z" level=info msg="==--> discovery.FindNetworkService() span:4cf761323e05bd24:4cf761323e05bd24:0000000000000000:1"
time="2021-06-17T15:28:55Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=4cf761323e05bd24:4cf761323e05bd24:0000000000000000:1"
time="2021-06-17T15:28:55Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=4cf761323e05bd24:4cf761323e05bd24:0000000000000000:1"
time="2021-06-17T15:28:55Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:28:55Z" level=info msg="==----> initRegistryClient() span:4cf761323e05bd24:3ae6af762e096514:4cf761323e05bd24:1"
time="2021-06-17T15:28:55Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:28:55Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:28:55Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4cf761323e05bd24:3ae6af762e096514:4cf761323e05bd24:1"
time="2021-06-17T15:28:55Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:28:55Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:28:55Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ee940 {member1.com}:0xc0004ee9c0 {member2.com}:0xc0004ee8c0]}"
time="2021-06-17T15:28:55Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:28:55Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:28:55Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:28:55Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:28:55Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:28:55Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:28:55Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:28:55Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:28:55Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:28:55Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:29:00Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:29:00Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:29:05Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:29:05Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:29:05Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:29:05Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:29:05Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="4cf761323e05bd24:3ae6af762e096514:4cf761323e05bd24:1"
2021/06/17 15:29:05 Reporting span 4cf761323e05bd24:3ae6af762e096514:4cf761323e05bd24:1
{"level":"info","ts":1623943745.2730849,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:29:05Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=4cf761323e05bd24:4cf761323e05bd24:0000000000000000:1"
time="2021-06-17T15:29:05Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=4cf761323e05bd24:4cf761323e05bd24:0000000000000000:1"
2021/06/17 15:29:05 Reporting span 4cf761323e05bd24:644f40e5c9dad73b:4cf761323e05bd24:1
time="2021-06-17T15:29:05Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=4cf761323e05bd24:4cf761323e05bd24:0000000000000000:1"
2021/06/17 15:29:05 Reporting span 4cf761323e05bd24:4cf761323e05bd24:0000000000000000:1
{"level":"info","ts":1623943745.2782524,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943745.2782788,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943745.2782903,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943745.2782996,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:29:05Z" level=info msg="==--> discovery.FindNetworkService() span:1085032c15368ebe:1085032c15368ebe:0000000000000000:1"
time="2021-06-17T15:29:05Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1085032c15368ebe:1085032c15368ebe:0000000000000000:1"
time="2021-06-17T15:29:05Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=1085032c15368ebe:1085032c15368ebe:0000000000000000:1"
time="2021-06-17T15:29:05Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:29:05Z" level=info msg="==----> initRegistryClient() span:1085032c15368ebe:7bd2f57dc1086dfc:1085032c15368ebe:1"
time="2021-06-17T15:29:05Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:29:05Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:29:05Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1085032c15368ebe:7bd2f57dc1086dfc:1085032c15368ebe:1"
time="2021-06-17T15:29:05Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:29:05Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:29:05Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ef440 {member1.com}:0xc0004ef380 {member2.com}:0xc0004ef300]}"
time="2021-06-17T15:29:05Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:29:05Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:29:05Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:29:05Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:29:05Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:29:05Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:29:05Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:29:05Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:29:05Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:29:05Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:29:10Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:29:10Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:29:15Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:29:15Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:29:20Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:29:20Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:29:20Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:29:35Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:29:35Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="1085032c15368ebe:7bd2f57dc1086dfc:1085032c15368ebe:1"
2021/06/17 15:29:35 Reporting span 1085032c15368ebe:7bd2f57dc1086dfc:1085032c15368ebe:1
2021/06/17 15:29:35 Reporting span 1085032c15368ebe:1085032c15368ebe:0000000000000000:1
{"level":"info","ts":1623943775.2794447,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623943775.2846584,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623943775.284705,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943775.2847185,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:29:35Z" level=info msg="==--> discovery.FindNetworkService() span:69b26e8c6a790934:69b26e8c6a790934:0000000000000000:1"
time="2021-06-17T15:29:35Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=69b26e8c6a790934:69b26e8c6a790934:0000000000000000:1"
time="2021-06-17T15:29:35Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=69b26e8c6a790934:69b26e8c6a790934:0000000000000000:1"
time="2021-06-17T15:29:35Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:29:35Z" level=info msg="==----> initRegistryClient() span:69b26e8c6a790934:2e05ce7310e51af7:69b26e8c6a790934:1"
time="2021-06-17T15:29:35Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:29:35Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:29:35Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="69b26e8c6a790934:2e05ce7310e51af7:69b26e8c6a790934:1"
time="2021-06-17T15:29:35Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:29:35Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:29:35Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000ba880 {member1.com}:0xc0000ba900 {member2.com}:0xc0000ba800]}"
time="2021-06-17T15:29:35Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:29:35Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:29:35Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:29:35Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:29:35Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:29:35Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:29:35Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:29:35Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:29:35Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:29:35Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:29:40Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:29:40Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:29:45Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:29:45Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:29:45Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:29:45Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:29:45Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="69b26e8c6a790934:2e05ce7310e51af7:69b26e8c6a790934:1"
2021/06/17 15:29:45 Reporting span 69b26e8c6a790934:2e05ce7310e51af7:69b26e8c6a790934:1
{"level":"info","ts":1623943785.314244,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:29:45Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=69b26e8c6a790934:69b26e8c6a790934:0000000000000000:1"
time="2021-06-17T15:29:45Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=69b26e8c6a790934:69b26e8c6a790934:0000000000000000:1"
2021/06/17 15:29:45 Reporting span 69b26e8c6a790934:6a49bd7ae3e5b4cc:69b26e8c6a790934:1
time="2021-06-17T15:29:45Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=69b26e8c6a790934:69b26e8c6a790934:0000000000000000:1"
2021/06/17 15:29:45 Reporting span 69b26e8c6a790934:69b26e8c6a790934:0000000000000000:1
{"level":"info","ts":1623943785.321065,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943785.3211212,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943785.3211343,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943785.321505,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:29:45Z" level=info msg="==--> discovery.FindNetworkService() span:3e5a650c799605c0:3e5a650c799605c0:0000000000000000:1"
time="2021-06-17T15:29:45Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3e5a650c799605c0:3e5a650c799605c0:0000000000000000:1"
time="2021-06-17T15:29:45Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=3e5a650c799605c0:3e5a650c799605c0:0000000000000000:1"
time="2021-06-17T15:29:45Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:29:45Z" level=info msg="==----> initRegistryClient() span:3e5a650c799605c0:7429ab55bc0d6399:3e5a650c799605c0:1"
time="2021-06-17T15:29:45Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:30:05Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:30:05Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3e5a650c799605c0:7429ab55bc0d6399:3e5a650c799605c0:1"
time="2021-06-17T15:30:05Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:30:05Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:30:05Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00078d840 {member1.com}:0xc00078d8c0 {member2.com}:0xc00078d7c0]}"
time="2021-06-17T15:30:05Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:30:05Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:30:05Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:30:05Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:30:05Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:30:05Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:30:05Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:30:05Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:30:05Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:30:05Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:30:10Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:30:10Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:30:15Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:30:15Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:30:20Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:30:20Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:30:20Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:30:20Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:30:20Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="3e5a650c799605c0:7429ab55bc0d6399:3e5a650c799605c0:1"
2021/06/17 15:30:20 Reporting span 3e5a650c799605c0:7429ab55bc0d6399:3e5a650c799605c0:1
2021/06/17 15:30:20 Reporting span 3e5a650c799605c0:3e5a650c799605c0:0000000000000000:1
{"level":"info","ts":1623943820.3469334,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623943820.3571417,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623943820.3571885,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943820.3572018,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:30:20Z" level=info msg="==--> discovery.FindNetworkService() span:1ec324e74ac76830:1ec324e74ac76830:0000000000000000:1"
time="2021-06-17T15:30:20Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1ec324e74ac76830:1ec324e74ac76830:0000000000000000:1"
time="2021-06-17T15:30:20Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=1ec324e74ac76830:1ec324e74ac76830:0000000000000000:1"
time="2021-06-17T15:30:20Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:30:20Z" level=info msg="==----> initRegistryClient() span:1ec324e74ac76830:6521628edf319bcf:1ec324e74ac76830:1"
time="2021-06-17T15:30:20Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:30:20Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:30:20Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1ec324e74ac76830:6521628edf319bcf:1ec324e74ac76830:1"
time="2021-06-17T15:30:20Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:30:20Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:30:20Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004eeac0 {member1.com}:0xc0004eeb40 {member2.com}:0xc0004eea40]}"
time="2021-06-17T15:30:20Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:30:20Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:30:20Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:30:20Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:30:20Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:30:20Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:30:20Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:30:20Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:30:20Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:30:20Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:30:25Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:30:25Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:30:30Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:30:30Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:30:30Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:30:30Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:30:30Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="1ec324e74ac76830:6521628edf319bcf:1ec324e74ac76830:1"
2021/06/17 15:30:30 Reporting span 1ec324e74ac76830:6521628edf319bcf:1ec324e74ac76830:1
{"level":"info","ts":1623943830.3893945,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:30:30Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1ec324e74ac76830:1ec324e74ac76830:0000000000000000:1"
time="2021-06-17T15:30:30Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=1ec324e74ac76830:1ec324e74ac76830:0000000000000000:1"
2021/06/17 15:30:30 Reporting span 1ec324e74ac76830:327a0161d78b4a74:1ec324e74ac76830:1
time="2021-06-17T15:30:30Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1ec324e74ac76830:1ec324e74ac76830:0000000000000000:1"
2021/06/17 15:30:30 Reporting span 1ec324e74ac76830:1ec324e74ac76830:0000000000000000:1
{"level":"info","ts":1623943830.3959174,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943830.39621,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943830.3963513,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943830.3964221,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:30:30Z" level=info msg="==--> discovery.FindNetworkService() span:0432528176fe3f49:0432528176fe3f49:0000000000000000:1"
time="2021-06-17T15:30:30Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=0432528176fe3f49:0432528176fe3f49:0000000000000000:1"
time="2021-06-17T15:30:30Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=0432528176fe3f49:0432528176fe3f49:0000000000000000:1"
time="2021-06-17T15:30:30Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:30:30Z" level=info msg="==----> initRegistryClient() span:0432528176fe3f49:2dd9cd059d9f63c1:0432528176fe3f49:1"
time="2021-06-17T15:30:30Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
{"level":"info","ts":1623943831.8380733,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623943831.8382213,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T15:30:50Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:30:50Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="0432528176fe3f49:2dd9cd059d9f63c1:0432528176fe3f49:1"
time="2021-06-17T15:30:50Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:30:50Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:30:50Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000183740 {member1.com}:0xc0001837c0 {member2.com}:0xc0001836c0]}"
time="2021-06-17T15:30:50Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:30:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:30:50Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:30:50Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:30:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:30:50Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:30:50Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:30:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:30:50Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:30:50Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:30:50Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:30:50Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:30:50Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="0432528176fe3f49:2dd9cd059d9f63c1:0432528176fe3f49:1"
2021/06/17 15:30:50 Reporting span 0432528176fe3f49:2dd9cd059d9f63c1:0432528176fe3f49:1
{"level":"info","ts":1623943850.4388802,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:30:50Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=0432528176fe3f49:0432528176fe3f49:0000000000000000:1"
time="2021-06-17T15:30:50Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=0432528176fe3f49:0432528176fe3f49:0000000000000000:1"
2021/06/17 15:30:50 Reporting span 0432528176fe3f49:312503b746bb5023:0432528176fe3f49:1
time="2021-06-17T15:30:50Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=0432528176fe3f49:0432528176fe3f49:0000000000000000:1"
2021/06/17 15:30:50 Reporting span 0432528176fe3f49:0432528176fe3f49:0000000000000000:1
{"level":"info","ts":1623943850.4418602,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623943850.4419074,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623943850.441922,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943850.4419322,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943850.441943,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623943850.4419556,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943850.4419687,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943850.4419782,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943850.4420156,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943850.4420497,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943850.4421034,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943850.4421551,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943850.4422197,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943850.4422379,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943850.4422474,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943850.4422565,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943850.442265,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943850.4422746,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623943850.4422832,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943850.4422915,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943850.4423072,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623943850.4424186,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943850.442489,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:30:50Z" level=info msg="==--> discovery.FindNetworkService() span:2a0843312352a03d:2a0843312352a03d:0000000000000000:1"
time="2021-06-17T15:30:50Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2a0843312352a03d:2a0843312352a03d:0000000000000000:1"
time="2021-06-17T15:30:50Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=2a0843312352a03d:2a0843312352a03d:0000000000000000:1"
time="2021-06-17T15:30:50Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:30:50Z" level=info msg="==----> initRegistryClient() span:2a0843312352a03d:2616650eab16b3d2:2a0843312352a03d:1"
time="2021-06-17T15:30:50Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:30:50Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:30:50Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2a0843312352a03d:2616650eab16b3d2:2a0843312352a03d:1"
time="2021-06-17T15:30:50Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:30:50Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:30:50Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00078cf00 {member1.com}:0xc00078ce80 {member2.com}:0xc00078ce00]}"
time="2021-06-17T15:30:50Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:30:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:30:50Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:30:50Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:30:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:30:50Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:30:50Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:30:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:30:50Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:30:50Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:30:55Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:30:55Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:31:00Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:31:00Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:31:00Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:31:00Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:31:00Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="2a0843312352a03d:2616650eab16b3d2:2a0843312352a03d:1"
2021/06/17 15:31:00 Reporting span 2a0843312352a03d:2616650eab16b3d2:2a0843312352a03d:1
{"level":"info","ts":1623943860.4724076,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:31:00Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2a0843312352a03d:2a0843312352a03d:0000000000000000:1"
time="2021-06-17T15:31:00Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=2a0843312352a03d:2a0843312352a03d:0000000000000000:1"
2021/06/17 15:31:00 Reporting span 2a0843312352a03d:07401534e09b91d9:2a0843312352a03d:1
time="2021-06-17T15:31:00Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2a0843312352a03d:2a0843312352a03d:0000000000000000:1"
2021/06/17 15:31:00 Reporting span 2a0843312352a03d:2a0843312352a03d:0000000000000000:1
{"level":"info","ts":1623943860.4778192,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943860.47787,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943860.477939,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943860.477977,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:31:00Z" level=info msg="==--> discovery.FindNetworkService() span:5a2186e6ca392cba:5a2186e6ca392cba:0000000000000000:1"
time="2021-06-17T15:31:00Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=5a2186e6ca392cba:5a2186e6ca392cba:0000000000000000:1"
time="2021-06-17T15:31:00Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=5a2186e6ca392cba:5a2186e6ca392cba:0000000000000000:1"
time="2021-06-17T15:31:00Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:31:00Z" level=info msg="==----> initRegistryClient() span:5a2186e6ca392cba:7d0ed78d5b0f9b40:5a2186e6ca392cba:1"
time="2021-06-17T15:31:00Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:31:20Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:31:20Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5a2186e6ca392cba:7d0ed78d5b0f9b40:5a2186e6ca392cba:1"
time="2021-06-17T15:31:20Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:31:20Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:31:20Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000ba800 {member1.com}:0xc0000ba880 {member2.com}:0xc0000ba780]}"
time="2021-06-17T15:31:20Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:31:20Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:31:20Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:31:20Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:31:20Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:31:20Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:31:20Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:31:20Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:31:20Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:31:20Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:31:20Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:31:20Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:31:30Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:31:30Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="5a2186e6ca392cba:7d0ed78d5b0f9b40:5a2186e6ca392cba:1"
2021/06/17 15:31:30 Reporting span 5a2186e6ca392cba:7d0ed78d5b0f9b40:5a2186e6ca392cba:1
2021/06/17 15:31:30 Reporting span 5a2186e6ca392cba:5a2186e6ca392cba:0000000000000000:1
{"level":"info","ts":1623943890.4784892,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623943890.4785707,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623943890.478585,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943890.4786131,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:31:30Z" level=info msg="==--> discovery.FindNetworkService() span:697ffebebcaa7342:697ffebebcaa7342:0000000000000000:1"
time="2021-06-17T15:31:30Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=697ffebebcaa7342:697ffebebcaa7342:0000000000000000:1"
time="2021-06-17T15:31:30Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=697ffebebcaa7342:697ffebebcaa7342:0000000000000000:1"
time="2021-06-17T15:31:30Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:31:30Z" level=info msg="==----> initRegistryClient() span:697ffebebcaa7342:7debf161db66f2d5:697ffebebcaa7342:1"
time="2021-06-17T15:31:30Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:31:30Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:31:30Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="697ffebebcaa7342:7debf161db66f2d5:697ffebebcaa7342:1"
time="2021-06-17T15:31:30Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:31:30Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:31:30Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000bb340 {member1.com}:0xc0000bb3c0 {member2.com}:0xc0000bb2c0]}"
time="2021-06-17T15:31:30Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:31:30Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:31:30Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:31:30Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:31:30Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:31:30Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:31:30Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:31:30Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:31:30Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:31:30Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:31:35Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:31:35Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:31:40Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:31:40Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:31:40Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:31:40Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:31:40Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="697ffebebcaa7342:7debf161db66f2d5:697ffebebcaa7342:1"
2021/06/17 15:31:40 Reporting span 697ffebebcaa7342:7debf161db66f2d5:697ffebebcaa7342:1
{"level":"info","ts":1623943900.5079033,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:31:40Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=697ffebebcaa7342:697ffebebcaa7342:0000000000000000:1"
time="2021-06-17T15:31:40Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=697ffebebcaa7342:697ffebebcaa7342:0000000000000000:1"
2021/06/17 15:31:40 Reporting span 697ffebebcaa7342:5bdd4131216515ac:697ffebebcaa7342:1
time="2021-06-17T15:31:40Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=697ffebebcaa7342:697ffebebcaa7342:0000000000000000:1"
2021/06/17 15:31:40 Reporting span 697ffebebcaa7342:697ffebebcaa7342:0000000000000000:1
{"level":"info","ts":1623943900.513206,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943900.513537,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943900.513573,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943900.5135868,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:31:40Z" level=info msg="==--> discovery.FindNetworkService() span:7ace36437a3b827f:7ace36437a3b827f:0000000000000000:1"
time="2021-06-17T15:31:40Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7ace36437a3b827f:7ace36437a3b827f:0000000000000000:1"
time="2021-06-17T15:31:40Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=7ace36437a3b827f:7ace36437a3b827f:0000000000000000:1"
time="2021-06-17T15:31:40Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:31:40Z" level=info msg="==----> initRegistryClient() span:7ace36437a3b827f:02a59cb1b48e20cc:7ace36437a3b827f:1"
time="2021-06-17T15:31:40Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:31:50Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:31:50Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7ace36437a3b827f:02a59cb1b48e20cc:7ace36437a3b827f:1"
time="2021-06-17T15:31:50Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:31:50Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:31:50Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00078ccc0 {member1.com}:0xc00078cc40 {member2.com}:0xc00078cbc0]}"
time="2021-06-17T15:31:50Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:31:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:31:50Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:31:50Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:31:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:31:50Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:31:50Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:31:50Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:31:50Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:31:50Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:31:55Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:31:55Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:00Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:32:00Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:05Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:32:05Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:32:05Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:32:10Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:32:10Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="7ace36437a3b827f:02a59cb1b48e20cc:7ace36437a3b827f:1"
2021/06/17 15:32:10 Reporting span 7ace36437a3b827f:02a59cb1b48e20cc:7ace36437a3b827f:1
2021/06/17 15:32:10 Reporting span 7ace36437a3b827f:7ace36437a3b827f:0000000000000000:1
{"level":"info","ts":1623943930.5152693,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623943930.5153928,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623943930.5154505,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943930.5154645,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:32:10Z" level=info msg="==--> discovery.FindNetworkService() span:6c39f2b651b96e1d:6c39f2b651b96e1d:0000000000000000:1"
time="2021-06-17T15:32:10Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6c39f2b651b96e1d:6c39f2b651b96e1d:0000000000000000:1"
time="2021-06-17T15:32:10Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=6c39f2b651b96e1d:6c39f2b651b96e1d:0000000000000000:1"
time="2021-06-17T15:32:10Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:32:10Z" level=info msg="==----> initRegistryClient() span:6c39f2b651b96e1d:6619290eba138183:6c39f2b651b96e1d:1"
time="2021-06-17T15:32:10Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:32:10Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:32:10Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6c39f2b651b96e1d:6619290eba138183:6c39f2b651b96e1d:1"
time="2021-06-17T15:32:10Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:32:10Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:32:10Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000358d80 {member1.com}:0xc000358e00 {member2.com}:0xc000358d00]}"
time="2021-06-17T15:32:10Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:32:10Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:32:10Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:32:10Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:32:10Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:32:10Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:32:10Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:32:10Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:32:10Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:32:10Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:15Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:32:15Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:20Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:32:20Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:20Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:20Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:20Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="6c39f2b651b96e1d:6619290eba138183:6c39f2b651b96e1d:1"
2021/06/17 15:32:20 Reporting span 6c39f2b651b96e1d:6619290eba138183:6c39f2b651b96e1d:1
{"level":"info","ts":1623943940.5449963,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:32:20Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6c39f2b651b96e1d:6c39f2b651b96e1d:0000000000000000:1"
time="2021-06-17T15:32:20Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=6c39f2b651b96e1d:6c39f2b651b96e1d:0000000000000000:1"
2021/06/17 15:32:20 Reporting span 6c39f2b651b96e1d:020e515cbd727603:6c39f2b651b96e1d:1
time="2021-06-17T15:32:20Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6c39f2b651b96e1d:6c39f2b651b96e1d:0000000000000000:1"
2021/06/17 15:32:20 Reporting span 6c39f2b651b96e1d:6c39f2b651b96e1d:0000000000000000:1
{"level":"info","ts":1623943940.5499074,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943940.5499556,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943940.5499706,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943940.5499961,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:32:20Z" level=info msg="==--> discovery.FindNetworkService() span:15cbab5d5c57a6a9:15cbab5d5c57a6a9:0000000000000000:1"
time="2021-06-17T15:32:20Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=15cbab5d5c57a6a9:15cbab5d5c57a6a9:0000000000000000:1"
time="2021-06-17T15:32:20Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=15cbab5d5c57a6a9:15cbab5d5c57a6a9:0000000000000000:1"
time="2021-06-17T15:32:20Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:32:20Z" level=info msg="==----> initRegistryClient() span:15cbab5d5c57a6a9:29b081d350c8226a:15cbab5d5c57a6a9:1"
time="2021-06-17T15:32:20Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:32:20Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:32:20Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="15cbab5d5c57a6a9:29b081d350c8226a:15cbab5d5c57a6a9:1"
time="2021-06-17T15:32:20Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:32:20Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:32:20Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00082ea40 {member1.com}:0xc00082eac0 {member2.com}:0xc00082e9c0]}"
time="2021-06-17T15:32:20Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:32:20Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:32:20Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:32:20Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:32:20Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:32:20Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:32:20Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:32:20Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:32:20Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:32:20Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:20Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:20Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:20Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="15cbab5d5c57a6a9:29b081d350c8226a:15cbab5d5c57a6a9:1"
2021/06/17 15:32:20 Reporting span 15cbab5d5c57a6a9:29b081d350c8226a:15cbab5d5c57a6a9:1
{"level":"info","ts":1623943940.5868618,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:32:20Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=15cbab5d5c57a6a9:15cbab5d5c57a6a9:0000000000000000:1"
time="2021-06-17T15:32:20Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=15cbab5d5c57a6a9:15cbab5d5c57a6a9:0000000000000000:1"
2021/06/17 15:32:20 Reporting span 15cbab5d5c57a6a9:40bead78c75c22ec:15cbab5d5c57a6a9:1
time="2021-06-17T15:32:20Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=15cbab5d5c57a6a9:15cbab5d5c57a6a9:0000000000000000:1"
2021/06/17 15:32:20 Reporting span 15cbab5d5c57a6a9:15cbab5d5c57a6a9:0000000000000000:1
{"level":"info","ts":1623943940.5901625,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623943940.5902247,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623943940.5902505,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943940.5903163,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943940.590362,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623943940.5908089,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943940.5917327,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943940.5920045,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943940.5921068,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943940.5922246,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943940.5924978,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943940.592552,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943940.5925605,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943940.5925674,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943940.5925736,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943940.5925822,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943940.5926774,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943940.5926933,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623943940.5927026,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943940.5927107,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943940.5927258,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623943940.5927336,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943940.5927403,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:32:20Z" level=info msg="==--> discovery.FindNetworkService() span:25a6c7b40e29d0b7:25a6c7b40e29d0b7:0000000000000000:1"
time="2021-06-17T15:32:20Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=25a6c7b40e29d0b7:25a6c7b40e29d0b7:0000000000000000:1"
time="2021-06-17T15:32:20Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=25a6c7b40e29d0b7:25a6c7b40e29d0b7:0000000000000000:1"
time="2021-06-17T15:32:20Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:32:20Z" level=info msg="==----> initRegistryClient() span:25a6c7b40e29d0b7:2cba7ea09529edd2:25a6c7b40e29d0b7:1"
time="2021-06-17T15:32:20Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:32:20Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:32:20Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="25a6c7b40e29d0b7:2cba7ea09529edd2:25a6c7b40e29d0b7:1"
time="2021-06-17T15:32:20Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:32:20Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:32:20Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ee900 {member1.com}:0xc0004ee980 {member2.com}:0xc0004ee880]}"
time="2021-06-17T15:32:20Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:32:20Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:32:20Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:32:20Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:32:20Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:32:20Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:32:20Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:32:20Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:32:20Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:32:20Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:25Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:32:25Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:30Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:32:30Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:30Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:30Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:30Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="25a6c7b40e29d0b7:2cba7ea09529edd2:25a6c7b40e29d0b7:1"
2021/06/17 15:32:30 Reporting span 25a6c7b40e29d0b7:2cba7ea09529edd2:25a6c7b40e29d0b7:1
{"level":"info","ts":1623943950.6203363,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:32:30Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=25a6c7b40e29d0b7:25a6c7b40e29d0b7:0000000000000000:1"
time="2021-06-17T15:32:30Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=25a6c7b40e29d0b7:25a6c7b40e29d0b7:0000000000000000:1"
2021/06/17 15:32:30 Reporting span 25a6c7b40e29d0b7:6b5cb7993b140287:25a6c7b40e29d0b7:1
time="2021-06-17T15:32:30Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=25a6c7b40e29d0b7:25a6c7b40e29d0b7:0000000000000000:1"
2021/06/17 15:32:30 Reporting span 25a6c7b40e29d0b7:25a6c7b40e29d0b7:0000000000000000:1
{"level":"info","ts":1623943950.6249459,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943950.624979,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943950.6250055,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943950.625018,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:32:30Z" level=info msg="==--> discovery.FindNetworkService() span:740f0b07f2b252da:740f0b07f2b252da:0000000000000000:1"
time="2021-06-17T15:32:30Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=740f0b07f2b252da:740f0b07f2b252da:0000000000000000:1"
time="2021-06-17T15:32:30Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=740f0b07f2b252da:740f0b07f2b252da:0000000000000000:1"
time="2021-06-17T15:32:30Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:32:30Z" level=info msg="==----> initRegistryClient() span:740f0b07f2b252da:4929b45c0142fa9c:740f0b07f2b252da:1"
time="2021-06-17T15:32:30Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:32:30Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:32:30Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="740f0b07f2b252da:4929b45c0142fa9c:740f0b07f2b252da:1"
time="2021-06-17T15:32:30Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:32:30Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:32:30Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00078dc80 {member1.com}:0xc00078dd00 {member2.com}:0xc00078dc00]}"
time="2021-06-17T15:32:30Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:32:30Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:32:30Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:32:30Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:32:30Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:32:30Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:32:30Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:32:30Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:32:30Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:32:30Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:30Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:30Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:30Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="740f0b07f2b252da:4929b45c0142fa9c:740f0b07f2b252da:1"
2021/06/17 15:32:30 Reporting span 740f0b07f2b252da:4929b45c0142fa9c:740f0b07f2b252da:1
{"level":"info","ts":1623943950.6619954,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:32:30Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=740f0b07f2b252da:740f0b07f2b252da:0000000000000000:1"
time="2021-06-17T15:32:30Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=740f0b07f2b252da:740f0b07f2b252da:0000000000000000:1"
2021/06/17 15:32:30 Reporting span 740f0b07f2b252da:5c01c164ea4e639a:740f0b07f2b252da:1
time="2021-06-17T15:32:30Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=740f0b07f2b252da:740f0b07f2b252da:0000000000000000:1"
2021/06/17 15:32:30 Reporting span 740f0b07f2b252da:740f0b07f2b252da:0000000000000000:1
{"level":"info","ts":1623943950.66438,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623943950.6648695,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623943950.664919,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943950.6650074,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943950.6650379,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623943950.6651816,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943950.6654248,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943950.665461,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943950.6654723,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943950.665498,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943950.6655097,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943950.665539,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943950.6655478,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943950.6655545,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943950.665563,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943950.6655838,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943950.665593,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943950.665603,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623943950.6656115,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943950.6656203,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943951.8383822,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623943951.8385448,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623943951.8386111,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943951.838647,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943951.8386157,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T15:32:31Z" level=info msg="==--> discovery.FindNetworkService() span:30b6e3938413664e:30b6e3938413664e:0000000000000000:1"
time="2021-06-17T15:32:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=30b6e3938413664e:30b6e3938413664e:0000000000000000:1"
time="2021-06-17T15:32:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=30b6e3938413664e:30b6e3938413664e:0000000000000000:1"
time="2021-06-17T15:32:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:32:31Z" level=info msg="==----> initRegistryClient() span:30b6e3938413664e:26d2309592b11df5:30b6e3938413664e:1"
time="2021-06-17T15:32:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:32:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:32:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="30b6e3938413664e:26d2309592b11df5:30b6e3938413664e:1"
time="2021-06-17T15:32:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:32:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:32:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000358f40 {member1.com}:0xc000358fc0 {member2.com}:0xc000358ec0]}"
time="2021-06-17T15:32:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:32:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:32:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:32:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:32:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:32:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:32:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:32:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:32:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:32:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:32:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:32:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="30b6e3938413664e:26d2309592b11df5:30b6e3938413664e:1"
2021/06/17 15:32:41 Reporting span 30b6e3938413664e:26d2309592b11df5:30b6e3938413664e:1
{"level":"info","ts":1623943961.867035,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:32:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=30b6e3938413664e:30b6e3938413664e:0000000000000000:1"
time="2021-06-17T15:32:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=30b6e3938413664e:30b6e3938413664e:0000000000000000:1"
2021/06/17 15:32:41 Reporting span 30b6e3938413664e:65ddf4e40047a39e:30b6e3938413664e:1
time="2021-06-17T15:32:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=30b6e3938413664e:30b6e3938413664e:0000000000000000:1"
2021/06/17 15:32:41 Reporting span 30b6e3938413664e:30b6e3938413664e:0000000000000000:1
{"level":"info","ts":1623943961.874597,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943961.8746307,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943961.874641,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943961.8746507,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:32:41Z" level=info msg="==--> discovery.FindNetworkService() span:76130f2eeb1175ca:76130f2eeb1175ca:0000000000000000:1"
time="2021-06-17T15:32:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=76130f2eeb1175ca:76130f2eeb1175ca:0000000000000000:1"
time="2021-06-17T15:32:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=76130f2eeb1175ca:76130f2eeb1175ca:0000000000000000:1"
time="2021-06-17T15:32:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:32:41Z" level=info msg="==----> initRegistryClient() span:76130f2eeb1175ca:0b4cb195358875ef:76130f2eeb1175ca:1"
time="2021-06-17T15:32:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:32:41Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:32:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="76130f2eeb1175ca:0b4cb195358875ef:76130f2eeb1175ca:1"
time="2021-06-17T15:32:41Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:32:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:32:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000137d80 {member1.com}:0xc000137e00 {member2.com}:0xc000137c40]}"
time="2021-06-17T15:32:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:32:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:32:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:32:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:32:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:32:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:32:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:32:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:32:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:32:41Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:41Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="76130f2eeb1175ca:0b4cb195358875ef:76130f2eeb1175ca:1"
2021/06/17 15:32:41 Reporting span 76130f2eeb1175ca:0b4cb195358875ef:76130f2eeb1175ca:1
{"level":"info","ts":1623943961.925918,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:32:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=76130f2eeb1175ca:76130f2eeb1175ca:0000000000000000:1"
time="2021-06-17T15:32:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=76130f2eeb1175ca:76130f2eeb1175ca:0000000000000000:1"
2021/06/17 15:32:41 Reporting span 76130f2eeb1175ca:532187dff5c12575:76130f2eeb1175ca:1
time="2021-06-17T15:32:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=76130f2eeb1175ca:76130f2eeb1175ca:0000000000000000:1"
2021/06/17 15:32:41 Reporting span 76130f2eeb1175ca:76130f2eeb1175ca:0000000000000000:1
{"level":"info","ts":1623943961.9281657,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623943961.9281898,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623943961.9281976,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943961.928204,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943961.9282105,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623943961.9282212,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943961.9282484,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943961.9282594,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943961.9282684,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943961.928279,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943961.928306,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943961.9283178,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943961.9283266,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943961.9283526,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623943961.928363,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623943961.928391,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623943961.9284017,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623943961.9284115,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623943961.928436,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943961.9284463,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623943961.9284613,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623943961.9284706,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623943961.92848,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:32:41Z" level=info msg="==--> discovery.FindNetworkService() span:22dfbc59e20f5fd8:22dfbc59e20f5fd8:0000000000000000:1"
time="2021-06-17T15:32:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=22dfbc59e20f5fd8:22dfbc59e20f5fd8:0000000000000000:1"
time="2021-06-17T15:32:41Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=22dfbc59e20f5fd8:22dfbc59e20f5fd8:0000000000000000:1"
time="2021-06-17T15:32:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:32:41Z" level=info msg="==----> initRegistryClient() span:22dfbc59e20f5fd8:61adf2c951473f78:22dfbc59e20f5fd8:1"
time="2021-06-17T15:32:41Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:32:41Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:32:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="22dfbc59e20f5fd8:61adf2c951473f78:22dfbc59e20f5fd8:1"
time="2021-06-17T15:32:41Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:32:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:32:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00078cac0 {member1.com}:0xc00078cb40 {member2.com}:0xc00078ca40]}"
time="2021-06-17T15:32:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:32:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:32:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:32:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:32:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:32:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:32:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:32:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:32:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:32:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:46Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:32:46Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:51Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:32:51Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:51Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:51Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:32:51Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="22dfbc59e20f5fd8:61adf2c951473f78:22dfbc59e20f5fd8:1"
2021/06/17 15:32:51 Reporting span 22dfbc59e20f5fd8:61adf2c951473f78:22dfbc59e20f5fd8:1
{"level":"info","ts":1623943971.9581327,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:32:51Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=22dfbc59e20f5fd8:22dfbc59e20f5fd8:0000000000000000:1"
time="2021-06-17T15:32:51Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=22dfbc59e20f5fd8:22dfbc59e20f5fd8:0000000000000000:1"
2021/06/17 15:32:51 Reporting span 22dfbc59e20f5fd8:2ce292cdbd16fe6d:22dfbc59e20f5fd8:1
time="2021-06-17T15:32:51Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=22dfbc59e20f5fd8:22dfbc59e20f5fd8:0000000000000000:1"
2021/06/17 15:32:51 Reporting span 22dfbc59e20f5fd8:22dfbc59e20f5fd8:0000000000000000:1
{"level":"info","ts":1623943971.9644313,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623943971.9644933,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623943971.964529,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623943971.964565,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:32:51Z" level=info msg="==--> discovery.FindNetworkService() span:5c541e12fb44603d:5c541e12fb44603d:0000000000000000:1"
time="2021-06-17T15:32:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=5c541e12fb44603d:5c541e12fb44603d:0000000000000000:1"
time="2021-06-17T15:32:51Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=5c541e12fb44603d:5c541e12fb44603d:0000000000000000:1"
time="2021-06-17T15:32:51Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:32:51Z" level=info msg="==----> initRegistryClient() span:5c541e12fb44603d:35641ce6f20bbaee:5c541e12fb44603d:1"
time="2021-06-17T15:32:51Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:33:11Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:33:11Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5c541e12fb44603d:35641ce6f20bbaee:5c541e12fb44603d:1"
time="2021-06-17T15:33:11Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:33:11Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:33:11Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ef440 {member1.com}:0xc0004ef900 {member2.com}:0xc0004ef3c0]}"
time="2021-06-17T15:33:11Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:33:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:33:11Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:33:11Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:33:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:33:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:33:11Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:33:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:33:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:33:11Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:33:16Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:33:16Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:33:21Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:33:21Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:33:26Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:33:26Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:33:26Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:33:26Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:33:26Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="5c541e12fb44603d:35641ce6f20bbaee:5c541e12fb44603d:1"
2021/06/17 15:33:26 Reporting span 5c541e12fb44603d:35641ce6f20bbaee:5c541e12fb44603d:1
2021/06/17 15:33:26 Reporting span 5c541e12fb44603d:5c541e12fb44603d:0000000000000000:1
{"level":"info","ts":1623944006.9855165,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623944006.9907491,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623944006.9908004,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944006.9908154,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:33:26Z" level=info msg="==--> discovery.FindNetworkService() span:773d35676b5b061b:773d35676b5b061b:0000000000000000:1"
time="2021-06-17T15:33:26Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=773d35676b5b061b:773d35676b5b061b:0000000000000000:1"
time="2021-06-17T15:33:26Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=773d35676b5b061b:773d35676b5b061b:0000000000000000:1"
time="2021-06-17T15:33:26Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:33:26Z" level=info msg="==----> initRegistryClient() span:773d35676b5b061b:3e2abbecfe202b40:773d35676b5b061b:1"
time="2021-06-17T15:33:26Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:33:26Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:33:26Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="773d35676b5b061b:3e2abbecfe202b40:773d35676b5b061b:1"
time="2021-06-17T15:33:26Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:33:26Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:33:27Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00078d1c0 {member1.com}:0xc00078d240 {member2.com}:0xc00078d140]}"
time="2021-06-17T15:33:27Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:33:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:33:27Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:33:27Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:33:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:33:27Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:33:27Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:33:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:33:27Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:33:27Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:33:32Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:33:32Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:33:37Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:33:37Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:33:37Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:33:37Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:33:37Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="773d35676b5b061b:3e2abbecfe202b40:773d35676b5b061b:1"
2021/06/17 15:33:37 Reporting span 773d35676b5b061b:3e2abbecfe202b40:773d35676b5b061b:1
{"level":"info","ts":1623944017.022892,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:33:37Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=773d35676b5b061b:773d35676b5b061b:0000000000000000:1"
time="2021-06-17T15:33:37Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=773d35676b5b061b:773d35676b5b061b:0000000000000000:1"
2021/06/17 15:33:37 Reporting span 773d35676b5b061b:79b9e5ce1fc6ab3d:773d35676b5b061b:1
time="2021-06-17T15:33:37Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=773d35676b5b061b:773d35676b5b061b:0000000000000000:1"
2021/06/17 15:33:37 Reporting span 773d35676b5b061b:773d35676b5b061b:0000000000000000:1
{"level":"info","ts":1623944017.0280766,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944017.0281055,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944017.0281134,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944017.0281205,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:33:37Z" level=info msg="==--> discovery.FindNetworkService() span:52f4c23d20a89ca4:52f4c23d20a89ca4:0000000000000000:1"
time="2021-06-17T15:33:37Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=52f4c23d20a89ca4:52f4c23d20a89ca4:0000000000000000:1"
time="2021-06-17T15:33:37Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=52f4c23d20a89ca4:52f4c23d20a89ca4:0000000000000000:1"
time="2021-06-17T15:33:37Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:33:37Z" level=info msg="==----> initRegistryClient() span:52f4c23d20a89ca4:0306bff7f4c26a65:52f4c23d20a89ca4:1"
time="2021-06-17T15:33:37Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:33:47Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:33:47Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="52f4c23d20a89ca4:0306bff7f4c26a65:52f4c23d20a89ca4:1"
time="2021-06-17T15:33:47Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:33:47Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:33:47Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000ba580 {member1.com}:0xc0000ba600 {member2.com}:0xc0000ba400]}"
time="2021-06-17T15:33:47Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:33:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:33:47Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:33:47Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:33:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:33:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:33:47Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:33:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:33:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:33:47Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:33:52Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:33:52Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:33:57Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:33:57Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:34:02Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:34:02Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:34:02Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:34:07Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:34:07Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="52f4c23d20a89ca4:0306bff7f4c26a65:52f4c23d20a89ca4:1"
2021/06/17 15:34:07 Reporting span 52f4c23d20a89ca4:0306bff7f4c26a65:52f4c23d20a89ca4:1
2021/06/17 15:34:07 Reporting span 52f4c23d20a89ca4:52f4c23d20a89ca4:0000000000000000:1
{"level":"info","ts":1623944047.0289445,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623944047.0391352,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623944047.0392017,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944047.0392163,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:34:07Z" level=info msg="==--> discovery.FindNetworkService() span:5cb3e1300f4b0df6:5cb3e1300f4b0df6:0000000000000000:1"
time="2021-06-17T15:34:07Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=5cb3e1300f4b0df6:5cb3e1300f4b0df6:0000000000000000:1"
time="2021-06-17T15:34:07Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=5cb3e1300f4b0df6:5cb3e1300f4b0df6:0000000000000000:1"
time="2021-06-17T15:34:07Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:34:07Z" level=info msg="==----> initRegistryClient() span:5cb3e1300f4b0df6:04c0a7ab7e61625e:5cb3e1300f4b0df6:1"
time="2021-06-17T15:34:07Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:34:07Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:34:07Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5cb3e1300f4b0df6:04c0a7ab7e61625e:5cb3e1300f4b0df6:1"
time="2021-06-17T15:34:07Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:34:07Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:34:07Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00082f4c0 {member1.com}:0xc00082f540 {member2.com}:0xc00082f440]}"
time="2021-06-17T15:34:07Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:34:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:34:07Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:34:07Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:34:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:34:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:34:07Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:34:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:34:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:34:07Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:34:12Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:34:12Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:34:17Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:34:17Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:34:17Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:34:17Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:34:17Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="5cb3e1300f4b0df6:04c0a7ab7e61625e:5cb3e1300f4b0df6:1"
2021/06/17 15:34:17 Reporting span 5cb3e1300f4b0df6:04c0a7ab7e61625e:5cb3e1300f4b0df6:1
{"level":"info","ts":1623944057.0699675,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:34:17Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5cb3e1300f4b0df6:5cb3e1300f4b0df6:0000000000000000:1"
time="2021-06-17T15:34:17Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=5cb3e1300f4b0df6:5cb3e1300f4b0df6:0000000000000000:1"
2021/06/17 15:34:17 Reporting span 5cb3e1300f4b0df6:282139a50eab262d:5cb3e1300f4b0df6:1
time="2021-06-17T15:34:17Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5cb3e1300f4b0df6:5cb3e1300f4b0df6:0000000000000000:1"
2021/06/17 15:34:17 Reporting span 5cb3e1300f4b0df6:5cb3e1300f4b0df6:0000000000000000:1
{"level":"info","ts":1623944057.0753005,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944057.075393,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944057.0754247,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944057.0754373,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:34:17Z" level=info msg="==--> discovery.FindNetworkService() span:40279e00ec6005bf:40279e00ec6005bf:0000000000000000:1"
time="2021-06-17T15:34:17Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=40279e00ec6005bf:40279e00ec6005bf:0000000000000000:1"
time="2021-06-17T15:34:17Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=40279e00ec6005bf:40279e00ec6005bf:0000000000000000:1"
time="2021-06-17T15:34:17Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:34:17Z" level=info msg="==----> initRegistryClient() span:40279e00ec6005bf:446d1190ed13193b:40279e00ec6005bf:1"
time="2021-06-17T15:34:17Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:34:17Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:34:17Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="40279e00ec6005bf:446d1190ed13193b:40279e00ec6005bf:1"
time="2021-06-17T15:34:17Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:34:17Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:34:17Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000888000 {member1.com}:0xc000888080 {member2.com}:0xc000137f80]}"
time="2021-06-17T15:34:17Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:34:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:34:17Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:34:17Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:34:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:34:17Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:34:17Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:34:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:34:17Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:34:17Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:34:17Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:34:17Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:34:17Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="40279e00ec6005bf:446d1190ed13193b:40279e00ec6005bf:1"
2021/06/17 15:34:17 Reporting span 40279e00ec6005bf:446d1190ed13193b:40279e00ec6005bf:1
{"level":"info","ts":1623944057.1164515,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:34:17Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=40279e00ec6005bf:40279e00ec6005bf:0000000000000000:1"
time="2021-06-17T15:34:17Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=40279e00ec6005bf:40279e00ec6005bf:0000000000000000:1"
2021/06/17 15:34:17 Reporting span 40279e00ec6005bf:39a84dada249bb67:40279e00ec6005bf:1
time="2021-06-17T15:34:17Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=40279e00ec6005bf:40279e00ec6005bf:0000000000000000:1"
2021/06/17 15:34:17 Reporting span 40279e00ec6005bf:40279e00ec6005bf:0000000000000000:1
{"level":"info","ts":1623944057.119544,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623944057.1195872,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623944057.1196187,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944057.1196313,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944057.119642,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623944057.1196551,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623944057.1196642,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623944057.1196733,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944057.1196818,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944057.119711,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944057.1197236,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944057.1197336,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944057.1197422,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944057.1197507,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623944057.1197777,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623944057.1197886,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944057.1197975,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944057.119807,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623944057.1198199,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623944057.1198297,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623944071.8388019,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623944071.838944,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623944071.83899,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623944071.8390036,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944071.8390281,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:34:31Z" level=info msg="==--> discovery.FindNetworkService() span:7dd55712c20e8e9e:7dd55712c20e8e9e:0000000000000000:1"
time="2021-06-17T15:34:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7dd55712c20e8e9e:7dd55712c20e8e9e:0000000000000000:1"
time="2021-06-17T15:34:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=7dd55712c20e8e9e:7dd55712c20e8e9e:0000000000000000:1"
time="2021-06-17T15:34:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:34:31Z" level=info msg="==----> initRegistryClient() span:7dd55712c20e8e9e:2f53bbf5fac6546c:7dd55712c20e8e9e:1"
time="2021-06-17T15:34:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:34:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:34:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7dd55712c20e8e9e:2f53bbf5fac6546c:7dd55712c20e8e9e:1"
time="2021-06-17T15:34:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:34:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:34:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000888a40 {member1.com}:0xc0008889c0 {member2.com}:0xc000888940]}"
time="2021-06-17T15:34:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:34:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:34:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:34:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:34:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:34:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:34:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:34:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:34:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:34:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:34:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:34:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:34:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:34:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:34:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:34:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:34:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="7dd55712c20e8e9e:2f53bbf5fac6546c:7dd55712c20e8e9e:1"
2021/06/17 15:34:41 Reporting span 7dd55712c20e8e9e:2f53bbf5fac6546c:7dd55712c20e8e9e:1
{"level":"info","ts":1623944081.866555,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:34:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7dd55712c20e8e9e:7dd55712c20e8e9e:0000000000000000:1"
time="2021-06-17T15:34:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=7dd55712c20e8e9e:7dd55712c20e8e9e:0000000000000000:1"
2021/06/17 15:34:41 Reporting span 7dd55712c20e8e9e:66a33788db5f5e85:7dd55712c20e8e9e:1
time="2021-06-17T15:34:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7dd55712c20e8e9e:7dd55712c20e8e9e:0000000000000000:1"
2021/06/17 15:34:41 Reporting span 7dd55712c20e8e9e:7dd55712c20e8e9e:0000000000000000:1
{"level":"info","ts":1623944081.8711493,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944081.871224,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944081.8712797,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944081.8712914,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:34:41Z" level=info msg="==--> discovery.FindNetworkService() span:4da99159477e320b:4da99159477e320b:0000000000000000:1"
time="2021-06-17T15:34:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=4da99159477e320b:4da99159477e320b:0000000000000000:1"
time="2021-06-17T15:34:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=4da99159477e320b:4da99159477e320b:0000000000000000:1"
time="2021-06-17T15:34:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:34:41Z" level=info msg="==----> initRegistryClient() span:4da99159477e320b:78c7bc5901832e69:4da99159477e320b:1"
time="2021-06-17T15:34:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:34:41Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:34:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4da99159477e320b:78c7bc5901832e69:4da99159477e320b:1"
time="2021-06-17T15:34:41Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:34:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:34:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000ba800 {member1.com}:0xc0000ba880 {member2.com}:0xc0000ba780]}"
time="2021-06-17T15:34:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:34:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:34:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:34:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:34:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:34:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:34:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:34:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:34:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:34:41Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:34:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:34:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:34:41Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="4da99159477e320b:78c7bc5901832e69:4da99159477e320b:1"
2021/06/17 15:34:41 Reporting span 4da99159477e320b:78c7bc5901832e69:4da99159477e320b:1
{"level":"info","ts":1623944081.9100769,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:34:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=4da99159477e320b:4da99159477e320b:0000000000000000:1"
time="2021-06-17T15:34:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=4da99159477e320b:4da99159477e320b:0000000000000000:1"
2021/06/17 15:34:41 Reporting span 4da99159477e320b:1d14b342d0fef88c:4da99159477e320b:1
time="2021-06-17T15:34:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=4da99159477e320b:4da99159477e320b:0000000000000000:1"
2021/06/17 15:34:41 Reporting span 4da99159477e320b:4da99159477e320b:0000000000000000:1
{"level":"info","ts":1623944081.912804,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623944081.912845,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623944081.912853,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944081.9128594,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944081.9128675,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623944081.9128804,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623944081.9128902,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623944081.9128995,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944081.9129083,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944081.9129179,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944081.912927,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944081.9129388,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944081.9129465,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944081.9129553,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623944081.9129815,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623944081.9129934,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944081.9130204,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944081.9130316,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623944081.9130409,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623944081.9130497,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623944081.9131095,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623944081.9131444,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944081.91317,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:34:41Z" level=info msg="==--> discovery.FindNetworkService() span:7cb465c66829a20a:7cb465c66829a20a:0000000000000000:1"
time="2021-06-17T15:34:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7cb465c66829a20a:7cb465c66829a20a:0000000000000000:1"
time="2021-06-17T15:34:41Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=7cb465c66829a20a:7cb465c66829a20a:0000000000000000:1"
time="2021-06-17T15:34:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:34:41Z" level=info msg="==----> initRegistryClient() span:7cb465c66829a20a:6ac633c1df9836d6:7cb465c66829a20a:1"
time="2021-06-17T15:34:41Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:34:41Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:34:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7cb465c66829a20a:6ac633c1df9836d6:7cb465c66829a20a:1"
time="2021-06-17T15:34:41Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:34:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:34:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00082f500 {member1.com}:0xc00082f480 {member2.com}:0xc00082f400]}"
time="2021-06-17T15:34:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:34:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:34:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:34:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:34:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:34:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:34:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:34:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:34:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:34:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:34:46Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:34:46Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:34:51Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:34:51Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:34:51Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:34:51Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:34:51Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="7cb465c66829a20a:6ac633c1df9836d6:7cb465c66829a20a:1"
2021/06/17 15:34:51 Reporting span 7cb465c66829a20a:6ac633c1df9836d6:7cb465c66829a20a:1
{"level":"info","ts":1623944091.94281,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:34:51Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7cb465c66829a20a:7cb465c66829a20a:0000000000000000:1"
time="2021-06-17T15:34:51Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=7cb465c66829a20a:7cb465c66829a20a:0000000000000000:1"
2021/06/17 15:34:51 Reporting span 7cb465c66829a20a:271ed2c5aa2e3fdf:7cb465c66829a20a:1
time="2021-06-17T15:34:51Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7cb465c66829a20a:7cb465c66829a20a:0000000000000000:1"
2021/06/17 15:34:51 Reporting span 7cb465c66829a20a:7cb465c66829a20a:0000000000000000:1
{"level":"info","ts":1623944091.9474757,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944091.9476838,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944091.9477186,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944091.9477324,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:34:51Z" level=info msg="==--> discovery.FindNetworkService() span:1a0a36a1f22a4750:1a0a36a1f22a4750:0000000000000000:1"
time="2021-06-17T15:34:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1a0a36a1f22a4750:1a0a36a1f22a4750:0000000000000000:1"
time="2021-06-17T15:34:51Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=1a0a36a1f22a4750:1a0a36a1f22a4750:0000000000000000:1"
time="2021-06-17T15:34:51Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:34:51Z" level=info msg="==----> initRegistryClient() span:1a0a36a1f22a4750:41401017b8593017:1a0a36a1f22a4750:1"
time="2021-06-17T15:34:51Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:35:11Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:35:11Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1a0a36a1f22a4750:41401017b8593017:1a0a36a1f22a4750:1"
time="2021-06-17T15:35:11Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:35:11Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:35:11Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000888a80 {member1.com}:0xc000888b00 {member2.com}:0xc000888a00]}"
time="2021-06-17T15:35:11Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:35:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:35:11Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:35:11Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:35:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:35:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:35:11Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:35:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:35:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:35:11Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:35:16Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:35:16Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:35:21Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:35:21Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:35:26Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:35:26Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:35:26Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:35:26Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:35:26Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="1a0a36a1f22a4750:41401017b8593017:1a0a36a1f22a4750:1"
2021/06/17 15:35:26 Reporting span 1a0a36a1f22a4750:41401017b8593017:1a0a36a1f22a4750:1
2021/06/17 15:35:26 Reporting span 1a0a36a1f22a4750:1a0a36a1f22a4750:0000000000000000:1
{"level":"info","ts":1623944126.966947,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623944126.972185,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623944126.9722233,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944126.972236,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:35:26Z" level=info msg="==--> discovery.FindNetworkService() span:46a990fade62d490:46a990fade62d490:0000000000000000:1"
time="2021-06-17T15:35:26Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=46a990fade62d490:46a990fade62d490:0000000000000000:1"
time="2021-06-17T15:35:26Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=46a990fade62d490:46a990fade62d490:0000000000000000:1"
time="2021-06-17T15:35:26Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:35:26Z" level=info msg="==----> initRegistryClient() span:46a990fade62d490:62ad270a4c38d0ac:46a990fade62d490:1"
time="2021-06-17T15:35:26Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:35:26Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:35:26Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="46a990fade62d490:62ad270a4c38d0ac:46a990fade62d490:1"
time="2021-06-17T15:35:26Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:35:26Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:35:26Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00078cec0 {member1.com}:0xc00078cf40 {member2.com}:0xc00078ce40]}"
time="2021-06-17T15:35:26Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:35:26Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:35:26Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:35:26Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:35:26Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:35:26Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:35:26Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:35:26Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:35:26Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:35:26Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:35:31Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:35:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:35:36Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:35:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:35:37Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:35:37Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:35:37Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="46a990fade62d490:62ad270a4c38d0ac:46a990fade62d490:1"
2021/06/17 15:35:37 Reporting span 46a990fade62d490:62ad270a4c38d0ac:46a990fade62d490:1
{"level":"info","ts":1623944137.0118997,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:35:37Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=46a990fade62d490:46a990fade62d490:0000000000000000:1"
time="2021-06-17T15:35:37Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=46a990fade62d490:46a990fade62d490:0000000000000000:1"
2021/06/17 15:35:37 Reporting span 46a990fade62d490:0a9ae57cba5820eb:46a990fade62d490:1
time="2021-06-17T15:35:37Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=46a990fade62d490:46a990fade62d490:0000000000000000:1"
2021/06/17 15:35:37 Reporting span 46a990fade62d490:46a990fade62d490:0000000000000000:1
{"level":"info","ts":1623944137.0176075,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944137.0178373,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944137.0178998,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944137.0179322,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:35:37Z" level=info msg="==--> discovery.FindNetworkService() span:4a8dbfe08be26b7b:4a8dbfe08be26b7b:0000000000000000:1"
time="2021-06-17T15:35:37Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=4a8dbfe08be26b7b:4a8dbfe08be26b7b:0000000000000000:1"
time="2021-06-17T15:35:37Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=4a8dbfe08be26b7b:4a8dbfe08be26b7b:0000000000000000:1"
time="2021-06-17T15:35:37Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:35:37Z" level=info msg="==----> initRegistryClient() span:4a8dbfe08be26b7b:22742ed31d05ffc3:4a8dbfe08be26b7b:1"
time="2021-06-17T15:35:37Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:35:37Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:35:37Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4a8dbfe08be26b7b:22742ed31d05ffc3:4a8dbfe08be26b7b:1"
time="2021-06-17T15:35:37Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:35:37Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:35:37Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00078db80 {member1.com}:0xc00078dc00 {member2.com}:0xc00078db00]}"
time="2021-06-17T15:35:37Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:35:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:35:37Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:35:37Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:35:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:35:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:35:37Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:35:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:35:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:35:37Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:35:37Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:35:37Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:35:37Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="4a8dbfe08be26b7b:22742ed31d05ffc3:4a8dbfe08be26b7b:1"
2021/06/17 15:35:37 Reporting span 4a8dbfe08be26b7b:22742ed31d05ffc3:4a8dbfe08be26b7b:1
{"level":"info","ts":1623944137.0587072,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:35:37Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=4a8dbfe08be26b7b:4a8dbfe08be26b7b:0000000000000000:1"
time="2021-06-17T15:35:37Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=4a8dbfe08be26b7b:4a8dbfe08be26b7b:0000000000000000:1"
2021/06/17 15:35:37 Reporting span 4a8dbfe08be26b7b:7241e2675ca09826:4a8dbfe08be26b7b:1
time="2021-06-17T15:35:37Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=4a8dbfe08be26b7b:4a8dbfe08be26b7b:0000000000000000:1"
2021/06/17 15:35:37 Reporting span 4a8dbfe08be26b7b:4a8dbfe08be26b7b:0000000000000000:1
{"level":"info","ts":1623944137.061031,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623944137.06107,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623944137.061082,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944137.0611043,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944137.0611176,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623944137.0613182,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623944137.061414,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623944137.0614247,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944137.0614307,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944137.0614371,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944137.0614438,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944137.0614526,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944137.061475,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944137.061484,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623944137.0614927,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623944137.0615385,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944137.0615506,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944137.0615947,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623944137.0616066,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623944137.0616293,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623944191.8390703,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623944191.8392148,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623944191.8392324,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623944191.8392453,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944191.839302,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:36:31Z" level=info msg="==--> discovery.FindNetworkService() span:2e38924244b9bc65:2e38924244b9bc65:0000000000000000:1"
time="2021-06-17T15:36:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2e38924244b9bc65:2e38924244b9bc65:0000000000000000:1"
time="2021-06-17T15:36:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=2e38924244b9bc65:2e38924244b9bc65:0000000000000000:1"
time="2021-06-17T15:36:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:36:31Z" level=info msg="==----> initRegistryClient() span:2e38924244b9bc65:73d8106ce0cc77df:2e38924244b9bc65:1"
time="2021-06-17T15:36:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:36:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:36:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2e38924244b9bc65:73d8106ce0cc77df:2e38924244b9bc65:1"
time="2021-06-17T15:36:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:36:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:36:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000137580 {member1.com}:0xc000137500 {member2.com}:0xc000137480]}"
time="2021-06-17T15:36:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:36:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:36:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:36:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:36:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:36:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:36:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:36:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:36:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:36:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:36:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:36:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:36:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:36:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:36:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:36:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:36:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="2e38924244b9bc65:73d8106ce0cc77df:2e38924244b9bc65:1"
2021/06/17 15:36:41 Reporting span 2e38924244b9bc65:73d8106ce0cc77df:2e38924244b9bc65:1
{"level":"info","ts":1623944201.8666263,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:36:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2e38924244b9bc65:2e38924244b9bc65:0000000000000000:1"
time="2021-06-17T15:36:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=2e38924244b9bc65:2e38924244b9bc65:0000000000000000:1"
2021/06/17 15:36:41 Reporting span 2e38924244b9bc65:7280a6bc2f3a85e8:2e38924244b9bc65:1
time="2021-06-17T15:36:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2e38924244b9bc65:2e38924244b9bc65:0000000000000000:1"
2021/06/17 15:36:41 Reporting span 2e38924244b9bc65:2e38924244b9bc65:0000000000000000:1
{"level":"info","ts":1623944201.871518,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944201.8715518,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944201.8718562,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944201.871897,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:36:41Z" level=info msg="==--> discovery.FindNetworkService() span:1d3b587413c1a59a:1d3b587413c1a59a:0000000000000000:1"
time="2021-06-17T15:36:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1d3b587413c1a59a:1d3b587413c1a59a:0000000000000000:1"
time="2021-06-17T15:36:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=1d3b587413c1a59a:1d3b587413c1a59a:0000000000000000:1"
time="2021-06-17T15:36:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:36:41Z" level=info msg="==----> initRegistryClient() span:1d3b587413c1a59a:39038e3147083071:1d3b587413c1a59a:1"
time="2021-06-17T15:36:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:36:51Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:36:51Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1d3b587413c1a59a:39038e3147083071:1d3b587413c1a59a:1"
time="2021-06-17T15:36:51Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:36:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:36:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000359580 {member1.com}:0xc000359500 {member2.com}:0xc000359480]}"
time="2021-06-17T15:36:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:36:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:36:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:36:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:36:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:36:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:36:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:36:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:36:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:36:51Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:36:51Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:36:51Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:36:58Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="1d3b587413c1a59a:39038e3147083071:1d3b587413c1a59a:1"
2021/06/17 15:36:58 Reporting span 1d3b587413c1a59a:39038e3147083071:1d3b587413c1a59a:1
{"level":"info","ts":1623944218.5800517,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:36:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1d3b587413c1a59a:1d3b587413c1a59a:0000000000000000:1"
time="2021-06-17T15:36:58Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=1d3b587413c1a59a:1d3b587413c1a59a:0000000000000000:1"
2021/06/17 15:36:58 Reporting span 1d3b587413c1a59a:535332aec549261a:1d3b587413c1a59a:1
time="2021-06-17T15:36:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1d3b587413c1a59a:1d3b587413c1a59a:0000000000000000:1"
2021/06/17 15:36:58 Reporting span 1d3b587413c1a59a:1d3b587413c1a59a:0000000000000000:1
{"level":"info","ts":1623944218.5829146,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623944218.5829406,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623944218.5829508,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944218.58296,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944218.5829694,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623944218.5829816,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623944218.5829916,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623944218.5830004,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944218.5830276,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944218.583039,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944218.5830667,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944218.5831082,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944218.5831196,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944218.5831301,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623944218.5831385,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623944218.5831468,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944218.5831559,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944218.5831645,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623944218.583173,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623944218.583203,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623944218.583219,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623944218.5832484,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944218.5832596,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:36:58Z" level=info msg="==--> discovery.FindNetworkService() span:324c23b278a3b235:324c23b278a3b235:0000000000000000:1"
time="2021-06-17T15:36:58Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=324c23b278a3b235:324c23b278a3b235:0000000000000000:1"
time="2021-06-17T15:36:58Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=324c23b278a3b235:324c23b278a3b235:0000000000000000:1"
time="2021-06-17T15:36:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:36:58Z" level=info msg="==----> initRegistryClient() span:324c23b278a3b235:1a5126379bf84273:324c23b278a3b235:1"
time="2021-06-17T15:36:58Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:36:58Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:36:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="324c23b278a3b235:1a5126379bf84273:324c23b278a3b235:1"
time="2021-06-17T15:36:58Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:36:58Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:36:58Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00082e200 {member1.com}:0xc00082e180 {member2.com}:0xc00082e100]}"
time="2021-06-17T15:36:58Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:36:58Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:36:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:36:58Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:36:58Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:36:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:36:58Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:36:58Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:36:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:36:58Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:37:03Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:37:03Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:37:08Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:37:08Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:37:08Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:37:08Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:37:08Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="324c23b278a3b235:1a5126379bf84273:324c23b278a3b235:1"
2021/06/17 15:37:08 Reporting span 324c23b278a3b235:1a5126379bf84273:324c23b278a3b235:1
{"level":"info","ts":1623944228.6124284,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:37:08Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=324c23b278a3b235:324c23b278a3b235:0000000000000000:1"
time="2021-06-17T15:37:08Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=324c23b278a3b235:324c23b278a3b235:0000000000000000:1"
2021/06/17 15:37:08 Reporting span 324c23b278a3b235:7fd3aac3b7b2297b:324c23b278a3b235:1
time="2021-06-17T15:37:08Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=324c23b278a3b235:324c23b278a3b235:0000000000000000:1"
2021/06/17 15:37:08 Reporting span 324c23b278a3b235:324c23b278a3b235:0000000000000000:1
{"level":"info","ts":1623944228.6177614,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944228.6178222,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944228.6178548,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944228.6178687,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:37:08Z" level=info msg="==--> discovery.FindNetworkService() span:21ed4d21e022c1ac:21ed4d21e022c1ac:0000000000000000:1"
time="2021-06-17T15:37:08Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=21ed4d21e022c1ac:21ed4d21e022c1ac:0000000000000000:1"
time="2021-06-17T15:37:08Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=21ed4d21e022c1ac:21ed4d21e022c1ac:0000000000000000:1"
time="2021-06-17T15:37:08Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:37:08Z" level=info msg="==----> initRegistryClient() span:21ed4d21e022c1ac:22a424825f2075a2:21ed4d21e022c1ac:1"
time="2021-06-17T15:37:08Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:37:08Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:37:08Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="21ed4d21e022c1ac:22a424825f2075a2:21ed4d21e022c1ac:1"
time="2021-06-17T15:37:08Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:37:08Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:37:08Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000136700 {member1.com}:0xc000136780 {member2.com}:0xc0001365c0]}"
time="2021-06-17T15:37:08Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:37:08Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:37:08Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:37:08Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:37:08Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:37:08Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:37:08Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:37:08Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:37:08Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:37:08Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:37:13Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:37:13Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:37:18Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:37:18Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:37:23Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:37:23Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:37:23Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:37:38Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:37:38Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="21ed4d21e022c1ac:22a424825f2075a2:21ed4d21e022c1ac:1"
2021/06/17 15:37:38 Reporting span 21ed4d21e022c1ac:22a424825f2075a2:21ed4d21e022c1ac:1
2021/06/17 15:37:38 Reporting span 21ed4d21e022c1ac:21ed4d21e022c1ac:0000000000000000:1
{"level":"info","ts":1623944258.618885,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623944258.62419,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623944258.6242762,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944258.6242907,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:37:38Z" level=info msg="==--> discovery.FindNetworkService() span:51f4eedc2957f71b:51f4eedc2957f71b:0000000000000000:1"
time="2021-06-17T15:37:38Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=51f4eedc2957f71b:51f4eedc2957f71b:0000000000000000:1"
time="2021-06-17T15:37:38Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=51f4eedc2957f71b:51f4eedc2957f71b:0000000000000000:1"
time="2021-06-17T15:37:38Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:37:38Z" level=info msg="==----> initRegistryClient() span:51f4eedc2957f71b:3566b3ffb1ac290f:51f4eedc2957f71b:1"
time="2021-06-17T15:37:38Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:37:38Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:37:38Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="51f4eedc2957f71b:3566b3ffb1ac290f:51f4eedc2957f71b:1"
time="2021-06-17T15:37:38Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:37:38Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:37:38Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000136a40 {member1.com}:0xc0001369c0 {member2.com}:0xc000136900]}"
time="2021-06-17T15:37:38Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:37:38Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:37:38Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:37:38Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:37:38Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:37:38Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:37:38Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:37:38Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:37:38Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:37:38Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:37:43Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:37:43Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:37:48Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:37:48Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:37:48Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:37:48Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:37:48Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="51f4eedc2957f71b:3566b3ffb1ac290f:51f4eedc2957f71b:1"
2021/06/17 15:37:48 Reporting span 51f4eedc2957f71b:3566b3ffb1ac290f:51f4eedc2957f71b:1
{"level":"info","ts":1623944268.6659527,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:37:48Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=51f4eedc2957f71b:51f4eedc2957f71b:0000000000000000:1"
time="2021-06-17T15:37:48Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=51f4eedc2957f71b:51f4eedc2957f71b:0000000000000000:1"
2021/06/17 15:37:48 Reporting span 51f4eedc2957f71b:67eb1f4ad83e2a4b:51f4eedc2957f71b:1
time="2021-06-17T15:37:48Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=51f4eedc2957f71b:51f4eedc2957f71b:0000000000000000:1"
2021/06/17 15:37:48 Reporting span 51f4eedc2957f71b:51f4eedc2957f71b:0000000000000000:1
{"level":"info","ts":1623944268.6724494,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944268.672483,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944268.6724956,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944268.6725068,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:37:48Z" level=info msg="==--> discovery.FindNetworkService() span:6b9866419185623f:6b9866419185623f:0000000000000000:1"
time="2021-06-17T15:37:48Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6b9866419185623f:6b9866419185623f:0000000000000000:1"
time="2021-06-17T15:37:48Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=6b9866419185623f:6b9866419185623f:0000000000000000:1"
time="2021-06-17T15:37:48Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:37:48Z" level=info msg="==----> initRegistryClient() span:6b9866419185623f:480232dc174db87a:6b9866419185623f:1"
time="2021-06-17T15:37:48Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:37:48Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:37:48Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6b9866419185623f:480232dc174db87a:6b9866419185623f:1"
time="2021-06-17T15:37:48Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:37:48Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:37:48Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000bb180 {member1.com}:0xc0000bb100 {member2.com}:0xc0000bb080]}"
time="2021-06-17T15:37:48Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:37:48Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:37:48Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:37:48Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:37:48Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:37:48Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:37:48Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:37:48Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:37:48Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:37:48Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:37:48Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:37:48Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:37:48Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="6b9866419185623f:480232dc174db87a:6b9866419185623f:1"
2021/06/17 15:37:48 Reporting span 6b9866419185623f:480232dc174db87a:6b9866419185623f:1
{"level":"info","ts":1623944268.7255979,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:37:48Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6b9866419185623f:6b9866419185623f:0000000000000000:1"
time="2021-06-17T15:37:48Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=6b9866419185623f:6b9866419185623f:0000000000000000:1"
2021/06/17 15:37:48 Reporting span 6b9866419185623f:66a3e3740a151660:6b9866419185623f:1
time="2021-06-17T15:37:48Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6b9866419185623f:6b9866419185623f:0000000000000000:1"
2021/06/17 15:37:48 Reporting span 6b9866419185623f:6b9866419185623f:0000000000000000:1
{"level":"info","ts":1623944268.7281098,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623944268.728356,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623944268.7284238,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944268.7284641,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944268.7285,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623944268.728557,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623944268.728639,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623944268.7287395,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944268.7288032,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944268.728836,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944268.7288475,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944268.7288566,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944268.7288637,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944268.7288744,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623944268.7288837,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623944268.7288933,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944268.7289498,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944268.728993,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623944268.7290053,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623944268.7290134,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623944311.8394184,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623944311.8395774,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623944311.8396173,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623944311.8396425,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944311.839655,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:38:31Z" level=info msg="==--> discovery.FindNetworkService() span:75326ec335517d1a:75326ec335517d1a:0000000000000000:1"
time="2021-06-17T15:38:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=75326ec335517d1a:75326ec335517d1a:0000000000000000:1"
time="2021-06-17T15:38:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=75326ec335517d1a:75326ec335517d1a:0000000000000000:1"
time="2021-06-17T15:38:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:38:31Z" level=info msg="==----> initRegistryClient() span:75326ec335517d1a:0aab7b053dff6be9:75326ec335517d1a:1"
time="2021-06-17T15:38:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:38:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:38:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="75326ec335517d1a:0aab7b053dff6be9:75326ec335517d1a:1"
time="2021-06-17T15:38:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:38:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:38:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00085c480 {member1.com}:0xc00085c500 {member2.com}:0xc00085c400]}"
time="2021-06-17T15:38:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:38:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:38:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:38:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:38:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:38:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:38:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:38:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:38:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:38:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:38:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:38:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:38:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:38:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:38:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:38:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:38:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="75326ec335517d1a:0aab7b053dff6be9:75326ec335517d1a:1"
2021/06/17 15:38:41 Reporting span 75326ec335517d1a:0aab7b053dff6be9:75326ec335517d1a:1
{"level":"info","ts":1623944321.8711493,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:38:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=75326ec335517d1a:75326ec335517d1a:0000000000000000:1"
time="2021-06-17T15:38:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=75326ec335517d1a:75326ec335517d1a:0000000000000000:1"
2021/06/17 15:38:41 Reporting span 75326ec335517d1a:109eeebf2eedb9e6:75326ec335517d1a:1
time="2021-06-17T15:38:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=75326ec335517d1a:75326ec335517d1a:0000000000000000:1"
2021/06/17 15:38:41 Reporting span 75326ec335517d1a:75326ec335517d1a:0000000000000000:1
{"level":"info","ts":1623944321.8762312,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944321.876279,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944321.8762918,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944321.8763196,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:38:41Z" level=info msg="==--> discovery.FindNetworkService() span:00f04eabfa43db6d:00f04eabfa43db6d:0000000000000000:1"
time="2021-06-17T15:38:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=00f04eabfa43db6d:00f04eabfa43db6d:0000000000000000:1"
time="2021-06-17T15:38:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=00f04eabfa43db6d:00f04eabfa43db6d:0000000000000000:1"
time="2021-06-17T15:38:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:38:41Z" level=info msg="==----> initRegistryClient() span:00f04eabfa43db6d:600032a8ae6437b2:00f04eabfa43db6d:1"
time="2021-06-17T15:38:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:39:01Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:39:01Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="00f04eabfa43db6d:600032a8ae6437b2:00f04eabfa43db6d:1"
time="2021-06-17T15:39:01Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:39:01Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:39:01Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000136780 {member1.com}:0xc000136800 {member2.com}:0xc000136700]}"
time="2021-06-17T15:39:01Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:39:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:39:01Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:39:01Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:39:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:39:01Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:39:01Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:39:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:39:01Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:39:01Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:39:06Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:39:06Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:39:11Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:39:11Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:39:16Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:39:16Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:39:16Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:39:16Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:39:16Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="00f04eabfa43db6d:600032a8ae6437b2:00f04eabfa43db6d:1"
2021/06/17 15:39:16 Reporting span 00f04eabfa43db6d:600032a8ae6437b2:00f04eabfa43db6d:1
2021/06/17 15:39:16 Reporting span 00f04eabfa43db6d:00f04eabfa43db6d:0000000000000000:1
{"level":"info","ts":1623944356.9026725,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623944356.9027338,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623944356.9027486,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944356.9027603,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:39:16Z" level=info msg="==--> discovery.FindNetworkService() span:715e3d701f4088f5:715e3d701f4088f5:0000000000000000:1"
time="2021-06-17T15:39:16Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=715e3d701f4088f5:715e3d701f4088f5:0000000000000000:1"
time="2021-06-17T15:39:16Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=715e3d701f4088f5:715e3d701f4088f5:0000000000000000:1"
time="2021-06-17T15:39:16Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:39:16Z" level=info msg="==----> initRegistryClient() span:715e3d701f4088f5:6e8df885bc487097:715e3d701f4088f5:1"
time="2021-06-17T15:39:16Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:39:16Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:39:16Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="715e3d701f4088f5:6e8df885bc487097:715e3d701f4088f5:1"
time="2021-06-17T15:39:16Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:39:16Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:39:16Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000182900 {member1.com}:0xc000182980 {member2.com}:0xc000182800]}"
time="2021-06-17T15:39:16Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:39:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:39:16Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:39:16Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:39:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:39:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:39:16Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:39:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:39:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:39:16Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:39:21Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:39:21Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:39:26Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:39:26Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:39:26Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:39:26Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:39:26Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="715e3d701f4088f5:6e8df885bc487097:715e3d701f4088f5:1"
2021/06/17 15:39:26 Reporting span 715e3d701f4088f5:6e8df885bc487097:715e3d701f4088f5:1
{"level":"info","ts":1623944366.9428537,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:39:26Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=715e3d701f4088f5:715e3d701f4088f5:0000000000000000:1"
time="2021-06-17T15:39:26Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=715e3d701f4088f5:715e3d701f4088f5:0000000000000000:1"
2021/06/17 15:39:26 Reporting span 715e3d701f4088f5:1c51d47df07c9edf:715e3d701f4088f5:1
time="2021-06-17T15:39:26Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=715e3d701f4088f5:715e3d701f4088f5:0000000000000000:1"
2021/06/17 15:39:26 Reporting span 715e3d701f4088f5:715e3d701f4088f5:0000000000000000:1
{"level":"info","ts":1623944366.948127,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944366.9481819,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944366.9482207,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944366.9482863,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:39:26Z" level=info msg="==--> discovery.FindNetworkService() span:70b22362291688f5:70b22362291688f5:0000000000000000:1"
time="2021-06-17T15:39:26Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=70b22362291688f5:70b22362291688f5:0000000000000000:1"
time="2021-06-17T15:39:26Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=70b22362291688f5:70b22362291688f5:0000000000000000:1"
time="2021-06-17T15:39:26Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:39:26Z" level=info msg="==----> initRegistryClient() span:70b22362291688f5:48293d2a001e955f:70b22362291688f5:1"
time="2021-06-17T15:39:26Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:39:36Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:39:36Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="70b22362291688f5:48293d2a001e955f:70b22362291688f5:1"
time="2021-06-17T15:39:36Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:39:36Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:39:36Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000137300 {member1.com}:0xc000137080 {member2.com}:0xc000137000]}"
time="2021-06-17T15:39:36Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:39:36Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:39:36Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:39:36Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:39:36Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:39:36Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:39:36Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:39:36Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:39:36Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:39:36Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:39:41Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:39:41Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:39:46Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:39:46Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:39:51Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:39:51Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:39:51Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:39:56Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:39:56Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="70b22362291688f5:48293d2a001e955f:70b22362291688f5:1"
2021/06/17 15:39:56 Reporting span 70b22362291688f5:48293d2a001e955f:70b22362291688f5:1
2021/06/17 15:39:56 Reporting span 70b22362291688f5:70b22362291688f5:0000000000000000:1
{"level":"info","ts":1623944396.948981,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623944396.9490445,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623944396.9490576,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944396.949069,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:39:56Z" level=info msg="==--> discovery.FindNetworkService() span:109ab1c746f706a1:109ab1c746f706a1:0000000000000000:1"
time="2021-06-17T15:39:56Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=109ab1c746f706a1:109ab1c746f706a1:0000000000000000:1"
time="2021-06-17T15:39:56Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=109ab1c746f706a1:109ab1c746f706a1:0000000000000000:1"
time="2021-06-17T15:39:56Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:39:56Z" level=info msg="==----> initRegistryClient() span:109ab1c746f706a1:649bb22f93498a69:109ab1c746f706a1:1"
time="2021-06-17T15:39:56Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:39:56Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:39:56Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="109ab1c746f706a1:649bb22f93498a69:109ab1c746f706a1:1"
time="2021-06-17T15:39:56Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:39:56Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:39:56Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ef400 {member1.com}:0xc0004ef380 {member2.com}:0xc0004ef300]}"
time="2021-06-17T15:39:56Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:39:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:39:56Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:39:56Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:39:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:39:56Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:39:56Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:39:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:39:56Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:39:56Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:40:01Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:40:01Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:40:06Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:40:06Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:40:06Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:40:06Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:40:06Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="109ab1c746f706a1:649bb22f93498a69:109ab1c746f706a1:1"
2021/06/17 15:40:06 Reporting span 109ab1c746f706a1:649bb22f93498a69:109ab1c746f706a1:1
{"level":"info","ts":1623944406.9837656,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:40:06Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=109ab1c746f706a1:109ab1c746f706a1:0000000000000000:1"
time="2021-06-17T15:40:06Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=109ab1c746f706a1:109ab1c746f706a1:0000000000000000:1"
2021/06/17 15:40:06 Reporting span 109ab1c746f706a1:3212c667141cd214:109ab1c746f706a1:1
time="2021-06-17T15:40:06Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=109ab1c746f706a1:109ab1c746f706a1:0000000000000000:1"
2021/06/17 15:40:06 Reporting span 109ab1c746f706a1:109ab1c746f706a1:0000000000000000:1
{"level":"info","ts":1623944406.9889977,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944406.989028,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944406.9891648,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944406.9891796,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:40:06Z" level=info msg="==--> discovery.FindNetworkService() span:200658917ac47385:200658917ac47385:0000000000000000:1"
time="2021-06-17T15:40:06Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=200658917ac47385:200658917ac47385:0000000000000000:1"
time="2021-06-17T15:40:06Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=200658917ac47385:200658917ac47385:0000000000000000:1"
time="2021-06-17T15:40:06Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:40:06Z" level=info msg="==----> initRegistryClient() span:200658917ac47385:00e0b6d3aae82e12:200658917ac47385:1"
time="2021-06-17T15:40:06Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:40:16Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:40:16Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="200658917ac47385:00e0b6d3aae82e12:200658917ac47385:1"
time="2021-06-17T15:40:16Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:40:16Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:40:17Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00085ca00 {member1.com}:0xc00085ca80 {member2.com}:0xc00085c980]}"
time="2021-06-17T15:40:17Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:40:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:40:17Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:40:17Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:40:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:40:17Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:40:17Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:40:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:40:17Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:40:17Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:40:22Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:40:22Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:40:27Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:40:27Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
{"level":"info","ts":1623944431.8395824,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623944431.8397171,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T15:40:32Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:40:32Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:40:32Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:40:36Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:40:36Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="200658917ac47385:00e0b6d3aae82e12:200658917ac47385:1"
2021/06/17 15:40:36 Reporting span 200658917ac47385:00e0b6d3aae82e12:200658917ac47385:1
2021/06/17 15:40:36 Reporting span 200658917ac47385:200658917ac47385:0000000000000000:1
{"level":"info","ts":1623944436.9901397,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623944436.9902081,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623944436.9902194,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944436.9902282,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:40:36Z" level=info msg="==--> discovery.FindNetworkService() span:724de5d1602a3115:724de5d1602a3115:0000000000000000:1"
time="2021-06-17T15:40:36Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=724de5d1602a3115:724de5d1602a3115:0000000000000000:1"
time="2021-06-17T15:40:36Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=724de5d1602a3115:724de5d1602a3115:0000000000000000:1"
time="2021-06-17T15:40:36Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:40:36Z" level=info msg="==----> initRegistryClient() span:724de5d1602a3115:7c0d1088d9f320b5:724de5d1602a3115:1"
time="2021-06-17T15:40:36Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:40:36Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:40:36Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="724de5d1602a3115:7c0d1088d9f320b5:724de5d1602a3115:1"
time="2021-06-17T15:40:36Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:40:36Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:40:37Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000887b40 {member1.com}:0xc000887bc0 {member2.com}:0xc000887ac0]}"
time="2021-06-17T15:40:37Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:40:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:40:37Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:40:37Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:40:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:40:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:40:37Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:40:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:40:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:40:37Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:40:42Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:40:42Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:40:47Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:40:47Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:40:47Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:40:47Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:40:47Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="724de5d1602a3115:7c0d1088d9f320b5:724de5d1602a3115:1"
2021/06/17 15:40:47 Reporting span 724de5d1602a3115:7c0d1088d9f320b5:724de5d1602a3115:1
{"level":"info","ts":1623944447.025796,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:40:47Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=724de5d1602a3115:724de5d1602a3115:0000000000000000:1"
time="2021-06-17T15:40:47Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=724de5d1602a3115:724de5d1602a3115:0000000000000000:1"
2021/06/17 15:40:47 Reporting span 724de5d1602a3115:1239e275d3b4e67c:724de5d1602a3115:1
time="2021-06-17T15:40:47Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=724de5d1602a3115:724de5d1602a3115:0000000000000000:1"
2021/06/17 15:40:47 Reporting span 724de5d1602a3115:724de5d1602a3115:0000000000000000:1
{"level":"info","ts":1623944447.030884,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944447.0309134,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944447.030924,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944447.0309813,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:40:47Z" level=info msg="==--> discovery.FindNetworkService() span:450eb41fa3c565e1:450eb41fa3c565e1:0000000000000000:1"
time="2021-06-17T15:40:47Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=450eb41fa3c565e1:450eb41fa3c565e1:0000000000000000:1"
time="2021-06-17T15:40:47Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=450eb41fa3c565e1:450eb41fa3c565e1:0000000000000000:1"
time="2021-06-17T15:40:47Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:40:47Z" level=info msg="==----> initRegistryClient() span:450eb41fa3c565e1:1af58cebf8c0ccdf:450eb41fa3c565e1:1"
time="2021-06-17T15:40:47Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:41:07Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:41:07Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="450eb41fa3c565e1:1af58cebf8c0ccdf:450eb41fa3c565e1:1"
time="2021-06-17T15:41:07Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:41:07Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:41:07Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000bb480 {member1.com}:0xc0000bb540 {member2.com}:0xc0000bb3c0]}"
time="2021-06-17T15:41:07Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:41:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:41:07Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:41:07Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:41:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:41:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:41:07Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:41:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:41:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:41:07Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:41:12Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:41:12Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:41:17Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:41:17Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:41:22Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:41:22Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:41:22Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:41:22Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:41:22Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="450eb41fa3c565e1:1af58cebf8c0ccdf:450eb41fa3c565e1:1"
2021/06/17 15:41:22 Reporting span 450eb41fa3c565e1:1af58cebf8c0ccdf:450eb41fa3c565e1:1
2021/06/17 15:41:22 Reporting span 450eb41fa3c565e1:450eb41fa3c565e1:0000000000000000:1
{"level":"info","ts":1623944482.0510027,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623944482.0511122,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623944482.0511258,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944482.0511367,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:41:22Z" level=info msg="==--> discovery.FindNetworkService() span:512f3f613ce2d2f5:512f3f613ce2d2f5:0000000000000000:1"
time="2021-06-17T15:41:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=512f3f613ce2d2f5:512f3f613ce2d2f5:0000000000000000:1"
time="2021-06-17T15:41:22Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=512f3f613ce2d2f5:512f3f613ce2d2f5:0000000000000000:1"
time="2021-06-17T15:41:22Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:41:22Z" level=info msg="==----> initRegistryClient() span:512f3f613ce2d2f5:347c44df50c3da96:512f3f613ce2d2f5:1"
time="2021-06-17T15:41:22Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:41:22Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:41:22Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="512f3f613ce2d2f5:347c44df50c3da96:512f3f613ce2d2f5:1"
time="2021-06-17T15:41:22Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:41:22Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:41:22Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000886200 {member1.com}:0xc000886180 {member2.com}:0xc000886100]}"
time="2021-06-17T15:41:22Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:41:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:41:22Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:41:22Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:41:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:41:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:41:22Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:41:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:41:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:41:22Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:41:27Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:41:27Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:41:32Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:41:32Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:41:32Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:41:32Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:41:32Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="512f3f613ce2d2f5:347c44df50c3da96:512f3f613ce2d2f5:1"
2021/06/17 15:41:32 Reporting span 512f3f613ce2d2f5:347c44df50c3da96:512f3f613ce2d2f5:1
{"level":"info","ts":1623944492.089601,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:41:32Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=512f3f613ce2d2f5:512f3f613ce2d2f5:0000000000000000:1"
time="2021-06-17T15:41:32Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=512f3f613ce2d2f5:512f3f613ce2d2f5:0000000000000000:1"
2021/06/17 15:41:32 Reporting span 512f3f613ce2d2f5:50433bb5d1fede99:512f3f613ce2d2f5:1
time="2021-06-17T15:41:32Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=512f3f613ce2d2f5:512f3f613ce2d2f5:0000000000000000:1"
2021/06/17 15:41:32 Reporting span 512f3f613ce2d2f5:512f3f613ce2d2f5:0000000000000000:1
{"level":"info","ts":1623944492.095991,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944492.0960643,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944492.096078,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944492.0960891,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:41:32Z" level=info msg="==--> discovery.FindNetworkService() span:7820ed03e4f15f41:7820ed03e4f15f41:0000000000000000:1"
time="2021-06-17T15:41:32Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7820ed03e4f15f41:7820ed03e4f15f41:0000000000000000:1"
time="2021-06-17T15:41:32Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=7820ed03e4f15f41:7820ed03e4f15f41:0000000000000000:1"
time="2021-06-17T15:41:32Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:41:32Z" level=info msg="==----> initRegistryClient() span:7820ed03e4f15f41:29364b4173242cae:7820ed03e4f15f41:1"
time="2021-06-17T15:41:32Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:41:42Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:41:42Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7820ed03e4f15f41:29364b4173242cae:7820ed03e4f15f41:1"
time="2021-06-17T15:41:42Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:41:42Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:41:42Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000902240 {member1.com}:0xc0009022c0 {member2.com}:0xc0009021c0]}"
time="2021-06-17T15:41:42Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:41:42Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:41:42Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:41:42Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:41:42Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:41:42Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:41:42Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:41:42Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:41:42Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:41:42Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:41:47Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:41:47Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:41:52Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:41:52Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:41:57Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:41:57Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:41:57Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:42:02Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:42:02Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="7820ed03e4f15f41:29364b4173242cae:7820ed03e4f15f41:1"
2021/06/17 15:42:02 Reporting span 7820ed03e4f15f41:29364b4173242cae:7820ed03e4f15f41:1
2021/06/17 15:42:02 Reporting span 7820ed03e4f15f41:7820ed03e4f15f41:0000000000000000:1
{"level":"info","ts":1623944522.097288,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623944522.0973487,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623944522.09736,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944522.0973763,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:42:02Z" level=info msg="==--> discovery.FindNetworkService() span:6348cbf60af1d7ea:6348cbf60af1d7ea:0000000000000000:1"
time="2021-06-17T15:42:02Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6348cbf60af1d7ea:6348cbf60af1d7ea:0000000000000000:1"
time="2021-06-17T15:42:02Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=6348cbf60af1d7ea:6348cbf60af1d7ea:0000000000000000:1"
time="2021-06-17T15:42:02Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:42:02Z" level=info msg="==----> initRegistryClient() span:6348cbf60af1d7ea:0d734c0b0d1218b1:6348cbf60af1d7ea:1"
time="2021-06-17T15:42:02Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:42:02Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:42:02Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6348cbf60af1d7ea:0d734c0b0d1218b1:6348cbf60af1d7ea:1"
time="2021-06-17T15:42:02Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:42:02Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:42:02Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001365c0 {member1.com}:0xc000136400 {member2.com}:0xc0001362c0]}"
time="2021-06-17T15:42:02Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:42:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:42:02Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:42:02Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:42:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:42:02Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:42:02Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:42:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:42:02Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:42:02Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:42:07Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:42:07Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:42:12Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:42:12Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:42:12Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:42:12Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:42:12Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="6348cbf60af1d7ea:0d734c0b0d1218b1:6348cbf60af1d7ea:1"
2021/06/17 15:42:12 Reporting span 6348cbf60af1d7ea:0d734c0b0d1218b1:6348cbf60af1d7ea:1
{"level":"info","ts":1623944532.127764,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:42:12Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6348cbf60af1d7ea:6348cbf60af1d7ea:0000000000000000:1"
time="2021-06-17T15:42:12Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=6348cbf60af1d7ea:6348cbf60af1d7ea:0000000000000000:1"
2021/06/17 15:42:12 Reporting span 6348cbf60af1d7ea:78d8ad7d8b565cf9:6348cbf60af1d7ea:1
time="2021-06-17T15:42:12Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6348cbf60af1d7ea:6348cbf60af1d7ea:0000000000000000:1"
2021/06/17 15:42:12 Reporting span 6348cbf60af1d7ea:6348cbf60af1d7ea:0000000000000000:1
{"level":"info","ts":1623944532.1329772,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944532.1330054,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944532.1330168,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944532.1330273,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:42:12Z" level=info msg="==--> discovery.FindNetworkService() span:2c3b47cc9b5608b5:2c3b47cc9b5608b5:0000000000000000:1"
time="2021-06-17T15:42:12Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2c3b47cc9b5608b5:2c3b47cc9b5608b5:0000000000000000:1"
time="2021-06-17T15:42:12Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=2c3b47cc9b5608b5:2c3b47cc9b5608b5:0000000000000000:1"
time="2021-06-17T15:42:12Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:42:12Z" level=info msg="==----> initRegistryClient() span:2c3b47cc9b5608b5:70ab321253ece1d2:2c3b47cc9b5608b5:1"
time="2021-06-17T15:42:12Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
{"level":"info","ts":1623944551.839963,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623944551.840102,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T15:42:32Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:42:32Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2c3b47cc9b5608b5:70ab321253ece1d2:2c3b47cc9b5608b5:1"
time="2021-06-17T15:42:32Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:42:32Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:42:32Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0006e68c0 {member1.com}:0xc0006e6940 {member2.com}:0xc0006e6840]}"
time="2021-06-17T15:42:32Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:42:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:42:32Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:42:32Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:42:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:42:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:42:32Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:42:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:42:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:42:32Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:42:37Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:42:37Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:42:42Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:42:42Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:42:47Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:42:47Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:42:47Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:42:47Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:42:47Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="2c3b47cc9b5608b5:70ab321253ece1d2:2c3b47cc9b5608b5:1"
2021/06/17 15:42:47 Reporting span 2c3b47cc9b5608b5:70ab321253ece1d2:2c3b47cc9b5608b5:1
2021/06/17 15:42:47 Reporting span 2c3b47cc9b5608b5:2c3b47cc9b5608b5:0000000000000000:1
{"level":"info","ts":1623944567.1516318,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623944567.1516943,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623944567.151708,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944567.1517196,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:42:47Z" level=info msg="==--> discovery.FindNetworkService() span:5ee09c5a0461347f:5ee09c5a0461347f:0000000000000000:1"
time="2021-06-17T15:42:47Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=5ee09c5a0461347f:5ee09c5a0461347f:0000000000000000:1"
time="2021-06-17T15:42:47Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=5ee09c5a0461347f:5ee09c5a0461347f:0000000000000000:1"
time="2021-06-17T15:42:47Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:42:47Z" level=info msg="==----> initRegistryClient() span:5ee09c5a0461347f:11065700f5779630:5ee09c5a0461347f:1"
time="2021-06-17T15:42:47Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:42:47Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:42:47Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5ee09c5a0461347f:11065700f5779630:5ee09c5a0461347f:1"
time="2021-06-17T15:42:47Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:42:47Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:42:47Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000bb140 {member1.com}:0xc0000bb1c0 {member2.com}:0xc0000bb0c0]}"
time="2021-06-17T15:42:47Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:42:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:42:47Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:42:47Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:42:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:42:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:42:47Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:42:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:42:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:42:47Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:42:52Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:42:52Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:42:57Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:42:57Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:42:57Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:42:57Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:42:57Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="5ee09c5a0461347f:11065700f5779630:5ee09c5a0461347f:1"
2021/06/17 15:42:57 Reporting span 5ee09c5a0461347f:11065700f5779630:5ee09c5a0461347f:1
{"level":"info","ts":1623944577.182636,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:42:57Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5ee09c5a0461347f:5ee09c5a0461347f:0000000000000000:1"
time="2021-06-17T15:42:57Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=5ee09c5a0461347f:5ee09c5a0461347f:0000000000000000:1"
2021/06/17 15:42:57 Reporting span 5ee09c5a0461347f:0abfffe0bbef3614:5ee09c5a0461347f:1
time="2021-06-17T15:42:57Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5ee09c5a0461347f:5ee09c5a0461347f:0000000000000000:1"
2021/06/17 15:42:57 Reporting span 5ee09c5a0461347f:5ee09c5a0461347f:0000000000000000:1
{"level":"info","ts":1623944577.1874385,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944577.1874886,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944577.1875014,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944577.1875458,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:42:57Z" level=info msg="==--> discovery.FindNetworkService() span:3ae61965e0947ab9:3ae61965e0947ab9:0000000000000000:1"
time="2021-06-17T15:42:57Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3ae61965e0947ab9:3ae61965e0947ab9:0000000000000000:1"
time="2021-06-17T15:42:57Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=3ae61965e0947ab9:3ae61965e0947ab9:0000000000000000:1"
time="2021-06-17T15:42:57Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:42:57Z" level=info msg="==----> initRegistryClient() span:3ae61965e0947ab9:2ae4438f7f597e1e:3ae61965e0947ab9:1"
time="2021-06-17T15:42:57Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:43:07Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:43:07Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3ae61965e0947ab9:2ae4438f7f597e1e:3ae61965e0947ab9:1"
time="2021-06-17T15:43:07Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:43:07Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:43:07Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001823c0 {member1.com}:0xc000182440 {member2.com}:0xc000182040]}"
time="2021-06-17T15:43:07Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:43:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:43:07Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:43:07Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:43:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:43:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:43:07Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:43:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:43:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:43:07Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:43:12Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:43:12Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:43:17Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:43:17Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:43:22Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:43:22Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:43:22Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:43:27Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:43:27Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="3ae61965e0947ab9:2ae4438f7f597e1e:3ae61965e0947ab9:1"
2021/06/17 15:43:27 Reporting span 3ae61965e0947ab9:2ae4438f7f597e1e:3ae61965e0947ab9:1
2021/06/17 15:43:27 Reporting span 3ae61965e0947ab9:3ae61965e0947ab9:0000000000000000:1
{"level":"info","ts":1623944607.1885364,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623944607.1885896,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623944607.1886027,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944607.1886566,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:43:27Z" level=info msg="==--> discovery.FindNetworkService() span:1562f010aa3e2ca0:1562f010aa3e2ca0:0000000000000000:1"
time="2021-06-17T15:43:27Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1562f010aa3e2ca0:1562f010aa3e2ca0:0000000000000000:1"
time="2021-06-17T15:43:27Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=1562f010aa3e2ca0:1562f010aa3e2ca0:0000000000000000:1"
time="2021-06-17T15:43:27Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:43:27Z" level=info msg="==----> initRegistryClient() span:1562f010aa3e2ca0:2fb7a08685167973:1562f010aa3e2ca0:1"
time="2021-06-17T15:43:27Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:43:27Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:43:27Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1562f010aa3e2ca0:2fb7a08685167973:1562f010aa3e2ca0:1"
time="2021-06-17T15:43:27Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:43:27Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:43:27Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000902500 {member1.com}:0xc000902580 {member2.com}:0xc000902480]}"
time="2021-06-17T15:43:27Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:43:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:43:27Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:43:27Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:43:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:43:27Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:43:27Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:43:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:43:27Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:43:27Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:43:32Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:43:32Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:43:37Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:43:37Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:43:37Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:43:37Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:43:37Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="1562f010aa3e2ca0:2fb7a08685167973:1562f010aa3e2ca0:1"
2021/06/17 15:43:37 Reporting span 1562f010aa3e2ca0:2fb7a08685167973:1562f010aa3e2ca0:1
{"level":"info","ts":1623944617.2207806,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:43:37Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1562f010aa3e2ca0:1562f010aa3e2ca0:0000000000000000:1"
time="2021-06-17T15:43:37Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=1562f010aa3e2ca0:1562f010aa3e2ca0:0000000000000000:1"
2021/06/17 15:43:37 Reporting span 1562f010aa3e2ca0:4904b837b817bd8f:1562f010aa3e2ca0:1
time="2021-06-17T15:43:37Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1562f010aa3e2ca0:1562f010aa3e2ca0:0000000000000000:1"
2021/06/17 15:43:37 Reporting span 1562f010aa3e2ca0:1562f010aa3e2ca0:0000000000000000:1
{"level":"info","ts":1623944617.2263613,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944617.2264621,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944617.2265236,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944617.2266715,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:43:37Z" level=info msg="==--> discovery.FindNetworkService() span:3aada99c1e43212f:3aada99c1e43212f:0000000000000000:1"
time="2021-06-17T15:43:37Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3aada99c1e43212f:3aada99c1e43212f:0000000000000000:1"
time="2021-06-17T15:43:37Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=3aada99c1e43212f:3aada99c1e43212f:0000000000000000:1"
time="2021-06-17T15:43:37Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:43:37Z" level=info msg="==----> initRegistryClient() span:3aada99c1e43212f:788d07f18f842e11:3aada99c1e43212f:1"
time="2021-06-17T15:43:37Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:43:37Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:43:37Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3aada99c1e43212f:788d07f18f842e11:3aada99c1e43212f:1"
time="2021-06-17T15:43:37Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:43:37Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:43:37Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0008874c0 {member1.com}:0xc000887540 {member2.com}:0xc000887440]}"
time="2021-06-17T15:43:37Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:43:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:43:37Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:43:37Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:43:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:43:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:43:37Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:43:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:43:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:43:37Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:43:37Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:43:37Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:43:37Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="3aada99c1e43212f:788d07f18f842e11:3aada99c1e43212f:1"
2021/06/17 15:43:37 Reporting span 3aada99c1e43212f:788d07f18f842e11:3aada99c1e43212f:1
{"level":"info","ts":1623944617.2705443,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:43:37Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=3aada99c1e43212f:3aada99c1e43212f:0000000000000000:1"
time="2021-06-17T15:43:37Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=3aada99c1e43212f:3aada99c1e43212f:0000000000000000:1"
2021/06/17 15:43:37 Reporting span 3aada99c1e43212f:67abf2ce4e2d6399:3aada99c1e43212f:1
time="2021-06-17T15:43:37Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=3aada99c1e43212f:3aada99c1e43212f:0000000000000000:1"
2021/06/17 15:43:37 Reporting span 3aada99c1e43212f:3aada99c1e43212f:0000000000000000:1
{"level":"info","ts":1623944617.2756312,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623944617.2756603,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623944617.2756898,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944617.275702,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944617.2757125,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623944617.2757254,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623944617.2757351,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623944617.2757578,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944617.2757692,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944617.275783,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944617.2757924,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944617.2758062,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944617.2758157,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944617.2758243,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623944617.2758524,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623944617.2758636,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944617.2758727,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944617.2758818,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623944617.2758906,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623944617.2758994,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623944617.2759135,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623944617.2759197,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944617.275927,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:43:37Z" level=info msg="==--> discovery.FindNetworkService() span:5906d41d554c883c:5906d41d554c883c:0000000000000000:1"
time="2021-06-17T15:43:37Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=5906d41d554c883c:5906d41d554c883c:0000000000000000:1"
time="2021-06-17T15:43:37Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=5906d41d554c883c:5906d41d554c883c:0000000000000000:1"
time="2021-06-17T15:43:37Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:43:37Z" level=info msg="==----> initRegistryClient() span:5906d41d554c883c:703fcdc2f89d48c6:5906d41d554c883c:1"
time="2021-06-17T15:43:37Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:43:37Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:43:37Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5906d41d554c883c:703fcdc2f89d48c6:5906d41d554c883c:1"
time="2021-06-17T15:43:37Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:43:37Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:43:37Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000bb600 {member1.com}:0xc0000bb500 {member2.com}:0xc0000bb440]}"
time="2021-06-17T15:43:37Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:43:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:43:37Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:43:37Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:43:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:43:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:43:37Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:43:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:43:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:43:37Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:43:42Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:43:42Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:43:47Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:43:47Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:43:47Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:43:47Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:43:47Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="5906d41d554c883c:703fcdc2f89d48c6:5906d41d554c883c:1"
2021/06/17 15:43:47 Reporting span 5906d41d554c883c:703fcdc2f89d48c6:5906d41d554c883c:1
{"level":"info","ts":1623944627.32603,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:43:47Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5906d41d554c883c:5906d41d554c883c:0000000000000000:1"
time="2021-06-17T15:43:47Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=5906d41d554c883c:5906d41d554c883c:0000000000000000:1"
2021/06/17 15:43:47 Reporting span 5906d41d554c883c:4601ad3a6c77df7f:5906d41d554c883c:1
time="2021-06-17T15:43:47Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5906d41d554c883c:5906d41d554c883c:0000000000000000:1"
2021/06/17 15:43:47 Reporting span 5906d41d554c883c:5906d41d554c883c:0000000000000000:1
{"level":"info","ts":1623944627.3354132,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944627.3354485,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944627.3354726,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944627.3354843,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:43:47Z" level=info msg="==--> discovery.FindNetworkService() span:79452f23e7c7101c:79452f23e7c7101c:0000000000000000:1"
time="2021-06-17T15:43:47Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=79452f23e7c7101c:79452f23e7c7101c:0000000000000000:1"
time="2021-06-17T15:43:47Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=79452f23e7c7101c:79452f23e7c7101c:0000000000000000:1"
time="2021-06-17T15:43:47Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:43:47Z" level=info msg="==----> initRegistryClient() span:79452f23e7c7101c:44520d88477b8968:79452f23e7c7101c:1"
time="2021-06-17T15:43:47Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:43:47Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:43:47Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="79452f23e7c7101c:44520d88477b8968:79452f23e7c7101c:1"
time="2021-06-17T15:43:47Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:43:47Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:43:47Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000903480 {member1.com}:0xc000903500 {member2.com}:0xc0009033c0]}"
time="2021-06-17T15:43:47Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:43:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:43:47Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:43:47Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:43:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:43:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:43:47Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:43:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:43:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:43:47Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:43:47Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:43:47Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:43:47Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="79452f23e7c7101c:44520d88477b8968:79452f23e7c7101c:1"
2021/06/17 15:43:47 Reporting span 79452f23e7c7101c:44520d88477b8968:79452f23e7c7101c:1
{"level":"info","ts":1623944627.3738868,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:43:47Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=79452f23e7c7101c:79452f23e7c7101c:0000000000000000:1"
time="2021-06-17T15:43:47Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=79452f23e7c7101c:79452f23e7c7101c:0000000000000000:1"
2021/06/17 15:43:47 Reporting span 79452f23e7c7101c:7ab3f0c3918ef856:79452f23e7c7101c:1
time="2021-06-17T15:43:47Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=79452f23e7c7101c:79452f23e7c7101c:0000000000000000:1"
2021/06/17 15:43:47 Reporting span 79452f23e7c7101c:79452f23e7c7101c:0000000000000000:1
{"level":"info","ts":1623944627.376501,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623944627.3765247,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623944627.376638,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944627.3766716,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944627.3766856,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623944627.376729,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623944627.376777,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623944627.37679,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944627.376798,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944627.3768067,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944627.3768172,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944627.3768678,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944627.3768938,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944627.376901,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623944627.3769085,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623944627.3769174,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944627.3769257,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944627.376935,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623944627.376943,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623944627.3769522,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623944671.840323,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623944671.8404226,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623944671.8406909,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944671.840717,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:44:31Z" level=info msg="==--> discovery.FindNetworkService() span:21a3c16e806d1a1e:21a3c16e806d1a1e:0000000000000000:1"
{"level":"info","ts":1623944671.8404775,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T15:44:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=21a3c16e806d1a1e:21a3c16e806d1a1e:0000000000000000:1"
time="2021-06-17T15:44:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=21a3c16e806d1a1e:21a3c16e806d1a1e:0000000000000000:1"
time="2021-06-17T15:44:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:44:31Z" level=info msg="==----> initRegistryClient() span:21a3c16e806d1a1e:44297a1938b44ceb:21a3c16e806d1a1e:1"
time="2021-06-17T15:44:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:44:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:44:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="21a3c16e806d1a1e:44297a1938b44ceb:21a3c16e806d1a1e:1"
time="2021-06-17T15:44:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:44:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:44:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0006e6140 {member1.com}:0xc0006e61c0 {member2.com}:0xc0006e60c0]}"
time="2021-06-17T15:44:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:44:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:44:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:44:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:44:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:44:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:44:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:44:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:44:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:44:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:44:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:44:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:44:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:44:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:44:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:44:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:44:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="21a3c16e806d1a1e:44297a1938b44ceb:21a3c16e806d1a1e:1"
2021/06/17 15:44:41 Reporting span 21a3c16e806d1a1e:44297a1938b44ceb:21a3c16e806d1a1e:1
{"level":"info","ts":1623944681.8763351,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:44:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=21a3c16e806d1a1e:21a3c16e806d1a1e:0000000000000000:1"
time="2021-06-17T15:44:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=21a3c16e806d1a1e:21a3c16e806d1a1e:0000000000000000:1"
2021/06/17 15:44:41 Reporting span 21a3c16e806d1a1e:7c7f34a90a0c828e:21a3c16e806d1a1e:1
time="2021-06-17T15:44:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=21a3c16e806d1a1e:21a3c16e806d1a1e:0000000000000000:1"
2021/06/17 15:44:41 Reporting span 21a3c16e806d1a1e:21a3c16e806d1a1e:0000000000000000:1
{"level":"info","ts":1623944681.8822136,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944681.8822494,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944681.8825397,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944681.8826144,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:44:41Z" level=info msg="==--> discovery.FindNetworkService() span:7182f336bfb761a6:7182f336bfb761a6:0000000000000000:1"
time="2021-06-17T15:44:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7182f336bfb761a6:7182f336bfb761a6:0000000000000000:1"
time="2021-06-17T15:44:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=7182f336bfb761a6:7182f336bfb761a6:0000000000000000:1"
time="2021-06-17T15:44:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:44:41Z" level=info msg="==----> initRegistryClient() span:7182f336bfb761a6:15e8e660bfbf0e0e:7182f336bfb761a6:1"
time="2021-06-17T15:44:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:44:51Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:44:51Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7182f336bfb761a6:15e8e660bfbf0e0e:7182f336bfb761a6:1"
time="2021-06-17T15:44:51Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:44:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:44:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ee780 {member1.com}:0xc0004ee800 {member2.com}:0xc0004ee700]}"
time="2021-06-17T15:44:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:44:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:44:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:44:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:44:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:44:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:44:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:44:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:44:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:44:51Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:44:56Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:44:56Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:45:01Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:45:01Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:45:06Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:45:06Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:45:06Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:45:11Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:45:11Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="7182f336bfb761a6:15e8e660bfbf0e0e:7182f336bfb761a6:1"
2021/06/17 15:45:11 Reporting span 7182f336bfb761a6:15e8e660bfbf0e0e:7182f336bfb761a6:1
2021/06/17 15:45:11 Reporting span 7182f336bfb761a6:7182f336bfb761a6:0000000000000000:1
{"level":"info","ts":1623944711.883522,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623944711.8835864,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623944711.883599,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944711.8836107,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:45:11Z" level=info msg="==--> discovery.FindNetworkService() span:357a6e96a3096f80:357a6e96a3096f80:0000000000000000:1"
time="2021-06-17T15:45:11Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=357a6e96a3096f80:357a6e96a3096f80:0000000000000000:1"
time="2021-06-17T15:45:11Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=357a6e96a3096f80:357a6e96a3096f80:0000000000000000:1"
time="2021-06-17T15:45:11Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:45:11Z" level=info msg="==----> initRegistryClient() span:357a6e96a3096f80:2434ed074e0ead36:357a6e96a3096f80:1"
time="2021-06-17T15:45:11Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:45:11Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:45:11Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="357a6e96a3096f80:2434ed074e0ead36:357a6e96a3096f80:1"
time="2021-06-17T15:45:11Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:45:11Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:45:11Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000902500 {member1.com}:0xc000902580 {member2.com}:0xc000902480]}"
time="2021-06-17T15:45:11Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:45:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:45:11Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:45:11Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:45:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:45:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:45:11Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:45:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:45:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:45:11Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:45:16Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:45:16Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:45:21Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:45:21Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:45:21Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:45:21Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:45:21Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="357a6e96a3096f80:2434ed074e0ead36:357a6e96a3096f80:1"
2021/06/17 15:45:21 Reporting span 357a6e96a3096f80:2434ed074e0ead36:357a6e96a3096f80:1
{"level":"info","ts":1623944721.9125984,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:45:21Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=357a6e96a3096f80:357a6e96a3096f80:0000000000000000:1"
time="2021-06-17T15:45:21Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=357a6e96a3096f80:357a6e96a3096f80:0000000000000000:1"
2021/06/17 15:45:21 Reporting span 357a6e96a3096f80:0088144d2e400084:357a6e96a3096f80:1
time="2021-06-17T15:45:21Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=357a6e96a3096f80:357a6e96a3096f80:0000000000000000:1"
2021/06/17 15:45:21 Reporting span 357a6e96a3096f80:357a6e96a3096f80:0000000000000000:1
{"level":"info","ts":1623944721.9189909,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944721.919024,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944721.9196143,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944721.9196422,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:45:21Z" level=info msg="==--> discovery.FindNetworkService() span:498308fe2eaa351b:498308fe2eaa351b:0000000000000000:1"
time="2021-06-17T15:45:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=498308fe2eaa351b:498308fe2eaa351b:0000000000000000:1"
time="2021-06-17T15:45:21Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=498308fe2eaa351b:498308fe2eaa351b:0000000000000000:1"
time="2021-06-17T15:45:21Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:45:21Z" level=info msg="==----> initRegistryClient() span:498308fe2eaa351b:58cc5acda7a2889a:498308fe2eaa351b:1"
time="2021-06-17T15:45:21Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:45:21Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:45:21Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="498308fe2eaa351b:58cc5acda7a2889a:498308fe2eaa351b:1"
time="2021-06-17T15:45:21Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:45:21Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:45:21Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000358600 {member1.com}:0xc000358680 {member2.com}:0xc000358580]}"
time="2021-06-17T15:45:21Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:45:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:45:21Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:45:21Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:45:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:45:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:45:21Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:45:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:45:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:45:21Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:45:26Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:45:26Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:45:31Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:45:31Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:45:36Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:45:36Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:45:36Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:45:51Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:45:51Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="498308fe2eaa351b:58cc5acda7a2889a:498308fe2eaa351b:1"
2021/06/17 15:45:51 Reporting span 498308fe2eaa351b:58cc5acda7a2889a:498308fe2eaa351b:1
2021/06/17 15:45:51 Reporting span 498308fe2eaa351b:498308fe2eaa351b:0000000000000000:1
{"level":"info","ts":1623944751.9210327,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623944751.9211185,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623944751.921371,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944751.9214232,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:45:51Z" level=info msg="==--> discovery.FindNetworkService() span:398662b8c3cc5fe2:398662b8c3cc5fe2:0000000000000000:1"
time="2021-06-17T15:45:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=398662b8c3cc5fe2:398662b8c3cc5fe2:0000000000000000:1"
time="2021-06-17T15:45:51Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=398662b8c3cc5fe2:398662b8c3cc5fe2:0000000000000000:1"
time="2021-06-17T15:45:51Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:45:51Z" level=info msg="==----> initRegistryClient() span:398662b8c3cc5fe2:030fd8770f9b6def:398662b8c3cc5fe2:1"
time="2021-06-17T15:45:51Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:45:51Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:45:51Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="398662b8c3cc5fe2:030fd8770f9b6def:398662b8c3cc5fe2:1"
time="2021-06-17T15:45:51Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:45:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:45:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0008657c0 {member1.com}:0xc000865740 {member2.com}:0xc0008656c0]}"
time="2021-06-17T15:45:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:45:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:45:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:45:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:45:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:45:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:45:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:45:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:45:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:45:51Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:45:56Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:45:56Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:46:01Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:46:01Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:46:01Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:46:01Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:46:01Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="398662b8c3cc5fe2:030fd8770f9b6def:398662b8c3cc5fe2:1"
2021/06/17 15:46:01 Reporting span 398662b8c3cc5fe2:030fd8770f9b6def:398662b8c3cc5fe2:1
{"level":"info","ts":1623944761.9529798,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:46:01Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=398662b8c3cc5fe2:398662b8c3cc5fe2:0000000000000000:1"
time="2021-06-17T15:46:01Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=398662b8c3cc5fe2:398662b8c3cc5fe2:0000000000000000:1"
2021/06/17 15:46:01 Reporting span 398662b8c3cc5fe2:62bf046cd9daa92d:398662b8c3cc5fe2:1
time="2021-06-17T15:46:01Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=398662b8c3cc5fe2:398662b8c3cc5fe2:0000000000000000:1"
2021/06/17 15:46:01 Reporting span 398662b8c3cc5fe2:398662b8c3cc5fe2:0000000000000000:1
{"level":"info","ts":1623944761.9586766,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944761.9587095,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944761.9587207,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944761.9587324,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:46:01Z" level=info msg="==--> discovery.FindNetworkService() span:614547aaf608a507:614547aaf608a507:0000000000000000:1"
time="2021-06-17T15:46:01Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=614547aaf608a507:614547aaf608a507:0000000000000000:1"
time="2021-06-17T15:46:01Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=614547aaf608a507:614547aaf608a507:0000000000000000:1"
time="2021-06-17T15:46:01Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:46:01Z" level=info msg="==----> initRegistryClient() span:614547aaf608a507:6a0cdfb53db65514:614547aaf608a507:1"
time="2021-06-17T15:46:01Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:46:21Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:46:21Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="614547aaf608a507:6a0cdfb53db65514:614547aaf608a507:1"
time="2021-06-17T15:46:21Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:46:21Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:46:21Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000359b00 {member1.com}:0xc000359b80 {member2.com}:0xc000359a80]}"
time="2021-06-17T15:46:21Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:46:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:46:21Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:46:21Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:46:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:46:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:46:21Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:46:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:46:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:46:21Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:46:26Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:46:26Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
{"level":"info","ts":1623944791.8407004,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623944791.8409278,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T15:46:31Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:46:31Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:46:36Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:46:36Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:46:36Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:46:36Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:46:36Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="614547aaf608a507:6a0cdfb53db65514:614547aaf608a507:1"
2021/06/17 15:46:36 Reporting span 614547aaf608a507:6a0cdfb53db65514:614547aaf608a507:1
2021/06/17 15:46:36 Reporting span 614547aaf608a507:614547aaf608a507:0000000000000000:1
{"level":"info","ts":1623944796.9855607,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623944796.985676,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623944796.985719,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944796.9857826,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:46:36Z" level=info msg="==--> discovery.FindNetworkService() span:2a1d589bee9d1c53:2a1d589bee9d1c53:0000000000000000:1"
time="2021-06-17T15:46:36Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2a1d589bee9d1c53:2a1d589bee9d1c53:0000000000000000:1"
time="2021-06-17T15:46:36Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=2a1d589bee9d1c53:2a1d589bee9d1c53:0000000000000000:1"
time="2021-06-17T15:46:36Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:46:36Z" level=info msg="==----> initRegistryClient() span:2a1d589bee9d1c53:1e398b081cab7cca:2a1d589bee9d1c53:1"
time="2021-06-17T15:46:36Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:46:36Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:46:36Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2a1d589bee9d1c53:1e398b081cab7cca:2a1d589bee9d1c53:1"
time="2021-06-17T15:46:36Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:46:36Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:46:37Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0009020c0 {member1.com}:0xc000902140 {member2.com}:0xc000902040]}"
time="2021-06-17T15:46:37Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:46:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:46:37Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:46:37Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:46:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:46:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:46:37Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:46:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:46:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:46:37Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:46:42Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:46:42Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:46:47Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:46:47Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:46:47Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:46:47Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:46:47Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="2a1d589bee9d1c53:1e398b081cab7cca:2a1d589bee9d1c53:1"
2021/06/17 15:46:47 Reporting span 2a1d589bee9d1c53:1e398b081cab7cca:2a1d589bee9d1c53:1
{"level":"info","ts":1623944807.0311933,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:46:47Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2a1d589bee9d1c53:2a1d589bee9d1c53:0000000000000000:1"
time="2021-06-17T15:46:47Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=2a1d589bee9d1c53:2a1d589bee9d1c53:0000000000000000:1"
2021/06/17 15:46:47 Reporting span 2a1d589bee9d1c53:32a3bbb5bf8d4436:2a1d589bee9d1c53:1
time="2021-06-17T15:46:47Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2a1d589bee9d1c53:2a1d589bee9d1c53:0000000000000000:1"
2021/06/17 15:46:47 Reporting span 2a1d589bee9d1c53:2a1d589bee9d1c53:0000000000000000:1
{"level":"info","ts":1623944807.0370915,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944807.0374923,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944807.0375218,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944807.0375342,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:46:47Z" level=info msg="==--> discovery.FindNetworkService() span:651c696c300678f6:651c696c300678f6:0000000000000000:1"
time="2021-06-17T15:46:47Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=651c696c300678f6:651c696c300678f6:0000000000000000:1"
time="2021-06-17T15:46:47Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=651c696c300678f6:651c696c300678f6:0000000000000000:1"
time="2021-06-17T15:46:47Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:46:47Z" level=info msg="==----> initRegistryClient() span:651c696c300678f6:1b238c54f8d75f86:651c696c300678f6:1"
time="2021-06-17T15:46:47Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:47:07Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:47:07Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="651c696c300678f6:1b238c54f8d75f86:651c696c300678f6:1"
time="2021-06-17T15:47:07Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:47:07Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:47:07Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00088af80 {member1.com}:0xc00088b000 {member2.com}:0xc00088af00]}"
time="2021-06-17T15:47:07Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:47:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:47:07Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:47:07Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:47:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:47:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:47:07Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:47:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:47:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:47:07Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:47:12Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:47:12Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:47:17Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:47:17Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:47:22Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:47:22Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:47:22Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:47:22Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:47:22Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="651c696c300678f6:1b238c54f8d75f86:651c696c300678f6:1"
2021/06/17 15:47:22 Reporting span 651c696c300678f6:1b238c54f8d75f86:651c696c300678f6:1
2021/06/17 15:47:22 Reporting span 651c696c300678f6:651c696c300678f6:0000000000000000:1
{"level":"info","ts":1623944842.0582976,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623944842.0584013,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623944842.0584562,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944842.0584707,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:47:22Z" level=info msg="==--> discovery.FindNetworkService() span:205e0209f2930799:205e0209f2930799:0000000000000000:1"
time="2021-06-17T15:47:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=205e0209f2930799:205e0209f2930799:0000000000000000:1"
time="2021-06-17T15:47:22Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=205e0209f2930799:205e0209f2930799:0000000000000000:1"
time="2021-06-17T15:47:22Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:47:22Z" level=info msg="==----> initRegistryClient() span:205e0209f2930799:00825f4b0fbc52fe:205e0209f2930799:1"
time="2021-06-17T15:47:22Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:47:22Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:47:22Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="205e0209f2930799:00825f4b0fbc52fe:205e0209f2930799:1"
time="2021-06-17T15:47:22Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:47:22Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:47:22Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000bb180 {member1.com}:0xc0000bb200 {member2.com}:0xc0000bb100]}"
time="2021-06-17T15:47:22Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:47:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:47:22Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:47:22Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:47:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:47:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:47:22Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:47:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:47:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:47:22Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:47:27Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:47:27Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:47:32Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:47:32Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:47:32Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:47:32Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:47:32Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="205e0209f2930799:00825f4b0fbc52fe:205e0209f2930799:1"
2021/06/17 15:47:32 Reporting span 205e0209f2930799:00825f4b0fbc52fe:205e0209f2930799:1
{"level":"info","ts":1623944852.0920966,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:47:32Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=205e0209f2930799:205e0209f2930799:0000000000000000:1"
time="2021-06-17T15:47:32Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=205e0209f2930799:205e0209f2930799:0000000000000000:1"
2021/06/17 15:47:32 Reporting span 205e0209f2930799:0db4b03f70bb0d44:205e0209f2930799:1
time="2021-06-17T15:47:32Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=205e0209f2930799:205e0209f2930799:0000000000000000:1"
2021/06/17 15:47:32 Reporting span 205e0209f2930799:205e0209f2930799:0000000000000000:1
{"level":"info","ts":1623944852.0995336,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944852.0996883,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944852.0997636,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944852.0999002,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:47:32Z" level=info msg="==--> discovery.FindNetworkService() span:3dba42cec155ccb8:3dba42cec155ccb8:0000000000000000:1"
time="2021-06-17T15:47:32Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3dba42cec155ccb8:3dba42cec155ccb8:0000000000000000:1"
time="2021-06-17T15:47:32Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=3dba42cec155ccb8:3dba42cec155ccb8:0000000000000000:1"
time="2021-06-17T15:47:32Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:47:32Z" level=info msg="==----> initRegistryClient() span:3dba42cec155ccb8:6696e9d8aa210641:3dba42cec155ccb8:1"
time="2021-06-17T15:47:32Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:47:42Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:47:42Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3dba42cec155ccb8:6696e9d8aa210641:3dba42cec155ccb8:1"
time="2021-06-17T15:47:42Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:47:42Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:47:42Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000864840 {member1.com}:0xc0008648c0 {member2.com}:0xc0008647c0]}"
time="2021-06-17T15:47:42Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:47:42Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:47:42Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:47:42Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:47:42Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:47:42Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:47:42Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:47:42Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:47:42Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:47:42Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:47:42Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:47:42Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:47:42Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="3dba42cec155ccb8:6696e9d8aa210641:3dba42cec155ccb8:1"
2021/06/17 15:47:42 Reporting span 3dba42cec155ccb8:6696e9d8aa210641:3dba42cec155ccb8:1
{"level":"info","ts":1623944862.1462975,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:47:42Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=3dba42cec155ccb8:3dba42cec155ccb8:0000000000000000:1"
time="2021-06-17T15:47:42Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=3dba42cec155ccb8:3dba42cec155ccb8:0000000000000000:1"
2021/06/17 15:47:42 Reporting span 3dba42cec155ccb8:2f1ac3f9426f7775:3dba42cec155ccb8:1
time="2021-06-17T15:47:42Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=3dba42cec155ccb8:3dba42cec155ccb8:0000000000000000:1"
2021/06/17 15:47:42 Reporting span 3dba42cec155ccb8:3dba42cec155ccb8:0000000000000000:1
{"level":"info","ts":1623944862.1489115,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623944862.1489358,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623944862.148948,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944862.1490128,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944862.1490507,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623944862.1491082,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623944862.1491911,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623944862.1493297,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944862.1493447,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944862.1493547,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944862.149397,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944862.1494303,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944862.149441,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944862.1494942,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623944862.1495087,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623944862.149546,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944862.1495728,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944862.1495843,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623944862.1496427,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623944862.149675,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623944862.149715,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623944862.1497922,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944862.1498713,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:47:42Z" level=info msg="==--> discovery.FindNetworkService() span:173ff137c96764e6:173ff137c96764e6:0000000000000000:1"
time="2021-06-17T15:47:42Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=173ff137c96764e6:173ff137c96764e6:0000000000000000:1"
time="2021-06-17T15:47:42Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=173ff137c96764e6:173ff137c96764e6:0000000000000000:1"
time="2021-06-17T15:47:42Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:47:42Z" level=info msg="==----> initRegistryClient() span:173ff137c96764e6:37e86740c38a261e:173ff137c96764e6:1"
time="2021-06-17T15:47:42Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:47:42Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:47:42Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="173ff137c96764e6:37e86740c38a261e:173ff137c96764e6:1"
time="2021-06-17T15:47:42Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:47:42Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:47:42Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0008655c0 {member1.com}:0xc000865640 {member2.com}:0xc000865540]}"
time="2021-06-17T15:47:42Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:47:42Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:47:42Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:47:42Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:47:42Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:47:42Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:47:42Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:47:42Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:47:42Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:47:42Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:47:47Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:47:47Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:47:52Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:47:52Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:47:52Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:47:52Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:47:52Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="173ff137c96764e6:37e86740c38a261e:173ff137c96764e6:1"
2021/06/17 15:47:52 Reporting span 173ff137c96764e6:37e86740c38a261e:173ff137c96764e6:1
{"level":"info","ts":1623944872.1848438,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:47:52Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=173ff137c96764e6:173ff137c96764e6:0000000000000000:1"
time="2021-06-17T15:47:52Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=173ff137c96764e6:173ff137c96764e6:0000000000000000:1"
2021/06/17 15:47:52 Reporting span 173ff137c96764e6:51675b5fdf4c3ba1:173ff137c96764e6:1
time="2021-06-17T15:47:52Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=173ff137c96764e6:173ff137c96764e6:0000000000000000:1"
2021/06/17 15:47:52 Reporting span 173ff137c96764e6:173ff137c96764e6:0000000000000000:1
{"level":"info","ts":1623944872.1905696,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944872.1905987,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944872.1906111,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944872.1906672,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:47:52Z" level=info msg="==--> discovery.FindNetworkService() span:055d877fec85a427:055d877fec85a427:0000000000000000:1"
time="2021-06-17T15:47:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=055d877fec85a427:055d877fec85a427:0000000000000000:1"
time="2021-06-17T15:47:52Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=055d877fec85a427:055d877fec85a427:0000000000000000:1"
time="2021-06-17T15:47:52Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:47:52Z" level=info msg="==----> initRegistryClient() span:055d877fec85a427:774d01d7e70d2ff9:055d877fec85a427:1"
time="2021-06-17T15:47:52Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:47:52Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:47:52Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="055d877fec85a427:774d01d7e70d2ff9:055d877fec85a427:1"
time="2021-06-17T15:47:52Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:47:52Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:47:52Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000136a40 {member1.com}:0xc0001369c0 {member2.com}:0xc000136900]}"
time="2021-06-17T15:47:52Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:47:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:47:52Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:47:52Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:47:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:47:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:47:52Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:47:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:47:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:47:52Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:47:52Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:47:52Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:47:52Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="055d877fec85a427:774d01d7e70d2ff9:055d877fec85a427:1"
2021/06/17 15:47:52 Reporting span 055d877fec85a427:774d01d7e70d2ff9:055d877fec85a427:1
{"level":"info","ts":1623944872.229772,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:47:52Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=055d877fec85a427:055d877fec85a427:0000000000000000:1"
time="2021-06-17T15:47:52Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=055d877fec85a427:055d877fec85a427:0000000000000000:1"
2021/06/17 15:47:52 Reporting span 055d877fec85a427:1532ada5bec628ce:055d877fec85a427:1
time="2021-06-17T15:47:52Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=055d877fec85a427:055d877fec85a427:0000000000000000:1"
2021/06/17 15:47:52 Reporting span 055d877fec85a427:055d877fec85a427:0000000000000000:1
{"level":"info","ts":1623944872.232693,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623944872.233015,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623944872.2330384,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944872.2330492,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944872.2330585,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623944872.233074,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623944872.2330832,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623944872.2330916,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944872.2331011,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944872.2331107,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944872.2331204,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944872.2350128,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944872.2350595,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944872.2350717,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623944872.235082,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623944872.2350907,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944872.2350993,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944872.2351084,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623944872.2351177,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623944872.2351255,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623944911.841011,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623944911.8411498,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623944911.8412035,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944911.8413532,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:48:31Z" level=info msg="==--> discovery.FindNetworkService() span:155b210edc8ded82:155b210edc8ded82:0000000000000000:1"
time="2021-06-17T15:48:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=155b210edc8ded82:155b210edc8ded82:0000000000000000:1"
time="2021-06-17T15:48:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=155b210edc8ded82:155b210edc8ded82:0000000000000000:1"
time="2021-06-17T15:48:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:48:31Z" level=info msg="==----> initRegistryClient() span:155b210edc8ded82:3ee0c75cad2a95ef:155b210edc8ded82:1"
time="2021-06-17T15:48:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
{"level":"info","ts":1623944911.841155,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T15:48:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:48:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="155b210edc8ded82:3ee0c75cad2a95ef:155b210edc8ded82:1"
time="2021-06-17T15:48:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:48:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:48:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000bb7c0 {member1.com}:0xc0000bb840 {member2.com}:0xc0000bb740]}"
time="2021-06-17T15:48:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:48:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:48:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:48:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:48:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:48:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:48:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:48:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:48:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:48:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:48:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:48:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:48:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:48:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:48:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:48:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:48:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="155b210edc8ded82:3ee0c75cad2a95ef:155b210edc8ded82:1"
2021/06/17 15:48:41 Reporting span 155b210edc8ded82:3ee0c75cad2a95ef:155b210edc8ded82:1
{"level":"info","ts":1623944921.8734388,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:48:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=155b210edc8ded82:155b210edc8ded82:0000000000000000:1"
time="2021-06-17T15:48:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=155b210edc8ded82:155b210edc8ded82:0000000000000000:1"
2021/06/17 15:48:41 Reporting span 155b210edc8ded82:5ded3334c6b84052:155b210edc8ded82:1
time="2021-06-17T15:48:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=155b210edc8ded82:155b210edc8ded82:0000000000000000:1"
2021/06/17 15:48:41 Reporting span 155b210edc8ded82:155b210edc8ded82:0000000000000000:1
{"level":"info","ts":1623944921.8800313,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944921.8800635,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944921.8800757,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944921.8800874,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:48:41Z" level=info msg="==--> discovery.FindNetworkService() span:73c918962da8a2b8:73c918962da8a2b8:0000000000000000:1"
time="2021-06-17T15:48:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=73c918962da8a2b8:73c918962da8a2b8:0000000000000000:1"
time="2021-06-17T15:48:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=73c918962da8a2b8:73c918962da8a2b8:0000000000000000:1"
time="2021-06-17T15:48:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:48:41Z" level=info msg="==----> initRegistryClient() span:73c918962da8a2b8:1c2580e419429aca:73c918962da8a2b8:1"
time="2021-06-17T15:48:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:48:41Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:48:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="73c918962da8a2b8:1c2580e419429aca:73c918962da8a2b8:1"
time="2021-06-17T15:48:41Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:48:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:48:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000897040 {member1.com}:0xc0008970c0 {member2.com}:0xc000896fc0]}"
time="2021-06-17T15:48:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:48:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:48:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:48:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:48:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:48:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:48:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:48:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:48:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:48:41Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:48:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:48:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:48:41Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="73c918962da8a2b8:1c2580e419429aca:73c918962da8a2b8:1"
2021/06/17 15:48:41 Reporting span 73c918962da8a2b8:1c2580e419429aca:73c918962da8a2b8:1
{"level":"info","ts":1623944921.9302635,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:48:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=73c918962da8a2b8:73c918962da8a2b8:0000000000000000:1"
time="2021-06-17T15:48:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=73c918962da8a2b8:73c918962da8a2b8:0000000000000000:1"
2021/06/17 15:48:41 Reporting span 73c918962da8a2b8:13579a2eb4ffd73a:73c918962da8a2b8:1
time="2021-06-17T15:48:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=73c918962da8a2b8:73c918962da8a2b8:0000000000000000:1"
2021/06/17 15:48:41 Reporting span 73c918962da8a2b8:73c918962da8a2b8:0000000000000000:1
{"level":"info","ts":1623944921.935126,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623944921.9351575,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623944921.935169,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944921.9351788,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944921.9351892,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623944921.9352028,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623944921.9352112,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623944921.9355974,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944921.935685,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944921.935764,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944921.9357758,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944921.9357848,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944921.9357939,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944921.9358165,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623944921.935862,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623944921.9358966,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944921.9359946,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944921.9360514,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623944921.9361184,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623944921.9361293,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623944921.9361448,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623944921.9361677,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623944921.9362228,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:48:41Z" level=info msg="==--> discovery.FindNetworkService() span:23b6d89e6fa55d3b:23b6d89e6fa55d3b:0000000000000000:1"
time="2021-06-17T15:48:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=23b6d89e6fa55d3b:23b6d89e6fa55d3b:0000000000000000:1"
time="2021-06-17T15:48:41Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=23b6d89e6fa55d3b:23b6d89e6fa55d3b:0000000000000000:1"
time="2021-06-17T15:48:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:48:41Z" level=info msg="==----> initRegistryClient() span:23b6d89e6fa55d3b:50ef920c40e9921e:23b6d89e6fa55d3b:1"
time="2021-06-17T15:48:41Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:48:41Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:48:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="23b6d89e6fa55d3b:50ef920c40e9921e:23b6d89e6fa55d3b:1"
time="2021-06-17T15:48:41Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:48:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:48:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000137480 {member1.com}:0xc000137400 {member2.com}:0xc000137380]}"
time="2021-06-17T15:48:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:48:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:48:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:48:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:48:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:48:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:48:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:48:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:48:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:48:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:48:46Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:48:46Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:48:51Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:48:51Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:48:51Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:48:51Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:48:51Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="23b6d89e6fa55d3b:50ef920c40e9921e:23b6d89e6fa55d3b:1"
2021/06/17 15:48:51 Reporting span 23b6d89e6fa55d3b:50ef920c40e9921e:23b6d89e6fa55d3b:1
{"level":"info","ts":1623944931.9684007,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:48:51Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=23b6d89e6fa55d3b:23b6d89e6fa55d3b:0000000000000000:1"
time="2021-06-17T15:48:51Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=23b6d89e6fa55d3b:23b6d89e6fa55d3b:0000000000000000:1"
2021/06/17 15:48:51 Reporting span 23b6d89e6fa55d3b:1ac10a7004f3a07d:23b6d89e6fa55d3b:1
time="2021-06-17T15:48:51Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=23b6d89e6fa55d3b:23b6d89e6fa55d3b:0000000000000000:1"
2021/06/17 15:48:51 Reporting span 23b6d89e6fa55d3b:23b6d89e6fa55d3b:0000000000000000:1
{"level":"info","ts":1623944931.9741275,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944931.974336,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944931.9744506,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623944931.974619,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:48:51Z" level=info msg="==--> discovery.FindNetworkService() span:5bb006253620a0b1:5bb006253620a0b1:0000000000000000:1"
time="2021-06-17T15:48:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=5bb006253620a0b1:5bb006253620a0b1:0000000000000000:1"
time="2021-06-17T15:48:51Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=5bb006253620a0b1:5bb006253620a0b1:0000000000000000:1"
time="2021-06-17T15:48:51Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:48:51Z" level=info msg="==----> initRegistryClient() span:5bb006253620a0b1:40d8564630818211:5bb006253620a0b1:1"
time="2021-06-17T15:48:51Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:48:51Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:48:51Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5bb006253620a0b1:40d8564630818211:5bb006253620a0b1:1"
time="2021-06-17T15:48:51Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:48:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:48:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000137280 {member1.com}:0xc000137340 {member2.com}:0xc000137040]}"
time="2021-06-17T15:48:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:48:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:48:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:48:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:48:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:48:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:48:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:48:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:48:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:48:51Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:48:52Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:48:52Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:48:52Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="5bb006253620a0b1:40d8564630818211:5bb006253620a0b1:1"
2021/06/17 15:48:52 Reporting span 5bb006253620a0b1:40d8564630818211:5bb006253620a0b1:1
{"level":"info","ts":1623944932.0108345,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:48:52Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5bb006253620a0b1:5bb006253620a0b1:0000000000000000:1"
time="2021-06-17T15:48:52Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=5bb006253620a0b1:5bb006253620a0b1:0000000000000000:1"
2021/06/17 15:48:52 Reporting span 5bb006253620a0b1:2db94e606af8671b:5bb006253620a0b1:1
time="2021-06-17T15:48:52Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5bb006253620a0b1:5bb006253620a0b1:0000000000000000:1"
2021/06/17 15:48:52 Reporting span 5bb006253620a0b1:5bb006253620a0b1:0000000000000000:1
{"level":"info","ts":1623944932.013182,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623944932.0133324,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623944932.0133471,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623944932.0133817,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623944932.0134046,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623944932.0134149,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623944932.0134237,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623944932.013432,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944932.013441,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944932.0134513,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944932.0134947,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944932.0135283,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944932.0135388,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944932.0135624,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623944932.0135713,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623944932.0135822,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623944932.0135915,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623944932.0136006,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623944932.0136087,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623944932.0136166,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623945031.8415751,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623945031.8418767,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623945031.8419788,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945031.842061,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:50:31Z" level=info msg="==--> discovery.FindNetworkService() span:32cf126fd8f50c89:32cf126fd8f50c89:0000000000000000:1"
{"level":"info","ts":1623945031.842417,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T15:50:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=32cf126fd8f50c89:32cf126fd8f50c89:0000000000000000:1"
time="2021-06-17T15:50:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=32cf126fd8f50c89:32cf126fd8f50c89:0000000000000000:1"
time="2021-06-17T15:50:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:50:31Z" level=info msg="==----> initRegistryClient() span:32cf126fd8f50c89:0b354c546954e53d:32cf126fd8f50c89:1"
time="2021-06-17T15:50:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:50:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:50:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="32cf126fd8f50c89:0b354c546954e53d:32cf126fd8f50c89:1"
time="2021-06-17T15:50:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:50:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:50:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000182580 {member1.com}:0xc000182740 {member2.com}:0xc0001824c0]}"
time="2021-06-17T15:50:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:50:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:50:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:50:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:50:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:50:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:50:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:50:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:50:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:50:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:50:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:50:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:50:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:50:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:50:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:50:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:50:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="32cf126fd8f50c89:0b354c546954e53d:32cf126fd8f50c89:1"
2021/06/17 15:50:41 Reporting span 32cf126fd8f50c89:0b354c546954e53d:32cf126fd8f50c89:1
{"level":"info","ts":1623945041.8971038,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:50:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=32cf126fd8f50c89:32cf126fd8f50c89:0000000000000000:1"
time="2021-06-17T15:50:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=32cf126fd8f50c89:32cf126fd8f50c89:0000000000000000:1"
2021/06/17 15:50:41 Reporting span 32cf126fd8f50c89:18cf3b1553c8b1e6:32cf126fd8f50c89:1
time="2021-06-17T15:50:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=32cf126fd8f50c89:32cf126fd8f50c89:0000000000000000:1"
2021/06/17 15:50:41 Reporting span 32cf126fd8f50c89:32cf126fd8f50c89:0000000000000000:1
{"level":"info","ts":1623945041.9051936,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945041.9055448,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945041.9058168,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945041.9059408,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:50:41Z" level=info msg="==--> discovery.FindNetworkService() span:71c1c21c6e3409d9:71c1c21c6e3409d9:0000000000000000:1"
time="2021-06-17T15:50:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=71c1c21c6e3409d9:71c1c21c6e3409d9:0000000000000000:1"
time="2021-06-17T15:50:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=71c1c21c6e3409d9:71c1c21c6e3409d9:0000000000000000:1"
time="2021-06-17T15:50:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:50:41Z" level=info msg="==----> initRegistryClient() span:71c1c21c6e3409d9:531714f04197c13f:71c1c21c6e3409d9:1"
time="2021-06-17T15:50:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:50:41Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:50:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="71c1c21c6e3409d9:531714f04197c13f:71c1c21c6e3409d9:1"
time="2021-06-17T15:50:41Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:50:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:50:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000ba400 {member1.com}:0xc0000ba600 {member2.com}:0xc0000ba240]}"
time="2021-06-17T15:50:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:50:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:50:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:50:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:50:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:50:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:50:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:50:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:50:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:50:41Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:50:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:50:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:50:41Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="71c1c21c6e3409d9:531714f04197c13f:71c1c21c6e3409d9:1"
2021/06/17 15:50:41 Reporting span 71c1c21c6e3409d9:531714f04197c13f:71c1c21c6e3409d9:1
{"level":"info","ts":1623945041.9480646,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:50:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=71c1c21c6e3409d9:71c1c21c6e3409d9:0000000000000000:1"
time="2021-06-17T15:50:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=71c1c21c6e3409d9:71c1c21c6e3409d9:0000000000000000:1"
2021/06/17 15:50:41 Reporting span 71c1c21c6e3409d9:2656a4505ff1692a:71c1c21c6e3409d9:1
time="2021-06-17T15:50:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=71c1c21c6e3409d9:71c1c21c6e3409d9:0000000000000000:1"
2021/06/17 15:50:41 Reporting span 71c1c21c6e3409d9:71c1c21c6e3409d9:0000000000000000:1
{"level":"info","ts":1623945041.9516397,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623945041.951786,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623945041.951974,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945041.952151,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945041.9522517,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623945041.952373,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623945041.9524038,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623945041.9524179,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945041.952427,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945041.952437,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945041.952446,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945041.9524555,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945041.9524643,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945041.9524736,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623945041.9525795,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623945041.9526606,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945041.952711,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945041.9527533,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623945041.952856,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623945041.953051,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623945041.953096,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623945041.9531069,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945041.953117,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:50:41Z" level=info msg="==--> discovery.FindNetworkService() span:32f46f11cee9b926:32f46f11cee9b926:0000000000000000:1"
time="2021-06-17T15:50:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=32f46f11cee9b926:32f46f11cee9b926:0000000000000000:1"
time="2021-06-17T15:50:41Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=32f46f11cee9b926:32f46f11cee9b926:0000000000000000:1"
time="2021-06-17T15:50:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:50:41Z" level=info msg="==----> initRegistryClient() span:32f46f11cee9b926:02196995f163d69f:32f46f11cee9b926:1"
time="2021-06-17T15:50:41Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:50:41Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:50:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="32f46f11cee9b926:02196995f163d69f:32f46f11cee9b926:1"
time="2021-06-17T15:50:41Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:50:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:50:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000182580 {member1.com}:0xc000182740 {member2.com}:0xc0001824c0]}"
time="2021-06-17T15:50:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:50:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:50:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:50:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:50:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:50:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:50:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:50:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:50:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:50:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:50:46Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:50:46Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:50:51Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:50:51Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:50:51Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:50:51Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:50:51Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="32f46f11cee9b926:02196995f163d69f:32f46f11cee9b926:1"
2021/06/17 15:50:51 Reporting span 32f46f11cee9b926:02196995f163d69f:32f46f11cee9b926:1
{"level":"info","ts":1623945051.9961684,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:50:51Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=32f46f11cee9b926:32f46f11cee9b926:0000000000000000:1"
time="2021-06-17T15:50:51Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=32f46f11cee9b926:32f46f11cee9b926:0000000000000000:1"
2021/06/17 15:50:52 Reporting span 32f46f11cee9b926:782ba8af26751fef:32f46f11cee9b926:1
time="2021-06-17T15:50:52Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=32f46f11cee9b926:32f46f11cee9b926:0000000000000000:1"
2021/06/17 15:50:52 Reporting span 32f46f11cee9b926:32f46f11cee9b926:0000000000000000:1
{"level":"info","ts":1623945052.0014436,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945052.001521,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945052.0016303,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945052.0017047,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:50:52Z" level=info msg="==--> discovery.FindNetworkService() span:49c46cf5792a4dcf:49c46cf5792a4dcf:0000000000000000:1"
time="2021-06-17T15:50:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=49c46cf5792a4dcf:49c46cf5792a4dcf:0000000000000000:1"
time="2021-06-17T15:50:52Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=49c46cf5792a4dcf:49c46cf5792a4dcf:0000000000000000:1"
time="2021-06-17T15:50:52Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:50:52Z" level=info msg="==----> initRegistryClient() span:49c46cf5792a4dcf:470ee8cc232cf819:49c46cf5792a4dcf:1"
time="2021-06-17T15:50:52Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:50:52Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:50:52Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="49c46cf5792a4dcf:470ee8cc232cf819:49c46cf5792a4dcf:1"
time="2021-06-17T15:50:52Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:50:52Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:50:52Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0003581c0 {member1.com}:0xc0003582c0 {member2.com}:0xc000358140]}"
time="2021-06-17T15:50:52Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:50:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:50:52Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:50:52Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:50:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:50:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:50:52Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:50:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:50:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:50:52Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:50:57Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:50:57Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:51:02Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:51:02Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:51:07Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:51:07Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:51:07Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:51:22Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:51:22Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="49c46cf5792a4dcf:470ee8cc232cf819:49c46cf5792a4dcf:1"
2021/06/17 15:51:22 Reporting span 49c46cf5792a4dcf:470ee8cc232cf819:49c46cf5792a4dcf:1
2021/06/17 15:51:22 Reporting span 49c46cf5792a4dcf:49c46cf5792a4dcf:0000000000000000:1
{"level":"info","ts":1623945082.0027149,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623945082.0079887,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623945082.0080588,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945082.008069,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:51:22Z" level=info msg="==--> discovery.FindNetworkService() span:6e2a34c28c863ca6:6e2a34c28c863ca6:0000000000000000:1"
time="2021-06-17T15:51:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6e2a34c28c863ca6:6e2a34c28c863ca6:0000000000000000:1"
time="2021-06-17T15:51:22Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=6e2a34c28c863ca6:6e2a34c28c863ca6:0000000000000000:1"
time="2021-06-17T15:51:22Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:51:22Z" level=info msg="==----> initRegistryClient() span:6e2a34c28c863ca6:18d3eba24f577e25:6e2a34c28c863ca6:1"
time="2021-06-17T15:51:22Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:51:22Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:51:22Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6e2a34c28c863ca6:18d3eba24f577e25:6e2a34c28c863ca6:1"
time="2021-06-17T15:51:22Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:51:22Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:51:22Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000183e80 {member1.com}:0xc000183f00 {member2.com}:0xc000183e00]}"
time="2021-06-17T15:51:22Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:51:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:51:22Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:51:22Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:51:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:51:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:51:22Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:51:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:51:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:51:22Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:51:27Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:51:27Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:51:32Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:51:32Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:51:32Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:51:32Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:51:32Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="6e2a34c28c863ca6:18d3eba24f577e25:6e2a34c28c863ca6:1"
2021/06/17 15:51:32 Reporting span 6e2a34c28c863ca6:18d3eba24f577e25:6e2a34c28c863ca6:1
{"level":"info","ts":1623945092.0353475,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:51:32Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6e2a34c28c863ca6:6e2a34c28c863ca6:0000000000000000:1"
time="2021-06-17T15:51:32Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=6e2a34c28c863ca6:6e2a34c28c863ca6:0000000000000000:1"
2021/06/17 15:51:32 Reporting span 6e2a34c28c863ca6:7ebb083821a6b1f3:6e2a34c28c863ca6:1
time="2021-06-17T15:51:32Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6e2a34c28c863ca6:6e2a34c28c863ca6:0000000000000000:1"
2021/06/17 15:51:32 Reporting span 6e2a34c28c863ca6:6e2a34c28c863ca6:0000000000000000:1
{"level":"info","ts":1623945092.0405765,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945092.0406148,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945092.0406258,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945092.0406594,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:51:32Z" level=info msg="==--> discovery.FindNetworkService() span:50de3b7daceae180:50de3b7daceae180:0000000000000000:1"
time="2021-06-17T15:51:32Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=50de3b7daceae180:50de3b7daceae180:0000000000000000:1"
time="2021-06-17T15:51:32Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=50de3b7daceae180:50de3b7daceae180:0000000000000000:1"
time="2021-06-17T15:51:32Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:51:32Z" level=info msg="==----> initRegistryClient() span:50de3b7daceae180:66e75242267c5d45:50de3b7daceae180:1"
time="2021-06-17T15:51:32Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:51:52Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:51:52Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="50de3b7daceae180:66e75242267c5d45:50de3b7daceae180:1"
time="2021-06-17T15:51:52Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:51:52Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:51:52Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000359f00 {member1.com}:0xc000359f80 {member2.com}:0xc000359e80]}"
time="2021-06-17T15:51:52Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:51:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:51:52Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:51:52Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:51:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:51:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:51:52Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:51:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:51:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:51:52Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:51:52Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:51:52Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:52:02Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:52:02Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="50de3b7daceae180:66e75242267c5d45:50de3b7daceae180:1"
2021/06/17 15:52:02 Reporting span 50de3b7daceae180:66e75242267c5d45:50de3b7daceae180:1
2021/06/17 15:52:02 Reporting span 50de3b7daceae180:50de3b7daceae180:0000000000000000:1
{"level":"info","ts":1623945122.0414033,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623945122.0517008,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623945122.0518112,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945122.0518272,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:52:02Z" level=info msg="==--> discovery.FindNetworkService() span:0dd78e391dcbed57:0dd78e391dcbed57:0000000000000000:1"
time="2021-06-17T15:52:02Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=0dd78e391dcbed57:0dd78e391dcbed57:0000000000000000:1"
time="2021-06-17T15:52:02Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=0dd78e391dcbed57:0dd78e391dcbed57:0000000000000000:1"
time="2021-06-17T15:52:02Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:52:02Z" level=info msg="==----> initRegistryClient() span:0dd78e391dcbed57:0a928321ac1a8605:0dd78e391dcbed57:1"
time="2021-06-17T15:52:02Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:52:02Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:52:02Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="0dd78e391dcbed57:0a928321ac1a8605:0dd78e391dcbed57:1"
time="2021-06-17T15:52:02Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:52:02Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:52:02Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00079a3c0 {member1.com}:0xc00079a340 {member2.com}:0xc00079a2c0]}"
time="2021-06-17T15:52:02Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:52:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:52:02Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:52:02Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:52:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:52:02Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:52:02Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:52:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:52:02Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:52:02Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:52:07Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:52:07Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:52:12Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:52:12Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:52:12Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:52:12Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:52:12Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="0dd78e391dcbed57:0a928321ac1a8605:0dd78e391dcbed57:1"
2021/06/17 15:52:12 Reporting span 0dd78e391dcbed57:0a928321ac1a8605:0dd78e391dcbed57:1
{"level":"info","ts":1623945132.0816572,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:52:12Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=0dd78e391dcbed57:0dd78e391dcbed57:0000000000000000:1"
time="2021-06-17T15:52:12Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=0dd78e391dcbed57:0dd78e391dcbed57:0000000000000000:1"
2021/06/17 15:52:12 Reporting span 0dd78e391dcbed57:6cb678749e82ec46:0dd78e391dcbed57:1
time="2021-06-17T15:52:12Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=0dd78e391dcbed57:0dd78e391dcbed57:0000000000000000:1"
2021/06/17 15:52:12 Reporting span 0dd78e391dcbed57:0dd78e391dcbed57:0000000000000000:1
{"level":"info","ts":1623945132.0878348,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945132.088024,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945132.0880382,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945132.088049,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:52:12Z" level=info msg="==--> discovery.FindNetworkService() span:6967f02e7a340e3f:6967f02e7a340e3f:0000000000000000:1"
time="2021-06-17T15:52:12Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6967f02e7a340e3f:6967f02e7a340e3f:0000000000000000:1"
time="2021-06-17T15:52:12Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=6967f02e7a340e3f:6967f02e7a340e3f:0000000000000000:1"
time="2021-06-17T15:52:12Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:52:12Z" level=info msg="==----> initRegistryClient() span:6967f02e7a340e3f:4a89eeeab558d74a:6967f02e7a340e3f:1"
time="2021-06-17T15:52:12Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
{"level":"info","ts":1623945151.841683,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623945151.8420446,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T15:52:32Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:52:32Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6967f02e7a340e3f:4a89eeeab558d74a:6967f02e7a340e3f:1"
time="2021-06-17T15:52:32Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:52:32Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:52:32Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ef240 {member1.com}:0xc0004ef2c0 {member2.com}:0xc0004ef1c0]}"
time="2021-06-17T15:52:32Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:52:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:52:32Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:52:32Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:52:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:52:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:52:32Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:52:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:52:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:52:32Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:52:37Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:52:37Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:52:42Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:52:42Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:52:47Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:52:47Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:52:47Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:52:47Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:52:47Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="6967f02e7a340e3f:4a89eeeab558d74a:6967f02e7a340e3f:1"
2021/06/17 15:52:47 Reporting span 6967f02e7a340e3f:4a89eeeab558d74a:6967f02e7a340e3f:1
2021/06/17 15:52:47 Reporting span 6967f02e7a340e3f:6967f02e7a340e3f:0000000000000000:1
{"level":"info","ts":1623945167.1086726,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623945167.1088107,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623945167.1088412,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945167.108875,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:52:47Z" level=info msg="==--> discovery.FindNetworkService() span:6008c337f692b0ba:6008c337f692b0ba:0000000000000000:1"
time="2021-06-17T15:52:47Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6008c337f692b0ba:6008c337f692b0ba:0000000000000000:1"
time="2021-06-17T15:52:47Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=6008c337f692b0ba:6008c337f692b0ba:0000000000000000:1"
time="2021-06-17T15:52:47Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:52:47Z" level=info msg="==----> initRegistryClient() span:6008c337f692b0ba:32b8483875d94c65:6008c337f692b0ba:1"
time="2021-06-17T15:52:47Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:52:47Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:52:47Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6008c337f692b0ba:32b8483875d94c65:6008c337f692b0ba:1"
time="2021-06-17T15:52:47Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:52:47Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:52:47Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000897680 {member1.com}:0xc000897600 {member2.com}:0xc000897580]}"
time="2021-06-17T15:52:47Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:52:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:52:47Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:52:47Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:52:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:52:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:52:47Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:52:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:52:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:52:47Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:52:52Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:52:52Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:52:57Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:52:57Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:52:57Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:52:57Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:52:57Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="6008c337f692b0ba:32b8483875d94c65:6008c337f692b0ba:1"
2021/06/17 15:52:57 Reporting span 6008c337f692b0ba:32b8483875d94c65:6008c337f692b0ba:1
{"level":"info","ts":1623945177.1424813,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:52:57Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6008c337f692b0ba:6008c337f692b0ba:0000000000000000:1"
time="2021-06-17T15:52:57Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=6008c337f692b0ba:6008c337f692b0ba:0000000000000000:1"
2021/06/17 15:52:57 Reporting span 6008c337f692b0ba:3c3bc58c2adee17b:6008c337f692b0ba:1
time="2021-06-17T15:52:57Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6008c337f692b0ba:6008c337f692b0ba:0000000000000000:1"
2021/06/17 15:52:57 Reporting span 6008c337f692b0ba:6008c337f692b0ba:0000000000000000:1
{"level":"info","ts":1623945177.1489491,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945177.1490765,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945177.1491692,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945177.1491938,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:52:57Z" level=info msg="==--> discovery.FindNetworkService() span:45f7e50f15459257:45f7e50f15459257:0000000000000000:1"
time="2021-06-17T15:52:57Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=45f7e50f15459257:45f7e50f15459257:0000000000000000:1"
time="2021-06-17T15:52:57Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=45f7e50f15459257:45f7e50f15459257:0000000000000000:1"
time="2021-06-17T15:52:57Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:52:57Z" level=info msg="==----> initRegistryClient() span:45f7e50f15459257:1412649494916021:45f7e50f15459257:1"
time="2021-06-17T15:52:57Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:53:07Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:53:07Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="45f7e50f15459257:1412649494916021:45f7e50f15459257:1"
time="2021-06-17T15:53:07Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:53:07Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:53:07Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00079ac80 {member1.com}:0xc00079ad00 {member2.com}:0xc00079ac00]}"
time="2021-06-17T15:53:07Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:53:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:53:07Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:53:07Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:53:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:53:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:53:07Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:53:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:53:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:53:07Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:53:07Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:53:07Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:53:07Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="45f7e50f15459257:1412649494916021:45f7e50f15459257:1"
2021/06/17 15:53:07 Reporting span 45f7e50f15459257:1412649494916021:45f7e50f15459257:1
{"level":"info","ts":1623945187.1866448,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:53:07Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=45f7e50f15459257:45f7e50f15459257:0000000000000000:1"
time="2021-06-17T15:53:07Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=45f7e50f15459257:45f7e50f15459257:0000000000000000:1"
2021/06/17 15:53:07 Reporting span 45f7e50f15459257:774e1fed7354f37c:45f7e50f15459257:1
time="2021-06-17T15:53:07Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=45f7e50f15459257:45f7e50f15459257:0000000000000000:1"
2021/06/17 15:53:07 Reporting span 45f7e50f15459257:45f7e50f15459257:0000000000000000:1
{"level":"info","ts":1623945187.1889799,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623945187.1893992,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623945187.1894119,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945187.1894217,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945187.189452,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623945187.1894903,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623945187.189502,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623945187.1895108,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945187.1895201,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945187.18953,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945187.1896095,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945187.1896217,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945187.189651,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945187.189662,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623945187.1896706,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623945187.1896794,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945187.1896877,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945187.1896966,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623945187.189706,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623945187.1897132,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623945187.1897457,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623945187.1897554,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945187.1897814,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:53:07Z" level=info msg="==--> discovery.FindNetworkService() span:3f58cbcd56410604:3f58cbcd56410604:0000000000000000:1"
time="2021-06-17T15:53:07Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3f58cbcd56410604:3f58cbcd56410604:0000000000000000:1"
time="2021-06-17T15:53:07Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=3f58cbcd56410604:3f58cbcd56410604:0000000000000000:1"
time="2021-06-17T15:53:07Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:53:07Z" level=info msg="==----> initRegistryClient() span:3f58cbcd56410604:00a53c8168fefc87:3f58cbcd56410604:1"
time="2021-06-17T15:53:07Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:53:07Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:53:07Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3f58cbcd56410604:00a53c8168fefc87:3f58cbcd56410604:1"
time="2021-06-17T15:53:07Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:53:07Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:53:07Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00079b5c0 {member1.com}:0xc00079b640 {member2.com}:0xc00079b540]}"
time="2021-06-17T15:53:07Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:53:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:53:07Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:53:07Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:53:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:53:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:53:07Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:53:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:53:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:53:07Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:53:12Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:53:12Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:53:17Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:53:17Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:53:17Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:53:17Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:53:17Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="3f58cbcd56410604:00a53c8168fefc87:3f58cbcd56410604:1"
2021/06/17 15:53:17 Reporting span 3f58cbcd56410604:00a53c8168fefc87:3f58cbcd56410604:1
{"level":"info","ts":1623945197.2195253,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:53:17Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=3f58cbcd56410604:3f58cbcd56410604:0000000000000000:1"
time="2021-06-17T15:53:17Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=3f58cbcd56410604:3f58cbcd56410604:0000000000000000:1"
2021/06/17 15:53:17 Reporting span 3f58cbcd56410604:1f6932a59bd2dbc6:3f58cbcd56410604:1
time="2021-06-17T15:53:17Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=3f58cbcd56410604:3f58cbcd56410604:0000000000000000:1"
2021/06/17 15:53:17 Reporting span 3f58cbcd56410604:3f58cbcd56410604:0000000000000000:1
{"level":"info","ts":1623945197.2254393,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945197.2254696,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945197.2255008,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945197.225548,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:53:17Z" level=info msg="==--> discovery.FindNetworkService() span:51d2ff3a62fca6b4:51d2ff3a62fca6b4:0000000000000000:1"
time="2021-06-17T15:53:17Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=51d2ff3a62fca6b4:51d2ff3a62fca6b4:0000000000000000:1"
time="2021-06-17T15:53:17Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=51d2ff3a62fca6b4:51d2ff3a62fca6b4:0000000000000000:1"
time="2021-06-17T15:53:17Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:53:17Z" level=info msg="==----> initRegistryClient() span:51d2ff3a62fca6b4:7fecc73e0cf50c51:51d2ff3a62fca6b4:1"
time="2021-06-17T15:53:17Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:53:27Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:53:27Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="51d2ff3a62fca6b4:7fecc73e0cf50c51:51d2ff3a62fca6b4:1"
time="2021-06-17T15:53:27Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:53:27Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:53:27Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000359980 {member1.com}:0xc000359a00 {member2.com}:0xc000359900]}"
time="2021-06-17T15:53:27Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:53:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:53:27Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:53:27Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:53:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:53:27Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:53:27Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:53:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:53:27Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:53:27Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:53:27Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:53:27Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:53:27Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="51d2ff3a62fca6b4:7fecc73e0cf50c51:51d2ff3a62fca6b4:1"
2021/06/17 15:53:27 Reporting span 51d2ff3a62fca6b4:7fecc73e0cf50c51:51d2ff3a62fca6b4:1
{"level":"info","ts":1623945207.2724793,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:53:27Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=51d2ff3a62fca6b4:51d2ff3a62fca6b4:0000000000000000:1"
time="2021-06-17T15:53:27Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=51d2ff3a62fca6b4:51d2ff3a62fca6b4:0000000000000000:1"
2021/06/17 15:53:27 Reporting span 51d2ff3a62fca6b4:37db2959796792db:51d2ff3a62fca6b4:1
time="2021-06-17T15:53:27Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=51d2ff3a62fca6b4:51d2ff3a62fca6b4:0000000000000000:1"
2021/06/17 15:53:27 Reporting span 51d2ff3a62fca6b4:51d2ff3a62fca6b4:0000000000000000:1
{"level":"info","ts":1623945207.2753456,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623945207.2753787,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623945207.2754061,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945207.2754474,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945207.2754805,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623945207.275562,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623945207.2755766,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623945207.2755857,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945207.2757666,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945207.2758584,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945207.2759304,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945207.2759616,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945207.2760153,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945207.2760615,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623945207.276086,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623945207.2760966,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945207.2761052,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945207.2761154,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623945207.276164,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623945207.2761774,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623945271.8420217,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623945271.842148,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623945271.8421888,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623945271.8422322,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945271.8422458,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:54:31Z" level=info msg="==--> discovery.FindNetworkService() span:2f4cf43f58705cac:2f4cf43f58705cac:0000000000000000:1"
time="2021-06-17T15:54:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2f4cf43f58705cac:2f4cf43f58705cac:0000000000000000:1"
time="2021-06-17T15:54:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=2f4cf43f58705cac:2f4cf43f58705cac:0000000000000000:1"
time="2021-06-17T15:54:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:54:31Z" level=info msg="==----> initRegistryClient() span:2f4cf43f58705cac:1bf31ef853963008:2f4cf43f58705cac:1"
time="2021-06-17T15:54:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:54:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:54:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2f4cf43f58705cac:1bf31ef853963008:2f4cf43f58705cac:1"
time="2021-06-17T15:54:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:54:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:54:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00079a0c0 {member1.com}:0xc00079a040 {member2.com}:0xc000897fc0]}"
time="2021-06-17T15:54:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:54:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:54:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:54:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:54:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:54:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:54:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:54:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:54:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:54:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:54:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:54:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:54:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:54:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:54:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:54:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:54:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="2f4cf43f58705cac:1bf31ef853963008:2f4cf43f58705cac:1"
2021/06/17 15:54:41 Reporting span 2f4cf43f58705cac:1bf31ef853963008:2f4cf43f58705cac:1
{"level":"info","ts":1623945281.8703463,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:54:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2f4cf43f58705cac:2f4cf43f58705cac:0000000000000000:1"
time="2021-06-17T15:54:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=2f4cf43f58705cac:2f4cf43f58705cac:0000000000000000:1"
2021/06/17 15:54:41 Reporting span 2f4cf43f58705cac:1f323756fc0659ba:2f4cf43f58705cac:1
time="2021-06-17T15:54:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2f4cf43f58705cac:2f4cf43f58705cac:0000000000000000:1"
2021/06/17 15:54:41 Reporting span 2f4cf43f58705cac:2f4cf43f58705cac:0000000000000000:1
{"level":"info","ts":1623945281.875357,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945281.8754122,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945281.8754256,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945281.8754375,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:54:41Z" level=info msg="==--> discovery.FindNetworkService() span:5b0492e830894065:5b0492e830894065:0000000000000000:1"
time="2021-06-17T15:54:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=5b0492e830894065:5b0492e830894065:0000000000000000:1"
time="2021-06-17T15:54:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=5b0492e830894065:5b0492e830894065:0000000000000000:1"
time="2021-06-17T15:54:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:54:41Z" level=info msg="==----> initRegistryClient() span:5b0492e830894065:1722deaec953118a:5b0492e830894065:1"
time="2021-06-17T15:54:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:54:41Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:54:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5b0492e830894065:1722deaec953118a:5b0492e830894065:1"
time="2021-06-17T15:54:41Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:54:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:54:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ee440 {member1.com}:0xc0004ee6c0 {member2.com}:0xc0004ee340]}"
time="2021-06-17T15:54:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:54:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:54:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:54:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:54:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:54:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:54:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:54:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:54:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:54:41Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:54:46Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:54:46Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:54:51Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:54:51Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:54:56Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:54:56Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:54:56Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:55:11Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:55:11Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="5b0492e830894065:1722deaec953118a:5b0492e830894065:1"
2021/06/17 15:55:11 Reporting span 5b0492e830894065:1722deaec953118a:5b0492e830894065:1
2021/06/17 15:55:11 Reporting span 5b0492e830894065:5b0492e830894065:0000000000000000:1
{"level":"info","ts":1623945311.8764749,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623945311.8765395,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623945311.8765514,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945311.8765624,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:55:11Z" level=info msg="==--> discovery.FindNetworkService() span:6fa0004054439e1c:6fa0004054439e1c:0000000000000000:1"
time="2021-06-17T15:55:11Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6fa0004054439e1c:6fa0004054439e1c:0000000000000000:1"
time="2021-06-17T15:55:11Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=6fa0004054439e1c:6fa0004054439e1c:0000000000000000:1"
time="2021-06-17T15:55:11Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:55:11Z" level=info msg="==----> initRegistryClient() span:6fa0004054439e1c:729498c06d4a2c57:6fa0004054439e1c:1"
time="2021-06-17T15:55:11Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:55:11Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:55:11Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6fa0004054439e1c:729498c06d4a2c57:6fa0004054439e1c:1"
time="2021-06-17T15:55:11Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:55:11Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:55:11Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000896440 {member1.com}:0xc0008964c0 {member2.com}:0xc0008963c0]}"
time="2021-06-17T15:55:11Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:55:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:55:11Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:55:11Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:55:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:55:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:55:11Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:55:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:55:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:55:11Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:55:16Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:55:16Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:55:21Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:55:21Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:55:21Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:55:21Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:55:21Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="6fa0004054439e1c:729498c06d4a2c57:6fa0004054439e1c:1"
2021/06/17 15:55:21 Reporting span 6fa0004054439e1c:729498c06d4a2c57:6fa0004054439e1c:1
{"level":"info","ts":1623945321.910776,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:55:21Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6fa0004054439e1c:6fa0004054439e1c:0000000000000000:1"
time="2021-06-17T15:55:21Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=6fa0004054439e1c:6fa0004054439e1c:0000000000000000:1"
2021/06/17 15:55:21 Reporting span 6fa0004054439e1c:7c34dae37d2cd51b:6fa0004054439e1c:1
time="2021-06-17T15:55:21Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6fa0004054439e1c:6fa0004054439e1c:0000000000000000:1"
2021/06/17 15:55:21 Reporting span 6fa0004054439e1c:6fa0004054439e1c:0000000000000000:1
{"level":"info","ts":1623945321.9160788,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945321.9161098,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945321.916127,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945321.9161382,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:55:21Z" level=info msg="==--> discovery.FindNetworkService() span:7a1e99d015c38c58:7a1e99d015c38c58:0000000000000000:1"
time="2021-06-17T15:55:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7a1e99d015c38c58:7a1e99d015c38c58:0000000000000000:1"
time="2021-06-17T15:55:21Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=7a1e99d015c38c58:7a1e99d015c38c58:0000000000000000:1"
time="2021-06-17T15:55:21Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:55:21Z" level=info msg="==----> initRegistryClient() span:7a1e99d015c38c58:425b588d3c3305ea:7a1e99d015c38c58:1"
time="2021-06-17T15:55:21Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:55:31Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:55:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7a1e99d015c38c58:425b588d3c3305ea:7a1e99d015c38c58:1"
time="2021-06-17T15:55:31Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:55:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:55:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0008969c0 {member1.com}:0xc0008968c0 {member2.com}:0xc000896780]}"
time="2021-06-17T15:55:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:55:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:55:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:55:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:55:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:55:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:55:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:55:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:55:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:55:31Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:55:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:55:36Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:55:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:55:41Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:55:46Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:55:46Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:55:46Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:55:51Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:55:51Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="7a1e99d015c38c58:425b588d3c3305ea:7a1e99d015c38c58:1"
2021/06/17 15:55:51 Reporting span 7a1e99d015c38c58:425b588d3c3305ea:7a1e99d015c38c58:1
2021/06/17 15:55:51 Reporting span 7a1e99d015c38c58:7a1e99d015c38c58:0000000000000000:1
{"level":"info","ts":1623945351.9167018,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623945351.9167888,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623945351.9168446,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945351.916876,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:55:51Z" level=info msg="==--> discovery.FindNetworkService() span:01d3cad53778475b:01d3cad53778475b:0000000000000000:1"
time="2021-06-17T15:55:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=01d3cad53778475b:01d3cad53778475b:0000000000000000:1"
time="2021-06-17T15:55:51Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=01d3cad53778475b:01d3cad53778475b:0000000000000000:1"
time="2021-06-17T15:55:51Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:55:51Z" level=info msg="==----> initRegistryClient() span:01d3cad53778475b:60323b49acecdde5:01d3cad53778475b:1"
time="2021-06-17T15:55:51Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:55:51Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:55:51Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="01d3cad53778475b:60323b49acecdde5:01d3cad53778475b:1"
time="2021-06-17T15:55:51Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:55:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:55:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000897940 {member1.com}:0xc0008979c0 {member2.com}:0xc0008978c0]}"
time="2021-06-17T15:55:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:55:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:55:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:55:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:55:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:55:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:55:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:55:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:55:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:55:51Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:55:56Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:55:56Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:56:01Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:56:01Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:56:01Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:56:01Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:56:01Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="01d3cad53778475b:60323b49acecdde5:01d3cad53778475b:1"
2021/06/17 15:56:01 Reporting span 01d3cad53778475b:60323b49acecdde5:01d3cad53778475b:1
{"level":"info","ts":1623945361.959428,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:56:01Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=01d3cad53778475b:01d3cad53778475b:0000000000000000:1"
time="2021-06-17T15:56:01Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=01d3cad53778475b:01d3cad53778475b:0000000000000000:1"
2021/06/17 15:56:01 Reporting span 01d3cad53778475b:5baa1350777605a0:01d3cad53778475b:1
time="2021-06-17T15:56:01Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=01d3cad53778475b:01d3cad53778475b:0000000000000000:1"
2021/06/17 15:56:01 Reporting span 01d3cad53778475b:01d3cad53778475b:0000000000000000:1
{"level":"info","ts":1623945361.9645,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945361.9645512,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945361.9645636,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945361.964575,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:56:01Z" level=info msg="==--> discovery.FindNetworkService() span:7e675fa2507262e2:7e675fa2507262e2:0000000000000000:1"
time="2021-06-17T15:56:01Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7e675fa2507262e2:7e675fa2507262e2:0000000000000000:1"
time="2021-06-17T15:56:01Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=7e675fa2507262e2:7e675fa2507262e2:0000000000000000:1"
time="2021-06-17T15:56:01Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:56:01Z" level=info msg="==----> initRegistryClient() span:7e675fa2507262e2:68df686daf8526eb:7e675fa2507262e2:1"
time="2021-06-17T15:56:01Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:56:21Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:56:21Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7e675fa2507262e2:68df686daf8526eb:7e675fa2507262e2:1"
time="2021-06-17T15:56:21Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:56:21Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:56:21Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000136840 {member1.com}:0xc0001367c0 {member2.com}:0xc000136740]}"
time="2021-06-17T15:56:21Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:56:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:56:21Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:56:21Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:56:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:56:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:56:21Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:56:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:56:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:56:21Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:56:21Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:56:21Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
{"level":"info","ts":1623945391.8427124,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623945391.8429787,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T15:56:31Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:56:31Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="7e675fa2507262e2:68df686daf8526eb:7e675fa2507262e2:1"
2021/06/17 15:56:31 Reporting span 7e675fa2507262e2:68df686daf8526eb:7e675fa2507262e2:1
2021/06/17 15:56:31 Reporting span 7e675fa2507262e2:7e675fa2507262e2:0000000000000000:1
{"level":"info","ts":1623945391.965416,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623945391.9654531,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623945391.9654605,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945391.965489,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:56:31Z" level=info msg="==--> discovery.FindNetworkService() span:650b93e6042aaf48:650b93e6042aaf48:0000000000000000:1"
time="2021-06-17T15:56:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=650b93e6042aaf48:650b93e6042aaf48:0000000000000000:1"
time="2021-06-17T15:56:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=650b93e6042aaf48:650b93e6042aaf48:0000000000000000:1"
time="2021-06-17T15:56:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:56:31Z" level=info msg="==----> initRegistryClient() span:650b93e6042aaf48:557c18d3992c04be:650b93e6042aaf48:1"
time="2021-06-17T15:56:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:56:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:56:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="650b93e6042aaf48:557c18d3992c04be:650b93e6042aaf48:1"
time="2021-06-17T15:56:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:56:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:56:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001836c0 {member1.com}:0xc000183740 {member2.com}:0xc0001831c0]}"
time="2021-06-17T15:56:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:56:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:56:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:56:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:56:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:56:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:56:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:56:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:56:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:56:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:56:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:56:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:56:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:56:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:56:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:56:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:56:42Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="650b93e6042aaf48:557c18d3992c04be:650b93e6042aaf48:1"
2021/06/17 15:56:42 Reporting span 650b93e6042aaf48:557c18d3992c04be:650b93e6042aaf48:1
{"level":"info","ts":1623945402.0020483,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:56:42Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=650b93e6042aaf48:650b93e6042aaf48:0000000000000000:1"
time="2021-06-17T15:56:42Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=650b93e6042aaf48:650b93e6042aaf48:0000000000000000:1"
2021/06/17 15:56:42 Reporting span 650b93e6042aaf48:77ee42fc34beeb00:650b93e6042aaf48:1
time="2021-06-17T15:56:42Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=650b93e6042aaf48:650b93e6042aaf48:0000000000000000:1"
2021/06/17 15:56:42 Reporting span 650b93e6042aaf48:650b93e6042aaf48:0000000000000000:1
{"level":"info","ts":1623945402.0085444,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945402.008815,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945402.0088754,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945402.0089207,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:56:42Z" level=info msg="==--> discovery.FindNetworkService() span:1a882f6caeb9f23b:1a882f6caeb9f23b:0000000000000000:1"
time="2021-06-17T15:56:42Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1a882f6caeb9f23b:1a882f6caeb9f23b:0000000000000000:1"
time="2021-06-17T15:56:42Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=1a882f6caeb9f23b:1a882f6caeb9f23b:0000000000000000:1"
time="2021-06-17T15:56:42Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:56:42Z" level=info msg="==----> initRegistryClient() span:1a882f6caeb9f23b:051655baa85c5bf0:1a882f6caeb9f23b:1"
time="2021-06-17T15:56:42Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:56:52Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:56:52Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1a882f6caeb9f23b:051655baa85c5bf0:1a882f6caeb9f23b:1"
time="2021-06-17T15:56:52Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:56:52Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:56:52Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ee1c0 {member1.com}:0xc0004ee240 {member2.com}:0xc0004ee140]}"
time="2021-06-17T15:56:52Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:56:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:56:52Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:56:52Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:56:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:56:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:56:52Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:56:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:56:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:56:52Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:56:52Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:56:52Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:56:52Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="1a882f6caeb9f23b:051655baa85c5bf0:1a882f6caeb9f23b:1"
2021/06/17 15:56:52 Reporting span 1a882f6caeb9f23b:051655baa85c5bf0:1a882f6caeb9f23b:1
{"level":"info","ts":1623945412.0528028,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:56:52Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1a882f6caeb9f23b:1a882f6caeb9f23b:0000000000000000:1"
time="2021-06-17T15:56:52Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=1a882f6caeb9f23b:1a882f6caeb9f23b:0000000000000000:1"
2021/06/17 15:56:52 Reporting span 1a882f6caeb9f23b:2a28dcac9c68bacd:1a882f6caeb9f23b:1
time="2021-06-17T15:56:52Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1a882f6caeb9f23b:1a882f6caeb9f23b:0000000000000000:1"
2021/06/17 15:56:52 Reporting span 1a882f6caeb9f23b:1a882f6caeb9f23b:0000000000000000:1
{"level":"info","ts":1623945412.0564125,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623945412.0564854,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623945412.0565178,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945412.0565302,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945412.0565403,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623945412.0565538,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623945412.0565908,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623945412.0566378,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945412.0566833,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945412.0567484,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945412.0568588,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945412.0568979,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945412.056909,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945412.056917,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623945412.0569255,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623945412.0569344,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945412.0569434,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945412.0569537,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623945412.056962,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623945412.0569704,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623945412.0569863,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623945412.0569959,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945412.0571742,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:56:52Z" level=info msg="==--> discovery.FindNetworkService() span:55cd135701f4a2dd:55cd135701f4a2dd:0000000000000000:1"
time="2021-06-17T15:56:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=55cd135701f4a2dd:55cd135701f4a2dd:0000000000000000:1"
time="2021-06-17T15:56:52Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=55cd135701f4a2dd:55cd135701f4a2dd:0000000000000000:1"
time="2021-06-17T15:56:52Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:56:52Z" level=info msg="==----> initRegistryClient() span:55cd135701f4a2dd:157da2d20fc18395:55cd135701f4a2dd:1"
time="2021-06-17T15:56:52Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:56:52Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:56:52Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="55cd135701f4a2dd:157da2d20fc18395:55cd135701f4a2dd:1"
time="2021-06-17T15:56:52Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:56:52Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:56:52Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000359400 {member1.com}:0xc000359480 {member2.com}:0xc000359380]}"
time="2021-06-17T15:56:52Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:56:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:56:52Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:56:52Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:56:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:56:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:56:52Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:56:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:56:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:56:52Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:56:57Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:56:57Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:57:02Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:57:02Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:57:02Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:57:02Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:57:02Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="55cd135701f4a2dd:157da2d20fc18395:55cd135701f4a2dd:1"
2021/06/17 15:57:02 Reporting span 55cd135701f4a2dd:157da2d20fc18395:55cd135701f4a2dd:1
{"level":"info","ts":1623945422.0916336,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:57:02Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=55cd135701f4a2dd:55cd135701f4a2dd:0000000000000000:1"
time="2021-06-17T15:57:02Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=55cd135701f4a2dd:55cd135701f4a2dd:0000000000000000:1"
2021/06/17 15:57:02 Reporting span 55cd135701f4a2dd:1c059d69c7759a62:55cd135701f4a2dd:1
time="2021-06-17T15:57:02Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=55cd135701f4a2dd:55cd135701f4a2dd:0000000000000000:1"
2021/06/17 15:57:02 Reporting span 55cd135701f4a2dd:55cd135701f4a2dd:0000000000000000:1
{"level":"info","ts":1623945422.0967145,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945422.0967636,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945422.096776,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945422.0967884,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:57:02Z" level=info msg="==--> discovery.FindNetworkService() span:76772482b33d0bf7:76772482b33d0bf7:0000000000000000:1"
time="2021-06-17T15:57:02Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=76772482b33d0bf7:76772482b33d0bf7:0000000000000000:1"
time="2021-06-17T15:57:02Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=76772482b33d0bf7:76772482b33d0bf7:0000000000000000:1"
time="2021-06-17T15:57:02Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:57:02Z" level=info msg="==----> initRegistryClient() span:76772482b33d0bf7:2cd5bb2c34b8886f:76772482b33d0bf7:1"
time="2021-06-17T15:57:02Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:57:22Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:57:22Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="76772482b33d0bf7:2cd5bb2c34b8886f:76772482b33d0bf7:1"
time="2021-06-17T15:57:22Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:57:22Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:57:22Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000742600 {member1.com}:0xc000742580 {member2.com}:0xc000742500]}"
time="2021-06-17T15:57:22Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:57:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:57:22Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:57:22Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:57:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:57:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:57:22Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:57:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:57:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:57:22Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:57:27Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:57:27Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:57:32Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:57:32Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:57:37Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:57:37Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:57:37Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:57:37Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:57:37Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="76772482b33d0bf7:2cd5bb2c34b8886f:76772482b33d0bf7:1"
2021/06/17 15:57:37 Reporting span 76772482b33d0bf7:2cd5bb2c34b8886f:76772482b33d0bf7:1
2021/06/17 15:57:37 Reporting span 76772482b33d0bf7:76772482b33d0bf7:0000000000000000:1
{"level":"info","ts":1623945457.114893,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623945457.1351142,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623945457.1351705,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945457.1352057,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:57:37Z" level=info msg="==--> discovery.FindNetworkService() span:2c7b40ccc29693ed:2c7b40ccc29693ed:0000000000000000:1"
time="2021-06-17T15:57:37Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2c7b40ccc29693ed:2c7b40ccc29693ed:0000000000000000:1"
time="2021-06-17T15:57:37Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=2c7b40ccc29693ed:2c7b40ccc29693ed:0000000000000000:1"
time="2021-06-17T15:57:37Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:57:37Z" level=info msg="==----> initRegistryClient() span:2c7b40ccc29693ed:0c9d840610ea9960:2c7b40ccc29693ed:1"
time="2021-06-17T15:57:37Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:57:37Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:57:37Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2c7b40ccc29693ed:0c9d840610ea9960:2c7b40ccc29693ed:1"
time="2021-06-17T15:57:37Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:57:37Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:57:37Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001824c0 {member1.com}:0xc000182400 {member2.com}:0xc000182380]}"
time="2021-06-17T15:57:37Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:57:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:57:37Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:57:37Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:57:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:57:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:57:37Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:57:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:57:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:57:37Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:57:42Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:57:42Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:57:47Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:57:47Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:57:47Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:57:47Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:57:47Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="2c7b40ccc29693ed:0c9d840610ea9960:2c7b40ccc29693ed:1"
2021/06/17 15:57:47 Reporting span 2c7b40ccc29693ed:0c9d840610ea9960:2c7b40ccc29693ed:1
{"level":"info","ts":1623945467.1631377,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:57:47Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2c7b40ccc29693ed:2c7b40ccc29693ed:0000000000000000:1"
time="2021-06-17T15:57:47Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=2c7b40ccc29693ed:2c7b40ccc29693ed:0000000000000000:1"
2021/06/17 15:57:47 Reporting span 2c7b40ccc29693ed:4791a9f70d68edc0:2c7b40ccc29693ed:1
time="2021-06-17T15:57:47Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2c7b40ccc29693ed:2c7b40ccc29693ed:0000000000000000:1"
2021/06/17 15:57:47 Reporting span 2c7b40ccc29693ed:2c7b40ccc29693ed:0000000000000000:1
{"level":"info","ts":1623945467.16882,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945467.1688685,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945467.1688793,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945467.1688864,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:57:47Z" level=info msg="==--> discovery.FindNetworkService() span:3acb552b601c18d1:3acb552b601c18d1:0000000000000000:1"
time="2021-06-17T15:57:47Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3acb552b601c18d1:3acb552b601c18d1:0000000000000000:1"
time="2021-06-17T15:57:47Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=3acb552b601c18d1:3acb552b601c18d1:0000000000000000:1"
time="2021-06-17T15:57:47Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:57:47Z" level=info msg="==----> initRegistryClient() span:3acb552b601c18d1:4a1bc1940ebc9a56:3acb552b601c18d1:1"
time="2021-06-17T15:57:47Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:57:57Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:57:57Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3acb552b601c18d1:4a1bc1940ebc9a56:3acb552b601c18d1:1"
time="2021-06-17T15:57:57Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:57:57Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:57:57Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000358180 {member1.com}:0xc000358100 {member2.com}:0xc000358080]}"
time="2021-06-17T15:57:57Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:57:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:57:57Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:57:57Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:57:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:57:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:57:57Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:57:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:57:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:57:57Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:58:02Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:58:02Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:58:07Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:58:07Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:58:12Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:58:12Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:58:12Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:58:17Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:58:17Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="3acb552b601c18d1:4a1bc1940ebc9a56:3acb552b601c18d1:1"
2021/06/17 15:58:17 Reporting span 3acb552b601c18d1:4a1bc1940ebc9a56:3acb552b601c18d1:1
2021/06/17 15:58:17 Reporting span 3acb552b601c18d1:3acb552b601c18d1:0000000000000000:1
{"level":"info","ts":1623945497.1696048,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623945497.2098281,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623945497.2098887,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945497.209903,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:58:17Z" level=info msg="==--> discovery.FindNetworkService() span:1f9902d6cb8e0c3f:1f9902d6cb8e0c3f:0000000000000000:1"
time="2021-06-17T15:58:17Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1f9902d6cb8e0c3f:1f9902d6cb8e0c3f:0000000000000000:1"
time="2021-06-17T15:58:17Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=1f9902d6cb8e0c3f:1f9902d6cb8e0c3f:0000000000000000:1"
time="2021-06-17T15:58:17Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:58:17Z" level=info msg="==----> initRegistryClient() span:1f9902d6cb8e0c3f:5369d54a17afad55:1f9902d6cb8e0c3f:1"
time="2021-06-17T15:58:17Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:58:17Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:58:17Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1f9902d6cb8e0c3f:5369d54a17afad55:1f9902d6cb8e0c3f:1"
time="2021-06-17T15:58:17Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:58:17Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:58:17Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000359580 {member1.com}:0xc000359600 {member2.com}:0xc000359500]}"
time="2021-06-17T15:58:17Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:58:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:58:17Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:58:17Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:58:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:58:17Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:58:17Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:58:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:58:17Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:58:17Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:58:22Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:58:22Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:58:27Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:58:27Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:58:27Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:58:27Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:58:27Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="1f9902d6cb8e0c3f:5369d54a17afad55:1f9902d6cb8e0c3f:1"
2021/06/17 15:58:27 Reporting span 1f9902d6cb8e0c3f:5369d54a17afad55:1f9902d6cb8e0c3f:1
{"level":"info","ts":1623945507.240913,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:58:27Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1f9902d6cb8e0c3f:1f9902d6cb8e0c3f:0000000000000000:1"
time="2021-06-17T15:58:27Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=1f9902d6cb8e0c3f:1f9902d6cb8e0c3f:0000000000000000:1"
2021/06/17 15:58:27 Reporting span 1f9902d6cb8e0c3f:71d4facf51bfd568:1f9902d6cb8e0c3f:1
time="2021-06-17T15:58:27Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1f9902d6cb8e0c3f:1f9902d6cb8e0c3f:0000000000000000:1"
2021/06/17 15:58:27 Reporting span 1f9902d6cb8e0c3f:1f9902d6cb8e0c3f:0000000000000000:1
{"level":"info","ts":1623945507.2459052,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945507.2459369,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945507.245949,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945507.2459595,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:58:27Z" level=info msg="==--> discovery.FindNetworkService() span:61d60c893edc3f25:61d60c893edc3f25:0000000000000000:1"
time="2021-06-17T15:58:27Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=61d60c893edc3f25:61d60c893edc3f25:0000000000000000:1"
time="2021-06-17T15:58:27Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=61d60c893edc3f25:61d60c893edc3f25:0000000000000000:1"
time="2021-06-17T15:58:27Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:58:27Z" level=info msg="==----> initRegistryClient() span:61d60c893edc3f25:382d747e3fc281c2:61d60c893edc3f25:1"
time="2021-06-17T15:58:27Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:58:27Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:58:27Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="61d60c893edc3f25:382d747e3fc281c2:61d60c893edc3f25:1"
time="2021-06-17T15:58:27Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:58:27Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:58:27Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000775080 {member1.com}:0xc000775100 {member2.com}:0xc000775000]}"
time="2021-06-17T15:58:27Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:58:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:58:27Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:58:27Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:58:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:58:27Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:58:27Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:58:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:58:27Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:58:27Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
{"level":"info","ts":1623945511.843431,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623945511.8435705,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T15:58:32Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:58:32Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:58:37Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:58:37Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:58:42Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:58:42Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:58:42Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:58:57Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:58:57Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="61d60c893edc3f25:382d747e3fc281c2:61d60c893edc3f25:1"
2021/06/17 15:58:57 Reporting span 61d60c893edc3f25:382d747e3fc281c2:61d60c893edc3f25:1
2021/06/17 15:58:57 Reporting span 61d60c893edc3f25:61d60c893edc3f25:0000000000000000:1
{"level":"info","ts":1623945537.2467544,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623945537.246831,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623945537.246844,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945537.2468555,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:58:57Z" level=info msg="==--> discovery.FindNetworkService() span:53feecd4f1c848dd:53feecd4f1c848dd:0000000000000000:1"
time="2021-06-17T15:58:57Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=53feecd4f1c848dd:53feecd4f1c848dd:0000000000000000:1"
time="2021-06-17T15:58:57Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=53feecd4f1c848dd:53feecd4f1c848dd:0000000000000000:1"
time="2021-06-17T15:58:57Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:58:57Z" level=info msg="==----> initRegistryClient() span:53feecd4f1c848dd:157a237e46216fc6:53feecd4f1c848dd:1"
time="2021-06-17T15:58:57Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:58:57Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:58:57Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="53feecd4f1c848dd:157a237e46216fc6:53feecd4f1c848dd:1"
time="2021-06-17T15:58:57Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:58:57Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:58:57Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0007420c0 {member1.com}:0xc000742140 {member2.com}:0xc000742040]}"
time="2021-06-17T15:58:57Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:58:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:58:57Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:58:57Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:58:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:58:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:58:57Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:58:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:58:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:58:57Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:59:02Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:59:02Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:59:07Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:59:07Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:59:07Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:59:07Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:59:07Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="53feecd4f1c848dd:157a237e46216fc6:53feecd4f1c848dd:1"
2021/06/17 15:59:07 Reporting span 53feecd4f1c848dd:157a237e46216fc6:53feecd4f1c848dd:1
{"level":"info","ts":1623945547.276883,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:59:07Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=53feecd4f1c848dd:53feecd4f1c848dd:0000000000000000:1"
time="2021-06-17T15:59:07Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=53feecd4f1c848dd:53feecd4f1c848dd:0000000000000000:1"
2021/06/17 15:59:07 Reporting span 53feecd4f1c848dd:47166ce83f5e5803:53feecd4f1c848dd:1
time="2021-06-17T15:59:07Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=53feecd4f1c848dd:53feecd4f1c848dd:0000000000000000:1"
2021/06/17 15:59:07 Reporting span 53feecd4f1c848dd:53feecd4f1c848dd:0000000000000000:1
{"level":"info","ts":1623945547.2829826,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945547.2830312,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945547.283045,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945547.283057,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:59:07Z" level=info msg="==--> discovery.FindNetworkService() span:210860f435f3dfcb:210860f435f3dfcb:0000000000000000:1"
time="2021-06-17T15:59:07Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=210860f435f3dfcb:210860f435f3dfcb:0000000000000000:1"
time="2021-06-17T15:59:07Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=210860f435f3dfcb:210860f435f3dfcb:0000000000000000:1"
time="2021-06-17T15:59:07Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:59:07Z" level=info msg="==----> initRegistryClient() span:210860f435f3dfcb:79900f12e0973c3e:210860f435f3dfcb:1"
time="2021-06-17T15:59:07Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:59:17Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:59:17Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="210860f435f3dfcb:79900f12e0973c3e:210860f435f3dfcb:1"
time="2021-06-17T15:59:17Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T15:59:17Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:59:17Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000743440 {member1.com}:0xc0007433c0 {member2.com}:0xc000743340]}"
time="2021-06-17T15:59:17Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:59:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:59:17Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:59:17Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:59:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:59:17Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:59:17Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:59:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:59:17Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:59:17Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:59:22Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:59:22Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:59:27Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:59:27Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:59:32Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:59:32Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T15:59:32Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T15:59:37Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T15:59:37Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="210860f435f3dfcb:79900f12e0973c3e:210860f435f3dfcb:1"
2021/06/17 15:59:37 Reporting span 210860f435f3dfcb:79900f12e0973c3e:210860f435f3dfcb:1
2021/06/17 15:59:37 Reporting span 210860f435f3dfcb:210860f435f3dfcb:0000000000000000:1
{"level":"info","ts":1623945577.284357,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623945577.2844205,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623945577.2844331,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945577.284443,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T15:59:37Z" level=info msg="==--> discovery.FindNetworkService() span:6de0ecddb664e625:6de0ecddb664e625:0000000000000000:1"
time="2021-06-17T15:59:37Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6de0ecddb664e625:6de0ecddb664e625:0000000000000000:1"
time="2021-06-17T15:59:37Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=6de0ecddb664e625:6de0ecddb664e625:0000000000000000:1"
time="2021-06-17T15:59:37Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:59:37Z" level=info msg="==----> initRegistryClient() span:6de0ecddb664e625:4ac6c6623cab392a:6de0ecddb664e625:1"
time="2021-06-17T15:59:37Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:59:37Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:59:37Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6de0ecddb664e625:4ac6c6623cab392a:6de0ecddb664e625:1"
time="2021-06-17T15:59:37Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T15:59:37Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T15:59:37Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000182800 {member1.com}:0xc000182900 {member2.com}:0xc000182780]}"
time="2021-06-17T15:59:37Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T15:59:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:59:37Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T15:59:37Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T15:59:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:59:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T15:59:37Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T15:59:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T15:59:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T15:59:37Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:59:42Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:59:42Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:59:47Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T15:59:47Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:59:47Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:59:47Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T15:59:47Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="6de0ecddb664e625:4ac6c6623cab392a:6de0ecddb664e625:1"
2021/06/17 15:59:47 Reporting span 6de0ecddb664e625:4ac6c6623cab392a:6de0ecddb664e625:1
{"level":"info","ts":1623945587.3219824,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T15:59:47Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6de0ecddb664e625:6de0ecddb664e625:0000000000000000:1"
time="2021-06-17T15:59:47Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=6de0ecddb664e625:6de0ecddb664e625:0000000000000000:1"
2021/06/17 15:59:47 Reporting span 6de0ecddb664e625:7d93ffa9454305fe:6de0ecddb664e625:1
time="2021-06-17T15:59:47Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6de0ecddb664e625:6de0ecddb664e625:0000000000000000:1"
2021/06/17 15:59:47 Reporting span 6de0ecddb664e625:6de0ecddb664e625:0000000000000000:1
{"level":"info","ts":1623945587.328841,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945587.3288887,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945587.3288968,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945587.328904,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T15:59:47Z" level=info msg="==--> discovery.FindNetworkService() span:1050daff3d22c129:1050daff3d22c129:0000000000000000:1"
time="2021-06-17T15:59:47Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1050daff3d22c129:1050daff3d22c129:0000000000000000:1"
time="2021-06-17T15:59:47Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=1050daff3d22c129:1050daff3d22c129:0000000000000000:1"
time="2021-06-17T15:59:47Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T15:59:47Z" level=info msg="==----> initRegistryClient() span:1050daff3d22c129:7557a53e161c61c7:1050daff3d22c129:1"
time="2021-06-17T15:59:47Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:00:07Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:00:07Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1050daff3d22c129:7557a53e161c61c7:1050daff3d22c129:1"
time="2021-06-17T16:00:07Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:00:07Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:00:07Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0007421c0 {member1.com}:0xc000742240 {member2.com}:0xc000742140]}"
time="2021-06-17T16:00:07Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:00:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:00:07Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:00:07Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:00:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:00:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:00:07Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:00:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:00:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:00:07Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:00:12Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:00:12Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:00:17Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:00:17Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:00:22Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:00:22Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:00:22Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:00:22Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:00:22Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="1050daff3d22c129:7557a53e161c61c7:1050daff3d22c129:1"
2021/06/17 16:00:22 Reporting span 1050daff3d22c129:7557a53e161c61c7:1050daff3d22c129:1
2021/06/17 16:00:22 Reporting span 1050daff3d22c129:1050daff3d22c129:0000000000000000:1
{"level":"info","ts":1623945622.35038,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623945622.3504488,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623945622.3504622,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945622.3504734,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:00:22Z" level=info msg="==--> discovery.FindNetworkService() span:76facb70201990aa:76facb70201990aa:0000000000000000:1"
time="2021-06-17T16:00:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=76facb70201990aa:76facb70201990aa:0000000000000000:1"
time="2021-06-17T16:00:22Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=76facb70201990aa:76facb70201990aa:0000000000000000:1"
time="2021-06-17T16:00:22Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:00:22Z" level=info msg="==----> initRegistryClient() span:76facb70201990aa:45205bdca555f977:76facb70201990aa:1"
time="2021-06-17T16:00:22Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:00:22Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:00:22Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="76facb70201990aa:45205bdca555f977:76facb70201990aa:1"
time="2021-06-17T16:00:22Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:00:22Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:00:22Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000bb640 {member1.com}:0xc0000bb540 {member2.com}:0xc0000bb480]}"
time="2021-06-17T16:00:22Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:00:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:00:22Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:00:22Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:00:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:00:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:00:22Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:00:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:00:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:00:22Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:00:27Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:00:27Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
{"level":"info","ts":1623945631.8437402,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623945631.8441708,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T16:00:32Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:00:32Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:00:32Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:00:32Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:00:32Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="76facb70201990aa:45205bdca555f977:76facb70201990aa:1"
2021/06/17 16:00:32 Reporting span 76facb70201990aa:45205bdca555f977:76facb70201990aa:1
{"level":"info","ts":1623945632.380213,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:00:32Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=76facb70201990aa:76facb70201990aa:0000000000000000:1"
time="2021-06-17T16:00:32Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=76facb70201990aa:76facb70201990aa:0000000000000000:1"
2021/06/17 16:00:32 Reporting span 76facb70201990aa:6a4fb3b175acff37:76facb70201990aa:1
time="2021-06-17T16:00:32Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=76facb70201990aa:76facb70201990aa:0000000000000000:1"
2021/06/17 16:00:32 Reporting span 76facb70201990aa:76facb70201990aa:0000000000000000:1
{"level":"info","ts":1623945632.3847625,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945632.3847938,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945632.384823,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945632.3848345,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:00:32Z" level=info msg="==--> discovery.FindNetworkService() span:2e7905456f25fb38:2e7905456f25fb38:0000000000000000:1"
time="2021-06-17T16:00:32Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2e7905456f25fb38:2e7905456f25fb38:0000000000000000:1"
time="2021-06-17T16:00:32Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=2e7905456f25fb38:2e7905456f25fb38:0000000000000000:1"
time="2021-06-17T16:00:32Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:00:32Z" level=info msg="==----> initRegistryClient() span:2e7905456f25fb38:5c8e2adea308dfb9:2e7905456f25fb38:1"
time="2021-06-17T16:00:32Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:00:32Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:00:32Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2e7905456f25fb38:5c8e2adea308dfb9:2e7905456f25fb38:1"
time="2021-06-17T16:00:32Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:00:32Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:00:32Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ee980 {member1.com}:0xc0004ee900 {member2.com}:0xc0004ee880]}"
time="2021-06-17T16:00:32Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:00:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:00:32Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:00:32Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:00:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:00:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:00:32Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:00:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:00:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:00:32Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:00:32Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:00:32Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:00:32Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="2e7905456f25fb38:5c8e2adea308dfb9:2e7905456f25fb38:1"
2021/06/17 16:00:32 Reporting span 2e7905456f25fb38:5c8e2adea308dfb9:2e7905456f25fb38:1
{"level":"info","ts":1623945632.426371,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:00:32Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2e7905456f25fb38:2e7905456f25fb38:0000000000000000:1"
time="2021-06-17T16:00:32Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=2e7905456f25fb38:2e7905456f25fb38:0000000000000000:1"
2021/06/17 16:00:32 Reporting span 2e7905456f25fb38:0a5a522985d0f3bc:2e7905456f25fb38:1
time="2021-06-17T16:00:32Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2e7905456f25fb38:2e7905456f25fb38:0000000000000000:1"
2021/06/17 16:00:32 Reporting span 2e7905456f25fb38:2e7905456f25fb38:0000000000000000:1
{"level":"info","ts":1623945632.429631,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623945632.4298666,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623945632.4299555,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945632.4299848,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945632.4299967,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623945632.4300098,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623945632.4300191,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623945632.43013,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945632.4302173,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945632.430247,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945632.4302607,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945632.43027,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945632.430278,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945632.430394,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623945632.4304302,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623945632.4304416,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945632.4304512,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945632.43046,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623945632.4304686,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623945632.4304774,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623945632.430494,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623945632.4305184,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945632.4305284,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:00:32Z" level=info msg="==--> discovery.FindNetworkService() span:617024250a42edf6:617024250a42edf6:0000000000000000:1"
time="2021-06-17T16:00:32Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=617024250a42edf6:617024250a42edf6:0000000000000000:1"
time="2021-06-17T16:00:32Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=617024250a42edf6:617024250a42edf6:0000000000000000:1"
time="2021-06-17T16:00:32Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:00:32Z" level=info msg="==----> initRegistryClient() span:617024250a42edf6:06c0a4af0c9666bd:617024250a42edf6:1"
time="2021-06-17T16:00:32Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:00:32Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:00:32Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="617024250a42edf6:06c0a4af0c9666bd:617024250a42edf6:1"
time="2021-06-17T16:00:32Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:00:32Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:00:32Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000358fc0 {member1.com}:0xc000358f40 {member2.com}:0xc000358ec0]}"
time="2021-06-17T16:00:32Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:00:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:00:32Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:00:32Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:00:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:00:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:00:32Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:00:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:00:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:00:32Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:00:37Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:00:37Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:00:42Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:00:42Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:00:42Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:00:42Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:00:42Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="617024250a42edf6:06c0a4af0c9666bd:617024250a42edf6:1"
2021/06/17 16:00:42 Reporting span 617024250a42edf6:06c0a4af0c9666bd:617024250a42edf6:1
{"level":"info","ts":1623945642.460959,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:00:42Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=617024250a42edf6:617024250a42edf6:0000000000000000:1"
time="2021-06-17T16:00:42Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=617024250a42edf6:617024250a42edf6:0000000000000000:1"
2021/06/17 16:00:42 Reporting span 617024250a42edf6:03781cd2ff5021b6:617024250a42edf6:1
time="2021-06-17T16:00:42Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=617024250a42edf6:617024250a42edf6:0000000000000000:1"
2021/06/17 16:00:42 Reporting span 617024250a42edf6:617024250a42edf6:0000000000000000:1
{"level":"info","ts":1623945642.466332,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945642.4666896,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945642.4667292,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945642.4668512,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:00:42Z" level=info msg="==--> discovery.FindNetworkService() span:412dcaec7d5c5d0b:412dcaec7d5c5d0b:0000000000000000:1"
time="2021-06-17T16:00:42Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=412dcaec7d5c5d0b:412dcaec7d5c5d0b:0000000000000000:1"
time="2021-06-17T16:00:42Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=412dcaec7d5c5d0b:412dcaec7d5c5d0b:0000000000000000:1"
time="2021-06-17T16:00:42Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:00:42Z" level=info msg="==----> initRegistryClient() span:412dcaec7d5c5d0b:75163b02700ffc3a:412dcaec7d5c5d0b:1"
time="2021-06-17T16:00:42Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:01:02Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:01:02Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="412dcaec7d5c5d0b:75163b02700ffc3a:412dcaec7d5c5d0b:1"
time="2021-06-17T16:01:02Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:01:02Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:01:02Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000bb240 {member1.com}:0xc0000bb2c0 {member2.com}:0xc0000bb1c0]}"
time="2021-06-17T16:01:02Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:01:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:01:02Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:01:02Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:01:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:01:02Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:01:02Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:01:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:01:02Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:01:02Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:01:07Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:01:07Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:01:12Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:01:12Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:01:17Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:01:17Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:01:17Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:01:17Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:01:17Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="412dcaec7d5c5d0b:75163b02700ffc3a:412dcaec7d5c5d0b:1"
2021/06/17 16:01:17 Reporting span 412dcaec7d5c5d0b:75163b02700ffc3a:412dcaec7d5c5d0b:1
2021/06/17 16:01:17 Reporting span 412dcaec7d5c5d0b:412dcaec7d5c5d0b:0000000000000000:1
{"level":"info","ts":1623945677.486274,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623945677.486337,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623945677.4863734,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945677.486384,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:01:17Z" level=info msg="==--> discovery.FindNetworkService() span:69892f82a6791a56:69892f82a6791a56:0000000000000000:1"
time="2021-06-17T16:01:17Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=69892f82a6791a56:69892f82a6791a56:0000000000000000:1"
time="2021-06-17T16:01:17Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=69892f82a6791a56:69892f82a6791a56:0000000000000000:1"
time="2021-06-17T16:01:17Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:01:17Z" level=info msg="==----> initRegistryClient() span:69892f82a6791a56:56d9819e5d01d620:69892f82a6791a56:1"
time="2021-06-17T16:01:17Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:01:17Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:01:17Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="69892f82a6791a56:56d9819e5d01d620:69892f82a6791a56:1"
time="2021-06-17T16:01:17Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:01:17Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:01:17Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004eeac0 {member1.com}:0xc0004eeb40 {member2.com}:0xc0004eea40]}"
time="2021-06-17T16:01:17Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:01:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:01:17Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:01:17Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:01:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:01:17Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:01:17Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:01:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:01:17Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:01:17Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:01:22Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:01:22Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:01:27Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:01:27Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:01:27Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:01:27Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:01:27Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="69892f82a6791a56:56d9819e5d01d620:69892f82a6791a56:1"
2021/06/17 16:01:27 Reporting span 69892f82a6791a56:56d9819e5d01d620:69892f82a6791a56:1
{"level":"info","ts":1623945687.514873,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:01:27Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=69892f82a6791a56:69892f82a6791a56:0000000000000000:1"
time="2021-06-17T16:01:27Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=69892f82a6791a56:69892f82a6791a56:0000000000000000:1"
2021/06/17 16:01:27 Reporting span 69892f82a6791a56:3087bb9b13d0d3e5:69892f82a6791a56:1
time="2021-06-17T16:01:27Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=69892f82a6791a56:69892f82a6791a56:0000000000000000:1"
2021/06/17 16:01:27 Reporting span 69892f82a6791a56:69892f82a6791a56:0000000000000000:1
{"level":"info","ts":1623945687.521189,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945687.5216086,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945687.5216432,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945687.5216568,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:01:27Z" level=info msg="==--> discovery.FindNetworkService() span:4a05848175a1b3d1:4a05848175a1b3d1:0000000000000000:1"
time="2021-06-17T16:01:27Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=4a05848175a1b3d1:4a05848175a1b3d1:0000000000000000:1"
time="2021-06-17T16:01:27Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=4a05848175a1b3d1:4a05848175a1b3d1:0000000000000000:1"
time="2021-06-17T16:01:27Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:01:27Z" level=info msg="==----> initRegistryClient() span:4a05848175a1b3d1:09b9b38ac8974f2a:4a05848175a1b3d1:1"
time="2021-06-17T16:01:27Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:01:37Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:01:37Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4a05848175a1b3d1:09b9b38ac8974f2a:4a05848175a1b3d1:1"
time="2021-06-17T16:01:37Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:01:37Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:01:37Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0007645c0 {member1.com}:0xc000764640 {member2.com}:0xc000764540]}"
time="2021-06-17T16:01:37Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:01:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:01:37Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:01:37Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:01:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:01:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:01:37Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:01:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:01:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:01:37Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:01:42Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:01:42Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:01:47Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:01:47Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:01:52Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:01:52Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:01:52Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:01:57Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:01:57Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="4a05848175a1b3d1:09b9b38ac8974f2a:4a05848175a1b3d1:1"
2021/06/17 16:01:57 Reporting span 4a05848175a1b3d1:09b9b38ac8974f2a:4a05848175a1b3d1:1
2021/06/17 16:01:57 Reporting span 4a05848175a1b3d1:4a05848175a1b3d1:0000000000000000:1
{"level":"info","ts":1623945717.5232728,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623945717.5233607,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623945717.5233955,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945717.5234618,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:01:57Z" level=info msg="==--> discovery.FindNetworkService() span:045f835078e8f7fd:045f835078e8f7fd:0000000000000000:1"
time="2021-06-17T16:01:57Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=045f835078e8f7fd:045f835078e8f7fd:0000000000000000:1"
time="2021-06-17T16:01:57Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=045f835078e8f7fd:045f835078e8f7fd:0000000000000000:1"
time="2021-06-17T16:01:57Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:01:57Z" level=info msg="==----> initRegistryClient() span:045f835078e8f7fd:54213651f20a1fd9:045f835078e8f7fd:1"
time="2021-06-17T16:01:57Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:01:57Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:01:57Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="045f835078e8f7fd:54213651f20a1fd9:045f835078e8f7fd:1"
time="2021-06-17T16:01:57Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:01:57Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:01:57Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0007659c0 {member1.com}:0xc000765a40 {member2.com}:0xc000765940]}"
time="2021-06-17T16:01:57Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:01:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:01:57Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:01:57Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:01:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:01:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:01:57Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:01:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:01:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:01:57Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:02:02Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:02:02Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:02:07Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:02:07Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:02:07Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:02:07Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:02:07Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="045f835078e8f7fd:54213651f20a1fd9:045f835078e8f7fd:1"
2021/06/17 16:02:07 Reporting span 045f835078e8f7fd:54213651f20a1fd9:045f835078e8f7fd:1
{"level":"info","ts":1623945727.5544715,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:02:07Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=045f835078e8f7fd:045f835078e8f7fd:0000000000000000:1"
time="2021-06-17T16:02:07Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=045f835078e8f7fd:045f835078e8f7fd:0000000000000000:1"
2021/06/17 16:02:07 Reporting span 045f835078e8f7fd:50468b200d941111:045f835078e8f7fd:1
time="2021-06-17T16:02:07Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=045f835078e8f7fd:045f835078e8f7fd:0000000000000000:1"
2021/06/17 16:02:07 Reporting span 045f835078e8f7fd:045f835078e8f7fd:0000000000000000:1
{"level":"info","ts":1623945727.5596619,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945727.5597212,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945727.5597725,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945727.5598514,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:02:07Z" level=info msg="==--> discovery.FindNetworkService() span:58e1005e43ea1457:58e1005e43ea1457:0000000000000000:1"
time="2021-06-17T16:02:07Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=58e1005e43ea1457:58e1005e43ea1457:0000000000000000:1"
time="2021-06-17T16:02:07Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=58e1005e43ea1457:58e1005e43ea1457:0000000000000000:1"
time="2021-06-17T16:02:07Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:02:07Z" level=info msg="==----> initRegistryClient() span:58e1005e43ea1457:74d85b8a33d89a31:58e1005e43ea1457:1"
time="2021-06-17T16:02:07Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:02:07Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:02:07Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="58e1005e43ea1457:74d85b8a33d89a31:58e1005e43ea1457:1"
time="2021-06-17T16:02:07Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:02:07Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:02:07Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0003583c0 {member1.com}:0xc000358440 {member2.com}:0xc000358340]}"
time="2021-06-17T16:02:07Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:02:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:02:07Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:02:07Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:02:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:02:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:02:07Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:02:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:02:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:02:07Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:02:07Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:02:07Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:02:14Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="58e1005e43ea1457:74d85b8a33d89a31:58e1005e43ea1457:1"
2021/06/17 16:02:14 Reporting span 58e1005e43ea1457:74d85b8a33d89a31:58e1005e43ea1457:1
{"level":"info","ts":1623945734.27316,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:02:14Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=58e1005e43ea1457:58e1005e43ea1457:0000000000000000:1"
time="2021-06-17T16:02:14Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=58e1005e43ea1457:58e1005e43ea1457:0000000000000000:1"
2021/06/17 16:02:14 Reporting span 58e1005e43ea1457:7bddf115368a41f0:58e1005e43ea1457:1
time="2021-06-17T16:02:14Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=58e1005e43ea1457:58e1005e43ea1457:0000000000000000:1"
2021/06/17 16:02:14 Reporting span 58e1005e43ea1457:58e1005e43ea1457:0000000000000000:1
{"level":"info","ts":1623945734.276196,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623945734.2764914,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623945734.2765155,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945734.2765226,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945734.27653,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623945734.2765384,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623945734.2765453,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623945734.276552,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945734.2765608,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945734.2765849,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945734.276596,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945734.2766218,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945734.2766323,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945734.276659,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623945734.2766697,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623945734.2766774,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945734.2767007,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945734.276711,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623945734.2767198,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623945734.2767427,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623945734.2767596,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623945734.2767844,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945734.2768128,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:02:14Z" level=info msg="==--> discovery.FindNetworkService() span:6c5cb161cbbc3620:6c5cb161cbbc3620:0000000000000000:1"
time="2021-06-17T16:02:14Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6c5cb161cbbc3620:6c5cb161cbbc3620:0000000000000000:1"
time="2021-06-17T16:02:14Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=6c5cb161cbbc3620:6c5cb161cbbc3620:0000000000000000:1"
time="2021-06-17T16:02:14Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:02:14Z" level=info msg="==----> initRegistryClient() span:6c5cb161cbbc3620:3a4746e7e2c151cc:6c5cb161cbbc3620:1"
time="2021-06-17T16:02:14Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:02:14Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:02:14Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6c5cb161cbbc3620:3a4746e7e2c151cc:6c5cb161cbbc3620:1"
time="2021-06-17T16:02:14Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:02:14Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:02:14Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ef940 {member1.com}:0xc0004efb80 {member2.com}:0xc0004ef6c0]}"
time="2021-06-17T16:02:14Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:02:14Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:02:14Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:02:14Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:02:14Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:02:14Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:02:14Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:02:14Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:02:14Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:02:14Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:02:19Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:02:19Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:02:24Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:02:24Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:02:24Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:02:24Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:02:24Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="6c5cb161cbbc3620:3a4746e7e2c151cc:6c5cb161cbbc3620:1"
2021/06/17 16:02:24 Reporting span 6c5cb161cbbc3620:3a4746e7e2c151cc:6c5cb161cbbc3620:1
{"level":"info","ts":1623945744.3094811,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:02:24Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6c5cb161cbbc3620:6c5cb161cbbc3620:0000000000000000:1"
time="2021-06-17T16:02:24Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=6c5cb161cbbc3620:6c5cb161cbbc3620:0000000000000000:1"
2021/06/17 16:02:24 Reporting span 6c5cb161cbbc3620:33361b685d63d173:6c5cb161cbbc3620:1
time="2021-06-17T16:02:24Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6c5cb161cbbc3620:6c5cb161cbbc3620:0000000000000000:1"
2021/06/17 16:02:24 Reporting span 6c5cb161cbbc3620:6c5cb161cbbc3620:0000000000000000:1
{"level":"info","ts":1623945744.316337,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945744.3163805,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945744.3163924,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945744.3164036,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:02:24Z" level=info msg="==--> discovery.FindNetworkService() span:310e62a30d2dab56:310e62a30d2dab56:0000000000000000:1"
time="2021-06-17T16:02:24Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=310e62a30d2dab56:310e62a30d2dab56:0000000000000000:1"
time="2021-06-17T16:02:24Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=310e62a30d2dab56:310e62a30d2dab56:0000000000000000:1"
time="2021-06-17T16:02:24Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:02:24Z" level=info msg="==----> initRegistryClient() span:310e62a30d2dab56:144e4ce7a1976439:310e62a30d2dab56:1"
time="2021-06-17T16:02:24Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
{"level":"info","ts":1623945751.8442628,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623945751.8444114,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T16:02:34Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:02:34Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="310e62a30d2dab56:144e4ce7a1976439:310e62a30d2dab56:1"
time="2021-06-17T16:02:34Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:02:34Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:02:34Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000bbac0 {member1.com}:0xc0000bba40 {member2.com}:0xc0000bb940]}"
time="2021-06-17T16:02:34Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:02:34Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:02:34Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:02:34Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:02:34Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:02:34Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:02:34Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:02:34Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:02:34Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:02:34Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:02:34Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:02:34Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:02:41Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="310e62a30d2dab56:144e4ce7a1976439:310e62a30d2dab56:1"
2021/06/17 16:02:41 Reporting span 310e62a30d2dab56:144e4ce7a1976439:310e62a30d2dab56:1
{"level":"info","ts":1623945761.0268602,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:02:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=310e62a30d2dab56:310e62a30d2dab56:0000000000000000:1"
time="2021-06-17T16:02:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=310e62a30d2dab56:310e62a30d2dab56:0000000000000000:1"
2021/06/17 16:02:41 Reporting span 310e62a30d2dab56:1259b5357fde9fff:310e62a30d2dab56:1
time="2021-06-17T16:02:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=310e62a30d2dab56:310e62a30d2dab56:0000000000000000:1"
2021/06/17 16:02:41 Reporting span 310e62a30d2dab56:310e62a30d2dab56:0000000000000000:1
{"level":"info","ts":1623945761.0291781,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623945761.0293481,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623945761.029391,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945761.0294054,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945761.0294168,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623945761.0294297,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623945761.0294392,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623945761.029448,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945761.029488,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945761.0294983,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945761.0295076,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945761.029516,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945761.0295577,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945761.0295682,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623945761.0295773,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623945761.0295858,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945761.0296106,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945761.0296218,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623945761.0296304,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623945761.029638,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623945761.0296893,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623945761.0297165,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945761.029728,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:02:41Z" level=info msg="==--> discovery.FindNetworkService() span:0874f1b087515e98:0874f1b087515e98:0000000000000000:1"
time="2021-06-17T16:02:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=0874f1b087515e98:0874f1b087515e98:0000000000000000:1"
time="2021-06-17T16:02:41Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=0874f1b087515e98:0874f1b087515e98:0000000000000000:1"
time="2021-06-17T16:02:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:02:41Z" level=info msg="==----> initRegistryClient() span:0874f1b087515e98:44173065fab9bec3:0874f1b087515e98:1"
time="2021-06-17T16:02:41Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:02:41Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:02:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="0874f1b087515e98:44173065fab9bec3:0874f1b087515e98:1"
time="2021-06-17T16:02:41Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:02:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:02:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000764680 {member1.com}:0xc000764700 {member2.com}:0xc000764600]}"
time="2021-06-17T16:02:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:02:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:02:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:02:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:02:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:02:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:02:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:02:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:02:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:02:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:02:46Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:02:46Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:02:51Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:02:51Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:02:51Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:02:51Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:02:51Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="0874f1b087515e98:44173065fab9bec3:0874f1b087515e98:1"
2021/06/17 16:02:51 Reporting span 0874f1b087515e98:44173065fab9bec3:0874f1b087515e98:1
{"level":"info","ts":1623945771.0570092,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:02:51Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=0874f1b087515e98:0874f1b087515e98:0000000000000000:1"
time="2021-06-17T16:02:51Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=0874f1b087515e98:0874f1b087515e98:0000000000000000:1"
2021/06/17 16:02:51 Reporting span 0874f1b087515e98:2f13f64d0e583bb7:0874f1b087515e98:1
time="2021-06-17T16:02:51Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=0874f1b087515e98:0874f1b087515e98:0000000000000000:1"
2021/06/17 16:02:51 Reporting span 0874f1b087515e98:0874f1b087515e98:0000000000000000:1
{"level":"info","ts":1623945771.0623014,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945771.0623567,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945771.0623884,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945771.0624025,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:02:51Z" level=info msg="==--> discovery.FindNetworkService() span:2783f4e531695fd8:2783f4e531695fd8:0000000000000000:1"
time="2021-06-17T16:02:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2783f4e531695fd8:2783f4e531695fd8:0000000000000000:1"
time="2021-06-17T16:02:51Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=2783f4e531695fd8:2783f4e531695fd8:0000000000000000:1"
time="2021-06-17T16:02:51Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:02:51Z" level=info msg="==----> initRegistryClient() span:2783f4e531695fd8:683c561a02fd2f21:2783f4e531695fd8:1"
time="2021-06-17T16:02:51Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:03:01Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:03:01Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2783f4e531695fd8:683c561a02fd2f21:2783f4e531695fd8:1"
time="2021-06-17T16:03:01Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:03:01Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:03:01Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0008bfa00 {member1.com}:0xc0008bfa80 {member2.com}:0xc0008bf980]}"
time="2021-06-17T16:03:01Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:03:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:03:01Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:03:01Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:03:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:03:01Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:03:01Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:03:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:03:01Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:03:01Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:03:06Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:03:06Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:03:11Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:03:11Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:03:16Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:03:16Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:03:16Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:03:21Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:03:21Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="2783f4e531695fd8:683c561a02fd2f21:2783f4e531695fd8:1"
2021/06/17 16:03:21 Reporting span 2783f4e531695fd8:683c561a02fd2f21:2783f4e531695fd8:1
2021/06/17 16:03:21 Reporting span 2783f4e531695fd8:2783f4e531695fd8:0000000000000000:1
{"level":"info","ts":1623945801.063185,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623945801.063489,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623945801.0635688,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945801.0635955,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:03:21Z" level=info msg="==--> discovery.FindNetworkService() span:2ad06ad1f1b14185:2ad06ad1f1b14185:0000000000000000:1"
time="2021-06-17T16:03:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2ad06ad1f1b14185:2ad06ad1f1b14185:0000000000000000:1"
time="2021-06-17T16:03:21Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=2ad06ad1f1b14185:2ad06ad1f1b14185:0000000000000000:1"
time="2021-06-17T16:03:21Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:03:21Z" level=info msg="==----> initRegistryClient() span:2ad06ad1f1b14185:34206d690048860c:2ad06ad1f1b14185:1"
time="2021-06-17T16:03:21Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:03:21Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:03:21Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2ad06ad1f1b14185:34206d690048860c:2ad06ad1f1b14185:1"
time="2021-06-17T16:03:21Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:03:21Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:03:21Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0003586c0 {member1.com}:0xc000358740 {member2.com}:0xc000358640]}"
time="2021-06-17T16:03:21Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:03:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:03:21Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:03:21Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:03:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:03:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:03:21Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:03:21Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:03:21Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:03:21Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:03:26Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:03:26Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:03:31Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:03:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:03:31Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:03:31Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:03:31Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="2ad06ad1f1b14185:34206d690048860c:2ad06ad1f1b14185:1"
2021/06/17 16:03:31 Reporting span 2ad06ad1f1b14185:34206d690048860c:2ad06ad1f1b14185:1
{"level":"info","ts":1623945811.096307,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:03:31Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2ad06ad1f1b14185:2ad06ad1f1b14185:0000000000000000:1"
time="2021-06-17T16:03:31Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=2ad06ad1f1b14185:2ad06ad1f1b14185:0000000000000000:1"
2021/06/17 16:03:31 Reporting span 2ad06ad1f1b14185:0f1ba85d87c8f0de:2ad06ad1f1b14185:1
time="2021-06-17T16:03:31Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2ad06ad1f1b14185:2ad06ad1f1b14185:0000000000000000:1"
2021/06/17 16:03:31 Reporting span 2ad06ad1f1b14185:2ad06ad1f1b14185:0000000000000000:1
{"level":"info","ts":1623945811.1012032,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945811.1013567,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945811.10137,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945811.1013813,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:03:31Z" level=info msg="==--> discovery.FindNetworkService() span:0401e5fa48c28b93:0401e5fa48c28b93:0000000000000000:1"
time="2021-06-17T16:03:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=0401e5fa48c28b93:0401e5fa48c28b93:0000000000000000:1"
time="2021-06-17T16:03:31Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=0401e5fa48c28b93:0401e5fa48c28b93:0000000000000000:1"
time="2021-06-17T16:03:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:03:31Z" level=info msg="==----> initRegistryClient() span:0401e5fa48c28b93:3a59ee377b03836f:0401e5fa48c28b93:1"
time="2021-06-17T16:03:31Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:03:31Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:03:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="0401e5fa48c28b93:3a59ee377b03836f:0401e5fa48c28b93:1"
time="2021-06-17T16:03:31Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:03:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:03:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000359880 {member1.com}:0xc000359900 {member2.com}:0xc000359800]}"
time="2021-06-17T16:03:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:03:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:03:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:03:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:03:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:03:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:03:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:03:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:03:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:03:31Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:03:31Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:03:31Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:03:31Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="0401e5fa48c28b93:3a59ee377b03836f:0401e5fa48c28b93:1"
2021/06/17 16:03:31 Reporting span 0401e5fa48c28b93:3a59ee377b03836f:0401e5fa48c28b93:1
{"level":"info","ts":1623945811.1655374,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:03:31Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=0401e5fa48c28b93:0401e5fa48c28b93:0000000000000000:1"
time="2021-06-17T16:03:31Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=0401e5fa48c28b93:0401e5fa48c28b93:0000000000000000:1"
2021/06/17 16:03:31 Reporting span 0401e5fa48c28b93:4c6ac2eb708b1f7e:0401e5fa48c28b93:1
time="2021-06-17T16:03:31Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=0401e5fa48c28b93:0401e5fa48c28b93:0000000000000000:1"
2021/06/17 16:03:31 Reporting span 0401e5fa48c28b93:0401e5fa48c28b93:0000000000000000:1
{"level":"info","ts":1623945811.168026,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623945811.168065,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623945811.168077,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945811.1683826,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945811.1684198,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623945811.1684349,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623945811.168444,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623945811.1684535,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945811.1684623,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945811.1684728,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945811.168482,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945811.1684902,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945811.1685,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945811.1685088,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623945811.1685145,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623945811.168522,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945811.1685302,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945811.1685567,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623945811.1685667,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623945811.168575,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623945811.16859,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623945811.1686182,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945811.1686294,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:03:31Z" level=info msg="==--> discovery.FindNetworkService() span:1b5a27307827a5dd:1b5a27307827a5dd:0000000000000000:1"
time="2021-06-17T16:03:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1b5a27307827a5dd:1b5a27307827a5dd:0000000000000000:1"
time="2021-06-17T16:03:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=1b5a27307827a5dd:1b5a27307827a5dd:0000000000000000:1"
time="2021-06-17T16:03:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:03:31Z" level=info msg="==----> initRegistryClient() span:1b5a27307827a5dd:427f2acbf895c0b6:1b5a27307827a5dd:1"
time="2021-06-17T16:03:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:03:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:03:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1b5a27307827a5dd:427f2acbf895c0b6:1b5a27307827a5dd:1"
time="2021-06-17T16:03:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:03:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:03:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000842b80 {member1.com}:0xc000842c00 {member2.com}:0xc000842ac0]}"
time="2021-06-17T16:03:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:03:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:03:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:03:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:03:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:03:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:03:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:03:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:03:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:03:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:03:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:03:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:03:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:03:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:03:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:03:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:03:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="1b5a27307827a5dd:427f2acbf895c0b6:1b5a27307827a5dd:1"
2021/06/17 16:03:41 Reporting span 1b5a27307827a5dd:427f2acbf895c0b6:1b5a27307827a5dd:1
{"level":"info","ts":1623945821.1984248,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:03:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1b5a27307827a5dd:1b5a27307827a5dd:0000000000000000:1"
time="2021-06-17T16:03:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=1b5a27307827a5dd:1b5a27307827a5dd:0000000000000000:1"
2021/06/17 16:03:41 Reporting span 1b5a27307827a5dd:530838b8fea7ae69:1b5a27307827a5dd:1
time="2021-06-17T16:03:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1b5a27307827a5dd:1b5a27307827a5dd:0000000000000000:1"
2021/06/17 16:03:41 Reporting span 1b5a27307827a5dd:1b5a27307827a5dd:0000000000000000:1
{"level":"info","ts":1623945821.2034528,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945821.2035015,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945821.2035146,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945821.2035518,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:03:41Z" level=info msg="==--> discovery.FindNetworkService() span:41a919a7ebe119f3:41a919a7ebe119f3:0000000000000000:1"
time="2021-06-17T16:03:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=41a919a7ebe119f3:41a919a7ebe119f3:0000000000000000:1"
time="2021-06-17T16:03:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=41a919a7ebe119f3:41a919a7ebe119f3:0000000000000000:1"
time="2021-06-17T16:03:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:03:41Z" level=info msg="==----> initRegistryClient() span:41a919a7ebe119f3:1ad312e0abefa3df:41a919a7ebe119f3:1"
time="2021-06-17T16:03:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:03:41Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:03:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="41a919a7ebe119f3:1ad312e0abefa3df:41a919a7ebe119f3:1"
time="2021-06-17T16:03:41Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:03:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:03:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000137d40 {member1.com}:0xc000137dc0 {member2.com}:0xc000137c00]}"
time="2021-06-17T16:03:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:03:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:03:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:03:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:03:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:03:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:03:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:03:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:03:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:03:41Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:03:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:03:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:03:41Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="41a919a7ebe119f3:1ad312e0abefa3df:41a919a7ebe119f3:1"
2021/06/17 16:03:41 Reporting span 41a919a7ebe119f3:1ad312e0abefa3df:41a919a7ebe119f3:1
{"level":"info","ts":1623945821.24199,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:03:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=41a919a7ebe119f3:41a919a7ebe119f3:0000000000000000:1"
time="2021-06-17T16:03:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=41a919a7ebe119f3:41a919a7ebe119f3:0000000000000000:1"
2021/06/17 16:03:41 Reporting span 41a919a7ebe119f3:327b1cd57de53b46:41a919a7ebe119f3:1
time="2021-06-17T16:03:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=41a919a7ebe119f3:41a919a7ebe119f3:0000000000000000:1"
2021/06/17 16:03:41 Reporting span 41a919a7ebe119f3:41a919a7ebe119f3:0000000000000000:1
{"level":"info","ts":1623945821.2494543,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623945821.2495048,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623945821.2495172,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945821.2495427,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945821.2495553,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623945821.249575,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623945821.249585,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623945821.2501414,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945821.2502155,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945821.2502856,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945821.2503252,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945821.2503974,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945821.2505333,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945821.250549,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623945821.2505586,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623945821.2505677,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945821.2505772,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945821.250589,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623945821.2506366,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623945821.2506444,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623945871.8445532,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623945871.844653,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623945871.844677,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945871.844704,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945871.8447006,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T16:04:31Z" level=info msg="==--> discovery.FindNetworkService() span:268bfc0a9309beb6:268bfc0a9309beb6:0000000000000000:1"
time="2021-06-17T16:04:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=268bfc0a9309beb6:268bfc0a9309beb6:0000000000000000:1"
time="2021-06-17T16:04:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=268bfc0a9309beb6:268bfc0a9309beb6:0000000000000000:1"
time="2021-06-17T16:04:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:04:31Z" level=info msg="==----> initRegistryClient() span:268bfc0a9309beb6:1659184c3cadf8b5:268bfc0a9309beb6:1"
time="2021-06-17T16:04:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:04:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:04:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="268bfc0a9309beb6:1659184c3cadf8b5:268bfc0a9309beb6:1"
time="2021-06-17T16:04:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:04:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:04:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0006b2480 {member1.com}:0xc0006b2500 {member2.com}:0xc0006b2400]}"
time="2021-06-17T16:04:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:04:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:04:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:04:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:04:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:04:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:04:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:04:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:04:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:04:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:04:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:04:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:04:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:04:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:04:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:04:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:04:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="268bfc0a9309beb6:1659184c3cadf8b5:268bfc0a9309beb6:1"
2021/06/17 16:04:41 Reporting span 268bfc0a9309beb6:1659184c3cadf8b5:268bfc0a9309beb6:1
{"level":"info","ts":1623945881.8735268,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:04:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=268bfc0a9309beb6:268bfc0a9309beb6:0000000000000000:1"
time="2021-06-17T16:04:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=268bfc0a9309beb6:268bfc0a9309beb6:0000000000000000:1"
2021/06/17 16:04:41 Reporting span 268bfc0a9309beb6:540ac4c93c55a78e:268bfc0a9309beb6:1
time="2021-06-17T16:04:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=268bfc0a9309beb6:268bfc0a9309beb6:0000000000000000:1"
2021/06/17 16:04:41 Reporting span 268bfc0a9309beb6:268bfc0a9309beb6:0000000000000000:1
{"level":"info","ts":1623945881.8787718,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945881.8788114,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945881.878824,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945881.878835,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:04:41Z" level=info msg="==--> discovery.FindNetworkService() span:17c98d6576ef6b3e:17c98d6576ef6b3e:0000000000000000:1"
time="2021-06-17T16:04:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=17c98d6576ef6b3e:17c98d6576ef6b3e:0000000000000000:1"
time="2021-06-17T16:04:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=17c98d6576ef6b3e:17c98d6576ef6b3e:0000000000000000:1"
time="2021-06-17T16:04:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:04:41Z" level=info msg="==----> initRegistryClient() span:17c98d6576ef6b3e:2766026a1b7420e5:17c98d6576ef6b3e:1"
time="2021-06-17T16:04:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:05:01Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:05:01Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="17c98d6576ef6b3e:2766026a1b7420e5:17c98d6576ef6b3e:1"
time="2021-06-17T16:05:01Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:05:01Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:05:01Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000842080 {member1.com}:0xc000842000 {member2.com}:0xc0000bbf80]}"
time="2021-06-17T16:05:01Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:05:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:05:01Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:05:01Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:05:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:05:01Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:05:01Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:05:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:05:01Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:05:01Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:05:06Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:05:06Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:05:11Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:05:11Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:05:16Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:05:16Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:05:16Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:05:16Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:05:16Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="17c98d6576ef6b3e:2766026a1b7420e5:17c98d6576ef6b3e:1"
2021/06/17 16:05:16 Reporting span 17c98d6576ef6b3e:2766026a1b7420e5:17c98d6576ef6b3e:1
2021/06/17 16:05:16 Reporting span 17c98d6576ef6b3e:17c98d6576ef6b3e:0000000000000000:1
{"level":"info","ts":1623945916.8990035,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623945916.8991077,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623945916.8991184,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945916.899127,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:05:16Z" level=info msg="==--> discovery.FindNetworkService() span:217849d0c92b27f7:217849d0c92b27f7:0000000000000000:1"
time="2021-06-17T16:05:16Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=217849d0c92b27f7:217849d0c92b27f7:0000000000000000:1"
time="2021-06-17T16:05:16Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=217849d0c92b27f7:217849d0c92b27f7:0000000000000000:1"
time="2021-06-17T16:05:16Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:05:16Z" level=info msg="==----> initRegistryClient() span:217849d0c92b27f7:383cc5f87a6bdf2c:217849d0c92b27f7:1"
time="2021-06-17T16:05:16Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:05:16Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:05:16Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="217849d0c92b27f7:383cc5f87a6bdf2c:217849d0c92b27f7:1"
time="2021-06-17T16:05:16Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:05:16Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:05:16Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004efc80 {member1.com}:0xc0004efd00 {member2.com}:0xc0004efb80]}"
time="2021-06-17T16:05:16Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:05:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:05:16Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:05:16Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:05:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:05:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:05:16Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:05:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:05:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:05:16Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:05:21Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:05:21Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:05:26Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:05:26Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:05:26Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:05:26Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:05:26Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="217849d0c92b27f7:383cc5f87a6bdf2c:217849d0c92b27f7:1"
2021/06/17 16:05:26 Reporting span 217849d0c92b27f7:383cc5f87a6bdf2c:217849d0c92b27f7:1
{"level":"info","ts":1623945926.9311988,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:05:26Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=217849d0c92b27f7:217849d0c92b27f7:0000000000000000:1"
time="2021-06-17T16:05:26Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=217849d0c92b27f7:217849d0c92b27f7:0000000000000000:1"
2021/06/17 16:05:26 Reporting span 217849d0c92b27f7:138cb06db13845a6:217849d0c92b27f7:1
time="2021-06-17T16:05:26Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=217849d0c92b27f7:217849d0c92b27f7:0000000000000000:1"
2021/06/17 16:05:26 Reporting span 217849d0c92b27f7:217849d0c92b27f7:0000000000000000:1
{"level":"info","ts":1623945926.93712,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945926.9371514,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945926.9374754,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945926.9375136,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:05:26Z" level=info msg="==--> discovery.FindNetworkService() span:1ffaf5dd6ff7f5f9:1ffaf5dd6ff7f5f9:0000000000000000:1"
time="2021-06-17T16:05:26Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1ffaf5dd6ff7f5f9:1ffaf5dd6ff7f5f9:0000000000000000:1"
time="2021-06-17T16:05:26Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=1ffaf5dd6ff7f5f9:1ffaf5dd6ff7f5f9:0000000000000000:1"
time="2021-06-17T16:05:26Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:05:26Z" level=info msg="==----> initRegistryClient() span:1ffaf5dd6ff7f5f9:22a023707ccde696:1ffaf5dd6ff7f5f9:1"
time="2021-06-17T16:05:26Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:05:46Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:05:46Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1ffaf5dd6ff7f5f9:22a023707ccde696:1ffaf5dd6ff7f5f9:1"
time="2021-06-17T16:05:46Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:05:46Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:05:46Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000870fc0 {member1.com}:0xc000871040 {member2.com}:0xc000870f40]}"
time="2021-06-17T16:05:46Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:05:46Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:05:46Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:05:46Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:05:46Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:05:46Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:05:46Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:05:46Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:05:46Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:05:46Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:05:51Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:05:51Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:05:56Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:05:56Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:06:01Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:06:01Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:06:01Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:06:01Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:06:01Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="1ffaf5dd6ff7f5f9:22a023707ccde696:1ffaf5dd6ff7f5f9:1"
2021/06/17 16:06:01 Reporting span 1ffaf5dd6ff7f5f9:22a023707ccde696:1ffaf5dd6ff7f5f9:1
2021/06/17 16:06:01 Reporting span 1ffaf5dd6ff7f5f9:1ffaf5dd6ff7f5f9:0000000000000000:1
{"level":"info","ts":1623945961.9874985,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623945961.9876833,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623945961.9876957,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945961.9877064,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:06:01Z" level=info msg="==--> discovery.FindNetworkService() span:50fe1f85c3885245:50fe1f85c3885245:0000000000000000:1"
time="2021-06-17T16:06:01Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=50fe1f85c3885245:50fe1f85c3885245:0000000000000000:1"
time="2021-06-17T16:06:01Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=50fe1f85c3885245:50fe1f85c3885245:0000000000000000:1"
time="2021-06-17T16:06:01Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:06:01Z" level=info msg="==----> initRegistryClient() span:50fe1f85c3885245:2de21ca8d472535d:50fe1f85c3885245:1"
time="2021-06-17T16:06:01Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:06:01Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:06:01Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="50fe1f85c3885245:2de21ca8d472535d:50fe1f85c3885245:1"
time="2021-06-17T16:06:01Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:06:01Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:06:02Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000182b80 {member1.com}:0xc000182b00 {member2.com}:0xc000182a80]}"
time="2021-06-17T16:06:02Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:06:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:06:02Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:06:02Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:06:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:06:02Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:06:02Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:06:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:06:02Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:06:02Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:06:07Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:06:07Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:06:12Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:06:12Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:06:12Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:06:12Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:06:12Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="50fe1f85c3885245:2de21ca8d472535d:50fe1f85c3885245:1"
2021/06/17 16:06:12 Reporting span 50fe1f85c3885245:2de21ca8d472535d:50fe1f85c3885245:1
{"level":"info","ts":1623945972.0194626,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:06:12Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=50fe1f85c3885245:50fe1f85c3885245:0000000000000000:1"
time="2021-06-17T16:06:12Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=50fe1f85c3885245:50fe1f85c3885245:0000000000000000:1"
2021/06/17 16:06:12 Reporting span 50fe1f85c3885245:755e93ca010204c6:50fe1f85c3885245:1
time="2021-06-17T16:06:12Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=50fe1f85c3885245:50fe1f85c3885245:0000000000000000:1"
2021/06/17 16:06:12 Reporting span 50fe1f85c3885245:50fe1f85c3885245:0000000000000000:1
{"level":"info","ts":1623945972.0305407,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945972.0305855,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945972.0305982,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945972.0306096,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:06:12Z" level=info msg="==--> discovery.FindNetworkService() span:32c0534c5c60349a:32c0534c5c60349a:0000000000000000:1"
time="2021-06-17T16:06:12Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=32c0534c5c60349a:32c0534c5c60349a:0000000000000000:1"
time="2021-06-17T16:06:12Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=32c0534c5c60349a:32c0534c5c60349a:0000000000000000:1"
time="2021-06-17T16:06:12Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:06:12Z" level=info msg="==----> initRegistryClient() span:32c0534c5c60349a:5b7a49caace3c5f0:32c0534c5c60349a:1"
time="2021-06-17T16:06:12Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:06:12Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:06:12Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="32c0534c5c60349a:5b7a49caace3c5f0:32c0534c5c60349a:1"
time="2021-06-17T16:06:12Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:06:12Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:06:12Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000badc0 {member1.com}:0xc0000bae40 {member2.com}:0xc0000bad40]}"
time="2021-06-17T16:06:12Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:06:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:06:12Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:06:12Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:06:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:06:12Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:06:12Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:06:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:06:12Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:06:12Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:06:12Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:06:12Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:06:25Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="32c0534c5c60349a:5b7a49caace3c5f0:32c0534c5c60349a:1"
2021/06/17 16:06:25 Reporting span 32c0534c5c60349a:5b7a49caace3c5f0:32c0534c5c60349a:1
{"level":"info","ts":1623945985.404467,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:06:25Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=32c0534c5c60349a:32c0534c5c60349a:0000000000000000:1"
time="2021-06-17T16:06:25Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=32c0534c5c60349a:32c0534c5c60349a:0000000000000000:1"
2021/06/17 16:06:25 Reporting span 32c0534c5c60349a:4ca12ecd490e6606:32c0534c5c60349a:1
time="2021-06-17T16:06:25Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=32c0534c5c60349a:32c0534c5c60349a:0000000000000000:1"
2021/06/17 16:06:25 Reporting span 32c0534c5c60349a:32c0534c5c60349a:0000000000000000:1
{"level":"info","ts":1623945985.407003,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623945985.4070404,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623945985.4070535,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945985.4070797,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945985.4070926,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623945985.4071047,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623945985.407114,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623945985.4071229,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945985.4071321,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945985.407142,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945985.407186,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945985.4072201,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945985.4072878,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945985.4073427,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623945985.407357,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623945985.4073668,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623945985.4073749,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623945985.4073846,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623945985.4074101,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623945985.4074204,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623945985.4074535,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623945985.4074817,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623945985.4074926,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:06:25Z" level=info msg="==--> discovery.FindNetworkService() span:0ee8a78172999afc:0ee8a78172999afc:0000000000000000:1"
time="2021-06-17T16:06:25Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=0ee8a78172999afc:0ee8a78172999afc:0000000000000000:1"
time="2021-06-17T16:06:25Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=0ee8a78172999afc:0ee8a78172999afc:0000000000000000:1"
time="2021-06-17T16:06:25Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:06:25Z" level=info msg="==----> initRegistryClient() span:0ee8a78172999afc:29bc2054d4bf1a22:0ee8a78172999afc:1"
time="2021-06-17T16:06:25Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:06:25Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:06:25Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="0ee8a78172999afc:29bc2054d4bf1a22:0ee8a78172999afc:1"
time="2021-06-17T16:06:25Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:06:25Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:06:25Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000902880 {member1.com}:0xc000902900 {member2.com}:0xc000902800]}"
time="2021-06-17T16:06:25Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:06:25Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:06:25Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:06:25Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:06:25Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:06:25Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:06:25Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:06:25Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:06:25Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:06:25Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:06:30Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:06:30Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
{"level":"info","ts":1623945991.8449454,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623945991.8450773,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T16:06:35Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:06:35Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:06:35Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:06:35Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:06:35Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="0ee8a78172999afc:29bc2054d4bf1a22:0ee8a78172999afc:1"
2021/06/17 16:06:35 Reporting span 0ee8a78172999afc:29bc2054d4bf1a22:0ee8a78172999afc:1
{"level":"info","ts":1623945995.4376316,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:06:35Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=0ee8a78172999afc:0ee8a78172999afc:0000000000000000:1"
time="2021-06-17T16:06:35Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=0ee8a78172999afc:0ee8a78172999afc:0000000000000000:1"
2021/06/17 16:06:35 Reporting span 0ee8a78172999afc:4dde1a936b96dde1:0ee8a78172999afc:1
time="2021-06-17T16:06:35Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=0ee8a78172999afc:0ee8a78172999afc:0000000000000000:1"
2021/06/17 16:06:35 Reporting span 0ee8a78172999afc:0ee8a78172999afc:0000000000000000:1
{"level":"info","ts":1623945995.4428105,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623945995.4429219,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623945995.4430265,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623945995.4431002,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:06:35Z" level=info msg="==--> discovery.FindNetworkService() span:137f982dba5b4135:137f982dba5b4135:0000000000000000:1"
time="2021-06-17T16:06:35Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=137f982dba5b4135:137f982dba5b4135:0000000000000000:1"
time="2021-06-17T16:06:35Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=137f982dba5b4135:137f982dba5b4135:0000000000000000:1"
time="2021-06-17T16:06:35Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:06:35Z" level=info msg="==----> initRegistryClient() span:137f982dba5b4135:2ac4a5e4b56f3f36:137f982dba5b4135:1"
time="2021-06-17T16:06:35Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:06:35Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:06:35Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="137f982dba5b4135:2ac4a5e4b56f3f36:137f982dba5b4135:1"
time="2021-06-17T16:06:35Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:06:35Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:06:35Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000903240 {member1.com}:0xc0009032c0 {member2.com}:0xc0009031c0]}"
time="2021-06-17T16:06:35Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:06:35Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:06:35Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:06:35Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:06:35Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:06:35Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:06:35Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:06:35Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:06:35Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:06:35Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:06:40Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:06:40Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:06:45Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:06:45Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:06:50Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:06:50Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:06:50Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:07:05Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:07:05Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="137f982dba5b4135:2ac4a5e4b56f3f36:137f982dba5b4135:1"
2021/06/17 16:07:05 Reporting span 137f982dba5b4135:2ac4a5e4b56f3f36:137f982dba5b4135:1
2021/06/17 16:07:05 Reporting span 137f982dba5b4135:137f982dba5b4135:0000000000000000:1
{"level":"info","ts":1623946025.4437165,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623946025.44422,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623946025.444252,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946025.444265,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:07:05Z" level=info msg="==--> discovery.FindNetworkService() span:425057922da0c434:425057922da0c434:0000000000000000:1"
time="2021-06-17T16:07:05Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=425057922da0c434:425057922da0c434:0000000000000000:1"
time="2021-06-17T16:07:05Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=425057922da0c434:425057922da0c434:0000000000000000:1"
time="2021-06-17T16:07:05Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:07:05Z" level=info msg="==----> initRegistryClient() span:425057922da0c434:65c88ee5198c3e6a:425057922da0c434:1"
time="2021-06-17T16:07:05Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:07:05Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:07:05Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="425057922da0c434:65c88ee5198c3e6a:425057922da0c434:1"
time="2021-06-17T16:07:05Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:07:05Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:07:05Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ee840 {member1.com}:0xc0004ee8c0 {member2.com}:0xc0004ee7c0]}"
time="2021-06-17T16:07:05Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:07:05Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:07:05Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:07:05Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:07:05Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:07:05Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:07:05Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:07:05Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:07:05Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:07:05Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:07:10Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:07:10Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:07:15Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:07:15Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:07:15Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:07:15Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:07:15Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="425057922da0c434:65c88ee5198c3e6a:425057922da0c434:1"
2021/06/17 16:07:15 Reporting span 425057922da0c434:65c88ee5198c3e6a:425057922da0c434:1
{"level":"info","ts":1623946035.4763527,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:07:15Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=425057922da0c434:425057922da0c434:0000000000000000:1"
time="2021-06-17T16:07:15Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=425057922da0c434:425057922da0c434:0000000000000000:1"
2021/06/17 16:07:15 Reporting span 425057922da0c434:5ae381cb15448cc7:425057922da0c434:1
time="2021-06-17T16:07:15Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=425057922da0c434:425057922da0c434:0000000000000000:1"
2021/06/17 16:07:15 Reporting span 425057922da0c434:425057922da0c434:0000000000000000:1
{"level":"info","ts":1623946035.4808881,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946035.4809182,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946035.4809294,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946035.4809396,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:07:15Z" level=info msg="==--> discovery.FindNetworkService() span:63e59dc62e6fc53c:63e59dc62e6fc53c:0000000000000000:1"
time="2021-06-17T16:07:15Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=63e59dc62e6fc53c:63e59dc62e6fc53c:0000000000000000:1"
time="2021-06-17T16:07:15Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=63e59dc62e6fc53c:63e59dc62e6fc53c:0000000000000000:1"
time="2021-06-17T16:07:15Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:07:15Z" level=info msg="==----> initRegistryClient() span:63e59dc62e6fc53c:512f3c469a867e10:63e59dc62e6fc53c:1"
time="2021-06-17T16:07:15Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:07:15Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:07:15Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="63e59dc62e6fc53c:512f3c469a867e10:63e59dc62e6fc53c:1"
time="2021-06-17T16:07:15Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:07:15Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:07:15Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000358400 {member1.com}:0xc000358480 {member2.com}:0xc000358380]}"
time="2021-06-17T16:07:15Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:07:15Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:07:15Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:07:15Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:07:15Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:07:15Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:07:15Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:07:15Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:07:15Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:07:15Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:07:15Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:07:15Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:07:22Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="63e59dc62e6fc53c:512f3c469a867e10:63e59dc62e6fc53c:1"
2021/06/17 16:07:22 Reporting span 63e59dc62e6fc53c:512f3c469a867e10:63e59dc62e6fc53c:1
{"level":"info","ts":1623946042.193522,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:07:22Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=63e59dc62e6fc53c:63e59dc62e6fc53c:0000000000000000:1"
time="2021-06-17T16:07:22Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=63e59dc62e6fc53c:63e59dc62e6fc53c:0000000000000000:1"
2021/06/17 16:07:22 Reporting span 63e59dc62e6fc53c:5f54762d3afa6528:63e59dc62e6fc53c:1
time="2021-06-17T16:07:22Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=63e59dc62e6fc53c:63e59dc62e6fc53c:0000000000000000:1"
2021/06/17 16:07:22 Reporting span 63e59dc62e6fc53c:63e59dc62e6fc53c:0000000000000000:1
{"level":"info","ts":1623946042.1960895,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623946042.1961284,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623946042.1961396,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946042.1961672,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946042.196193,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623946042.1962068,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623946042.1962152,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623946042.1962245,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946042.1962333,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946042.1962426,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946042.1962514,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946042.1962602,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946042.1962852,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946042.1962962,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623946042.1963189,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623946042.1963303,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946042.1963394,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946042.196348,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623946042.1964011,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623946042.1964157,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623946042.1964312,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623946042.1964393,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946042.196449,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:07:22Z" level=info msg="==--> discovery.FindNetworkService() span:40021eba746392d6:40021eba746392d6:0000000000000000:1"
time="2021-06-17T16:07:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=40021eba746392d6:40021eba746392d6:0000000000000000:1"
time="2021-06-17T16:07:22Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=40021eba746392d6:40021eba746392d6:0000000000000000:1"
time="2021-06-17T16:07:22Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:07:22Z" level=info msg="==----> initRegistryClient() span:40021eba746392d6:7a034953a17cfa9a:40021eba746392d6:1"
time="2021-06-17T16:07:22Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:07:22Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:07:22Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="40021eba746392d6:7a034953a17cfa9a:40021eba746392d6:1"
time="2021-06-17T16:07:22Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:07:22Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:07:22Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000902200 {member1.com}:0xc000902280 {member2.com}:0xc000902180]}"
time="2021-06-17T16:07:22Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:07:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:07:22Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:07:22Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:07:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:07:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:07:22Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:07:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:07:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:07:22Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:07:27Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:07:27Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:07:32Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:07:32Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:07:32Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:07:32Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:07:32Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="40021eba746392d6:7a034953a17cfa9a:40021eba746392d6:1"
2021/06/17 16:07:32 Reporting span 40021eba746392d6:7a034953a17cfa9a:40021eba746392d6:1
{"level":"info","ts":1623946052.2290828,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:07:32Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=40021eba746392d6:40021eba746392d6:0000000000000000:1"
time="2021-06-17T16:07:32Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=40021eba746392d6:40021eba746392d6:0000000000000000:1"
2021/06/17 16:07:32 Reporting span 40021eba746392d6:4ed8f79bd2ddf663:40021eba746392d6:1
time="2021-06-17T16:07:32Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=40021eba746392d6:40021eba746392d6:0000000000000000:1"
2021/06/17 16:07:32 Reporting span 40021eba746392d6:40021eba746392d6:0000000000000000:1
{"level":"info","ts":1623946052.2347517,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946052.2360113,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946052.2360215,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946052.236031,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:07:32Z" level=info msg="==--> discovery.FindNetworkService() span:4c7e5c91e60e1b8c:4c7e5c91e60e1b8c:0000000000000000:1"
time="2021-06-17T16:07:32Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=4c7e5c91e60e1b8c:4c7e5c91e60e1b8c:0000000000000000:1"
time="2021-06-17T16:07:32Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=4c7e5c91e60e1b8c:4c7e5c91e60e1b8c:0000000000000000:1"
time="2021-06-17T16:07:32Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:07:32Z" level=info msg="==----> initRegistryClient() span:4c7e5c91e60e1b8c:678906fc173fc332:4c7e5c91e60e1b8c:1"
time="2021-06-17T16:07:32Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:07:52Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:07:52Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4c7e5c91e60e1b8c:678906fc173fc332:4c7e5c91e60e1b8c:1"
time="2021-06-17T16:07:52Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:07:52Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:07:52Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0003583c0 {member1.com}:0xc000358440 {member2.com}:0xc000358340]}"
time="2021-06-17T16:07:52Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:07:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:07:52Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:07:52Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:07:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:07:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:07:52Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:07:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:07:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:07:52Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:07:57Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:07:57Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:08:02Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:08:02Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:08:07Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:08:07Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:08:07Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:08:07Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:08:07Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="4c7e5c91e60e1b8c:678906fc173fc332:4c7e5c91e60e1b8c:1"
2021/06/17 16:08:07 Reporting span 4c7e5c91e60e1b8c:678906fc173fc332:4c7e5c91e60e1b8c:1
2021/06/17 16:08:07 Reporting span 4c7e5c91e60e1b8c:4c7e5c91e60e1b8c:0000000000000000:1
{"level":"info","ts":1623946087.255066,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623946087.2753634,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623946087.2754297,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946087.2754414,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:08:07Z" level=info msg="==--> discovery.FindNetworkService() span:217246ef1fc13532:217246ef1fc13532:0000000000000000:1"
time="2021-06-17T16:08:07Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=217246ef1fc13532:217246ef1fc13532:0000000000000000:1"
time="2021-06-17T16:08:07Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=217246ef1fc13532:217246ef1fc13532:0000000000000000:1"
time="2021-06-17T16:08:07Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:08:07Z" level=info msg="==----> initRegistryClient() span:217246ef1fc13532:099b1415a51e2a26:217246ef1fc13532:1"
time="2021-06-17T16:08:07Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:08:07Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:08:07Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="217246ef1fc13532:099b1415a51e2a26:217246ef1fc13532:1"
time="2021-06-17T16:08:07Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:08:07Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:08:07Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000359880 {member1.com}:0xc000359800 {member2.com}:0xc000359780]}"
time="2021-06-17T16:08:07Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:08:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:08:07Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:08:07Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:08:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:08:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:08:07Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:08:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:08:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:08:07Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:08:12Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:08:12Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:08:17Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:08:17Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:08:17Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:08:17Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:08:17Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="217246ef1fc13532:099b1415a51e2a26:217246ef1fc13532:1"
2021/06/17 16:08:17 Reporting span 217246ef1fc13532:099b1415a51e2a26:217246ef1fc13532:1
{"level":"info","ts":1623946097.3032513,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:08:17Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=217246ef1fc13532:217246ef1fc13532:0000000000000000:1"
time="2021-06-17T16:08:17Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=217246ef1fc13532:217246ef1fc13532:0000000000000000:1"
2021/06/17 16:08:17 Reporting span 217246ef1fc13532:09d27920fc41a4e4:217246ef1fc13532:1
time="2021-06-17T16:08:17Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=217246ef1fc13532:217246ef1fc13532:0000000000000000:1"
2021/06/17 16:08:17 Reporting span 217246ef1fc13532:217246ef1fc13532:0000000000000000:1
{"level":"info","ts":1623946097.3084297,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946097.3085303,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946097.3085556,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946097.3085675,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:08:17Z" level=info msg="==--> discovery.FindNetworkService() span:1cb87397fa7fa56a:1cb87397fa7fa56a:0000000000000000:1"
time="2021-06-17T16:08:17Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1cb87397fa7fa56a:1cb87397fa7fa56a:0000000000000000:1"
time="2021-06-17T16:08:17Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=1cb87397fa7fa56a:1cb87397fa7fa56a:0000000000000000:1"
time="2021-06-17T16:08:17Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:08:17Z" level=info msg="==----> initRegistryClient() span:1cb87397fa7fa56a:44033a92d9d00263:1cb87397fa7fa56a:1"
time="2021-06-17T16:08:17Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
{"level":"info","ts":1623946111.845282,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623946111.845424,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T16:08:37Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:08:37Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1cb87397fa7fa56a:44033a92d9d00263:1cb87397fa7fa56a:1"
time="2021-06-17T16:08:37Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:08:37Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:08:37Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000137d40 {member1.com}:0xc000137bc0 {member2.com}:0xc000137b40]}"
time="2021-06-17T16:08:37Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:08:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:08:37Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:08:37Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:08:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:08:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:08:37Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:08:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:08:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:08:37Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:08:42Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:08:42Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:08:47Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:08:47Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:08:52Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:08:52Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:08:52Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:08:52Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:08:52Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="1cb87397fa7fa56a:44033a92d9d00263:1cb87397fa7fa56a:1"
2021/06/17 16:08:52 Reporting span 1cb87397fa7fa56a:44033a92d9d00263:1cb87397fa7fa56a:1
2021/06/17 16:08:52 Reporting span 1cb87397fa7fa56a:1cb87397fa7fa56a:0000000000000000:1
{"level":"info","ts":1623946132.333443,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623946132.3334973,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623946132.333509,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946132.3336751,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:08:52Z" level=info msg="==--> discovery.FindNetworkService() span:3136ea1a21ed0342:3136ea1a21ed0342:0000000000000000:1"
time="2021-06-17T16:08:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3136ea1a21ed0342:3136ea1a21ed0342:0000000000000000:1"
time="2021-06-17T16:08:52Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=3136ea1a21ed0342:3136ea1a21ed0342:0000000000000000:1"
time="2021-06-17T16:08:52Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:08:52Z" level=info msg="==----> initRegistryClient() span:3136ea1a21ed0342:596369c1aa57d9d1:3136ea1a21ed0342:1"
time="2021-06-17T16:08:52Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:08:52Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:08:52Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3136ea1a21ed0342:596369c1aa57d9d1:3136ea1a21ed0342:1"
time="2021-06-17T16:08:52Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:08:52Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:08:52Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00093a540 {member1.com}:0xc00093a5c0 {member2.com}:0xc00093a4c0]}"
time="2021-06-17T16:08:52Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:08:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:08:52Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:08:52Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:08:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:08:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:08:52Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:08:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:08:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:08:52Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:08:57Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:08:57Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:09:02Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:09:02Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:09:02Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:09:02Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:09:02Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="3136ea1a21ed0342:596369c1aa57d9d1:3136ea1a21ed0342:1"
2021/06/17 16:09:02 Reporting span 3136ea1a21ed0342:596369c1aa57d9d1:3136ea1a21ed0342:1
{"level":"info","ts":1623946142.3731253,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:09:02Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=3136ea1a21ed0342:3136ea1a21ed0342:0000000000000000:1"
time="2021-06-17T16:09:02Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=3136ea1a21ed0342:3136ea1a21ed0342:0000000000000000:1"
2021/06/17 16:09:02 Reporting span 3136ea1a21ed0342:09ea002e9e91416f:3136ea1a21ed0342:1
time="2021-06-17T16:09:02Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=3136ea1a21ed0342:3136ea1a21ed0342:0000000000000000:1"
2021/06/17 16:09:02 Reporting span 3136ea1a21ed0342:3136ea1a21ed0342:0000000000000000:1
{"level":"info","ts":1623946142.3786554,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946142.3786888,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946142.378702,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946142.3787117,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:09:02Z" level=info msg="==--> discovery.FindNetworkService() span:6eac63c778e435ce:6eac63c778e435ce:0000000000000000:1"
time="2021-06-17T16:09:02Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6eac63c778e435ce:6eac63c778e435ce:0000000000000000:1"
time="2021-06-17T16:09:02Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=6eac63c778e435ce:6eac63c778e435ce:0000000000000000:1"
time="2021-06-17T16:09:02Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:09:02Z" level=info msg="==----> initRegistryClient() span:6eac63c778e435ce:24d69df202e714bf:6eac63c778e435ce:1"
time="2021-06-17T16:09:02Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:09:02Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:09:02Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6eac63c778e435ce:24d69df202e714bf:6eac63c778e435ce:1"
time="2021-06-17T16:09:02Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:09:02Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:09:02Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ee0c0 {member1.com}:0xc0004ee240 {member2.com}:0xc0004ee040]}"
time="2021-06-17T16:09:02Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:09:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:09:02Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:09:02Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:09:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:09:02Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:09:02Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:09:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:09:02Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:09:02Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:09:07Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:09:07Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:09:12Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:09:12Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:09:17Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:09:17Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:09:17Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:09:32Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:09:32Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="6eac63c778e435ce:24d69df202e714bf:6eac63c778e435ce:1"
2021/06/17 16:09:32 Reporting span 6eac63c778e435ce:24d69df202e714bf:6eac63c778e435ce:1
2021/06/17 16:09:32 Reporting span 6eac63c778e435ce:6eac63c778e435ce:0000000000000000:1
{"level":"info","ts":1623946172.379407,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623946172.3794527,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623946172.379505,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946172.3795614,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:09:32Z" level=info msg="==--> discovery.FindNetworkService() span:04e694928618d7e5:04e694928618d7e5:0000000000000000:1"
time="2021-06-17T16:09:32Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=04e694928618d7e5:04e694928618d7e5:0000000000000000:1"
time="2021-06-17T16:09:32Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=04e694928618d7e5:04e694928618d7e5:0000000000000000:1"
time="2021-06-17T16:09:32Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:09:32Z" level=info msg="==----> initRegistryClient() span:04e694928618d7e5:6c7463c4c6540a52:04e694928618d7e5:1"
time="2021-06-17T16:09:32Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:09:32Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:09:32Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="04e694928618d7e5:6c7463c4c6540a52:04e694928618d7e5:1"
time="2021-06-17T16:09:32Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:09:32Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:09:32Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000baa40 {member1.com}:0xc0000baac0 {member2.com}:0xc0000ba9c0]}"
time="2021-06-17T16:09:32Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:09:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:09:32Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:09:32Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:09:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:09:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:09:32Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:09:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:09:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:09:32Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:09:37Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:09:37Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:09:42Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:09:42Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:09:42Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:09:42Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:09:42Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="04e694928618d7e5:6c7463c4c6540a52:04e694928618d7e5:1"
2021/06/17 16:09:42 Reporting span 04e694928618d7e5:6c7463c4c6540a52:04e694928618d7e5:1
{"level":"info","ts":1623946182.407588,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:09:42Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=04e694928618d7e5:04e694928618d7e5:0000000000000000:1"
time="2021-06-17T16:09:42Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=04e694928618d7e5:04e694928618d7e5:0000000000000000:1"
2021/06/17 16:09:42 Reporting span 04e694928618d7e5:72ad835333483af0:04e694928618d7e5:1
time="2021-06-17T16:09:42Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=04e694928618d7e5:04e694928618d7e5:0000000000000000:1"
2021/06/17 16:09:42 Reporting span 04e694928618d7e5:04e694928618d7e5:0000000000000000:1
{"level":"info","ts":1623946182.4122117,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946182.4122765,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946182.412317,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946182.4124982,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:09:42Z" level=info msg="==--> discovery.FindNetworkService() span:2de9c40e078610e5:2de9c40e078610e5:0000000000000000:1"
time="2021-06-17T16:09:42Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2de9c40e078610e5:2de9c40e078610e5:0000000000000000:1"
time="2021-06-17T16:09:42Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=2de9c40e078610e5:2de9c40e078610e5:0000000000000000:1"
time="2021-06-17T16:09:42Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:09:42Z" level=info msg="==----> initRegistryClient() span:2de9c40e078610e5:3c3216805995f7f2:2de9c40e078610e5:1"
time="2021-06-17T16:09:42Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:09:42Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:09:42Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2de9c40e078610e5:3c3216805995f7f2:2de9c40e078610e5:1"
time="2021-06-17T16:09:42Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:09:42Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:09:42Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000359300 {member1.com}:0xc0003591c0 {member2.com}:0xc000359140]}"
time="2021-06-17T16:09:42Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:09:42Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:09:42Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:09:42Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:09:42Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:09:42Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:09:42Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:09:42Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:09:42Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:09:42Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:09:47Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:09:47Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:09:52Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:09:52Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:09:57Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:09:57Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:09:57Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:10:12Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:10:12Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="2de9c40e078610e5:3c3216805995f7f2:2de9c40e078610e5:1"
2021/06/17 16:10:12 Reporting span 2de9c40e078610e5:3c3216805995f7f2:2de9c40e078610e5:1
2021/06/17 16:10:12 Reporting span 2de9c40e078610e5:2de9c40e078610e5:0000000000000000:1
{"level":"info","ts":1623946212.4131591,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623946212.4133039,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623946212.4133332,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946212.4133441,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:10:12Z" level=info msg="==--> discovery.FindNetworkService() span:5fb54cb27e984cb6:5fb54cb27e984cb6:0000000000000000:1"
time="2021-06-17T16:10:12Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=5fb54cb27e984cb6:5fb54cb27e984cb6:0000000000000000:1"
time="2021-06-17T16:10:12Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=5fb54cb27e984cb6:5fb54cb27e984cb6:0000000000000000:1"
time="2021-06-17T16:10:12Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:10:12Z" level=info msg="==----> initRegistryClient() span:5fb54cb27e984cb6:5b2d00a3c7f81141:5fb54cb27e984cb6:1"
time="2021-06-17T16:10:12Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:10:12Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:10:12Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5fb54cb27e984cb6:5b2d00a3c7f81141:5fb54cb27e984cb6:1"
time="2021-06-17T16:10:12Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:10:12Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:10:12Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000358540 {member1.com}:0xc0003584c0 {member2.com}:0xc000358440]}"
time="2021-06-17T16:10:12Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:10:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:10:12Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:10:12Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:10:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:10:12Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:10:12Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:10:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:10:12Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:10:12Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:10:17Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:10:17Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:10:22Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:10:22Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:10:22Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:10:22Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:10:22Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="5fb54cb27e984cb6:5b2d00a3c7f81141:5fb54cb27e984cb6:1"
2021/06/17 16:10:22 Reporting span 5fb54cb27e984cb6:5b2d00a3c7f81141:5fb54cb27e984cb6:1
{"level":"info","ts":1623946222.4404347,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:10:22Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5fb54cb27e984cb6:5fb54cb27e984cb6:0000000000000000:1"
time="2021-06-17T16:10:22Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=5fb54cb27e984cb6:5fb54cb27e984cb6:0000000000000000:1"
2021/06/17 16:10:22 Reporting span 5fb54cb27e984cb6:50d95d25c0de773c:5fb54cb27e984cb6:1
time="2021-06-17T16:10:22Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5fb54cb27e984cb6:5fb54cb27e984cb6:0000000000000000:1"
2021/06/17 16:10:22 Reporting span 5fb54cb27e984cb6:5fb54cb27e984cb6:0000000000000000:1
{"level":"info","ts":1623946222.4459395,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946222.4463506,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946222.4465258,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946222.4465392,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:10:22Z" level=info msg="==--> discovery.FindNetworkService() span:30692348604b3899:30692348604b3899:0000000000000000:1"
time="2021-06-17T16:10:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=30692348604b3899:30692348604b3899:0000000000000000:1"
time="2021-06-17T16:10:22Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=30692348604b3899:30692348604b3899:0000000000000000:1"
time="2021-06-17T16:10:22Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:10:22Z" level=info msg="==----> initRegistryClient() span:30692348604b3899:11eadcb86aa57d4e:30692348604b3899:1"
time="2021-06-17T16:10:22Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
{"level":"info","ts":1623946231.8468685,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623946231.8478127,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T16:10:32Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:10:32Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="30692348604b3899:11eadcb86aa57d4e:30692348604b3899:1"
time="2021-06-17T16:10:32Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:10:32Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:10:32Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ee7c0 {member1.com}:0xc0004ee740 {member2.com}:0xc0004ee6c0]}"
time="2021-06-17T16:10:32Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:10:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:10:32Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:10:32Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:10:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:10:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:10:32Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:10:32Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:10:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:10:32Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:10:37Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:10:37Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:10:42Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:10:42Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:10:47Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:10:47Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:10:47Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:10:52Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:10:52Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="30692348604b3899:11eadcb86aa57d4e:30692348604b3899:1"
2021/06/17 16:10:52 Reporting span 30692348604b3899:11eadcb86aa57d4e:30692348604b3899:1
2021/06/17 16:10:52 Reporting span 30692348604b3899:30692348604b3899:0000000000000000:1
{"level":"info","ts":1623946252.447217,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623946252.4472835,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623946252.4472966,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946252.4473078,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:10:52Z" level=info msg="==--> discovery.FindNetworkService() span:464b49775a9acb36:464b49775a9acb36:0000000000000000:1"
time="2021-06-17T16:10:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=464b49775a9acb36:464b49775a9acb36:0000000000000000:1"
time="2021-06-17T16:10:52Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=464b49775a9acb36:464b49775a9acb36:0000000000000000:1"
time="2021-06-17T16:10:52Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:10:52Z" level=info msg="==----> initRegistryClient() span:464b49775a9acb36:340d64fffd19e2f0:464b49775a9acb36:1"
time="2021-06-17T16:10:52Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:10:52Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:10:52Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="464b49775a9acb36:340d64fffd19e2f0:464b49775a9acb36:1"
time="2021-06-17T16:10:52Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:10:52Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:10:52Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000182500 {member1.com}:0xc000182440 {member2.com}:0xc0001823c0]}"
time="2021-06-17T16:10:52Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:10:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:10:52Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:10:52Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:10:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:10:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:10:52Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:10:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:10:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:10:52Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:10:57Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:10:57Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:11:02Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:11:02Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:11:02Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:11:02Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:11:02Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="464b49775a9acb36:340d64fffd19e2f0:464b49775a9acb36:1"
2021/06/17 16:11:02 Reporting span 464b49775a9acb36:340d64fffd19e2f0:464b49775a9acb36:1
{"level":"info","ts":1623946262.4770384,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:11:02Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=464b49775a9acb36:464b49775a9acb36:0000000000000000:1"
time="2021-06-17T16:11:02Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=464b49775a9acb36:464b49775a9acb36:0000000000000000:1"
2021/06/17 16:11:02 Reporting span 464b49775a9acb36:343cf17dac4e78a6:464b49775a9acb36:1
time="2021-06-17T16:11:02Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=464b49775a9acb36:464b49775a9acb36:0000000000000000:1"
2021/06/17 16:11:02 Reporting span 464b49775a9acb36:464b49775a9acb36:0000000000000000:1
{"level":"info","ts":1623946262.4827085,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946262.4827816,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946262.4828198,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946262.4828775,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:11:02Z" level=info msg="==--> discovery.FindNetworkService() span:6ad4b4d3dfc60e24:6ad4b4d3dfc60e24:0000000000000000:1"
time="2021-06-17T16:11:02Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6ad4b4d3dfc60e24:6ad4b4d3dfc60e24:0000000000000000:1"
time="2021-06-17T16:11:02Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=6ad4b4d3dfc60e24:6ad4b4d3dfc60e24:0000000000000000:1"
time="2021-06-17T16:11:02Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:11:02Z" level=info msg="==----> initRegistryClient() span:6ad4b4d3dfc60e24:2501785e6f681805:6ad4b4d3dfc60e24:1"
time="2021-06-17T16:11:02Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:11:02Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:11:02Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6ad4b4d3dfc60e24:2501785e6f681805:6ad4b4d3dfc60e24:1"
time="2021-06-17T16:11:02Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:11:02Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:11:02Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001364c0 {member1.com}:0xc000136680 {member2.com}:0xc000136340]}"
time="2021-06-17T16:11:02Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:11:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:11:02Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:11:02Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:11:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:11:02Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:11:02Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:11:02Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:11:02Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:11:02Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:11:02Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:11:02Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:11:15Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="6ad4b4d3dfc60e24:2501785e6f681805:6ad4b4d3dfc60e24:1"
2021/06/17 16:11:15 Reporting span 6ad4b4d3dfc60e24:2501785e6f681805:6ad4b4d3dfc60e24:1
{"level":"info","ts":1623946275.852801,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:11:15Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6ad4b4d3dfc60e24:6ad4b4d3dfc60e24:0000000000000000:1"
time="2021-06-17T16:11:15Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=6ad4b4d3dfc60e24:6ad4b4d3dfc60e24:0000000000000000:1"
2021/06/17 16:11:15 Reporting span 6ad4b4d3dfc60e24:76b111a1e33958a5:6ad4b4d3dfc60e24:1
time="2021-06-17T16:11:15Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6ad4b4d3dfc60e24:6ad4b4d3dfc60e24:0000000000000000:1"
2021/06/17 16:11:15 Reporting span 6ad4b4d3dfc60e24:6ad4b4d3dfc60e24:0000000000000000:1
{"level":"info","ts":1623946275.85547,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623946275.8555138,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623946275.8555255,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946275.8555489,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946275.8555596,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623946275.855586,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623946275.8555958,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623946275.8556058,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946275.8556154,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946275.855639,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946275.8556488,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946275.8556695,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946275.8556788,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946275.8556898,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623946275.8557117,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623946275.855721,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946275.8557422,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946275.8557525,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623946275.855761,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623946275.8557699,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623946275.855785,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623946275.855809,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946275.8558197,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:11:15Z" level=info msg="==--> discovery.FindNetworkService() span:4294c42721333e43:4294c42721333e43:0000000000000000:1"
time="2021-06-17T16:11:15Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=4294c42721333e43:4294c42721333e43:0000000000000000:1"
time="2021-06-17T16:11:15Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=4294c42721333e43:4294c42721333e43:0000000000000000:1"
time="2021-06-17T16:11:15Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:11:15Z" level=info msg="==----> initRegistryClient() span:4294c42721333e43:201f591022e772ce:4294c42721333e43:1"
time="2021-06-17T16:11:15Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:11:15Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:11:15Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4294c42721333e43:201f591022e772ce:4294c42721333e43:1"
time="2021-06-17T16:11:15Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:11:15Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:11:15Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000843e40 {member1.com}:0xc000843ec0 {member2.com}:0xc000843dc0]}"
time="2021-06-17T16:11:15Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:11:15Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:11:15Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:11:15Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:11:15Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:11:15Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:11:15Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:11:15Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:11:15Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:11:15Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:11:20Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:11:20Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:11:25Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:11:25Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:11:25Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:11:25Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:11:25Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="4294c42721333e43:201f591022e772ce:4294c42721333e43:1"
2021/06/17 16:11:25 Reporting span 4294c42721333e43:201f591022e772ce:4294c42721333e43:1
{"level":"info","ts":1623946285.886585,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:11:25Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=4294c42721333e43:4294c42721333e43:0000000000000000:1"
time="2021-06-17T16:11:25Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=4294c42721333e43:4294c42721333e43:0000000000000000:1"
2021/06/17 16:11:25 Reporting span 4294c42721333e43:0f9125e4fa81399f:4294c42721333e43:1
time="2021-06-17T16:11:25Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=4294c42721333e43:4294c42721333e43:0000000000000000:1"
2021/06/17 16:11:25 Reporting span 4294c42721333e43:4294c42721333e43:0000000000000000:1
{"level":"info","ts":1623946285.8916776,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946285.8917332,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946285.8917484,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946285.891775,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:11:25Z" level=info msg="==--> discovery.FindNetworkService() span:440bad52090cc39d:440bad52090cc39d:0000000000000000:1"
time="2021-06-17T16:11:25Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=440bad52090cc39d:440bad52090cc39d:0000000000000000:1"
time="2021-06-17T16:11:25Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=440bad52090cc39d:440bad52090cc39d:0000000000000000:1"
time="2021-06-17T16:11:25Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:11:25Z" level=info msg="==----> initRegistryClient() span:440bad52090cc39d:5f2b5423761e6535:440bad52090cc39d:1"
time="2021-06-17T16:11:25Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:11:25Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:11:25Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="440bad52090cc39d:5f2b5423761e6535:440bad52090cc39d:1"
time="2021-06-17T16:11:25Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:11:25Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:11:25Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001823c0 {member1.com}:0xc000182440 {member2.com}:0xc000182040]}"
time="2021-06-17T16:11:25Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:11:25Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:11:25Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:11:25Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:11:25Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:11:25Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:11:25Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:11:25Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:11:25Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:11:25Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:11:30Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:11:30Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:11:35Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:11:35Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:11:40Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:11:40Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:11:40Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:11:55Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:11:55Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="440bad52090cc39d:5f2b5423761e6535:440bad52090cc39d:1"
2021/06/17 16:11:55 Reporting span 440bad52090cc39d:5f2b5423761e6535:440bad52090cc39d:1
2021/06/17 16:11:55 Reporting span 440bad52090cc39d:440bad52090cc39d:0000000000000000:1
{"level":"info","ts":1623946315.8928487,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623946315.9131756,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623946315.9133737,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946315.9133863,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:11:55Z" level=info msg="==--> discovery.FindNetworkService() span:39f21f0f5e59c23b:39f21f0f5e59c23b:0000000000000000:1"
time="2021-06-17T16:11:55Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=39f21f0f5e59c23b:39f21f0f5e59c23b:0000000000000000:1"
time="2021-06-17T16:11:55Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=39f21f0f5e59c23b:39f21f0f5e59c23b:0000000000000000:1"
time="2021-06-17T16:11:55Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:11:55Z" level=info msg="==----> initRegistryClient() span:39f21f0f5e59c23b:29cd30710f187718:39f21f0f5e59c23b:1"
time="2021-06-17T16:11:55Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:11:55Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:11:55Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="39f21f0f5e59c23b:29cd30710f187718:39f21f0f5e59c23b:1"
time="2021-06-17T16:11:55Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:11:55Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:11:55Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000137640 {member1.com}:0xc0001375c0 {member2.com}:0xc000137540]}"
time="2021-06-17T16:11:55Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:11:55Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:11:55Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:11:55Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:11:55Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:11:55Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:11:55Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:11:55Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:11:55Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:11:55Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:12:00Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:12:00Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:12:05Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:12:05Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:12:05Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:12:05Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:12:05Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="39f21f0f5e59c23b:29cd30710f187718:39f21f0f5e59c23b:1"
2021/06/17 16:12:05 Reporting span 39f21f0f5e59c23b:29cd30710f187718:39f21f0f5e59c23b:1
{"level":"info","ts":1623946325.9575672,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:12:05Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=39f21f0f5e59c23b:39f21f0f5e59c23b:0000000000000000:1"
time="2021-06-17T16:12:05Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=39f21f0f5e59c23b:39f21f0f5e59c23b:0000000000000000:1"
2021/06/17 16:12:05 Reporting span 39f21f0f5e59c23b:3df76cdbebd96421:39f21f0f5e59c23b:1
time="2021-06-17T16:12:05Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=39f21f0f5e59c23b:39f21f0f5e59c23b:0000000000000000:1"
2021/06/17 16:12:05 Reporting span 39f21f0f5e59c23b:39f21f0f5e59c23b:0000000000000000:1
{"level":"info","ts":1623946325.9624913,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946325.9625247,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946325.9625359,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946325.9625432,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:12:05Z" level=info msg="==--> discovery.FindNetworkService() span:41015cbd13abb682:41015cbd13abb682:0000000000000000:1"
time="2021-06-17T16:12:05Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=41015cbd13abb682:41015cbd13abb682:0000000000000000:1"
time="2021-06-17T16:12:05Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=41015cbd13abb682:41015cbd13abb682:0000000000000000:1"
time="2021-06-17T16:12:05Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:12:05Z" level=info msg="==----> initRegistryClient() span:41015cbd13abb682:7d77209d8c4180f1:41015cbd13abb682:1"
time="2021-06-17T16:12:05Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:12:15Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:12:15Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="41015cbd13abb682:7d77209d8c4180f1:41015cbd13abb682:1"
time="2021-06-17T16:12:15Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:12:15Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:12:15Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000842d80 {member1.com}:0xc000842d00 {member2.com}:0xc000842c80]}"
time="2021-06-17T16:12:15Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:12:15Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:12:15Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:12:15Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:12:15Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:12:15Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:12:15Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:12:15Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:12:15Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:12:15Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:12:20Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:12:20Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:12:25Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:12:25Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:12:30Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:12:30Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:12:30Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
{"level":"info","ts":1623946351.8459806,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623946351.84611,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T16:12:35Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:12:35Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="41015cbd13abb682:7d77209d8c4180f1:41015cbd13abb682:1"
2021/06/17 16:12:35 Reporting span 41015cbd13abb682:7d77209d8c4180f1:41015cbd13abb682:1
2021/06/17 16:12:35 Reporting span 41015cbd13abb682:41015cbd13abb682:0000000000000000:1
{"level":"info","ts":1623946355.9631636,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623946355.963229,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623946355.9632428,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946355.9632537,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:12:35Z" level=info msg="==--> discovery.FindNetworkService() span:7edd9ca42a09d7ba:7edd9ca42a09d7ba:0000000000000000:1"
time="2021-06-17T16:12:35Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7edd9ca42a09d7ba:7edd9ca42a09d7ba:0000000000000000:1"
time="2021-06-17T16:12:35Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=7edd9ca42a09d7ba:7edd9ca42a09d7ba:0000000000000000:1"
time="2021-06-17T16:12:35Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:12:35Z" level=info msg="==----> initRegistryClient() span:7edd9ca42a09d7ba:550f801b7f1e365c:7edd9ca42a09d7ba:1"
time="2021-06-17T16:12:35Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:12:35Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:12:35Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7edd9ca42a09d7ba:550f801b7f1e365c:7edd9ca42a09d7ba:1"
time="2021-06-17T16:12:35Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:12:35Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:12:35Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000182780 {member1.com}:0xc000182800 {member2.com}:0xc000182640]}"
time="2021-06-17T16:12:35Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:12:35Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:12:35Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:12:35Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:12:35Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:12:35Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:12:35Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:12:35Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:12:35Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:12:35Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:12:40Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:12:40Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:12:45Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:12:45Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:12:45Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:12:45Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:12:45Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="7edd9ca42a09d7ba:550f801b7f1e365c:7edd9ca42a09d7ba:1"
2021/06/17 16:12:45 Reporting span 7edd9ca42a09d7ba:550f801b7f1e365c:7edd9ca42a09d7ba:1
{"level":"info","ts":1623946365.9923437,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:12:45Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7edd9ca42a09d7ba:7edd9ca42a09d7ba:0000000000000000:1"
time="2021-06-17T16:12:45Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=7edd9ca42a09d7ba:7edd9ca42a09d7ba:0000000000000000:1"
2021/06/17 16:12:45 Reporting span 7edd9ca42a09d7ba:097a8160f332b3d2:7edd9ca42a09d7ba:1
time="2021-06-17T16:12:45Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7edd9ca42a09d7ba:7edd9ca42a09d7ba:0000000000000000:1"
2021/06/17 16:12:45 Reporting span 7edd9ca42a09d7ba:7edd9ca42a09d7ba:0000000000000000:1
{"level":"info","ts":1623946365.9975402,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946365.9975743,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946365.9975863,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946365.9976127,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:12:45Z" level=info msg="==--> discovery.FindNetworkService() span:10534ba9a3a71ed2:10534ba9a3a71ed2:0000000000000000:1"
time="2021-06-17T16:12:45Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=10534ba9a3a71ed2:10534ba9a3a71ed2:0000000000000000:1"
time="2021-06-17T16:12:45Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=10534ba9a3a71ed2:10534ba9a3a71ed2:0000000000000000:1"
time="2021-06-17T16:12:45Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:12:45Z" level=info msg="==----> initRegistryClient() span:10534ba9a3a71ed2:3de41a1cf5ef59f1:10534ba9a3a71ed2:1"
time="2021-06-17T16:12:45Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:12:56Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:12:56Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="10534ba9a3a71ed2:3de41a1cf5ef59f1:10534ba9a3a71ed2:1"
time="2021-06-17T16:12:56Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:12:56Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:12:56Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000baec0 {member1.com}:0xc0000bae40 {member2.com}:0xc0000badc0]}"
time="2021-06-17T16:12:56Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:12:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:12:56Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:12:56Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:12:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:12:56Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:12:56Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:12:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:12:56Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:12:56Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:13:01Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:13:01Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:13:06Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:13:06Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:13:11Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:13:11Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:13:11Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:13:15Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:13:15Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="10534ba9a3a71ed2:3de41a1cf5ef59f1:10534ba9a3a71ed2:1"
2021/06/17 16:13:15 Reporting span 10534ba9a3a71ed2:3de41a1cf5ef59f1:10534ba9a3a71ed2:1
2021/06/17 16:13:15 Reporting span 10534ba9a3a71ed2:10534ba9a3a71ed2:0000000000000000:1
{"level":"info","ts":1623946395.9986877,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623946395.998731,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623946395.9987495,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946395.9987607,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:13:15Z" level=info msg="==--> discovery.FindNetworkService() span:7423842e8312a8a1:7423842e8312a8a1:0000000000000000:1"
time="2021-06-17T16:13:15Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7423842e8312a8a1:7423842e8312a8a1:0000000000000000:1"
time="2021-06-17T16:13:15Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=7423842e8312a8a1:7423842e8312a8a1:0000000000000000:1"
time="2021-06-17T16:13:15Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:13:15Z" level=info msg="==----> initRegistryClient() span:7423842e8312a8a1:4bc0a9ed8d29773c:7423842e8312a8a1:1"
time="2021-06-17T16:13:15Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:13:16Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:13:16Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7423842e8312a8a1:4bc0a9ed8d29773c:7423842e8312a8a1:1"
time="2021-06-17T16:13:16Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:13:16Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:13:16Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000359740 {member1.com}:0xc0003596c0 {member2.com}:0xc000359640]}"
time="2021-06-17T16:13:16Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:13:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:13:16Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:13:16Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:13:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:13:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:13:16Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:13:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:13:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:13:16Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:13:21Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:13:21Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:13:26Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:13:26Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:13:26Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:13:26Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:13:26Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="7423842e8312a8a1:4bc0a9ed8d29773c:7423842e8312a8a1:1"
2021/06/17 16:13:26 Reporting span 7423842e8312a8a1:4bc0a9ed8d29773c:7423842e8312a8a1:1
{"level":"info","ts":1623946406.0281377,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:13:26Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7423842e8312a8a1:7423842e8312a8a1:0000000000000000:1"
time="2021-06-17T16:13:26Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=7423842e8312a8a1:7423842e8312a8a1:0000000000000000:1"
2021/06/17 16:13:26 Reporting span 7423842e8312a8a1:28fa841489d0edec:7423842e8312a8a1:1
time="2021-06-17T16:13:26Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7423842e8312a8a1:7423842e8312a8a1:0000000000000000:1"
2021/06/17 16:13:26 Reporting span 7423842e8312a8a1:7423842e8312a8a1:0000000000000000:1
{"level":"info","ts":1623946406.0380054,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946406.038054,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946406.0380955,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946406.0381107,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:13:26Z" level=info msg="==--> discovery.FindNetworkService() span:2cfdbd7c848e3d4a:2cfdbd7c848e3d4a:0000000000000000:1"
time="2021-06-17T16:13:26Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2cfdbd7c848e3d4a:2cfdbd7c848e3d4a:0000000000000000:1"
time="2021-06-17T16:13:26Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=2cfdbd7c848e3d4a:2cfdbd7c848e3d4a:0000000000000000:1"
time="2021-06-17T16:13:26Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:13:26Z" level=info msg="==----> initRegistryClient() span:2cfdbd7c848e3d4a:2b5a0b612a7c340f:2cfdbd7c848e3d4a:1"
time="2021-06-17T16:13:26Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:13:36Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:13:36Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2cfdbd7c848e3d4a:2b5a0b612a7c340f:2cfdbd7c848e3d4a:1"
time="2021-06-17T16:13:36Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:13:36Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:13:36Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00050e980 {member1.com}:0xc00050ea00 {member2.com}:0xc00050e900]}"
time="2021-06-17T16:13:36Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:13:36Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:13:36Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:13:36Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:13:36Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:13:36Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:13:36Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:13:36Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:13:36Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:13:36Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:13:41Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:13:41Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:13:46Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:13:46Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:13:51Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:13:51Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:13:51Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:13:56Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:13:56Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="2cfdbd7c848e3d4a:2b5a0b612a7c340f:2cfdbd7c848e3d4a:1"
2021/06/17 16:13:56 Reporting span 2cfdbd7c848e3d4a:2b5a0b612a7c340f:2cfdbd7c848e3d4a:1
2021/06/17 16:13:56 Reporting span 2cfdbd7c848e3d4a:2cfdbd7c848e3d4a:0000000000000000:1
{"level":"info","ts":1623946436.039233,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623946436.039412,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623946436.0395699,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946436.0396988,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:13:56Z" level=info msg="==--> discovery.FindNetworkService() span:42a4800f3bd14231:42a4800f3bd14231:0000000000000000:1"
time="2021-06-17T16:13:56Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=42a4800f3bd14231:42a4800f3bd14231:0000000000000000:1"
time="2021-06-17T16:13:56Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=42a4800f3bd14231:42a4800f3bd14231:0000000000000000:1"
time="2021-06-17T16:13:56Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:13:56Z" level=info msg="==----> initRegistryClient() span:42a4800f3bd14231:1afa035145ad42bf:42a4800f3bd14231:1"
time="2021-06-17T16:13:56Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:13:56Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:13:56Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="42a4800f3bd14231:1afa035145ad42bf:42a4800f3bd14231:1"
time="2021-06-17T16:13:56Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:13:56Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:13:56Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00050ed00 {member1.com}:0xc00050ed80 {member2.com}:0xc00050ec80]}"
time="2021-06-17T16:13:56Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:13:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:13:56Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:13:56Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:13:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:13:56Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:13:56Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:13:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:13:56Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:13:56Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:01Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:14:01Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:06Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:14:06Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:06Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:06Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:06Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="42a4800f3bd14231:1afa035145ad42bf:42a4800f3bd14231:1"
2021/06/17 16:14:06 Reporting span 42a4800f3bd14231:1afa035145ad42bf:42a4800f3bd14231:1
{"level":"info","ts":1623946446.07073,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:14:06Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=42a4800f3bd14231:42a4800f3bd14231:0000000000000000:1"
time="2021-06-17T16:14:06Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=42a4800f3bd14231:42a4800f3bd14231:0000000000000000:1"
2021/06/17 16:14:06 Reporting span 42a4800f3bd14231:1c906ff7bb8e5691:42a4800f3bd14231:1
time="2021-06-17T16:14:06Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=42a4800f3bd14231:42a4800f3bd14231:0000000000000000:1"
2021/06/17 16:14:06 Reporting span 42a4800f3bd14231:42a4800f3bd14231:0000000000000000:1
{"level":"info","ts":1623946446.0801275,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946446.0801613,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946446.080173,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946446.0801997,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:14:06Z" level=info msg="==--> discovery.FindNetworkService() span:4c96a2295744689e:4c96a2295744689e:0000000000000000:1"
time="2021-06-17T16:14:06Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=4c96a2295744689e:4c96a2295744689e:0000000000000000:1"
time="2021-06-17T16:14:06Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=4c96a2295744689e:4c96a2295744689e:0000000000000000:1"
time="2021-06-17T16:14:06Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:14:06Z" level=info msg="==----> initRegistryClient() span:4c96a2295744689e:58aced8063c0ae50:4c96a2295744689e:1"
time="2021-06-17T16:14:06Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:14:16Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:14:16Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4c96a2295744689e:58aced8063c0ae50:4c96a2295744689e:1"
time="2021-06-17T16:14:16Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:14:16Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:14:16Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001368c0 {member1.com}:0xc000136980 {member2.com}:0xc000136840]}"
time="2021-06-17T16:14:16Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:14:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:14:16Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:14:16Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:14:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:14:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:14:16Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:14:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:14:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:14:16Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:16Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:16Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:29Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="4c96a2295744689e:58aced8063c0ae50:4c96a2295744689e:1"
2021/06/17 16:14:29 Reporting span 4c96a2295744689e:58aced8063c0ae50:4c96a2295744689e:1
{"level":"info","ts":1623946469.4489725,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:14:29Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=4c96a2295744689e:4c96a2295744689e:0000000000000000:1"
time="2021-06-17T16:14:29Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=4c96a2295744689e:4c96a2295744689e:0000000000000000:1"
2021/06/17 16:14:29 Reporting span 4c96a2295744689e:54770bfc6a53b0d2:4c96a2295744689e:1
time="2021-06-17T16:14:29Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=4c96a2295744689e:4c96a2295744689e:0000000000000000:1"
2021/06/17 16:14:29 Reporting span 4c96a2295744689e:4c96a2295744689e:0000000000000000:1
{"level":"info","ts":1623946469.451028,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623946469.4510598,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623946469.451071,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946469.4510798,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946469.4510899,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623946469.4511018,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623946469.4514098,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623946469.451517,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946469.4515274,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946469.4515388,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946469.4515476,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946469.4515555,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946469.4515638,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946469.451572,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623946469.4515805,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623946469.4515889,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946469.4516008,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946469.4516096,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623946469.451618,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623946469.451634,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623946469.4516504,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623946469.4516764,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946469.4516876,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:14:29Z" level=info msg="==--> discovery.FindNetworkService() span:42d211e185f6e0ad:42d211e185f6e0ad:0000000000000000:1"
time="2021-06-17T16:14:29Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=42d211e185f6e0ad:42d211e185f6e0ad:0000000000000000:1"
time="2021-06-17T16:14:29Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=42d211e185f6e0ad:42d211e185f6e0ad:0000000000000000:1"
time="2021-06-17T16:14:29Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:14:29Z" level=info msg="==----> initRegistryClient() span:42d211e185f6e0ad:0ed9ed5aa00bf4f9:42d211e185f6e0ad:1"
time="2021-06-17T16:14:29Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:14:29Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:14:29Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="42d211e185f6e0ad:0ed9ed5aa00bf4f9:42d211e185f6e0ad:1"
time="2021-06-17T16:14:29Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:14:29Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:14:29Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000742140 {member1.com}:0xc0007421c0 {member2.com}:0xc0007420c0]}"
time="2021-06-17T16:14:29Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:14:29Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:14:29Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:14:29Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:14:29Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:14:29Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:14:29Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:14:29Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:14:29Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:14:29Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
{"level":"info","ts":1623946471.8462973,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623946471.8466754,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T16:14:34Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:14:34Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:39Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:14:39Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:39Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:39Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:39Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="42d211e185f6e0ad:0ed9ed5aa00bf4f9:42d211e185f6e0ad:1"
2021/06/17 16:14:39 Reporting span 42d211e185f6e0ad:0ed9ed5aa00bf4f9:42d211e185f6e0ad:1
{"level":"info","ts":1623946479.4804626,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:14:39Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=42d211e185f6e0ad:42d211e185f6e0ad:0000000000000000:1"
time="2021-06-17T16:14:39Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=42d211e185f6e0ad:42d211e185f6e0ad:0000000000000000:1"
2021/06/17 16:14:39 Reporting span 42d211e185f6e0ad:1208297d1a60f546:42d211e185f6e0ad:1
time="2021-06-17T16:14:39Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=42d211e185f6e0ad:42d211e185f6e0ad:0000000000000000:1"
2021/06/17 16:14:39 Reporting span 42d211e185f6e0ad:42d211e185f6e0ad:0000000000000000:1
{"level":"info","ts":1623946479.4864619,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946479.4865108,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946479.486524,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946479.4865322,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:14:39Z" level=info msg="==--> discovery.FindNetworkService() span:583eb6af881e99d2:583eb6af881e99d2:0000000000000000:1"
time="2021-06-17T16:14:39Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=583eb6af881e99d2:583eb6af881e99d2:0000000000000000:1"
time="2021-06-17T16:14:39Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=583eb6af881e99d2:583eb6af881e99d2:0000000000000000:1"
time="2021-06-17T16:14:39Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:14:39Z" level=info msg="==----> initRegistryClient() span:583eb6af881e99d2:64d5788017e259b8:583eb6af881e99d2:1"
time="2021-06-17T16:14:39Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:14:39Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:14:39Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="583eb6af881e99d2:64d5788017e259b8:583eb6af881e99d2:1"
time="2021-06-17T16:14:39Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:14:39Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:14:39Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000743d40 {member1.com}:0xc000743dc0 {member2.com}:0xc000743cc0]}"
time="2021-06-17T16:14:39Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:14:39Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:14:39Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:14:39Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:14:39Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:14:39Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:14:39Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:14:39Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:14:39Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:14:39Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:39Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:39Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:39Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="583eb6af881e99d2:64d5788017e259b8:583eb6af881e99d2:1"
2021/06/17 16:14:39 Reporting span 583eb6af881e99d2:64d5788017e259b8:583eb6af881e99d2:1
{"level":"info","ts":1623946479.5355213,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:14:39Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=583eb6af881e99d2:583eb6af881e99d2:0000000000000000:1"
time="2021-06-17T16:14:39Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=583eb6af881e99d2:583eb6af881e99d2:0000000000000000:1"
2021/06/17 16:14:39 Reporting span 583eb6af881e99d2:1b8a07bb611381e3:583eb6af881e99d2:1
time="2021-06-17T16:14:39Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=583eb6af881e99d2:583eb6af881e99d2:0000000000000000:1"
2021/06/17 16:14:39 Reporting span 583eb6af881e99d2:583eb6af881e99d2:0000000000000000:1
{"level":"info","ts":1623946479.5380554,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623946479.5381222,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623946479.538263,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946479.5384016,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946479.538436,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623946479.5384505,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623946479.5384603,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623946479.5384688,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946479.5384777,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946479.538488,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946479.5386105,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946479.5386415,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946479.5386522,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946479.5386617,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623946479.5386705,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623946479.5386791,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946479.5386877,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946479.5386972,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623946479.5388465,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623946479.538878,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623946479.5388978,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623946479.5389063,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946479.538916,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:14:39Z" level=info msg="==--> discovery.FindNetworkService() span:0e72a79db030664d:0e72a79db030664d:0000000000000000:1"
time="2021-06-17T16:14:39Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=0e72a79db030664d:0e72a79db030664d:0000000000000000:1"
time="2021-06-17T16:14:39Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=0e72a79db030664d:0e72a79db030664d:0000000000000000:1"
time="2021-06-17T16:14:39Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:14:39Z" level=info msg="==----> initRegistryClient() span:0e72a79db030664d:054cbab1425840c5:0e72a79db030664d:1"
time="2021-06-17T16:14:39Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:14:39Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:14:39Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="0e72a79db030664d:054cbab1425840c5:0e72a79db030664d:1"
time="2021-06-17T16:14:39Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:14:39Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:14:39Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ee0c0 {member1.com}:0xc0004ee140 {member2.com}:0xc0004ee040]}"
time="2021-06-17T16:14:39Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:14:39Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:14:39Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:14:39Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:14:39Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:14:39Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:14:39Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:14:39Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:14:39Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:14:39Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:44Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:14:44Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:49Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:14:49Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:49Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:49Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:49Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="0e72a79db030664d:054cbab1425840c5:0e72a79db030664d:1"
2021/06/17 16:14:49 Reporting span 0e72a79db030664d:054cbab1425840c5:0e72a79db030664d:1
{"level":"info","ts":1623946489.5744648,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:14:49Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=0e72a79db030664d:0e72a79db030664d:0000000000000000:1"
time="2021-06-17T16:14:49Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=0e72a79db030664d:0e72a79db030664d:0000000000000000:1"
2021/06/17 16:14:49 Reporting span 0e72a79db030664d:3cbd15dda6ef9677:0e72a79db030664d:1
time="2021-06-17T16:14:49Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=0e72a79db030664d:0e72a79db030664d:0000000000000000:1"
2021/06/17 16:14:49 Reporting span 0e72a79db030664d:0e72a79db030664d:0000000000000000:1
{"level":"info","ts":1623946489.5796556,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946489.5797267,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946489.5797772,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946489.5798385,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:14:49Z" level=info msg="==--> discovery.FindNetworkService() span:773fef4d52e41735:773fef4d52e41735:0000000000000000:1"
time="2021-06-17T16:14:49Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=773fef4d52e41735:773fef4d52e41735:0000000000000000:1"
time="2021-06-17T16:14:49Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=773fef4d52e41735:773fef4d52e41735:0000000000000000:1"
time="2021-06-17T16:14:49Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:14:49Z" level=info msg="==----> initRegistryClient() span:773fef4d52e41735:19ad147254213ea2:773fef4d52e41735:1"
time="2021-06-17T16:14:49Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:14:49Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:14:49Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="773fef4d52e41735:19ad147254213ea2:773fef4d52e41735:1"
time="2021-06-17T16:14:49Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:14:49Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:14:49Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000bb280 {member1.com}:0xc0000bb300 {member2.com}:0xc0000bb200]}"
time="2021-06-17T16:14:49Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:14:49Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:14:49Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:14:49Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:14:49Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:14:49Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:14:49Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:14:49Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:14:49Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:14:49Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:49Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:49Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:49Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="773fef4d52e41735:19ad147254213ea2:773fef4d52e41735:1"
2021/06/17 16:14:49 Reporting span 773fef4d52e41735:19ad147254213ea2:773fef4d52e41735:1
{"level":"info","ts":1623946489.6139598,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:14:49Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=773fef4d52e41735:773fef4d52e41735:0000000000000000:1"
time="2021-06-17T16:14:49Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=773fef4d52e41735:773fef4d52e41735:0000000000000000:1"
2021/06/17 16:14:49 Reporting span 773fef4d52e41735:55f3e0bae5eec286:773fef4d52e41735:1
time="2021-06-17T16:14:49Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=773fef4d52e41735:773fef4d52e41735:0000000000000000:1"
2021/06/17 16:14:49 Reporting span 773fef4d52e41735:773fef4d52e41735:0000000000000000:1
{"level":"info","ts":1623946489.6166294,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623946489.6167684,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623946489.6167831,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946489.6167932,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946489.6168327,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623946489.616846,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623946489.6168554,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623946489.616864,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946489.6168733,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946489.6168823,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946489.6168916,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946489.6169014,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946489.61691,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946489.616919,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623946489.6169274,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623946489.6169364,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946489.6169448,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946489.616956,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623946489.616964,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623946489.616972,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623946489.616987,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623946489.6169956,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946489.6170049,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:14:49Z" level=info msg="==--> discovery.FindNetworkService() span:1c8d141158f1760d:1c8d141158f1760d:0000000000000000:1"
time="2021-06-17T16:14:49Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1c8d141158f1760d:1c8d141158f1760d:0000000000000000:1"
time="2021-06-17T16:14:49Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=1c8d141158f1760d:1c8d141158f1760d:0000000000000000:1"
time="2021-06-17T16:14:49Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:14:49Z" level=info msg="==----> initRegistryClient() span:1c8d141158f1760d:7a4b4bfbd9364276:1c8d141158f1760d:1"
time="2021-06-17T16:14:49Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:14:49Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:14:49Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1c8d141158f1760d:7a4b4bfbd9364276:1c8d141158f1760d:1"
time="2021-06-17T16:14:49Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:14:49Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:14:49Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0006d8600 {member1.com}:0xc0006d8580 {member2.com}:0xc0006d8500]}"
time="2021-06-17T16:14:49Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:14:49Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:14:49Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:14:49Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:14:49Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:14:49Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:14:49Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:14:49Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:14:49Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:14:49Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:54Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:14:54Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:59Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:14:59Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:59Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:59Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:14:59Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="1c8d141158f1760d:7a4b4bfbd9364276:1c8d141158f1760d:1"
2021/06/17 16:14:59 Reporting span 1c8d141158f1760d:7a4b4bfbd9364276:1c8d141158f1760d:1
{"level":"info","ts":1623946499.6455643,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:14:59Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1c8d141158f1760d:1c8d141158f1760d:0000000000000000:1"
time="2021-06-17T16:14:59Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=1c8d141158f1760d:1c8d141158f1760d:0000000000000000:1"
2021/06/17 16:14:59 Reporting span 1c8d141158f1760d:47e12cbb6934b3c9:1c8d141158f1760d:1
time="2021-06-17T16:14:59Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1c8d141158f1760d:1c8d141158f1760d:0000000000000000:1"
2021/06/17 16:14:59 Reporting span 1c8d141158f1760d:1c8d141158f1760d:0000000000000000:1
{"level":"info","ts":1623946499.6503801,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946499.6504297,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946499.6504433,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946499.650454,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:14:59Z" level=info msg="==--> discovery.FindNetworkService() span:61c265d7a5b0d3b3:61c265d7a5b0d3b3:0000000000000000:1"
time="2021-06-17T16:14:59Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=61c265d7a5b0d3b3:61c265d7a5b0d3b3:0000000000000000:1"
time="2021-06-17T16:14:59Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=61c265d7a5b0d3b3:61c265d7a5b0d3b3:0000000000000000:1"
time="2021-06-17T16:14:59Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:14:59Z" level=info msg="==----> initRegistryClient() span:61c265d7a5b0d3b3:494c23788e25c292:61c265d7a5b0d3b3:1"
time="2021-06-17T16:14:59Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:15:19Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:15:19Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="61c265d7a5b0d3b3:494c23788e25c292:61c265d7a5b0d3b3:1"
time="2021-06-17T16:15:19Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:15:19Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:15:19Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0006d9500 {member1.com}:0xc0006d9480 {member2.com}:0xc0006d9400]}"
time="2021-06-17T16:15:19Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:15:19Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:15:19Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:15:19Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:15:19Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:15:19Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:15:19Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:15:19Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:15:19Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:15:19Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:15:19Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:15:19Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:15:19Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="61c265d7a5b0d3b3:494c23788e25c292:61c265d7a5b0d3b3:1"
2021/06/17 16:15:19 Reporting span 61c265d7a5b0d3b3:494c23788e25c292:61c265d7a5b0d3b3:1
{"level":"info","ts":1623946519.689099,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:15:19Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=61c265d7a5b0d3b3:61c265d7a5b0d3b3:0000000000000000:1"
time="2021-06-17T16:15:19Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=61c265d7a5b0d3b3:61c265d7a5b0d3b3:0000000000000000:1"
2021/06/17 16:15:19 Reporting span 61c265d7a5b0d3b3:1500c711846d17b6:61c265d7a5b0d3b3:1
time="2021-06-17T16:15:19Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=61c265d7a5b0d3b3:61c265d7a5b0d3b3:0000000000000000:1"
2021/06/17 16:15:19 Reporting span 61c265d7a5b0d3b3:61c265d7a5b0d3b3:0000000000000000:1
{"level":"info","ts":1623946519.6924102,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623946519.6924999,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623946519.692665,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946519.6927812,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946519.6929061,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623946519.692943,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623946519.6929548,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623946519.692964,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946519.6930518,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946519.6930857,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946519.6930964,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946519.693103,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946519.6931112,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946519.6934333,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623946519.6934495,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623946519.6934593,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946519.693468,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946519.6934767,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623946519.6934855,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623946519.693494,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623946591.8466177,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623946591.8467383,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623946591.8468165,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946591.8467605,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623946591.846868,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:16:31Z" level=info msg="==--> discovery.FindNetworkService() span:3a76d063dc35af1a:3a76d063dc35af1a:0000000000000000:1"
time="2021-06-17T16:16:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3a76d063dc35af1a:3a76d063dc35af1a:0000000000000000:1"
time="2021-06-17T16:16:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=3a76d063dc35af1a:3a76d063dc35af1a:0000000000000000:1"
time="2021-06-17T16:16:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:16:31Z" level=info msg="==----> initRegistryClient() span:3a76d063dc35af1a:38433f79c9b60cf6:3a76d063dc35af1a:1"
time="2021-06-17T16:16:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:16:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:16:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3a76d063dc35af1a:38433f79c9b60cf6:3a76d063dc35af1a:1"
time="2021-06-17T16:16:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:16:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:16:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000359640 {member1.com}:0xc0003595c0 {member2.com}:0xc000359540]}"
time="2021-06-17T16:16:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:16:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:16:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:16:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:16:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:16:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:16:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:16:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:16:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:16:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:16:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:16:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:16:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:16:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:16:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:16:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:16:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="3a76d063dc35af1a:38433f79c9b60cf6:3a76d063dc35af1a:1"
2021/06/17 16:16:41 Reporting span 3a76d063dc35af1a:38433f79c9b60cf6:3a76d063dc35af1a:1
{"level":"info","ts":1623946601.8765411,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:16:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=3a76d063dc35af1a:3a76d063dc35af1a:0000000000000000:1"
time="2021-06-17T16:16:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=3a76d063dc35af1a:3a76d063dc35af1a:0000000000000000:1"
2021/06/17 16:16:41 Reporting span 3a76d063dc35af1a:62b223c98947838e:3a76d063dc35af1a:1
time="2021-06-17T16:16:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=3a76d063dc35af1a:3a76d063dc35af1a:0000000000000000:1"
2021/06/17 16:16:41 Reporting span 3a76d063dc35af1a:3a76d063dc35af1a:0000000000000000:1
{"level":"info","ts":1623946601.8815424,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946601.8816578,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946601.8816736,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946601.8816862,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:16:41Z" level=info msg="==--> discovery.FindNetworkService() span:52f426116a9e4379:52f426116a9e4379:0000000000000000:1"
time="2021-06-17T16:16:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=52f426116a9e4379:52f426116a9e4379:0000000000000000:1"
time="2021-06-17T16:16:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=52f426116a9e4379:52f426116a9e4379:0000000000000000:1"
time="2021-06-17T16:16:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:16:41Z" level=info msg="==----> initRegistryClient() span:52f426116a9e4379:01f996a508a2916d:52f426116a9e4379:1"
time="2021-06-17T16:16:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:16:41Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:16:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="52f426116a9e4379:01f996a508a2916d:52f426116a9e4379:1"
time="2021-06-17T16:16:41Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:16:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:16:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0006d8ec0 {member1.com}:0xc0006d8e40 {member2.com}:0xc0006d8dc0]}"
time="2021-06-17T16:16:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:16:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:16:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:16:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:16:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:16:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:16:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:16:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:16:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:16:41Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:16:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:16:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:16:41Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="52f426116a9e4379:01f996a508a2916d:52f426116a9e4379:1"
2021/06/17 16:16:41 Reporting span 52f426116a9e4379:01f996a508a2916d:52f426116a9e4379:1
{"level":"info","ts":1623946601.9180522,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:16:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=52f426116a9e4379:52f426116a9e4379:0000000000000000:1"
time="2021-06-17T16:16:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=52f426116a9e4379:52f426116a9e4379:0000000000000000:1"
2021/06/17 16:16:41 Reporting span 52f426116a9e4379:0d0180d6ef3191f0:52f426116a9e4379:1
time="2021-06-17T16:16:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=52f426116a9e4379:52f426116a9e4379:0000000000000000:1"
2021/06/17 16:16:41 Reporting span 52f426116a9e4379:52f426116a9e4379:0000000000000000:1
{"level":"info","ts":1623946601.9207911,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623946601.9208655,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623946601.9209557,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946601.921169,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946601.9213457,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623946601.9214165,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623946601.9214559,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623946601.9215214,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946601.9215345,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946601.9215455,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946601.9215827,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946601.9215949,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946601.9216254,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946601.9216845,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623946601.9219298,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623946601.9220774,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946601.9221082,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946601.92212,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623946601.9221296,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623946601.9221373,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623946601.922151,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623946601.9223418,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946601.9223537,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:16:41Z" level=info msg="==--> discovery.FindNetworkService() span:70d3cb4a5aa2da51:70d3cb4a5aa2da51:0000000000000000:1"
time="2021-06-17T16:16:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=70d3cb4a5aa2da51:70d3cb4a5aa2da51:0000000000000000:1"
time="2021-06-17T16:16:41Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=70d3cb4a5aa2da51:70d3cb4a5aa2da51:0000000000000000:1"
time="2021-06-17T16:16:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:16:41Z" level=info msg="==----> initRegistryClient() span:70d3cb4a5aa2da51:1eebfed1a4d815fb:70d3cb4a5aa2da51:1"
time="2021-06-17T16:16:41Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:16:41Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:16:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="70d3cb4a5aa2da51:1eebfed1a4d815fb:70d3cb4a5aa2da51:1"
time="2021-06-17T16:16:41Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:16:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:16:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0006d9bc0 {member1.com}:0xc0006d9b40 {member2.com}:0xc0006d9ac0]}"
time="2021-06-17T16:16:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:16:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:16:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:16:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:16:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:16:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:16:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:16:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:16:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:16:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:16:46Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:16:46Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:16:51Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:16:51Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:16:51Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:16:51Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:16:51Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="70d3cb4a5aa2da51:1eebfed1a4d815fb:70d3cb4a5aa2da51:1"
2021/06/17 16:16:51 Reporting span 70d3cb4a5aa2da51:1eebfed1a4d815fb:70d3cb4a5aa2da51:1
{"level":"info","ts":1623946611.9599473,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:16:51Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=70d3cb4a5aa2da51:70d3cb4a5aa2da51:0000000000000000:1"
time="2021-06-17T16:16:51Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=70d3cb4a5aa2da51:70d3cb4a5aa2da51:0000000000000000:1"
2021/06/17 16:16:51 Reporting span 70d3cb4a5aa2da51:1e1b22f039eb6eba:70d3cb4a5aa2da51:1
time="2021-06-17T16:16:51Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=70d3cb4a5aa2da51:70d3cb4a5aa2da51:0000000000000000:1"
2021/06/17 16:16:51 Reporting span 70d3cb4a5aa2da51:70d3cb4a5aa2da51:0000000000000000:1
{"level":"info","ts":1623946611.964732,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946611.9647634,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946611.9647748,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946611.9647853,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:16:51Z" level=info msg="==--> discovery.FindNetworkService() span:5745cd66a1fa75e1:5745cd66a1fa75e1:0000000000000000:1"
time="2021-06-17T16:16:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=5745cd66a1fa75e1:5745cd66a1fa75e1:0000000000000000:1"
time="2021-06-17T16:16:51Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=5745cd66a1fa75e1:5745cd66a1fa75e1:0000000000000000:1"
time="2021-06-17T16:16:51Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:16:51Z" level=info msg="==----> initRegistryClient() span:5745cd66a1fa75e1:0be69aed36fb460f:5745cd66a1fa75e1:1"
time="2021-06-17T16:16:51Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:17:11Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:17:11Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5745cd66a1fa75e1:0be69aed36fb460f:5745cd66a1fa75e1:1"
time="2021-06-17T16:17:11Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:17:11Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:17:11Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000137880 {member1.com}:0xc000137900 {member2.com}:0xc000137800]}"
time="2021-06-17T16:17:11Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:17:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:17:11Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:17:11Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:17:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:17:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:17:11Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:17:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:17:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:17:11Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:17:16Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:17:16Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:17:21Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:17:21Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:17:26Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:17:26Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:17:26Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:17:26Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:17:26Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="5745cd66a1fa75e1:0be69aed36fb460f:5745cd66a1fa75e1:1"
2021/06/17 16:17:26 Reporting span 5745cd66a1fa75e1:0be69aed36fb460f:5745cd66a1fa75e1:1
2021/06/17 16:17:26 Reporting span 5745cd66a1fa75e1:5745cd66a1fa75e1:0000000000000000:1
{"level":"info","ts":1623946646.982851,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623946646.988061,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623946646.988113,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946646.9881268,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:17:26Z" level=info msg="==--> discovery.FindNetworkService() span:6e09b49d94feb1a7:6e09b49d94feb1a7:0000000000000000:1"
time="2021-06-17T16:17:26Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6e09b49d94feb1a7:6e09b49d94feb1a7:0000000000000000:1"
time="2021-06-17T16:17:26Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=6e09b49d94feb1a7:6e09b49d94feb1a7:0000000000000000:1"
time="2021-06-17T16:17:26Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:17:26Z" level=info msg="==----> initRegistryClient() span:6e09b49d94feb1a7:55f7f50b4f8d530a:6e09b49d94feb1a7:1"
time="2021-06-17T16:17:26Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:17:26Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:17:26Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6e09b49d94feb1a7:55f7f50b4f8d530a:6e09b49d94feb1a7:1"
time="2021-06-17T16:17:26Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:17:26Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:17:27Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0009f2180 {member1.com}:0xc0009f2200 {member2.com}:0xc0009f2100]}"
time="2021-06-17T16:17:27Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:17:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:17:27Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:17:27Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:17:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:17:27Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:17:27Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:17:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:17:27Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:17:27Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:17:32Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:17:32Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:17:37Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:17:37Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:17:37Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:17:37Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:17:37Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="6e09b49d94feb1a7:55f7f50b4f8d530a:6e09b49d94feb1a7:1"
2021/06/17 16:17:37 Reporting span 6e09b49d94feb1a7:55f7f50b4f8d530a:6e09b49d94feb1a7:1
{"level":"info","ts":1623946657.0248833,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:17:37Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6e09b49d94feb1a7:6e09b49d94feb1a7:0000000000000000:1"
time="2021-06-17T16:17:37Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=6e09b49d94feb1a7:6e09b49d94feb1a7:0000000000000000:1"
2021/06/17 16:17:37 Reporting span 6e09b49d94feb1a7:57c2827bb5274411:6e09b49d94feb1a7:1
time="2021-06-17T16:17:37Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6e09b49d94feb1a7:6e09b49d94feb1a7:0000000000000000:1"
2021/06/17 16:17:37 Reporting span 6e09b49d94feb1a7:6e09b49d94feb1a7:0000000000000000:1
{"level":"info","ts":1623946657.0314684,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946657.0315008,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946657.0315106,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946657.0315185,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:17:37Z" level=info msg="==--> discovery.FindNetworkService() span:617b8782374cbc73:617b8782374cbc73:0000000000000000:1"
time="2021-06-17T16:17:37Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=617b8782374cbc73:617b8782374cbc73:0000000000000000:1"
time="2021-06-17T16:17:37Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=617b8782374cbc73:617b8782374cbc73:0000000000000000:1"
time="2021-06-17T16:17:37Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:17:37Z" level=info msg="==----> initRegistryClient() span:617b8782374cbc73:20ddadf25d8db55a:617b8782374cbc73:1"
time="2021-06-17T16:17:37Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:17:57Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:17:57Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="617b8782374cbc73:20ddadf25d8db55a:617b8782374cbc73:1"
time="2021-06-17T16:17:57Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:17:57Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:17:57Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ee900 {member1.com}:0xc0004ee980 {member2.com}:0xc0004ee880]}"
time="2021-06-17T16:17:57Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:17:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:17:57Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:17:57Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:17:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:17:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:17:57Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:17:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:17:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:17:57Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:17:57Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:17:57Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:17:57Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="617b8782374cbc73:20ddadf25d8db55a:617b8782374cbc73:1"
2021/06/17 16:17:57 Reporting span 617b8782374cbc73:20ddadf25d8db55a:617b8782374cbc73:1
{"level":"info","ts":1623946677.0687613,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:17:57Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=617b8782374cbc73:617b8782374cbc73:0000000000000000:1"
time="2021-06-17T16:17:57Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=617b8782374cbc73:617b8782374cbc73:0000000000000000:1"
2021/06/17 16:17:57 Reporting span 617b8782374cbc73:1f795b2417200f4a:617b8782374cbc73:1
time="2021-06-17T16:17:57Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=617b8782374cbc73:617b8782374cbc73:0000000000000000:1"
2021/06/17 16:17:57 Reporting span 617b8782374cbc73:617b8782374cbc73:0000000000000000:1
{"level":"info","ts":1623946677.0728755,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623946677.072904,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623946677.0729153,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946677.0731983,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946677.073325,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623946677.0733814,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623946677.0734384,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623946677.0735667,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946677.0735974,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946677.073608,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946677.0736175,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946677.0737412,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946677.0737953,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946677.0738215,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623946677.0738306,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623946677.0738394,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946677.073861,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946677.0738719,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623946677.0738797,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623946677.0738883,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623946711.846971,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623946711.8471718,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623946711.847492,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946711.847441,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623946711.8475237,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:18:31Z" level=info msg="==--> discovery.FindNetworkService() span:40c648ce1cfcf262:40c648ce1cfcf262:0000000000000000:1"
time="2021-06-17T16:18:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=40c648ce1cfcf262:40c648ce1cfcf262:0000000000000000:1"
time="2021-06-17T16:18:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=40c648ce1cfcf262:40c648ce1cfcf262:0000000000000000:1"
time="2021-06-17T16:18:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:18:31Z" level=info msg="==----> initRegistryClient() span:40c648ce1cfcf262:50e78ba1f97a5fee:40c648ce1cfcf262:1"
time="2021-06-17T16:18:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:18:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:18:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="40c648ce1cfcf262:50e78ba1f97a5fee:40c648ce1cfcf262:1"
time="2021-06-17T16:18:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:18:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:18:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000358e80 {member1.com}:0xc000358f00 {member2.com}:0xc000358e00]}"
time="2021-06-17T16:18:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:18:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:18:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:18:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:18:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:18:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:18:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:18:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:18:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:18:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:18:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:18:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:18:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:18:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:18:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:18:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:18:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="40c648ce1cfcf262:50e78ba1f97a5fee:40c648ce1cfcf262:1"
2021/06/17 16:18:41 Reporting span 40c648ce1cfcf262:50e78ba1f97a5fee:40c648ce1cfcf262:1
{"level":"info","ts":1623946721.884671,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:18:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=40c648ce1cfcf262:40c648ce1cfcf262:0000000000000000:1"
time="2021-06-17T16:18:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=40c648ce1cfcf262:40c648ce1cfcf262:0000000000000000:1"
2021/06/17 16:18:41 Reporting span 40c648ce1cfcf262:5b1f910f314e33cf:40c648ce1cfcf262:1
time="2021-06-17T16:18:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=40c648ce1cfcf262:40c648ce1cfcf262:0000000000000000:1"
2021/06/17 16:18:41 Reporting span 40c648ce1cfcf262:40c648ce1cfcf262:0000000000000000:1
{"level":"info","ts":1623946721.8902183,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946721.8902848,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946721.8902986,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946721.8903096,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:18:41Z" level=info msg="==--> discovery.FindNetworkService() span:23430a4abe661505:23430a4abe661505:0000000000000000:1"
time="2021-06-17T16:18:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=23430a4abe661505:23430a4abe661505:0000000000000000:1"
time="2021-06-17T16:18:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=23430a4abe661505:23430a4abe661505:0000000000000000:1"
time="2021-06-17T16:18:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:18:41Z" level=info msg="==----> initRegistryClient() span:23430a4abe661505:0b1b6ed9c64f4f86:23430a4abe661505:1"
time="2021-06-17T16:18:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:18:51Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:18:51Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="23430a4abe661505:0b1b6ed9c64f4f86:23430a4abe661505:1"
time="2021-06-17T16:18:51Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:18:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:18:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000182a40 {member1.com}:0xc000182ac0 {member2.com}:0xc000182940]}"
time="2021-06-17T16:18:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:18:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:18:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:18:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:18:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:18:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:18:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:18:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:18:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:18:51Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:18:56Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:18:56Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:19:01Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:19:01Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:19:06Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:19:06Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:19:06Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:19:11Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:19:11Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="23430a4abe661505:0b1b6ed9c64f4f86:23430a4abe661505:1"
2021/06/17 16:19:11 Reporting span 23430a4abe661505:0b1b6ed9c64f4f86:23430a4abe661505:1
2021/06/17 16:19:11 Reporting span 23430a4abe661505:23430a4abe661505:0000000000000000:1
{"level":"info","ts":1623946751.8909802,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623946751.8911045,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623946751.891151,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946751.8911934,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:19:11Z" level=info msg="==--> discovery.FindNetworkService() span:62f6f26d7d735e9e:62f6f26d7d735e9e:0000000000000000:1"
time="2021-06-17T16:19:11Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=62f6f26d7d735e9e:62f6f26d7d735e9e:0000000000000000:1"
time="2021-06-17T16:19:11Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=62f6f26d7d735e9e:62f6f26d7d735e9e:0000000000000000:1"
time="2021-06-17T16:19:11Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:19:11Z" level=info msg="==----> initRegistryClient() span:62f6f26d7d735e9e:0327694461fdba48:62f6f26d7d735e9e:1"
time="2021-06-17T16:19:11Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:19:11Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:19:11Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="62f6f26d7d735e9e:0327694461fdba48:62f6f26d7d735e9e:1"
time="2021-06-17T16:19:11Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:19:11Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:19:11Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000137a80 {member1.com}:0xc000137b00 {member2.com}:0xc000137a00]}"
time="2021-06-17T16:19:11Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:19:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:19:11Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:19:11Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:19:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:19:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:19:11Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:19:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:19:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:19:11Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:19:16Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:19:16Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:19:21Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:19:21Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:19:21Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:19:21Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:19:21Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="62f6f26d7d735e9e:0327694461fdba48:62f6f26d7d735e9e:1"
2021/06/17 16:19:21 Reporting span 62f6f26d7d735e9e:0327694461fdba48:62f6f26d7d735e9e:1
{"level":"info","ts":1623946761.921868,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:19:21Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=62f6f26d7d735e9e:62f6f26d7d735e9e:0000000000000000:1"
time="2021-06-17T16:19:21Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=62f6f26d7d735e9e:62f6f26d7d735e9e:0000000000000000:1"
2021/06/17 16:19:21 Reporting span 62f6f26d7d735e9e:54e7ac43980cd56b:62f6f26d7d735e9e:1
time="2021-06-17T16:19:21Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=62f6f26d7d735e9e:62f6f26d7d735e9e:0000000000000000:1"
2021/06/17 16:19:21 Reporting span 62f6f26d7d735e9e:62f6f26d7d735e9e:0000000000000000:1
{"level":"info","ts":1623946761.9272778,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946761.9273012,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946761.9273098,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946761.927317,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:19:21Z" level=info msg="==--> discovery.FindNetworkService() span:6cea886989665189:6cea886989665189:0000000000000000:1"
time="2021-06-17T16:19:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6cea886989665189:6cea886989665189:0000000000000000:1"
time="2021-06-17T16:19:21Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=6cea886989665189:6cea886989665189:0000000000000000:1"
time="2021-06-17T16:19:21Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:19:21Z" level=info msg="==----> initRegistryClient() span:6cea886989665189:12e0f7de500bc76a:6cea886989665189:1"
time="2021-06-17T16:19:21Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:19:41Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:19:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6cea886989665189:12e0f7de500bc76a:6cea886989665189:1"
time="2021-06-17T16:19:41Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:19:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:19:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000ba140 {member1.com}:0xc0000ba1c0 {member2.com}:0xc0000ba0c0]}"
time="2021-06-17T16:19:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:19:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:19:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:19:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:19:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:19:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:19:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:19:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:19:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:19:41Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:19:46Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:19:46Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:19:51Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:19:51Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:19:56Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:19:56Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:19:56Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:19:56Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:19:56Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="6cea886989665189:12e0f7de500bc76a:6cea886989665189:1"
2021/06/17 16:19:56 Reporting span 6cea886989665189:12e0f7de500bc76a:6cea886989665189:1
2021/06/17 16:19:56 Reporting span 6cea886989665189:6cea886989665189:0000000000000000:1
{"level":"info","ts":1623946796.9515533,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623946796.951631,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623946796.9516416,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946796.951651,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:19:56Z" level=info msg="==--> discovery.FindNetworkService() span:7a088f3b6b16e18b:7a088f3b6b16e18b:0000000000000000:1"
time="2021-06-17T16:19:56Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7a088f3b6b16e18b:7a088f3b6b16e18b:0000000000000000:1"
time="2021-06-17T16:19:56Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=7a088f3b6b16e18b:7a088f3b6b16e18b:0000000000000000:1"
time="2021-06-17T16:19:56Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:19:56Z" level=info msg="==----> initRegistryClient() span:7a088f3b6b16e18b:351bc248a4860c11:7a088f3b6b16e18b:1"
time="2021-06-17T16:19:56Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:19:56Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:19:56Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7a088f3b6b16e18b:351bc248a4860c11:7a088f3b6b16e18b:1"
time="2021-06-17T16:19:56Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:19:56Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:19:56Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0009f22c0 {member1.com}:0xc0009f2240 {member2.com}:0xc0009f21c0]}"
time="2021-06-17T16:19:56Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:19:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:19:56Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:19:56Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:19:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:19:56Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:19:56Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:19:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:19:56Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:19:56Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:20:01Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:20:01Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:20:06Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:20:06Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:20:06Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:20:06Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:20:06Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="7a088f3b6b16e18b:351bc248a4860c11:7a088f3b6b16e18b:1"
2021/06/17 16:20:06 Reporting span 7a088f3b6b16e18b:351bc248a4860c11:7a088f3b6b16e18b:1
{"level":"info","ts":1623946806.981669,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:20:06Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7a088f3b6b16e18b:7a088f3b6b16e18b:0000000000000000:1"
time="2021-06-17T16:20:06Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=7a088f3b6b16e18b:7a088f3b6b16e18b:0000000000000000:1"
2021/06/17 16:20:06 Reporting span 7a088f3b6b16e18b:54454247e170e76d:7a088f3b6b16e18b:1
time="2021-06-17T16:20:06Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7a088f3b6b16e18b:7a088f3b6b16e18b:0000000000000000:1"
2021/06/17 16:20:06 Reporting span 7a088f3b6b16e18b:7a088f3b6b16e18b:0000000000000000:1
{"level":"info","ts":1623946806.98799,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946806.9880981,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946806.988373,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946806.9884744,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:20:06Z" level=info msg="==--> discovery.FindNetworkService() span:45550643409651e0:45550643409651e0:0000000000000000:1"
time="2021-06-17T16:20:06Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=45550643409651e0:45550643409651e0:0000000000000000:1"
time="2021-06-17T16:20:06Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=45550643409651e0:45550643409651e0:0000000000000000:1"
time="2021-06-17T16:20:06Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:20:06Z" level=info msg="==----> initRegistryClient() span:45550643409651e0:35a5885a62d0ae18:45550643409651e0:1"
time="2021-06-17T16:20:06Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:20:26Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:20:26Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="45550643409651e0:35a5885a62d0ae18:45550643409651e0:1"
time="2021-06-17T16:20:26Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:20:26Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:20:27Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000183d40 {member1.com}:0xc000183c00 {member2.com}:0xc0001837c0]}"
time="2021-06-17T16:20:27Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:20:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:20:27Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:20:27Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:20:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:20:27Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:20:27Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:20:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:20:27Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:20:27Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:20:27Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:20:27Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:20:27Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="45550643409651e0:35a5885a62d0ae18:45550643409651e0:1"
2021/06/17 16:20:27 Reporting span 45550643409651e0:35a5885a62d0ae18:45550643409651e0:1
{"level":"info","ts":1623946827.0316894,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:20:27Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=45550643409651e0:45550643409651e0:0000000000000000:1"
time="2021-06-17T16:20:27Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=45550643409651e0:45550643409651e0:0000000000000000:1"
2021/06/17 16:20:27 Reporting span 45550643409651e0:1680ada6ccb13d01:45550643409651e0:1
time="2021-06-17T16:20:27Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=45550643409651e0:45550643409651e0:0000000000000000:1"
2021/06/17 16:20:27 Reporting span 45550643409651e0:45550643409651e0:0000000000000000:1
{"level":"info","ts":1623946827.0343041,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623946827.0343485,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623946827.034374,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946827.0343864,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946827.0343993,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623946827.0344162,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623946827.0354352,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623946827.0354803,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946827.0354948,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946827.0355067,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946827.0355551,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946827.0357375,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946827.0360482,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946827.0362005,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623946827.0363297,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623946827.036361,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946827.036381,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946827.036393,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623946827.0364037,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623946827.0364401,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623946827.0365062,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623946827.0413113,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946827.0413556,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:20:27Z" level=info msg="==--> discovery.FindNetworkService() span:05682c5da7723553:05682c5da7723553:0000000000000000:1"
time="2021-06-17T16:20:27Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=05682c5da7723553:05682c5da7723553:0000000000000000:1"
time="2021-06-17T16:20:27Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=05682c5da7723553:05682c5da7723553:0000000000000000:1"
time="2021-06-17T16:20:27Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:20:27Z" level=info msg="==----> initRegistryClient() span:05682c5da7723553:56b34255e59c9834:05682c5da7723553:1"
time="2021-06-17T16:20:27Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:20:27Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:20:27Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="05682c5da7723553:56b34255e59c9834:05682c5da7723553:1"
time="2021-06-17T16:20:27Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:20:27Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:20:27Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000136400 {member1.com}:0xc0001365c0 {member2.com}:0xc0001362c0]}"
time="2021-06-17T16:20:27Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:20:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:20:27Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:20:27Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:20:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:20:27Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:20:27Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:20:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:20:27Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:20:27Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
{"level":"info","ts":1623946831.8472698,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623946831.847445,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T16:20:32Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:20:32Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:20:37Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:20:37Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:20:37Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:20:37Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:20:37Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="05682c5da7723553:56b34255e59c9834:05682c5da7723553:1"
2021/06/17 16:20:37 Reporting span 05682c5da7723553:56b34255e59c9834:05682c5da7723553:1
{"level":"info","ts":1623946837.0780654,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:20:37Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=05682c5da7723553:05682c5da7723553:0000000000000000:1"
time="2021-06-17T16:20:37Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=05682c5da7723553:05682c5da7723553:0000000000000000:1"
2021/06/17 16:20:37 Reporting span 05682c5da7723553:5b46be7b055dbc36:05682c5da7723553:1
time="2021-06-17T16:20:37Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=05682c5da7723553:05682c5da7723553:0000000000000000:1"
2021/06/17 16:20:37 Reporting span 05682c5da7723553:05682c5da7723553:0000000000000000:1
{"level":"info","ts":1623946837.084148,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946837.0841749,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946837.0841877,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946837.0842447,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:20:37Z" level=info msg="==--> discovery.FindNetworkService() span:62a5def0b3e92027:62a5def0b3e92027:0000000000000000:1"
time="2021-06-17T16:20:37Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=62a5def0b3e92027:62a5def0b3e92027:0000000000000000:1"
time="2021-06-17T16:20:37Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=62a5def0b3e92027:62a5def0b3e92027:0000000000000000:1"
time="2021-06-17T16:20:37Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:20:37Z" level=info msg="==----> initRegistryClient() span:62a5def0b3e92027:3f05fca54d72ba77:62a5def0b3e92027:1"
time="2021-06-17T16:20:37Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:20:37Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:20:37Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="62a5def0b3e92027:3f05fca54d72ba77:62a5def0b3e92027:1"
time="2021-06-17T16:20:37Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:20:37Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:20:37Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0007429c0 {member1.com}:0xc000742a40 {member2.com}:0xc000742940]}"
time="2021-06-17T16:20:37Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:20:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:20:37Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:20:37Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:20:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:20:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:20:37Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:20:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:20:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:20:37Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:20:42Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:20:42Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:20:47Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:20:47Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:20:52Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:20:52Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:20:52Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:21:07Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:21:07Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="62a5def0b3e92027:3f05fca54d72ba77:62a5def0b3e92027:1"
2021/06/17 16:21:07 Reporting span 62a5def0b3e92027:3f05fca54d72ba77:62a5def0b3e92027:1
2021/06/17 16:21:07 Reporting span 62a5def0b3e92027:62a5def0b3e92027:0000000000000000:1
{"level":"info","ts":1623946867.0852034,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623946867.0853388,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623946867.0853517,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946867.085363,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:21:07Z" level=info msg="==--> discovery.FindNetworkService() span:6194975ae6dfcbb4:6194975ae6dfcbb4:0000000000000000:1"
time="2021-06-17T16:21:07Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6194975ae6dfcbb4:6194975ae6dfcbb4:0000000000000000:1"
time="2021-06-17T16:21:07Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=6194975ae6dfcbb4:6194975ae6dfcbb4:0000000000000000:1"
time="2021-06-17T16:21:07Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:21:07Z" level=info msg="==----> initRegistryClient() span:6194975ae6dfcbb4:1287d64a2e9b1569:6194975ae6dfcbb4:1"
time="2021-06-17T16:21:07Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:21:07Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:21:07Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6194975ae6dfcbb4:1287d64a2e9b1569:6194975ae6dfcbb4:1"
time="2021-06-17T16:21:07Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:21:07Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:21:07Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00088c280 {member1.com}:0xc00088c300 {member2.com}:0xc00088c200]}"
time="2021-06-17T16:21:07Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:21:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:21:07Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:21:07Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:21:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:21:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:21:07Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:21:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:21:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:21:07Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:21:12Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:21:12Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:21:17Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:21:17Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:21:17Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:21:17Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:21:17Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="6194975ae6dfcbb4:1287d64a2e9b1569:6194975ae6dfcbb4:1"
2021/06/17 16:21:17 Reporting span 6194975ae6dfcbb4:1287d64a2e9b1569:6194975ae6dfcbb4:1
{"level":"info","ts":1623946877.130176,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:21:17Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6194975ae6dfcbb4:6194975ae6dfcbb4:0000000000000000:1"
time="2021-06-17T16:21:17Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=6194975ae6dfcbb4:6194975ae6dfcbb4:0000000000000000:1"
2021/06/17 16:21:17 Reporting span 6194975ae6dfcbb4:5b231ce953cd7a32:6194975ae6dfcbb4:1
time="2021-06-17T16:21:17Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6194975ae6dfcbb4:6194975ae6dfcbb4:0000000000000000:1"
2021/06/17 16:21:17 Reporting span 6194975ae6dfcbb4:6194975ae6dfcbb4:0000000000000000:1
{"level":"info","ts":1623946877.1388304,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946877.1388683,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946877.1388795,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946877.1388898,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:21:17Z" level=info msg="==--> discovery.FindNetworkService() span:79836e83c363b827:79836e83c363b827:0000000000000000:1"
time="2021-06-17T16:21:17Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=79836e83c363b827:79836e83c363b827:0000000000000000:1"
time="2021-06-17T16:21:17Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=79836e83c363b827:79836e83c363b827:0000000000000000:1"
time="2021-06-17T16:21:17Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:21:17Z" level=info msg="==----> initRegistryClient() span:79836e83c363b827:084f419e84a1fbfd:79836e83c363b827:1"
time="2021-06-17T16:21:17Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:21:37Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:21:37Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="79836e83c363b827:084f419e84a1fbfd:79836e83c363b827:1"
time="2021-06-17T16:21:37Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:21:37Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:21:37Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000359100 {member1.com}:0xc000359180 {member2.com}:0xc000359080]}"
time="2021-06-17T16:21:37Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:21:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:21:37Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:21:37Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:21:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:21:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:21:37Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:21:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:21:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:21:37Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:21:42Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:21:42Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:21:47Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:21:47Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:21:52Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:21:52Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:21:52Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:21:52Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:21:52Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="79836e83c363b827:084f419e84a1fbfd:79836e83c363b827:1"
2021/06/17 16:21:52 Reporting span 79836e83c363b827:084f419e84a1fbfd:79836e83c363b827:1
2021/06/17 16:21:52 Reporting span 79836e83c363b827:79836e83c363b827:0000000000000000:1
{"level":"info","ts":1623946912.1610699,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623946912.1613612,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623946912.1615567,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946912.1615953,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:21:52Z" level=info msg="==--> discovery.FindNetworkService() span:5c162da87f7b5341:5c162da87f7b5341:0000000000000000:1"
time="2021-06-17T16:21:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=5c162da87f7b5341:5c162da87f7b5341:0000000000000000:1"
time="2021-06-17T16:21:52Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=5c162da87f7b5341:5c162da87f7b5341:0000000000000000:1"
time="2021-06-17T16:21:52Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:21:52Z" level=info msg="==----> initRegistryClient() span:5c162da87f7b5341:51fc12774310c9ea:5c162da87f7b5341:1"
time="2021-06-17T16:21:52Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:21:52Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:21:52Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5c162da87f7b5341:51fc12774310c9ea:5c162da87f7b5341:1"
time="2021-06-17T16:21:52Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:21:52Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:21:52Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000137a80 {member1.com}:0xc000137a00 {member2.com}:0xc000137980]}"
time="2021-06-17T16:21:52Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:21:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:21:52Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:21:52Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:21:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:21:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:21:52Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:21:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:21:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:21:52Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:21:57Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:21:57Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:22:02Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:22:02Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:22:02Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:22:02Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:22:02Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="5c162da87f7b5341:51fc12774310c9ea:5c162da87f7b5341:1"
2021/06/17 16:22:02 Reporting span 5c162da87f7b5341:51fc12774310c9ea:5c162da87f7b5341:1
{"level":"info","ts":1623946922.1970541,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:22:02Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5c162da87f7b5341:5c162da87f7b5341:0000000000000000:1"
time="2021-06-17T16:22:02Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=5c162da87f7b5341:5c162da87f7b5341:0000000000000000:1"
2021/06/17 16:22:02 Reporting span 5c162da87f7b5341:742c66701f2adef2:5c162da87f7b5341:1
time="2021-06-17T16:22:02Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5c162da87f7b5341:5c162da87f7b5341:0000000000000000:1"
2021/06/17 16:22:02 Reporting span 5c162da87f7b5341:5c162da87f7b5341:0000000000000000:1
{"level":"info","ts":1623946922.2018585,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946922.2019417,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946922.2019784,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946922.2020898,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:22:02Z" level=info msg="==--> discovery.FindNetworkService() span:587d01be897ecdab:587d01be897ecdab:0000000000000000:1"
time="2021-06-17T16:22:02Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=587d01be897ecdab:587d01be897ecdab:0000000000000000:1"
time="2021-06-17T16:22:02Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=587d01be897ecdab:587d01be897ecdab:0000000000000000:1"
time="2021-06-17T16:22:02Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:22:02Z" level=info msg="==----> initRegistryClient() span:587d01be897ecdab:2f09af64d8f60b59:587d01be897ecdab:1"
time="2021-06-17T16:22:02Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:22:12Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:22:12Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="587d01be897ecdab:2f09af64d8f60b59:587d01be897ecdab:1"
time="2021-06-17T16:22:12Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:22:12Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:22:12Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004ee840 {member1.com}:0xc0004ee8c0 {member2.com}:0xc0004ee7c0]}"
time="2021-06-17T16:22:12Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:22:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:22:12Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:22:12Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:22:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:22:12Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:22:12Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:22:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:22:12Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:22:12Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:22:12Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:22:12Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:22:12Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="587d01be897ecdab:2f09af64d8f60b59:587d01be897ecdab:1"
2021/06/17 16:22:12 Reporting span 587d01be897ecdab:2f09af64d8f60b59:587d01be897ecdab:1
{"level":"info","ts":1623946932.240758,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:22:12Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=587d01be897ecdab:587d01be897ecdab:0000000000000000:1"
time="2021-06-17T16:22:12Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=587d01be897ecdab:587d01be897ecdab:0000000000000000:1"
2021/06/17 16:22:12 Reporting span 587d01be897ecdab:0d421d99dbcf0b2e:587d01be897ecdab:1
time="2021-06-17T16:22:12Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=587d01be897ecdab:587d01be897ecdab:0000000000000000:1"
2021/06/17 16:22:12 Reporting span 587d01be897ecdab:587d01be897ecdab:0000000000000000:1
{"level":"info","ts":1623946932.2437797,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623946932.2438245,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623946932.2438374,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946932.2438624,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946932.2438743,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623946932.2439017,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623946932.243911,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623946932.2439315,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946932.2439404,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946932.2439475,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946932.243974,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946932.243986,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946932.2440088,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946932.2440164,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623946932.2440224,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623946932.2440422,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946932.2440484,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946932.244055,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623946932.2440631,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623946932.2440717,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623946932.2441046,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623946932.2441308,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946932.2441447,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:22:12Z" level=info msg="==--> discovery.FindNetworkService() span:71c137c14f388a00:71c137c14f388a00:0000000000000000:1"
time="2021-06-17T16:22:12Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=71c137c14f388a00:71c137c14f388a00:0000000000000000:1"
time="2021-06-17T16:22:12Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=71c137c14f388a00:71c137c14f388a00:0000000000000000:1"
time="2021-06-17T16:22:12Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:22:12Z" level=info msg="==----> initRegistryClient() span:71c137c14f388a00:64367dfa021d6333:71c137c14f388a00:1"
time="2021-06-17T16:22:12Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:22:12Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:22:12Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="71c137c14f388a00:64367dfa021d6333:71c137c14f388a00:1"
time="2021-06-17T16:22:12Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:22:12Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:22:12Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00088c280 {member1.com}:0xc00088c300 {member2.com}:0xc00088c200]}"
time="2021-06-17T16:22:12Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:22:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:22:12Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:22:12Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:22:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:22:12Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:22:12Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:22:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:22:12Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:22:12Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:22:17Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:22:17Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:22:22Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:22:22Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:22:22Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:22:22Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:22:22Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="71c137c14f388a00:64367dfa021d6333:71c137c14f388a00:1"
2021/06/17 16:22:22 Reporting span 71c137c14f388a00:64367dfa021d6333:71c137c14f388a00:1
{"level":"info","ts":1623946942.2737958,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:22:22Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=71c137c14f388a00:71c137c14f388a00:0000000000000000:1"
time="2021-06-17T16:22:22Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=71c137c14f388a00:71c137c14f388a00:0000000000000000:1"
2021/06/17 16:22:22 Reporting span 71c137c14f388a00:6dc7e8ae53b7c5c9:71c137c14f388a00:1
time="2021-06-17T16:22:22Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=71c137c14f388a00:71c137c14f388a00:0000000000000000:1"
2021/06/17 16:22:22 Reporting span 71c137c14f388a00:71c137c14f388a00:0000000000000000:1
{"level":"info","ts":1623946942.278906,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946942.278955,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946942.278968,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946942.2789793,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:22:22Z" level=info msg="==--> discovery.FindNetworkService() span:5c6c10b21de3790c:5c6c10b21de3790c:0000000000000000:1"
time="2021-06-17T16:22:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=5c6c10b21de3790c:5c6c10b21de3790c:0000000000000000:1"
time="2021-06-17T16:22:22Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=5c6c10b21de3790c:5c6c10b21de3790c:0000000000000000:1"
time="2021-06-17T16:22:22Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:22:22Z" level=info msg="==----> initRegistryClient() span:5c6c10b21de3790c:7f0afd7c09d2fc3f:5c6c10b21de3790c:1"
time="2021-06-17T16:22:22Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:22:22Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:22:22Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5c6c10b21de3790c:7f0afd7c09d2fc3f:5c6c10b21de3790c:1"
time="2021-06-17T16:22:22Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:22:22Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:22:22Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0006a8480 {member1.com}:0xc0006a8500 {member2.com}:0xc0006a80c0]}"
time="2021-06-17T16:22:22Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:22:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:22:22Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:22:22Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:22:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:22:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:22:22Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:22:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:22:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:22:22Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:22:22Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:22:22Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:22:28Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="5c6c10b21de3790c:7f0afd7c09d2fc3f:5c6c10b21de3790c:1"
2021/06/17 16:22:28 Reporting span 5c6c10b21de3790c:7f0afd7c09d2fc3f:5c6c10b21de3790c:1
{"level":"info","ts":1623946948.9968612,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:22:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5c6c10b21de3790c:5c6c10b21de3790c:0000000000000000:1"
time="2021-06-17T16:22:28Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=5c6c10b21de3790c:5c6c10b21de3790c:0000000000000000:1"
2021/06/17 16:22:28 Reporting span 5c6c10b21de3790c:35791ea3c1294333:5c6c10b21de3790c:1
time="2021-06-17T16:22:29Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623945346},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623945417},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5c6c10b21de3790c:5c6c10b21de3790c:0000000000000000:1"
2021/06/17 16:22:29 Reporting span 5c6c10b21de3790c:5c6c10b21de3790c:0000000000000000:1
{"level":"info","ts":1623946949.0002549,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623946949.000293,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623946949.0003047,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946949.0003135,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946949.0003238,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623946949.0003357,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623946949.000345,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623946949.0003533,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946949.0003624,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946949.000372,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946949.000381,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946949.0003896,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946949.0003984,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946949.0004067,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623946949.000416,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623946949.0004246,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623946949.0004587,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623946949.000493,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623946949.0005248,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623946949.0005584,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623946951.8477979,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623946951.847942,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623946951.847982,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946951.8479946,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:22:31Z" level=info msg="==--> discovery.FindNetworkService() span:4b330da84fd28ba5:4b330da84fd28ba5:0000000000000000:1"
time="2021-06-17T16:22:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=4b330da84fd28ba5:4b330da84fd28ba5:0000000000000000:1"
time="2021-06-17T16:22:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=4b330da84fd28ba5:4b330da84fd28ba5:0000000000000000:1"
{"level":"info","ts":1623946951.847962,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T16:22:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:22:31Z" level=info msg="==----> initRegistryClient() span:4b330da84fd28ba5:197c7f90af0ed4e9:4b330da84fd28ba5:1"
time="2021-06-17T16:22:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:22:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:22:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4b330da84fd28ba5:197c7f90af0ed4e9:4b330da84fd28ba5:1"
time="2021-06-17T16:22:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:22:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:22:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000359240 {member1.com}:0xc000359340 {member2.com}:0xc0003591c0]}"
time="2021-06-17T16:22:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:22:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:22:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:22:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:22:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:22:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:22:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:22:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:22:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:22:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:22:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:22:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:22:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:22:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:22:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:22:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:22:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="4b330da84fd28ba5:197c7f90af0ed4e9:4b330da84fd28ba5:1"
2021/06/17 16:22:41 Reporting span 4b330da84fd28ba5:197c7f90af0ed4e9:4b330da84fd28ba5:1
{"level":"info","ts":1623946961.8768976,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:22:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=4b330da84fd28ba5:4b330da84fd28ba5:0000000000000000:1"
time="2021-06-17T16:22:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=4b330da84fd28ba5:4b330da84fd28ba5:0000000000000000:1"
2021/06/17 16:22:41 Reporting span 4b330da84fd28ba5:75cc861993a6dd7a:4b330da84fd28ba5:1
time="2021-06-17T16:22:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=4b330da84fd28ba5:4b330da84fd28ba5:0000000000000000:1"
2021/06/17 16:22:41 Reporting span 4b330da84fd28ba5:4b330da84fd28ba5:0000000000000000:1
{"level":"info","ts":1623946961.8820581,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623946961.8821113,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623946961.8821251,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623946961.8821363,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:22:41Z" level=info msg="==--> discovery.FindNetworkService() span:791e89658a2066b2:791e89658a2066b2:0000000000000000:1"
time="2021-06-17T16:22:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=791e89658a2066b2:791e89658a2066b2:0000000000000000:1"
time="2021-06-17T16:22:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=791e89658a2066b2:791e89658a2066b2:0000000000000000:1"
time="2021-06-17T16:22:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:22:41Z" level=info msg="==----> initRegistryClient() span:791e89658a2066b2:1b3063652a007ba4:791e89658a2066b2:1"
time="2021-06-17T16:22:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:22:41Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:22:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="791e89658a2066b2:1b3063652a007ba4:791e89658a2066b2:1"
time="2021-06-17T16:22:41Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:22:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:22:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004efe40 {member1.com}:0xc0004efcc0 {member2.com}:0xc0004efc40]}"
time="2021-06-17T16:22:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:22:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:22:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:22:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:22:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:22:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:22:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:22:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:22:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:22:41Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:22:46Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:22:46Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:22:51Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:22:51Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:22:56Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:22:56Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:22:56Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:23:11Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:23:11Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="791e89658a2066b2:1b3063652a007ba4:791e89658a2066b2:1"
2021/06/17 16:23:11 Reporting span 791e89658a2066b2:1b3063652a007ba4:791e89658a2066b2:1
2021/06/17 16:23:11 Reporting span 791e89658a2066b2:791e89658a2066b2:0000000000000000:1
{"level":"info","ts":1623946991.8845677,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623946991.8851683,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623946991.885942,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623946991.8859782,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:23:11Z" level=info msg="==--> discovery.FindNetworkService() span:2d3e4e9bcd108710:2d3e4e9bcd108710:0000000000000000:1"
time="2021-06-17T16:23:11Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2d3e4e9bcd108710:2d3e4e9bcd108710:0000000000000000:1"
time="2021-06-17T16:23:11Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=2d3e4e9bcd108710:2d3e4e9bcd108710:0000000000000000:1"
time="2021-06-17T16:23:11Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:23:11Z" level=info msg="==----> initRegistryClient() span:2d3e4e9bcd108710:638b1facd334e89c:2d3e4e9bcd108710:1"
time="2021-06-17T16:23:11Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:23:11Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:23:11Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2d3e4e9bcd108710:638b1facd334e89c:2d3e4e9bcd108710:1"
time="2021-06-17T16:23:11Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:23:11Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:23:11Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0006a8f00 {member1.com}:0xc0006a8e80 {member2.com}:0xc0006a8dc0]}"
time="2021-06-17T16:23:11Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:23:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:23:11Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:23:11Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:23:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:23:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:23:11Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:23:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:23:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:23:11Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:23:16Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:23:16Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:23:21Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:23:21Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:23:21Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:23:21Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:23:21Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="2d3e4e9bcd108710:638b1facd334e89c:2d3e4e9bcd108710:1"
2021/06/17 16:23:21 Reporting span 2d3e4e9bcd108710:638b1facd334e89c:2d3e4e9bcd108710:1
{"level":"info","ts":1623947001.9244134,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:23:21Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2d3e4e9bcd108710:2d3e4e9bcd108710:0000000000000000:1"
time="2021-06-17T16:23:21Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=2d3e4e9bcd108710:2d3e4e9bcd108710:0000000000000000:1"
2021/06/17 16:23:21 Reporting span 2d3e4e9bcd108710:323a78f8d61cc507:2d3e4e9bcd108710:1
time="2021-06-17T16:23:21Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2d3e4e9bcd108710:2d3e4e9bcd108710:0000000000000000:1"
2021/06/17 16:23:21 Reporting span 2d3e4e9bcd108710:2d3e4e9bcd108710:0000000000000000:1
{"level":"info","ts":1623947001.9302878,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947001.9303184,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947001.9303293,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947001.9303403,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:23:21Z" level=info msg="==--> discovery.FindNetworkService() span:0f6963db763a4b34:0f6963db763a4b34:0000000000000000:1"
time="2021-06-17T16:23:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=0f6963db763a4b34:0f6963db763a4b34:0000000000000000:1"
time="2021-06-17T16:23:21Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=0f6963db763a4b34:0f6963db763a4b34:0000000000000000:1"
time="2021-06-17T16:23:21Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:23:21Z" level=info msg="==----> initRegistryClient() span:0f6963db763a4b34:1841d8d308085711:0f6963db763a4b34:1"
time="2021-06-17T16:23:21Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:23:31Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:23:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="0f6963db763a4b34:1841d8d308085711:0f6963db763a4b34:1"
time="2021-06-17T16:23:31Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:23:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:23:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000359240 {member1.com}:0xc000359340 {member2.com}:0xc0003591c0]}"
time="2021-06-17T16:23:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:23:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:23:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:23:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:23:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:23:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:23:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:23:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:23:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:23:31Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:23:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:23:36Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:23:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:23:41Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:23:46Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:23:46Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:23:46Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:23:51Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:23:51Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="0f6963db763a4b34:1841d8d308085711:0f6963db763a4b34:1"
2021/06/17 16:23:51 Reporting span 0f6963db763a4b34:1841d8d308085711:0f6963db763a4b34:1
2021/06/17 16:23:51 Reporting span 0f6963db763a4b34:0f6963db763a4b34:0000000000000000:1
{"level":"info","ts":1623947031.931181,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623947031.9312851,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623947031.9313173,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623947031.9313304,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:23:51Z" level=info msg="==--> discovery.FindNetworkService() span:7dc718fa4fca80c8:7dc718fa4fca80c8:0000000000000000:1"
time="2021-06-17T16:23:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7dc718fa4fca80c8:7dc718fa4fca80c8:0000000000000000:1"
time="2021-06-17T16:23:51Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=7dc718fa4fca80c8:7dc718fa4fca80c8:0000000000000000:1"
time="2021-06-17T16:23:51Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:23:51Z" level=info msg="==----> initRegistryClient() span:7dc718fa4fca80c8:67d6f204f3722ff5:7dc718fa4fca80c8:1"
time="2021-06-17T16:23:51Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:23:51Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:23:51Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7dc718fa4fca80c8:67d6f204f3722ff5:7dc718fa4fca80c8:1"
time="2021-06-17T16:23:51Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:23:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:23:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0001365c0 {member1.com}:0xc000136400 {member2.com}:0xc0001362c0]}"
time="2021-06-17T16:23:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:23:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:23:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:23:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:23:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:23:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:23:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:23:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:23:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:23:51Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:23:56Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:23:56Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:24:01Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:24:01Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:24:01Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:24:01Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:24:01Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="7dc718fa4fca80c8:67d6f204f3722ff5:7dc718fa4fca80c8:1"
2021/06/17 16:24:01 Reporting span 7dc718fa4fca80c8:67d6f204f3722ff5:7dc718fa4fca80c8:1
{"level":"info","ts":1623947041.9648602,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:24:01Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7dc718fa4fca80c8:7dc718fa4fca80c8:0000000000000000:1"
time="2021-06-17T16:24:01Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=7dc718fa4fca80c8:7dc718fa4fca80c8:0000000000000000:1"
2021/06/17 16:24:01 Reporting span 7dc718fa4fca80c8:1d30db56f2180462:7dc718fa4fca80c8:1
time="2021-06-17T16:24:01Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7dc718fa4fca80c8:7dc718fa4fca80c8:0000000000000000:1"
2021/06/17 16:24:01 Reporting span 7dc718fa4fca80c8:7dc718fa4fca80c8:0000000000000000:1
{"level":"info","ts":1623947041.974644,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947041.9747858,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947041.9748282,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947041.974891,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:24:01Z" level=info msg="==--> discovery.FindNetworkService() span:24f0a971b70c1c72:24f0a971b70c1c72:0000000000000000:1"
time="2021-06-17T16:24:01Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=24f0a971b70c1c72:24f0a971b70c1c72:0000000000000000:1"
time="2021-06-17T16:24:01Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=24f0a971b70c1c72:24f0a971b70c1c72:0000000000000000:1"
time="2021-06-17T16:24:01Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:24:01Z" level=info msg="==----> initRegistryClient() span:24f0a971b70c1c72:5185172f958a79d0:24f0a971b70c1c72:1"
time="2021-06-17T16:24:01Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:24:11Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:24:11Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="24f0a971b70c1c72:5185172f958a79d0:24f0a971b70c1c72:1"
time="2021-06-17T16:24:11Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:24:11Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:24:11Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000183700 {member1.com}:0xc000183100 {member2.com}:0xc000182bc0]}"
time="2021-06-17T16:24:11Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:24:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:24:11Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:24:11Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:24:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:24:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:24:11Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:24:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:24:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:24:11Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:24:16Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:24:16Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:24:21Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:24:21Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:24:26Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:24:26Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:24:26Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
{"level":"info","ts":1623947071.8480403,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623947071.8481977,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T16:24:31Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:24:31Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="24f0a971b70c1c72:5185172f958a79d0:24f0a971b70c1c72:1"
2021/06/17 16:24:31 Reporting span 24f0a971b70c1c72:5185172f958a79d0:24f0a971b70c1c72:1
2021/06/17 16:24:31 Reporting span 24f0a971b70c1c72:24f0a971b70c1c72:0000000000000000:1
{"level":"info","ts":1623947071.9757793,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623947071.975838,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623947071.9758499,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623947071.9758606,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:24:31Z" level=info msg="==--> discovery.FindNetworkService() span:2eb794c62e880d5d:2eb794c62e880d5d:0000000000000000:1"
time="2021-06-17T16:24:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2eb794c62e880d5d:2eb794c62e880d5d:0000000000000000:1"
time="2021-06-17T16:24:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=2eb794c62e880d5d:2eb794c62e880d5d:0000000000000000:1"
time="2021-06-17T16:24:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:24:31Z" level=info msg="==----> initRegistryClient() span:2eb794c62e880d5d:380f1d75ca81a8f2:2eb794c62e880d5d:1"
time="2021-06-17T16:24:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:24:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:24:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2eb794c62e880d5d:380f1d75ca81a8f2:2eb794c62e880d5d:1"
time="2021-06-17T16:24:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:24:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:24:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00080c100 {member1.com}:0xc00080c180 {member2.com}:0xc00080c080]}"
time="2021-06-17T16:24:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:24:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:24:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:24:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:24:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:24:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:24:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:24:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:24:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:24:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:24:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:24:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:24:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:24:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:24:42Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:24:42Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:24:42Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="2eb794c62e880d5d:380f1d75ca81a8f2:2eb794c62e880d5d:1"
2021/06/17 16:24:42 Reporting span 2eb794c62e880d5d:380f1d75ca81a8f2:2eb794c62e880d5d:1
{"level":"info","ts":1623947082.0061958,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:24:42Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2eb794c62e880d5d:2eb794c62e880d5d:0000000000000000:1"
time="2021-06-17T16:24:42Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=2eb794c62e880d5d:2eb794c62e880d5d:0000000000000000:1"
2021/06/17 16:24:42 Reporting span 2eb794c62e880d5d:3270867c121002d9:2eb794c62e880d5d:1
time="2021-06-17T16:24:42Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2eb794c62e880d5d:2eb794c62e880d5d:0000000000000000:1"
2021/06/17 16:24:42 Reporting span 2eb794c62e880d5d:2eb794c62e880d5d:0000000000000000:1
{"level":"info","ts":1623947082.011064,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947082.0111318,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947082.0111425,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947082.0111506,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:24:42Z" level=info msg="==--> discovery.FindNetworkService() span:2498b36f10b67155:2498b36f10b67155:0000000000000000:1"
time="2021-06-17T16:24:42Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2498b36f10b67155:2498b36f10b67155:0000000000000000:1"
time="2021-06-17T16:24:42Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=2498b36f10b67155:2498b36f10b67155:0000000000000000:1"
time="2021-06-17T16:24:42Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:24:42Z" level=info msg="==----> initRegistryClient() span:2498b36f10b67155:72380060e82d1364:2498b36f10b67155:1"
time="2021-06-17T16:24:42Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:24:42Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:24:42Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2498b36f10b67155:72380060e82d1364:2498b36f10b67155:1"
time="2021-06-17T16:24:42Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:24:42Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:24:42Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000886d40 {member1.com}:0xc000886dc0 {member2.com}:0xc000886cc0]}"
time="2021-06-17T16:24:42Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:24:42Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:24:42Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:24:42Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:24:42Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:24:42Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:24:42Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:24:42Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:24:42Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:24:42Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:24:47Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:24:47Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:24:52Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:24:52Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:24:57Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:24:57Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:24:57Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:25:12Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:25:12Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="2498b36f10b67155:72380060e82d1364:2498b36f10b67155:1"
2021/06/17 16:25:12 Reporting span 2498b36f10b67155:72380060e82d1364:2498b36f10b67155:1
2021/06/17 16:25:12 Reporting span 2498b36f10b67155:2498b36f10b67155:0000000000000000:1
{"level":"info","ts":1623947112.0119457,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623947112.012112,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623947112.0122085,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623947112.0122745,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:25:12Z" level=info msg="==--> discovery.FindNetworkService() span:07896e0d432c3a2a:07896e0d432c3a2a:0000000000000000:1"
time="2021-06-17T16:25:12Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=07896e0d432c3a2a:07896e0d432c3a2a:0000000000000000:1"
time="2021-06-17T16:25:12Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=07896e0d432c3a2a:07896e0d432c3a2a:0000000000000000:1"
time="2021-06-17T16:25:12Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:25:12Z" level=info msg="==----> initRegistryClient() span:07896e0d432c3a2a:679fb5c7fc756190:07896e0d432c3a2a:1"
time="2021-06-17T16:25:12Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:25:12Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:25:12Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="07896e0d432c3a2a:679fb5c7fc756190:07896e0d432c3a2a:1"
time="2021-06-17T16:25:12Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:25:12Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:25:12Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000183140 {member1.com}:0xc0001831c0 {member2.com}:0xc0001830c0]}"
time="2021-06-17T16:25:12Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:25:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:25:12Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:25:12Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:25:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:25:12Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:25:12Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:25:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:25:12Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:25:12Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:25:17Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:25:17Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:25:22Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:25:22Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:25:22Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:25:22Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:25:22Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="07896e0d432c3a2a:679fb5c7fc756190:07896e0d432c3a2a:1"
2021/06/17 16:25:22 Reporting span 07896e0d432c3a2a:679fb5c7fc756190:07896e0d432c3a2a:1
{"level":"info","ts":1623947122.0512552,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:25:22Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=07896e0d432c3a2a:07896e0d432c3a2a:0000000000000000:1"
time="2021-06-17T16:25:22Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=07896e0d432c3a2a:07896e0d432c3a2a:0000000000000000:1"
2021/06/17 16:25:22 Reporting span 07896e0d432c3a2a:0b3cd9c5f5fc6c51:07896e0d432c3a2a:1
time="2021-06-17T16:25:22Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=07896e0d432c3a2a:07896e0d432c3a2a:0000000000000000:1"
2021/06/17 16:25:22 Reporting span 07896e0d432c3a2a:07896e0d432c3a2a:0000000000000000:1
{"level":"info","ts":1623947122.061371,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947122.0615416,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947122.0615761,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947122.0616515,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:25:22Z" level=info msg="==--> discovery.FindNetworkService() span:6f8b0ec48e72c121:6f8b0ec48e72c121:0000000000000000:1"
time="2021-06-17T16:25:22Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6f8b0ec48e72c121:6f8b0ec48e72c121:0000000000000000:1"
time="2021-06-17T16:25:22Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=6f8b0ec48e72c121:6f8b0ec48e72c121:0000000000000000:1"
time="2021-06-17T16:25:22Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:25:22Z" level=info msg="==----> initRegistryClient() span:6f8b0ec48e72c121:06313cc53b0e33a1:6f8b0ec48e72c121:1"
time="2021-06-17T16:25:22Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:25:22Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:25:22Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6f8b0ec48e72c121:06313cc53b0e33a1:6f8b0ec48e72c121:1"
time="2021-06-17T16:25:22Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:25:22Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:25:22Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00080c380 {member1.com}:0xc00080c400 {member2.com}:0xc00080c300]}"
time="2021-06-17T16:25:22Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:25:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:25:22Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:25:22Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:25:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:25:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:25:22Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:25:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:25:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:25:22Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:25:27Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:25:27Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:25:32Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:25:32Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:25:37Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:25:37Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:25:37Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:25:52Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:25:52Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="6f8b0ec48e72c121:06313cc53b0e33a1:6f8b0ec48e72c121:1"
2021/06/17 16:25:52 Reporting span 6f8b0ec48e72c121:06313cc53b0e33a1:6f8b0ec48e72c121:1
2021/06/17 16:25:52 Reporting span 6f8b0ec48e72c121:6f8b0ec48e72c121:0000000000000000:1
{"level":"info","ts":1623947152.062461,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623947152.0627964,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623947152.0628312,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623947152.062841,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:25:52Z" level=info msg="==--> discovery.FindNetworkService() span:6013e82e1a8d2400:6013e82e1a8d2400:0000000000000000:1"
time="2021-06-17T16:25:52Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6013e82e1a8d2400:6013e82e1a8d2400:0000000000000000:1"
time="2021-06-17T16:25:52Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=6013e82e1a8d2400:6013e82e1a8d2400:0000000000000000:1"
time="2021-06-17T16:25:52Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:25:52Z" level=info msg="==----> initRegistryClient() span:6013e82e1a8d2400:418c754a5b7b4daf:6013e82e1a8d2400:1"
time="2021-06-17T16:25:52Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:25:52Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:25:52Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6013e82e1a8d2400:418c754a5b7b4daf:6013e82e1a8d2400:1"
time="2021-06-17T16:25:52Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:25:52Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:25:52Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000359540 {member1.com}:0xc0003595c0 {member2.com}:0xc0003594c0]}"
time="2021-06-17T16:25:52Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:25:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:25:52Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:25:52Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:25:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:25:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:25:52Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:25:52Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:25:52Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:25:52Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:25:57Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:25:57Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:02Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:26:02Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:02Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:02Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:02Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="6013e82e1a8d2400:418c754a5b7b4daf:6013e82e1a8d2400:1"
2021/06/17 16:26:02 Reporting span 6013e82e1a8d2400:418c754a5b7b4daf:6013e82e1a8d2400:1
{"level":"info","ts":1623947162.103509,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:26:02Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6013e82e1a8d2400:6013e82e1a8d2400:0000000000000000:1"
time="2021-06-17T16:26:02Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=6013e82e1a8d2400:6013e82e1a8d2400:0000000000000000:1"
2021/06/17 16:26:02 Reporting span 6013e82e1a8d2400:2e77d152690d0a39:6013e82e1a8d2400:1
time="2021-06-17T16:26:02Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6013e82e1a8d2400:6013e82e1a8d2400:0000000000000000:1"
2021/06/17 16:26:02 Reporting span 6013e82e1a8d2400:6013e82e1a8d2400:0000000000000000:1
{"level":"info","ts":1623947162.1109097,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947162.110997,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947162.111037,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947162.1110723,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:26:02Z" level=info msg="==--> discovery.FindNetworkService() span:7515860e08d8cb77:7515860e08d8cb77:0000000000000000:1"
time="2021-06-17T16:26:02Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7515860e08d8cb77:7515860e08d8cb77:0000000000000000:1"
time="2021-06-17T16:26:02Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=7515860e08d8cb77:7515860e08d8cb77:0000000000000000:1"
time="2021-06-17T16:26:02Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:26:02Z" level=info msg="==----> initRegistryClient() span:7515860e08d8cb77:67567e5e18d8158d:7515860e08d8cb77:1"
time="2021-06-17T16:26:02Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:26:22Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:26:22Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7515860e08d8cb77:67567e5e18d8158d:7515860e08d8cb77:1"
time="2021-06-17T16:26:22Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:26:22Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:26:22Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000887300 {member1.com}:0xc000887380 {member2.com}:0xc000887280]}"
time="2021-06-17T16:26:22Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:26:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:26:22Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:26:22Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:26:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:26:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:26:22Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:26:22Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:26:22Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:26:22Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:27Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:26:27Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
{"level":"info","ts":1623947191.8483677,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623947191.848527,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T16:26:32Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:26:32Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:37Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:26:37Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:26:37Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:26:37Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:26:37Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="7515860e08d8cb77:67567e5e18d8158d:7515860e08d8cb77:1"
2021/06/17 16:26:37 Reporting span 7515860e08d8cb77:67567e5e18d8158d:7515860e08d8cb77:1
2021/06/17 16:26:37 Reporting span 7515860e08d8cb77:7515860e08d8cb77:0000000000000000:1
{"level":"info","ts":1623947197.135535,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623947197.1355963,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623947197.135609,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623947197.1356194,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:26:37Z" level=info msg="==--> discovery.FindNetworkService() span:4523a54c0df1e621:4523a54c0df1e621:0000000000000000:1"
time="2021-06-17T16:26:37Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=4523a54c0df1e621:4523a54c0df1e621:0000000000000000:1"
time="2021-06-17T16:26:37Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=4523a54c0df1e621:4523a54c0df1e621:0000000000000000:1"
time="2021-06-17T16:26:37Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:26:37Z" level=info msg="==----> initRegistryClient() span:4523a54c0df1e621:3d917564c483bbc5:4523a54c0df1e621:1"
time="2021-06-17T16:26:37Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:26:37Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:26:37Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4523a54c0df1e621:3d917564c483bbc5:4523a54c0df1e621:1"
time="2021-06-17T16:26:37Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:26:37Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:26:37Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000136700 {member1.com}:0xc000136780 {member2.com}:0xc0001365c0]}"
time="2021-06-17T16:26:37Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:26:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:26:37Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:26:37Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:26:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:26:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:26:37Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:26:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:26:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:26:37Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:42Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:26:42Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:47Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:26:47Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:47Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:47Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:47Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="4523a54c0df1e621:3d917564c483bbc5:4523a54c0df1e621:1"
2021/06/17 16:26:47 Reporting span 4523a54c0df1e621:3d917564c483bbc5:4523a54c0df1e621:1
{"level":"info","ts":1623947207.1682377,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:26:47Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=4523a54c0df1e621:4523a54c0df1e621:0000000000000000:1"
time="2021-06-17T16:26:47Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=4523a54c0df1e621:4523a54c0df1e621:0000000000000000:1"
2021/06/17 16:26:47 Reporting span 4523a54c0df1e621:7370256b064e03e2:4523a54c0df1e621:1
time="2021-06-17T16:26:47Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=4523a54c0df1e621:4523a54c0df1e621:0000000000000000:1"
2021/06/17 16:26:47 Reporting span 4523a54c0df1e621:4523a54c0df1e621:0000000000000000:1
{"level":"info","ts":1623947207.1752048,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947207.175234,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947207.175246,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947207.1752567,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:26:47Z" level=info msg="==--> discovery.FindNetworkService() span:468dd43023f3fbf7:468dd43023f3fbf7:0000000000000000:1"
time="2021-06-17T16:26:47Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=468dd43023f3fbf7:468dd43023f3fbf7:0000000000000000:1"
time="2021-06-17T16:26:47Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=468dd43023f3fbf7:468dd43023f3fbf7:0000000000000000:1"
time="2021-06-17T16:26:47Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:26:47Z" level=info msg="==----> initRegistryClient() span:468dd43023f3fbf7:1bcb809984bd83a7:468dd43023f3fbf7:1"
time="2021-06-17T16:26:47Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:26:47Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:26:47Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="468dd43023f3fbf7:1bcb809984bd83a7:468dd43023f3fbf7:1"
time="2021-06-17T16:26:47Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:26:47Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:26:47Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000ba240 {member1.com}:0xc0000ba400 {member2.com}:0xc0000ba1c0]}"
time="2021-06-17T16:26:47Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:26:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:26:47Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:26:47Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:26:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:26:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:26:47Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:26:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:26:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:26:47Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:47Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:47Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:47Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="468dd43023f3fbf7:1bcb809984bd83a7:468dd43023f3fbf7:1"
2021/06/17 16:26:47 Reporting span 468dd43023f3fbf7:1bcb809984bd83a7:468dd43023f3fbf7:1
{"level":"info","ts":1623947207.2220774,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:26:47Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=468dd43023f3fbf7:468dd43023f3fbf7:0000000000000000:1"
time="2021-06-17T16:26:47Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=468dd43023f3fbf7:468dd43023f3fbf7:0000000000000000:1"
2021/06/17 16:26:47 Reporting span 468dd43023f3fbf7:5ab5cebcc1b1442f:468dd43023f3fbf7:1
time="2021-06-17T16:26:47Z" level=info msg=">><<---- response={} span=468dd43023f3fbf7:468dd43023f3fbf7:0000000000000000:1"
2021/06/17 16:26:47 Reporting span 468dd43023f3fbf7:468dd43023f3fbf7:0000000000000000:1
{"level":"info","ts":1623947207.2258756,"caller":"nseinformer/nseInformerController.go:195","msg":"No endpoints in the global NSR for network-service: green","app":"nse-discovery"}
{"level":"info","ts":1623947207.2260225,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 0 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623947207.2261283,"caller":"nseinformer/nseInformerController.go:338","msg":"NSE diff: For cluster member2, found diff endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947207.2261493,"caller":"nseinformer/nseInformerController.go:338","msg":"NSE diff: For cluster member2, found diff endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947207.2261615,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947207.2261708,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947207.2262907,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 2 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
time="2021-06-17T16:26:47Z" level=info msg="Requesting NseRegistryClient..."
time="2021-06-17T16:26:47Z" level=info msg="==--> initRegistryClient() span:5fa3cc1a1a3fde41:5fa3cc1a1a3fde41:0000000000000000:1"
time="2021-06-17T16:26:47Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:26:47Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:26:47Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5fa3cc1a1a3fde41:5fa3cc1a1a3fde41:0000000000000000:1"
time="2021-06-17T16:26:47Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:26:47Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:26:47Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00080cf80 {member1.com}:0xc00080d000 {member2.com}:0xc00080cf00]}"
time="2021-06-17T16:26:47Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:26:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:26:47Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:26:47Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:26:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:26:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:26:47Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:26:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:26:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:26:47Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:47Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:47Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:47Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="5fa3cc1a1a3fde41:5fa3cc1a1a3fde41:0000000000000000:1"
2021/06/17 16:26:47 Reporting span 5fa3cc1a1a3fde41:5fa3cc1a1a3fde41:0000000000000000:1
time="2021-06-17T16:26:47Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-06-17T16:26:47Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/06/17 16:26:47 Reporting span 1bdb4752c3418df0:1bdb4752c3418df0:0000000000000000:1
time="2021-06-17T16:26:47Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623950807},\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-06-17T16:26:47Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-06-17T16:26:47Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/06/17 16:26:47 Reporting span 52ff48f79ed2adf8:52ff48f79ed2adf8:0000000000000000:1
time="2021-06-17T16:26:47Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623950807},\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1623947207.291451,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623947207.291609,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623947207.2916453,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623947207.2916584,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:26:47Z" level=info msg="==--> discovery.FindNetworkService() span:35f911d661ed5e35:35f911d661ed5e35:0000000000000000:1"
time="2021-06-17T16:26:47Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=35f911d661ed5e35:35f911d661ed5e35:0000000000000000:1"
time="2021-06-17T16:26:47Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=35f911d661ed5e35:35f911d661ed5e35:0000000000000000:1"
time="2021-06-17T16:26:47Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:26:47Z" level=info msg="==----> initRegistryClient() span:35f911d661ed5e35:7fc3faabfadb9fd4:35f911d661ed5e35:1"
time="2021-06-17T16:26:47Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:26:47Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:26:47Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="35f911d661ed5e35:7fc3faabfadb9fd4:35f911d661ed5e35:1"
time="2021-06-17T16:26:47Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:26:47Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:26:47Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000183740 {member1.com}:0xc0001836c0 {member2.com}:0xc0001831c0]}"
time="2021-06-17T16:26:47Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:26:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:26:47Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:26:47Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:26:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:26:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:26:47Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:26:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:26:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:26:47Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:52Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:26:52Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:57Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:26:57Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:57Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:57Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:57Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="35f911d661ed5e35:7fc3faabfadb9fd4:35f911d661ed5e35:1"
2021/06/17 16:26:57 Reporting span 35f911d661ed5e35:7fc3faabfadb9fd4:35f911d661ed5e35:1
{"level":"info","ts":1623947217.3275454,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:26:57Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=35f911d661ed5e35:35f911d661ed5e35:0000000000000000:1"
time="2021-06-17T16:26:57Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=35f911d661ed5e35:35f911d661ed5e35:0000000000000000:1"
2021/06/17 16:26:57 Reporting span 35f911d661ed5e35:31e7d23471320a4a:35f911d661ed5e35:1
time="2021-06-17T16:26:57Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=35f911d661ed5e35:35f911d661ed5e35:0000000000000000:1"
2021/06/17 16:26:57 Reporting span 35f911d661ed5e35:35f911d661ed5e35:0000000000000000:1
{"level":"info","ts":1623947217.332979,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947217.3330507,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947217.3331118,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947217.3331757,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:26:57Z" level=info msg="==--> discovery.FindNetworkService() span:66c661ee9a36dacc:66c661ee9a36dacc:0000000000000000:1"
time="2021-06-17T16:26:57Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=66c661ee9a36dacc:66c661ee9a36dacc:0000000000000000:1"
time="2021-06-17T16:26:57Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=66c661ee9a36dacc:66c661ee9a36dacc:0000000000000000:1"
time="2021-06-17T16:26:57Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:26:57Z" level=info msg="==----> initRegistryClient() span:66c661ee9a36dacc:067d7d947d17855b:66c661ee9a36dacc:1"
time="2021-06-17T16:26:57Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:26:57Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:26:57Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="66c661ee9a36dacc:067d7d947d17855b:66c661ee9a36dacc:1"
time="2021-06-17T16:26:57Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:26:57Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:26:57Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0004efc40 {member1.com}:0xc0004efcc0 {member2.com}:0xc0004ef980]}"
time="2021-06-17T16:26:57Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:26:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:26:57Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:26:57Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:26:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:26:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:26:57Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:26:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:26:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:26:57Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:57Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:57Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:26:57Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="66c661ee9a36dacc:067d7d947d17855b:66c661ee9a36dacc:1"
2021/06/17 16:26:57 Reporting span 66c661ee9a36dacc:067d7d947d17855b:66c661ee9a36dacc:1
{"level":"info","ts":1623947217.373067,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:26:57Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=66c661ee9a36dacc:66c661ee9a36dacc:0000000000000000:1"
time="2021-06-17T16:26:57Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=66c661ee9a36dacc:66c661ee9a36dacc:0000000000000000:1"
2021/06/17 16:26:57 Reporting span 66c661ee9a36dacc:67490c85ed6b8e74:66c661ee9a36dacc:1
time="2021-06-17T16:26:57Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623950807},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=66c661ee9a36dacc:66c661ee9a36dacc:0000000000000000:1"
2021/06/17 16:26:57 Reporting span 66c661ee9a36dacc:66c661ee9a36dacc:0000000000000000:1
{"level":"info","ts":1623947217.375569,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947217.3755984,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947217.3756094,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 2 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623947217.3756227,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947217.3756735,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947217.3757088,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947217.375768,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947217.3757825,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947217.3757915,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947217.375802,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947217.3758113,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947217.3758204,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623947217.3758285,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623947217.3758361,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623947311.8488407,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623947311.849095,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623947311.849151,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623947311.8491592,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623947311.8491669,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:28:31Z" level=info msg="==--> discovery.FindNetworkService() span:70760e5a07245146:70760e5a07245146:0000000000000000:1"
time="2021-06-17T16:28:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=70760e5a07245146:70760e5a07245146:0000000000000000:1"
time="2021-06-17T16:28:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=70760e5a07245146:70760e5a07245146:0000000000000000:1"
time="2021-06-17T16:28:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:28:31Z" level=info msg="==----> initRegistryClient() span:70760e5a07245146:0bded3c43544b69f:70760e5a07245146:1"
time="2021-06-17T16:28:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:28:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:28:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="70760e5a07245146:0bded3c43544b69f:70760e5a07245146:1"
time="2021-06-17T16:28:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:28:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:28:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00080d5c0 {member1.com}:0xc00080d640 {member2.com}:0xc00080d540]}"
time="2021-06-17T16:28:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:28:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:28:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:28:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:28:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:28:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:28:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:28:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:28:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:28:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:28:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:28:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:28:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:28:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:28:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:28:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:28:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="70760e5a07245146:0bded3c43544b69f:70760e5a07245146:1"
2021/06/17 16:28:41 Reporting span 70760e5a07245146:0bded3c43544b69f:70760e5a07245146:1
{"level":"info","ts":1623947321.8795815,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:28:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=70760e5a07245146:70760e5a07245146:0000000000000000:1"
time="2021-06-17T16:28:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=70760e5a07245146:70760e5a07245146:0000000000000000:1"
2021/06/17 16:28:41 Reporting span 70760e5a07245146:3667e3cdbe2014d9:70760e5a07245146:1
time="2021-06-17T16:28:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=70760e5a07245146:70760e5a07245146:0000000000000000:1"
2021/06/17 16:28:41 Reporting span 70760e5a07245146:70760e5a07245146:0000000000000000:1
{"level":"info","ts":1623947321.8850493,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947321.885097,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947321.8851097,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947321.8851216,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:28:41Z" level=info msg="==--> discovery.FindNetworkService() span:55a829f07351da29:55a829f07351da29:0000000000000000:1"
time="2021-06-17T16:28:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=55a829f07351da29:55a829f07351da29:0000000000000000:1"
time="2021-06-17T16:28:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=55a829f07351da29:55a829f07351da29:0000000000000000:1"
time="2021-06-17T16:28:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:28:41Z" level=info msg="==----> initRegistryClient() span:55a829f07351da29:5be68bf2e35944a6:55a829f07351da29:1"
time="2021-06-17T16:28:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:28:51Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:28:51Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="55a829f07351da29:5be68bf2e35944a6:55a829f07351da29:1"
time="2021-06-17T16:28:51Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:28:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:28:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000bb2c0 {member1.com}:0xc0000bb340 {member2.com}:0xc0000bb240]}"
time="2021-06-17T16:28:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:28:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:28:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:28:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:28:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:28:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:28:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:28:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:28:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:28:51Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:28:51Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:28:51Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:28:51Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="55a829f07351da29:5be68bf2e35944a6:55a829f07351da29:1"
2021/06/17 16:28:51 Reporting span 55a829f07351da29:5be68bf2e35944a6:55a829f07351da29:1
{"level":"info","ts":1623947331.9282303,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:28:51Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=55a829f07351da29:55a829f07351da29:0000000000000000:1"
time="2021-06-17T16:28:51Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=55a829f07351da29:55a829f07351da29:0000000000000000:1"
2021/06/17 16:28:51 Reporting span 55a829f07351da29:79eeb3f33fd46b65:55a829f07351da29:1
time="2021-06-17T16:28:51Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623950855},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623950807},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=55a829f07351da29:55a829f07351da29:0000000000000000:1"
2021/06/17 16:28:51 Reporting span 55a829f07351da29:55a829f07351da29:0000000000000000:1
{"level":"info","ts":1623947331.930582,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947331.9306104,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947331.930641,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623947331.9306526,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623947331.930684,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623947331.9306998,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947331.9307303,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947331.930741,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623947331.9307487,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623947331.9307585,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947331.9307673,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947331.930775,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947331.9307845,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947331.930792,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947331.9308221,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947331.9308324,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623947331.930841,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623947331.930851,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623947331.9308867,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623947331.9308975,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623947331.9309127,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623947331.930922,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623947331.9309497,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:28:51Z" level=info msg="==--> discovery.FindNetworkService() span:06382bb3ac91fe09:06382bb3ac91fe09:0000000000000000:1"
time="2021-06-17T16:28:51Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=06382bb3ac91fe09:06382bb3ac91fe09:0000000000000000:1"
time="2021-06-17T16:28:51Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=06382bb3ac91fe09:06382bb3ac91fe09:0000000000000000:1"
time="2021-06-17T16:28:51Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:28:51Z" level=info msg="==----> initRegistryClient() span:06382bb3ac91fe09:127cef3b2f58dfdb:06382bb3ac91fe09:1"
time="2021-06-17T16:28:51Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:28:51Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:28:51Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="06382bb3ac91fe09:127cef3b2f58dfdb:06382bb3ac91fe09:1"
time="2021-06-17T16:28:51Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:28:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:28:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00057c200 {member1.com}:0xc00057c280 {member2.com}:0xc00057c180]}"
time="2021-06-17T16:28:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:28:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:28:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:28:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:28:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:28:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:28:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:28:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:28:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:28:51Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:28:56Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:28:56Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:29:01Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:29:01Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:29:01Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:29:01Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:29:01Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="06382bb3ac91fe09:127cef3b2f58dfdb:06382bb3ac91fe09:1"
2021/06/17 16:29:01 Reporting span 06382bb3ac91fe09:127cef3b2f58dfdb:06382bb3ac91fe09:1
{"level":"info","ts":1623947341.9715846,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:29:01Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=06382bb3ac91fe09:06382bb3ac91fe09:0000000000000000:1"
time="2021-06-17T16:29:01Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=06382bb3ac91fe09:06382bb3ac91fe09:0000000000000000:1"
2021/06/17 16:29:01 Reporting span 06382bb3ac91fe09:2b675f42bb8465ca:06382bb3ac91fe09:1
time="2021-06-17T16:29:01Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=06382bb3ac91fe09:06382bb3ac91fe09:0000000000000000:1"
2021/06/17 16:29:01 Reporting span 06382bb3ac91fe09:06382bb3ac91fe09:0000000000000000:1
{"level":"info","ts":1623947341.9773216,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947341.9773545,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947341.9773643,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947341.9773755,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:29:01Z" level=info msg="==--> discovery.FindNetworkService() span:248399e20a150ea2:248399e20a150ea2:0000000000000000:1"
time="2021-06-17T16:29:01Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=248399e20a150ea2:248399e20a150ea2:0000000000000000:1"
time="2021-06-17T16:29:01Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=248399e20a150ea2:248399e20a150ea2:0000000000000000:1"
time="2021-06-17T16:29:01Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:29:01Z" level=info msg="==----> initRegistryClient() span:248399e20a150ea2:13f548512d32be81:248399e20a150ea2:1"
time="2021-06-17T16:29:01Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:29:01Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:29:01Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="248399e20a150ea2:13f548512d32be81:248399e20a150ea2:1"
time="2021-06-17T16:29:01Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:29:01Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:29:01Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00057cf80 {member1.com}:0xc00057d000 {member2.com}:0xc00057cf00]}"
time="2021-06-17T16:29:01Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:29:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:29:01Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:29:01Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:29:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:29:01Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:29:01Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:29:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:29:01Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:29:01Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:29:02Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:29:02Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:29:02Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="248399e20a150ea2:13f548512d32be81:248399e20a150ea2:1"
2021/06/17 16:29:02 Reporting span 248399e20a150ea2:13f548512d32be81:248399e20a150ea2:1
{"level":"info","ts":1623947342.0218468,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:29:02Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=248399e20a150ea2:248399e20a150ea2:0000000000000000:1"
time="2021-06-17T16:29:02Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=248399e20a150ea2:248399e20a150ea2:0000000000000000:1"
2021/06/17 16:29:02 Reporting span 248399e20a150ea2:64311ff286f2710b:248399e20a150ea2:1
time="2021-06-17T16:29:02Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623950855},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623950807},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=248399e20a150ea2:248399e20a150ea2:0000000000000000:1"
2021/06/17 16:29:02 Reporting span 248399e20a150ea2:248399e20a150ea2:0000000000000000:1
{"level":"info","ts":1623947342.025797,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947342.0258307,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947342.0279815,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623947342.0280123,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623947342.0280201,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623947342.0280612,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947342.0280745,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947342.028085,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623947342.028091,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623947342.0280976,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947342.0281034,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947342.0281098,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947342.0281165,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947342.0281243,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947342.0281513,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947342.0281613,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623947342.0281696,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623947342.0281775,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623947342.0281854,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623947342.0281937,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623947431.8493624,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623947431.8494694,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623947431.8495102,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623947431.8495243,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947431.849519,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T16:30:31Z" level=info msg="==--> discovery.FindNetworkService() span:48702f8e9e9086fc:48702f8e9e9086fc:0000000000000000:1"
time="2021-06-17T16:30:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=48702f8e9e9086fc:48702f8e9e9086fc:0000000000000000:1"
time="2021-06-17T16:30:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=48702f8e9e9086fc:48702f8e9e9086fc:0000000000000000:1"
time="2021-06-17T16:30:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:30:31Z" level=info msg="==----> initRegistryClient() span:48702f8e9e9086fc:66816bddfd0ffef3:48702f8e9e9086fc:1"
time="2021-06-17T16:30:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:30:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:30:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="48702f8e9e9086fc:66816bddfd0ffef3:48702f8e9e9086fc:1"
time="2021-06-17T16:30:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:30:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:30:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000182900 {member1.com}:0xc000182800 {member2.com}:0xc000182780]}"
time="2021-06-17T16:30:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:30:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:30:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:30:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:30:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:30:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:30:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:30:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:30:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:30:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:30:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:30:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:30:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:30:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:30:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:30:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:30:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="48702f8e9e9086fc:66816bddfd0ffef3:48702f8e9e9086fc:1"
2021/06/17 16:30:41 Reporting span 48702f8e9e9086fc:66816bddfd0ffef3:48702f8e9e9086fc:1
{"level":"info","ts":1623947441.8780222,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:30:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=48702f8e9e9086fc:48702f8e9e9086fc:0000000000000000:1"
time="2021-06-17T16:30:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=48702f8e9e9086fc:48702f8e9e9086fc:0000000000000000:1"
2021/06/17 16:30:41 Reporting span 48702f8e9e9086fc:4135bc9e78394848:48702f8e9e9086fc:1
time="2021-06-17T16:30:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=48702f8e9e9086fc:48702f8e9e9086fc:0000000000000000:1"
2021/06/17 16:30:41 Reporting span 48702f8e9e9086fc:48702f8e9e9086fc:0000000000000000:1
{"level":"info","ts":1623947441.8839755,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947441.8841288,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947441.8841643,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947441.884178,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:30:41Z" level=info msg="==--> discovery.FindNetworkService() span:3878a004925e1c5d:3878a004925e1c5d:0000000000000000:1"
time="2021-06-17T16:30:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3878a004925e1c5d:3878a004925e1c5d:0000000000000000:1"
time="2021-06-17T16:30:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=3878a004925e1c5d:3878a004925e1c5d:0000000000000000:1"
time="2021-06-17T16:30:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:30:41Z" level=info msg="==----> initRegistryClient() span:3878a004925e1c5d:33f1e77f5eefa6d3:3878a004925e1c5d:1"
time="2021-06-17T16:30:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:30:51Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:30:51Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3878a004925e1c5d:33f1e77f5eefa6d3:3878a004925e1c5d:1"
time="2021-06-17T16:30:51Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:30:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:30:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000bad00 {member1.com}:0xc0000bad80 {member2.com}:0xc0000bab00]}"
time="2021-06-17T16:30:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:30:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:30:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:30:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:30:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:30:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:30:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:30:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:30:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:30:51Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:30:56Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:30:56Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:31:01Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:31:01Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:31:06Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:31:06Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:31:06Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:31:11Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:31:11Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="3878a004925e1c5d:33f1e77f5eefa6d3:3878a004925e1c5d:1"
2021/06/17 16:31:11 Reporting span 3878a004925e1c5d:33f1e77f5eefa6d3:3878a004925e1c5d:1
2021/06/17 16:31:11 Reporting span 3878a004925e1c5d:3878a004925e1c5d:0000000000000000:1
{"level":"info","ts":1623947471.8851852,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623947471.8853776,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623947471.8854628,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623947471.885598,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:31:11Z" level=info msg="==--> discovery.FindNetworkService() span:06a766d58a3a0c84:06a766d58a3a0c84:0000000000000000:1"
time="2021-06-17T16:31:11Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=06a766d58a3a0c84:06a766d58a3a0c84:0000000000000000:1"
time="2021-06-17T16:31:11Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=06a766d58a3a0c84:06a766d58a3a0c84:0000000000000000:1"
time="2021-06-17T16:31:11Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:31:11Z" level=info msg="==----> initRegistryClient() span:06a766d58a3a0c84:38da1e5c4172739a:06a766d58a3a0c84:1"
time="2021-06-17T16:31:11Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:31:11Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:31:11Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="06a766d58a3a0c84:38da1e5c4172739a:06a766d58a3a0c84:1"
time="2021-06-17T16:31:11Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:31:11Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:31:11Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00080cbc0 {member1.com}:0xc00080cc40 {member2.com}:0xc00080cb40]}"
time="2021-06-17T16:31:11Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:31:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:31:11Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:31:11Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:31:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:31:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:31:11Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:31:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:31:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:31:11Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:31:16Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:31:16Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:31:21Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:31:21Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:31:21Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:31:21Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:31:21Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="06a766d58a3a0c84:38da1e5c4172739a:06a766d58a3a0c84:1"
2021/06/17 16:31:21 Reporting span 06a766d58a3a0c84:38da1e5c4172739a:06a766d58a3a0c84:1
{"level":"info","ts":1623947481.9146981,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:31:21Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=06a766d58a3a0c84:06a766d58a3a0c84:0000000000000000:1"
time="2021-06-17T16:31:21Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=06a766d58a3a0c84:06a766d58a3a0c84:0000000000000000:1"
2021/06/17 16:31:21 Reporting span 06a766d58a3a0c84:61591e4572eb7cfb:06a766d58a3a0c84:1
time="2021-06-17T16:31:21Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=06a766d58a3a0c84:06a766d58a3a0c84:0000000000000000:1"
2021/06/17 16:31:21 Reporting span 06a766d58a3a0c84:06a766d58a3a0c84:0000000000000000:1
{"level":"info","ts":1623947481.9201844,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947481.9202194,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947481.9202542,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947481.920305,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:31:21Z" level=info msg="==--> discovery.FindNetworkService() span:2d6c81dd69571701:2d6c81dd69571701:0000000000000000:1"
time="2021-06-17T16:31:21Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2d6c81dd69571701:2d6c81dd69571701:0000000000000000:1"
time="2021-06-17T16:31:21Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=2d6c81dd69571701:2d6c81dd69571701:0000000000000000:1"
time="2021-06-17T16:31:21Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:31:21Z" level=info msg="==----> initRegistryClient() span:2d6c81dd69571701:7a7e6a3466b0a0c6:2d6c81dd69571701:1"
time="2021-06-17T16:31:21Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:31:41Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:31:41Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2d6c81dd69571701:7a7e6a3466b0a0c6:2d6c81dd69571701:1"
time="2021-06-17T16:31:41Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:31:41Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:31:41Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00080c280 {member1.com}:0xc00080c300 {member2.com}:0xc00080c200]}"
time="2021-06-17T16:31:41Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:31:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:31:41Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:31:41Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:31:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:31:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:31:41Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:31:41Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:31:41Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:31:41Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:31:46Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:31:46Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:31:51Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:31:51Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:31:56Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:31:56Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:31:56Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:31:56Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:31:56Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="2d6c81dd69571701:7a7e6a3466b0a0c6:2d6c81dd69571701:1"
2021/06/17 16:31:56 Reporting span 2d6c81dd69571701:7a7e6a3466b0a0c6:2d6c81dd69571701:1
2021/06/17 16:31:56 Reporting span 2d6c81dd69571701:2d6c81dd69571701:0000000000000000:1
{"level":"info","ts":1623947516.9383187,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623947516.9383998,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623947516.9384084,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623947516.9384162,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:31:56Z" level=info msg="==--> discovery.FindNetworkService() span:1f68003f5d7d8df4:1f68003f5d7d8df4:0000000000000000:1"
time="2021-06-17T16:31:56Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1f68003f5d7d8df4:1f68003f5d7d8df4:0000000000000000:1"
time="2021-06-17T16:31:56Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=1f68003f5d7d8df4:1f68003f5d7d8df4:0000000000000000:1"
time="2021-06-17T16:31:56Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:31:56Z" level=info msg="==----> initRegistryClient() span:1f68003f5d7d8df4:1c53f1ed1d13534b:1f68003f5d7d8df4:1"
time="2021-06-17T16:31:56Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:31:56Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:31:56Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1f68003f5d7d8df4:1c53f1ed1d13534b:1f68003f5d7d8df4:1"
time="2021-06-17T16:31:56Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:31:56Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:31:56Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000bb340 {member1.com}:0xc0000bb3c0 {member2.com}:0xc0000bb2c0]}"
time="2021-06-17T16:31:56Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:31:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:31:56Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:31:56Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:31:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:31:56Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:31:56Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:31:56Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:31:56Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:31:56Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:32:01Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:32:01Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:32:06Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:32:06Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:32:06Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:32:06Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:32:06Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="1f68003f5d7d8df4:1c53f1ed1d13534b:1f68003f5d7d8df4:1"
2021/06/17 16:32:06 Reporting span 1f68003f5d7d8df4:1c53f1ed1d13534b:1f68003f5d7d8df4:1
{"level":"info","ts":1623947526.970073,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:32:06Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1f68003f5d7d8df4:1f68003f5d7d8df4:0000000000000000:1"
time="2021-06-17T16:32:06Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=1f68003f5d7d8df4:1f68003f5d7d8df4:0000000000000000:1"
2021/06/17 16:32:06 Reporting span 1f68003f5d7d8df4:32c33fa9163d613a:1f68003f5d7d8df4:1
time="2021-06-17T16:32:06Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1f68003f5d7d8df4:1f68003f5d7d8df4:0000000000000000:1"
2021/06/17 16:32:06 Reporting span 1f68003f5d7d8df4:1f68003f5d7d8df4:0000000000000000:1
{"level":"info","ts":1623947526.9753458,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947526.9753933,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947526.975407,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947526.9754174,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:32:06Z" level=info msg="==--> discovery.FindNetworkService() span:3b3ef9a9b14eeac9:3b3ef9a9b14eeac9:0000000000000000:1"
time="2021-06-17T16:32:06Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3b3ef9a9b14eeac9:3b3ef9a9b14eeac9:0000000000000000:1"
time="2021-06-17T16:32:06Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=3b3ef9a9b14eeac9:3b3ef9a9b14eeac9:0000000000000000:1"
time="2021-06-17T16:32:06Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:32:06Z" level=info msg="==----> initRegistryClient() span:3b3ef9a9b14eeac9:2fa72a51b5081d6a:3b3ef9a9b14eeac9:1"
time="2021-06-17T16:32:06Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:32:16Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:32:16Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3b3ef9a9b14eeac9:2fa72a51b5081d6a:3b3ef9a9b14eeac9:1"
time="2021-06-17T16:32:16Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:32:16Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:32:16Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000358100 {member1.com}:0xc000358180 {member2.com}:0xc000358080]}"
time="2021-06-17T16:32:16Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:32:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:32:16Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:32:16Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:32:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:32:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:32:16Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:32:16Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:32:16Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:32:16Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:32:17Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:32:17Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:32:17Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="3b3ef9a9b14eeac9:2fa72a51b5081d6a:3b3ef9a9b14eeac9:1"
2021/06/17 16:32:17 Reporting span 3b3ef9a9b14eeac9:2fa72a51b5081d6a:3b3ef9a9b14eeac9:1
{"level":"info","ts":1623947537.0128872,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:32:17Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=3b3ef9a9b14eeac9:3b3ef9a9b14eeac9:0000000000000000:1"
time="2021-06-17T16:32:17Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=3b3ef9a9b14eeac9:3b3ef9a9b14eeac9:0000000000000000:1"
2021/06/17 16:32:17 Reporting span 3b3ef9a9b14eeac9:4bbe613d1b4bff00:3b3ef9a9b14eeac9:1
time="2021-06-17T16:32:17Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623950855},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623950807},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=3b3ef9a9b14eeac9:3b3ef9a9b14eeac9:0000000000000000:1"
2021/06/17 16:32:17 Reporting span 3b3ef9a9b14eeac9:3b3ef9a9b14eeac9:0000000000000000:1
{"level":"info","ts":1623947537.015695,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947537.0157526,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947537.0160997,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623947537.0161378,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623947537.0161507,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623947537.0161633,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947537.016172,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947537.0161815,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623947537.0161893,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623947537.016196,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947537.016202,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947537.0162117,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947537.016244,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947537.016255,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947537.0162797,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947537.016291,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623947537.0163138,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623947537.016336,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623947537.0163455,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623947537.0163698,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623947537.0163872,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623947537.0163965,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623947537.0164063,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:32:17Z" level=info msg="==--> discovery.FindNetworkService() span:1d2bf493b649d8a5:1d2bf493b649d8a5:0000000000000000:1"
time="2021-06-17T16:32:17Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1d2bf493b649d8a5:1d2bf493b649d8a5:0000000000000000:1"
time="2021-06-17T16:32:17Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=1d2bf493b649d8a5:1d2bf493b649d8a5:0000000000000000:1"
time="2021-06-17T16:32:17Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:32:17Z" level=info msg="==----> initRegistryClient() span:1d2bf493b649d8a5:79a9bbee13939b97:1d2bf493b649d8a5:1"
time="2021-06-17T16:32:17Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:32:17Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:32:17Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1d2bf493b649d8a5:79a9bbee13939b97:1d2bf493b649d8a5:1"
time="2021-06-17T16:32:17Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:32:17Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:32:17Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000136e80 {member1.com}:0xc000136f00 {member2.com}:0xc000136e00]}"
time="2021-06-17T16:32:17Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:32:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:32:17Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:32:17Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:32:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:32:17Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:32:17Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:32:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:32:17Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:32:17Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:32:22Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:32:22Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:32:27Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:32:27Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:32:27Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:32:27Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:32:27Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="1d2bf493b649d8a5:79a9bbee13939b97:1d2bf493b649d8a5:1"
2021/06/17 16:32:27 Reporting span 1d2bf493b649d8a5:79a9bbee13939b97:1d2bf493b649d8a5:1
{"level":"info","ts":1623947547.0477867,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:32:27Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1d2bf493b649d8a5:1d2bf493b649d8a5:0000000000000000:1"
time="2021-06-17T16:32:27Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=1d2bf493b649d8a5:1d2bf493b649d8a5:0000000000000000:1"
2021/06/17 16:32:27 Reporting span 1d2bf493b649d8a5:4f504ecb425fea18:1d2bf493b649d8a5:1
time="2021-06-17T16:32:27Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1d2bf493b649d8a5:1d2bf493b649d8a5:0000000000000000:1"
2021/06/17 16:32:27 Reporting span 1d2bf493b649d8a5:1d2bf493b649d8a5:0000000000000000:1
{"level":"info","ts":1623947547.0536819,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947547.0537193,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947547.0537322,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947547.0537596,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:32:27Z" level=info msg="==--> discovery.FindNetworkService() span:6b80fbc6b05b3931:6b80fbc6b05b3931:0000000000000000:1"
time="2021-06-17T16:32:27Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6b80fbc6b05b3931:6b80fbc6b05b3931:0000000000000000:1"
time="2021-06-17T16:32:27Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=6b80fbc6b05b3931:6b80fbc6b05b3931:0000000000000000:1"
time="2021-06-17T16:32:27Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:32:27Z" level=info msg="==----> initRegistryClient() span:6b80fbc6b05b3931:113e4fb48bd20dcd:6b80fbc6b05b3931:1"
time="2021-06-17T16:32:27Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
{"level":"info","ts":1623947551.8498096,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623947551.8499575,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T16:32:37Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:32:37Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6b80fbc6b05b3931:113e4fb48bd20dcd:6b80fbc6b05b3931:1"
time="2021-06-17T16:32:37Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:32:37Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:32:37Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0007f0300 {member1.com}:0xc0007f0280 {member2.com}:0xc0007f0200]}"
time="2021-06-17T16:32:37Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:32:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:32:37Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:32:37Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:32:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:32:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:32:37Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:32:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:32:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:32:37Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:32:42Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:32:42Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:32:47Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:32:47Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:32:52Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:32:52Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:32:52Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:32:57Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:32:57Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="6b80fbc6b05b3931:113e4fb48bd20dcd:6b80fbc6b05b3931:1"
2021/06/17 16:32:57 Reporting span 6b80fbc6b05b3931:113e4fb48bd20dcd:6b80fbc6b05b3931:1
2021/06/17 16:32:57 Reporting span 6b80fbc6b05b3931:6b80fbc6b05b3931:0000000000000000:1
{"level":"info","ts":1623947577.0545325,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623947577.054605,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623947577.0546186,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623947577.0546293,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:32:57Z" level=info msg="==--> discovery.FindNetworkService() span:166b2f3c3d398e3f:166b2f3c3d398e3f:0000000000000000:1"
time="2021-06-17T16:32:57Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=166b2f3c3d398e3f:166b2f3c3d398e3f:0000000000000000:1"
time="2021-06-17T16:32:57Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=166b2f3c3d398e3f:166b2f3c3d398e3f:0000000000000000:1"
time="2021-06-17T16:32:57Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:32:57Z" level=info msg="==----> initRegistryClient() span:166b2f3c3d398e3f:0fdbbc66561b1071:166b2f3c3d398e3f:1"
time="2021-06-17T16:32:57Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:32:57Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:32:57Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="166b2f3c3d398e3f:0fdbbc66561b1071:166b2f3c3d398e3f:1"
time="2021-06-17T16:32:57Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:32:57Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:32:57Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000358c40 {member1.com}:0xc000358cc0 {member2.com}:0xc000358bc0]}"
time="2021-06-17T16:32:57Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:32:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:32:57Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:32:57Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:32:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:32:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:32:57Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:32:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:32:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:32:57Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:33:02Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:33:02Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:33:07Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:33:07Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:33:07Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:33:07Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:33:07Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="166b2f3c3d398e3f:0fdbbc66561b1071:166b2f3c3d398e3f:1"
2021/06/17 16:33:07 Reporting span 166b2f3c3d398e3f:0fdbbc66561b1071:166b2f3c3d398e3f:1
{"level":"info","ts":1623947587.083629,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:33:07Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=166b2f3c3d398e3f:166b2f3c3d398e3f:0000000000000000:1"
time="2021-06-17T16:33:07Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=166b2f3c3d398e3f:166b2f3c3d398e3f:0000000000000000:1"
2021/06/17 16:33:07 Reporting span 166b2f3c3d398e3f:736873528c159d6d:166b2f3c3d398e3f:1
time="2021-06-17T16:33:07Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=166b2f3c3d398e3f:166b2f3c3d398e3f:0000000000000000:1"
2021/06/17 16:33:07 Reporting span 166b2f3c3d398e3f:166b2f3c3d398e3f:0000000000000000:1
{"level":"info","ts":1623947587.0883467,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947587.0885966,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947587.0887005,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947587.0887275,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:33:07Z" level=info msg="==--> discovery.FindNetworkService() span:0843640b9e008a37:0843640b9e008a37:0000000000000000:1"
time="2021-06-17T16:33:07Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=0843640b9e008a37:0843640b9e008a37:0000000000000000:1"
time="2021-06-17T16:33:07Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=0843640b9e008a37:0843640b9e008a37:0000000000000000:1"
time="2021-06-17T16:33:07Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:33:07Z" level=info msg="==----> initRegistryClient() span:0843640b9e008a37:0f62928f4a210da5:0843640b9e008a37:1"
time="2021-06-17T16:33:07Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:33:07Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:33:07Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="0843640b9e008a37:0f62928f4a210da5:0843640b9e008a37:1"
time="2021-06-17T16:33:07Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:33:07Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:33:07Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00080d080 {member1.com}:0xc00080d100 {member2.com}:0xc00080d000]}"
time="2021-06-17T16:33:07Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:33:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:33:07Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:33:07Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:33:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:33:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:33:07Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:33:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:33:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:33:07Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:33:12Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:33:12Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:33:17Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:33:17Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:33:22Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:33:22Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:33:22Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:33:37Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:33:37Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="0843640b9e008a37:0f62928f4a210da5:0843640b9e008a37:1"
2021/06/17 16:33:37 Reporting span 0843640b9e008a37:0f62928f4a210da5:0843640b9e008a37:1
2021/06/17 16:33:37 Reporting span 0843640b9e008a37:0843640b9e008a37:0000000000000000:1
{"level":"info","ts":1623947617.0896413,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623947617.0897021,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623947617.0897148,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623947617.0897253,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:33:37Z" level=info msg="==--> discovery.FindNetworkService() span:76121cb9b5ac76b0:76121cb9b5ac76b0:0000000000000000:1"
time="2021-06-17T16:33:37Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=76121cb9b5ac76b0:76121cb9b5ac76b0:0000000000000000:1"
time="2021-06-17T16:33:37Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=76121cb9b5ac76b0:76121cb9b5ac76b0:0000000000000000:1"
time="2021-06-17T16:33:37Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:33:37Z" level=info msg="==----> initRegistryClient() span:76121cb9b5ac76b0:4273d0cb5ab18768:76121cb9b5ac76b0:1"
time="2021-06-17T16:33:37Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:33:37Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:33:37Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="76121cb9b5ac76b0:4273d0cb5ab18768:76121cb9b5ac76b0:1"
time="2021-06-17T16:33:37Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:33:37Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:33:37Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000182b40 {member1.com}:0xc000182ac0 {member2.com}:0xc000182a40]}"
time="2021-06-17T16:33:37Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:33:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:33:37Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:33:37Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:33:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:33:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:33:37Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:33:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:33:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:33:37Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:33:42Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:33:42Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:33:47Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:33:47Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:33:47Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:33:47Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:33:47Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="76121cb9b5ac76b0:4273d0cb5ab18768:76121cb9b5ac76b0:1"
2021/06/17 16:33:47 Reporting span 76121cb9b5ac76b0:4273d0cb5ab18768:76121cb9b5ac76b0:1
{"level":"info","ts":1623947627.1174808,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:33:47Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=76121cb9b5ac76b0:76121cb9b5ac76b0:0000000000000000:1"
time="2021-06-17T16:33:47Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=76121cb9b5ac76b0:76121cb9b5ac76b0:0000000000000000:1"
2021/06/17 16:33:47 Reporting span 76121cb9b5ac76b0:5382184b06f9e08b:76121cb9b5ac76b0:1
time="2021-06-17T16:33:47Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=76121cb9b5ac76b0:76121cb9b5ac76b0:0000000000000000:1"
2021/06/17 16:33:47 Reporting span 76121cb9b5ac76b0:76121cb9b5ac76b0:0000000000000000:1
{"level":"info","ts":1623947627.1242306,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947627.1243713,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947627.124417,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947627.1244965,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:33:47Z" level=info msg="==--> discovery.FindNetworkService() span:6b0c38164e09c0b3:6b0c38164e09c0b3:0000000000000000:1"
time="2021-06-17T16:33:47Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6b0c38164e09c0b3:6b0c38164e09c0b3:0000000000000000:1"
time="2021-06-17T16:33:47Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=6b0c38164e09c0b3:6b0c38164e09c0b3:0000000000000000:1"
time="2021-06-17T16:33:47Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:33:47Z" level=info msg="==----> initRegistryClient() span:6b0c38164e09c0b3:7206ca1ec3e4246b:6b0c38164e09c0b3:1"
time="2021-06-17T16:33:47Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:33:57Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:33:57Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6b0c38164e09c0b3:7206ca1ec3e4246b:6b0c38164e09c0b3:1"
time="2021-06-17T16:33:57Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:33:57Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:33:57Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0000bba40 {member1.com}:0xc0000bbac0 {member2.com}:0xc0000bb940]}"
time="2021-06-17T16:33:57Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:33:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:33:57Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:33:57Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:33:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:33:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:33:57Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:33:57Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:33:57Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:33:57Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:34:02Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:34:02Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:34:07Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:34:07Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:34:12Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:34:12Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:34:12Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:34:17Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:34:17Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="6b0c38164e09c0b3:7206ca1ec3e4246b:6b0c38164e09c0b3:1"
2021/06/17 16:34:17 Reporting span 6b0c38164e09c0b3:7206ca1ec3e4246b:6b0c38164e09c0b3:1
2021/06/17 16:34:17 Reporting span 6b0c38164e09c0b3:6b0c38164e09c0b3:0000000000000000:1
{"level":"info","ts":1623947657.125592,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623947657.1256497,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623947657.1256633,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623947657.125675,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:34:17Z" level=info msg="==--> discovery.FindNetworkService() span:003d9c2b97240d31:003d9c2b97240d31:0000000000000000:1"
time="2021-06-17T16:34:17Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=003d9c2b97240d31:003d9c2b97240d31:0000000000000000:1"
time="2021-06-17T16:34:17Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=003d9c2b97240d31:003d9c2b97240d31:0000000000000000:1"
time="2021-06-17T16:34:17Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:34:17Z" level=info msg="==----> initRegistryClient() span:003d9c2b97240d31:4dd1ae2abd2b5c32:003d9c2b97240d31:1"
time="2021-06-17T16:34:17Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:34:17Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:34:17Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="003d9c2b97240d31:4dd1ae2abd2b5c32:003d9c2b97240d31:1"
time="2021-06-17T16:34:17Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:34:17Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:34:17Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0006b2880 {member1.com}:0xc0006b2900 {member2.com}:0xc0006b2800]}"
time="2021-06-17T16:34:17Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:34:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:34:17Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:34:17Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:34:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:34:17Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:34:17Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:34:17Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:34:17Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:34:17Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:34:22Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:34:22Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:34:27Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:34:27Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:34:27Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:34:27Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:34:27Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="003d9c2b97240d31:4dd1ae2abd2b5c32:003d9c2b97240d31:1"
2021/06/17 16:34:27 Reporting span 003d9c2b97240d31:4dd1ae2abd2b5c32:003d9c2b97240d31:1
{"level":"info","ts":1623947667.161945,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:34:27Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=003d9c2b97240d31:003d9c2b97240d31:0000000000000000:1"
time="2021-06-17T16:34:27Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=003d9c2b97240d31:003d9c2b97240d31:0000000000000000:1"
2021/06/17 16:34:27 Reporting span 003d9c2b97240d31:784df9d811a2cf30:003d9c2b97240d31:1
time="2021-06-17T16:34:27Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=003d9c2b97240d31:003d9c2b97240d31:0000000000000000:1"
2021/06/17 16:34:27 Reporting span 003d9c2b97240d31:003d9c2b97240d31:0000000000000000:1
{"level":"info","ts":1623947667.1673133,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947667.1673636,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947667.1673796,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947667.167392,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:34:27Z" level=info msg="==--> discovery.FindNetworkService() span:0ac7cb3af32ad0f5:0ac7cb3af32ad0f5:0000000000000000:1"
time="2021-06-17T16:34:27Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=0ac7cb3af32ad0f5:0ac7cb3af32ad0f5:0000000000000000:1"
time="2021-06-17T16:34:27Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=0ac7cb3af32ad0f5:0ac7cb3af32ad0f5:0000000000000000:1"
time="2021-06-17T16:34:27Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:34:27Z" level=info msg="==----> initRegistryClient() span:0ac7cb3af32ad0f5:63e6d2d3f07af1c4:0ac7cb3af32ad0f5:1"
time="2021-06-17T16:34:27Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:34:27Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:34:27Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="0ac7cb3af32ad0f5:63e6d2d3f07af1c4:0ac7cb3af32ad0f5:1"
time="2021-06-17T16:34:27Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:34:27Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:34:27Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000137b80 {member1.com}:0xc000137c00 {member2.com}:0xc000137b00]}"
time="2021-06-17T16:34:27Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:34:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:34:27Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:34:27Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:34:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:34:27Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:34:27Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:34:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:34:27Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:34:27Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:34:27Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:34:27Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:34:27Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="0ac7cb3af32ad0f5:63e6d2d3f07af1c4:0ac7cb3af32ad0f5:1"
2021/06/17 16:34:27 Reporting span 0ac7cb3af32ad0f5:63e6d2d3f07af1c4:0ac7cb3af32ad0f5:1
{"level":"info","ts":1623947667.2103088,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:34:27Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=0ac7cb3af32ad0f5:0ac7cb3af32ad0f5:0000000000000000:1"
time="2021-06-17T16:34:27Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=0ac7cb3af32ad0f5:0ac7cb3af32ad0f5:0000000000000000:1"
2021/06/17 16:34:27 Reporting span 0ac7cb3af32ad0f5:4c6481933bc039f5:0ac7cb3af32ad0f5:1
time="2021-06-17T16:34:27Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623950855},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623950807},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=0ac7cb3af32ad0f5:0ac7cb3af32ad0f5:0000000000000000:1"
2021/06/17 16:34:27 Reporting span 0ac7cb3af32ad0f5:0ac7cb3af32ad0f5:0000000000000000:1
{"level":"info","ts":1623947667.2158847,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947667.2159631,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947667.2160635,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623947667.2162836,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623947667.216367,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623947667.2164373,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947667.2165267,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947667.21657,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623947667.216633,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623947667.2166471,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947667.2166567,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947667.2166655,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947667.2166753,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947667.216685,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947667.2167296,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947667.2167535,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623947667.2167602,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623947667.216766,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623947667.2167766,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623947667.2167823,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623947667.2167938,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623947667.2168012,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623947667.2168107,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:34:27Z" level=info msg="==--> discovery.FindNetworkService() span:07ecadce2e80f81f:07ecadce2e80f81f:0000000000000000:1"
time="2021-06-17T16:34:27Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=07ecadce2e80f81f:07ecadce2e80f81f:0000000000000000:1"
time="2021-06-17T16:34:27Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=07ecadce2e80f81f:07ecadce2e80f81f:0000000000000000:1"
time="2021-06-17T16:34:27Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:34:27Z" level=info msg="==----> initRegistryClient() span:07ecadce2e80f81f:47509f7f551d08a7:07ecadce2e80f81f:1"
time="2021-06-17T16:34:27Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:34:27Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:34:27Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="07ecadce2e80f81f:47509f7f551d08a7:07ecadce2e80f81f:1"
time="2021-06-17T16:34:27Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:34:27Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:34:27Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000358840 {member1.com}:0xc0003588c0 {member2.com}:0xc0003587c0]}"
time="2021-06-17T16:34:27Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:34:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:34:27Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:34:27Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:34:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:34:27Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:34:27Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:34:27Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:34:27Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:34:27Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
{"level":"info","ts":1623947671.8503845,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623947671.850543,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T16:34:32Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:34:32Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:34:37Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:34:37Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:34:37Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:34:37Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:34:37Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="07ecadce2e80f81f:47509f7f551d08a7:07ecadce2e80f81f:1"
2021/06/17 16:34:37 Reporting span 07ecadce2e80f81f:47509f7f551d08a7:07ecadce2e80f81f:1
{"level":"info","ts":1623947677.2634408,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:34:37Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=07ecadce2e80f81f:07ecadce2e80f81f:0000000000000000:1"
time="2021-06-17T16:34:37Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=07ecadce2e80f81f:07ecadce2e80f81f:0000000000000000:1"
2021/06/17 16:34:37 Reporting span 07ecadce2e80f81f:592830f675d4c6a0:07ecadce2e80f81f:1
time="2021-06-17T16:34:37Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=07ecadce2e80f81f:07ecadce2e80f81f:0000000000000000:1"
2021/06/17 16:34:37 Reporting span 07ecadce2e80f81f:07ecadce2e80f81f:0000000000000000:1
{"level":"info","ts":1623947677.271332,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947677.2714136,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947677.2714527,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947677.2715497,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:34:37Z" level=info msg="==--> discovery.FindNetworkService() span:2bd1567cb0b7147f:2bd1567cb0b7147f:0000000000000000:1"
time="2021-06-17T16:34:37Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2bd1567cb0b7147f:2bd1567cb0b7147f:0000000000000000:1"
time="2021-06-17T16:34:37Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=2bd1567cb0b7147f:2bd1567cb0b7147f:0000000000000000:1"
time="2021-06-17T16:34:37Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:34:37Z" level=info msg="==----> initRegistryClient() span:2bd1567cb0b7147f:66da0782c47ea856:2bd1567cb0b7147f:1"
time="2021-06-17T16:34:37Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:34:47Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:34:47Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2bd1567cb0b7147f:66da0782c47ea856:2bd1567cb0b7147f:1"
time="2021-06-17T16:34:47Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:34:47Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:34:47Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00065b1c0 {member1.com}:0xc00065b240 {member2.com}:0xc00065b140]}"
time="2021-06-17T16:34:47Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:34:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:34:47Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:34:47Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:34:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:34:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:34:47Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:34:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:34:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:34:47Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:34:52Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:34:52Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:34:57Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:34:57Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:35:02Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:35:02Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:35:02Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:35:07Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:35:07Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="2bd1567cb0b7147f:66da0782c47ea856:2bd1567cb0b7147f:1"
2021/06/17 16:35:07 Reporting span 2bd1567cb0b7147f:66da0782c47ea856:2bd1567cb0b7147f:1
2021/06/17 16:35:07 Reporting span 2bd1567cb0b7147f:2bd1567cb0b7147f:0000000000000000:1
{"level":"info","ts":1623947707.2729797,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623947707.273126,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623947707.273142,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623947707.2731543,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:35:07Z" level=info msg="==--> discovery.FindNetworkService() span:73f943f2e6affbc2:73f943f2e6affbc2:0000000000000000:1"
time="2021-06-17T16:35:07Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=73f943f2e6affbc2:73f943f2e6affbc2:0000000000000000:1"
time="2021-06-17T16:35:07Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=73f943f2e6affbc2:73f943f2e6affbc2:0000000000000000:1"
time="2021-06-17T16:35:07Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:35:07Z" level=info msg="==----> initRegistryClient() span:73f943f2e6affbc2:31099314202ce330:73f943f2e6affbc2:1"
time="2021-06-17T16:35:07Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:35:07Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:35:07Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="73f943f2e6affbc2:31099314202ce330:73f943f2e6affbc2:1"
time="2021-06-17T16:35:07Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:35:07Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:35:07Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000137300 {member1.com}:0xc000137080 {member2.com}:0xc000137000]}"
time="2021-06-17T16:35:07Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:35:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:35:07Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:35:07Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:35:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:35:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:35:07Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:35:07Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:35:07Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:35:07Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:35:12Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:35:12Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:35:17Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:35:17Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:35:17Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:35:17Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:35:17Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="73f943f2e6affbc2:31099314202ce330:73f943f2e6affbc2:1"
2021/06/17 16:35:17 Reporting span 73f943f2e6affbc2:31099314202ce330:73f943f2e6affbc2:1
{"level":"info","ts":1623947717.3088775,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:35:17Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=73f943f2e6affbc2:73f943f2e6affbc2:0000000000000000:1"
time="2021-06-17T16:35:17Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=73f943f2e6affbc2:73f943f2e6affbc2:0000000000000000:1"
2021/06/17 16:35:17 Reporting span 73f943f2e6affbc2:3c80668d5e90aef9:73f943f2e6affbc2:1
time="2021-06-17T16:35:17Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=73f943f2e6affbc2:73f943f2e6affbc2:0000000000000000:1"
2021/06/17 16:35:17 Reporting span 73f943f2e6affbc2:73f943f2e6affbc2:0000000000000000:1
{"level":"info","ts":1623947717.314434,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947717.3144662,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947717.3145127,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947717.3145247,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:35:17Z" level=info msg="==--> discovery.FindNetworkService() span:6b17862604702ea4:6b17862604702ea4:0000000000000000:1"
time="2021-06-17T16:35:17Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=6b17862604702ea4:6b17862604702ea4:0000000000000000:1"
time="2021-06-17T16:35:17Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=6b17862604702ea4:6b17862604702ea4:0000000000000000:1"
time="2021-06-17T16:35:17Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:35:17Z" level=info msg="==----> initRegistryClient() span:6b17862604702ea4:11830698d5eeb0d6:6b17862604702ea4:1"
time="2021-06-17T16:35:17Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:35:37Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:35:37Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6b17862604702ea4:11830698d5eeb0d6:6b17862604702ea4:1"
time="2021-06-17T16:35:37Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:35:37Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:35:37Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000183c00 {member1.com}:0xc0001837c0 {member2.com}:0xc000183740]}"
time="2021-06-17T16:35:37Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:35:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:35:37Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:35:37Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:35:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:35:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:35:37Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:35:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:35:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:35:37Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:35:37Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:35:37Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:35:37Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="6b17862604702ea4:11830698d5eeb0d6:6b17862604702ea4:1"
2021/06/17 16:35:37 Reporting span 6b17862604702ea4:11830698d5eeb0d6:6b17862604702ea4:1
{"level":"info","ts":1623947737.3546288,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:35:37Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6b17862604702ea4:6b17862604702ea4:0000000000000000:1"
time="2021-06-17T16:35:37Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=6b17862604702ea4:6b17862604702ea4:0000000000000000:1"
2021/06/17 16:35:37 Reporting span 6b17862604702ea4:5c7508d0dee633f5:6b17862604702ea4:1
time="2021-06-17T16:35:37Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623950855},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623950807},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6b17862604702ea4:6b17862604702ea4:0000000000000000:1"
2021/06/17 16:35:37 Reporting span 6b17862604702ea4:6b17862604702ea4:0000000000000000:1
{"level":"info","ts":1623947737.357939,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947737.358012,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947737.3580484,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623947737.3580918,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623947737.358253,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623947737.3582964,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947737.3583076,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947737.3583171,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623947737.358326,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623947737.3583355,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947737.3583457,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947737.358354,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947737.358424,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947737.3584535,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947737.3584652,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947737.358475,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623947737.3584833,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623947737.358494,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623947737.3585029,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623947737.3585117,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623947737.3585277,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623947737.358541,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623947737.3585513,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:35:37Z" level=info msg="==--> discovery.FindNetworkService() span:1e06a4578f6c3566:1e06a4578f6c3566:0000000000000000:1"
time="2021-06-17T16:35:37Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=1e06a4578f6c3566:1e06a4578f6c3566:0000000000000000:1"
time="2021-06-17T16:35:37Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=1e06a4578f6c3566:1e06a4578f6c3566:0000000000000000:1"
time="2021-06-17T16:35:37Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:35:37Z" level=info msg="==----> initRegistryClient() span:1e06a4578f6c3566:42ec3ca836351aa4:1e06a4578f6c3566:1"
time="2021-06-17T16:35:37Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:35:37Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:35:37Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1e06a4578f6c3566:42ec3ca836351aa4:1e06a4578f6c3566:1"
time="2021-06-17T16:35:37Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:35:37Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:35:37Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0008061c0 {member1.com}:0xc000806240 {member2.com}:0xc000806140]}"
time="2021-06-17T16:35:37Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:35:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:35:37Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:35:37Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:35:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:35:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:35:37Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:35:37Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:35:37Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:35:37Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:35:42Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:35:42Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:35:47Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:35:47Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:35:47Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:35:47Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:35:47Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="1e06a4578f6c3566:42ec3ca836351aa4:1e06a4578f6c3566:1"
2021/06/17 16:35:47 Reporting span 1e06a4578f6c3566:42ec3ca836351aa4:1e06a4578f6c3566:1
{"level":"info","ts":1623947747.389706,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:35:47Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1e06a4578f6c3566:1e06a4578f6c3566:0000000000000000:1"
time="2021-06-17T16:35:47Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=1e06a4578f6c3566:1e06a4578f6c3566:0000000000000000:1"
2021/06/17 16:35:47 Reporting span 1e06a4578f6c3566:1ceeaaae127a5718:1e06a4578f6c3566:1
time="2021-06-17T16:35:47Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1e06a4578f6c3566:1e06a4578f6c3566:0000000000000000:1"
2021/06/17 16:35:47 Reporting span 1e06a4578f6c3566:1e06a4578f6c3566:0000000000000000:1
{"level":"info","ts":1623947747.396275,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947747.3963501,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947747.3963938,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947747.3964264,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:35:47Z" level=info msg="==--> discovery.FindNetworkService() span:712c5a4185b36ca2:712c5a4185b36ca2:0000000000000000:1"
time="2021-06-17T16:35:47Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=712c5a4185b36ca2:712c5a4185b36ca2:0000000000000000:1"
time="2021-06-17T16:35:47Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=712c5a4185b36ca2:712c5a4185b36ca2:0000000000000000:1"
time="2021-06-17T16:35:47Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:35:47Z" level=info msg="==----> initRegistryClient() span:712c5a4185b36ca2:770270b6e0e0c103:712c5a4185b36ca2:1"
time="2021-06-17T16:35:47Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:35:47Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:35:47Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="712c5a4185b36ca2:770270b6e0e0c103:712c5a4185b36ca2:1"
time="2021-06-17T16:35:47Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:35:47Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:35:47Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0006b2f00 {member1.com}:0xc0006b2f80 {member2.com}:0xc0006b2e80]}"
time="2021-06-17T16:35:47Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:35:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:35:47Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:35:47Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:35:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:35:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:35:47Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:35:47Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:35:47Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:35:47Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:35:47Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:35:47Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:35:47Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="712c5a4185b36ca2:770270b6e0e0c103:712c5a4185b36ca2:1"
2021/06/17 16:35:47 Reporting span 712c5a4185b36ca2:770270b6e0e0c103:712c5a4185b36ca2:1
{"level":"info","ts":1623947747.434449,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:35:47Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=712c5a4185b36ca2:712c5a4185b36ca2:0000000000000000:1"
time="2021-06-17T16:35:47Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=712c5a4185b36ca2:712c5a4185b36ca2:0000000000000000:1"
2021/06/17 16:35:47 Reporting span 712c5a4185b36ca2:70114e3dd93e4f58:712c5a4185b36ca2:1
time="2021-06-17T16:35:47Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623950855},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623950807},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=712c5a4185b36ca2:712c5a4185b36ca2:0000000000000000:1"
2021/06/17 16:35:47 Reporting span 712c5a4185b36ca2:712c5a4185b36ca2:0000000000000000:1
{"level":"info","ts":1623947747.4369917,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947747.4370148,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947747.437043,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623947747.437054,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623947747.437064,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623947747.4370942,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947747.4371054,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947747.4371152,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623947747.437124,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623947747.437134,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947747.437143,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947747.4371517,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947747.4371617,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947747.43717,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947747.4371777,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947747.4376194,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623947747.4377654,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623947747.4378638,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623947747.438005,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623947747.438042,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623947791.8507686,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623947791.8509717,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623947791.8510454,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623947791.8511207,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947791.8511648,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T16:36:31Z" level=info msg="==--> discovery.FindNetworkService() span:06b4e49464957691:06b4e49464957691:0000000000000000:1"
time="2021-06-17T16:36:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=06b4e49464957691:06b4e49464957691:0000000000000000:1"
time="2021-06-17T16:36:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=06b4e49464957691:06b4e49464957691:0000000000000000:1"
time="2021-06-17T16:36:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:36:31Z" level=info msg="==----> initRegistryClient() span:06b4e49464957691:41c8172b550b7271:06b4e49464957691:1"
time="2021-06-17T16:36:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:36:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:36:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="06b4e49464957691:41c8172b550b7271:06b4e49464957691:1"
time="2021-06-17T16:36:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:36:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:36:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc00065bb00 {member1.com}:0xc00065bb80 {member2.com}:0xc00065ba80]}"
time="2021-06-17T16:36:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:36:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:36:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:36:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:36:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:36:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:36:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:36:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:36:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:36:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:36:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:36:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:36:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:36:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:36:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:36:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:36:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="06b4e49464957691:41c8172b550b7271:06b4e49464957691:1"
2021/06/17 16:36:41 Reporting span 06b4e49464957691:41c8172b550b7271:06b4e49464957691:1
{"level":"info","ts":1623947801.8909814,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:36:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=06b4e49464957691:06b4e49464957691:0000000000000000:1"
time="2021-06-17T16:36:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=06b4e49464957691:06b4e49464957691:0000000000000000:1"
2021/06/17 16:36:41 Reporting span 06b4e49464957691:2c6b0bdc4c50ba04:06b4e49464957691:1
time="2021-06-17T16:36:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=06b4e49464957691:06b4e49464957691:0000000000000000:1"
2021/06/17 16:36:41 Reporting span 06b4e49464957691:06b4e49464957691:0000000000000000:1
{"level":"info","ts":1623947801.8970788,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947801.8973715,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947801.897407,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947801.8974197,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:36:41Z" level=info msg="==--> discovery.FindNetworkService() span:3c70e4d3609e5f85:3c70e4d3609e5f85:0000000000000000:1"
time="2021-06-17T16:36:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=3c70e4d3609e5f85:3c70e4d3609e5f85:0000000000000000:1"
time="2021-06-17T16:36:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=3c70e4d3609e5f85:3c70e4d3609e5f85:0000000000000000:1"
time="2021-06-17T16:36:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:36:41Z" level=info msg="==----> initRegistryClient() span:3c70e4d3609e5f85:5e6c85dfb07807ac:3c70e4d3609e5f85:1"
time="2021-06-17T16:36:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:37:01Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:37:01Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3c70e4d3609e5f85:5e6c85dfb07807ac:3c70e4d3609e5f85:1"
time="2021-06-17T16:37:01Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:37:01Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:37:01Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000359480 {member1.com}:0xc000359400 {member2.com}:0xc000359380]}"
time="2021-06-17T16:37:01Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:37:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:37:01Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:37:01Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:37:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:37:01Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:37:01Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:37:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:37:01Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:37:01Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:37:01Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:37:01Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:37:01Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="3c70e4d3609e5f85:5e6c85dfb07807ac:3c70e4d3609e5f85:1"
2021/06/17 16:37:01 Reporting span 3c70e4d3609e5f85:5e6c85dfb07807ac:3c70e4d3609e5f85:1
{"level":"info","ts":1623947821.9523652,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:37:01Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=3c70e4d3609e5f85:3c70e4d3609e5f85:0000000000000000:1"
time="2021-06-17T16:37:01Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=3c70e4d3609e5f85:3c70e4d3609e5f85:0000000000000000:1"
2021/06/17 16:37:01 Reporting span 3c70e4d3609e5f85:29e438d9daf9a391:3c70e4d3609e5f85:1
time="2021-06-17T16:37:01Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623950855},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623950807},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=3c70e4d3609e5f85:3c70e4d3609e5f85:0000000000000000:1"
2021/06/17 16:37:01 Reporting span 3c70e4d3609e5f85:3c70e4d3609e5f85:0000000000000000:1
{"level":"info","ts":1623947821.955276,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947821.955301,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947821.955311,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623947821.955321,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623947821.9553313,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623947821.9553442,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947821.9553535,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947821.9553628,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623947821.9553719,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623947821.9553819,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947821.955391,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947821.9554324,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947821.9554658,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947821.9554994,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947821.955535,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947821.9555674,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623947821.9555988,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623947821.955647,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623947821.9557106,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623947821.9557626,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623947821.955813,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623947821.9559531,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623947821.9560137,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:37:01Z" level=info msg="==--> discovery.FindNetworkService() span:5738667122b3120e:5738667122b3120e:0000000000000000:1"
time="2021-06-17T16:37:01Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=5738667122b3120e:5738667122b3120e:0000000000000000:1"
time="2021-06-17T16:37:01Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=5738667122b3120e:5738667122b3120e:0000000000000000:1"
time="2021-06-17T16:37:01Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:37:01Z" level=info msg="==----> initRegistryClient() span:5738667122b3120e:158f36a51466397e:5738667122b3120e:1"
time="2021-06-17T16:37:01Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:37:01Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:37:01Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5738667122b3120e:158f36a51466397e:5738667122b3120e:1"
time="2021-06-17T16:37:01Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:37:01Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:37:01Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000806a80 {member1.com}:0xc000806a00 {member2.com}:0xc000806980]}"
time="2021-06-17T16:37:01Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:37:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:37:01Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:37:01Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:37:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:37:01Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:37:01Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:37:01Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:37:01Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:37:01Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:37:06Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:37:06Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:37:11Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:37:11Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:37:11Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:37:11Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:37:11Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="5738667122b3120e:158f36a51466397e:5738667122b3120e:1"
2021/06/17 16:37:11 Reporting span 5738667122b3120e:158f36a51466397e:5738667122b3120e:1
{"level":"info","ts":1623947831.991484,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:37:11Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5738667122b3120e:5738667122b3120e:0000000000000000:1"
time="2021-06-17T16:37:11Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=5738667122b3120e:5738667122b3120e:0000000000000000:1"
2021/06/17 16:37:11 Reporting span 5738667122b3120e:399d239f85891e72:5738667122b3120e:1
time="2021-06-17T16:37:11Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5738667122b3120e:5738667122b3120e:0000000000000000:1"
2021/06/17 16:37:11 Reporting span 5738667122b3120e:5738667122b3120e:0000000000000000:1
{"level":"info","ts":1623947831.9976437,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947831.9977474,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947831.99778,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947831.9977922,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:37:11Z" level=info msg="==--> discovery.FindNetworkService() span:2d3b27efde10052d:2d3b27efde10052d:0000000000000000:1"
time="2021-06-17T16:37:11Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=2d3b27efde10052d:2d3b27efde10052d:0000000000000000:1"
time="2021-06-17T16:37:11Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=2d3b27efde10052d:2d3b27efde10052d:0000000000000000:1"
time="2021-06-17T16:37:11Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:37:11Z" level=info msg="==----> initRegistryClient() span:2d3b27efde10052d:44836a9eaef05995:2d3b27efde10052d:1"
time="2021-06-17T16:37:11Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:37:12Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:37:12Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2d3b27efde10052d:44836a9eaef05995:2d3b27efde10052d:1"
time="2021-06-17T16:37:12Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:37:12Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:37:12Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000182bc0 {member1.com}:0xc000183100 {member2.com}:0xc000182b40]}"
time="2021-06-17T16:37:12Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:37:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:37:12Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:37:12Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:37:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:37:12Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:37:12Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:37:12Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:37:12Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:37:12Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:37:12Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:37:12Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:37:12Z" level=info msg="Successfully connected to green.nispatil-wcm-cisco.com:443" operation=initRegistryClient span="2d3b27efde10052d:44836a9eaef05995:2d3b27efde10052d:1"
2021/06/17 16:37:12 Reporting span 2d3b27efde10052d:44836a9eaef05995:2d3b27efde10052d:1
{"level":"info","ts":1623947832.0511372,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:37:12Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2d3b27efde10052d:2d3b27efde10052d:0000000000000000:1"
time="2021-06-17T16:37:12Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=2d3b27efde10052d:2d3b27efde10052d:0000000000000000:1"
2021/06/17 16:37:12 Reporting span 2d3b27efde10052d:25f51d22b01d54c9:2d3b27efde10052d:1
time="2021-06-17T16:37:12Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-2-control-plane\":{\"name\":\"kind-2-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":1623950855},\"state\":\"RUNNING\"},\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":1623950807},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/cluster\":\"member2\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenvf9gm\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-8wjsk\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greentzts9\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-2-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-2_vl3-nse-green-76bc7f4b96-7rpn9\",\"wcm/cluster\":\"member1\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2d3b27efde10052d:2d3b27efde10052d:0000000000000000:1"
2021/06/17 16:37:12 Reporting span 2d3b27efde10052d:2d3b27efde10052d:0000000000000000:1
{"level":"info","ts":1623947832.0536852,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947832.0537107,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947832.0537415,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenvf9gm","app":"nse-discovery"}
{"level":"info","ts":1623947832.0537527,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greentzts9","app":"nse-discovery"}
{"level":"info","ts":1623947832.0539026,"caller":"nseinformer/nseInformerController.go:198","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1623947832.0539842,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947832.0540743,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947832.054181,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623947832.0542228,"caller":"nseinformer/nseInformerController.go:331","msg":"NSE diff:  For cluster member2, skipping endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623947832.0546653,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947832.0547972,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947832.0548081,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947832.0548165,"caller":"nseinformer/nseInformerController.go:328","msg":"NSE diff: For cluster member2, adding endpoint 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947832.0548253,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'greenmxkph'","app":"nse-discovery"}
{"level":"info","ts":1623947832.0548346,"caller":"nseinformer/nseInformerController.go:341","msg":"NSE diff: For cluster member2, endpoint match 'green2qgdh'","app":"nse-discovery"}
{"level":"info","ts":1623947832.0548437,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greenvf9gm'","app":"nse-discovery"}
{"level":"info","ts":1623947832.054852,"caller":"nseinformer/nseInformerController.go:344","msg":"NSE diff:  For cluster member2, skip comparing endpoint 'greentzts9'","app":"nse-discovery"}
{"level":"info","ts":1623947832.054861,"caller":"nseinformer/nseInformerController.go:203","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1623947832.055119,"caller":"nseinformer/nseInformerController.go:240","msg":"No endpoints to register to Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623947832.0551536,"caller":"nseinformer/nseInformerController.go:266","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1623947911.8512754,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1623947911.8515315,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named greenmxkph...","app":"nse-discovery"}
{"level":"info","ts":1623947911.85162,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623947911.8516524,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947911.8516772,"caller":"nseinformer/nseInformerController.go:107","msg":"NSE pod: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}} was updated with: &{{ } {green2qgdh green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/green2qgdh 57c14b80-fe64-4da7-b1ec-c6a4fe8708c5 89924 1 2021-06-17 14:56:48 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-mp2d9 wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-06-17T16:38:31Z" level=info msg="==--> discovery.FindNetworkService() span:037a058be290ecb1:037a058be290ecb1:0000000000000000:1"
time="2021-06-17T16:38:31Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=037a058be290ecb1:037a058be290ecb1:0000000000000000:1"
time="2021-06-17T16:38:31Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=037a058be290ecb1:037a058be290ecb1:0000000000000000:1"
time="2021-06-17T16:38:31Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:38:31Z" level=info msg="==----> initRegistryClient() span:037a058be290ecb1:2b3230d219b6af1d:037a058be290ecb1:1"
time="2021-06-17T16:38:31Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:38:31Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:38:31Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="037a058be290ecb1:2b3230d219b6af1d:037a058be290ecb1:1"
time="2021-06-17T16:38:31Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:38:31Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:38:31Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0006b3c40 {member1.com}:0xc0006b3cc0 {member2.com}:0xc0006b3bc0]}"
time="2021-06-17T16:38:31Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:38:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:38:31Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:38:31Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:38:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:38:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:38:31Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:38:31Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:38:31Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:38:31Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:38:36Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:38:36Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:38:41Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:38:41Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:38:41Z" level=info msg="Found the right tls certificate:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:38:41Z" level=info msg="Trying to establish connection using tlsConfig:&{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:38:41Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="037a058be290ecb1:2b3230d219b6af1d:037a058be290ecb1:1"
2021/06/17 16:38:41 Reporting span 037a058be290ecb1:2b3230d219b6af1d:037a058be290ecb1:1
{"level":"info","ts":1623947921.881013,"caller":"nseinformer/nseInformerController.go:408","msg":"Discover NSEs from NSR: network_service_name:\"green\" ","app":"nse-discovery"}
time="2021-06-17T16:38:41Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=037a058be290ecb1:037a058be290ecb1:0000000000000000:1"
time="2021-06-17T16:38:41Z" level=info msg=">><<---- request={\"network_service_name\":\"green\"} span=037a058be290ecb1:037a058be290ecb1:0000000000000000:1"
2021/06/17 16:38:41 Reporting span 037a058be290ecb1:4b4515f88d5518f9:037a058be290ecb1:1
time="2021-06-17T16:38:41Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"green\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-3-control-plane\":{\"name\":\"kind-3-control-plane\",\"url\":\"172.17.0.4:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"green2qgdh\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-mp2d9\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"greenmxkph\",\"payload\":\"IP\",\"network_service_name\":\"green\",\"network_service_manager_name\":\"kind-3-control-plane\",\"labels\":{\"app\":\"vl3-nse-green\",\"networkservicename\":\"green\",\"nsepod.name\":\"green-kind-3_vl3-nse-green-7555496c4c-974fh\",\"wcm/nsr.addr\":\"green.nispatil-wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=037a058be290ecb1:037a058be290ecb1:0000000000000000:1"
2021/06/17 16:38:41 Reporting span 037a058be290ecb1:037a058be290ecb1:0000000000000000:1
{"level":"info","ts":1623947921.8910272,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name green2qgdh","app":"nse-discovery"}
{"level":"info","ts":1623947921.8910654,"caller":"nseinformer/nseInformerController.go:316","msg":"found NSE with name greenmxkph","app":"nse-discovery"}
{"level":"info","ts":1623947921.8910773,"caller":"nseinformer/nseInformerController.go:186","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1623947921.8910885,"caller":"nseinformer/nseInformerController.go:189","msg":"Getting endpoints from the global NSR at: green.nispatil-wcm-cisco.com:443","app":"nse-discovery"}
time="2021-06-17T16:38:41Z" level=info msg="==--> discovery.FindNetworkService() span:0757c27859a10778:0757c27859a10778:0000000000000000:1"
time="2021-06-17T16:38:41Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=0757c27859a10778:0757c27859a10778:0000000000000000:1"
time="2021-06-17T16:38:41Z" level=info msg=">><<-- nsrURL=\"green.nispatil-wcm-cisco.com:443\" span=0757c27859a10778:0757c27859a10778:0000000000000000:1"
time="2021-06-17T16:38:41Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:38:41Z" level=info msg="==----> initRegistryClient() span:0757c27859a10778:41d87ed778522f9c:0757c27859a10778:1"
time="2021-06-17T16:38:41Z" level=info msg="Waiting for liveness probe: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:38:51Z" level=info msg="Liveness probe was successful: tcp:green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:38:51Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="0757c27859a10778:41d87ed778522f9c:0757c27859a10778:1"
time="2021-06-17T16:38:51Z" level=info msg="Establishing connection to target: green.nispatil-wcm-cisco.com:443"
time="2021-06-17T16:38:51Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:38:51Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc000358300 {member1.com}:0xc000358380 {member2.com}:0xc000358280]}"
time="2021-06-17T16:38:51Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:38:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:38:51Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:38:51Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:38:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:38:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:38:51Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:38:51Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:38:51Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:38:51Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:38:56Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:38:56Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:39:01Z" level=warning msg="Tls 1 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:39:01Z" level=info msg="Trying to connect to target: green.nispatil-wcm-cisco.com:443 using tls: 2 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:39:06Z" level=warning msg="Tls 2 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:39:06Z" level=error msg="None of the tls certificates worked: <nil>"
time="2021-06-17T16:39:06Z" level=info msg="Trying to establish connection using tlsConfig:<nil>"
time="2021-06-17T16:39:11Z" level=error msg="Error occurred while trying to establish connection to: green.nispatil-wcm-cisco.com:443. Error: context deadline exceeded"
time="2021-06-17T16:39:11Z" level=error msg="Failed to dial Network Service Registry at green.nispatil-wcm-cisco.com:443: context deadline exceeded" operation=initRegistryClient span="0757c27859a10778:41d87ed778522f9c:0757c27859a10778:1"
2021/06/17 16:39:11 Reporting span 0757c27859a10778:41d87ed778522f9c:0757c27859a10778:1
2021/06/17 16:39:11 Reporting span 0757c27859a10778:0757c27859a10778:0000000000000000:1
{"level":"info","ts":1623947951.8920143,"caller":"nseinformer/nseInformerController.go:369","msg":"Error processing pod &{{ } {greenmxkph green nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/greenmxkph a208be62-88c6-4eb1-9e46-c4e465e2b0fe 89923 1 2021-06-17 14:56:47 +0000 UTC <nil> <nil> map[app:vl3-nse-green networkservicename:green nsepod.name:green-kind-3_vl3-nse-green-7555496c4c-974fh wcm/nsr.addr:green.nispatil-wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {green IP kind-3-control-plane} {RUNNING}}: Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1623947951.8921108,"caller":"nseinformer/nseInformerController.go:156","msg":"Processing NSE named green2qgdh...","app":"nse-discovery"}
{"level":"info","ts":1623947951.8923097,"caller":"nseinformer/nseInformerController.go:163","msg":"Found service name: green","app":"nse-discovery"}
{"level":"info","ts":1623947951.892492,"caller":"nseinformer/nseInformerController.go:178","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-06-17T16:39:11Z" level=info msg="==--> discovery.FindNetworkService() span:7776d031521420dd:7776d031521420dd:0000000000000000:1"
time="2021-06-17T16:39:11Z" level=info msg=">><<-- request={\"network_service_name\":\"green\"} span=7776d031521420dd:7776d031521420dd:0000000000000000:1"
time="2021-06-17T16:39:11Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=7776d031521420dd:7776d031521420dd:0000000000000000:1"
time="2021-06-17T16:39:11Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-06-17T16:39:11Z" level=info msg="==----> initRegistryClient() span:7776d031521420dd:10c76f14f4077d66:7776d031521420dd:1"
time="2021-06-17T16:39:11Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:39:11Z" level=info msg="Liveness probe was successful: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:39:11Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7776d031521420dd:10c76f14f4077d66:7776d031521420dd:1"
time="2021-06-17T16:39:11Z" level=info msg="Establishing connection to target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-06-17T16:39:11Z" level=info msg="Connecting to the workload api at:unix:///run/spire/sockets/agent.sock"
time="2021-06-17T16:39:11Z" level=info msg="Successfully retrieve bundles:&{{{0 0} 0 0 0 0} map[{central.com}:0xc0006b2bc0 {member1.com}:0xc0006b2b40 {member2.com}:0xc0006b2ac0]}"
time="2021-06-17T16:39:11Z" level=info msg="defaultTrustDomain:central.com"
time="2021-06-17T16:39:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:39:11Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-06-17T16:39:11Z" level=info msg="defaultTrustDomain:member1.com"
time="2021-06-17T16:39:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:39:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-06-17T16:39:11Z" level=info msg="defaultTrustDomain:member2.com"
time="2021-06-17T16:39:11Z" level=info msg="AUTHORIZING ALL CLIENTS"
time="2021-06-17T16:39:11Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-06-17T16:39:11Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 0 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
time="2021-06-17T16:39:16Z" level=warning msg="Tls 0 din't match with server tls. Reason: context deadline exceeded"
time="2021-06-17T16:39:16Z" level=info msg="Trying to connect to target: wcm-proxy-nsmgr.nsm-system:5005 using tls: 1 - &{<nil> <nil> [] map[] <nil> 0xca3d80 <nil> 0xca3e00 <nil> <nil> []  NoClientCert <nil> true [] false false [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] <nil> 0 0 [] false 0 <nil> {{0 0} 0 0 0 0} [] []}"
==== END logs for container wcm-nse-discovery of pod wcm-system/wcm-nse-discovery-5f68d85698-wd7c5 ====
