#*********************************************************************
# VPP DUMP 
#*********************************************************************

# /home/ubuntu/go/bin/vpp-probe version

vpp-probe
  Version:      v0.1.0
  Branch:   	HEAD
  Revision: 	5431a807f936826cf4d4f1251342e5a51d461155
  Built by:  	runner@github
  Build date:	Tue Apr 13 19:05:57 UTC 2021
  Go runtime:	go1.16.3 (linux/amd64)


/home/ubuntu/go/bin/vpp-probe --kubeconfig="/home/ubuntu/kubeconfigs/nsm/kind-3.kubeconfig" discover

  ----------------------------------------------------------------------------------------------------------------------------------
   pod: wcm-nsm-vpp-forwarder-kcstt | namespace: nsm-system | node: kind-3-control-plane | cluster: kind-kind-3 | ip: 172.17.0.4
  ----------------------------------------------------------------------------------------------------------------------------------
    VPP version: 20.05.1-6~gf53edbc3b~b1
    
    VPP
      Idx    Internal     Interface    Type         State    IP                MTU    Config               Related
        1    host-eth0    mgmt         AF_PACKET    up       172.17.0.4/16       0    host_if_name:eth0    
    
    No linux interfaces configured
    
  ----------------------------------------------------------------------------------------------------------------------------------
   pod: vl3-nse-green-7555496c4c-25rm4 | namespace: wcm-system | node: kind-3-control-plane | cluster: kind-kind-3 | ip: 10.244.0.15
  ----------------------------------------------------------------------------------------------------------------------------------
    VPP version: 20.05.1-6~gf53edbc3b~b1
    
    VPP
      Idx    Internal    Interface                                      Type     State    IP                 MTU    Config                                                                 Related
        1    memif1/0    green-kind-3_vl3-nse-green-7555496c4c-fq9sm    MEMIF    up       172.100.0.2/30       0    socket:/var/lib/networkservicemesh/nsmzbtCEjEwF/memif.sock (master)    
    
    No linux interfaces configured
    
  ----------------------------------------------------------------------------------------------------------------------------------
   pod: vl3-nse-green-7555496c4c-fq9sm | namespace: wcm-system | node: kind-3-control-plane | cluster: kind-kind-3 | ip: 10.244.0.16
  ----------------------------------------------------------------------------------------------------------------------------------
    VPP version: 20.05.1-6~gf53edbc3b~b1
    
    VPP
      Idx    Internal    Interface     Type     State    IP                 MTU    Config                                                       Related
        1    memif1/0    green2cw8m    MEMIF    up       172.100.0.1/30       0    socket:/var/lib/networkservicemesh/green2cw8m/memif.sock     
    
    No linux interfaces configured
    


/home/ubuntu/go/bin/vpp-probe --kubeconfig="/home/ubuntu/kubeconfigs/nsm/kind-3.kubeconfig" exec agentctl config history --details

  ----------------------------------------------------------------------------------------------------------------------------------
   pod: wcm-nsm-vpp-forwarder-kcstt | namespace: nsm-system | node: kind-3-control-plane | cluster: kind-kind-3 | ip: 172.17.0.4
  ----------------------------------------------------------------------------------------------------------------------------------
  
    # agentctl config history --details (took 138.381867ms)
    
        SEQ  TYPE            START  INPUT      OPERATIONS          RESULT  SUMMARY                DETAILS  
        0    status update   13m    1  values  CREATE:1            ok      OBTAINED:1                      
        1    config replace  13m    27 values                                                  
        2    config change   13m    13 values  CREATE:17           ok      CONFIGURED:17                   
        3    status update   13m    1  values  CREATE:1            ok      OBTAINED:1                      
        4    status update   13m    1  values  CREATE:1            ok      OBTAINED:1                      
        5    status update   13m    2  values  CREATE:1, DELETE:1  ok      OBTAINED:1, REMOVED:1           
        6    status update   13m    1  values  CREATE:1            ok      OBTAINED:1                      
        7    status update   11m    1  values  CREATE:1            ok      OBTAINED:1                      
        8    status update   11m    1  values  CREATE:1            ok      OBTAINED:1                      
        9    status update   4m     1  values  CREATE:1            ok      OBTAINED:1                      
        10   status update   4m     1  values  DELETE:1            ok      REMOVED:1                       
      
  ----------------------------------------------------------------------------------------------------------------------------------
   pod: vl3-nse-green-7555496c4c-25rm4 | namespace: wcm-system | node: kind-3-control-plane | cluster: kind-kind-3 | ip: 10.244.0.15
  ----------------------------------------------------------------------------------------------------------------------------------
  
    # agentctl config history --details (took 143.665133ms)
    
        SEQ  TYPE            START  INPUT      OPERATIONS          RESULT  SUMMARY                              DETAILS                                                                                 
        0    config replace  11m    16 values                                                                                                                                               
        1    config change   9m     2  values  CREATE:6            ok      CONFIGURED:5, PENDING:1              [CREATE] vpp/interface/green-kind-3_vl3-nse-green-7555496c4c-fq9sm/rx-modes -> PENDING  
        2    status update   9m     1  values  CREATE:1            ok      OBTAINED:1                                                                                                                   
        3    status update   9m     2  values  CREATE:2, DELETE:1  ok      CONFIGURED:1, OBTAINED:1, REMOVED:1                                                                                          
      
  ----------------------------------------------------------------------------------------------------------------------------------
   pod: vl3-nse-green-7555496c4c-fq9sm | namespace: wcm-system | node: kind-3-control-plane | cluster: kind-kind-3 | ip: 10.244.0.16
  ----------------------------------------------------------------------------------------------------------------------------------
  
    # agentctl config history --details (took 130.912164ms)
    
        SEQ  TYPE            START  INPUT      OPERATIONS          RESULT  SUMMARY                DETAILS  
        0    config replace  11m    16 values                                                  
        1    config change   9m     2  values  CREATE:5            ok      CONFIGURED:5                    
        2    status update   9m     1  values  CREATE:1            ok      OBTAINED:1                      
        3    status update   9m     2  values  CREATE:1, DELETE:1  ok      OBTAINED:1, REMOVED:1           
      


/home/ubuntu/go/bin/vpp-probe --kubeconfig="/home/ubuntu/kubeconfigs/nsm/kind-3.kubeconfig" exec agentctl values

  ----------------------------------------------------------------------------------------------------------------------------------
   pod: wcm-nsm-vpp-forwarder-kcstt | namespace: nsm-system | node: kind-3-control-plane | cluster: kind-kind-3 | ip: 172.17.0.4
  ----------------------------------------------------------------------------------------------------------------------------------
  
    # agentctl values (took 154.860212ms)
    
      MODEL                  NAME                                                 STATE        DETAILS   LAST OP   ERROR     
      vpp.acls.acl           NSMmgmtInterfaceACL                                  CONFIGURED             CREATE              
                             vpp/acl/NSMmgmtInterfaceACL/interface/ingress/mgmt   CONFIGURED             CREATE              
      vpp.ipfix.ipfix                                                             obtained                                   
      vpp.nat.nat44-global                                                        obtained                                   
      vpp.arp                mgmt/10.244.0.10                                     CONFIGURED             CREATE              
      vpp.arp                mgmt/10.244.0.2                                      CONFIGURED             CREATE              
      vpp.arp                mgmt/10.244.0.3                                      CONFIGURED             CREATE              
      vpp.arp                mgmt/10.244.0.4                                      CONFIGURED             CREATE              
      vpp.arp                mgmt/10.244.0.5                                      CONFIGURED             CREATE              
      vpp.arp                mgmt/10.244.0.6                                      CONFIGURED             CREATE              
      vpp.arp                mgmt/10.244.0.7                                      CONFIGURED             CREATE              
      vpp.arp                mgmt/10.244.0.8                                      CONFIGURED             CREATE              
      vpp.arp                mgmt/10.244.0.9                                      CONFIGURED             CREATE              
      vpp.arp                mgmt/172.17.0.1                                      CONFIGURED             CREATE              
      vpp.interfaces         UNTAGGED-local0                                      obtained                                   
      vpp.interfaces         mgmt                                                 CONFIGURED             CREATE              
                             vpp/interface/mgmt/address/static/172.17.0.4/16      CONFIGURED             CREATE              
                             vpp/interface/mgmt/has-IP-address                    CONFIGURED             CREATE              
                             vpp/interface/mgmt/vrf/0/ip-version/v4               CONFIGURED             CREATE              
      vpp.proxyarp-global                                                         obtained                                   
      vpp.route              if/mgmt/vrf/0/dst/0.0.0.0/0/gw/172.17.0.1            CONFIGURED             CREATE              
      vpp.route              vrf/0/dst/0.0.0.0/0/gw/0.0.0.0                       obtained                                   
      vpp.route              vrf/0/dst/0.0.0.0/32/gw/0.0.0.0                      obtained                                   
      vpp.route              vrf/0/dst/224.0.0.0/4/gw/0.0.0.0                     obtained                                   
      vpp.route              vrf/0/dst/240.0.0.0/4/gw/0.0.0.0                     obtained                                   
      vpp.route              vrf/0/dst/255.255.255.255/32/gw/0.0.0.0              obtained                                   
      vpp.route              vrf/0/dst/::/0/gw/::                                 obtained                                   
      vpp.route              vrf/0/dst/fe80::/10/gw/::                            obtained                                   
      vpp.vrf-table          id/0/protocol/IPV4                                   obtained                                   
      vpp.vrf-table          id/0/protocol/IPV6                                   obtained                                   
                             linux/interface/host-name/eth0                       obtained                                   
                             linux/interface/host-name/lo                         obtained                                   
                             linux/interface/host-name/veth0cb99971               obtained                                   
                             linux/interface/host-name/veth12746f19               obtained                                   
                             linux/interface/host-name/veth157638e2               obtained                                   
                             linux/interface/host-name/veth28ae2657               obtained                                   
                             linux/interface/host-name/veth2ddf3976               obtained                                   
                             linux/interface/host-name/veth2f003b98               obtained                                   
                             linux/interface/host-name/veth385f4df5               obtained                                   
                             linux/interface/host-name/veth4b5a5579               obtained                                   
                             linux/interface/host-name/veth5391466d               obtained                                   
                             linux/interface/host-name/veth5e1f7576               obtained                                   
                             linux/interface/host-name/veth7e570e10               obtained                                   
                             linux/interface/host-name/veth8d8773f3               obtained                                   
                             linux/interface/host-name/veth96e2877e               obtained                                   
                             linux/interface/host-name/vethc5167cb2               obtained                                   
                             linux/interface/host-name/vethdc290eb2               obtained                                   
                             vpp/interface/UNTAGGED-local0/link-state/DOWN        obtained                                   
                             vpp/interface/mgmt/link-state/UP                     obtained                                   
      
  ----------------------------------------------------------------------------------------------------------------------------------
   pod: vl3-nse-green-7555496c4c-25rm4 | namespace: wcm-system | node: kind-3-control-plane | cluster: kind-kind-3 | ip: 10.244.0.15
  ----------------------------------------------------------------------------------------------------------------------------------
  
    # agentctl values (took 148.444542ms)
    
      MODEL                  NAME                                                                                      STATE        DETAILS   LAST OP   ERROR     
      vpp.ipfix.ipfix                                                                                                  obtained                                   
      vpp.nat.nat44-global                                                                                             obtained                                   
      vpp.interfaces         UNTAGGED-local0                                                                           obtained                                   
      vpp.interfaces         green-kind-3_vl3-nse-green-7555496c4c-fq9sm                                               CONFIGURED             CREATE              
                             vpp/interface/green-kind-3_vl3-nse-green-7555496c4c-fq9sm/address/static/172.100.0.2/30   CONFIGURED             CREATE              
                             vpp/interface/green-kind-3_vl3-nse-green-7555496c4c-fq9sm/has-IP-address                  CONFIGURED             CREATE              
                             vpp/interface/green-kind-3_vl3-nse-green-7555496c4c-fq9sm/rx-modes                        CONFIGURED             CREATE              
                             vpp/interface/green-kind-3_vl3-nse-green-7555496c4c-fq9sm/vrf/0/ip-version/v4             CONFIGURED             CREATE              
      vpp.proxyarp-global                                                                                              obtained                                   
      vpp.route              vrf/0/dst/0.0.0.0/0/gw/0.0.0.0                                                            obtained                                   
      vpp.route              vrf/0/dst/0.0.0.0/32/gw/0.0.0.0                                                           obtained                                   
      vpp.route              vrf/0/dst/172.100.0.0/24/gw/172.100.0.1                                                   CONFIGURED             CREATE              
      vpp.route              vrf/0/dst/224.0.0.0/4/gw/0.0.0.0                                                          obtained                                   
      vpp.route              vrf/0/dst/240.0.0.0/4/gw/0.0.0.0                                                          obtained                                   
      vpp.route              vrf/0/dst/255.255.255.255/32/gw/0.0.0.0                                                   obtained                                   
      vpp.route              vrf/0/dst/::/0/gw/::                                                                      obtained                                   
      vpp.route              vrf/0/dst/fe80::/10/gw/::                                                                 obtained                                   
      vpp.vrf-table          id/0/protocol/IPV4                                                                        obtained                                   
      vpp.vrf-table          id/0/protocol/IPV6                                                                        obtained                                   
                             linux/interface/host-name/eth0                                                            obtained                                   
                             linux/interface/host-name/lo                                                              obtained                                   
                             vpp/interface/UNTAGGED-local0/link-state/DOWN                                             obtained                                   
                             vpp/interface/green-kind-3_vl3-nse-green-7555496c4c-fq9sm/link-state/UP                   obtained                                   
      
  ----------------------------------------------------------------------------------------------------------------------------------
   pod: vl3-nse-green-7555496c4c-fq9sm | namespace: wcm-system | node: kind-3-control-plane | cluster: kind-kind-3 | ip: 10.244.0.16
  ----------------------------------------------------------------------------------------------------------------------------------
  
    # agentctl values (took 137.89343ms)
    
      MODEL                  NAME                                                     STATE        DETAILS   LAST OP   ERROR     
      vpp.ipfix.ipfix                                                                 obtained                                   
      vpp.nat.nat44-global                                                            obtained                                   
      vpp.interfaces         UNTAGGED-local0                                          obtained                                   
      vpp.interfaces         green2cw8m                                               CONFIGURED             CREATE              
                             vpp/interface/green2cw8m/address/static/172.100.0.1/30   CONFIGURED             CREATE              
                             vpp/interface/green2cw8m/has-IP-address                  CONFIGURED             CREATE              
                             vpp/interface/green2cw8m/vrf/0/ip-version/v4             CONFIGURED             CREATE              
      vpp.proxyarp-global                                                             obtained                                   
      vpp.route              vrf/0/dst/0.0.0.0/0/gw/0.0.0.0                           obtained                                   
      vpp.route              vrf/0/dst/0.0.0.0/32/gw/0.0.0.0                          obtained                                   
      vpp.route              vrf/0/dst/172.100.0.0/24/gw/172.100.0.2                  CONFIGURED             CREATE              
      vpp.route              vrf/0/dst/224.0.0.0/4/gw/0.0.0.0                         obtained                                   
      vpp.route              vrf/0/dst/240.0.0.0/4/gw/0.0.0.0                         obtained                                   
      vpp.route              vrf/0/dst/255.255.255.255/32/gw/0.0.0.0                  obtained                                   
      vpp.route              vrf/0/dst/::/0/gw/::                                     obtained                                   
      vpp.route              vrf/0/dst/fe80::/10/gw/::                                obtained                                   
      vpp.vrf-table          id/0/protocol/IPV4                                       obtained                                   
      vpp.vrf-table          id/0/protocol/IPV6                                       obtained                                   
                             linux/interface/host-name/eth0                           obtained                                   
                             linux/interface/host-name/lo                             obtained                                   
                             vpp/interface/UNTAGGED-local0/link-state/DOWN            obtained                                   
                             vpp/interface/green2cw8m/link-state/UP                   obtained                                   
      

