==== START logs for container wcm-nse-discovery of pod wcm-system/wcm-nse-discovery-7d675cc5f6-7597g ====
{"level":"info","ts":1632438298.3568141,"caller":"cmd/main.go:49","msg":"Starting WCM nse-discovery...","app":"nse-discovery"}
{"level":"info","ts":1632438298.3568738,"caller":"utils/nsrenv.go:29","msg":"All env variables:","app":"nse-discovery"}
{"level":"info","ts":1632438298.3568902,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_SERVICE_PORT=2112","app":"nse-discovery"}
{"level":"info","ts":1632438298.3569148,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_PORT=tcp://10.111.37.147:2112","app":"nse-discovery"}
{"level":"info","ts":1632438298.3569248,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_SERVICE_PORT=443","app":"nse-discovery"}
{"level":"info","ts":1632438298.356945,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_PORT=tcp://10.96.0.1:443","app":"nse-discovery"}
{"level":"info","ts":1632438298.3569508,"caller":"utils/nsrenv.go:31","msg":"NSE_NAMESPACE=wcm-system","app":"nse-discovery"}
{"level":"info","ts":1632438298.3569674,"caller":"utils/nsrenv.go:31","msg":"METRICS_PORT=2112","app":"nse-discovery"}
{"level":"info","ts":1632438298.3569882,"caller":"utils/nsrenv.go:31","msg":"HOSTNAME=wcm-nse-discovery-7d675cc5f6-7597g","app":"nse-discovery"}
{"level":"info","ts":1632438298.3569946,"caller":"utils/nsrenv.go:31","msg":"SHLVL=1","app":"nse-discovery"}
{"level":"info","ts":1632438298.3570032,"caller":"utils/nsrenv.go:31","msg":"HOME=/root","app":"nse-discovery"}
{"level":"info","ts":1632438298.3570092,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_SERVICE_PORT_MONITORING=2112","app":"nse-discovery"}
{"level":"info","ts":1632438298.3570194,"caller":"utils/nsrenv.go:31","msg":"CLUSTER_NAME=kind-11","app":"nse-discovery"}
{"level":"info","ts":1632438298.3570347,"caller":"utils/nsrenv.go:31","msg":"INSECURE=false","app":"nse-discovery"}
{"level":"info","ts":1632438298.3570476,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_PORT_443_TCP_ADDR=10.96.0.1","app":"nse-discovery"}
{"level":"info","ts":1632438298.3570516,"caller":"utils/nsrenv.go:31","msg":"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin","app":"nse-discovery"}
{"level":"info","ts":1632438298.3570747,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_PORT_2112_TCP_ADDR=10.111.37.147","app":"nse-discovery"}
{"level":"info","ts":1632438298.3570902,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_PORT_443_TCP_PORT=443","app":"nse-discovery"}
{"level":"info","ts":1632438298.3571055,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_PORT_443_TCP_PROTO=tcp","app":"nse-discovery"}
{"level":"info","ts":1632438298.3571098,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_PORT_2112_TCP_PORT=2112","app":"nse-discovery"}
{"level":"info","ts":1632438298.3571262,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_PORT_2112_TCP_PROTO=tcp","app":"nse-discovery"}
{"level":"info","ts":1632438298.35713,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_SERVICE_PORT_HTTPS=443","app":"nse-discovery"}
{"level":"info","ts":1632438298.3571453,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_PORT_443_TCP=tcp://10.96.0.1:443","app":"nse-discovery"}
{"level":"info","ts":1632438298.3571496,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_SERVICE_HOST=10.111.37.147","app":"nse-discovery"}
{"level":"info","ts":1632438298.3571568,"caller":"utils/nsrenv.go:31","msg":"KUBERNETES_SERVICE_HOST=10.96.0.1","app":"nse-discovery"}
{"level":"info","ts":1632438298.357172,"caller":"utils/nsrenv.go:31","msg":"PWD=/","app":"nse-discovery"}
{"level":"info","ts":1632438298.357176,"caller":"utils/nsrenv.go:31","msg":"POD_UID=e3f0abc1-e762-44ec-81f5-a1422ed0009b","app":"nse-discovery"}
{"level":"info","ts":1632438298.3571832,"caller":"utils/nsrenv.go:31","msg":"WCM_NSE_DISCOVERY_PORT_2112_TCP=tcp://10.111.37.147:2112","app":"nse-discovery"}
{"level":"info","ts":1632438298.3571885,"caller":"utils/nsrenv.go:31","msg":"NSR_ADDRESS=wcm-proxy-nsmgr.nsm-system:5005","app":"nse-discovery"}
{"level":"info","ts":1632438298.357194,"caller":"metrics/metrics.go:56","msg":"Serving metrics","app":"nse-discovery"}
time="2021-09-23T23:04:58Z" level=info msg="Creating logger from config: &{wcm-nse-discovery.tpl@wcm-nse-discovery-7d675cc5f6-7597g false false [] 0xc0000777a0 0xc000197810 <nil> <nil> <nil>}"
2021/09/23 23:04:58 debug logging disabled
2021/09/23 23:04:58 Initializing logging reporter
2021/09/23 23:04:58 debug logging disabled
{"level":"info","ts":1632438298.36569,"caller":"nseinformer/nseInformerController.go:77","msg":"Creating NSE CR controller","app":"nse-discovery"}
{"level":"info","ts":1632438298.3658066,"caller":"nseinformer/nseInformerController.go:99","msg":"Created new informer for NSE pod controller","app":"nse-discovery"}
{"level":"info","ts":1632438298.3658645,"caller":"nseinformer/nseInformerController.go:139","msg":"starting NSE pod controller","app":"nse-discovery"}
{"level":"info","ts":1632438512.1314769,"caller":"nseinformer/nseInformerController.go:114","msg":"new NSE CR was created: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438512.1322923,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named example798f5...","app":"nse-discovery"}
{"level":"info","ts":1632438512.1323373,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438512.1323848,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:08:32Z" level=info msg="==--> discovery.FindNetworkService() span:3f6256f913fa548a:3f6256f913fa548a:0000000000000000:1"
time="2021-09-23T23:08:32Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=3f6256f913fa548a:3f6256f913fa548a:0000000000000000:1"
time="2021-09-23T23:08:32Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=3f6256f913fa548a:3f6256f913fa548a:0000000000000000:1"
time="2021-09-23T23:08:32Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:08:32Z" level=info msg="==----> initRegistryClient() span:3f6256f913fa548a:6794ecf8caadb350:3f6256f913fa548a:1"
time="2021-09-23T23:08:32Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
{"level":"info","ts":1632438512.1327107,"caller":"nseinformer/nseInformerController.go:114","msg":"new NSE CR was created: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-09-23T23:08:32Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3f6256f913fa548a:6794ecf8caadb350:3f6256f913fa548a:1"
time="2021-09-23T23:08:32Z" level=info msg="Establish connection with the spire provider at address:unix:///run/spire/sockets/agent.sock"
time="2021-09-23T23:08:32Z" level=info msg="Issued identity:spiffe://member1.com/wcm-nse-discovery"
time="2021-09-23T23:08:32Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:08:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:08:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:08:32Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:08:32Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:08:32Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="3f6256f913fa548a:6794ecf8caadb350:3f6256f913fa548a:1"
2021/09/23 23:08:32 Reporting span 3f6256f913fa548a:6794ecf8caadb350:3f6256f913fa548a:1
{"level":"info","ts":1632438512.3272295,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:08:32Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=3f6256f913fa548a:3f6256f913fa548a:0000000000000000:1"
time="2021-09-23T23:08:32Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=3f6256f913fa548a:3f6256f913fa548a:0000000000000000:1"
2021/09/23 23:08:32 Reporting span 3f6256f913fa548a:3f1b93fb95efff28:3f6256f913fa548a:1
time="2021-09-23T23:08:32Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=3f6256f913fa548a:3f6256f913fa548a:0000000000000000:1"
2021/09/23 23:08:32 Reporting span 3f6256f913fa548a:3f6256f913fa548a:0000000000000000:1
{"level":"info","ts":1632438512.347779,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438512.3478158,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438512.3478472,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438512.347858,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:08:32Z" level=info msg="==--> discovery.FindNetworkService() span:1349d10c594eb8cc:1349d10c594eb8cc:0000000000000000:1"
time="2021-09-23T23:08:32Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=1349d10c594eb8cc:1349d10c594eb8cc:0000000000000000:1"
time="2021-09-23T23:08:32Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=1349d10c594eb8cc:1349d10c594eb8cc:0000000000000000:1"
time="2021-09-23T23:08:32Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:08:32Z" level=info msg="==----> initRegistryClient() span:1349d10c594eb8cc:4f13817ceb523096:1349d10c594eb8cc:1"
time="2021-09-23T23:08:32Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:08:32Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1349d10c594eb8cc:4f13817ceb523096:1349d10c594eb8cc:1"
time="2021-09-23T23:08:32Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:08:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:08:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:08:32Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:08:32Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:08:32Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="1349d10c594eb8cc:4f13817ceb523096:1349d10c594eb8cc:1"
2021/09/23 23:08:32 Reporting span 1349d10c594eb8cc:4f13817ceb523096:1349d10c594eb8cc:1
{"level":"info","ts":1632438512.4603605,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:08:32Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1349d10c594eb8cc:1349d10c594eb8cc:0000000000000000:1"
time="2021-09-23T23:08:32Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=1349d10c594eb8cc:1349d10c594eb8cc:0000000000000000:1"
2021/09/23 23:08:32 Reporting span 1349d10c594eb8cc:3aba6ed22fcf9866:1349d10c594eb8cc:1
time="2021-09-23T23:08:32Z" level=info msg=">><<---- response={} span=1349d10c594eb8cc:1349d10c594eb8cc:0000000000000000:1"
2021/09/23 23:08:32 Reporting span 1349d10c594eb8cc:1349d10c594eb8cc:0000000000000000:1
{"level":"info","ts":1632438512.4748542,"caller":"nseinformer/nseInformerController.go:211","msg":"No endpoints in the global NSR for network-service: example","app":"nse-discovery"}
{"level":"info","ts":1632438512.474883,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 0 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438512.4748976,"caller":"nseinformer/nseInformerController.go:356","msg":"NSE diff: For cluster kind-11, found diff endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438512.474927,"caller":"nseinformer/nseInformerController.go:356","msg":"NSE diff: For cluster kind-11, found diff endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438512.474959,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438512.475075,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438512.4767604,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 2 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438512.4767702,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:08:32Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:08:32Z" level=info msg="==--> initRegistryClient() span:64808b491c923a74:64808b491c923a74:0000000000000000:1"
time="2021-09-23T23:08:32Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:08:32Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="64808b491c923a74:64808b491c923a74:0000000000000000:1"
time="2021-09-23T23:08:32Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:08:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:08:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:08:32Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:08:32Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:08:32Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="64808b491c923a74:64808b491c923a74:0000000000000000:1"
2021/09/23 23:08:32 Reporting span 64808b491c923a74:64808b491c923a74:0000000000000000:1
time="2021-09-23T23:08:32Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:08:32Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:08:32 Reporting span 7709ada5763459a5:7709ada5763459a5:0000000000000000:1
time="2021-09-23T23:08:32Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:08:32Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:08:32Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:08:32 Reporting span 7d53c75c197009d6:7d53c75c197009d6:0000000000000000:1
time="2021-09-23T23:08:32Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438512.594487,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438512.594612,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named exampler6q79...","app":"nse-discovery"}
{"level":"info","ts":1632438512.5946748,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438512.5947294,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:08:32Z" level=info msg="==--> discovery.FindNetworkService() span:3c37ae055164be40:3c37ae055164be40:0000000000000000:1"
time="2021-09-23T23:08:32Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=3c37ae055164be40:3c37ae055164be40:0000000000000000:1"
time="2021-09-23T23:08:32Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=3c37ae055164be40:3c37ae055164be40:0000000000000000:1"
time="2021-09-23T23:08:32Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:08:32Z" level=info msg="==----> initRegistryClient() span:3c37ae055164be40:343caf5421942839:3c37ae055164be40:1"
time="2021-09-23T23:08:32Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:08:32Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3c37ae055164be40:343caf5421942839:3c37ae055164be40:1"
time="2021-09-23T23:08:32Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:08:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:08:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:08:32Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:08:32Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:08:32Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="3c37ae055164be40:343caf5421942839:3c37ae055164be40:1"
2021/09/23 23:08:32 Reporting span 3c37ae055164be40:343caf5421942839:3c37ae055164be40:1
{"level":"info","ts":1632438512.6673777,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:08:32Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=3c37ae055164be40:3c37ae055164be40:0000000000000000:1"
time="2021-09-23T23:08:32Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=3c37ae055164be40:3c37ae055164be40:0000000000000000:1"
2021/09/23 23:08:32 Reporting span 3c37ae055164be40:484a85b9fcdf143f:3c37ae055164be40:1
time="2021-09-23T23:08:32Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=3c37ae055164be40:3c37ae055164be40:0000000000000000:1"
2021/09/23 23:08:32 Reporting span 3c37ae055164be40:3c37ae055164be40:0000000000000000:1
{"level":"info","ts":1632438512.6796703,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438512.680768,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438512.6807935,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438512.68081,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:08:32Z" level=info msg="==--> discovery.FindNetworkService() span:232101e81964c98a:232101e81964c98a:0000000000000000:1"
time="2021-09-23T23:08:32Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=232101e81964c98a:232101e81964c98a:0000000000000000:1"
time="2021-09-23T23:08:32Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=232101e81964c98a:232101e81964c98a:0000000000000000:1"
time="2021-09-23T23:08:32Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:08:32Z" level=info msg="==----> initRegistryClient() span:232101e81964c98a:0b8d77dece5930f2:232101e81964c98a:1"
time="2021-09-23T23:08:32Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:08:32Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="232101e81964c98a:0b8d77dece5930f2:232101e81964c98a:1"
time="2021-09-23T23:08:32Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:08:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:08:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:08:32Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:08:32Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:08:32Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="232101e81964c98a:0b8d77dece5930f2:232101e81964c98a:1"
2021/09/23 23:08:32 Reporting span 232101e81964c98a:0b8d77dece5930f2:232101e81964c98a:1
{"level":"info","ts":1632438512.7666934,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:08:32Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=232101e81964c98a:232101e81964c98a:0000000000000000:1"
time="2021-09-23T23:08:32Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=232101e81964c98a:232101e81964c98a:0000000000000000:1"
2021/09/23 23:08:32 Reporting span 232101e81964c98a:2da415bd29484132:232101e81964c98a:1
time="2021-09-23T23:08:32Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=232101e81964c98a:232101e81964c98a:0000000000000000:1"
2021/09/23 23:08:32 Reporting span 232101e81964c98a:232101e81964c98a:0000000000000000:1
{"level":"info","ts":1632438512.7708082,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438512.7708516,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438512.7708588,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 2 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438512.7708669,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438512.7708724,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438512.7708778,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438512.770884,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438512.770889,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438512.7708936,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438512.7708976,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438512.770903,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438512.7709079,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438512.7709239,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:08:32Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:08:32Z" level=info msg="==--> initRegistryClient() span:360c06cf524197a5:360c06cf524197a5:0000000000000000:1"
time="2021-09-23T23:08:32Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:08:32Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="360c06cf524197a5:360c06cf524197a5:0000000000000000:1"
time="2021-09-23T23:08:32Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:08:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:08:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:08:32Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:08:32Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:08:32Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="360c06cf524197a5:360c06cf524197a5:0000000000000000:1"
2021/09/23 23:08:32 Reporting span 360c06cf524197a5:360c06cf524197a5:0000000000000000:1
time="2021-09-23T23:08:32Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:08:32Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:08:32 Reporting span 133176a5cfc4aa48:133176a5cfc4aa48:0000000000000000:1
time="2021-09-23T23:08:32Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:08:32Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:08:32Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:08:32 Reporting span 5412c8154dd8fc33:5412c8154dd8fc33:0000000000000000:1
time="2021-09-23T23:08:32Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438512.8707175,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438538.4311912,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438538.4316444,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named example798f5...","app":"nse-discovery"}
{"level":"info","ts":1632438538.4316967,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438538.4317343,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:08:58Z" level=info msg="==--> discovery.FindNetworkService() span:31b9296e3357c9d9:31b9296e3357c9d9:0000000000000000:1"
time="2021-09-23T23:08:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=31b9296e3357c9d9:31b9296e3357c9d9:0000000000000000:1"
time="2021-09-23T23:08:58Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=31b9296e3357c9d9:31b9296e3357c9d9:0000000000000000:1"
time="2021-09-23T23:08:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:08:58Z" level=info msg="==----> initRegistryClient() span:31b9296e3357c9d9:1cf57a9930bc75e2:31b9296e3357c9d9:1"
time="2021-09-23T23:08:58Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
{"level":"info","ts":1632438538.4314344,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-09-23T23:08:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="31b9296e3357c9d9:1cf57a9930bc75e2:31b9296e3357c9d9:1"
time="2021-09-23T23:08:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:08:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:08:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:08:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:08:58Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:08:58Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="31b9296e3357c9d9:1cf57a9930bc75e2:31b9296e3357c9d9:1"
2021/09/23 23:08:58 Reporting span 31b9296e3357c9d9:1cf57a9930bc75e2:31b9296e3357c9d9:1
{"level":"info","ts":1632438538.4870842,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:08:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=31b9296e3357c9d9:31b9296e3357c9d9:0000000000000000:1"
time="2021-09-23T23:08:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=31b9296e3357c9d9:31b9296e3357c9d9:0000000000000000:1"
2021/09/23 23:08:58 Reporting span 31b9296e3357c9d9:5c195efe6ffa17d9:31b9296e3357c9d9:1
time="2021-09-23T23:08:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=31b9296e3357c9d9:31b9296e3357c9d9:0000000000000000:1"
2021/09/23 23:08:58 Reporting span 31b9296e3357c9d9:31b9296e3357c9d9:0000000000000000:1
{"level":"info","ts":1632438538.5431173,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438538.5432322,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438538.5432405,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438538.5432472,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:08:58Z" level=info msg="==--> discovery.FindNetworkService() span:0ba760d04dff0e0a:0ba760d04dff0e0a:0000000000000000:1"
time="2021-09-23T23:08:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=0ba760d04dff0e0a:0ba760d04dff0e0a:0000000000000000:1"
time="2021-09-23T23:08:58Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=0ba760d04dff0e0a:0ba760d04dff0e0a:0000000000000000:1"
time="2021-09-23T23:08:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:08:58Z" level=info msg="==----> initRegistryClient() span:0ba760d04dff0e0a:592e6bee984539dd:0ba760d04dff0e0a:1"
time="2021-09-23T23:08:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:08:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="0ba760d04dff0e0a:592e6bee984539dd:0ba760d04dff0e0a:1"
time="2021-09-23T23:08:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:08:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:08:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:08:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:08:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:08:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="0ba760d04dff0e0a:592e6bee984539dd:0ba760d04dff0e0a:1"
2021/09/23 23:08:58 Reporting span 0ba760d04dff0e0a:592e6bee984539dd:0ba760d04dff0e0a:1
{"level":"info","ts":1632438538.576933,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:08:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=0ba760d04dff0e0a:0ba760d04dff0e0a:0000000000000000:1"
time="2021-09-23T23:08:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=0ba760d04dff0e0a:0ba760d04dff0e0a:0000000000000000:1"
2021/09/23 23:08:58 Reporting span 0ba760d04dff0e0a:01fdf936ba6466cb:0ba760d04dff0e0a:1
time="2021-09-23T23:08:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=0ba760d04dff0e0a:0ba760d04dff0e0a:0000000000000000:1"
2021/09/23 23:08:58 Reporting span 0ba760d04dff0e0a:0ba760d04dff0e0a:0000000000000000:1
{"level":"info","ts":1632438538.5839887,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438538.5840197,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438538.5840263,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438538.5840938,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438538.5841048,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438538.5841553,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438538.584164,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438538.5841691,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438538.584196,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438538.5842035,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438538.5842226,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438538.5842314,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438538.5842366,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438538.5842519,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438538.5842595,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438538.584265,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438538.5843103,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438538.5843806,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438538.5843873,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:08:58Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:08:58Z" level=info msg="==--> initRegistryClient() span:420ce3a236d46f1e:420ce3a236d46f1e:0000000000000000:1"
time="2021-09-23T23:08:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:08:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="420ce3a236d46f1e:420ce3a236d46f1e:0000000000000000:1"
time="2021-09-23T23:08:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:08:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:08:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:08:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:08:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:08:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="420ce3a236d46f1e:420ce3a236d46f1e:0000000000000000:1"
2021/09/23 23:08:58 Reporting span 420ce3a236d46f1e:420ce3a236d46f1e:0000000000000000:1
time="2021-09-23T23:08:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:08:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:08:58 Reporting span 154b9dbc16dbd7f0:154b9dbc16dbd7f0:0000000000000000:1
time="2021-09-23T23:08:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:08:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:08:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:08:58 Reporting span 1c86be2eba6f37ac:1c86be2eba6f37ac:0000000000000000:1
time="2021-09-23T23:08:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438538.6351838,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438538.6352522,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named exampler6q79...","app":"nse-discovery"}
{"level":"info","ts":1632438538.6352644,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438538.6352742,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:08:58Z" level=info msg="==--> discovery.FindNetworkService() span:6198dcde54a80d0f:6198dcde54a80d0f:0000000000000000:1"
time="2021-09-23T23:08:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=6198dcde54a80d0f:6198dcde54a80d0f:0000000000000000:1"
time="2021-09-23T23:08:58Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=6198dcde54a80d0f:6198dcde54a80d0f:0000000000000000:1"
time="2021-09-23T23:08:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:08:58Z" level=info msg="==----> initRegistryClient() span:6198dcde54a80d0f:47b56eb2db9568a1:6198dcde54a80d0f:1"
time="2021-09-23T23:08:58Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:08:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6198dcde54a80d0f:47b56eb2db9568a1:6198dcde54a80d0f:1"
time="2021-09-23T23:08:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:08:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:08:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:08:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:08:58Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:08:58Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="6198dcde54a80d0f:47b56eb2db9568a1:6198dcde54a80d0f:1"
2021/09/23 23:08:58 Reporting span 6198dcde54a80d0f:47b56eb2db9568a1:6198dcde54a80d0f:1
{"level":"info","ts":1632438538.6785605,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:08:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6198dcde54a80d0f:6198dcde54a80d0f:0000000000000000:1"
time="2021-09-23T23:08:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=6198dcde54a80d0f:6198dcde54a80d0f:0000000000000000:1"
2021/09/23 23:08:58 Reporting span 6198dcde54a80d0f:59da4c5d12c0371d:6198dcde54a80d0f:1
time="2021-09-23T23:08:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6198dcde54a80d0f:6198dcde54a80d0f:0000000000000000:1"
2021/09/23 23:08:58 Reporting span 6198dcde54a80d0f:6198dcde54a80d0f:0000000000000000:1
{"level":"info","ts":1632438538.684446,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438538.6844692,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438538.684476,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438538.6844847,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:08:58Z" level=info msg="==--> discovery.FindNetworkService() span:675ecec7067e6084:675ecec7067e6084:0000000000000000:1"
time="2021-09-23T23:08:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=675ecec7067e6084:675ecec7067e6084:0000000000000000:1"
time="2021-09-23T23:08:58Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=675ecec7067e6084:675ecec7067e6084:0000000000000000:1"
time="2021-09-23T23:08:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:08:58Z" level=info msg="==----> initRegistryClient() span:675ecec7067e6084:226f497d0fdaa877:675ecec7067e6084:1"
time="2021-09-23T23:08:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:08:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="675ecec7067e6084:226f497d0fdaa877:675ecec7067e6084:1"
time="2021-09-23T23:08:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:08:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:08:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:08:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:08:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:08:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="675ecec7067e6084:226f497d0fdaa877:675ecec7067e6084:1"
2021/09/23 23:08:58 Reporting span 675ecec7067e6084:226f497d0fdaa877:675ecec7067e6084:1
{"level":"info","ts":1632438538.7138112,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:08:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=675ecec7067e6084:675ecec7067e6084:0000000000000000:1"
time="2021-09-23T23:08:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=675ecec7067e6084:675ecec7067e6084:0000000000000000:1"
2021/09/23 23:08:58 Reporting span 675ecec7067e6084:4fcdff9814c4c4e2:675ecec7067e6084:1
time="2021-09-23T23:08:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=675ecec7067e6084:675ecec7067e6084:0000000000000000:1"
2021/09/23 23:08:58 Reporting span 675ecec7067e6084:675ecec7067e6084:0000000000000000:1
{"level":"info","ts":1632438538.717538,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438538.7175844,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438538.7176087,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438538.7176256,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438538.7176404,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438538.7176573,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438538.7176716,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438538.7177057,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438538.717722,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438538.7177372,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438538.7177513,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438538.7177799,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438538.7178035,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438538.7178204,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438538.7178342,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438538.7178476,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438538.717861,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438538.7178843,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438538.7179067,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:08:58Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:08:58Z" level=info msg="==--> initRegistryClient() span:7787a884f1163d9e:7787a884f1163d9e:0000000000000000:1"
time="2021-09-23T23:08:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:08:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7787a884f1163d9e:7787a884f1163d9e:0000000000000000:1"
time="2021-09-23T23:08:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:08:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:08:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:08:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:08:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:08:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="7787a884f1163d9e:7787a884f1163d9e:0000000000000000:1"
2021/09/23 23:08:58 Reporting span 7787a884f1163d9e:7787a884f1163d9e:0000000000000000:1
time="2021-09-23T23:08:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:08:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:08:58 Reporting span 38c6e21911f704bd:38c6e21911f704bd:0000000000000000:1
time="2021-09-23T23:08:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:08:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:08:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:08:58 Reporting span 07cee0a0f8308bfb:07cee0a0f8308bfb:0000000000000000:1
time="2021-09-23T23:08:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438538.7775857,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438568.4315577,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438568.431763,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438568.4317894,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named example798f5...","app":"nse-discovery"}
{"level":"info","ts":1632438568.4317966,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438568.4318392,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:09:28Z" level=info msg="==--> discovery.FindNetworkService() span:4337064849d8b0c2:4337064849d8b0c2:0000000000000000:1"
time="2021-09-23T23:09:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=4337064849d8b0c2:4337064849d8b0c2:0000000000000000:1"
time="2021-09-23T23:09:28Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=4337064849d8b0c2:4337064849d8b0c2:0000000000000000:1"
time="2021-09-23T23:09:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:09:28Z" level=info msg="==----> initRegistryClient() span:4337064849d8b0c2:5264a7281b9092e4:4337064849d8b0c2:1"
time="2021-09-23T23:09:28Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:09:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4337064849d8b0c2:5264a7281b9092e4:4337064849d8b0c2:1"
time="2021-09-23T23:09:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:09:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:09:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:09:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:09:28Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:09:28Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="4337064849d8b0c2:5264a7281b9092e4:4337064849d8b0c2:1"
2021/09/23 23:09:28 Reporting span 4337064849d8b0c2:5264a7281b9092e4:4337064849d8b0c2:1
{"level":"info","ts":1632438568.485936,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:09:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=4337064849d8b0c2:4337064849d8b0c2:0000000000000000:1"
time="2021-09-23T23:09:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=4337064849d8b0c2:4337064849d8b0c2:0000000000000000:1"
2021/09/23 23:09:28 Reporting span 4337064849d8b0c2:6d9c10ec01293e87:4337064849d8b0c2:1
time="2021-09-23T23:09:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=4337064849d8b0c2:4337064849d8b0c2:0000000000000000:1"
2021/09/23 23:09:28 Reporting span 4337064849d8b0c2:4337064849d8b0c2:0000000000000000:1
{"level":"info","ts":1632438568.5067682,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438568.50679,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438568.506797,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438568.5068035,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:09:28Z" level=info msg="==--> discovery.FindNetworkService() span:14c7f3c2351af53e:14c7f3c2351af53e:0000000000000000:1"
time="2021-09-23T23:09:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=14c7f3c2351af53e:14c7f3c2351af53e:0000000000000000:1"
time="2021-09-23T23:09:28Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=14c7f3c2351af53e:14c7f3c2351af53e:0000000000000000:1"
time="2021-09-23T23:09:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:09:28Z" level=info msg="==----> initRegistryClient() span:14c7f3c2351af53e:2cb8019eeffcd119:14c7f3c2351af53e:1"
time="2021-09-23T23:09:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:09:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="14c7f3c2351af53e:2cb8019eeffcd119:14c7f3c2351af53e:1"
time="2021-09-23T23:09:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:09:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:09:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:09:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:09:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:09:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="14c7f3c2351af53e:2cb8019eeffcd119:14c7f3c2351af53e:1"
2021/09/23 23:09:28 Reporting span 14c7f3c2351af53e:2cb8019eeffcd119:14c7f3c2351af53e:1
{"level":"info","ts":1632438568.5624127,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:09:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=14c7f3c2351af53e:14c7f3c2351af53e:0000000000000000:1"
time="2021-09-23T23:09:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=14c7f3c2351af53e:14c7f3c2351af53e:0000000000000000:1"
2021/09/23 23:09:28 Reporting span 14c7f3c2351af53e:2dfa9e58ff394300:14c7f3c2351af53e:1
time="2021-09-23T23:09:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=14c7f3c2351af53e:14c7f3c2351af53e:0000000000000000:1"
2021/09/23 23:09:28 Reporting span 14c7f3c2351af53e:14c7f3c2351af53e:0000000000000000:1
{"level":"info","ts":1632438568.568578,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438568.568603,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438568.5686095,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438568.5686443,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438568.5686553,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438568.5686848,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438568.5686944,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438568.5686994,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438568.5687048,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438568.56878,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438568.568792,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438568.568797,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438568.5688155,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438568.5688434,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438568.568849,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438568.568854,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438568.5688586,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438568.568871,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438568.568894,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:09:28Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:09:28Z" level=info msg="==--> initRegistryClient() span:206b60fbbc94ecfa:206b60fbbc94ecfa:0000000000000000:1"
time="2021-09-23T23:09:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:09:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="206b60fbbc94ecfa:206b60fbbc94ecfa:0000000000000000:1"
time="2021-09-23T23:09:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:09:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:09:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:09:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:09:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:09:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="206b60fbbc94ecfa:206b60fbbc94ecfa:0000000000000000:1"
2021/09/23 23:09:28 Reporting span 206b60fbbc94ecfa:206b60fbbc94ecfa:0000000000000000:1
time="2021-09-23T23:09:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:09:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:09:28 Reporting span 021ae39a969a4c72:021ae39a969a4c72:0000000000000000:1
time="2021-09-23T23:09:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:09:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:09:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:09:28 Reporting span 2eae352b33f78b1f:2eae352b33f78b1f:0000000000000000:1
time="2021-09-23T23:09:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438568.6272273,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438568.6272972,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named exampler6q79...","app":"nse-discovery"}
{"level":"info","ts":1632438568.6273067,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438568.6273134,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:09:28Z" level=info msg="==--> discovery.FindNetworkService() span:1f87e506dba12b30:1f87e506dba12b30:0000000000000000:1"
time="2021-09-23T23:09:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=1f87e506dba12b30:1f87e506dba12b30:0000000000000000:1"
time="2021-09-23T23:09:28Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=1f87e506dba12b30:1f87e506dba12b30:0000000000000000:1"
time="2021-09-23T23:09:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:09:28Z" level=info msg="==----> initRegistryClient() span:1f87e506dba12b30:339b35078b54aba5:1f87e506dba12b30:1"
time="2021-09-23T23:09:28Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:09:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1f87e506dba12b30:339b35078b54aba5:1f87e506dba12b30:1"
time="2021-09-23T23:09:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:09:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:09:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:09:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:09:28Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:09:28Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="1f87e506dba12b30:339b35078b54aba5:1f87e506dba12b30:1"
2021/09/23 23:09:28 Reporting span 1f87e506dba12b30:339b35078b54aba5:1f87e506dba12b30:1
{"level":"info","ts":1632438568.6525497,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:09:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1f87e506dba12b30:1f87e506dba12b30:0000000000000000:1"
time="2021-09-23T23:09:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=1f87e506dba12b30:1f87e506dba12b30:0000000000000000:1"
2021/09/23 23:09:28 Reporting span 1f87e506dba12b30:1ba6be2ba76b9f5a:1f87e506dba12b30:1
time="2021-09-23T23:09:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1f87e506dba12b30:1f87e506dba12b30:0000000000000000:1"
2021/09/23 23:09:28 Reporting span 1f87e506dba12b30:1f87e506dba12b30:0000000000000000:1
{"level":"info","ts":1632438568.6571665,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438568.65719,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438568.6571972,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438568.6572058,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:09:28Z" level=info msg="==--> discovery.FindNetworkService() span:7ac629df26124d6e:7ac629df26124d6e:0000000000000000:1"
time="2021-09-23T23:09:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=7ac629df26124d6e:7ac629df26124d6e:0000000000000000:1"
time="2021-09-23T23:09:28Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=7ac629df26124d6e:7ac629df26124d6e:0000000000000000:1"
time="2021-09-23T23:09:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:09:28Z" level=info msg="==----> initRegistryClient() span:7ac629df26124d6e:32a9731def10bf23:7ac629df26124d6e:1"
time="2021-09-23T23:09:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:09:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7ac629df26124d6e:32a9731def10bf23:7ac629df26124d6e:1"
time="2021-09-23T23:09:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:09:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:09:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:09:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:09:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:09:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="7ac629df26124d6e:32a9731def10bf23:7ac629df26124d6e:1"
2021/09/23 23:09:28 Reporting span 7ac629df26124d6e:32a9731def10bf23:7ac629df26124d6e:1
{"level":"info","ts":1632438568.6894722,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:09:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7ac629df26124d6e:7ac629df26124d6e:0000000000000000:1"
time="2021-09-23T23:09:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=7ac629df26124d6e:7ac629df26124d6e:0000000000000000:1"
2021/09/23 23:09:28 Reporting span 7ac629df26124d6e:396416c20c2db2c3:7ac629df26124d6e:1
time="2021-09-23T23:09:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7ac629df26124d6e:7ac629df26124d6e:0000000000000000:1"
2021/09/23 23:09:28 Reporting span 7ac629df26124d6e:7ac629df26124d6e:0000000000000000:1
{"level":"info","ts":1632438568.6938446,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438568.6938818,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438568.6938937,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438568.693899,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438568.6940074,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438568.6940231,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438568.6940289,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438568.694034,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438568.6940403,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438568.694056,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438568.6940722,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438568.6940777,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438568.6940823,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438568.6940873,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438568.6940918,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438568.694096,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438568.6941779,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438568.6941833,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438568.6941888,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:09:28Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:09:28Z" level=info msg="==--> initRegistryClient() span:7654ef2d0051ad76:7654ef2d0051ad76:0000000000000000:1"
time="2021-09-23T23:09:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:09:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7654ef2d0051ad76:7654ef2d0051ad76:0000000000000000:1"
time="2021-09-23T23:09:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:09:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:09:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:09:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:09:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:09:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="7654ef2d0051ad76:7654ef2d0051ad76:0000000000000000:1"
2021/09/23 23:09:28 Reporting span 7654ef2d0051ad76:7654ef2d0051ad76:0000000000000000:1
time="2021-09-23T23:09:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:09:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:09:28 Reporting span 1e3d4b82fb66a8a0:1e3d4b82fb66a8a0:0000000000000000:1
time="2021-09-23T23:09:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:09:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:09:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:09:28 Reporting span 7fd8468926cdd1b6:7fd8468926cdd1b6:0000000000000000:1
time="2021-09-23T23:09:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438568.7732358,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438598.4325361,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438598.4327989,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438598.4327986,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named example798f5...","app":"nse-discovery"}
{"level":"info","ts":1632438598.4331083,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438598.4332085,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:09:58Z" level=info msg="==--> discovery.FindNetworkService() span:34b929789be50632:34b929789be50632:0000000000000000:1"
time="2021-09-23T23:09:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=34b929789be50632:34b929789be50632:0000000000000000:1"
time="2021-09-23T23:09:58Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=34b929789be50632:34b929789be50632:0000000000000000:1"
time="2021-09-23T23:09:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:09:58Z" level=info msg="==----> initRegistryClient() span:34b929789be50632:5a144985e755bfa5:34b929789be50632:1"
time="2021-09-23T23:09:58Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:09:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="34b929789be50632:5a144985e755bfa5:34b929789be50632:1"
time="2021-09-23T23:09:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:09:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:09:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:09:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:09:58Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:09:58Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="34b929789be50632:5a144985e755bfa5:34b929789be50632:1"
2021/09/23 23:09:58 Reporting span 34b929789be50632:5a144985e755bfa5:34b929789be50632:1
{"level":"info","ts":1632438598.503053,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:09:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=34b929789be50632:34b929789be50632:0000000000000000:1"
time="2021-09-23T23:09:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=34b929789be50632:34b929789be50632:0000000000000000:1"
2021/09/23 23:09:58 Reporting span 34b929789be50632:53159900c9ae5746:34b929789be50632:1
time="2021-09-23T23:09:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=34b929789be50632:34b929789be50632:0000000000000000:1"
2021/09/23 23:09:58 Reporting span 34b929789be50632:34b929789be50632:0000000000000000:1
{"level":"info","ts":1632438598.523938,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438598.5239897,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438598.5240083,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438598.524015,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:09:58Z" level=info msg="==--> discovery.FindNetworkService() span:11612e0603cb2e71:11612e0603cb2e71:0000000000000000:1"
time="2021-09-23T23:09:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=11612e0603cb2e71:11612e0603cb2e71:0000000000000000:1"
time="2021-09-23T23:09:58Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=11612e0603cb2e71:11612e0603cb2e71:0000000000000000:1"
time="2021-09-23T23:09:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:09:58Z" level=info msg="==----> initRegistryClient() span:11612e0603cb2e71:0adb56c5f978ac1a:11612e0603cb2e71:1"
time="2021-09-23T23:09:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:10:18Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="11612e0603cb2e71:0adb56c5f978ac1a:11612e0603cb2e71:1"
time="2021-09-23T23:10:18Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:10:18Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:10:18Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:10:18Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:10:23Z" level=error msg="Failed to get the right certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:10:23Z" level=error msg="tls config is nil for target: example.wcm-cisco.com:443"
time="2021-09-23T23:10:23Z" level=error msg="Failed to dial Network Service Registry at example.wcm-cisco.com:443: tls config is nil for target: example.wcm-cisco.com:443" operation=initRegistryClient span="11612e0603cb2e71:0adb56c5f978ac1a:11612e0603cb2e71:1"
time="2021-09-23T23:10:23Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:10:27Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="11612e0603cb2e71:0adb56c5f978ac1a:11612e0603cb2e71:1"
time="2021-09-23T23:10:27Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:10:27Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:10:27Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:10:27Z" level=info msg="Retrived 3 tlsconfigs"
{"level":"info","ts":1632438628.432515,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438628.4326584,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-09-23T23:10:32Z" level=error msg="Failed to get the right certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:10:32Z" level=error msg="tls config is nil for target: example.wcm-cisco.com:443"
time="2021-09-23T23:10:32Z" level=error msg="Failed to dial Network Service Registry at example.wcm-cisco.com:443: tls config is nil for target: example.wcm-cisco.com:443" operation=initRegistryClient span="11612e0603cb2e71:0adb56c5f978ac1a:11612e0603cb2e71:1"
2021/09/23 23:10:32 Reporting span 11612e0603cb2e71:0adb56c5f978ac1a:11612e0603cb2e71:1
2021/09/23 23:10:32 Reporting span 11612e0603cb2e71:11612e0603cb2e71:0000000000000000:1
{"level":"info","ts":1632438632.5666285,"caller":"nseinformer/nseInformerController.go:387","msg":"Error processing pod &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}: rpc error: code = Unavailable desc = Connection to Network Registry Server is not available","app":"nse-discovery"}
{"level":"info","ts":1632438632.566738,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named exampler6q79...","app":"nse-discovery"}
{"level":"info","ts":1632438632.5667486,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438632.5668092,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:10:32Z" level=info msg="==--> discovery.FindNetworkService() span:2d33921933414740:2d33921933414740:0000000000000000:1"
time="2021-09-23T23:10:32Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=2d33921933414740:2d33921933414740:0000000000000000:1"
time="2021-09-23T23:10:32Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=2d33921933414740:2d33921933414740:0000000000000000:1"
time="2021-09-23T23:10:32Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:10:32Z" level=info msg="==----> initRegistryClient() span:2d33921933414740:3bdc2ade0d610971:2d33921933414740:1"
time="2021-09-23T23:10:32Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:10:32Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2d33921933414740:3bdc2ade0d610971:2d33921933414740:1"
time="2021-09-23T23:10:32Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:10:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:10:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:10:32Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:10:32Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:10:32Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="2d33921933414740:3bdc2ade0d610971:2d33921933414740:1"
2021/09/23 23:10:32 Reporting span 2d33921933414740:3bdc2ade0d610971:2d33921933414740:1
{"level":"info","ts":1632438632.6031716,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:10:32Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2d33921933414740:2d33921933414740:0000000000000000:1"
time="2021-09-23T23:10:32Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=2d33921933414740:2d33921933414740:0000000000000000:1"
2021/09/23 23:10:32 Reporting span 2d33921933414740:7ecee2a360c934e2:2d33921933414740:1
time="2021-09-23T23:10:32Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2d33921933414740:2d33921933414740:0000000000000000:1"
2021/09/23 23:10:32 Reporting span 2d33921933414740:2d33921933414740:0000000000000000:1
{"level":"info","ts":1632438632.6085844,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438632.6086247,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438632.6086836,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438632.6087012,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:10:32Z" level=info msg="==--> discovery.FindNetworkService() span:63690145124235bf:63690145124235bf:0000000000000000:1"
time="2021-09-23T23:10:32Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=63690145124235bf:63690145124235bf:0000000000000000:1"
time="2021-09-23T23:10:32Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=63690145124235bf:63690145124235bf:0000000000000000:1"
time="2021-09-23T23:10:32Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:10:32Z" level=info msg="==----> initRegistryClient() span:63690145124235bf:5fbc62a3ba6fef87:63690145124235bf:1"
time="2021-09-23T23:10:32Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:10:32Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="63690145124235bf:5fbc62a3ba6fef87:63690145124235bf:1"
time="2021-09-23T23:10:32Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:10:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:10:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:10:32Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:10:32Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:10:32Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="63690145124235bf:5fbc62a3ba6fef87:63690145124235bf:1"
2021/09/23 23:10:32 Reporting span 63690145124235bf:5fbc62a3ba6fef87:63690145124235bf:1
{"level":"info","ts":1632438632.6593075,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:10:32Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=63690145124235bf:63690145124235bf:0000000000000000:1"
time="2021-09-23T23:10:32Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=63690145124235bf:63690145124235bf:0000000000000000:1"
2021/09/23 23:10:32 Reporting span 63690145124235bf:704947d55a37ac25:63690145124235bf:1
time="2021-09-23T23:10:32Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=63690145124235bf:63690145124235bf:0000000000000000:1"
2021/09/23 23:10:32 Reporting span 63690145124235bf:63690145124235bf:0000000000000000:1
{"level":"info","ts":1632438632.6692939,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438632.6694932,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438632.669656,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 2 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438632.6698377,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438632.669854,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438632.6699293,"caller":"nseinformer/nseInformerController.go:356","msg":"NSE diff: For cluster kind-11, found diff endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438632.669947,"caller":"nseinformer/nseInformerController.go:356","msg":"NSE diff: For cluster kind-11, found diff endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438632.6700041,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438632.670061,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438632.6701436,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438632.670154,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438632.6702354,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 2 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438632.6702514,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:10:32Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:10:32Z" level=info msg="==--> initRegistryClient() span:5ccccc9e3be295f8:5ccccc9e3be295f8:0000000000000000:1"
time="2021-09-23T23:10:32Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:10:32Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5ccccc9e3be295f8:5ccccc9e3be295f8:0000000000000000:1"
time="2021-09-23T23:10:32Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:10:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:10:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:10:32Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:10:32Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:10:32Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="5ccccc9e3be295f8:5ccccc9e3be295f8:0000000000000000:1"
2021/09/23 23:10:32 Reporting span 5ccccc9e3be295f8:5ccccc9e3be295f8:0000000000000000:1
time="2021-09-23T23:10:32Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:10:32Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:10:32 Reporting span 005662834f375480:005662834f375480:0000000000000000:1
time="2021-09-23T23:10:32Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:10:32Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:10:32Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:10:32 Reporting span 3bef785fd8404719:3bef785fd8404719:0000000000000000:1
time="2021-09-23T23:10:32Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438632.7497687,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438632.7498112,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named example798f5...","app":"nse-discovery"}
{"level":"info","ts":1632438632.74982,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438632.7498343,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:10:32Z" level=info msg="==--> discovery.FindNetworkService() span:6bc16cfa72418632:6bc16cfa72418632:0000000000000000:1"
time="2021-09-23T23:10:32Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=6bc16cfa72418632:6bc16cfa72418632:0000000000000000:1"
time="2021-09-23T23:10:32Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=6bc16cfa72418632:6bc16cfa72418632:0000000000000000:1"
time="2021-09-23T23:10:32Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:10:32Z" level=info msg="==----> initRegistryClient() span:6bc16cfa72418632:09e007895fff4d53:6bc16cfa72418632:1"
time="2021-09-23T23:10:32Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:10:32Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6bc16cfa72418632:09e007895fff4d53:6bc16cfa72418632:1"
time="2021-09-23T23:10:32Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:10:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:10:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:10:32Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:10:32Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:10:32Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="6bc16cfa72418632:09e007895fff4d53:6bc16cfa72418632:1"
2021/09/23 23:10:32 Reporting span 6bc16cfa72418632:09e007895fff4d53:6bc16cfa72418632:1
{"level":"info","ts":1632438632.7830894,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:10:32Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6bc16cfa72418632:6bc16cfa72418632:0000000000000000:1"
time="2021-09-23T23:10:32Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=6bc16cfa72418632:6bc16cfa72418632:0000000000000000:1"
2021/09/23 23:10:32 Reporting span 6bc16cfa72418632:20f8a1273d741b08:6bc16cfa72418632:1
time="2021-09-23T23:10:32Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6bc16cfa72418632:6bc16cfa72418632:0000000000000000:1"
2021/09/23 23:10:32 Reporting span 6bc16cfa72418632:6bc16cfa72418632:0000000000000000:1
{"level":"info","ts":1632438632.7878046,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438632.787937,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438632.787977,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438632.788049,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:10:32Z" level=info msg="==--> discovery.FindNetworkService() span:59a628c98da4232d:59a628c98da4232d:0000000000000000:1"
time="2021-09-23T23:10:32Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=59a628c98da4232d:59a628c98da4232d:0000000000000000:1"
time="2021-09-23T23:10:32Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=59a628c98da4232d:59a628c98da4232d:0000000000000000:1"
time="2021-09-23T23:10:32Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:10:32Z" level=info msg="==----> initRegistryClient() span:59a628c98da4232d:3bb50988fb39ad63:59a628c98da4232d:1"
time="2021-09-23T23:10:32Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:10:32Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="59a628c98da4232d:3bb50988fb39ad63:59a628c98da4232d:1"
time="2021-09-23T23:10:32Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:10:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:10:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:10:32Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:10:32Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:10:32Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="59a628c98da4232d:3bb50988fb39ad63:59a628c98da4232d:1"
2021/09/23 23:10:32 Reporting span 59a628c98da4232d:3bb50988fb39ad63:59a628c98da4232d:1
{"level":"info","ts":1632438632.8151085,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:10:32Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=59a628c98da4232d:59a628c98da4232d:0000000000000000:1"
time="2021-09-23T23:10:32Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=59a628c98da4232d:59a628c98da4232d:0000000000000000:1"
2021/09/23 23:10:32 Reporting span 59a628c98da4232d:2bbab128aac2ef46:59a628c98da4232d:1
time="2021-09-23T23:10:32Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=59a628c98da4232d:59a628c98da4232d:0000000000000000:1"
2021/09/23 23:10:32 Reporting span 59a628c98da4232d:59a628c98da4232d:0000000000000000:1
{"level":"info","ts":1632438632.8193867,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438632.8194168,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438632.819453,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438632.8194695,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438632.8194847,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438632.8195014,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438632.8195155,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438632.8195493,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438632.819566,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438632.8195848,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438632.8195992,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438632.8196266,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438632.8196485,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438632.8196654,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438632.8196807,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438632.819694,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438632.8197079,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438632.8197381,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438632.8197556,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:10:32Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:10:32Z" level=info msg="==--> initRegistryClient() span:09a2c0001629ba36:09a2c0001629ba36:0000000000000000:1"
time="2021-09-23T23:10:32Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:10:32Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="09a2c0001629ba36:09a2c0001629ba36:0000000000000000:1"
time="2021-09-23T23:10:32Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:10:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:10:32Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:10:32Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:10:32Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:10:32Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="09a2c0001629ba36:09a2c0001629ba36:0000000000000000:1"
2021/09/23 23:10:32 Reporting span 09a2c0001629ba36:09a2c0001629ba36:0000000000000000:1
time="2021-09-23T23:10:32Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:10:32Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:10:32 Reporting span 51f02e83f8eb637d:51f02e83f8eb637d:0000000000000000:1
time="2021-09-23T23:10:32Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:10:32Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:10:32Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:10:32 Reporting span 747206f7c9d0dd79:747206f7c9d0dd79:0000000000000000:1
time="2021-09-23T23:10:32Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438632.9013975,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438658.4332855,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438658.4334671,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438658.4334993,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named example798f5...","app":"nse-discovery"}
{"level":"info","ts":1632438658.4335546,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438658.4335797,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:10:58Z" level=info msg="==--> discovery.FindNetworkService() span:0b9652a013d18461:0b9652a013d18461:0000000000000000:1"
time="2021-09-23T23:10:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=0b9652a013d18461:0b9652a013d18461:0000000000000000:1"
time="2021-09-23T23:10:58Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=0b9652a013d18461:0b9652a013d18461:0000000000000000:1"
time="2021-09-23T23:10:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:10:58Z" level=info msg="==----> initRegistryClient() span:0b9652a013d18461:23e787a68bc98865:0b9652a013d18461:1"
time="2021-09-23T23:10:58Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:10:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="0b9652a013d18461:23e787a68bc98865:0b9652a013d18461:1"
time="2021-09-23T23:10:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:10:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:10:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:10:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:10:58Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:10:58Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="0b9652a013d18461:23e787a68bc98865:0b9652a013d18461:1"
2021/09/23 23:10:58 Reporting span 0b9652a013d18461:23e787a68bc98865:0b9652a013d18461:1
{"level":"info","ts":1632438658.480359,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:10:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=0b9652a013d18461:0b9652a013d18461:0000000000000000:1"
time="2021-09-23T23:10:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=0b9652a013d18461:0b9652a013d18461:0000000000000000:1"
2021/09/23 23:10:58 Reporting span 0b9652a013d18461:51d03288d66b8002:0b9652a013d18461:1
time="2021-09-23T23:10:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=0b9652a013d18461:0b9652a013d18461:0000000000000000:1"
2021/09/23 23:10:58 Reporting span 0b9652a013d18461:0b9652a013d18461:0000000000000000:1
{"level":"info","ts":1632438658.5019982,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438658.502032,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438658.5022278,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438658.5022395,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:10:58Z" level=info msg="==--> discovery.FindNetworkService() span:12136234770255fb:12136234770255fb:0000000000000000:1"
time="2021-09-23T23:10:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=12136234770255fb:12136234770255fb:0000000000000000:1"
time="2021-09-23T23:10:58Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=12136234770255fb:12136234770255fb:0000000000000000:1"
time="2021-09-23T23:10:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:10:58Z" level=info msg="==----> initRegistryClient() span:12136234770255fb:2766bfad2081c5c3:12136234770255fb:1"
time="2021-09-23T23:10:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:10:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="12136234770255fb:2766bfad2081c5c3:12136234770255fb:1"
time="2021-09-23T23:10:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:10:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:10:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:10:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:10:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:10:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="12136234770255fb:2766bfad2081c5c3:12136234770255fb:1"
2021/09/23 23:10:58 Reporting span 12136234770255fb:2766bfad2081c5c3:12136234770255fb:1
{"level":"info","ts":1632438658.5640063,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:10:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=12136234770255fb:12136234770255fb:0000000000000000:1"
time="2021-09-23T23:10:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=12136234770255fb:12136234770255fb:0000000000000000:1"
2021/09/23 23:10:58 Reporting span 12136234770255fb:6fed6c2c23187d05:12136234770255fb:1
time="2021-09-23T23:10:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=12136234770255fb:12136234770255fb:0000000000000000:1"
2021/09/23 23:10:58 Reporting span 12136234770255fb:12136234770255fb:0000000000000000:1
{"level":"info","ts":1632438658.570179,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438658.5702264,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438658.5702362,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438658.570244,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438658.5702527,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438658.5702815,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438658.5702915,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438658.5702999,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438658.5703073,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438658.5703163,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438658.5703242,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438658.570334,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438658.5703409,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438658.5703924,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438658.5704012,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438658.5704095,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438658.570417,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438658.5704315,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438658.5704775,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:10:58Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:10:58Z" level=info msg="==--> initRegistryClient() span:501b0b923a181297:501b0b923a181297:0000000000000000:1"
time="2021-09-23T23:10:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:10:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="501b0b923a181297:501b0b923a181297:0000000000000000:1"
time="2021-09-23T23:10:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:10:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:10:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:10:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:10:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:10:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="501b0b923a181297:501b0b923a181297:0000000000000000:1"
2021/09/23 23:10:58 Reporting span 501b0b923a181297:501b0b923a181297:0000000000000000:1
time="2021-09-23T23:10:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:10:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:10:58 Reporting span 17d1dfeb97239088:17d1dfeb97239088:0000000000000000:1
time="2021-09-23T23:10:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:10:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:10:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:10:58 Reporting span 211324d224f98b25:211324d224f98b25:0000000000000000:1
time="2021-09-23T23:10:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438658.637261,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438658.6373465,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named exampler6q79...","app":"nse-discovery"}
{"level":"info","ts":1632438658.6373591,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438658.637374,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:10:58Z" level=info msg="==--> discovery.FindNetworkService() span:3edb3b0d4a8cc4b1:3edb3b0d4a8cc4b1:0000000000000000:1"
time="2021-09-23T23:10:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=3edb3b0d4a8cc4b1:3edb3b0d4a8cc4b1:0000000000000000:1"
time="2021-09-23T23:10:58Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=3edb3b0d4a8cc4b1:3edb3b0d4a8cc4b1:0000000000000000:1"
time="2021-09-23T23:10:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:10:58Z" level=info msg="==----> initRegistryClient() span:3edb3b0d4a8cc4b1:66700301ef097fda:3edb3b0d4a8cc4b1:1"
time="2021-09-23T23:10:58Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:10:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3edb3b0d4a8cc4b1:66700301ef097fda:3edb3b0d4a8cc4b1:1"
time="2021-09-23T23:10:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:10:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:10:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:10:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:10:58Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:10:58Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="3edb3b0d4a8cc4b1:66700301ef097fda:3edb3b0d4a8cc4b1:1"
2021/09/23 23:10:58 Reporting span 3edb3b0d4a8cc4b1:66700301ef097fda:3edb3b0d4a8cc4b1:1
{"level":"info","ts":1632438658.6865764,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:10:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=3edb3b0d4a8cc4b1:3edb3b0d4a8cc4b1:0000000000000000:1"
time="2021-09-23T23:10:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=3edb3b0d4a8cc4b1:3edb3b0d4a8cc4b1:0000000000000000:1"
2021/09/23 23:10:58 Reporting span 3edb3b0d4a8cc4b1:1a6d30930504c9f9:3edb3b0d4a8cc4b1:1
time="2021-09-23T23:10:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=3edb3b0d4a8cc4b1:3edb3b0d4a8cc4b1:0000000000000000:1"
2021/09/23 23:10:58 Reporting span 3edb3b0d4a8cc4b1:3edb3b0d4a8cc4b1:0000000000000000:1
{"level":"info","ts":1632438658.6936047,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438658.694726,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438658.6947598,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438658.6947677,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:10:58Z" level=info msg="==--> discovery.FindNetworkService() span:3386021ba69d7268:3386021ba69d7268:0000000000000000:1"
time="2021-09-23T23:10:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=3386021ba69d7268:3386021ba69d7268:0000000000000000:1"
time="2021-09-23T23:10:58Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=3386021ba69d7268:3386021ba69d7268:0000000000000000:1"
time="2021-09-23T23:10:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:10:58Z" level=info msg="==----> initRegistryClient() span:3386021ba69d7268:2fbe116298a3247b:3386021ba69d7268:1"
time="2021-09-23T23:10:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:10:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3386021ba69d7268:2fbe116298a3247b:3386021ba69d7268:1"
time="2021-09-23T23:10:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:10:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:10:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:10:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:10:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:10:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="3386021ba69d7268:2fbe116298a3247b:3386021ba69d7268:1"
2021/09/23 23:10:58 Reporting span 3386021ba69d7268:2fbe116298a3247b:3386021ba69d7268:1
{"level":"info","ts":1632438658.7495286,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:10:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=3386021ba69d7268:3386021ba69d7268:0000000000000000:1"
time="2021-09-23T23:10:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=3386021ba69d7268:3386021ba69d7268:0000000000000000:1"
2021/09/23 23:10:58 Reporting span 3386021ba69d7268:51fa452fa5dbf261:3386021ba69d7268:1
time="2021-09-23T23:10:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=3386021ba69d7268:3386021ba69d7268:0000000000000000:1"
2021/09/23 23:10:58 Reporting span 3386021ba69d7268:3386021ba69d7268:0000000000000000:1
{"level":"info","ts":1632438658.7573571,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438658.7574294,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438658.75748,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438658.757504,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438658.7575111,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438658.7575514,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438658.7575572,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438658.7576318,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438658.757638,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438658.757646,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438658.7577088,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438658.7577157,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438658.7577648,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438658.7577996,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438658.7578058,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438658.7578516,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438658.7578614,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438658.7579055,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438658.7579165,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:10:58Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:10:58Z" level=info msg="==--> initRegistryClient() span:3860c342f8670bd8:3860c342f8670bd8:0000000000000000:1"
time="2021-09-23T23:10:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:10:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3860c342f8670bd8:3860c342f8670bd8:0000000000000000:1"
time="2021-09-23T23:10:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:10:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:10:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:10:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:10:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:10:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="3860c342f8670bd8:3860c342f8670bd8:0000000000000000:1"
2021/09/23 23:10:58 Reporting span 3860c342f8670bd8:3860c342f8670bd8:0000000000000000:1
time="2021-09-23T23:10:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:10:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:10:58 Reporting span 757cef8a806e52b3:757cef8a806e52b3:0000000000000000:1
time="2021-09-23T23:10:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:10:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:10:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:10:58 Reporting span 19dddfdaf2268cb2:19dddfdaf2268cb2:0000000000000000:1
time="2021-09-23T23:10:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438658.822495,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438688.433797,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438688.4340124,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438688.4340131,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named exampler6q79...","app":"nse-discovery"}
{"level":"info","ts":1632438688.4341202,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438688.4341745,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:11:28Z" level=info msg="==--> discovery.FindNetworkService() span:25b4bd6339239fb4:25b4bd6339239fb4:0000000000000000:1"
time="2021-09-23T23:11:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=25b4bd6339239fb4:25b4bd6339239fb4:0000000000000000:1"
time="2021-09-23T23:11:28Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=25b4bd6339239fb4:25b4bd6339239fb4:0000000000000000:1"
time="2021-09-23T23:11:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:11:28Z" level=info msg="==----> initRegistryClient() span:25b4bd6339239fb4:387d87e066d76298:25b4bd6339239fb4:1"
time="2021-09-23T23:11:28Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:11:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="25b4bd6339239fb4:387d87e066d76298:25b4bd6339239fb4:1"
time="2021-09-23T23:11:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:11:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:11:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:11:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:11:28Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:11:28Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="25b4bd6339239fb4:387d87e066d76298:25b4bd6339239fb4:1"
2021/09/23 23:11:28 Reporting span 25b4bd6339239fb4:387d87e066d76298:25b4bd6339239fb4:1
{"level":"info","ts":1632438688.483993,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:11:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=25b4bd6339239fb4:25b4bd6339239fb4:0000000000000000:1"
time="2021-09-23T23:11:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=25b4bd6339239fb4:25b4bd6339239fb4:0000000000000000:1"
2021/09/23 23:11:28 Reporting span 25b4bd6339239fb4:2f1d8ae8ad4e0930:25b4bd6339239fb4:1
time="2021-09-23T23:11:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=25b4bd6339239fb4:25b4bd6339239fb4:0000000000000000:1"
2021/09/23 23:11:28 Reporting span 25b4bd6339239fb4:25b4bd6339239fb4:0000000000000000:1
{"level":"info","ts":1632438688.5022218,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438688.5022562,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438688.5022633,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438688.5022724,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:11:28Z" level=info msg="==--> discovery.FindNetworkService() span:205077f22dc0084e:205077f22dc0084e:0000000000000000:1"
time="2021-09-23T23:11:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=205077f22dc0084e:205077f22dc0084e:0000000000000000:1"
time="2021-09-23T23:11:28Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=205077f22dc0084e:205077f22dc0084e:0000000000000000:1"
time="2021-09-23T23:11:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:11:28Z" level=info msg="==----> initRegistryClient() span:205077f22dc0084e:6a7586edd95ab5ea:205077f22dc0084e:1"
time="2021-09-23T23:11:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:11:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="205077f22dc0084e:6a7586edd95ab5ea:205077f22dc0084e:1"
time="2021-09-23T23:11:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:11:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:11:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:11:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:11:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:11:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="205077f22dc0084e:6a7586edd95ab5ea:205077f22dc0084e:1"
2021/09/23 23:11:28 Reporting span 205077f22dc0084e:6a7586edd95ab5ea:205077f22dc0084e:1
{"level":"info","ts":1632438688.5776458,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:11:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=205077f22dc0084e:205077f22dc0084e:0000000000000000:1"
time="2021-09-23T23:11:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=205077f22dc0084e:205077f22dc0084e:0000000000000000:1"
2021/09/23 23:11:28 Reporting span 205077f22dc0084e:46f64d90492f0344:205077f22dc0084e:1
time="2021-09-23T23:11:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=205077f22dc0084e:205077f22dc0084e:0000000000000000:1"
2021/09/23 23:11:28 Reporting span 205077f22dc0084e:205077f22dc0084e:0000000000000000:1
{"level":"info","ts":1632438688.5824325,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438688.5824564,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438688.582723,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438688.5827289,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438688.582738,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438688.5827837,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438688.582794,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438688.5827992,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438688.583299,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438688.5833123,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438688.58339,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438688.5834894,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438688.583595,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438688.5836675,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438688.5836785,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438688.5836835,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438688.583688,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438688.5836933,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438688.583702,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:11:28Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:11:28Z" level=info msg="==--> initRegistryClient() span:671cc4d4558ce014:671cc4d4558ce014:0000000000000000:1"
time="2021-09-23T23:11:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:11:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="671cc4d4558ce014:671cc4d4558ce014:0000000000000000:1"
time="2021-09-23T23:11:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:11:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:11:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:11:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:11:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:11:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="671cc4d4558ce014:671cc4d4558ce014:0000000000000000:1"
2021/09/23 23:11:28 Reporting span 671cc4d4558ce014:671cc4d4558ce014:0000000000000000:1
time="2021-09-23T23:11:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:11:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:11:28 Reporting span 2a94b4ef99060729:2a94b4ef99060729:0000000000000000:1
time="2021-09-23T23:11:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:11:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:11:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:11:28 Reporting span 4978efa03afbdc74:4978efa03afbdc74:0000000000000000:1
time="2021-09-23T23:11:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438688.6545286,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438688.6545904,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named example798f5...","app":"nse-discovery"}
{"level":"info","ts":1632438688.6545992,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438688.654608,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:11:28Z" level=info msg="==--> discovery.FindNetworkService() span:0b0f6087e3e2b296:0b0f6087e3e2b296:0000000000000000:1"
time="2021-09-23T23:11:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=0b0f6087e3e2b296:0b0f6087e3e2b296:0000000000000000:1"
time="2021-09-23T23:11:28Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=0b0f6087e3e2b296:0b0f6087e3e2b296:0000000000000000:1"
time="2021-09-23T23:11:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:11:28Z" level=info msg="==----> initRegistryClient() span:0b0f6087e3e2b296:2efb6c7b93936943:0b0f6087e3e2b296:1"
time="2021-09-23T23:11:28Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:11:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="0b0f6087e3e2b296:2efb6c7b93936943:0b0f6087e3e2b296:1"
time="2021-09-23T23:11:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:11:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:11:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:11:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:11:28Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:11:28Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="0b0f6087e3e2b296:2efb6c7b93936943:0b0f6087e3e2b296:1"
2021/09/23 23:11:28 Reporting span 0b0f6087e3e2b296:2efb6c7b93936943:0b0f6087e3e2b296:1
{"level":"info","ts":1632438688.6842513,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:11:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=0b0f6087e3e2b296:0b0f6087e3e2b296:0000000000000000:1"
time="2021-09-23T23:11:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=0b0f6087e3e2b296:0b0f6087e3e2b296:0000000000000000:1"
2021/09/23 23:11:28 Reporting span 0b0f6087e3e2b296:0bdeec0c364103f5:0b0f6087e3e2b296:1
time="2021-09-23T23:11:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=0b0f6087e3e2b296:0b0f6087e3e2b296:0000000000000000:1"
2021/09/23 23:11:28 Reporting span 0b0f6087e3e2b296:0b0f6087e3e2b296:0000000000000000:1
{"level":"info","ts":1632438688.6896486,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438688.6896698,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438688.6896768,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438688.6896856,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:11:28Z" level=info msg="==--> discovery.FindNetworkService() span:2cb7bb747adbad99:2cb7bb747adbad99:0000000000000000:1"
time="2021-09-23T23:11:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=2cb7bb747adbad99:2cb7bb747adbad99:0000000000000000:1"
time="2021-09-23T23:11:28Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=2cb7bb747adbad99:2cb7bb747adbad99:0000000000000000:1"
time="2021-09-23T23:11:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:11:28Z" level=info msg="==----> initRegistryClient() span:2cb7bb747adbad99:478a583db5279317:2cb7bb747adbad99:1"
time="2021-09-23T23:11:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:11:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2cb7bb747adbad99:478a583db5279317:2cb7bb747adbad99:1"
time="2021-09-23T23:11:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:11:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:11:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:11:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:11:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:11:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="2cb7bb747adbad99:478a583db5279317:2cb7bb747adbad99:1"
2021/09/23 23:11:28 Reporting span 2cb7bb747adbad99:478a583db5279317:2cb7bb747adbad99:1
{"level":"info","ts":1632438688.7265573,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:11:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2cb7bb747adbad99:2cb7bb747adbad99:0000000000000000:1"
time="2021-09-23T23:11:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=2cb7bb747adbad99:2cb7bb747adbad99:0000000000000000:1"
2021/09/23 23:11:28 Reporting span 2cb7bb747adbad99:4709273fadf15f73:2cb7bb747adbad99:1
time="2021-09-23T23:11:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2cb7bb747adbad99:2cb7bb747adbad99:0000000000000000:1"
2021/09/23 23:11:28 Reporting span 2cb7bb747adbad99:2cb7bb747adbad99:0000000000000000:1
{"level":"info","ts":1632438688.7381763,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438688.738502,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438688.7385144,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438688.7385201,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438688.7385259,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438688.7385383,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438688.7385461,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438688.7385516,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438688.7385585,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438688.738565,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438688.7385726,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438688.7385776,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438688.7385824,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438688.7385879,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438688.738595,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438688.7386,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438688.738608,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438688.7386136,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438688.738621,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:11:28Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:11:28Z" level=info msg="==--> initRegistryClient() span:6326ffc1807d8d38:6326ffc1807d8d38:0000000000000000:1"
time="2021-09-23T23:11:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:11:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6326ffc1807d8d38:6326ffc1807d8d38:0000000000000000:1"
time="2021-09-23T23:11:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:11:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:11:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:11:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:11:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:11:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="6326ffc1807d8d38:6326ffc1807d8d38:0000000000000000:1"
2021/09/23 23:11:28 Reporting span 6326ffc1807d8d38:6326ffc1807d8d38:0000000000000000:1
time="2021-09-23T23:11:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:11:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:11:28 Reporting span 56656919dd5572d1:56656919dd5572d1:0000000000000000:1
time="2021-09-23T23:11:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:11:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:11:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:11:28 Reporting span 0173086e961cf724:0173086e961cf724:0000000000000000:1
time="2021-09-23T23:11:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438688.836691,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438718.434244,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438718.4344747,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438718.434588,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named example798f5...","app":"nse-discovery"}
{"level":"info","ts":1632438718.4347043,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438718.4347887,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:11:58Z" level=info msg="==--> discovery.FindNetworkService() span:5f35efd24fdda57c:5f35efd24fdda57c:0000000000000000:1"
time="2021-09-23T23:11:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=5f35efd24fdda57c:5f35efd24fdda57c:0000000000000000:1"
time="2021-09-23T23:11:58Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=5f35efd24fdda57c:5f35efd24fdda57c:0000000000000000:1"
time="2021-09-23T23:11:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:11:58Z" level=info msg="==----> initRegistryClient() span:5f35efd24fdda57c:41b7411d88f791cf:5f35efd24fdda57c:1"
time="2021-09-23T23:11:58Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:11:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5f35efd24fdda57c:41b7411d88f791cf:5f35efd24fdda57c:1"
time="2021-09-23T23:11:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:11:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:11:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:11:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:11:58Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:11:58Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="5f35efd24fdda57c:41b7411d88f791cf:5f35efd24fdda57c:1"
2021/09/23 23:11:58 Reporting span 5f35efd24fdda57c:41b7411d88f791cf:5f35efd24fdda57c:1
{"level":"info","ts":1632438718.5034547,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:11:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5f35efd24fdda57c:5f35efd24fdda57c:0000000000000000:1"
time="2021-09-23T23:11:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=5f35efd24fdda57c:5f35efd24fdda57c:0000000000000000:1"
2021/09/23 23:11:58 Reporting span 5f35efd24fdda57c:273f59d7ea402dd0:5f35efd24fdda57c:1
time="2021-09-23T23:11:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5f35efd24fdda57c:5f35efd24fdda57c:0000000000000000:1"
2021/09/23 23:11:58 Reporting span 5f35efd24fdda57c:5f35efd24fdda57c:0000000000000000:1
{"level":"info","ts":1632438718.5308232,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438718.530862,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438718.5308704,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438718.5308797,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:11:58Z" level=info msg="==--> discovery.FindNetworkService() span:721ad4a45db0218c:721ad4a45db0218c:0000000000000000:1"
time="2021-09-23T23:11:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=721ad4a45db0218c:721ad4a45db0218c:0000000000000000:1"
time="2021-09-23T23:11:58Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=721ad4a45db0218c:721ad4a45db0218c:0000000000000000:1"
time="2021-09-23T23:11:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:11:58Z" level=info msg="==----> initRegistryClient() span:721ad4a45db0218c:3bf19e7010902dd3:721ad4a45db0218c:1"
time="2021-09-23T23:11:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:11:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="721ad4a45db0218c:3bf19e7010902dd3:721ad4a45db0218c:1"
time="2021-09-23T23:11:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:11:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:11:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:11:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:11:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:11:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="721ad4a45db0218c:3bf19e7010902dd3:721ad4a45db0218c:1"
2021/09/23 23:11:58 Reporting span 721ad4a45db0218c:3bf19e7010902dd3:721ad4a45db0218c:1
{"level":"info","ts":1632438718.583608,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:11:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=721ad4a45db0218c:721ad4a45db0218c:0000000000000000:1"
time="2021-09-23T23:11:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=721ad4a45db0218c:721ad4a45db0218c:0000000000000000:1"
2021/09/23 23:11:58 Reporting span 721ad4a45db0218c:57b4b18abd960c0a:721ad4a45db0218c:1
time="2021-09-23T23:11:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=721ad4a45db0218c:721ad4a45db0218c:0000000000000000:1"
2021/09/23 23:11:58 Reporting span 721ad4a45db0218c:721ad4a45db0218c:0000000000000000:1
{"level":"info","ts":1632438718.5892935,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438718.5893345,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438718.5893412,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438718.5893466,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438718.5893533,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438718.5893664,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438718.5895278,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438718.5895534,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438718.589559,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438718.5895662,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438718.5895712,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438718.5895762,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438718.5895805,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438718.5895908,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438718.589607,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438718.5897224,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438718.589732,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438718.5897422,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438718.5897484,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:11:58Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:11:58Z" level=info msg="==--> initRegistryClient() span:3098f8b8d50d2d25:3098f8b8d50d2d25:0000000000000000:1"
time="2021-09-23T23:11:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:11:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3098f8b8d50d2d25:3098f8b8d50d2d25:0000000000000000:1"
time="2021-09-23T23:11:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:11:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:11:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:11:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:11:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:11:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="3098f8b8d50d2d25:3098f8b8d50d2d25:0000000000000000:1"
2021/09/23 23:11:58 Reporting span 3098f8b8d50d2d25:3098f8b8d50d2d25:0000000000000000:1
time="2021-09-23T23:11:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:11:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:11:58 Reporting span 6b578b8222c6cdb5:6b578b8222c6cdb5:0000000000000000:1
time="2021-09-23T23:11:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:11:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:11:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:11:58 Reporting span 6cb14f574ffb2e41:6cb14f574ffb2e41:0000000000000000:1
time="2021-09-23T23:11:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438718.6548336,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438718.6548905,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named exampler6q79...","app":"nse-discovery"}
{"level":"info","ts":1632438718.6549015,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438718.6549106,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:11:58Z" level=info msg="==--> discovery.FindNetworkService() span:2f4364dd97ba6f45:2f4364dd97ba6f45:0000000000000000:1"
time="2021-09-23T23:11:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=2f4364dd97ba6f45:2f4364dd97ba6f45:0000000000000000:1"
time="2021-09-23T23:11:58Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=2f4364dd97ba6f45:2f4364dd97ba6f45:0000000000000000:1"
time="2021-09-23T23:11:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:11:58Z" level=info msg="==----> initRegistryClient() span:2f4364dd97ba6f45:5b0ea94d2390f342:2f4364dd97ba6f45:1"
time="2021-09-23T23:11:58Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:11:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2f4364dd97ba6f45:5b0ea94d2390f342:2f4364dd97ba6f45:1"
time="2021-09-23T23:11:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:11:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:11:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:11:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:11:58Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:11:58Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="2f4364dd97ba6f45:5b0ea94d2390f342:2f4364dd97ba6f45:1"
2021/09/23 23:11:58 Reporting span 2f4364dd97ba6f45:5b0ea94d2390f342:2f4364dd97ba6f45:1
{"level":"info","ts":1632438718.692118,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:11:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2f4364dd97ba6f45:2f4364dd97ba6f45:0000000000000000:1"
time="2021-09-23T23:11:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=2f4364dd97ba6f45:2f4364dd97ba6f45:0000000000000000:1"
2021/09/23 23:11:58 Reporting span 2f4364dd97ba6f45:4db8edd0d152c367:2f4364dd97ba6f45:1
time="2021-09-23T23:11:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2f4364dd97ba6f45:2f4364dd97ba6f45:0000000000000000:1"
2021/09/23 23:11:58 Reporting span 2f4364dd97ba6f45:2f4364dd97ba6f45:0000000000000000:1
{"level":"info","ts":1632438718.6977673,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438718.6978655,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438718.697915,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438718.6979573,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:11:58Z" level=info msg="==--> discovery.FindNetworkService() span:4c20a6fad421807d:4c20a6fad421807d:0000000000000000:1"
time="2021-09-23T23:11:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=4c20a6fad421807d:4c20a6fad421807d:0000000000000000:1"
time="2021-09-23T23:11:58Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=4c20a6fad421807d:4c20a6fad421807d:0000000000000000:1"
time="2021-09-23T23:11:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:11:58Z" level=info msg="==----> initRegistryClient() span:4c20a6fad421807d:59cea817cc2ffd67:4c20a6fad421807d:1"
time="2021-09-23T23:11:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:11:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4c20a6fad421807d:59cea817cc2ffd67:4c20a6fad421807d:1"
time="2021-09-23T23:11:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:11:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:11:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:11:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:11:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:11:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="4c20a6fad421807d:59cea817cc2ffd67:4c20a6fad421807d:1"
2021/09/23 23:11:58 Reporting span 4c20a6fad421807d:59cea817cc2ffd67:4c20a6fad421807d:1
{"level":"info","ts":1632438718.7315414,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:11:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=4c20a6fad421807d:4c20a6fad421807d:0000000000000000:1"
time="2021-09-23T23:11:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=4c20a6fad421807d:4c20a6fad421807d:0000000000000000:1"
2021/09/23 23:11:58 Reporting span 4c20a6fad421807d:17319d1c35b21df7:4c20a6fad421807d:1
time="2021-09-23T23:11:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=4c20a6fad421807d:4c20a6fad421807d:0000000000000000:1"
2021/09/23 23:11:58 Reporting span 4c20a6fad421807d:4c20a6fad421807d:0000000000000000:1
{"level":"info","ts":1632438718.735191,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438718.735216,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438718.73523,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438718.7352357,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438718.735242,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438718.7352543,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438718.7352607,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438718.7352688,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438718.735274,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438718.7354841,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438718.7354996,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438718.7355056,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438718.7355113,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438718.7355177,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438718.7355227,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438718.7355282,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438718.7355342,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438718.7355528,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438718.7355788,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:11:58Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:11:58Z" level=info msg="==--> initRegistryClient() span:579103679867c585:579103679867c585:0000000000000000:1"
time="2021-09-23T23:11:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:11:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="579103679867c585:579103679867c585:0000000000000000:1"
time="2021-09-23T23:11:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:11:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:11:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:11:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:11:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:11:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="579103679867c585:579103679867c585:0000000000000000:1"
2021/09/23 23:11:58 Reporting span 579103679867c585:579103679867c585:0000000000000000:1
time="2021-09-23T23:11:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:11:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:11:58 Reporting span 4d659445be848df0:4d659445be848df0:0000000000000000:1
time="2021-09-23T23:11:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:11:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:11:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:11:58 Reporting span 7468d2916b062d5d:7468d2916b062d5d:0000000000000000:1
time="2021-09-23T23:11:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438718.8306556,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438748.4350464,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438748.4354188,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438748.4357297,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named example798f5...","app":"nse-discovery"}
{"level":"info","ts":1632438748.4358537,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438748.4359233,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:12:28Z" level=info msg="==--> discovery.FindNetworkService() span:7d36070e22b7fc2b:7d36070e22b7fc2b:0000000000000000:1"
time="2021-09-23T23:12:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=7d36070e22b7fc2b:7d36070e22b7fc2b:0000000000000000:1"
time="2021-09-23T23:12:28Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=7d36070e22b7fc2b:7d36070e22b7fc2b:0000000000000000:1"
time="2021-09-23T23:12:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:12:28Z" level=info msg="==----> initRegistryClient() span:7d36070e22b7fc2b:0a89907ef24e9f5d:7d36070e22b7fc2b:1"
time="2021-09-23T23:12:28Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:12:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7d36070e22b7fc2b:0a89907ef24e9f5d:7d36070e22b7fc2b:1"
time="2021-09-23T23:12:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:12:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:12:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:12:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:12:28Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:12:28Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="7d36070e22b7fc2b:0a89907ef24e9f5d:7d36070e22b7fc2b:1"
2021/09/23 23:12:28 Reporting span 7d36070e22b7fc2b:0a89907ef24e9f5d:7d36070e22b7fc2b:1
{"level":"info","ts":1632438748.5253148,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:12:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7d36070e22b7fc2b:7d36070e22b7fc2b:0000000000000000:1"
time="2021-09-23T23:12:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=7d36070e22b7fc2b:7d36070e22b7fc2b:0000000000000000:1"
2021/09/23 23:12:28 Reporting span 7d36070e22b7fc2b:5ea8981eac17530f:7d36070e22b7fc2b:1
time="2021-09-23T23:12:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7d36070e22b7fc2b:7d36070e22b7fc2b:0000000000000000:1"
2021/09/23 23:12:28 Reporting span 7d36070e22b7fc2b:7d36070e22b7fc2b:0000000000000000:1
{"level":"info","ts":1632438748.5377026,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438748.5377543,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438748.5377734,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438748.5377905,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:12:28Z" level=info msg="==--> discovery.FindNetworkService() span:160efdec4bb63fa0:160efdec4bb63fa0:0000000000000000:1"
time="2021-09-23T23:12:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=160efdec4bb63fa0:160efdec4bb63fa0:0000000000000000:1"
time="2021-09-23T23:12:28Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=160efdec4bb63fa0:160efdec4bb63fa0:0000000000000000:1"
time="2021-09-23T23:12:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:12:28Z" level=info msg="==----> initRegistryClient() span:160efdec4bb63fa0:3f3902afb2d26888:160efdec4bb63fa0:1"
time="2021-09-23T23:12:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:12:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="160efdec4bb63fa0:3f3902afb2d26888:160efdec4bb63fa0:1"
time="2021-09-23T23:12:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:12:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:12:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:12:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:12:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:12:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="160efdec4bb63fa0:3f3902afb2d26888:160efdec4bb63fa0:1"
2021/09/23 23:12:28 Reporting span 160efdec4bb63fa0:3f3902afb2d26888:160efdec4bb63fa0:1
{"level":"info","ts":1632438748.5820844,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:12:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=160efdec4bb63fa0:160efdec4bb63fa0:0000000000000000:1"
time="2021-09-23T23:12:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=160efdec4bb63fa0:160efdec4bb63fa0:0000000000000000:1"
2021/09/23 23:12:28 Reporting span 160efdec4bb63fa0:792d43f1f8037e2f:160efdec4bb63fa0:1
time="2021-09-23T23:12:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=160efdec4bb63fa0:160efdec4bb63fa0:0000000000000000:1"
2021/09/23 23:12:28 Reporting span 160efdec4bb63fa0:160efdec4bb63fa0:0000000000000000:1
{"level":"info","ts":1632438748.5900505,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438748.5901017,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438748.5901144,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438748.5902567,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438748.5903342,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438748.59047,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438748.5904927,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438748.5907211,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438748.5908678,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438748.5909915,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438748.5911887,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438748.5912073,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438748.5912132,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438748.5912864,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438748.5912933,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438748.591329,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438748.5913398,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438748.5913508,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438748.5913613,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:12:28Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:12:28Z" level=info msg="==--> initRegistryClient() span:269abde7bd5a7efe:269abde7bd5a7efe:0000000000000000:1"
time="2021-09-23T23:12:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:12:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="269abde7bd5a7efe:269abde7bd5a7efe:0000000000000000:1"
time="2021-09-23T23:12:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:12:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:12:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:12:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:12:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:12:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="269abde7bd5a7efe:269abde7bd5a7efe:0000000000000000:1"
2021/09/23 23:12:28 Reporting span 269abde7bd5a7efe:269abde7bd5a7efe:0000000000000000:1
time="2021-09-23T23:12:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:12:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:12:28 Reporting span 1181b0e862599d4d:1181b0e862599d4d:0000000000000000:1
time="2021-09-23T23:12:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:12:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:12:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:12:28 Reporting span 7592bd1eabd26fe5:7592bd1eabd26fe5:0000000000000000:1
time="2021-09-23T23:12:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438748.6777751,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438748.6778262,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named exampler6q79...","app":"nse-discovery"}
{"level":"info","ts":1632438748.6778486,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438748.6778579,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:12:28Z" level=info msg="==--> discovery.FindNetworkService() span:7e0b303c386dad3d:7e0b303c386dad3d:0000000000000000:1"
time="2021-09-23T23:12:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=7e0b303c386dad3d:7e0b303c386dad3d:0000000000000000:1"
time="2021-09-23T23:12:28Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=7e0b303c386dad3d:7e0b303c386dad3d:0000000000000000:1"
time="2021-09-23T23:12:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:12:28Z" level=info msg="==----> initRegistryClient() span:7e0b303c386dad3d:3c30966b322e9d7c:7e0b303c386dad3d:1"
time="2021-09-23T23:12:28Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:12:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7e0b303c386dad3d:3c30966b322e9d7c:7e0b303c386dad3d:1"
time="2021-09-23T23:12:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:12:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:12:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:12:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:12:28Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:12:28Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="7e0b303c386dad3d:3c30966b322e9d7c:7e0b303c386dad3d:1"
2021/09/23 23:12:28 Reporting span 7e0b303c386dad3d:3c30966b322e9d7c:7e0b303c386dad3d:1
{"level":"info","ts":1632438748.7081835,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:12:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7e0b303c386dad3d:7e0b303c386dad3d:0000000000000000:1"
time="2021-09-23T23:12:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=7e0b303c386dad3d:7e0b303c386dad3d:0000000000000000:1"
2021/09/23 23:12:28 Reporting span 7e0b303c386dad3d:169522a5f9ba69aa:7e0b303c386dad3d:1
time="2021-09-23T23:12:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7e0b303c386dad3d:7e0b303c386dad3d:0000000000000000:1"
2021/09/23 23:12:28 Reporting span 7e0b303c386dad3d:7e0b303c386dad3d:0000000000000000:1
{"level":"info","ts":1632438748.7137415,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438748.7138634,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438748.7138715,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438748.7138782,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:12:28Z" level=info msg="==--> discovery.FindNetworkService() span:009f8ad3a5305c48:009f8ad3a5305c48:0000000000000000:1"
time="2021-09-23T23:12:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=009f8ad3a5305c48:009f8ad3a5305c48:0000000000000000:1"
time="2021-09-23T23:12:28Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=009f8ad3a5305c48:009f8ad3a5305c48:0000000000000000:1"
time="2021-09-23T23:12:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:12:28Z" level=info msg="==----> initRegistryClient() span:009f8ad3a5305c48:7ad17b69cc06d640:009f8ad3a5305c48:1"
time="2021-09-23T23:12:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:12:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="009f8ad3a5305c48:7ad17b69cc06d640:009f8ad3a5305c48:1"
time="2021-09-23T23:12:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:12:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:12:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:12:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:12:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:12:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="009f8ad3a5305c48:7ad17b69cc06d640:009f8ad3a5305c48:1"
2021/09/23 23:12:28 Reporting span 009f8ad3a5305c48:7ad17b69cc06d640:009f8ad3a5305c48:1
{"level":"info","ts":1632438748.7582526,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:12:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=009f8ad3a5305c48:009f8ad3a5305c48:0000000000000000:1"
time="2021-09-23T23:12:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=009f8ad3a5305c48:009f8ad3a5305c48:0000000000000000:1"
2021/09/23 23:12:28 Reporting span 009f8ad3a5305c48:7b3895ccda24a27a:009f8ad3a5305c48:1
time="2021-09-23T23:12:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=009f8ad3a5305c48:009f8ad3a5305c48:0000000000000000:1"
2021/09/23 23:12:28 Reporting span 009f8ad3a5305c48:009f8ad3a5305c48:0000000000000000:1
{"level":"info","ts":1632438748.7616982,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438748.7617404,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438748.761747,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438748.7617524,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438748.761758,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438748.7618353,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438748.761841,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438748.761881,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438748.7618868,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438748.761947,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438748.7619882,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438748.762036,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438748.762109,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438748.7621188,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438748.7621558,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438748.7621665,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438748.7622302,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438748.7622457,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438748.762391,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:12:28Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:12:28Z" level=info msg="==--> initRegistryClient() span:25e71830e73f5fce:25e71830e73f5fce:0000000000000000:1"
time="2021-09-23T23:12:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:12:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="25e71830e73f5fce:25e71830e73f5fce:0000000000000000:1"
time="2021-09-23T23:12:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:12:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:12:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:12:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:12:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:12:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="25e71830e73f5fce:25e71830e73f5fce:0000000000000000:1"
2021/09/23 23:12:28 Reporting span 25e71830e73f5fce:25e71830e73f5fce:0000000000000000:1
time="2021-09-23T23:12:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:12:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:12:28 Reporting span 6b1f33e192238f04:6b1f33e192238f04:0000000000000000:1
time="2021-09-23T23:12:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:12:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:12:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:12:28 Reporting span 6ab4d20722e3c1df:6ab4d20722e3c1df:0000000000000000:1
time="2021-09-23T23:12:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438748.8498445,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438778.4351225,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438778.4354246,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438778.435465,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named example798f5...","app":"nse-discovery"}
{"level":"info","ts":1632438778.435473,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438778.4355197,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:12:58Z" level=info msg="==--> discovery.FindNetworkService() span:1f5763236df4c6f5:1f5763236df4c6f5:0000000000000000:1"
time="2021-09-23T23:12:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=1f5763236df4c6f5:1f5763236df4c6f5:0000000000000000:1"
time="2021-09-23T23:12:58Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=1f5763236df4c6f5:1f5763236df4c6f5:0000000000000000:1"
time="2021-09-23T23:12:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:12:58Z" level=info msg="==----> initRegistryClient() span:1f5763236df4c6f5:0fe7c5cf0e560c7b:1f5763236df4c6f5:1"
time="2021-09-23T23:12:58Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:12:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="1f5763236df4c6f5:0fe7c5cf0e560c7b:1f5763236df4c6f5:1"
time="2021-09-23T23:12:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:12:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:12:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:12:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:12:58Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:12:58Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="1f5763236df4c6f5:0fe7c5cf0e560c7b:1f5763236df4c6f5:1"
2021/09/23 23:12:58 Reporting span 1f5763236df4c6f5:0fe7c5cf0e560c7b:1f5763236df4c6f5:1
{"level":"info","ts":1632438778.4884608,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:12:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=1f5763236df4c6f5:1f5763236df4c6f5:0000000000000000:1"
time="2021-09-23T23:12:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=1f5763236df4c6f5:1f5763236df4c6f5:0000000000000000:1"
2021/09/23 23:12:58 Reporting span 1f5763236df4c6f5:1ba3a87d0da08323:1f5763236df4c6f5:1
time="2021-09-23T23:12:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=1f5763236df4c6f5:1f5763236df4c6f5:0000000000000000:1"
2021/09/23 23:12:58 Reporting span 1f5763236df4c6f5:1f5763236df4c6f5:0000000000000000:1
{"level":"info","ts":1632438778.5131004,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438778.513453,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438778.513465,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438778.513474,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:12:58Z" level=info msg="==--> discovery.FindNetworkService() span:6ca84d58f4dfbbf4:6ca84d58f4dfbbf4:0000000000000000:1"
time="2021-09-23T23:12:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=6ca84d58f4dfbbf4:6ca84d58f4dfbbf4:0000000000000000:1"
time="2021-09-23T23:12:58Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=6ca84d58f4dfbbf4:6ca84d58f4dfbbf4:0000000000000000:1"
time="2021-09-23T23:12:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:12:58Z" level=info msg="==----> initRegistryClient() span:6ca84d58f4dfbbf4:2476e77cb809716d:6ca84d58f4dfbbf4:1"
time="2021-09-23T23:12:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:12:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6ca84d58f4dfbbf4:2476e77cb809716d:6ca84d58f4dfbbf4:1"
time="2021-09-23T23:12:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:12:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:12:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:12:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:12:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:12:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="6ca84d58f4dfbbf4:2476e77cb809716d:6ca84d58f4dfbbf4:1"
2021/09/23 23:12:58 Reporting span 6ca84d58f4dfbbf4:2476e77cb809716d:6ca84d58f4dfbbf4:1
{"level":"info","ts":1632438778.5571208,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:12:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6ca84d58f4dfbbf4:6ca84d58f4dfbbf4:0000000000000000:1"
time="2021-09-23T23:12:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=6ca84d58f4dfbbf4:6ca84d58f4dfbbf4:0000000000000000:1"
2021/09/23 23:12:58 Reporting span 6ca84d58f4dfbbf4:10b315db84958481:6ca84d58f4dfbbf4:1
time="2021-09-23T23:12:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6ca84d58f4dfbbf4:6ca84d58f4dfbbf4:0000000000000000:1"
2021/09/23 23:12:58 Reporting span 6ca84d58f4dfbbf4:6ca84d58f4dfbbf4:0000000000000000:1
{"level":"info","ts":1632438778.5641346,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438778.5642211,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438778.5642288,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438778.5643625,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438778.56437,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438778.5643833,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438778.5643914,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438778.5643969,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438778.5644157,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438778.564422,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438778.564427,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438778.5644324,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438778.5644367,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438778.5644474,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438778.5644553,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438778.56446,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438778.5644646,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438778.564474,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438778.5645075,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:12:58Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:12:58Z" level=info msg="==--> initRegistryClient() span:69715c0425e6edf0:69715c0425e6edf0:0000000000000000:1"
time="2021-09-23T23:12:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:12:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="69715c0425e6edf0:69715c0425e6edf0:0000000000000000:1"
time="2021-09-23T23:12:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:12:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:12:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:12:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:12:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:12:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="69715c0425e6edf0:69715c0425e6edf0:0000000000000000:1"
2021/09/23 23:12:58 Reporting span 69715c0425e6edf0:69715c0425e6edf0:0000000000000000:1
time="2021-09-23T23:12:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:12:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:12:58 Reporting span 5fea3d5e98fb930e:5fea3d5e98fb930e:0000000000000000:1
time="2021-09-23T23:12:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:12:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:12:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:12:58 Reporting span 75f1a68ac6950c86:75f1a68ac6950c86:0000000000000000:1
time="2021-09-23T23:12:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438778.6352062,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438778.635252,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named exampler6q79...","app":"nse-discovery"}
{"level":"info","ts":1632438778.6352613,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438778.6352684,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:12:58Z" level=info msg="==--> discovery.FindNetworkService() span:2b8b65d604156c23:2b8b65d604156c23:0000000000000000:1"
time="2021-09-23T23:12:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=2b8b65d604156c23:2b8b65d604156c23:0000000000000000:1"
time="2021-09-23T23:12:58Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=2b8b65d604156c23:2b8b65d604156c23:0000000000000000:1"
time="2021-09-23T23:12:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:12:58Z" level=info msg="==----> initRegistryClient() span:2b8b65d604156c23:6b74f3e16c11b1e4:2b8b65d604156c23:1"
time="2021-09-23T23:12:58Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:12:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2b8b65d604156c23:6b74f3e16c11b1e4:2b8b65d604156c23:1"
time="2021-09-23T23:12:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:12:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:12:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:12:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:12:58Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:12:58Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="2b8b65d604156c23:6b74f3e16c11b1e4:2b8b65d604156c23:1"
2021/09/23 23:12:58 Reporting span 2b8b65d604156c23:6b74f3e16c11b1e4:2b8b65d604156c23:1
{"level":"info","ts":1632438778.6691735,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:12:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2b8b65d604156c23:2b8b65d604156c23:0000000000000000:1"
time="2021-09-23T23:12:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=2b8b65d604156c23:2b8b65d604156c23:0000000000000000:1"
2021/09/23 23:12:58 Reporting span 2b8b65d604156c23:7b578636021a5b36:2b8b65d604156c23:1
time="2021-09-23T23:12:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2b8b65d604156c23:2b8b65d604156c23:0000000000000000:1"
2021/09/23 23:12:58 Reporting span 2b8b65d604156c23:2b8b65d604156c23:0000000000000000:1
{"level":"info","ts":1632438778.6742444,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438778.674262,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438778.674269,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438778.674284,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:12:58Z" level=info msg="==--> discovery.FindNetworkService() span:30f18b6cee235d55:30f18b6cee235d55:0000000000000000:1"
time="2021-09-23T23:12:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=30f18b6cee235d55:30f18b6cee235d55:0000000000000000:1"
time="2021-09-23T23:12:58Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=30f18b6cee235d55:30f18b6cee235d55:0000000000000000:1"
time="2021-09-23T23:12:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:12:58Z" level=info msg="==----> initRegistryClient() span:30f18b6cee235d55:3ccc2deb70bfbad7:30f18b6cee235d55:1"
time="2021-09-23T23:12:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:12:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="30f18b6cee235d55:3ccc2deb70bfbad7:30f18b6cee235d55:1"
time="2021-09-23T23:12:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:12:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:12:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:12:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:12:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:12:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="30f18b6cee235d55:3ccc2deb70bfbad7:30f18b6cee235d55:1"
2021/09/23 23:12:58 Reporting span 30f18b6cee235d55:3ccc2deb70bfbad7:30f18b6cee235d55:1
{"level":"info","ts":1632438778.7112408,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:12:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=30f18b6cee235d55:30f18b6cee235d55:0000000000000000:1"
time="2021-09-23T23:12:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=30f18b6cee235d55:30f18b6cee235d55:0000000000000000:1"
2021/09/23 23:12:58 Reporting span 30f18b6cee235d55:6267f46220a0baba:30f18b6cee235d55:1
time="2021-09-23T23:12:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=30f18b6cee235d55:30f18b6cee235d55:0000000000000000:1"
2021/09/23 23:12:58 Reporting span 30f18b6cee235d55:30f18b6cee235d55:0000000000000000:1
{"level":"info","ts":1632438778.7148926,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438778.714917,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438778.7149236,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438778.7149286,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438778.7149346,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438778.7149446,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438778.7149532,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438778.7149582,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438778.714966,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438778.714972,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438778.7149796,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438778.7149844,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438778.714989,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438778.7149947,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438778.715002,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438778.7150068,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438778.7150116,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438778.715022,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438778.715027,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:12:58Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:12:58Z" level=info msg="==--> initRegistryClient() span:5dc992ade42d2fc2:5dc992ade42d2fc2:0000000000000000:1"
time="2021-09-23T23:12:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:12:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5dc992ade42d2fc2:5dc992ade42d2fc2:0000000000000000:1"
time="2021-09-23T23:12:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:12:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:12:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:12:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:12:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:12:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="5dc992ade42d2fc2:5dc992ade42d2fc2:0000000000000000:1"
2021/09/23 23:12:58 Reporting span 5dc992ade42d2fc2:5dc992ade42d2fc2:0000000000000000:1
time="2021-09-23T23:12:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:12:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:12:58 Reporting span 282cd173c64e407a:282cd173c64e407a:0000000000000000:1
time="2021-09-23T23:12:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:12:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:12:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:12:58 Reporting span 1ce7c743e04aab1d:1ce7c743e04aab1d:0000000000000000:1
time="2021-09-23T23:12:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438778.7766247,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438808.435624,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438808.4358795,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438808.4359083,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named example798f5...","app":"nse-discovery"}
{"level":"info","ts":1632438808.4359806,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438808.436244,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:13:28Z" level=info msg="==--> discovery.FindNetworkService() span:0fcc44db55487ca7:0fcc44db55487ca7:0000000000000000:1"
time="2021-09-23T23:13:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=0fcc44db55487ca7:0fcc44db55487ca7:0000000000000000:1"
time="2021-09-23T23:13:28Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=0fcc44db55487ca7:0fcc44db55487ca7:0000000000000000:1"
time="2021-09-23T23:13:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:13:28Z" level=info msg="==----> initRegistryClient() span:0fcc44db55487ca7:493727660468d161:0fcc44db55487ca7:1"
time="2021-09-23T23:13:28Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:13:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="0fcc44db55487ca7:493727660468d161:0fcc44db55487ca7:1"
time="2021-09-23T23:13:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:13:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:13:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:13:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:13:28Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:13:28Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="0fcc44db55487ca7:493727660468d161:0fcc44db55487ca7:1"
2021/09/23 23:13:28 Reporting span 0fcc44db55487ca7:493727660468d161:0fcc44db55487ca7:1
{"level":"info","ts":1632438808.5078864,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:13:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=0fcc44db55487ca7:0fcc44db55487ca7:0000000000000000:1"
time="2021-09-23T23:13:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=0fcc44db55487ca7:0fcc44db55487ca7:0000000000000000:1"
2021/09/23 23:13:28 Reporting span 0fcc44db55487ca7:4ad374a3c0f3b4ab:0fcc44db55487ca7:1
time="2021-09-23T23:13:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=0fcc44db55487ca7:0fcc44db55487ca7:0000000000000000:1"
2021/09/23 23:13:28 Reporting span 0fcc44db55487ca7:0fcc44db55487ca7:0000000000000000:1
{"level":"info","ts":1632438808.5226207,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438808.522686,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438808.522805,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438808.5228212,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:13:28Z" level=info msg="==--> discovery.FindNetworkService() span:2a883286d4342184:2a883286d4342184:0000000000000000:1"
time="2021-09-23T23:13:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=2a883286d4342184:2a883286d4342184:0000000000000000:1"
time="2021-09-23T23:13:28Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=2a883286d4342184:2a883286d4342184:0000000000000000:1"
time="2021-09-23T23:13:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:13:28Z" level=info msg="==----> initRegistryClient() span:2a883286d4342184:4b37bbb2d3a216d9:2a883286d4342184:1"
time="2021-09-23T23:13:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:13:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2a883286d4342184:4b37bbb2d3a216d9:2a883286d4342184:1"
time="2021-09-23T23:13:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:13:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:13:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:13:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:13:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:13:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="2a883286d4342184:4b37bbb2d3a216d9:2a883286d4342184:1"
2021/09/23 23:13:28 Reporting span 2a883286d4342184:4b37bbb2d3a216d9:2a883286d4342184:1
{"level":"info","ts":1632438808.5736449,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:13:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2a883286d4342184:2a883286d4342184:0000000000000000:1"
time="2021-09-23T23:13:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=2a883286d4342184:2a883286d4342184:0000000000000000:1"
2021/09/23 23:13:28 Reporting span 2a883286d4342184:4a5ac63bf22a2ab8:2a883286d4342184:1
time="2021-09-23T23:13:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2a883286d4342184:2a883286d4342184:0000000000000000:1"
2021/09/23 23:13:28 Reporting span 2a883286d4342184:2a883286d4342184:0000000000000000:1
{"level":"info","ts":1632438808.5812495,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438808.58135,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438808.5813606,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438808.5814269,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438808.581494,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438808.581572,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438808.5815866,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438808.5816634,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438808.581679,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438808.5816865,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438808.581693,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438808.5820506,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438808.582152,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438808.5822153,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438808.5822332,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438808.5823255,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438808.5823386,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438808.58235,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438808.5824137,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:13:28Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:13:28Z" level=info msg="==--> initRegistryClient() span:20420d62700b872e:20420d62700b872e:0000000000000000:1"
time="2021-09-23T23:13:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:13:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="20420d62700b872e:20420d62700b872e:0000000000000000:1"
time="2021-09-23T23:13:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:13:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:13:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:13:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:13:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:13:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="20420d62700b872e:20420d62700b872e:0000000000000000:1"
2021/09/23 23:13:28 Reporting span 20420d62700b872e:20420d62700b872e:0000000000000000:1
time="2021-09-23T23:13:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:13:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:13:28 Reporting span 69d816c3f378ca48:69d816c3f378ca48:0000000000000000:1
time="2021-09-23T23:13:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:13:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:13:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:13:28 Reporting span 7625d27cb40758a1:7625d27cb40758a1:0000000000000000:1
time="2021-09-23T23:13:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438808.7121766,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438808.7123222,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named exampler6q79...","app":"nse-discovery"}
{"level":"info","ts":1632438808.71241,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438808.712475,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:13:28Z" level=info msg="==--> discovery.FindNetworkService() span:08ac9ae8a170b041:08ac9ae8a170b041:0000000000000000:1"
time="2021-09-23T23:13:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=08ac9ae8a170b041:08ac9ae8a170b041:0000000000000000:1"
time="2021-09-23T23:13:28Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=08ac9ae8a170b041:08ac9ae8a170b041:0000000000000000:1"
time="2021-09-23T23:13:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:13:28Z" level=info msg="==----> initRegistryClient() span:08ac9ae8a170b041:2241b01ac965fffd:08ac9ae8a170b041:1"
time="2021-09-23T23:13:28Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:13:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="08ac9ae8a170b041:2241b01ac965fffd:08ac9ae8a170b041:1"
time="2021-09-23T23:13:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:13:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:13:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:13:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:13:28Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:13:28Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="08ac9ae8a170b041:2241b01ac965fffd:08ac9ae8a170b041:1"
2021/09/23 23:13:28 Reporting span 08ac9ae8a170b041:2241b01ac965fffd:08ac9ae8a170b041:1
{"level":"info","ts":1632438808.752936,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:13:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=08ac9ae8a170b041:08ac9ae8a170b041:0000000000000000:1"
time="2021-09-23T23:13:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=08ac9ae8a170b041:08ac9ae8a170b041:0000000000000000:1"
2021/09/23 23:13:28 Reporting span 08ac9ae8a170b041:5a924f29a71fd43f:08ac9ae8a170b041:1
time="2021-09-23T23:13:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=08ac9ae8a170b041:08ac9ae8a170b041:0000000000000000:1"
2021/09/23 23:13:28 Reporting span 08ac9ae8a170b041:08ac9ae8a170b041:0000000000000000:1
{"level":"info","ts":1632438808.7604978,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438808.7606316,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438808.7607055,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438808.7607543,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:13:28Z" level=info msg="==--> discovery.FindNetworkService() span:3adff751380fb77c:3adff751380fb77c:0000000000000000:1"
time="2021-09-23T23:13:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=3adff751380fb77c:3adff751380fb77c:0000000000000000:1"
time="2021-09-23T23:13:28Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=3adff751380fb77c:3adff751380fb77c:0000000000000000:1"
time="2021-09-23T23:13:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:13:28Z" level=info msg="==----> initRegistryClient() span:3adff751380fb77c:61c9321bba6d0998:3adff751380fb77c:1"
time="2021-09-23T23:13:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:13:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3adff751380fb77c:61c9321bba6d0998:3adff751380fb77c:1"
time="2021-09-23T23:13:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:13:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:13:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:13:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:13:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:13:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="3adff751380fb77c:61c9321bba6d0998:3adff751380fb77c:1"
2021/09/23 23:13:28 Reporting span 3adff751380fb77c:61c9321bba6d0998:3adff751380fb77c:1
{"level":"info","ts":1632438808.8354013,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:13:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=3adff751380fb77c:3adff751380fb77c:0000000000000000:1"
time="2021-09-23T23:13:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=3adff751380fb77c:3adff751380fb77c:0000000000000000:1"
2021/09/23 23:13:28 Reporting span 3adff751380fb77c:1ae271bf75fd27b3:3adff751380fb77c:1
time="2021-09-23T23:13:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=3adff751380fb77c:3adff751380fb77c:0000000000000000:1"
2021/09/23 23:13:28 Reporting span 3adff751380fb77c:3adff751380fb77c:0000000000000000:1
{"level":"info","ts":1632438808.8457956,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438808.8458622,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438808.845877,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438808.845888,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438808.8458989,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438808.8459468,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438808.8459582,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438808.8459682,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438808.845977,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438808.84599,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438808.8460014,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438808.8460343,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438808.8460438,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438808.846054,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438808.846064,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438808.8460824,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438808.8461094,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438808.84612,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438808.8461337,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:13:28Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:13:28Z" level=info msg="==--> initRegistryClient() span:68e684b7c96b0eae:68e684b7c96b0eae:0000000000000000:1"
time="2021-09-23T23:13:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:13:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="68e684b7c96b0eae:68e684b7c96b0eae:0000000000000000:1"
time="2021-09-23T23:13:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:13:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:13:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:13:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:13:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:13:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="68e684b7c96b0eae:68e684b7c96b0eae:0000000000000000:1"
2021/09/23 23:13:28 Reporting span 68e684b7c96b0eae:68e684b7c96b0eae:0000000000000000:1
time="2021-09-23T23:13:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:13:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:13:28 Reporting span 12204f6413e0fcaa:12204f6413e0fcaa:0000000000000000:1
time="2021-09-23T23:13:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:13:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:13:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:13:28 Reporting span 274b66857be9c587:274b66857be9c587:0000000000000000:1
time="2021-09-23T23:13:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438808.965207,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438838.4361994,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438838.436521,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named example798f5...","app":"nse-discovery"}
{"level":"info","ts":1632438838.4365659,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438838.436618,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:13:58Z" level=info msg="==--> discovery.FindNetworkService() span:4234301133b111c5:4234301133b111c5:0000000000000000:1"
time="2021-09-23T23:13:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=4234301133b111c5:4234301133b111c5:0000000000000000:1"
time="2021-09-23T23:13:58Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=4234301133b111c5:4234301133b111c5:0000000000000000:1"
time="2021-09-23T23:13:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:13:58Z" level=info msg="==----> initRegistryClient() span:4234301133b111c5:6f82e366b5ad72c5:4234301133b111c5:1"
time="2021-09-23T23:13:58Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:13:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4234301133b111c5:6f82e366b5ad72c5:4234301133b111c5:1"
{"level":"info","ts":1632438838.441744,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-09-23T23:13:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:13:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:13:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:13:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:13:58Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:13:58Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="4234301133b111c5:6f82e366b5ad72c5:4234301133b111c5:1"
2021/09/23 23:13:58 Reporting span 4234301133b111c5:6f82e366b5ad72c5:4234301133b111c5:1
{"level":"info","ts":1632438838.5276198,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:13:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=4234301133b111c5:4234301133b111c5:0000000000000000:1"
time="2021-09-23T23:13:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=4234301133b111c5:4234301133b111c5:0000000000000000:1"
2021/09/23 23:13:58 Reporting span 4234301133b111c5:3caa76557ff74861:4234301133b111c5:1
time="2021-09-23T23:13:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=4234301133b111c5:4234301133b111c5:0000000000000000:1"
2021/09/23 23:13:58 Reporting span 4234301133b111c5:4234301133b111c5:0000000000000000:1
{"level":"info","ts":1632438838.5480437,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438838.5482821,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438838.5483527,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438838.5483613,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:13:58Z" level=info msg="==--> discovery.FindNetworkService() span:2e145d8ba54a1499:2e145d8ba54a1499:0000000000000000:1"
time="2021-09-23T23:13:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=2e145d8ba54a1499:2e145d8ba54a1499:0000000000000000:1"
time="2021-09-23T23:13:58Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=2e145d8ba54a1499:2e145d8ba54a1499:0000000000000000:1"
time="2021-09-23T23:13:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:13:58Z" level=info msg="==----> initRegistryClient() span:2e145d8ba54a1499:38be91e7f803a58a:2e145d8ba54a1499:1"
time="2021-09-23T23:13:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:13:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2e145d8ba54a1499:38be91e7f803a58a:2e145d8ba54a1499:1"
time="2021-09-23T23:13:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:13:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:13:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:13:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:13:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:13:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="2e145d8ba54a1499:38be91e7f803a58a:2e145d8ba54a1499:1"
2021/09/23 23:13:58 Reporting span 2e145d8ba54a1499:38be91e7f803a58a:2e145d8ba54a1499:1
{"level":"info","ts":1632438838.612577,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:13:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2e145d8ba54a1499:2e145d8ba54a1499:0000000000000000:1"
time="2021-09-23T23:13:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=2e145d8ba54a1499:2e145d8ba54a1499:0000000000000000:1"
2021/09/23 23:13:58 Reporting span 2e145d8ba54a1499:1c8f6c48e9452188:2e145d8ba54a1499:1
time="2021-09-23T23:13:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2e145d8ba54a1499:2e145d8ba54a1499:0000000000000000:1"
2021/09/23 23:13:58 Reporting span 2e145d8ba54a1499:2e145d8ba54a1499:0000000000000000:1
{"level":"info","ts":1632438838.6178007,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438838.6178257,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438838.617836,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438838.617842,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438838.6178493,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438838.6179252,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438838.6179361,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438838.6179433,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438838.6179488,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438838.6179562,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438838.6179764,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438838.6179986,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438838.618006,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438838.6180174,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438838.6180265,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438838.6180315,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438838.618037,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438838.618047,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438838.6180787,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:13:58Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:13:58Z" level=info msg="==--> initRegistryClient() span:091f5f244e741fa2:091f5f244e741fa2:0000000000000000:1"
time="2021-09-23T23:13:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:13:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="091f5f244e741fa2:091f5f244e741fa2:0000000000000000:1"
time="2021-09-23T23:13:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:13:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:13:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:13:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:13:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:13:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="091f5f244e741fa2:091f5f244e741fa2:0000000000000000:1"
2021/09/23 23:13:58 Reporting span 091f5f244e741fa2:091f5f244e741fa2:0000000000000000:1
time="2021-09-23T23:13:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:13:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:13:58 Reporting span 04616eaf2bf138d4:04616eaf2bf138d4:0000000000000000:1
time="2021-09-23T23:13:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:13:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:13:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:13:58 Reporting span 0bbdf7ed8f499a2e:0bbdf7ed8f499a2e:0000000000000000:1
time="2021-09-23T23:13:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438838.6831298,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438838.6832426,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named exampler6q79...","app":"nse-discovery"}
{"level":"info","ts":1632438838.6832547,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438838.6832619,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:13:58Z" level=info msg="==--> discovery.FindNetworkService() span:4d35bd70bca19f8d:4d35bd70bca19f8d:0000000000000000:1"
time="2021-09-23T23:13:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=4d35bd70bca19f8d:4d35bd70bca19f8d:0000000000000000:1"
time="2021-09-23T23:13:58Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=4d35bd70bca19f8d:4d35bd70bca19f8d:0000000000000000:1"
time="2021-09-23T23:13:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:13:58Z" level=info msg="==----> initRegistryClient() span:4d35bd70bca19f8d:3c2b60523229001c:4d35bd70bca19f8d:1"
time="2021-09-23T23:13:58Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:13:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4d35bd70bca19f8d:3c2b60523229001c:4d35bd70bca19f8d:1"
time="2021-09-23T23:13:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:13:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:13:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:13:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:13:58Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:13:58Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="4d35bd70bca19f8d:3c2b60523229001c:4d35bd70bca19f8d:1"
2021/09/23 23:13:58 Reporting span 4d35bd70bca19f8d:3c2b60523229001c:4d35bd70bca19f8d:1
{"level":"info","ts":1632438838.719382,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:13:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=4d35bd70bca19f8d:4d35bd70bca19f8d:0000000000000000:1"
time="2021-09-23T23:13:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=4d35bd70bca19f8d:4d35bd70bca19f8d:0000000000000000:1"
2021/09/23 23:13:58 Reporting span 4d35bd70bca19f8d:51d7fb503206c50f:4d35bd70bca19f8d:1
time="2021-09-23T23:13:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=4d35bd70bca19f8d:4d35bd70bca19f8d:0000000000000000:1"
2021/09/23 23:13:58 Reporting span 4d35bd70bca19f8d:4d35bd70bca19f8d:0000000000000000:1
{"level":"info","ts":1632438838.7246785,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438838.724791,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438838.724806,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438838.7248182,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:13:58Z" level=info msg="==--> discovery.FindNetworkService() span:3103143d0a988c63:3103143d0a988c63:0000000000000000:1"
time="2021-09-23T23:13:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=3103143d0a988c63:3103143d0a988c63:0000000000000000:1"
time="2021-09-23T23:13:58Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=3103143d0a988c63:3103143d0a988c63:0000000000000000:1"
time="2021-09-23T23:13:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:13:58Z" level=info msg="==----> initRegistryClient() span:3103143d0a988c63:288223bed095fcd1:3103143d0a988c63:1"
time="2021-09-23T23:13:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:13:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="3103143d0a988c63:288223bed095fcd1:3103143d0a988c63:1"
time="2021-09-23T23:13:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:13:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:13:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:13:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:13:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:13:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="3103143d0a988c63:288223bed095fcd1:3103143d0a988c63:1"
2021/09/23 23:13:58 Reporting span 3103143d0a988c63:288223bed095fcd1:3103143d0a988c63:1
{"level":"info","ts":1632438838.7675562,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:13:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=3103143d0a988c63:3103143d0a988c63:0000000000000000:1"
time="2021-09-23T23:13:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=3103143d0a988c63:3103143d0a988c63:0000000000000000:1"
2021/09/23 23:13:58 Reporting span 3103143d0a988c63:67658ec37e954e26:3103143d0a988c63:1
time="2021-09-23T23:13:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=3103143d0a988c63:3103143d0a988c63:0000000000000000:1"
2021/09/23 23:13:58 Reporting span 3103143d0a988c63:3103143d0a988c63:0000000000000000:1
{"level":"info","ts":1632438838.7727673,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438838.7727897,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438838.7727962,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438838.7728016,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438838.7728071,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438838.7728157,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438838.7728207,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438838.7728264,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438838.7728307,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438838.7728372,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438838.7728424,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438838.7728515,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438838.772859,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438838.7728646,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438838.7728693,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438838.772923,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438838.772928,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438838.772933,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438838.7729383,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:13:58Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:13:58Z" level=info msg="==--> initRegistryClient() span:52451ac350bae05c:52451ac350bae05c:0000000000000000:1"
time="2021-09-23T23:13:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:13:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="52451ac350bae05c:52451ac350bae05c:0000000000000000:1"
time="2021-09-23T23:13:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:13:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:13:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:13:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:13:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:13:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="52451ac350bae05c:52451ac350bae05c:0000000000000000:1"
2021/09/23 23:13:58 Reporting span 52451ac350bae05c:52451ac350bae05c:0000000000000000:1
time="2021-09-23T23:13:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:13:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:13:58 Reporting span 3af8ff2994722451:3af8ff2994722451:0000000000000000:1
time="2021-09-23T23:13:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:13:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:13:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:13:58 Reporting span 0845f407b011db54:0845f407b011db54:0000000000000000:1
time="2021-09-23T23:13:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438838.8346443,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438868.436429,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438868.4365861,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438868.4366205,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named example798f5...","app":"nse-discovery"}
{"level":"info","ts":1632438868.4366276,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438868.4366746,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:14:28Z" level=info msg="==--> discovery.FindNetworkService() span:2df4d62001f16a3e:2df4d62001f16a3e:0000000000000000:1"
time="2021-09-23T23:14:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=2df4d62001f16a3e:2df4d62001f16a3e:0000000000000000:1"
time="2021-09-23T23:14:28Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=2df4d62001f16a3e:2df4d62001f16a3e:0000000000000000:1"
time="2021-09-23T23:14:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:14:28Z" level=info msg="==----> initRegistryClient() span:2df4d62001f16a3e:3d1b0f35ec8ef73c:2df4d62001f16a3e:1"
time="2021-09-23T23:14:28Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:14:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2df4d62001f16a3e:3d1b0f35ec8ef73c:2df4d62001f16a3e:1"
time="2021-09-23T23:14:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:14:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:14:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:14:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:14:28Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:14:28Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="2df4d62001f16a3e:3d1b0f35ec8ef73c:2df4d62001f16a3e:1"
2021/09/23 23:14:28 Reporting span 2df4d62001f16a3e:3d1b0f35ec8ef73c:2df4d62001f16a3e:1
{"level":"info","ts":1632438868.4913132,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:14:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=2df4d62001f16a3e:2df4d62001f16a3e:0000000000000000:1"
time="2021-09-23T23:14:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=2df4d62001f16a3e:2df4d62001f16a3e:0000000000000000:1"
2021/09/23 23:14:28 Reporting span 2df4d62001f16a3e:288d3aa7fe10bc82:2df4d62001f16a3e:1
time="2021-09-23T23:14:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=2df4d62001f16a3e:2df4d62001f16a3e:0000000000000000:1"
2021/09/23 23:14:28 Reporting span 2df4d62001f16a3e:2df4d62001f16a3e:0000000000000000:1
{"level":"info","ts":1632438868.5062697,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438868.5062969,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438868.506304,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438868.5063102,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:14:28Z" level=info msg="==--> discovery.FindNetworkService() span:412f5c00bc015dc0:412f5c00bc015dc0:0000000000000000:1"
time="2021-09-23T23:14:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=412f5c00bc015dc0:412f5c00bc015dc0:0000000000000000:1"
time="2021-09-23T23:14:28Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=412f5c00bc015dc0:412f5c00bc015dc0:0000000000000000:1"
time="2021-09-23T23:14:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:14:28Z" level=info msg="==----> initRegistryClient() span:412f5c00bc015dc0:1a3d0a00c9035445:412f5c00bc015dc0:1"
time="2021-09-23T23:14:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:14:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="412f5c00bc015dc0:1a3d0a00c9035445:412f5c00bc015dc0:1"
time="2021-09-23T23:14:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:14:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:14:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:14:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:14:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:14:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="412f5c00bc015dc0:1a3d0a00c9035445:412f5c00bc015dc0:1"
2021/09/23 23:14:28 Reporting span 412f5c00bc015dc0:1a3d0a00c9035445:412f5c00bc015dc0:1
{"level":"info","ts":1632438868.5752413,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:14:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=412f5c00bc015dc0:412f5c00bc015dc0:0000000000000000:1"
time="2021-09-23T23:14:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=412f5c00bc015dc0:412f5c00bc015dc0:0000000000000000:1"
2021/09/23 23:14:28 Reporting span 412f5c00bc015dc0:2ee0f61d478a0edd:412f5c00bc015dc0:1
time="2021-09-23T23:14:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=412f5c00bc015dc0:412f5c00bc015dc0:0000000000000000:1"
2021/09/23 23:14:28 Reporting span 412f5c00bc015dc0:412f5c00bc015dc0:0000000000000000:1
{"level":"info","ts":1632438868.5812738,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438868.581453,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438868.5815184,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438868.5815744,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438868.5815842,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438868.5820477,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438868.5820937,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438868.582103,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438868.5821102,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438868.5821202,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438868.5821314,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438868.5821705,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438868.5821812,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438868.5821984,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438868.5822067,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438868.5822144,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438868.5822563,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438868.5822713,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438868.5822804,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:14:28Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:14:28Z" level=info msg="==--> initRegistryClient() span:2d5d6622edd31a8e:2d5d6622edd31a8e:0000000000000000:1"
time="2021-09-23T23:14:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:14:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="2d5d6622edd31a8e:2d5d6622edd31a8e:0000000000000000:1"
time="2021-09-23T23:14:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:14:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:14:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:14:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:14:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:14:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="2d5d6622edd31a8e:2d5d6622edd31a8e:0000000000000000:1"
2021/09/23 23:14:28 Reporting span 2d5d6622edd31a8e:2d5d6622edd31a8e:0000000000000000:1
time="2021-09-23T23:14:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:14:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:14:28 Reporting span 767b576773cb10d2:767b576773cb10d2:0000000000000000:1
time="2021-09-23T23:14:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:14:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:14:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:14:28 Reporting span 19b7e65e3555346f:19b7e65e3555346f:0000000000000000:1
time="2021-09-23T23:14:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438868.666689,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438868.6667342,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named exampler6q79...","app":"nse-discovery"}
{"level":"info","ts":1632438868.666741,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438868.6667504,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:14:28Z" level=info msg="==--> discovery.FindNetworkService() span:6338f3d742cb3ad8:6338f3d742cb3ad8:0000000000000000:1"
time="2021-09-23T23:14:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=6338f3d742cb3ad8:6338f3d742cb3ad8:0000000000000000:1"
time="2021-09-23T23:14:28Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=6338f3d742cb3ad8:6338f3d742cb3ad8:0000000000000000:1"
time="2021-09-23T23:14:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:14:28Z" level=info msg="==----> initRegistryClient() span:6338f3d742cb3ad8:422a09a514fb3342:6338f3d742cb3ad8:1"
time="2021-09-23T23:14:28Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:14:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6338f3d742cb3ad8:422a09a514fb3342:6338f3d742cb3ad8:1"
time="2021-09-23T23:14:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:14:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:14:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:14:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:14:28Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:14:28Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="6338f3d742cb3ad8:422a09a514fb3342:6338f3d742cb3ad8:1"
2021/09/23 23:14:28 Reporting span 6338f3d742cb3ad8:422a09a514fb3342:6338f3d742cb3ad8:1
{"level":"info","ts":1632438868.7021112,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:14:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6338f3d742cb3ad8:6338f3d742cb3ad8:0000000000000000:1"
time="2021-09-23T23:14:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=6338f3d742cb3ad8:6338f3d742cb3ad8:0000000000000000:1"
2021/09/23 23:14:28 Reporting span 6338f3d742cb3ad8:799415e2059e1ab1:6338f3d742cb3ad8:1
time="2021-09-23T23:14:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6338f3d742cb3ad8:6338f3d742cb3ad8:0000000000000000:1"
2021/09/23 23:14:28 Reporting span 6338f3d742cb3ad8:6338f3d742cb3ad8:0000000000000000:1
{"level":"info","ts":1632438868.7099705,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438868.709998,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438868.7100053,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438868.7100115,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:14:28Z" level=info msg="==--> discovery.FindNetworkService() span:0e5a7f63b0bc123e:0e5a7f63b0bc123e:0000000000000000:1"
time="2021-09-23T23:14:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=0e5a7f63b0bc123e:0e5a7f63b0bc123e:0000000000000000:1"
time="2021-09-23T23:14:28Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=0e5a7f63b0bc123e:0e5a7f63b0bc123e:0000000000000000:1"
time="2021-09-23T23:14:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:14:28Z" level=info msg="==----> initRegistryClient() span:0e5a7f63b0bc123e:0a1ee0c63840a5fe:0e5a7f63b0bc123e:1"
time="2021-09-23T23:14:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:14:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="0e5a7f63b0bc123e:0a1ee0c63840a5fe:0e5a7f63b0bc123e:1"
time="2021-09-23T23:14:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:14:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:14:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:14:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:14:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:14:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="0e5a7f63b0bc123e:0a1ee0c63840a5fe:0e5a7f63b0bc123e:1"
2021/09/23 23:14:28 Reporting span 0e5a7f63b0bc123e:0a1ee0c63840a5fe:0e5a7f63b0bc123e:1
{"level":"info","ts":1632438868.7532895,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:14:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=0e5a7f63b0bc123e:0e5a7f63b0bc123e:0000000000000000:1"
time="2021-09-23T23:14:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=0e5a7f63b0bc123e:0e5a7f63b0bc123e:0000000000000000:1"
2021/09/23 23:14:28 Reporting span 0e5a7f63b0bc123e:5607f42bf072bae9:0e5a7f63b0bc123e:1
time="2021-09-23T23:14:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=0e5a7f63b0bc123e:0e5a7f63b0bc123e:0000000000000000:1"
2021/09/23 23:14:28 Reporting span 0e5a7f63b0bc123e:0e5a7f63b0bc123e:0000000000000000:1
{"level":"info","ts":1632438868.757753,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438868.7579257,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438868.7581403,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438868.7581465,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438868.7585847,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438868.7586331,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438868.7587218,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438868.758733,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438868.7587383,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438868.7587442,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438868.7587528,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438868.7587578,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438868.758766,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438868.7587712,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438868.758776,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438868.758795,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438868.7588024,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438868.7588081,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438868.7588158,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:14:28Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:14:28Z" level=info msg="==--> initRegistryClient() span:4693a22863f8a9d3:4693a22863f8a9d3:0000000000000000:1"
time="2021-09-23T23:14:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:14:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="4693a22863f8a9d3:4693a22863f8a9d3:0000000000000000:1"
time="2021-09-23T23:14:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:14:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:14:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:14:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:14:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:14:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="4693a22863f8a9d3:4693a22863f8a9d3:0000000000000000:1"
2021/09/23 23:14:28 Reporting span 4693a22863f8a9d3:4693a22863f8a9d3:0000000000000000:1
time="2021-09-23T23:14:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:14:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:14:28 Reporting span 4a7fe30e0975d27e:4a7fe30e0975d27e:0000000000000000:1
time="2021-09-23T23:14:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:14:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:14:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:14:28 Reporting span 4d4408615d767796:4d4408615d767796:0000000000000000:1
time="2021-09-23T23:14:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438868.8552117,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438898.4369311,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438898.43713,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named example798f5...","app":"nse-discovery"}
{"level":"info","ts":1632438898.437145,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438898.4371686,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438898.4371996,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:14:58Z" level=info msg="==--> discovery.FindNetworkService() span:7cfd9bd2454eab0c:7cfd9bd2454eab0c:0000000000000000:1"
time="2021-09-23T23:14:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=7cfd9bd2454eab0c:7cfd9bd2454eab0c:0000000000000000:1"
time="2021-09-23T23:14:58Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=7cfd9bd2454eab0c:7cfd9bd2454eab0c:0000000000000000:1"
time="2021-09-23T23:14:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:14:58Z" level=info msg="==----> initRegistryClient() span:7cfd9bd2454eab0c:0a6611130dc99013:7cfd9bd2454eab0c:1"
time="2021-09-23T23:14:58Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:14:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7cfd9bd2454eab0c:0a6611130dc99013:7cfd9bd2454eab0c:1"
time="2021-09-23T23:14:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:14:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:14:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:14:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:14:58Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:14:58Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="7cfd9bd2454eab0c:0a6611130dc99013:7cfd9bd2454eab0c:1"
2021/09/23 23:14:58 Reporting span 7cfd9bd2454eab0c:0a6611130dc99013:7cfd9bd2454eab0c:1
{"level":"info","ts":1632438898.509664,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:14:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=7cfd9bd2454eab0c:7cfd9bd2454eab0c:0000000000000000:1"
time="2021-09-23T23:14:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=7cfd9bd2454eab0c:7cfd9bd2454eab0c:0000000000000000:1"
2021/09/23 23:14:58 Reporting span 7cfd9bd2454eab0c:732cfc9e5bd205d8:7cfd9bd2454eab0c:1
time="2021-09-23T23:14:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=7cfd9bd2454eab0c:7cfd9bd2454eab0c:0000000000000000:1"
2021/09/23 23:14:58 Reporting span 7cfd9bd2454eab0c:7cfd9bd2454eab0c:0000000000000000:1
{"level":"info","ts":1632438898.5291028,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438898.5291278,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438898.529135,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438898.5291514,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:14:58Z" level=info msg="==--> discovery.FindNetworkService() span:22f5b9fe3cfd1abd:22f5b9fe3cfd1abd:0000000000000000:1"
time="2021-09-23T23:14:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=22f5b9fe3cfd1abd:22f5b9fe3cfd1abd:0000000000000000:1"
time="2021-09-23T23:14:58Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=22f5b9fe3cfd1abd:22f5b9fe3cfd1abd:0000000000000000:1"
time="2021-09-23T23:14:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:14:58Z" level=info msg="==----> initRegistryClient() span:22f5b9fe3cfd1abd:3267dad957523450:22f5b9fe3cfd1abd:1"
time="2021-09-23T23:14:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:14:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="22f5b9fe3cfd1abd:3267dad957523450:22f5b9fe3cfd1abd:1"
time="2021-09-23T23:14:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:14:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:14:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:14:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:14:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:14:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="22f5b9fe3cfd1abd:3267dad957523450:22f5b9fe3cfd1abd:1"
2021/09/23 23:14:58 Reporting span 22f5b9fe3cfd1abd:3267dad957523450:22f5b9fe3cfd1abd:1
{"level":"info","ts":1632438898.5820367,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:14:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=22f5b9fe3cfd1abd:22f5b9fe3cfd1abd:0000000000000000:1"
time="2021-09-23T23:14:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=22f5b9fe3cfd1abd:22f5b9fe3cfd1abd:0000000000000000:1"
2021/09/23 23:14:58 Reporting span 22f5b9fe3cfd1abd:4bf0c39c2ab0f075:22f5b9fe3cfd1abd:1
time="2021-09-23T23:14:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=22f5b9fe3cfd1abd:22f5b9fe3cfd1abd:0000000000000000:1"
2021/09/23 23:14:58 Reporting span 22f5b9fe3cfd1abd:22f5b9fe3cfd1abd:0000000000000000:1
{"level":"info","ts":1632438898.5877552,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438898.587782,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438898.587788,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438898.5877934,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438898.5877995,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438898.5878165,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438898.5878253,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438898.5878303,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438898.587839,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438898.5878458,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438898.587852,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438898.587857,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438898.5878646,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438898.5878754,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438898.587883,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438898.5878878,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438898.5878928,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438898.5879104,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438898.587919,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:14:58Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:14:58Z" level=info msg="==--> initRegistryClient() span:78b49e7a203f972a:78b49e7a203f972a:0000000000000000:1"
time="2021-09-23T23:14:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:14:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="78b49e7a203f972a:78b49e7a203f972a:0000000000000000:1"
time="2021-09-23T23:14:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:14:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:14:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:14:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:14:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:14:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="78b49e7a203f972a:78b49e7a203f972a:0000000000000000:1"
2021/09/23 23:14:58 Reporting span 78b49e7a203f972a:78b49e7a203f972a:0000000000000000:1
time="2021-09-23T23:14:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:14:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:14:58 Reporting span 58bbb3d3583b271c:58bbb3d3583b271c:0000000000000000:1
time="2021-09-23T23:14:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:14:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:14:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:14:58 Reporting span 0fde22f06c48abc9:0fde22f06c48abc9:0000000000000000:1
time="2021-09-23T23:14:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438898.7238858,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438898.7239356,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named exampler6q79...","app":"nse-discovery"}
{"level":"info","ts":1632438898.7239444,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438898.7239523,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:14:58Z" level=info msg="==--> discovery.FindNetworkService() span:66e4f63e41f06a13:66e4f63e41f06a13:0000000000000000:1"
time="2021-09-23T23:14:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=66e4f63e41f06a13:66e4f63e41f06a13:0000000000000000:1"
time="2021-09-23T23:14:58Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=66e4f63e41f06a13:66e4f63e41f06a13:0000000000000000:1"
time="2021-09-23T23:14:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:14:58Z" level=info msg="==----> initRegistryClient() span:66e4f63e41f06a13:6e9f2694a23e1589:66e4f63e41f06a13:1"
time="2021-09-23T23:14:58Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:14:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="66e4f63e41f06a13:6e9f2694a23e1589:66e4f63e41f06a13:1"
time="2021-09-23T23:14:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:14:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:14:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:14:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:14:58Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:14:58Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="66e4f63e41f06a13:6e9f2694a23e1589:66e4f63e41f06a13:1"
2021/09/23 23:14:58 Reporting span 66e4f63e41f06a13:6e9f2694a23e1589:66e4f63e41f06a13:1
{"level":"info","ts":1632438898.7596974,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:14:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=66e4f63e41f06a13:66e4f63e41f06a13:0000000000000000:1"
time="2021-09-23T23:14:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=66e4f63e41f06a13:66e4f63e41f06a13:0000000000000000:1"
2021/09/23 23:14:58 Reporting span 66e4f63e41f06a13:4e43d4c63d4d49b4:66e4f63e41f06a13:1
time="2021-09-23T23:14:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=66e4f63e41f06a13:66e4f63e41f06a13:0000000000000000:1"
2021/09/23 23:14:58 Reporting span 66e4f63e41f06a13:66e4f63e41f06a13:0000000000000000:1
{"level":"info","ts":1632438898.796682,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438898.7967074,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438898.79673,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438898.7967372,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:14:58Z" level=info msg="==--> discovery.FindNetworkService() span:68cdb94739722feb:68cdb94739722feb:0000000000000000:1"
time="2021-09-23T23:14:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=68cdb94739722feb:68cdb94739722feb:0000000000000000:1"
time="2021-09-23T23:14:58Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=68cdb94739722feb:68cdb94739722feb:0000000000000000:1"
time="2021-09-23T23:14:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:14:58Z" level=info msg="==----> initRegistryClient() span:68cdb94739722feb:7e8cfe54eb903901:68cdb94739722feb:1"
time="2021-09-23T23:14:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:14:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="68cdb94739722feb:7e8cfe54eb903901:68cdb94739722feb:1"
time="2021-09-23T23:14:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:14:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:14:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:14:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:14:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:14:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="68cdb94739722feb:7e8cfe54eb903901:68cdb94739722feb:1"
2021/09/23 23:14:58 Reporting span 68cdb94739722feb:7e8cfe54eb903901:68cdb94739722feb:1
{"level":"info","ts":1632438898.884111,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:14:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=68cdb94739722feb:68cdb94739722feb:0000000000000000:1"
time="2021-09-23T23:14:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=68cdb94739722feb:68cdb94739722feb:0000000000000000:1"
2021/09/23 23:14:58 Reporting span 68cdb94739722feb:20bb029162bccdff:68cdb94739722feb:1
time="2021-09-23T23:14:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=68cdb94739722feb:68cdb94739722feb:0000000000000000:1"
2021/09/23 23:14:58 Reporting span 68cdb94739722feb:68cdb94739722feb:0000000000000000:1
{"level":"info","ts":1632438898.8877668,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438898.887784,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438898.8877897,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438898.887795,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438898.8878012,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438898.88781,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438898.8878152,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438898.8878202,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438898.8878245,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438898.8878345,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438898.88784,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438898.8878446,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438898.8878496,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438898.8878543,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438898.887859,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438898.887864,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438898.8878686,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438898.8878736,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438898.8878837,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:14:58Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:14:58Z" level=info msg="==--> initRegistryClient() span:38f63eaa2e21b003:38f63eaa2e21b003:0000000000000000:1"
time="2021-09-23T23:14:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:14:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="38f63eaa2e21b003:38f63eaa2e21b003:0000000000000000:1"
time="2021-09-23T23:14:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:14:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:14:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:14:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:14:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:14:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="38f63eaa2e21b003:38f63eaa2e21b003:0000000000000000:1"
2021/09/23 23:14:58 Reporting span 38f63eaa2e21b003:38f63eaa2e21b003:0000000000000000:1
time="2021-09-23T23:14:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:14:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:14:58 Reporting span 6ae0b23d2bb8f439:6ae0b23d2bb8f439:0000000000000000:1
time="2021-09-23T23:14:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:14:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:14:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:14:58 Reporting span 19f216c29a448b8c:19f216c29a448b8c:0000000000000000:1
time="2021-09-23T23:14:59Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438899.0001297,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438928.4498842,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438928.4508657,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named example798f5...","app":"nse-discovery"}
{"level":"info","ts":1632438928.4509318,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438928.4510505,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:15:28Z" level=info msg="==--> discovery.FindNetworkService() span:23c4e1c1777d41a9:23c4e1c1777d41a9:0000000000000000:1"
time="2021-09-23T23:15:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=23c4e1c1777d41a9:23c4e1c1777d41a9:0000000000000000:1"
time="2021-09-23T23:15:28Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=23c4e1c1777d41a9:23c4e1c1777d41a9:0000000000000000:1"
time="2021-09-23T23:15:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:15:28Z" level=info msg="==----> initRegistryClient() span:23c4e1c1777d41a9:16b56f1b3c9bf0bd:23c4e1c1777d41a9:1"
time="2021-09-23T23:15:28Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
{"level":"info","ts":1632438928.4537213,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
time="2021-09-23T23:15:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="23c4e1c1777d41a9:16b56f1b3c9bf0bd:23c4e1c1777d41a9:1"
time="2021-09-23T23:15:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:15:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:15:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:15:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:15:28Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:15:28Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="23c4e1c1777d41a9:16b56f1b3c9bf0bd:23c4e1c1777d41a9:1"
2021/09/23 23:15:28 Reporting span 23c4e1c1777d41a9:16b56f1b3c9bf0bd:23c4e1c1777d41a9:1
{"level":"info","ts":1632438928.5705981,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:15:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=23c4e1c1777d41a9:23c4e1c1777d41a9:0000000000000000:1"
time="2021-09-23T23:15:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=23c4e1c1777d41a9:23c4e1c1777d41a9:0000000000000000:1"
2021/09/23 23:15:28 Reporting span 23c4e1c1777d41a9:6f4a3bb0588f2c38:23c4e1c1777d41a9:1
time="2021-09-23T23:15:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=23c4e1c1777d41a9:23c4e1c1777d41a9:0000000000000000:1"
2021/09/23 23:15:28 Reporting span 23c4e1c1777d41a9:23c4e1c1777d41a9:0000000000000000:1
{"level":"info","ts":1632438928.5863965,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438928.586458,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438928.5864766,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438928.5865176,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:15:28Z" level=info msg="==--> discovery.FindNetworkService() span:6444e113c2e5eb75:6444e113c2e5eb75:0000000000000000:1"
time="2021-09-23T23:15:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=6444e113c2e5eb75:6444e113c2e5eb75:0000000000000000:1"
time="2021-09-23T23:15:28Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=6444e113c2e5eb75:6444e113c2e5eb75:0000000000000000:1"
time="2021-09-23T23:15:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:15:28Z" level=info msg="==----> initRegistryClient() span:6444e113c2e5eb75:353263eeb7d8c094:6444e113c2e5eb75:1"
time="2021-09-23T23:15:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:15:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6444e113c2e5eb75:353263eeb7d8c094:6444e113c2e5eb75:1"
time="2021-09-23T23:15:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:15:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:15:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:15:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:15:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:15:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="6444e113c2e5eb75:353263eeb7d8c094:6444e113c2e5eb75:1"
2021/09/23 23:15:28 Reporting span 6444e113c2e5eb75:353263eeb7d8c094:6444e113c2e5eb75:1
{"level":"info","ts":1632438928.6332653,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:15:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6444e113c2e5eb75:6444e113c2e5eb75:0000000000000000:1"
time="2021-09-23T23:15:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=6444e113c2e5eb75:6444e113c2e5eb75:0000000000000000:1"
2021/09/23 23:15:28 Reporting span 6444e113c2e5eb75:235fdd0b36d10611:6444e113c2e5eb75:1
time="2021-09-23T23:15:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6444e113c2e5eb75:6444e113c2e5eb75:0000000000000000:1"
2021/09/23 23:15:28 Reporting span 6444e113c2e5eb75:6444e113c2e5eb75:0000000000000000:1
{"level":"info","ts":1632438928.639799,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438928.6398566,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438928.6398773,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438928.639893,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438928.6399348,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438928.6399674,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438928.6400082,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438928.6400287,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438928.6400425,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438928.640061,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438928.640114,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438928.6401339,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438928.6401486,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438928.6402197,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438928.6402395,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438928.640268,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438928.6402977,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438928.6403208,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438928.6403556,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:15:28Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:15:28Z" level=info msg="==--> initRegistryClient() span:7b0dd637c184ad32:7b0dd637c184ad32:0000000000000000:1"
time="2021-09-23T23:15:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:15:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="7b0dd637c184ad32:7b0dd637c184ad32:0000000000000000:1"
time="2021-09-23T23:15:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:15:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:15:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:15:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:15:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:15:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="7b0dd637c184ad32:7b0dd637c184ad32:0000000000000000:1"
2021/09/23 23:15:28 Reporting span 7b0dd637c184ad32:7b0dd637c184ad32:0000000000000000:1
time="2021-09-23T23:15:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:15:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:15:28 Reporting span 650810fb0f09c542:650810fb0f09c542:0000000000000000:1
time="2021-09-23T23:15:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:15:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:15:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:15:28 Reporting span 132529ef60bcd5ef:132529ef60bcd5ef:0000000000000000:1
time="2021-09-23T23:15:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438928.7113972,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438928.711543,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named exampler6q79...","app":"nse-discovery"}
{"level":"info","ts":1632438928.7116997,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438928.7117407,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:15:28Z" level=info msg="==--> discovery.FindNetworkService() span:6cea9a1802cb0e68:6cea9a1802cb0e68:0000000000000000:1"
time="2021-09-23T23:15:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=6cea9a1802cb0e68:6cea9a1802cb0e68:0000000000000000:1"
time="2021-09-23T23:15:28Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=6cea9a1802cb0e68:6cea9a1802cb0e68:0000000000000000:1"
time="2021-09-23T23:15:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:15:28Z" level=info msg="==----> initRegistryClient() span:6cea9a1802cb0e68:5c81fb63bc3e2426:6cea9a1802cb0e68:1"
time="2021-09-23T23:15:28Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:15:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="6cea9a1802cb0e68:5c81fb63bc3e2426:6cea9a1802cb0e68:1"
time="2021-09-23T23:15:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:15:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:15:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:15:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:15:28Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:15:28Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="6cea9a1802cb0e68:5c81fb63bc3e2426:6cea9a1802cb0e68:1"
2021/09/23 23:15:28 Reporting span 6cea9a1802cb0e68:5c81fb63bc3e2426:6cea9a1802cb0e68:1
{"level":"info","ts":1632438928.7641895,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:15:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=6cea9a1802cb0e68:6cea9a1802cb0e68:0000000000000000:1"
time="2021-09-23T23:15:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=6cea9a1802cb0e68:6cea9a1802cb0e68:0000000000000000:1"
2021/09/23 23:15:28 Reporting span 6cea9a1802cb0e68:4b904ec712885994:6cea9a1802cb0e68:1
time="2021-09-23T23:15:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=6cea9a1802cb0e68:6cea9a1802cb0e68:0000000000000000:1"
2021/09/23 23:15:28 Reporting span 6cea9a1802cb0e68:6cea9a1802cb0e68:0000000000000000:1
{"level":"info","ts":1632438928.7709858,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438928.771009,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438928.7710164,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438928.7710228,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:15:28Z" level=info msg="==--> discovery.FindNetworkService() span:10714b4f15501311:10714b4f15501311:0000000000000000:1"
time="2021-09-23T23:15:28Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=10714b4f15501311:10714b4f15501311:0000000000000000:1"
time="2021-09-23T23:15:28Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=10714b4f15501311:10714b4f15501311:0000000000000000:1"
time="2021-09-23T23:15:28Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:15:28Z" level=info msg="==----> initRegistryClient() span:10714b4f15501311:7a512f692538690a:10714b4f15501311:1"
time="2021-09-23T23:15:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:15:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="10714b4f15501311:7a512f692538690a:10714b4f15501311:1"
time="2021-09-23T23:15:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:15:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:15:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:15:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:15:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:15:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="10714b4f15501311:7a512f692538690a:10714b4f15501311:1"
2021/09/23 23:15:28 Reporting span 10714b4f15501311:7a512f692538690a:10714b4f15501311:1
{"level":"info","ts":1632438928.8536632,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:15:28Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=10714b4f15501311:10714b4f15501311:0000000000000000:1"
time="2021-09-23T23:15:28Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=10714b4f15501311:10714b4f15501311:0000000000000000:1"
2021/09/23 23:15:28 Reporting span 10714b4f15501311:2192d214bf7c14dd:10714b4f15501311:1
time="2021-09-23T23:15:28Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=10714b4f15501311:10714b4f15501311:0000000000000000:1"
2021/09/23 23:15:28 Reporting span 10714b4f15501311:10714b4f15501311:0000000000000000:1
{"level":"info","ts":1632438928.8618844,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438928.861909,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438928.8619149,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438928.86192,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438928.8619258,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438928.8619337,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438928.8619392,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438928.861944,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438928.861949,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438928.861955,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438928.86196,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438928.8619695,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438928.8619742,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438928.8619795,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438928.8619845,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438928.8619888,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438928.8619936,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438928.8619983,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438928.8620036,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:15:28Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:15:28Z" level=info msg="==--> initRegistryClient() span:407bb12cad29cf2c:407bb12cad29cf2c:0000000000000000:1"
time="2021-09-23T23:15:28Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:15:28Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="407bb12cad29cf2c:407bb12cad29cf2c:0000000000000000:1"
time="2021-09-23T23:15:28Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:15:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:15:28Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:15:28Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:15:28Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:15:28Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="407bb12cad29cf2c:407bb12cad29cf2c:0000000000000000:1"
2021/09/23 23:15:28 Reporting span 407bb12cad29cf2c:407bb12cad29cf2c:0000000000000000:1
time="2021-09-23T23:15:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:15:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:15:28 Reporting span 2d3a27b67dd589de:2d3a27b67dd589de:0000000000000000:1
time="2021-09-23T23:15:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:15:28Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:15:28Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:15:28 Reporting span 224e94eac413c9af:224e94eac413c9af:0000000000000000:1
time="2021-09-23T23:15:28Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438928.966032,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438958.4375029,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {example798f5 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/example798f5 1416b193-3fca-4606-80a1-c12b55bf9ed5 2290 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-vsm49 wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438958.43773,"caller":"nseinformer/nseInformerController.go:123","msg":"NSE pod: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}} was updated with: &{{ } {exampler6q79 example nsm-system /apis/networkservicemesh.io/v1alpha1/namespaces/nsm-system/networkserviceendpoints/exampler6q79 14626903-bb1f-4ebb-829f-a2482b05f821 2291 1 2021-09-23 23:08:32 +0000 UTC <nil> <nil> map[app:vl3-nse-example networkservicename:example nsepod.name:example-kind-11_vl3-nse-example-5859574cb9-lzths wcm/nsr.addr:example.wcm-cisco.com wcm/nsr.port:443] map[] [] []  []} {example IP kind-11-control-plane} {RUNNING}}","app":"nse-discovery"}
{"level":"info","ts":1632438958.4377701,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named example798f5...","app":"nse-discovery"}
{"level":"info","ts":1632438958.4377778,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438958.4384797,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:15:58Z" level=info msg="==--> discovery.FindNetworkService() span:54c708f71fbd08ec:54c708f71fbd08ec:0000000000000000:1"
time="2021-09-23T23:15:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=54c708f71fbd08ec:54c708f71fbd08ec:0000000000000000:1"
time="2021-09-23T23:15:58Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=54c708f71fbd08ec:54c708f71fbd08ec:0000000000000000:1"
time="2021-09-23T23:15:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:15:58Z" level=info msg="==----> initRegistryClient() span:54c708f71fbd08ec:28a0a40f73e6f78b:54c708f71fbd08ec:1"
time="2021-09-23T23:15:58Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:15:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="54c708f71fbd08ec:28a0a40f73e6f78b:54c708f71fbd08ec:1"
time="2021-09-23T23:15:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:15:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:15:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:15:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:15:58Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:15:58Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="54c708f71fbd08ec:28a0a40f73e6f78b:54c708f71fbd08ec:1"
2021/09/23 23:15:58 Reporting span 54c708f71fbd08ec:28a0a40f73e6f78b:54c708f71fbd08ec:1
{"level":"info","ts":1632438958.5060303,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:15:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=54c708f71fbd08ec:54c708f71fbd08ec:0000000000000000:1"
time="2021-09-23T23:15:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=54c708f71fbd08ec:54c708f71fbd08ec:0000000000000000:1"
2021/09/23 23:15:58 Reporting span 54c708f71fbd08ec:4e9025a54bea19b3:54c708f71fbd08ec:1
time="2021-09-23T23:15:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=54c708f71fbd08ec:54c708f71fbd08ec:0000000000000000:1"
2021/09/23 23:15:58 Reporting span 54c708f71fbd08ec:54c708f71fbd08ec:0000000000000000:1
{"level":"info","ts":1632438958.533175,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438958.5332034,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438958.533228,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438958.5332348,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:15:58Z" level=info msg="==--> discovery.FindNetworkService() span:40fc7621912e2920:40fc7621912e2920:0000000000000000:1"
time="2021-09-23T23:15:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=40fc7621912e2920:40fc7621912e2920:0000000000000000:1"
time="2021-09-23T23:15:58Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=40fc7621912e2920:40fc7621912e2920:0000000000000000:1"
time="2021-09-23T23:15:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:15:58Z" level=info msg="==----> initRegistryClient() span:40fc7621912e2920:572f19ed6561043e:40fc7621912e2920:1"
time="2021-09-23T23:15:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:15:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="40fc7621912e2920:572f19ed6561043e:40fc7621912e2920:1"
time="2021-09-23T23:15:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:15:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:15:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:15:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:15:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:15:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="40fc7621912e2920:572f19ed6561043e:40fc7621912e2920:1"
2021/09/23 23:15:58 Reporting span 40fc7621912e2920:572f19ed6561043e:40fc7621912e2920:1
{"level":"info","ts":1632438958.603541,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:15:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=40fc7621912e2920:40fc7621912e2920:0000000000000000:1"
time="2021-09-23T23:15:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=40fc7621912e2920:40fc7621912e2920:0000000000000000:1"
2021/09/23 23:15:58 Reporting span 40fc7621912e2920:630ef26d88b3e7c5:40fc7621912e2920:1
time="2021-09-23T23:15:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=40fc7621912e2920:40fc7621912e2920:0000000000000000:1"
2021/09/23 23:15:58 Reporting span 40fc7621912e2920:40fc7621912e2920:0000000000000000:1
{"level":"info","ts":1632438958.6089475,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438958.608973,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438958.6089792,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438958.6089866,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438958.6089933,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438958.6090062,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438958.6090147,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438958.6090202,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438958.609025,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438958.6090312,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438958.609039,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438958.6090446,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438958.609049,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438958.609059,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438958.6090662,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438958.6090806,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438958.6090853,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438958.6091256,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438958.6091363,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:15:58Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:15:58Z" level=info msg="==--> initRegistryClient() span:50d4b7d2585d1078:50d4b7d2585d1078:0000000000000000:1"
time="2021-09-23T23:15:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:15:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="50d4b7d2585d1078:50d4b7d2585d1078:0000000000000000:1"
time="2021-09-23T23:15:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:15:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:15:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:15:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:15:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:15:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="50d4b7d2585d1078:50d4b7d2585d1078:0000000000000000:1"
2021/09/23 23:15:58 Reporting span 50d4b7d2585d1078:50d4b7d2585d1078:0000000000000000:1
time="2021-09-23T23:15:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:15:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:15:58 Reporting span 0554e7d31e77e897:0554e7d31e77e897:0000000000000000:1
time="2021-09-23T23:15:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:15:58Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:15:58Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:15:58 Reporting span 7efd40925ce56b38:7efd40925ce56b38:0000000000000000:1
time="2021-09-23T23:15:58Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438958.7562664,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
{"level":"info","ts":1632438958.7563202,"caller":"nseinformer/nseInformerController.go:172","msg":"Processing NSE named exampler6q79...","app":"nse-discovery"}
{"level":"info","ts":1632438958.7564652,"caller":"nseinformer/nseInformerController.go:179","msg":"Found service name: example","app":"nse-discovery"}
{"level":"info","ts":1632438958.7564812,"caller":"nseinformer/nseInformerController.go:194","msg":"Getting endpoints from the local NSR","app":"nse-discovery"}
time="2021-09-23T23:15:58Z" level=info msg="==--> discovery.FindNetworkService() span:0fd83b8a55cffb93:0fd83b8a55cffb93:0000000000000000:1"
time="2021-09-23T23:15:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=0fd83b8a55cffb93:0fd83b8a55cffb93:0000000000000000:1"
time="2021-09-23T23:15:58Z" level=info msg=">><<-- nsrURL=\"wcm-proxy-nsmgr.nsm-system:5005\" span=0fd83b8a55cffb93:0fd83b8a55cffb93:0000000000000000:1"
time="2021-09-23T23:15:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:15:58Z" level=info msg="==----> initRegistryClient() span:0fd83b8a55cffb93:6f1fa11ad3c2e412:0fd83b8a55cffb93:1"
time="2021-09-23T23:15:58Z" level=info msg="Waiting for liveness probe: tcp:wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:15:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="0fd83b8a55cffb93:6f1fa11ad3c2e412:0fd83b8a55cffb93:1"
time="2021-09-23T23:15:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:15:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:15:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:15:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:15:58Z" level=info msg="Found the right tls certificate for target: wcm-proxy-nsmgr.nsm-system:5005"
time="2021-09-23T23:15:58Z" level=info msg="Successfully connected to wcm-proxy-nsmgr.nsm-system:5005" operation=initRegistryClient span="0fd83b8a55cffb93:6f1fa11ad3c2e412:0fd83b8a55cffb93:1"
2021/09/23 23:15:58 Reporting span 0fd83b8a55cffb93:6f1fa11ad3c2e412:0fd83b8a55cffb93:1
{"level":"info","ts":1632438958.8053398,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:15:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=0fd83b8a55cffb93:0fd83b8a55cffb93:0000000000000000:1"
time="2021-09-23T23:15:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=0fd83b8a55cffb93:0fd83b8a55cffb93:0000000000000000:1"
2021/09/23 23:15:58 Reporting span 0fd83b8a55cffb93:14377a2f621442ee:0fd83b8a55cffb93:1
time="2021-09-23T23:15:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=0fd83b8a55cffb93:0fd83b8a55cffb93:0000000000000000:1"
2021/09/23 23:15:58 Reporting span 0fd83b8a55cffb93:0fd83b8a55cffb93:0000000000000000:1
{"level":"info","ts":1632438958.8447137,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438958.8520353,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438958.852205,"caller":"nseinformer/nseInformerController.go:202","msg":"Retrieved 2 endpoints from the local NSR","app":"nse-discovery"}
{"level":"info","ts":1632438958.8523545,"caller":"nseinformer/nseInformerController.go:205","msg":"Getting endpoints from the global NSR at: example.wcm-cisco.com:443","app":"nse-discovery"}
time="2021-09-23T23:15:58Z" level=info msg="==--> discovery.FindNetworkService() span:5e2c9c9ef89fccc3:5e2c9c9ef89fccc3:0000000000000000:1"
time="2021-09-23T23:15:58Z" level=info msg=">><<-- request={\"network_service_name\":\"example\"} span=5e2c9c9ef89fccc3:5e2c9c9ef89fccc3:0000000000000000:1"
time="2021-09-23T23:15:58Z" level=info msg=">><<-- nsrURL=\"example.wcm-cisco.com:443\" span=5e2c9c9ef89fccc3:5e2c9c9ef89fccc3:0000000000000000:1"
time="2021-09-23T23:15:58Z" level=info msg="Requesting NetworkServiceDiscoveryClient..."
time="2021-09-23T23:15:58Z" level=info msg="==----> initRegistryClient() span:5e2c9c9ef89fccc3:5ec15040b8008542:5e2c9c9ef89fccc3:1"
time="2021-09-23T23:15:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:15:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5e2c9c9ef89fccc3:5ec15040b8008542:5e2c9c9ef89fccc3:1"
time="2021-09-23T23:15:58Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:15:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:15:58Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:15:58Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:15:58Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:15:58Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="5e2c9c9ef89fccc3:5ec15040b8008542:5e2c9c9ef89fccc3:1"
2021/09/23 23:15:58 Reporting span 5e2c9c9ef89fccc3:5ec15040b8008542:5e2c9c9ef89fccc3:1
{"level":"info","ts":1632438958.9651997,"caller":"nseinformer/nseInformerController.go:426","msg":"Discover NSEs from NSR: network_service_name:\"example\" ","app":"nse-discovery"}
time="2021-09-23T23:15:58Z" level=info msg=">><<---- /registry.NetworkServiceDiscovery/FindNetworkService()=\"\" span=5e2c9c9ef89fccc3:5e2c9c9ef89fccc3:0000000000000000:1"
time="2021-09-23T23:15:58Z" level=info msg=">><<---- request={\"network_service_name\":\"example\"} span=5e2c9c9ef89fccc3:5e2c9c9ef89fccc3:0000000000000000:1"
2021/09/23 23:15:58 Reporting span 5e2c9c9ef89fccc3:2aab9892717306f9:5e2c9c9ef89fccc3:1
time="2021-09-23T23:15:58Z" level=info msg=">><<---- response={\"payload\":\"IP\",\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_managers\":{\"kind-11-control-plane\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"},\"kind-12-control-plane\":{\"name\":\"kind-12-control-plane\",\"url\":\"172.17.0.4:5001\",\"expiration_time\":{\"seconds\":40},\"state\":\"RUNNING\"}},\"network_service_endpoints\":[{\"name\":\"example2kxlp\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-dgzfk\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"examplecscn5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-12-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-12_vl3-nse-example-dff8646dd-ch2hz\",\"wcm/cluster\":\"kind-12\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"},{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}]} span=5e2c9c9ef89fccc3:5e2c9c9ef89fccc3:0000000000000000:1"
2021/09/23 23:15:58 Reporting span 5e2c9c9ef89fccc3:5e2c9c9ef89fccc3:0000000000000000:1
{"level":"info","ts":1632438958.9727514,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example2kxlp","app":"nse-discovery"}
{"level":"info","ts":1632438958.9728074,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name example798f5","app":"nse-discovery"}
{"level":"info","ts":1632438958.9729676,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name examplecscn5","app":"nse-discovery"}
{"level":"info","ts":1632438958.9729736,"caller":"nseinformer/nseInformerController.go:334","msg":"found NSE with name exampler6q79","app":"nse-discovery"}
{"level":"info","ts":1632438958.9729798,"caller":"nseinformer/nseInformerController.go:214","msg":"Retrieved 4 endpoints from the global NSR","app":"nse-discovery"}
{"level":"info","ts":1632438958.9729888,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438958.9730155,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438958.9730256,"caller":"nseinformer/nseInformerController.go:349","msg":"NSE diff:  For cluster kind-11, skipping endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438958.9730368,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438958.97305,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438958.9730625,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438958.9730682,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438958.973094,"caller":"nseinformer/nseInformerController.go:346","msg":"NSE diff: For cluster kind-11, adding endpoint 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438958.9731011,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'example2kxlp'","app":"nse-discovery"}
{"level":"info","ts":1632438958.9731057,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'example798f5'","app":"nse-discovery"}
{"level":"info","ts":1632438958.97311,"caller":"nseinformer/nseInformerController.go:362","msg":"NSE diff:  For cluster kind-11, skip comparing endpoint 'examplecscn5'","app":"nse-discovery"}
{"level":"info","ts":1632438958.9731154,"caller":"nseinformer/nseInformerController.go:359","msg":"NSE diff: For cluster kind-11, endpoint match 'exampler6q79'","app":"nse-discovery"}
{"level":"info","ts":1632438958.9731207,"caller":"nseinformer/nseInformerController.go:219","msg":"Global NSE diff result: 0 new NSEs to add, 0 NSEs to delete","app":"nse-discovery"}
{"level":"info","ts":1632438958.9731262,"caller":"nseinformer/nseInformerController.go:222","msg":"Registering 2 local NSEs to global registry","app":"nse-discovery"}
time="2021-09-23T23:15:58Z" level=info msg="Requesting NseRegistryClient..."
time="2021-09-23T23:15:58Z" level=info msg="==--> initRegistryClient() span:5d4fab45398f564d:5d4fab45398f564d:0000000000000000:1"
time="2021-09-23T23:15:58Z" level=info msg="Waiting for liveness probe: tcp:example.wcm-cisco.com:443"
time="2021-09-23T23:15:58Z" level=info msg="Registry port now available, attempting to connect..." operation=initRegistryClient span="5d4fab45398f564d:5d4fab45398f564d:0000000000000000:1"
time="2021-09-23T23:15:59Z" level=info msg="Fetch tlsConfig for Trust Domain: central.com"
time="2021-09-23T23:15:59Z" level=info msg="Fetch tlsConfig for Trust Domain: member1.com"
time="2021-09-23T23:15:59Z" level=info msg="Fetch tlsConfig for Trust Domain: member2.com"
time="2021-09-23T23:15:59Z" level=info msg="Retrived 3 tlsconfigs"
time="2021-09-23T23:15:59Z" level=info msg="Found the right tls certificate for target: example.wcm-cisco.com:443"
time="2021-09-23T23:15:59Z" level=info msg="Successfully connected to example.wcm-cisco.com:443" operation=initRegistryClient span="5d4fab45398f564d:5d4fab45398f564d:0000000000000000:1"
2021/09/23 23:15:59 Reporting span 5d4fab45398f564d:5d4fab45398f564d:0000000000000000:1
time="2021-09-23T23:15:59Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:15:59Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:15:59 Reporting span 23de42e0d8076081:23de42e0d8076081:0000000000000000:1
time="2021-09-23T23:15:59Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"example798f5\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-vsm49\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
time="2021-09-23T23:15:59Z" level=info msg=">><<-- /registry.NetworkServiceRegistry/RegisterNSE()=\"\" span=<nil>"
time="2021-09-23T23:15:59Z" level=info msg=">><<-- request={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
2021/09/23 23:15:59 Reporting span 4fc6c58e1c6e850c:4fc6c58e1c6e850c:0000000000000000:1
time="2021-09-23T23:15:59Z" level=info msg=">><<-- response={\"network_service\":{\"name\":\"example\",\"payload\":\"IP\"},\"network_service_manager\":{\"name\":\"kind-11-control-plane\",\"url\":\"172.17.0.3:5001\",\"state\":\"RUNNING\"},\"network_service_endpoint\":{\"name\":\"exampler6q79\",\"payload\":\"IP\",\"network_service_name\":\"example\",\"network_service_manager_name\":\"kind-11-control-plane\",\"labels\":{\"app\":\"vl3-nse-example\",\"networkservicename\":\"example\",\"nsepod.name\":\"example-kind-11_vl3-nse-example-5859574cb9-lzths\",\"wcm/cluster\":\"kind-11\",\"wcm/nsr.addr\":\"example.wcm-cisco.com\",\"wcm/nsr.port\":\"443\"},\"state\":\"RUNNING\"}} span=<nil>"
{"level":"info","ts":1632438959.0819936,"caller":"nseinformer/nseInformerController.go:284","msg":"No endpoints to remove from Global registry.","app":"nse-discovery"}
==== END logs for container wcm-nse-discovery of pod wcm-system/wcm-nse-discovery-7d675cc5f6-7597g ====
